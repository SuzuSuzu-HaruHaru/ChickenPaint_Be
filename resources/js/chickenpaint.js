/*
    ChickenPaint Be
    https://github.com/satopian/ChickenPaint_Be
    by satopian
    Customized from ChickenPaint by Nicholas Sherlock.
    GNU GENERAL PUBLIC LICENSE
    Version 3, 29 June 2007
    <http://www.gnu.org/licenses/>
*/
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/
/*
    jQuery JavaScript Library
    (c) OpenJS Foundation and other contributors | https://jquery.com/license/
    EventEmitter v5.2.9 - git.io/ee
    Unlicense - http://unlicense.org/
    Oliver Caldwell - https://oli.me.uk/
*/
/*
 Bootstrap v5.3.3 (https://getbootstrap.com/)
 Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
 Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
 jQuery throttle / debounce - v1.1 - 3/7/2010
 http://benalman.com/projects/jquery-throttle-debounce-plugin/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
*/
!function(){function da(a){return a&&a.__esModule?a.default:a}function Ke(a,c,d,b){Object.defineProperty(a,c,{get:d,set:b,enumerable:!0,configurable:!0})}function Vd(a){return a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a}function zi(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Gb(a,c){if(!(a instanceof c))throw TypeError("Cannot call a class as a function");}function el(a,c){for(var d=0;d<c.length;d++){var b=
c[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}function Hb(a,c,d){return c&&el(a.prototype,c),d&&el(a,d),a}function Sc(a){return(Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)})(a)}function hd(a,c,d){return(hd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(b,f,k){var l;for(l=b;!Object.prototype.hasOwnProperty.call(l,f)&&null!==(l=Sc(l)););if(l)return f=Object.getOwnPropertyDescriptor(l,
f),f.get?f.get.call(k||b):f.value})(a,c,d||a)}function fl(a,c){return(fl=Object.setPrototypeOf||function(d,b){return d.__proto__=b,d})(a,c)}function dc(a,c){if("function"!=typeof c&&null!==c)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,writable:!0,configurable:!0}});c&&fl(a,c)}function id(a,c,d){return c in a?Object.defineProperty(a,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[c]=d,a}function Le(a){for(var c=
1;c<arguments.length;c++){var d=null!=arguments[c]?arguments[c]:{},b=Object.keys(d);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(d).filter(function(f){return Object.getOwnPropertyDescriptor(d,f).enumerable})));b.forEach(function(f){id(a,f,d[f])})}return a}function Ai(a,c){return c=null!=c?c:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):function(d,b){b=Object.keys(d);Object.getOwnPropertySymbols&&(d=Object.getOwnPropertySymbols(d),
b.push.apply(b,d));return b}(Object(c)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))}),a}function od(a,c){return!c||"object"!==Vd(c)&&"function"!=typeof c?zi(a):c}function Bi(a,c){(null==c||c>a.length)&&(c=a.length);for(var d=0,b=Array(c);d<c;d++)b[d]=a[d];return b}function gl(a,c){if(a){if("string"==typeof a)return Bi(a,c);var d=Object.prototype.toString.call(a).slice(8,-1);if("Object"===d&&a.constructor&&(d=a.constructor.name),"Map"===d||"Set"===d)return Array.from(d);
if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Bi(a,c)}}function te(a,c){if(!(a=function(d){if(Array.isArray(d))return d}(a)||function(d,b){var f,k=null==d?null:"undefined"!=typeof Symbol&&d[Symbol.iterator]||d["@@iterator"];if(null!=k){var l=[],h=!0,e=!1;try{for(k=k.call(d);!(h=(f=k.next()).done)&&(l.push(f.value),!b||l.length!==b);h=!0);}catch(p){e=!0;var g=p}finally{try{h||null==k.return||k.return()}finally{if(e)throw g;}}return l}}(a,c)||gl(a,c)))throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
return a}function ce(a){var c=Array.isArray(a)?Bi(a):void 0;c||(c="undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"]?Array.from(a):void 0);if(!(a=c||gl(a)))throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return a}function hl(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(c){}return(hl=function(){return!!a})()}function ec(a){var c=
hl();return function(){var d,b=Sc(a);return d=c?Reflect.construct(b,arguments,Sc(this).constructor):b.apply(this,arguments),od(this,d)}}function Ma(a){for(var c in Ma.DEFAULTS)Ma.DEFAULTS.hasOwnProperty(c)&&(this[c]=Ma.DEFAULTS[c]);for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])}function Sa(a,c,d,b){this.left=a;this.top=c;this.right=d;this.bottom=b}function hf(a,c){this.width=0|a;this.height=0|c}function de(a,c){var d=document.createElement("canvas");return d.width=a,d.height=c,d}function Ci(a,c){return document.createElement("canvas").getContext("2d").createImageData(a,
c)}function I(a,c){"number"==typeof a?(hf.call(this,a,c),this.imageData=Ci(this.width,this.height)):(hf.call(this,a.width,a.height),this.imageData=a);this.data=this.imageData.data}function il(a,c,d,b){var f,k,l=0,h=[0,0,0,0];for(k=f=0;k<b&&k<d;k++){for(var e=0;e<I.BYTES_PER_PIXEL;e++)h[e]+=a[f++];l++}for(e=k=0;e<d;e++){if(e+b<d){f=(e+b)*I.BYTES_PER_PIXEL;for(var g=0;g<I.BYTES_PER_PIXEL;g++)h[g]+=a[f++];l++}for(f=0;f<I.BYTES_PER_PIXEL;f++)c[k++]=Math.round(h[f]/l);if(0<=e-b){f=(e-b)*I.BYTES_PER_PIXEL;
for(g=0;g<I.BYTES_PER_PIXEL;g++)h[g]-=a[f++];l--}}}function jl(a,c){if(0==(c%=4))return a;var d=de(0,0),b=d.getContext("2d");switch(0==c%2?(d.width=a.width,d.height=a.height):(d.width=a.height,d.height=a.width),c){case 1:b.rotate(Math.PI/2);b.drawImage(a,0,-a.height);break;case 2:b.rotate(Math.PI);b.drawImage(a,-a.width,-a.height);break;case 3:b.rotate(-Math.PI/2);b.drawImage(a,-a.width,0);break;default:return a}return d}function Ib(a,c){Mb.call(this,a);this.layers=[];this.expanded=!0;this.blendMode=
c}function ip(a,c){return a+c}function ob(a,c,d){hf.call(this,a,c);this.createBitmap(a,c,d)}function kl(a,c,d,b){var f,k=0,l=0;for(f=0;f<b&&f<d;f++)l+=a[f],k++;for(var h=f=0;h<d;h++)h+b<d&&(l+=a[h+b],k++),c[f++]=Math.round(l/k),0<=h-b&&(l-=a[h-b],k--)}function T(){}function Mb(a){this.name=a||"";this.parent=null;this.lockAlpha=!1;this.alpha=100;this.visible=!0;this.blendMode=T.LM_NORMAL;this.mask=null;this.maskVisible=this.maskLinked=!0;this.maskThumbnail=null;this.useLegacyMultiply=!1}function Wa(a,
c,d){Mb.call(this,d);0<a&&0<c?this.image=new I(a,c):this.image=null;this.clip=!1;this.imageThumbnail=null}function og(a,c,d){d?(this.isGroup=d instanceof Ib,this.image=d.image,this.mask=d.getEffectiveMask(),this.layer=d,this.blendMode=d.blendMode,this.alpha=d.alpha,this.visible=d.visible):(this.isGroup=!0,this.image=null,this.mask=null,this.layer=null,this.blendMode=T.LM_PASSTHROUGH,this.alpha=100,this.visible=!0);this.dirtyRect=new Sa(0,0,a,c);this.layers=[];this.parent=null;this.clip=!1}function ll(a,
c,d,b){function f(){return 0<g.length?g.pop():new I(c,d)}function k(m){if(0==m.layers.length)return null;if(1==m.layers.length&&(null==m.mask||null==m.layers[0].mask)){var n=m.layers[0];return n.alpha=Math.round(m.alpha*n.alpha/100),m.blendMode!=T.LM_PASSTHROUGH&&(n.blendMode=m.blendMode),n.mask=m.mask||n.mask,m.layer&&p.set(m.layer,n),n}return m.blendMode==T.LM_PASSTHROUGH&&100==m.alpha&&null==m.mask?m.layers:(m.image=f(),m)}function l(m){var n=new og(c,d,m);return p.set(m,n),n}function h(m,n){m&&
(m.dirtyRect.union(n),h(m.parent,n))}var e,g=[],p=new Map;this.invalidateLayerRect=function(m,n){h(p.get(m),n)};this.buildTree=function(){if(!e){if(e=function u(r){if(0==r.getEffectiveAlpha())return null;for(var w=l(r),z=0;z<r.layers.length;z++){var G=r.layers[z],L=r.layers[z+1];if(G instanceof Wa&&L&&L.clip){L=new og(c,d,null);L.blendMode=G.blendMode;L.alpha=100;L.clip=!0;L.addChildren(l(G));for(z+=1;z<r.layers.length&&r.layers[z].clip;z++)0<r.layers[z].getEffectiveAlpha()&&L.addChildren(l(r.layers[z]));
0<G.getEffectiveAlpha()&&w.addChildren(k(L));--z}else G instanceof Ib?w.addChildren(u(G)):0<G.getEffectiveAlpha()&&w.addChildren(l(G))}return k(w)}(a)){if(Array.isArray(e)||b&&(100>e.alpha||e.mask)){var m=e;(e=new og(c,d)).blendMode=Array.isArray(m)?T.LM_NORMAL:m.blendMode;e.alpha=100;e.image=f();e.addChildren(m)}}else(e=new og(c,d,{image:f(),blendMode:T.LM_NORMAL,alpha:100,getEffectiveMask:function(){return null},visible:!0})).image.clearAll(0);g=[]}};this.resetTree=function(){e&&(function r(n){if(n.isGroup){n.image&&
g.push(n.image);var u=!0,w=!1,z=void 0;try{for(var G,L=n.layers[Symbol.iterator]();!(u=(G=L.next()).done);u=!0)r(G.value)}catch(N){w=!0,z=N}finally{try{u||null==L.return||L.return()}finally{if(w)throw z;}}}}(e),e=null,p.clear())};this.layerPropertyChanged=function(m,n){var r=p.get(m);r&&r.visible==m.visible&&r.alpha==m.alpha&&null==r.mask==(null==m.getEffectiveMask())&&r.blendMode==T.LM_PASSTHROUGH==(m.blendMode==T.LM_PASSTHROUGH)&&"clip"!==n?(r.blendMode=m.blendMode,h(r,new Sa(0,0,c,d))):this.resetTree()};
this.blendTree=function(){return function r(n){if(!n||!n.isGroup)return n;var u,w,z=n.dirtyRect,G=!0,L=!0;if(n.blendMode==T.LM_PASSTHROUGH&&n.parent&&z.union(n.parent.dirtyRect),z.isEmpty())return n;n.blendMode==T.LM_PASSTHROUGH&&n.parent&&(G=!1,u=n.image,w=n.parent.image,z.getWidth()==u.width&&z.getHeight()==u.height?u.copyPixelsFrom(w):T.replaceOntoFusionWithOpaqueLayer(u,w,100,z));for(u=0;u<n.layers.length;u++){var N=r(n.layers[u]);if(G){G=n.image;w=N.image;var M=N.alpha,ca=z;N=N.mask;if(100!=
M||N||ca.getWidth()!=G.width||ca.getHeight()!=G.height){var W="replaceOntoFusionWith";100==M?W+="OpaqueLayer":W+="TransparentLayer";N&&(W+="Masked");T[W](G,w,M,ca,N)}else G.copyPixelsFrom(w);G=!1}else L=L&&n.image.hasAlphaInRect(z),T.fuseImageOntoImage(n.image,L,N.image,N.alpha,N.blendMode,z,N.mask)}n.clip&&(L=n.layers[0],100>L.alpha?L.mask?T.replaceAlphaOntoFusionWithTransparentLayerMasked(n.image,L.image,L.alpha,z,L.mask):T.replaceAlphaOntoFusionWithTransparentLayer(n.image,L.image,L.alpha,z):L.mask?
T.replaceAlphaOntoFusionWithOpaqueLayerMasked(n.image,L.image,100,z,L.mask):T.replaceAlphaOntoFusionWithOpaqueLayer(n.image,L.image,100,z));return n.dirtyRect.makeEmpty(),n}(e)}}function jp(){function a(p){if(null!=e&&p.curSize==c&&p.curSqueeze==d&&p.curAngle==b&&p.tip==f)return e;switch(p.tip){case Ma.TIP_ROUND_AIRBRUSH:!function(m,n){var r=Math.ceil(n.curSize),u=r/2,w=n.curSize/2*(n.curSize/2),z=1+10*n.curSqueeze,G=Math.cos(n.curAngle);n=Math.sin(n.curAngle);for(var L=0,N=0;N<r;N++)for(var M=0;M<
r;M++){var ca=M+.5-u,W=N+.5-u,ka=(ca*G-W*n)*z;ca=W*G+ca*n;ka=ka*ka+ca*ca;ka<=w?m[L++]=~~(255*(1-ka/w)):m[L++]=0}}(k,p);break;case Ma.TIP_ROUND_AA:!function(m,n){var r=Math.ceil(n.curSize),u=r/2,w=n.curSize/2*(n.curSize/2),z=(n.curSize-2)/2*((n.curSize-2)/2),G=(n.curSize+2)/2*((n.curSize+2)/2),L=1+10*n.curSqueeze,N=Math.cos(n.curAngle);n=Math.sin(n.curAngle);for(var M=0,ca=0;ca<r;ca++)for(var W=0;W<r;W++){var ka=W+.5-u,ea=ca+.5-u,ma=(ka*N-ea*n)*L,Ca=ea*N+ka*n,Ja=ma*ma+Ca*Ca;if(Ja<=z)m[M++]=255;else if(Ja>
G)m[M++]=0;else{for(var Ha=Ja=0;4>Ha;Ha++)for(var V=0;4>V;V++)(ma=((ka=W+.25*V-u)*N-(ea=ca+.25*Ha-u)*n)*L)*ma+(Ca=ea*N+ka*n)*Ca<=w&&(Ja+=1);m[M++]=Math.min(16*Ja,255)}}}(k,p);break;case Ma.TIP_ROUND_PIXEL:!function(m,n){var r=Math.ceil(n.curSize),u=r/2,w=n.curSize/2*(n.curSize/2),z=1+10*n.curSqueeze,G=Math.cos(n.curAngle);n=Math.sin(n.curAngle);for(var L=0,N=0;N<r;N++)for(var M=0;M<r;M++){var ca=M+.5-u,W=N+.5-u,ka=(ca*G-W*n)*z;ca=W*G+ca*n;ka*ka+ca*ca<=w?m[L++]=255:m[L++]=0}}(k,p);break;case Ma.TIP_SQUARE_AA:!function(m,
n){var r=Math.ceil(n.curSize),u=r/2,w=n.curSize*Math.sin(Math.PI/4),z=w/2/(1+10*n.curSqueeze);w/=2;var G=z-1,L=w-1,N=z+1,M=w+1,ca=Math.cos(n.curAngle);n=Math.sin(n.curAngle);for(var W=0,ka=0;ka<r;ka++)for(var ea=0;ea<r;ea++){var ma=ea+.5-u,Ca=ka+.5-u,Ja=Math.abs(ma*ca-Ca*n);ma=Math.abs(Ca*ca+ma*n);if(Ja<=G&&ma<=L)m[W++]=255;else if(Ja>N||ma>M)m[W++]=0;else{for(var Ha=0,V=0;4>V;V++)for(var Na=0;4>Na;Na++)Ja=Math.abs((ma=ea+.25*Na-u)*ca-(Ca=ka+.25*V-u)*n),ma=Math.abs(Ca*ca+ma*n),Ja<=z&&ma<=w&&Ha++;
m[W++]=Math.min(16*Ha,255)}}}(k,p);break;case Ma.TIP_SQUARE_PIXEL:!function(m,n){var r=Math.ceil(n.curSize),u=r/2,w=n.curSize*Math.sin(Math.PI/4),z=w/2/(1+10*n.curSqueeze);w/=2;var G=Math.cos(n.curAngle);n=Math.sin(n.curAngle);for(var L=0,N=0;N<r;N++)for(var M=0;M<r;M++){var ca=M+.5-u,W=N+.5-u,ka=Math.abs(W*G+ca*n);Math.abs(ca*G-W*n)<=z&&ka<=w?m[L++]=255:m[L++]=0}}(k,p)}return e=k,c=p.curSize,f=p.tip,d=p.curSqueeze,b=p.curAngle,k}var c,d,b,f,k=new Uint8Array(160801),l=new Uint8Array(161604),h=[new Float32Array(402),
new Float32Array(402)],e=null,g=this;this.getDab=function(p,m,n){var r={alpha:n.curAlpha,width:Math.ceil(n.curSize),height:Math.ceil(n.curSize)},u=n.isAA&&n.tip!=Ma.TIP_ROUND_PIXEL;u&&(r.width++,r.height++);p=p-r.width/2+.5;m=m-r.height/2+.5;var w=Math.floor(p),z=Math.floor(m);return u?r.brush=function(G,L,N){var M=a(G),ca=Math.ceil(G.curSize);G=Math.ceil(G.curSize)+1;var W=(1-L)*(1-N),ka=L*(1-N),ea=L*N,ma=(1-L)*N,Ca=0;L=0;N=h[0];var Ja=h[1];N.fill(0);for(var Ha=0;Ha<ca;Ha++){var V=0;for(Ja[0]=0;V<
ca;V++,Ca++,L++){var Na=M[Ca];l[L]=N[V]+Na*W+.5|0;N[V+1]+=Na*ka;Ja[V]+=Na*ma;Ja[V+1]=Na*ea}l[L++]=N[V]+.5|0;V=N;N=Ja;Ja=V}for(M=0;M<G;M++,L++)l[L]=N[M]+.5|0;return l}(n,p-w,m-z):r.brush=a(n),r.x=w,r.y=z,0<n.texture&&null!=this.texture&&(r.brush==k&&(l.set(k),r.brush=l),function(G,L){var N=Math.floor(255*L),M=g.texture,ca=G.x%M.width,W=G.y%M.height,ka=0;0>ca&&(ca+=M.width);0>W&&(W+=M.height);for(var ea=0;ea<G.height;ea++){L=W*M.width+ca;var ma=W*M.width+M.width;for(var Ca=0;Ca<G.width;Ca++)G.brush[ka]=
~~(G.brush[ka]*(M.data[L]*N/255^255)/255),ka++,++L==ma&&(L-=M.width);++W==M.height&&(W=0)}}(r,n.texture)),r};this.setTexture=function(p){this.texture=p}}function Di(a,c,d){this.bmp=a;this.x=c;this.y=d}function ch(a){if(0==a.saturation)return a.value<<16|a.value<<8|a.value;var c=a.hue/60;c-=Math.floor(c);var d=a.saturation/255,b=~~(a.value*(1-d)),f=~~(a.value*(1-d*c));c=~~(a.value*(1-d*(1-c)));switch(~~(a.hue/60)){case 0:return a.value<<16|c<<8|b;case 1:return f<<16|a.value<<8|b;case 2:return b<<16|
a.value<<8|c;case 3:return b<<16|f<<8|a.value;case 4:return c<<16|b<<8|a.value;case 5:return a.value<<16|b<<8|f;default:return 0}}function ac(a){this.value=this.saturation=this.hue=this.rgb=0;this.setRgb(a||0)}function kp(){var a,c=!1;this.nextGaussian=function(){if(c)return c=!1,a;do var d=(b=2*Math.random()-1)*b+(f=2*Math.random()-1)*f;while(1<=d||0==d);var b,f;d=Math.sqrt(-2*Math.log(d)/d);return a=f*d,c=!0,b*d}}function pc(){this.setToIdentity()}function Ei(a){for(var c=["imageSmoothingEnabled",
"mozImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled"],d=0;d<c.length;d++)if(c[d]in a)return c[d];return null}function Fi(a,c){var d=Ei(a);d&&(a[d]=c)}function ue(a,c,d){this.r=a;this.g=c;this.b=d}function ml(a){for(var c=0,d=0;d<a.length;d++)c+=a[d];return c/a.length}function nl(a){for(var c=new ue(0,0,0),d=0;d<a.length;d++){var b=a[d];c.r+=b.r;c.g+=b.g;c.b+=b.b}return c.r/=a.length,c.g/=a.length,c.b/=a.length,c}function ol(a,c){var d=a.data;if(0<c.left)for(var b=c.top;b<
c.bottom;b++){var f=b*a.width,k=f;f=d[f+c.left];for(var l=0;l<c.left;l++,k++)d[k]=f}if(c.right<a.width)for(b=c.top;b<c.bottom;b++)for(k=b*a.width+c.right,f=d[k-1],l=c.right;l<a.width;l++,k++)d[k]=f;for(k=b=0;k<c.top;k++)for(f=c.top*a.width,l=0;l<a.width;l++,f++,b++)d[b]=d[f];b=c.bottom*a.width;for(k=c.bottom;k<a.width;k++)for(f=(c.bottom-1)*a.width,l=0;l<a.width;l++,f++,b++)d[b]=d[f]}function dh(a,c){return a+c}function pl(a){return a?a.width*a.height*4:0}function ud(a,c){function d(J){xc=!1;(0<jb.size||
0<Dc.size)&&(J?h():Ya||setTimeout(h,1E3))}function b(){X.emitEvent("changeSelection",[])}function f(J){X.emitEvent("updateRegion",[J])}function k(){X.emitEvent("changeStructure");wb.resetTree();w();f(X.getBounds())}function l(J,Y,ta){X.emitEvent("changeLayer",[J]);ta||(wb.layerPropertyChanged(J,Y),f(X.getBounds()))}function h(){var J=!0,Y=!1,ta=void 0;try{for(var R,E=jb[Symbol.iterator]();!(J=(R=E.next()).done);J=!0){var P=R.value;P.rebuildImageThumbnail();X.emitEvent("changeLayerImageThumb",[P])}}catch(Ba){Y=
!0,ta=Ba}finally{try{J||null==E.return||E.return()}finally{if(Y)throw ta;}}J=!0;Y=!1;ta=void 0;try{for(var aa,qa=Dc[Symbol.iterator]();!(J=(aa=qa.next()).done);J=!0){var Aa=aa.value;Aa.rebuildMaskThumbnail();X.emitEvent("changeLayerMaskThumb",[Aa])}}catch(Ba){Y=!0,ta=Ba}finally{try{J||null==qa.return||qa.return()}finally{if(Y)throw ta;}}jb.clear();Ya&&(clearTimeout(Ya),Ya=null)}function e(J,Y,ta,R){Array.isArray(J)||(J=[J]);J.forEach(function(Oa){return wb.invalidateLayerRect(Oa,Y)});var E=!1;if(ta){Yb.union(Y);
ta=!0;var P=!1,aa=void 0;try{for(var qa,Aa=J[Symbol.iterator]();!(ta=(qa=Aa.next()).done);ta=!0){var Ba=qa.value;Ba instanceof Wa&&(jb.add(Ba),E=!0)}}catch(Oa){P=!0,aa=Oa}finally{try{ta||null==Aa.return||Aa.return()}finally{if(P)throw aa;}}}R&&(Va.union(Y),J.forEach(function(Oa){Dc.add(Oa);xb&&xb.layer==Oa&&xb.invalidateRect(Y)}),E=!0);E&&(Ya&&(clearTimeout(Ya),Ya=null),xc||(Ya=setTimeout(h,1E3)));f(Y)}function g(J,Y){e(J,Y,!bb,bb)}function p(){return bb?ua.mask:ua.image}function m(){if(!jc.isEmpty()){if(bb){var J=
ua.mask;pb.brushMode==Ma.BRUSH_MODE_ERASE?va[Ma.BRUSH_MODE_PAINT].mergeOntoMask(J,Pb,4278190080):va[pb.brushMode].mergeOntoMask(J,Pb,255&Zc)}else{J=ua.image;var Y=ua.getLockAlpha();pb.brushMode==Ma.BRUSH_MODE_ERASE&&Y?va[Ma.BRUSH_MODE_PAINT].mergeOntoImage(J,kb,16777215):va[pb.brushMode].mergeOntoImage(J,kb,Zc);Y&&J.copyAlphaFrom(kb,jc)}jc.makeEmpty()}}function n(){ua instanceof Wa&&!Yb.isEmpty()&&(kb.copyBitmapRect(ua.image,Yb.left,Yb.top,Yb),Yb.makeEmpty())}function r(){ua.mask&&!Va.isEmpty()&&
(Pb.copyBitmapRect(ua.mask,Va.left,Va.top,Va),Va.makeEmpty())}function u(){bb?r():n()}function w(){var J=X.getBounds();Yb.set(J);Va.set(J)}function z(J){X.setHasUnsavedChanges(!0);0<qc.length&&(qc=[]);0!==Ab.length&&Ab[Ab.length-1].merge(J)?Ab[Ab.length-1].noChange()&&Ab.pop():(30<=Ab.length&&Ab.shift(),X.compactUndo(),Ab.push(J))}function G(J,Y){J||Y||(J=!bb,Y=bb);var ta=Ka.clone(),R=J?kb.copyRectXOR(ua.image,ta):null,E=Y?Pb.copyRectXOR(ua.mask,ta):null;this.layer=ua;Ka.makeEmpty();this.redo=this.undo=
function(){R&&this.layer.image.setRectXOR(R,ta);E&&this.layer.mask.setRectXOR(E,ta);e(this.layer,ta,null!=R,null!=E)};this.getMemoryUsed=function(P,aa){return(R?R.length:0)+(E?E.length:0)}}function L(J){var Y=J.maskLinked,ta=J.maskVisible;this.undo=function(){J.setMask(null);J.maskLinked=Y;J.maskVisible=ta;k();X.setActiveLayer(J,!1)};this.redo=function(){var R=new ob(X.width,X.height,8);R.clearAll(255);J.maskLinked=!0;J.maskVisible=!0;J.setMask(R);k();X.setActiveLayer(J,!0)};this.redo()}function N(J,
Y){var ta=J.mask,R=!1;var E=Y&&J instanceof Wa?J.image.clone():null;R=ua==J&&bb;this.undo=function(){J.setMask(ta);E&&(J.image.copyPixelsFrom(E),e(J,J.image.getBounds(),!0,!1));R&&X.setActiveLayer(J,!0);k()};this.redo=function(){E&&(T.multiplyAlphaByMask(J.image,100,J.mask),e(J,X.getBounds(),!0,!1));R&&X.setActiveLayer(J,!1);J.setMask(null);k()};this.redo()}function M(J,Y,ta){var R=ta instanceof Wa&&ta.clip,E=J.layers[Y],P=E instanceof Wa&&E.clip,aa=bb;this.undo=function(){J.removeLayer(ta);var qa=
J.layers[Y-1]||J.layers[0]||J;E instanceof Wa&&(E.clip=P);ta instanceof Wa&&(ta.clip=R);k();X.setActiveLayer(qa,aa)};this.redo=function(){J.insertLayer(Y,ta);P&&(ta instanceof Wa?ta.clip=!0:E.clip=!1);k();X.setActiveLayer(ta,!1)};this.redo()}function ca(J){var Y=J.clone(),ta=bb;this.undo=function(){Y.parent.removeLayer(Y);k();X.setActiveLayer(J,ta)};this.redo=function(){var R=J.name;R.endsWith(" Copy")||(R+=" Copy");Y.name=R;J.parent.insertLayer(J.parent.indexOf(J)+1,Y);k();X.setActiveLayer(Y,!1)};
this.redo()}function W(J){var Y=J.parent,ta=Y.indexOf(J),R=bb,E=0;if(J instanceof Wa&&!J.clip)for(var P=ta+1;P<Y.layers.length&&Y.layers[P]instanceof Wa&&Y.layers[P].clip;P++)E++;this.undo=function(){Y.insertLayer(ta,J);for(var aa=0;aa<E;aa++)Y.layers[aa+ta+1].clip=!0;k();X.setActiveLayer(J,R)};this.redo=function(){var aa;for(aa=0;aa<E;aa++)Y.layers[aa+ta+1].clip=!1;Y.removeLayerAtIndex(ta);aa=0==Y.layers.length?J.parent:Y.layers[Math.max(ta-1,0)];k();X.setActiveLayer(aa,!1)};this.getMemoryUsed=function(aa,
qa){return aa?0:J.getMemoryUsed()};this.redo()}function ka(J){var Y=J.parent.indexOf(J),ta=bb,R=new Wa(X.width,X.height,"");this.undo=function(){J.parent.setLayerAtIndex(Y,J);k();X.setActiveLayer(J,ta)};this.redo=function(){J.parent.setLayerAtIndex(Y,R);k();X.setActiveLayer(R,!1)};this.getMemoryUsed=function(P,aa){return P?0:J.getMemoryUsed()};var E=new ll(J,X.width,X.height,!1);E.buildTree();E=E.blendTree();R.name=J.name;R.alpha=E.alpha;R.image=E.image;R.blendMode=E.blendMode;R.mask=E.mask;R.blendMode==
T.LM_PASSTHROUGH&&(R.blendMode=T.LM_NORMAL);this.redo()}function ea(J){var Y=J.parent,ta=Y.layers[Y.indexOf(J)-1],R=new Wa(X.width,X.height,""),E=bb;this.undo=function(){var P=Y.indexOf(R);Y.removeLayerAtIndex(P);Y.insertLayer(P,J);Y.insertLayer(P,ta);k();X.setActiveLayer(J,E)};this.redo=function(){R.copyFrom(ta);0<J.getEffectiveAlpha()&&(R.mask?(T.multiplyAlphaByMask(R.image,R.alpha,R.mask),R.mask=null):T.multiplyAlphaBy(R.image,R.alpha),R.alpha=100,T.fuseImageOntoImage(R.image,!0,J.image,J.alpha,
J.blendMode,J.getBounds(),J.mask));var P=Y.indexOf(ta);Y.removeLayerAtIndex(P);Y.removeLayerAtIndex(P);Y.insertLayer(P,R);k();X.setActiveLayer(R,!1)};this.getMemoryUsed=function(P,aa){return P?0:J.getMemoryUsed()+R.getMemoryUsed()};this.redo()}function ma(){var J=X.getActiveLayer(),Y=wa.layers.slice(0),ta=new Wa(X.width,X.height,"");this.undo=function(){wa.layers=Y.slice(0);k();X.setActiveLayer(J,!1)};this.redo=function(){var R=X.fusionLayers();ta.copyImageFrom(R);wa.clearLayers();ta.setName(X.getDefaultLayerName(!1));
wa.addLayer(ta);k();X.setActiveLayer(ta,!1)};this.getMemoryUsed=function(R,E){return Y.map(function(P){return P.getMemoryUsed()}).reduce(dh,0)};this.redo()}function Ca(J,Y,ta){var R=J.parent,E=J.parent.indexOf(J),P=bb,aa=R.layers[R.indexOf(J)+1],qa=Y.layers[ta],Aa=J instanceof Wa&&J.clip,Ba=!!Aa&&J.getClippingBase(),Oa=0,tb=0;if(J instanceof Wa&&!J.clip)for(var Ea=E+1;Ea<R.layers.length&&R.layers[Ea]instanceof Wa&&R.layers[Ea].clip;Ea++)Oa++;else if(J instanceof Ib)for(Ea=ta;Ea<Y.layers.length&&Y.layers[Ea]instanceof
Wa&&Y.layers[Ea].clip;Ea++)tb++;this.undo=function(){J.parent.removeLayer(J);var ub=aa?R.indexOf(aa):R.layers.length;R.insertLayer(ub,J);J instanceof Wa&&(J.clip=Aa);for(ub=0;ub<Oa;ub++)R.layers[ub+E+1].clip=!0;for(ub=0;ub<tb;ub++)Y.layers[ub+ta].clip=!0;k();X.setActiveLayer(J,P)};this.redo=function(){for(var ub=0;ub<Oa;ub++)R.layers[ub+E+1].clip=!1;J.parent.removeLayer(J);ub=qa?Y.indexOf(qa):Y.layers.length;Y.insertLayer(ub,J);for(var Ec=0;Ec<tb;Ec++)Y.layers[Ec+ub+1].clip=!1;J instanceof Wa&&(J.clip&&
J.getClippingBase()!=Ba&&(J.clip=!1),qa instanceof Wa&&qa.clip&&(J.clip=!0));for(Ec=0;Ec<tb;Ec++)Y.layers[Ec+ub+1].clip=!1;k();X.setActiveLayer(J,!1)};this.redo()}function Ja(J,Y){var ta=J.substring(0,1).toUpperCase()+J.substring(1),R=function(E,P){Array.isArray(E)||(E=[E]);this.layers=E;this.from=this.layers.map(function(aa){return aa["get"+ta]()});this.to=P;this.redo()};return R.prototype=Object.create(pd.prototype),R.prototype.constructor=R,R.prototype.undo=function(){var E=this;this.layers.forEach(function(P,
aa){return P["set"+ta](E.from[aa])});this.layers.forEach(function(P){return l(P,J,!Y)})},R.prototype.redo=function(){var E=this;this.layers.forEach(function(P){return P["set"+ta](E.to)});this.layers.forEach(function(P){return l(P,J,!Y)})},R.prototype.merge=function(E){var P;if(P=E instanceof R)a:{P=this.layers;var aa=E.layers;if(P.length!=aa.length)P=!1;else{for(var qa=0;qa<P.length;qa++)if(P[qa]!=aa[qa]){P=!1;break a}P=!0}}return!!P&&(this.to=E.to,!0)},R.prototype.noChange=function(){for(var E=0;E<
this.from.length;E++)if(this.from[E]!=this.to)return!1;return!0},R}function Ha(J,Y){J=J.clone();Y=Y.clone();this.undo=function(){X.setSelection(J);f(X.getBounds())};this.redo=function(){X.setSelection(Y);f(X.getBounds())};this.noChange=function(){return J.equals(Y)}}function V(J,Y,ta){var R=Y?J.mask:J.image,E=R.cloneRect(ta);ta=ta.clone();this.undo=function(){R.copyBitmapRect(E,ta.left,ta.top,E.getBounds());X.setActiveLayer(J,Y);X.setSelection(ta);e(J,ta,!Y,Y)};this.redo=function(){Y?R.clearRect(ta,
0):R.clearRect(ta,16777215);Jc=new Di(E,ta.left,ta.top);X.setActiveLayer(J,Y);X.emptySelection();e(J,ta,!Y,Y)};this.getMemoryUsed=function(P,aa){return E==aa?0:E.getMemorySize()};this.redo()}function Na(J){var Y=X.getSelection(),ta=bb,R=new Wa(X.width,X.height,X.getDefaultLayerName(!1)),E=ua,P=E.parent;this.undo=function(){P.removeLayer(R);X.setSelection(Y);k();X.setActiveLayer(E,ta)};this.redo=function(){var aa,qa,Aa=P.indexOf(E),Ba=J.bmp.getBounds();(P.insertLayer(Aa+1,R),Ba.isInside(X.getBounds())?
(aa=J.x,qa=J.y):(aa=(X.width-J.bmp.width)/2|0,qa=(X.height-J.bmp.height)/2|0),J.bmp instanceof ob)?(Aa=new I(J.bmp.width,J.bmp.height),Aa.copyPixelsFromGreyscale(J.bmp),R.image.copyBitmapRect(Aa,aa,qa,Ba)):R.image.copyBitmapRect(J.bmp,aa,qa,Ba);X.emptySelection();k();X.setActiveLayer(R,!1)};this.getMemoryUsed=function(aa,qa){return J.bmp==qa?0:J.bmp.getMemorySize()};this.redo()}a|=0;c|=0;var wa=new Ib("Root",T.LM_NORMAL),wb=new ll(wa,a,c,!0),kb=new I(a,c),Yb=new Sa(0,0,a,c),Pb=new ob(a,c,8),Va=new Sa(0,
0,a,c),Mc=new ob(a,c,32),jc=new Sa(0,0,0,0),za=new jp,X=this,va=[],ua=wa,bb=!1,xb=null,Ka=new Sa(0,0,0,0),fc=!1,Bb=new Sa(0,0,0,0),kc=null,Kc=new kp,fb=null,Jc=null,Ab=[],qc=[],pb=null,yb=0,$c=0,$b=0,wc=!1,xc=!1,Dc=new Set,jb=new Set,Ya=null,Zc=0,lb="smooth";this.getLayersRoot=function(){return wa};this.getSelectionAutoSelect=function(){return Bb.isEmpty()?this.getBounds():this.getSelection()};this.getSelection=function(){return Bb.clone()};this.setHasUnsavedChanges=function(J){J!=fc&&(fc=J,this.emitEvent("unsavedChanges",
[J]))};this.getHasUnsavedChanges=function(){return fc};this.isAddLayerMaskAllowed=function(){return!ua.mask};this.addLayerMask=function(){this.isAddLayerMaskAllowed()&&z(new L(ua))};this.isRemoveLayerMaskAllowed=function(){return null!==ua.mask};this.removeLayerMask=function(){this.isRemoveLayerMaskAllowed()&&z(new N(ua,!1))};this.isApplyLayerMaskAllowed=function(){return null!==ua.mask&&ua instanceof Wa};this.applyLayerMask=function(J){this.isApplyLayerMaskAllowed()&&z(new N(ua,!0))};this.addLayer=
function(J){var Y,ta;if(ua instanceof Ib&&ua.expanded?(Y=ua,ta=ua.layers.length):ta=(Y=ua.parent).layers.indexOf(ua)+1,"group"===J){for(;Y.layers[ta]instanceof Wa&&Y.layers[ta].clip;)ta++;J=new Ib(this.getDefaultLayerName(!0),T.LM_PASSTHROUGH)}else(J=new Wa(this.width,this.height,this.getDefaultLayerName(!1))).image.clearAll(16777215);return z(new M(Y,ta,J)),J};this.addLayerObject=function(J,Y){J.addLayer(Y);J==wa&&1==wa.layers.length&&(ua=Y);k()};this.addLayerGroupObject=function(J,Y,ta){for(var R=
[],E=0;E<ta;E++)R.unshift(J.layers.pop());R.forEach(function(P){return Y.addLayer(P)});this.addLayerObject(J,Y)};this.isRemoveLayerAllowed=function(){return ua instanceof Wa?wa.getLinearizedLayerList(!1).some(function(J){return J instanceof Wa&&J!=ua}):ua instanceof Ib&&wa.getLinearizedLayerList(!1).some(function(J){return J instanceof Wa&&!J.hasAncestor(ua)})};this.removeLayer=function(){return!!this.isRemoveLayerAllowed()&&(z(new W(ua)),!0)};this.duplicateLayer=function(){z(new ca(ua))};this.isMergeDownAllowed=
function(){var J=ua.parent.indexOf(ua);return 0<J&&ua instanceof Wa&&ua.parent.layers[J-1]instanceof Wa};this.mergeDown=function(){this.isMergeDownAllowed()&&z(new ea(ua))};this.isMergeGroupAllowed=function(){return ua instanceof Ib&&0<ua.getEffectiveAlpha()};this.mergeGroup=function(){this.isMergeGroupAllowed()&&z(new ka(ua))};this.isMergeAllLayersAllowed=function(){return 1<wa.getLinearizedLayerList(!1).length};this.mergeAllLayers=function(){this.isMergeAllLayersAllowed()&&z(new ma)};this.relocateLayer=
function(J,Y,ta){J&&Y&&J!=Y&&!Y.hasAncestor(J)&&z(new Ca(J,Y,ta))};this.setLayerVisibility=function(J,Y){var ta=[];if(J.ancestorsAreVisible())J.visible!=Y&&z(new A(J,Y));else{for(;null!=J;J=J.parent)J.visible||ta.push(J);z(new A(ta,!0))}};this.expandLayerGroup=function(J,Y){J.expanded!=Y&&(J.expanded=Y,!Y&&ua.hasAncestor(J)&&this.setActiveLayer(J,!1),l(J,"expanded",!0))};this.setLayerAlpha=function(J){ua.getAlpha()!=J&&z(new vb(ua,J))};this.setLayerMaskLinked=function(J){ua.maskLinked!=J&&z(new Fd(ua,
J))};this.setLayerMaskVisible=function(J,Y){J.maskVisible!=Y&&z(new ee(J,Y))};this.setLayerBlendMode=function(J){ua.getBlendMode()!=J&&(J!=T.LM_PASSTHROUGH||ua instanceof Ib)&&z(new Gd(ua,J))};this.setLayerName=function(J,Y){J.getName()!=Y&&z(new Ga(J,Y))};this.paintDab=function(J,Y,ta){pb.applyPressure(ta);0<pb.scattering&&(J+=Kc.nextGaussian()*pb.curScattering/4,Y+=Kc.nextGaussian()*pb.curScattering/4);ta=va[pb.brushMode];J=za.getDab(J,Y,pb);Y=new Sa(0,0,J.width,J.height);var R=new Sa(0,0,J.width,
J.height);if(R.translate(J.x,J.y),X.getBounds().clipSourceDest(Y,R),!R.isEmpty()){Ka.union(R);var E=bb?ua.mask:ua.image;ta.paintDab(E,R,wc&&!bb?kc:E,pb,Y,J,Zc);!bb&&ta.noMergePhase&&ua.getLockAlpha()&&E.copyAlphaFrom(kb,R);ta.wantsOutputAsInput&&(m(),wc&&!bb&&X.fusionLayers());g(ua,R)}};this.getDefaultLayerName=function(J){var Y=J?"Group ":"Layer ";J=J?/^Group [0-9]+$/:/^Layer [0-9]+$/;for(var ta=0,R=wa.getLinearizedLayerList(!1),E=0;E<R.length;E++){var P=R[E];J.test(P.name)&&(ta=Math.max(ta,parseInt(P.name.substring(Y.length),
10)))}return Y+(ta+1)};this.addBackgroundLayer=function(){var J=new Wa(X.width,X.height,this.getDefaultLayerName(!1));J.image.clearAll(4294967295);this.addLayerObject(this.getLayersRoot(),J)};this.addDefaultLayer=function(){var J=new Wa(X.width,X.height,this.getDefaultLayerName(!1));J.image.clearAll(16777215);this.addLayerObject(this.getLayersRoot(),J);this.setActiveLayer(J,!1)};this.fusionLayers=function(){m();wb.buildTree();return kc=wb.blendTree().image};this.upgradeMultiplyLayers=function(J){for(var Y=
this.getLayersRoot().getLinearizedLayerList(!1,[]),ta=-1,R=0;R<Y.length;R++){var E=Y[R];if(!(E instanceof Wa)||E.mask||E.blendMode>T.LM_LAST_CHIBIPAINT)throw Error("Bad layer type during multiply upgrade");E.blendMode===T.LM_MULTIPLY&&(ta=R)}if(-1!==ta){R=new I(this.width,this.height);var P=E=!0,aa=this.getBounds();R.clearAll(aa,16777215);for(var qa=0;qa<=ta;qa++){var Aa=Y[qa];P||(E=E&&R.hasAlphaInRect(aa));Aa.blendMode===T.LM_MULTIPLY&&("bake"===J?!E&&0<Aa.getEffectiveAlpha()&&(100===Aa.alpha?T.upgradeMultiplyOfOpaqueLayer(R,
Aa.image,100,aa):T.upgradeMultiplyOfTransparentLayer(R,Aa.image,Aa.alpha,aa),Aa.setBlendMode(T.LM_MULTIPLY2)):E&&Aa.setBlendMode(T.LM_MULTIPLY2));0<Aa.getEffectiveAlpha()&&(P=!1,T.fuseImageOntoImage(R,E,Aa.image,Aa.alpha,Aa.blendMode,aa,null))}}};this.isCreateClippingMaskAllowed=function(){var J=ua.parent.indexOf(ua);J=ua.parent.layers[J-1];return ua instanceof Wa&&!ua.clip&&J instanceof Wa};this.createClippingMask=function(){this.isCreateClippingMaskAllowed()&&z(new fe(ua,!0))};this.isReleaseClippingMaskAllowed=
function(){return ua instanceof Wa&&ua.clip};this.releaseClippingMask=function(){this.isReleaseClippingMaskAllowed()&&z(new fe(ua,!1))};this.setActiveLayer=function(J,Y){if(J){var ta=(Y=J.mask&&Y)!=bb;if(ua!=J||ta){var R=ua;ua=J;bb=Y;w();this.emitEvent("changeActiveLayer",[R,J,bb]);ta&&this.emitEvent("editModeChanged",[bb?ud.EDITING_MODE_MASK:ud.EDITING_MODE_IMAGE]);xb&&xb.layer==R&&(Y?xb.setLayer(J):this.closeMaskView())}}};this.closeMaskView=function(){xb.close();xb=null};this.toggleMaskView=function(){return null!=
xb&&xb.isOpen()?this.closeMaskView():xb=ua.mask?new lp(ua,m):null,xb};this.selectTopmostVisibleLayer=function(){for(var J=wa.getLinearizedLayerList(!1),Y=J.length-1;0<=Y;Y--)if(J[Y]instanceof Wa&&0<J[Y].getEffectiveAlpha()){this.setActiveLayer(J[Y],!1);return}for(Y=J.length-1;0<=Y;Y--)if(J[Y]instanceof Wa){this.setActiveLayer(J[Y],!1);return}this.setActiveLayer(J[J.length-1],!1)};this.getActiveLayer=function(){return ua};this.isEditingMask=function(){return bb};this.isActiveLayerDrawable=function(){return bb&&
ua.mask||!bb&&ua instanceof Wa};this.getUndoMemoryUsed=function(){var J=0,Y=!0,ta=!1,R=void 0;try{for(var E,P=qc[Symbol.iterator]();!(Y=(E=P.next()).done);Y=!0)J+=E.value.getMemoryUsed(!0,null)}catch(Aa){ta=!0,R=Aa}finally{try{Y||null==P.return||P.return()}finally{if(ta)throw R;}}Y=!0;ta=!1;R=void 0;try{for(var aa,qa=Ab[Symbol.iterator]();!(Y=(aa=qa.next()).done);Y=!0)J+=aa.value.getMemoryUsed(!1,null)}catch(Aa){ta=!0,R=Aa}finally{try{Y||null==qa.return||qa.return()}finally{if(ta)throw R;}}return J};
this.isUndoAllowed=function(){return 0<Ab.length};this.isRedoAllowed=function(){return 0<qc.length};this.undo=function(){if(this.isUndoAllowed()){this.setHasUnsavedChanges(!0);var J=Ab.pop();J.undo();qc.push(J)}};this.redo=function(){if(this.isRedoAllowed()){this.setHasUnsavedChanges(!0);var J=qc.pop();J.redo();Ab.push(J)}};this.performIdleTasks=function(){u();m();wb.buildTree()};this.compactUndo=function(){0<Ab.length&&Ab[Ab.length-1].compact()};this.clearHistory=function(){Ab=[];qc=[]};this.colorPicker=
function(J,Y){return bb&&ua.mask?ac.greyToRGB(ua.mask.getPixel(~~J,~~Y)):16777215&kc.getPixel(~~J,~~Y)};this.setSelection=function(J){Bb.set(J);Bb.roundNearest();Bb.clipTo(this.getBounds())};this.emptySelection=function(){Bb.makeEmpty()};this.floodFill=function(J,Y){var ta=p();ta&&(u(),Ka=this.getBounds(),ta.floodFill(~~J,~~Y,4278190080|Zc),z(new G),g(ua,this.getBounds()))};this.gradientFill=function(J,Y,ta,R,E){var P=this.getSelectionAutoSelect(),aa=p();aa&&(u(),Ka=P.clone(),aa.gradient(P,J,Y,ta,
R,E,!1),this.getLayerLockAlpha()&&aa instanceof I&&aa.copyAlphaFrom(kb,P),z(new G),g(ua,P))};this.fill=function(J){var Y=this.getSelectionAutoSelect(),ta=p();ta&&(u(),Ka=Y.clone(),ta.clearRect(Y,J),z(new G),g(ua,Y))};this.clear=function(){bb?this.fill(0):this.fill(16777215)};this.flip=function(J){var Y=this.getSelection(),ta=Y.isEmpty(),R=ta&&ua instanceof Wa&&ua.mask&&ua.maskLinked,E=(!bb||R)&&ua instanceof Wa;R=(bb||R)&&ua.mask;J=J?"copyRegionHFlip":"copyRegionVFlip";(E||R)&&(ta&&(Y=this.getBounds()),
Ka=Y.clone(),E&&(n(),ua.image[J](Y,kb)),R&&(r(),ua.mask[J](Y,Pb)),z(new G(E,R)),e(ua,Y,E,R))};this.hFlip=function(){this.flip(!0)};this.vFlip=function(){this.flip(!1)};this.monochromaticNoise=function(){var J=this.getSelectionAutoSelect(),Y=p();Y&&(u(),Ka=J.clone(),Y.fillWithNoise(J),z(new G),g(ua,J))};this.isColorNoiseAllowed=function(){return!this.isEditingMask()&&this.isActiveLayerDrawable()};this.colorNoise=function(){if(this.isColorNoiseAllowed()){var J=this.getSelectionAutoSelect();u();Ka=J.clone();
ua.image.fillWithColorNoise(J);z(new G(!0,!1));e(ua,J,!0,!1)}};this.invert=function(){var J=this.getSelectionAutoSelect(),Y=p();Y&&(u(),Ka=J.clone(),Y.invert(J),z(new G),g(ua,J))};this.boxBlur=function(J,Y,ta){var R=this.getSelectionAutoSelect(),E=p();if(E){u();Ka=R.clone();for(var P=0;P<ta;P++)E.boxBlur(R,J,Y);z(new G);g(ua,R)}};this.rectangleSelection=function(J){J=J.clone();J.clipTo(this.getBounds());z(new Ha(this.getSelection(),J));this.setSelection(J)};this.move=function(J,Y,ta){if(Y|=0,0!=(J|=
0)||0!=Y){var R=0<Ab.length?Ab[Ab.length-1]:null;!ta&&R instanceof hb&&R.layer==this.getActiveLayer()?(R.amend(J,Y),qc=[],this.setHasUnsavedChanges(!0)):(J=new hb(J,Y,ta),z(J),J.redo())}};this.setTransformInterpolation=function(J){lb=J;fb instanceof qd&&fb.setInterpolation(J)};this.transformAffineAbort=function(){fb instanceof qd&&(fb.undo(),fb=null,d(!0))};this.transformAffineBegin=function(){if(fb instanceof qd)return{transform:fb.getTransform(),rect:fb.getInitialTransformRect(),selection:fb.getInitialSelectionRect()};
var J,Y=new pc;return(J=new qd(Y,lb)).getInitialTransformRect().isEmpty()?null:(fb=J,xc=!0,{transform:Y,rect:J.getInitialTransformRect(),selection:J.getInitialSelectionRect()})};this.transformAffineFinish=function(){fb instanceof qd&&(z(fb),fb=null,d(!0))};this.transformAffineAmend=function(J){fb instanceof qd&&fb.amend(J)};this.isCopySelectionAllowed=this.isCutSelectionAllowed=function(){return!this.getSelection().isEmpty()&&null!==p()};this.cutSelection=function(){this.isCutSelectionAllowed()&&
z(new V(ua,bb,this.getSelection()))};this.copySelection=function(){if(this.isCopySelectionAllowed()){var J=X.getSelection();Jc=new Di(p().cloneRect(J),J.left,J.top)}};this.isCopySelectionMergedAllowed=function(){return!this.getSelection().isEmpty()};this.copySelectionMerged=function(){if(this.isCopySelectionMergedAllowed()){var J=X.getSelection();Jc=new Di(this.fusionLayers().cloneRect(J),J.left,J.top)}};this.isPasteClipboardAllowed=function(){return!this.isClipboardEmpty()};this.pasteClipboard=function(){this.isPasteClipboardAllowed()&&
z(new Na(Jc))};this.getClipboard=function(){return Jc};this.setClipboard=function(J){Jc=J};this.isClipboardEmpty=function(){return null==Jc};this.setSampleAllLayers=function(J){wc=J};this.getLayerLockAlpha=function(){return this.getActiveLayer().getLockAlpha()};this.setLayerLockAlpha=function(J){ua.getLockAlpha()!=J&&z(new Oc(ua,J))};this.setForegroundColor=function(J){Zc=J};this.setBrush=function(J){pb=J};this.setBrushTexture=function(J){za.setTexture(J)};this.beginStroke=function(J,Y,ta){return!(null===
pb||!this.isActiveLayerDrawable())&&(u(),Ka.makeEmpty(),Mc.clearAll(0),jc.makeEmpty(),yb=J,$c=Y,$b=ta,xc=!0,va[pb.brushMode].beginStroke(),this.paintDab(J,Y,ta),!0)};this.continueStroke=function(J,Y,ta){if(null!=pb){var R=Math.sqrt((yb-J)*(yb-J)+($c-Y)*($c-Y)),E=Math.max(pb.minSpacing,pb.curSize*pb.spacing);if(R>E){var P=yb,aa=$c,qa=$b;for(E=R=(E-.001)/R;1>=E;E+=R)P=E*J+(1-E)*yb,aa=E*Y+(1-E)*$c,qa=E*ta+(1-E)*$b,this.paintDab(P,aa,qa);yb=P;$c=aa;$b=qa}}};this.endStroke=function(){null!=pb&&(m(),va[pb.brushMode].endStroke(),
Ka.clipTo(this.getBounds()),Ka.isEmpty()||(z(new G),u()),d(!1))};this.hasAlpha=function(){return kc.hasAlpha()};this.getFlatPNG=function(J){return this.fusionLayers(),kc.getAsPNG(J)};this.getFlatPNGBuffer=function(J){return this.fusionLayers(),kc.getAsPNGBuffer(J)};this.isSimpleDrawing=function(){return 1==wa.layers.length&&wa.layers[0]instanceof Wa&&!wa.layers[0].mask&&100==wa.layers[0].getEffectiveAlpha()};G.prototype=Object.create(pd.prototype);G.prototype.constructor=G;L.prototype=Object.create(pd.prototype);
L.prototype.constructor=L;N.prototype=Object.create(pd.prototype);N.prototype.constructor=N;M.prototype=Object.create(pd.prototype);M.prototype.constructor=M;ca.prototype=Object.create(pd.prototype);ca.prototype.constructor=ca;W.prototype=Object.create(pd.prototype);W.prototype.constructor=W;ka.prototype=Object.create(pd.prototype);ka.prototype.constructor=ka;ea.prototype=Object.create(pd.prototype);ea.prototype.constructor=ea;ma.prototype=Object.create(pd.prototype);ma.prototype.constructor=ma;Ca.prototype=
Object.create(pd.prototype);Ca.prototype.constructor=Ca;var vb=Ja("alpha",!0),Gd=Ja("blendMode",!0),A=Ja("visible",!0),fe=Ja("clip",!0),ee=Ja("maskVisible",!0),Ga=Ja("name",!1),Oc=Ja("lockAlpha",!1),Fd=Ja("maskLinked",!1);Ha.prototype=Object.create(pd.prototype);Ha.prototype.constructor=Ha;var yc=function(J){function Y(){Gb(this,Y);(R=ta.call(this)).layer=ua;R.fromSelection=X.getSelection();R.fromMaskMode=bb;R.movingWholeLayer=R.fromSelection.isEmpty();R.movingImage=!bb||R.movingWholeLayer&&R.layer.maskLinked;
R.movingMask=bb||R.movingWholeLayer&&R.layer.maskLinked;R.hasFullUndo=!1;R.erasesSourceRect=!1;R.dstRect=new Sa(0,0,0,0);R.movingLayers=[{layer:R.layer,moveImage:R.layer instanceof Wa&&R.movingImage,moveMask:null!==R.layer.mask&&R.movingMask,imageRect:new Map,maskRect:new Map}];R.layer instanceof Ib&&R.movingImage&&R.movingWholeLayer&&(R.movingLayers=R.movingLayers.concat(R.layer.getLinearizedLayerList(!1).map(function(qa){return{layer:qa,moveImage:qa instanceof Wa,moveMask:null!==qa.mask&&qa.maskLinked,
imageRect:new Map,maskRect:new Map}})));var R,E=new Sa(0,0,0,0);if(R.movingWholeLayer){R.srcRect=X.getBounds();for(var P=0;P<R.movingLayers.length&&!E.equals(R.srcRect);P++){var aa=R.movingLayers[P];aa.moveMask&&E.union(aa.layer.mask.getValueBounds(R.srcRect,255));aa.moveImage&&E.union(aa.layer.image.getNonTransparentBounds(R.srcRect))}}else for(R.srcRect=R.fromSelection.clone(),P=0;P<R.movingLayers.length&&!E.equals(R.srcRect);P++)aa=R.movingLayers[P],aa.moveMask&&E.union(aa.layer.mask.getValueBounds(R.srcRect,
0)),aa.moveImage&&E.union(aa.layer.image.getNonTransparentBounds(R.srcRect));return R.srcRect=E,R}dc(Y,J);var ta=ec(Y);return Hb(Y,[{key:"undo",value:function(){var R=this,E=[];this.dstRect.isEmpty()||E.push(this.dstRect);this.erasesSourceRect&&(E.push(this.srcRect),E=Sa.union(E));this.movingLayers.forEach(function(P){R.hasFullUndo?E.forEach(function(aa){P.moveImage&&P.layer.image.copyBitmapRect(P.imageUndo,aa.left,aa.top,aa);P.moveMask&&P.layer.mask.copyBitmapRect(P.maskUndo,aa.left,aa.top,aa)}):
(P.moveImage&&P.imageRect.forEach(function(aa,qa){P.layer.image.copyBitmapRect(aa,qa.left,qa.top,aa.getBounds())}),P.moveMask&&P.maskRect.forEach(function(aa,qa){P.layer.mask.copyBitmapRect(aa,qa.left,qa.top,aa.getBounds())}))});e(this.movingLayers.map(function(P){return P.layer}),E.reduce(function(P,aa){return P.getUnion(aa)},new Sa(0,0,0,0)),!0,!0);this.dstRect.makeEmpty();X.setSelection(this.fromSelection);X.setActiveLayer(this.layer,this.fromMaskMode);b()}},{key:"getMemoryUsed",value:function(R,
E){return this.movingLayers.map(function(P){return[P.imageUndo,P.maskUndo,P.imageRect,P.maskRect].map(function(aa){return aa?aa.getMemorySize():0}).reduce(dh,0)}).reduce(dh,0)}},{key:"buildFullUndo",value:function(){this.hasFullUndo||(this.movingLayers.forEach(function(R){R.moveImage&&(R.imageUndo=R.layer.image.clone());R.moveMask&&(R.maskUndo=R.layer.mask.clone());R.imageRect.clear();R.maskRect.clear()}),this.hasFullUndo=!0)}},{key:"compact",value:function(){if(this.hasFullUndo){var R=[];this.dstRect.isEmpty()||
R.push(this.dstRect);this.erasesSourceRect&&(R.push(this.srcRect),R=Sa.union(R));this.movingLayers.forEach(function(E){E.imageRect.clear();E.maskRect.clear();R.forEach(function(P){E.moveImage&&E.imageRect.set(P,E.imageUndo.cloneRect(P));E.moveMask&&E.maskRect.set(P,E.maskUndo.cloneRect(P))});E.imageUndo=null;E.maskUndo=null});this.hasFullUndo=!1}}}]),Y}(pd),qd=function(J){function Y(R,E){var P;return Gb(this,Y),(P=ta.call(this)).erasesSourceRect=!0,P.affineTransform=R.clone(),P.interpolation=E||"smooth",
P.composeCanvas=null,P.composeCanvasContext=null,P}dc(Y,J);var ta=ec(Y);return Hb(Y,[{key:"buildFullUndo",value:function(){var R=this;this.hasFullUndo||(hd(Sc(Y.prototype),"buildFullUndo",this).call(this),this.movingLayers.forEach(function(E){if(E.moveImage){var P=de(R.srcRect.getWidth(),R.srcRect.getHeight());P.getContext("2d").putImageData(E.layer.image.getImageData(),-R.srcRect.left,-R.srcRect.top,R.srcRect.left,R.srcRect.top,R.srcRect.getWidth(),R.srcRect.getHeight());E.imageSourceCanvas=P}E.moveMask&&
(P=de(R.srcRect.getWidth(),R.srcRect.getHeight()),P.getContext("2d").putImageData(E.layer.mask.getImageData(R.srcRect.left,R.srcRect.top,R.srcRect.getWidth(),R.srcRect.getHeight()),0,0),E.maskSourceCanvas=P)}),this.composeCanvas=de(X.width,X.height),this.composeCanvasContext=this.composeCanvas.getContext("2d",{willReadFrequently:!0}),Fi(this.composeCanvasContext,"smooth"==this.interpolation),this.junk=this.composeCanvasContext.getImageData(0,0,1,1))}},{key:"redo",value:function(){var R=this;this.buildFullUndo();
var E=this.dstRect.clone(),P=this.srcRect.toPoints();this.affineTransform.transformPoints(P);this.dstRect.set(Sa.createBoundingBox(P).roundContain().clipTo(X.getBounds()));var aa=Sa.subtract(this.dstRect,this.srcRect),qa=Sa.subtract(E.isEmpty()?this.srcRect:this.srcRect.getIntersection(E),this.dstRect),Aa=this.srcRect.getIntersection(this.dstRect),Ba=Sa.subtract(E,[this.dstRect,this.srcRect]);E=this.srcRect.getUnion(this.dstRect).getUnion(E);(this.movingLayers.forEach(function(Oa){if(qa.forEach(function(Ea){Oa.moveImage&&
Oa.layer.image.clearRect(Ea,16777215);Oa.moveMask&&(R.movingWholeLayer?Oa.layer.mask.clearRect(Ea,255):Oa.layer.mask.clearRect(Ea,0))}),!R.dstRect.isEmpty()){if(Oa.moveImage){var tb=Oa.imageUndo.getImageData();aa.forEach(function(Ea){R.composeCanvasContext.putImageData(tb,0,0,Ea.left,Ea.top,Ea.getWidth(),Ea.getHeight())});R.composeCanvasContext.clearRect(Aa.left,Aa.top,Aa.getWidth(),Aa.getHeight());R.composeCanvasContext.save();R.composeCanvasContext.setTransform(R.affineTransform.m[0],R.affineTransform.m[1],
R.affineTransform.m[2],R.affineTransform.m[3],R.affineTransform.m[4],R.affineTransform.m[5]);R.composeCanvasContext.drawImage(Oa.imageSourceCanvas,R.srcRect.left,R.srcRect.top);R.composeCanvasContext.restore();Oa.layer.image.copyBitmapRect(new I(R.composeCanvasContext.getImageData(R.dstRect.left,R.dstRect.top,R.dstRect.getWidth(),R.dstRect.getHeight())),R.dstRect.left,R.dstRect.top,new Sa(0,0,R.dstRect.getWidth(),R.dstRect.getHeight()))}Oa.moveMask&&(aa.forEach(function(Ea){R.composeCanvasContext.putImageData(Oa.layer.mask.getImageData(Ea.left,
Ea.top,Ea.getWidth(),Ea.getHeight()),Ea.left,Ea.top)}),R.movingWholeLayer?R.composeCanvasContext.fillStyle="#FFF":R.composeCanvasContext.fillStyle="#000",R.composeCanvasContext.fillRect(Aa.left,Aa.top,Aa.getWidth(),Aa.getHeight()),R.composeCanvasContext.save(),R.composeCanvasContext.setTransform(R.affineTransform.m[0],R.affineTransform.m[1],R.affineTransform.m[2],R.affineTransform.m[3],R.affineTransform.m[4],R.affineTransform.m[5]),R.composeCanvasContext.drawImage(Oa.maskSourceCanvas,R.srcRect.left,
R.srcRect.top),R.composeCanvasContext.restore(),Oa.layer.mask.pasteImageData(R.composeCanvasContext.getImageData(R.dstRect.left,R.dstRect.top,R.dstRect.getWidth(),R.dstRect.getHeight()),R.dstRect.left,R.dstRect.top))}Ba.forEach(function(Ea){Oa.moveImage&&Oa.layer.image.copyBitmapRect(Oa.imageUndo,Ea.left,Ea.top,Ea);Oa.moveMask&&Oa.layer.mask.copyBitmapRect(Oa.maskUndo,Ea.left,Ea.top,Ea)})}),e(this.movingLayers.map(function(Oa){return Oa.layer}),E,!0,!0),this.fromSelection.isEmpty())||(E=this.fromSelection.toPoints(),
this.affineTransform.transformPoints(E),(E=Sa.createBoundingBox(E)).roundNearest(),X.setSelection(E),b());X.setActiveLayer(this.layer,this.fromMaskMode)}},{key:"amend",value:function(R){this.hasFullUndo||this.undo();this.affineTransform=R.clone();this.redo()}},{key:"setInterpolation",value:function(R){R!=this.interpolation&&(this.interpolation=R,this.composeCanvasContext&&Fi(this.composeCanvasContext,"smooth"==this.interpolation),this.undo(),this.redo())}},{key:"compact",value:function(){hd(Sc(Y.prototype),
"compact",this).call(this);this.composeCanvasContext=this.composeCanvas=null;this.movingLayers.forEach(function(R){return R.imageSourceCanvas=null})}},{key:"getMemoryUsed",value:function(R,E){R=hd(Sc(Y.prototype),"getMemoryUsed",this).call(this,R,E);return R+=pl(this.composeCanvas),R+=this.movingLayers.map(function(P){return pl(P.imageSourceCanvas)}).reduce(dh,0)}},{key:"getTransform",value:function(){return this.affineTransform.clone()}},{key:"getInitialTransformRect",value:function(){return this.srcRect.clone()}},
{key:"getInitialSelectionRect",value:function(){return this.fromSelection.clone()}}]),Y}(yc),hb=function(J){function Y(R,E,P){var aa;return Gb(this,Y),(aa=ta.call(this)).offsetX=R,aa.offsetY=E,aa.erasesSourceRect=!P,aa}dc(Y,J);var ta=ec(Y);return Hb(Y,[{key:"redo",value:function(){var R,E,P=this,aa=this.dstRect.clone(),qa=aa.clone(),Aa=null;(this.buildFullUndo(),this.dstRect.set(this.srcRect),this.dstRect.translate(this.offsetX,this.offsetY),R=this.dstRect.clone(),this.dstRect.clipTo(X.getBounds()),
this.erasesSourceRect?(Aa=aa.isEmpty()?this.srcRect:this.srcRect.getIntersection(aa),qa.union(Aa),E=aa.subtract(this.srcRect)):E=[aa],this.movingLayers.forEach(function(Ba){Aa&&(Ba.moveImage&&Ba.layer.image.clearRect(Aa,16777215),Ba.moveMask&&Ba.layer.mask.clearRect(Aa,P.movingWholeLayer?255:0));E.forEach(function(Oa){Ba.moveImage&&Ba.layer.image.copyBitmapRect(Ba.imageUndo,Oa.left,Oa.top,Oa);Ba.moveMask&&Ba.layer.mask.copyBitmapRect(Ba.maskUndo,Oa.left,Oa.top,Oa)});Ba.moveImage&&T.normalFuseImageOntoImageAtPosition(Ba.layer.image,
Ba.imageUndo,R.left,R.top,P.srcRect);Ba.moveMask&&Ba.layer.mask.copyBitmapRect(Ba.maskUndo,R.left,R.top,P.srcRect)}),qa.union(this.dstRect),e(this.movingLayers.map(function(Ba){return Ba.layer}),qa,!0,!0),this.fromSelection.isEmpty())||(aa=this.fromSelection.clone(),aa.translate(this.offsetX,this.offsetY),X.setSelection(aa),b())}},{key:"amend",value:function(R,E){this.hasFullUndo||this.undo();this.offsetX+=R;this.offsetY+=E;this.redo()}}]),Y}(yc);V.prototype=Object.create(pd.prototype);V.prototype.constructor=
V;Na.prototype=Object.create(pd.prototype);Na.prototype.constructor=Na;va=[If,mp,np,op,pp,qp,rp,sp].map(function(J){return new J(Mc,jc)});this.width=a;this.height=c}function Qb(a,c,d){this.data=a;this.eof=!1;this.start=void 0===c?0:c;this.end=void 0===d?a.length:d;this.pos=this.start}function Jf(a){for(var c=a.length;0<=--c;)a[c]=0}function Gi(a,c,d,b,f){this.static_tree=a;this.extra_bits=c;this.extra_base=d;this.elems=b;this.max_length=f;this.has_stree=a&&a.length}function Hi(a,c){this.dyn_tree=
a;this.max_code=0;this.stat_desc=c}function ql(a){return 256>a?pg[a]:pg[256+(a>>>7)]}function qg(a,c){a.pending_buf[a.pending++]=255&c;a.pending_buf[a.pending++]=c>>>8&255}function vd(a,c,d){a.bi_valid>16-d?(a.bi_buf|=c<<a.bi_valid&65535,qg(a,a.bi_buf),a.bi_buf=c>>16-a.bi_valid,a.bi_valid+=d-16):(a.bi_buf|=c<<a.bi_valid&65535,a.bi_valid+=d)}function ge(a,c,d){vd(a,d[2*c],d[2*c+1])}function rl(a,c){var d=0;do d|=1&a,a>>>=1,d<<=1;while(0<--c);return d>>>1}function sl(a,c,d){var b,f=Array(16),k=0;for(b=
1;15>=b;b++)f[b]=k=k+d[b-1]<<1;for(d=0;d<=c;d++)b=a[2*d+1],0!==b&&(a[2*d]=rl(f[b]++,b))}function tl(a){var c;for(c=0;286>c;c++)a.dyn_ltree[2*c]=0;for(c=0;30>c;c++)a.dyn_dtree[2*c]=0;for(c=0;19>c;c++)a.bl_tree[2*c]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function ul(a){8<a.bi_valid?qg(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function vl(a,c,d,b){var f=2*c,k=2*d;return a[f]<a[k]||a[f]===a[k]&&b[c]<=b[d]}function Ii(a,c,d){for(var b=
a.heap[d],f=d<<1;f<=a.heap_len&&(f<a.heap_len&&vl(c,a.heap[f+1],a.heap[f],a.depth)&&f++,!vl(c,b,a.heap[f],a.depth));)a.heap[d]=a.heap[f],d=f,f<<=1;a.heap[d]=b}function wl(a,c,d){var b,f,k=0;if(0!==a.last_lit){do{var l=a.pending_buf[a.d_buf+2*k]<<8|a.pending_buf[a.d_buf+2*k+1];var h=a.pending_buf[a.l_buf+k];k++;0===l?ge(a,h,c):(ge(a,(b=rg[h])+256+1,c),0!==(f=Ji[b])&&vd(a,h-Ki[b],f),ge(a,b=ql(--l),d),0!==(f=eh[b])&&vd(a,l-fh[b],f))}while(k<a.last_lit)}ge(a,256,c)}function Li(a,c){var d,b=c.dyn_tree;
var f=c.stat_desc.static_tree;var k=c.stat_desc.has_stree,l=c.stat_desc.elems,h=-1;var e=0;a.heap_len=0;for(a.heap_max=573;e<l;e++)0!==b[2*e]?(a.heap[++a.heap_len]=h=e,a.depth[e]=0):b[2*e+1]=0;for(;2>a.heap_len;)b[2*(d=a.heap[++a.heap_len]=2>h?++h:0)]=1,a.depth[d]=0,a.opt_len--,k&&(a.static_len-=f[2*d+1]);c.max_code=h;for(e=a.heap_len>>1;1<=e;e--)Ii(a,b,e);d=l;do e=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Ii(a,b,1),f=a.heap[1],a.heap[--a.heap_max]=e,a.heap[--a.heap_max]=f,b[2*d]=b[2*e]+b[2*f],a.depth[d]=
(a.depth[e]>=a.depth[f]?a.depth[e]:a.depth[f])+1,b[2*e+1]=b[2*f+1]=d,a.heap[1]=d++,Ii(a,b,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];var g,p,m,n,r;e=c.dyn_tree;d=c.max_code;f=c.stat_desc.static_tree;k=c.stat_desc.has_stree;l=c.stat_desc.extra_bits;var u=c.stat_desc.extra_base,w=c.stat_desc.max_length,z=0;for(m=0;15>=m;m++)a.bl_count[m]=0;e[2*a.heap[a.heap_max]+1]=0;for(c=a.heap_max+1;573>c;c++)(m=e[2*e[2*(g=a.heap[c])+1]+1]+1)>w&&(m=w,z++),e[2*g+1]=m,g>d||(a.bl_count[m]++,n=0,g>=u&&(n=
l[g-u]),r=e[2*g],a.opt_len+=r*(m+n),!k||(a.static_len+=r*(f[2*g+1]+n)));if(0!==z){do{for(m=w-1;0===a.bl_count[m];)m--;a.bl_count[m]--;a.bl_count[m+1]+=2;a.bl_count[w]--;z-=2}while(0<z);for(m=w;0!==m;m--)for(g=a.bl_count[m];0!==g;)(p=a.heap[--c])>d||(e[2*p+1]!==m&&(a.opt_len+=(m-e[2*p+1])*e[2*p],e[2*p+1]=m),g--)}sl(b,h,a.bl_count)}function xl(a,c,d){var b,f=-1,k=c[1],l=0,h=7,e=4;0===k&&(h=138,e=3);c[2*(d+1)+1]=65535;for(b=0;b<=d;b++){var g=k;k=c[2*(b+1)+1];++l<h&&g===k||(l<e?a.bl_tree[2*g]+=l:0!==
g?(g!==f&&a.bl_tree[2*g]++,a.bl_tree[32]++):10>=l?a.bl_tree[34]++:a.bl_tree[36]++,l=0,f=g,0===k?(h=138,e=3):g===k?(h=6,e=3):(h=7,e=4))}}function yl(a,c,d){var b,f,k=-1,l=c[1],h=0,e=7,g=4;0===l&&(e=138,g=3);for(b=0;b<=d;b++)if(f=l,l=c[2*(b+1)+1],!(++h<e)||f!==l){if(h<g){do ge(a,f,a.bl_tree);while(0!=--h)}else 0!==f?(f!==k&&(ge(a,f,a.bl_tree),h--),ge(a,16,a.bl_tree),vd(a,h-3,2)):10>=h?(ge(a,17,a.bl_tree),vd(a,h-3,3)):(ge(a,18,a.bl_tree),vd(a,h-11,7));h=0;k=f;0===l?(e=138,g=3):f===l?(e=6,g=3):(e=7,g=
4)}}function zl(a,c,d,b){vd(a,b?1:0,3);ul(a);qg(a,d);qg(a,~d);ib.arraySet(a.pending_buf,a.window,c,d,a.pending);a.pending+=d}function Me(a,c){return a.msg=jf[c],c}function Ne(a){for(var c=a.length;0<=--c;)a[c]=0}function Oe(a){var c=a.state,d=c.pending;d>a.avail_out&&(d=a.avail_out);0!==d&&(ib.arraySet(a.output,c.pending_buf,c.pending_out,d,a.next_out),a.next_out+=d,c.pending_out+=d,a.total_out+=d,a.avail_out-=d,c.pending-=d,0===c.pending&&(c.pending_out=0))}function cd(a,c){tp(a,0<=a.block_start?
a.block_start:-1,a.strstart-a.block_start,c);a.block_start=a.strstart;Oe(a.strm)}function gc(a,c){a.pending_buf[a.pending++]=c}function sg(a,c){a.pending_buf[a.pending++]=c>>>8&255;a.pending_buf[a.pending++]=255&c}function Al(a,c){var d,b,f=a.max_chain_length,k=a.strstart,l=a.prev_length,h=a.nice_match,e=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,g=a.window,p=a.w_mask,m=a.prev,n=a.strstart+258,r=g[k+l-1],u=g[k+l];a.prev_length>=a.good_match&&(f>>=2);h>a.lookahead&&(h=a.lookahead);do if(g[(d=
c)+l]===u&&g[d+l-1]===r&&g[d]===g[k]&&g[++d]===g[k+1]){k+=2;for(d++;g[++k]===g[++d]&&g[++k]===g[++d]&&g[++k]===g[++d]&&g[++k]===g[++d]&&g[++k]===g[++d]&&g[++k]===g[++d]&&g[++k]===g[++d]&&g[++k]===g[++d]&&k<n;);if(b=258-(n-k),k=n-258,b>l){if(a.match_start=c,l=b,b>=h)break;r=g[k+l-1];u=g[k+l]}}while((c=m[c&p])>e&&0!=--f);return l<=a.lookahead?l:a.lookahead}function kf(a){var c,d,b=a.w_size;do{if(d=a.window_size-a.lookahead-a.strstart,a.strstart>=b+(b-262)){ib.arraySet(a.window,a.window,b,b,0);a.match_start-=
b;a.strstart-=b;a.block_start-=b;var f=c=a.hash_size;do{var k=a.head[--f];a.head[f]=k>=b?k-b:0}while(--c);f=c=b;do k=a.prev[--f],a.prev[f]=k>=b?k-b:0;while(--c);d+=b}if(0===a.strm.avail_in)break;f=a.strm;k=a.window;var l=a.strstart+a.lookahead,h=f.avail_in;if(c=(h>d&&(h=d),0===h)?0:(f.avail_in-=h,ib.arraySet(k,f.input,f.next_in,h,l),1===f.state.wrap?f.adler=Kf(f.adler,k,h,l):2===f.state.wrap&&(f.adler=Tc(f.adler,k,h,l)),f.next_in+=h,f.total_in+=h,h),a.lookahead+=c,3<=a.lookahead+a.insert)for(d=a.strstart-
a.insert,a.ins_h=a.window[d],a.ins_h=(a.ins_h<<a.hash_shift^a.window[d+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[d+3-1])&a.hash_mask,a.prev[d&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=d,d++,a.insert--,!(3>a.lookahead+a.insert)););}while(262>a.lookahead&&0!==a.strm.avail_in)}function Mi(a,c){for(var d,b;;){if(262>a.lookahead){if(kf(a),262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}if(d=0,3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,
d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==d&&a.strstart-d<=a.w_size-262&&(a.match_length=Al(a,d)),3<=a.match_length)if(b=Pe(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!=--a.match_length);a.strstart++}else a.strstart+=
a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else b=Pe(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(b&&(cd(a,!1),0===a.strm.avail_out))return 1}return(a.insert=2>a.strstart?a.strstart:2,4===c)?(cd(a,!0),0===a.strm.avail_out)?3:4:a.last_lit&&(cd(a,!1),0===a.strm.avail_out)?1:2}function Lf(a,c){for(var d,b,f;;){if(262>a.lookahead){if(kf(a),262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}if(d=0,3<=
a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=2,0!==d&&a.prev_length<a.max_lazy_match&&a.strstart-d<=a.w_size-262&&(a.match_length=Al(a,d),5>=a.match_length&&(1===a.strategy||3===a.match_length&&4096<a.strstart-a.match_start)&&(a.match_length=2)),3<=a.prev_length&&a.match_length<=a.prev_length){f=a.strstart+a.lookahead-
3;b=Pe(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=f&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!=--a.prev_length);if(a.match_available=0,a.match_length=2,a.strstart++,b&&(cd(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if(Pe(a,0,a.window[a.strstart-1])&&cd(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=
1,a.strstart++,a.lookahead--}return(a.match_available&&(Pe(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=2>a.strstart?a.strstart:2,4===c)?(cd(a,!0),0===a.strm.avail_out)?3:4:a.last_lit&&(cd(a,!1),0===a.strm.avail_out)?1:2}function he(a,c,d,b,f){this.good_length=a;this.max_lazy=c;this.nice_length=d;this.max_chain=b;this.func=f}function up(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;
this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new ib.Buf16(1146);this.dyn_dtree=new ib.Buf16(122);
this.bl_tree=new ib.Buf16(78);Ne(this.dyn_ltree);Ne(this.dyn_dtree);Ne(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new ib.Buf16(16);this.heap=new ib.Buf16(573);Ne(this.heap);this.heap_max=this.heap_len=0;this.depth=new ib.Buf16(573);Ne(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function Bl(a,c){if(65534>c&&(a.subarray&&Cl||!a.subarray&&Dl))return String.fromCharCode.apply(null,
ib.shrinkBuf(a,c));for(var d="",b=0;b<c;b++)d+=String.fromCharCode(a[b]);return d}function lf(a){if(!(this instanceof lf))return new lf(a);this.options=ib.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},a||{});var c;a=this.options;a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<a.windowBits&&16>a.windowBits&&(a.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Ni;this.strm.avail_out=0;var d=this.strm;var b=a.level;var f=
a.method,k=a.windowBits,l=a.memLevel,h=a.strategy;if(d){var e,g,p,m=1;if(-1===b&&(b=6),0>k?(m=0,k=-k):15<k&&(m=2,k-=16),1>l||9<l||8!==f||8>k||15<k||0>b||9<b||0>h||4<h)b=Me(d,-2);else{8===k&&(k=9);var n=new up;b=(d.state=n,n.strm=d,n.wrap=m,n.gzhead=null,n.w_bits=k,n.w_size=1<<n.w_bits,n.w_mask=n.w_size-1,n.hash_bits=l+7,n.hash_size=1<<n.hash_bits,n.hash_mask=n.hash_size-1,n.hash_shift=~~((n.hash_bits+3-1)/3),n.window=new ib.Buf8(2*n.w_size),n.head=new ib.Buf16(n.hash_size),n.prev=new ib.Buf16(n.w_size),
n.lit_bufsize=1<<l+6,n.pending_buf_size=4*n.lit_bufsize,n.pending_buf=new ib.Buf8(n.pending_buf_size),n.d_buf=1*n.lit_bufsize,n.l_buf=3*n.lit_bufsize,n.level=b,n.strategy=h,n.method=f,0===(p=d&&d.state?(d.total_in=d.total_out=0,d.data_type=2,(e=d.state).pending=0,e.pending_out=0,0>e.wrap&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,d.adler=2===e.wrap?0:1,e.last_flush=0,vp(e),0):Me(d,-2))&&((g=d.state).window_size=2*g.w_size,Ne(g.head),g.max_lazy_match=tg[g.level].max_lazy,g.good_match=tg[g.level].good_length,
g.nice_match=tg[g.level].nice_length,g.max_chain_length=tg[g.level].max_chain,g.strstart=0,g.block_start=0,g.lookahead=0,g.insert=0,g.match_length=g.prev_length=2,g.match_available=0,g.ins_h=0),p)}}else b=-2;if(0!==b)throw Error(jf[b]);if(a.header&&wp(this.strm,a.header),a.dictionary){if(c="string"==typeof a.dictionary?Oi(a.dictionary):"[object ArrayBuffer]"===El.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary,0!==(b=xp(this.strm,c)))throw Error(jf[b]);this._dict_set=!0}}function Pi(a,
c){c=new lf(c);if(c.push(a,!0),c.err)throw c.msg||jf[c.err];return c.result}function Fl(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function yp(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=
0;this.next=null;this.lens=new ib.Buf16(320);this.work=new ib.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function Gl(a,c,d,b){var f;a=a.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new ib.Buf8(a.wsize)),b>=a.wsize?(ib.arraySet(a.window,c,d-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((f=a.wsize-a.wnext)>b&&(f=b),ib.arraySet(a.window,c,d-b,f,a.wnext),(b-=f)?(ib.arraySet(a.window,c,d-b,b,0),a.wnext=b,a.whave=a.wsize):(a.wnext+=f,a.wnext===
a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=f))),0}function mf(a){if(!(this instanceof mf))return new mf(a);this.options=ib.assign({chunkSize:16384,windowBits:0,to:""},a||{});var c,d,b,f,k,l,h,e,g,p=this.options;p.raw&&0<=p.windowBits&&16>p.windowBits&&(p.windowBits=-p.windowBits,0===p.windowBits&&(p.windowBits=-15));0<=p.windowBits&&16>p.windowBits&&(!a||!a.windowBits)&&(p.windowBits+=32);15<p.windowBits&&48>p.windowBits&&0==(15&p.windowBits)&&(p.windowBits|=15);this.err=0;this.msg="";this.ended=
!1;this.chunks=[];this.strm=new Ni;this.strm.avail_out=0;a=(b=this.strm,f=p.windowBits,b?(l=new yp,b.state=l,l.window=null,h=f,0!=(k=b&&b.state?(g=b.state,0>h?(e=0,h=-h):(e=(h>>4)+1,48>h&&(h&=15)),h&&(8>h||15<h))?-2:(null!==g.window&&g.wbits!==h&&(g.window=null),g.wrap=e,g.wbits=h,b&&b.state?((c=b.state).wsize=0,c.whave=0,c.wnext=0,b&&b.state?(d=b.state,b.total_in=b.total_out=d.total=0,b.msg="",d.wrap&&(b.adler=1&d.wrap),d.mode=1,d.last=0,d.havedict=0,d.dmax=32768,d.head=null,d.hold=0,d.bits=0,d.lencode=
d.lendyn=new ib.Buf32(852),d.distcode=d.distdyn=new ib.Buf32(592),d.sane=1,d.back=-1,0):-2):-2):-2)&&(b.state=null),k):-2);if(a!==Fc.Z_OK||(this.header=new Hl,zp(this.strm,this.header),p.dictionary&&("string"==typeof p.dictionary?p.dictionary=Oi(p.dictionary):"[object ArrayBuffer]"===Il.call(p.dictionary)&&(p.dictionary=new Uint8Array(p.dictionary)),p.raw&&(a=Jl(this.strm,p.dictionary))!==Fc.Z_OK)))throw Error(jf[a]);}function Qi(a,c){c=new mf(c);if(c.push(a,!0),c.err)throw c.msg||jf[c.err];return c.result}
function Ri(a){this.version=a.readU32BE();this.width=a.readU32BE();this.height=a.readU32BE();this.layersNb=a.readU32BE()}function gh(a){for(var c=[,,,,],d=0;d<c.length;d++)c[d]=String.fromCharCode(a.readByte());if(this.chunkType=c.join(""),this.chunkSize=a.readU32BE(),a.eof)throw"Truncated chunk";}function Kl(a){return{major:a>>16&65535,minor:65535&a}}function Si(a,c){var d=new Qb(new Uint8Array(gh.HEADER_LENGTH+c));return d.writeString(a),d.writeU32BE(c),d}function Mf(){}function hh(a){function c(k,
l){null===l?f.emitEvent("loadingProgress",[1,"Loading your "+k.friendly+"..."]):f.emitEvent("loadingProgress",[l,"Loading your "+k.friendly+" ("+Math.round(100*l)+"%)..."])}var d=[],b={},f=this;a.loadChibiFileUrl&&0<(""+a.loadChibiFileUrl).length?d.push({url:a.loadChibiFileUrl,friendly:"drawing layers",name:"layers",required:!0}):a.loadImageUrl&&0<(""+a.loadImageUrl).length&&d.push({url:a.loadImageUrl,friendly:"drawing",name:"flat",required:!0});a.loadSwatchesUrl&&d.push({url:a.loadSwatchesUrl,friendly:"color swatches",
name:"swatches",required:!1,noProgress:!0});this.load=function(){function k(){l.required?f.emitEvent("loadingFailure",["Failed to load your "+l.friendly+", please try again later."]):f.load()}if(0==d.length)f.emitEvent("loadingComplete",[b]);else{var l=d.shift(),h=new XMLHttpRequest;h.addEventListener("progress",function(e){c(l,e.lengthComputable&&!l.noProgress?e.loaded/e.total:null)},!1);h.addEventListener("load",function(e){if(200==this.status){var g=this.response;f.emitEvent("loadingProgress",
[1,"Starting ChickenPaint..."]);setTimeout(function(){(function(p,m){switch(p.name){case "flat":return new Promise(function(n,r){var u=new Blob([m],{type:"image/png"}),w=window.URL.createObjectURL(u);if(w){var z=new Image;z.onload=function(){var G=new ud(this.width,this.height),L=new Wa(0,0,"Layer 1");L.image=I.createFromImage(z);G.addLayerObject(G.getLayersRoot(),L);z=null;window.URL.revokeObjectURL(w);n(G)};z.src=w}else r(null)});case "swatches":return(p=(new Mf).read(m))?Promise.resolve(p):Promise.reject(null);
case "layers":return function(n,r){function u(ea){var ma;var Ca=ka;if(null!==Ca&&0!==Ca.length)if(null===ea||0===ea.length)ea=Ca;else{var Ja=new Uint8Array(Ca.length+ea.length);ea=(Ja.set(Ca,0),Ja.set(ea,Ca.length),Ja)}for(ka=ea;ka;){if(M<ka.length)ka=ka.subarray(M),M=0;else{M-=ka.length;ka=null;break}switch(G){case 0:if(ka.length<gh.HEADER_LENGTH)break;if(W=new gh(ma=new Qb(ka)),ka=ka.subarray(ma.pos),ca)if("ZEND"==W.chunkType)G=45;else{"LAYR"==W.chunkType?(G=2,w=new Ap(W,ca.width,ca.height)):"GRUP"==
W.chunkType?(G=3,w=new Bp(W,ca.width,ca.height)):(console.log("Unknown chunk type '"+W.chunkType+"', attempting to skip..."),M=W.chunkSize);continue}else if("HEAD"==W.chunkType){G=1;continue}else G=5;break;case 1:if(ka.length<W.chunkSize)break;if(0<Kl((ca=new Ri(ma=new Qb(ka))).version).major){G=5;break}N=(L=new ud(ca.width,ca.height)).getLayersRoot();M=W.chunkSize;G=0;continue;case 2:if(ka=w.decode(ka),w.done){L.addLayerObject(N,w.layer);G=0;continue}break;case 3:if(ka=w.decode(ka),w.done){L.addLayerGroupObject(N,
w.layer,w.childLayers);G=0;continue}}break}}r=r||{};var w,z=new (da(Ti).Inflate)({}),G=0,L=null,N=null,M=0,ca=null,W=null,ka=null;return(new Promise(function(ea){if(n instanceof ArrayBuffer)ea(n);else{var ma=new FileReader;ma.onload=function(){ea(this.result)};ma.readAsArrayBuffer(n)}})).then(function(ea){return new Promise(function(ma,Ca){var Ja=new Uint8Array(ea);(function(Ha){for(var V=0;8>V;V++)if(Ha[V]!="CHIBIOEK".charCodeAt(V))return!1;return!0})(Ja)?(Ja=Ja.subarray(8),z.onData=u,z.onEnd=function(Ha){0===
Ha&&45==G?(!1!==r.upgradeMultiplyLayers&&10>ca.version&&L.upgradeMultiplyLayers(r.upgradeMultiplyLayers),L.selectTopmostVisibleLayer(),ma(L)):Ca("Fatal error decoding ChibiFile: "+Ha)},z.push(Ja,!0)):Ca("This doesn't appear to be a ChibiPaint layers file, is it damaged?")})})}(m);default:return Promise.reject("Unexpected resource type '"+p.name+"'")}})(l,g).then(function(p){b[l.name]=p;f.load()},function(){f.emitEvent("loadingFailure",["Failed to read your "+l.friendly])})},0)}else k()},!1);h.addEventListener("error",
k);c(l,l.noProgress?null:0);h.open("GET",l.url,!0);h.responseType="arraybuffer";h.send()}}}function Ui(a){(a=a.split(/[-_]/,1)[0].toLowerCase())in Vi?(ih=Vi[a],Wi=a):(ih=jh,Wi="en")}function sa(a){return a in ih?ih[a]:a}function ug(a){function c(f){null===f?d.emitEvent("savingProgress",[1,sa("Saving drawing...")]):d.emitEvent("savingProgress",[f,sa("Saving drawing...")+" ("+Math.round(100*f)+"%)"])}var d=this,b=!1;a.rotation=a.rotation||0;this.save=function(){var f,k,l,h,e;(f=new Blob([function(g){for(var p=
new Uint8Array(g.length),m=0;m<g.length;m++)p[m]=g.charCodeAt(m);return p}(a.artwork.getFlatPNG(a.rotation))],{type:"image/png"}),a.artwork.isSimpleDrawing())?l=Promise.resolve(null):(h=a.artwork,e=e||{},l=Promise.resolve().then(function(){var g=new (da(Ti).Deflate)({level:7}),p=[],m=new Uint8Array(8),n=h.getLayersRoot().getLinearizedLayerList(!1),r=e.forceOldVersion?0:function(ca){var W=!0,ka=!1,ea=void 0;try{for(var ma,Ca=ca.getLayersRoot().getLinearizedLayerList(!1)[Symbol.iterator]();!(W=(ma=
Ca.next()).done);W=!0){var Ja=ma.value;if(Ja instanceof Ib||Ja.mask||Ja.clip||Ja.blendMode>T.LM_LAST_CHIBIPAINT||Ja.blendMode===T.LM_MULTIPLY)return 10}}catch(Ha){ka=!0,ea=Ha}finally{try{W||null==Ca.return||Ca.return()}finally{if(ka)throw ea;}}return 0}(h),u=0===(z=Kl(r)).major&&0===z.minor?"ChibiPaint v0.0":"ChickenPaint v"+z.major+"."+z.minor,w=Promise.resolve();g.onData=function(ca){p.push(ca)};for(z=0;8>z;z++)m[z]="CHIBIOEK".charCodeAt(z);p.push(m);g.push((G=n.length,(L=Si("HEAD",Ri.FIXED_HEADER_LENGTH)).writeU32BE(r),
L.writeU32BE(h.width),L.writeU32BE(h.height),L.writeU32BE(G),L.getAsDataArray()),!1);m=!0;r=!1;G=void 0;try{for(var z,G,L,N,M=n[Symbol.iterator]();!(m=(N=M.next()).done);m=!0)!function(){var ca=N.value;w=w.then(function(){return new Promise(function(W){var ka=g.push,ea,ma,Ca=ca instanceof Wa,Ja=4*(Ca?5:6),Ha=ca.name.length,V=Si(Ca?"LAYR":"GRUP",Ja+Ha+((Ca?ca.image.data.length:0)+(ca.mask?ca.mask.data.length:0))),Na=0;ca.visible&&(Na|=1);Ca&&ca.clip&&(Na|=2);ca.mask&&(Na|=4);ca.maskLinked&&(Na|=8);
ca.maskVisible&&(Na|=16);ca.lockAlpha&&(Na|=64);!Ca&&ca.expanded&&(Na|=32);ca.blendMode===T.LM_MULTIPLY2?(ea=T.LM_MULTIPLY,Na|=128):ea=ca.blendMode;V.writeU32BE(Ja+Ha);V.writeU32BE(ea);V.writeU32BE(ca.alpha);V.writeU32BE(Na);V.writeU32BE(ca.name.length);Ca||V.writeU32BE(ca.layers.length);V.writeString(ca.name);if(Ca){ea=V.pos;Ca=V.data;Ja=ca.image.data;for(Ha=0;Ha<Ja.length;Ha+=I.BYTES_PER_PIXEL)Ca[ea++]=Ja[Ha+I.ALPHA_BYTE_OFFSET],Ca[ea++]=Ja[Ha+I.RED_BYTE_OFFSET],Ca[ea++]=Ja[Ha+I.GREEN_BYTE_OFFSET],
Ca[ea++]=Ja[Ha+I.BLUE_BYTE_OFFSET];V.pos=ea}ea=(ca.mask&&(ma=ca.mask,V.data.set(ma.data,V.pos),V.pos+=ma.data.length),V.getAsDataArray());ka.call(g,ea,!1);setTimeout(W,10)})})}()}catch(ca){r=!0,G=ca}finally{try{m||null==M.return||M.return()}finally{if(r)throw G;}}return w.then(function(){return new Promise(function(ca,W){g.onEnd=function(ka){if(0===ka)if("undefined"!=typeof Blob)ca({bytes:new Blob(p,{type:"application/octet-stream"}),version:u});else{ka=new Uint8Array(p.map(function(wa){return wa.byteLength}).reduce(function(wa,
wb){return wa+wb},0));var ea=0,ma=!0,Ca=!1,Ja=void 0;try{for(var Ha,V=p[Symbol.iterator]();!(ma=(Ha=V.next()).done);ma=!0){var Na=Ha.value;ka.set(Na,ea);ea+=Na.byteLength}}catch(wa){Ca=!0,Ja=wa}finally{try{ma||null==V.return||V.return()}finally{if(Ca)throw Ja;}}ca({bytes:ka,version:u})}else W(ka)};g.push(Si("ZEND",0).getAsDataArray(),!0)})})}));l.then(function(g){if(b)d.emitEvent("savingFailure");else if(k=a.swatches?new Blob([(new Mf).write(a.swatches)],{type:"application/octet-stream"}):null,a.url){var p=
new FormData;p.append("beginMarker","This marker ensures the upload wasn't truncated");p.append("painter","ChickenPaint v2.0");p.append("picture",f);f=null;g?(p.append("chibifileFormat",g.version),p.append("chibifile",g.bytes),g=null,p.append("rotation",""+a.rotation)):p.append("rotation","0");k&&(p.append("swatches",k),k=null);p.append("endMarker","This marker ensures the upload wasn't truncated");c(.5);fetch(a.url,{method:"POST",mode:"same-origin",headers:{"X-Requested-With":"chickenpaint"},body:p}).then(function(m){if(!m.ok)throw Error("Network response was not ok (".concat(m.status,
")"));return m.text()}).then(function(m){/^CHIBIOK/.test(m)?(c(1),d.emitEvent("savingComplete")):d.emitEvent("savingFailure",[m])}).catch(function(m){d.emitEvent("savingFailure",[m.message])})}else p="oekaki_"+(new Date).toISOString().split(".")[0].replace(/[^0-9]/g,"_"),da(vg).saveAs(f,p+".png"),g&&da(vg).saveAs(g.bytes,p+".chi"),k&&da(vg).saveAs(k,p+".aco")}).catch(function(g){d.emitEvent("savingFailure")})};this.cancel=function(){b=!0}}function Cp(a,c,d){function b(){var ka=g.width/2,ea=g.height/
2;if(p.fillStyle="white",p.fillRect(0,0,g.width,g.height),N==L.length){var ma=u.width,Ca=u.height,Ja=Math.round(ka-ma/2),Ha=Math.round(ea-Ca/2);p.drawImage(u,Ja,Ha);var V=M;k||((k=document.createElement("canvas")).width=ma,k.height=Ca,h=k.getContext("2d"));h.globalCompositeOperation="copy";h.drawImage(m,0,0);l||((l=document.createElement("canvas")).width=ma,l.height=Ca,e=l.getContext("2d"));e.globalCompositeOperation="copy";e.drawImage(G,0,0);e.globalCompositeOperation="source-in";e.drawImage(G,0,
Math.round(170*V));h.globalCompositeOperation="source-over";h.drawImage(l,0,0);h.drawImage(n,0,0);h.globalCompositeOperation="screen";h.drawImage(z,0,0);h.globalCompositeOperation="multiply";h.drawImage(w,0,0);p.globalAlpha=.88;p.drawImage(k,Ja,Ha);p.globalAlpha=1;p.drawImage(r,Ja,Ha);ea=Math.round(ea+Ca/2+2)}if(""!=ca)for(p.fillStyle="black",V=ca.split("\n"),ma=0;ma<V.length;ma++)Ca=V[ma],Ja=p.measureText(Ca).width,ea+=28,p.fillText(Ca,ka-Ja/2,ea)}function f(){g.width=g.clientWidth;g.height=g.clientHeight;
p.font="14pt sans-serif";b()}var k,l,h,e,g=document.createElement("canvas"),p=g.getContext("2d"),m=new Image,n=new Image,r=new Image,u=new Image,w=new Image,z=new Image,G=new Image,L=[m,n,r,u,w,z,G],N=0,M=0,ca="";d+="splash/";for(var W=0;W<L.length;W++)L[W].onload=function(){++N==L.length&&b()};m.src=d+"cup.png";z.src=d+"highlights.png";n.src=d+"lid.png";r.src=d+"lines.png";w.src=d+"shading.png";G.src=d+"smoothie.png";u.src=d+"text.png";c.on("loadingProgress",function(ka,ea){M=ka;ca=ea;b()});c.on("loadingFailure",
function(ka){M=0;ca=ka;b()});c.on("loadingComplete",function(){window.removeEventListener("resize",f);a.removeChild(g)});window.addEventListener("resize",f);g.className="chickenpaint-splash-screen";a.appendChild(g);f()}function Ll(a){for(var c={DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27," ":32,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,SHIFT:16,"[":219,"]":221,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,0:48,"-":189,"=":187,"+":187,";":187,META:91,LEFTMETA:91,RIGHTMETA:91,ALT:18,ALTGRAPH:18,
OPTION:18,CONTROL:17},d=65;90>=d;d++)c[String.fromCharCode(d)]=d;if((a=a.toUpperCase())in c)return c[a]}function ve(){var a,c=null,d=this;this.isPen=function(){var b;return!!c&&(1==(b=c.pointerType)||3==b)};this.getPressure=function(){return c?c.pressure:1};this.pluginLoaded=function(){console.log("Wacom tablet support loaded!");c=a.penAPI};this.isTabletPresent=function(){return!!c};this.detectTablet=function(){if(/Chrome/i.test(navigator.userAgent)&&!/OPR/.test(navigator.userAgent))console.log("Not attempting to load Wacom tablet plugin, since this is Chrome");
else{if(console.log("Attempting to load Wacom tablet support..."),"classid"in(a=document.createElement("object")))a.classid="CLSID:092dfa86-5807-5a94-bf3b-5a53ba9e5308";else{var b=document.createElement("param");b.name="onload";b.value="onWacomPluginLoaded";a.appendChild(b);a.type="application/x-wacomtabletplugin"}a.style.position="absolute";a.style.visibility="hidden";a.onload="onWacomPluginLoaded";document.body.appendChild(a);setTimeout(function(){d.isTabletPresent()||console.log("Looks like the Wacom plugin isn't installed, or failed to load.")},
5E3)}}}function Ml(){var a,c,d,b,f,k,l,h,e=this;this.x0=this.y0=this.x1=this.y1=this.x2=this.y2=this.x3=this.y3=0;this.compute=function(g,p,m){var n=1/m,r=3*n,u=r*n;n*=n*n;var w=2*u,z=6*n,G=e.x0-2*e.x1+e.x2,L=e.y0-2*e.y1+e.y2,N=3*(e.x1-e.x2)-e.x0+e.x3,M=3*(e.y1-e.y2)-e.y0+e.y3;a=e.x0;f=e.y0;c=(e.x1-e.x0)*r+G*u+N*n;k=(e.y1-e.y0)*r+L*u+M*n;d=G*w+N*z;l=L*w+M*z;b=N*z;h=M*z;g[0]=a;p[0]=f;for(r=1;r<m;r++)a+=c,f+=k,c+=d,k+=l,d+=b,l+=h,g[r]=a,p[r]=f}}function Nl(a,c,d,b){var f,k=0;return"boolean"!=typeof c&&
(b=d,d=c,c=void 0),function(){function l(){k=+new Date;d.apply(h,g)}var h=this,e=+new Date-k,g=arguments;b&&!f&&l();f&&clearTimeout(f);void 0===b&&e>a?l():!0!==c&&(f=setTimeout(b?function(){f=void 0}:l,void 0===b?a-e:a))}}function nf(a){this.points=a||[]}function sc(a,c){this.x=a;this.y=c}function Ol(a){for(var c=document.createElement("canvas"),d=c.getContext("2d"),b=d.createImageData(64,64),f=b.data,k=0,l=0;64>l;l++)for(var h=0;64>h;h++)0!=(8&h)^0!=(8&l)?(f[k++]=255,f[k++]=255,f[k++]=255):(f[k++]=
204,f[k++]=204,f[k++]=204),f[k++]=255;return c.width=64,c.height=64,d.putImageData(b,0,0),a.createPattern(c,"repeat")}function kh(a,c){c+="Style";a.globalCompositeOperation="exclusion";"exclusion"==a.globalCompositeOperation?a[c]="white":(a.globalCompositeOperation="difference",a[c]="#888","difference"!=a.globalCompositeOperation&&(a[c]="black"))}function wg(a){function c(){var w=a?da(pa)(b).height():da(pa)(b).width();n=g/(h-l)*w;w=(e-l)/(h-l)*(w-n);k.style[a?"height":"width"]=n+"px";f.style[a?"height":
"width"]=n+"px";f.style[a?"top":"left"]=w+"px"}var d,b=document.createElement("div"),f=document.createElement("div"),k=document.createElement("div"),l=0,h=1,e=0,g=1,p=10,m=!1,n=1,r=!1,u=this;this.setValues=function(w,z,G,L){e=w;g=z;l=G;h=L;c()};this.setBlockIncrement=function(w){p=w};this.setUnitIncrement=function(w){};this.getElement=function(){return b};this.getValueIsAdjusting=function(){return m};b.className="chickenpaint-scrollbar "+(a?"chickenpaint-scrollbar-vertical":"chickenpaint-scrollbar-horizontal");
f.className="chickenpaint-scrollbar-handle";f.setAttribute("touch-action","none");k.className="chickenpaint-scrollbar-handle-inner";f.appendChild(k);b.appendChild(f);f.addEventListener("pointerdown",function(w){w.stopPropagation();d=a?w.pageY-da(pa)(b).offset().top:w.pageX-da(pa)(b).offset().left;f.setPointerCapture(w.pointerId);da(pa)(f).addClass("dragging");r=!0});f.addEventListener("pointermove",function(w){if(r){m=!0;var z=a?da(pa)(b).height():da(pa)(b).width();w=a?w.pageY-da(pa)(b).offset().top:
w.pageX-da(pa)(b).offset().left;e+=(w-d)*(h-l)/(z-n);e=Math.min(Math.max(e,l),h);d=w;u.emitEvent("valueChanged",[e]);c();m=!1}});f.addEventListener("pointerup",function(w){if(w.stopPropagation(),r){try{f.releasePointerCapture(w.pointerId)}catch(z){}da(pa)(f).removeClass("dragging");r=!1}});f.addEventListener("click",function(w){w.stopPropagation()});b.addEventListener("click",function(w){this==b&&((a?w.pageY-da(pa)(b).offset().top:w.pageX-da(pa)(b).offset().left)<parseInt(f.style[a?"top":"left"],
10)?e-=p:e+=p,u.emitEvent("valueChanged",[e]),c())})}function dd(){this.modes=[]}function lh(a){function c(){}function d(){}function b(){this.shouldPaintBrushPreview=!1;this.oldPreviewRect=null}function f(){b.call(this);this.smoothMouse={x:0,y:0}}function k(){var E,P;this.mouseDown=function(aa,qa,Aa){if(!this.capture&&0==qa&&!aa.altKey&&!da(Cc).isPressed("space")&&G())return this.capture=!0,E=P={x:pb+.5,y:yb+.5},this.eraseBrushPreview(),!0};this.mouseDrag=function(aa){if(this.capture){var qa=new Sa(Math.min(E.x,
P.x)-1-1,Math.min(E.y,P.y)-1-1,Math.max(E.x,P.x)+1+1+1,Math.max(E.y,P.y)+1+1+1);if(P={x:pb+.5,y:yb+.5},aa.shiftKey){var Aa=Math.PI/4;aa=Math.round(Math.atan2(P.y-E.y,P.x-E.x)/Aa);switch(aa){case 0:case 4:P.y=E.y;break;case 2:case 6:P.x=E.x;break;default:aa*=Aa,Aa=Math.sqrt((P.y-E.y)*(P.y-E.y)+(P.x-E.x)*(P.x-E.x)),P.x=E.x+Aa*Math.cos(aa),P.y=E.y+Aa*Math.sin(aa)}}return qa.union(new Sa(Math.min(E.x,P.x)-1-1,Math.min(E.y,P.y)-1-1,Math.max(E.x,P.x)+1+1+1,Math.max(E.y,P.y)+1+1+1)),wb(qa),!0}this.mouseMove.call(this,
aa)};this.mouseUp=function(aa,qa,Aa){if(this.capture&&0==qa)return aa=M(E),qa=M(P),this.capture=!1,this.drawLine(aa,qa),wb(new Sa(Math.min(E.x,P.x)-1-1,Math.min(E.y,P.y)-1-1,Math.max(E.x,P.x)+1+1+1,Math.max(E.y,P.y)+1+1+1)),!0};this.paint=function(){this.capture?(va.lineWidth=1,va.beginPath(),va.moveTo(E.x,E.y),va.lineTo(P.x,P.y),va.stroke()):b.prototype.paint.call(this)};b.call(this)}function l(){var E,P,aa,qa,Aa=0;this.mouseDown=function(Ba,Oa,tb){if(!this.capture&&0==Oa&&!Ba.altKey&&!da(Cc).isPressed("space")&&
G())return Ba=M({x:pb,y:yb}),Aa=0,E=P=aa=qa=Ba,this.capture=!0,this.eraseBrushPreview(),!0};this.mouseDrag=function(Ba){if(this.capture&&0===Aa)return aa=qa=M({x:pb,y:yb}),Va.repaintAll(),!0;this.mouseMove.call(this,Ba)};this.mouseUp=function(Ba,Oa,tb){if(this.capture&&0==Oa){switch(Aa){case 0:Aa=1;break;case 1:Aa=2;break;case 2:this.capture=!1;Oa=E;tb=P;var Ea=aa,ub=qa;Ba=new Ml;Ba.x0=Oa.x;Ba.y0=Oa.y;Ba.x1=tb.x;Ba.y1=tb.y;Ba.x2=Ea.x;Ba.y2=Ea.y;Ba.x3=ub.x;Ba.y3=ub.y;Oa=Array(500);tb=Array(500);Ba.compute(Oa,
tb,500);Ka.beginStroke(Oa[0],tb[0],1);for(Ba=1;500>Ba;Ba++)Ka.continueStroke(Oa[Ba],tb[Ba],1);Ka.endStroke();Va.repaintAll()}return!0}};this.mouseMove=function(Ba,Oa){if(this.capture)return Ba=M({x:pb,y:yb}),1==Aa?P=Ba:2==Aa&&(aa=Ba),Va.repaintAll(),!0;b.prototype.mouseMove.call(this,Ba,Oa)};this.paint=function(){if(this.capture){var Ba=new Ml,Oa=W(E),tb=W(P),Ea=W(aa),ub=W(qa);Ba.x0=Oa.x;Ba.y0=Oa.y;Ba.x1=tb.x;Ba.y1=tb.y;Ba.x2=Ea.x;Ba.y2=Ea.y;Ba.x3=ub.x;Ba.y3=ub.y;var Ec=Array(100),jd=Array(100);Ba.compute(Ec,
jd,100);va.beginPath();va.moveTo(Ec[0],jd[0]);for(Ba=1;100>Ba;Ba++)va.lineTo(Ec[Ba],jd[Ba]);va.moveTo(~~Oa.x,~~Oa.y);va.lineTo(~~tb.x,~~tb.y);va.moveTo(~~Ea.x,~~Ea.y);va.lineTo(~~ub.x,~~ub.y);va.stroke()}else b.prototype.paint.call(this)};b.call(this)}function h(){var E;this.mouseDown=function(P,aa,qa){return!!this.capture||(da(Cc).isPressed("space")||(0!=aa||this.transient&&!P.altKey)&&2!=aa?void(this.transient&&vb.pop()):(E=aa,this.capture=!0,w("crosshair"),this.mouseDrag(P),!0))};this.mouseDrag=
function(P){if(this.capture)return P=M({x:pb,y:yb}),Ka.isPointWithin(P.x,P.y)&&a.setCurColor(new ac(Ka.colorPicker(P.x,P.y))),!0};this.mouseUp=function(P,aa,qa){if(this.capture&&aa==E)return E=-1,this.capture=!1,w("default"),this.transient&&vb.pop(),!0};this.enter=function(){c.prototype.enter.call(this);E=-1}}function e(){var E,P,aa,qa;this.keyDown=function(Aa){if(" "===Aa.key)return this.capture||w("grab"),!0};this.keyUp=function(Aa){if(this.transient&&1!=qa&&" "===Aa.key)return w("default"),vb.pop(),
!0};this.mouseDown=function(Aa,Ba,Oa){return!!this.capture||(1==Ba||da(Cc).isPressed("space")&&0==Ba||!this.transient&&0==Ba?(this.capture=!0,qa=Ba,E=Aa.pageX,P=Aa.pageY,aa=Va.getOffset(),w("grabbing"),!0):void(this.transient&&vb.pop()))};this.mouseDrag=function(Aa){if(this.capture)return Va.setOffset(aa.x+Aa.pageX-E,aa.y+Aa.pageY-P),!0};this.mouseUp=function(Aa,Ba,Oa){if(this.capture&&Ba==qa)return qa=-1,this.capture=!1,this.transient&&!da(Cc).isPressed("space")&&(w("default"),vb.pop()),!0};this.enter=
function(){w("grab")}}function g(){}function p(){var E,P=new Sa(0,0,0,0),aa=-1;this.mouseDown=function(qa,Aa,Ba){if(!this.capture&&0==Aa&&!qa.altKey&&!da(Cc).isPressed("space"))return qa=ca({x:pb,y:yb}),aa=Aa,P.makeEmpty(),E=qa,Va.repaintAll(),this.capture=!0,!0};this.mouseDrag=function(qa){if(!this.capture)return!1;var Aa=ca({x:pb,y:yb});qa=qa.shiftKey;var Ba=~~Math.max(Math.abs(Aa.x-E.x),Math.abs(Aa.y-E.y));return Aa.x>=E.x?(P.left=E.x,P.right=(qa?E.x+Ba:Aa.x)+1):(P.left=qa?E.x-Ba:Aa.x,P.right=
E.x+1),Aa.y>=E.y?(P.top=E.y,P.bottom=(qa?E.y+Ba:Aa.y)+1):(P.top=qa?E.y-Ba:Aa.y,P.bottom=E.y+1),Va.repaintAll(),!0};this.mouseUp=function(qa,Aa,Ba){if(this.capture&&Aa==aa)return Ka.rectangleSelection(P),P.makeEmpty(),Va.repaintAll(),this.capture=!1,aa=-1,!0};this.paint=function(){P.isEmpty()||(va.lineWidth=1,ma(va,P))}}function m(){var E,P,aa=!1;this.mouseDown=function(qa,Aa,Ba){if(!this.capture&&0==Aa&&!da(Cc).isPressed("space")&&z())return E=M({x:pb,y:yb}),P=qa.altKey,aa=!0,this.capture=!0,!0};
this.mouseDrag=Nl(25,function(qa){if(this.capture){qa=M({x:pb,y:yb});var Aa=qa.x-E.x,Ba=qa.y-E.y,Oa=~~Aa,tb=~~Ba;return(0!=Oa||0!=tb)&&(Ka.move(Oa,tb,P&&aa),aa=!1),E.x=qa.x-(Aa-Oa),E.y=qa.y-(Ba-tb),!0}});this.mouseUp=function(qa,Aa,Ba){if(this.capture&&0==Aa)return this.capture=!1,this.transient&&vb.pop(),!0}}function n(){function E(Ta,$a){return{x:(Ta.x+$a.x)/2,y:(Ta.y+$a.y)/2}}function P(Ta){return{x:Math.round(Ta.x),y:Math.round(Ta.y)}}function aa(Ta,$a){for(var ab=0;ab<Ta.points.length;ab++)if(49>=
($a.x-Ta.points[ab].x)*($a.x-Ta.points[ab].x)+($a.y-Ta.points[ab].y)*($a.y-Ta.points[ab].y))return 2*ab;for(ab=0;ab<Ta.points.length;ab++){var Cb=Ta.points[ab],Rb=Ta.points[(ab+1)%Ta.points.length];Rb=new sc(Rb.x-Cb.x,Rb.y-Cb.y);Cb=new sc($a.x-Cb.x,$a.y-Cb.y);var wd=Rb.getLength(),Qd=Rb.getScaled(1/wd);wd=Cb.getScaled(1/wd);Qd=Qd.getDotProduct(wd);if(0<=Qd&&1>=Qd&&(Rb.scale(Qd),49>=(Rb.x-Cb.x)*(Rb.x-Cb.x)+(Rb.y-Cb.y)*(Rb.y-Cb.y)))return 2*ab+1}return Ta.containsPoint($a)?-3:-2}function qa(){var Ta=
tb.getTransformed(fb),$a=aa(Ta,{x:pb,y:yb});switch($a){case 0:case 2:case 4:case 6:$a=~~($a/2);var ab=Ta.points[$a],Cb=Ta.points[($a+1)%4];Aa(sc.subtractPoints(Ta.points[($a+3)%4],ab).normalize().add(sc.subtractPoints(Cb,ab).normalize()));break;case 1:case 3:case 5:case 7:Aa(sc.subtractPoints(Ta.points[(~~($a/2)+1)%4],Ta.points[~~($a/2)]).getPerpendicular());break;case -3:w("move");break;default:w("default")}}function Aa(Ta){Ta=Math.floor(Math.atan2(-Ta.y,Ta.x)/(Math.PI/4)+.5);switch(0>Ta&&(Ta+=4),
Ta){default:Ta="ew-resize";break;case 1:Ta="nesw-resize";break;case 2:Ta="ns-resize";break;case 3:Ta="nwse-resize"}w(Ta)}var Ba,Oa,tb,Ea,ub,Ec,jd=-1;this.mouseDown=function(Ta,$a,ab){if(!this.capture&&0==$a&&!Ta.altKey&&!da(Cc).isPressed("space"))return jd=aa(tb.getTransformed(fb),{x:pb,y:yb}),ub=M(Ea={x:pb,y:yb}),this.capture=!0,qa(),!0};this.mouseDrag=Nl(40,function(Ta){if(this.capture){var $a={x:pb,y:yb};switch(jd){case -3:Ta=P(M($a));var ab=sc.subtractPoints(Ta,ub);$a=ab.getTruncated();ab=ab.subtract($a);
var Cb=new pc;Cb.translate($a.x,$a.y);Ba.preMultiply(Cb);ub=sc.subtractPoints(Ta,ab);break;case -2:Cb=Math.PI/4;ab=tb.getCenter();var Rb=W(ab),wd=Math.atan2($a.y-Rb.y,$a.x-Rb.x)-Math.atan2(Ea.y-Rb.y,Ea.x-Rb.x);Rb=new pc;Ec+=wd;Ta=Ta.shiftKey?-Ba.decompose().rotate+Math.round(Ec/Cb)*Cb:wd;Rb.rotateAroundPoint(Ta,ab.x,ab.y);Ba.preMultiply(Rb);Ea=$a;break;case 0:case 2:case 4:case 6:Cb=~~(jd/2);ab=Oa.points[Cb];Rb=Ba.getInverted().getTransformedPoint(P(M($a)));$a=Oa.points[(Cb+2)%4];Cb=(Rb.x-$a.x)/(ab.x-
$a.x);ab=(Rb.y-$a.y)/(ab.y-$a.y);if(.001>Math.abs(Cb)||.001>Math.abs(ab)||isNaN(Cb)||isNaN(ab))return!0;Ta.shiftKey&&(ab=Cb=Ta=Math.max(Cb,ab));Ba.scaleAroundPoint(Cb,ab,$a.x,$a.y);break;case 1:case 5:case 3:case 7:Ta=~~(jd/2);Rb=E(Oa.points[Ta],Oa.points[(Ta+1)%4]);$a=Ba.getInverted().getTransformedPoint(P(M($a)));Ta=E(Oa.points[(Ta+2)%4],Oa.points[(Ta+3)%4]);Rb=sc.subtractPoints(Rb,Ta);$a=sc.subtractPoints($a,Ta);wd=Rb.getLength();$a=Rb.getDotProduct($a)/wd/wd;if(.001>Math.abs($a)||isNaN($a))return!0;
1==jd||5==jd?(ab=1,Cb=$a):(ab=$a,Cb=1);Ba.scaleAroundPoint(ab,Cb,Ta.x,Ta.y)}return tb=Oa.getTransformed(Ba),Ka.transformAffineAmend(Ba),Va.repaintAll(),!0}});this.mouseUp=function(Ta,$a,ab){if(this.capture&&0==$a)return this.capture=!1,jd=-1,!0};this.mouseMove=function(){this.capture||qa()};this.paint=function(){for(var Ta=tb.getTransformed(fb).points,$a=Array(2*Ta.length),ab=0;ab<Ta.length;ab++)$a[ab]=Ta[ab];for(ab=0;ab<Ta.length;ab++){var Cb=Ta[ab],Rb=Ta[(ab+1)%Ta.length];$a[ab+Ta.length]={x:(Cb.x+
Rb.x)/2,y:(Cb.y+Rb.y)/2}}kh(va,"fill");for(ab=0;ab<$a.length;ab++)va.fillRect($a[ab].x-3,$a[ab].y-3,7,7);ea(va,Ta)};this.keyDown=function(Ta){return"Enter"===Ta.key?(a.actionPerformed({action:"CPTransformAccept"}),!0):"Escape"===Ta.key?(a.actionPerformed({action:"CPTransformReject"}),!0):void 0};this.enter=function(){c.prototype.enter.call(this);var Ta,$a=Ka.transformAffineBegin();Ba=$a.transform;$a.rect;(Ta=$a.selection).isEmpty()&&(Ta=$a.rect.clone());tb=(Oa=new nf(Ta.toPoints())).getTransformed(Ba);
jd=-1;Ec=0;Va.repaintAll()};this.leave=function(){c.prototype.leave.call(this);Va.repaintAll()}}function r(){var E,P,aa=0,qa=!1,Aa=-1;this.mouseDown=function(Ba,Oa,tb){return!!this.capture||(!this.transient&&0==Oa&&!Ba.altKey&&!da(Cc).isPressed("space")||0==Oa&&!Ba.altKey&&!da(Cc).isPressed("space")&&da(Cc).isPressed("r")?(E={x:pb,y:yb},aa=Va.getRotation(),P=fb.clone(),qa=!1,this.capture=!0,Aa=Oa,!0):void(this.transient&&vb.pop()))};this.mouseDrag=function(Ba){if(this.capture){var Oa=pb,tb=yb,Ea=
da(pa)(X).width()/2,ub=da(pa)(X).height()/2;Ba=X.width/2;var Ec=X.height/2;Oa=Math.atan2(tb-ub,Oa-Ea)-Math.atan2(E.y-ub,E.x-Ea);tb=new pc;return tb.rotateAroundPoint(Oa,Ba,Ec),tb.multiply(P),Va.setRotation(aa+Oa),Va.setOffset(~~tb.getTranslateX(),~~tb.getTranslateY()),qa=!0,!0}};this.mouseUp=function(Ba,Oa,tb){if(this.capture&&Oa==Aa){if(qa){Ba=Math.round(Kc/(Math.PI/2))*Math.PI/2;if(Math.abs(Kc-Ba)<5/180*Math.PI){Ba-=aa;Oa=X.width/2;tb=X.height/2;var Ea=new pc;Ea.rotateAroundPoint(Ba,Oa,tb);Ea.multiply(P);
Va.setRotation(aa+Ba);Va.setOffset(~~Ea.getTranslateX(),~~Ea.getTranslateY());Va.repaintAll()}Va.emitEvent("canvasRotated90",[Va.getRotation90()])}else Va.resetRotation();return this.capture=!1,this.transient&&!da(Cc).isPressed("r")&&vb.pop(),!0}};this.keyUp=function(Ba){if(this.transient&&1!=Aa&&" "===Ba.key)return w("default"),vb.pop(),!0};this.keyDown=function(Ba){if("r"===Ba.key.toLowerCase())return!0}}function u(){k.call(this)}function w(E){X.getAttribute("data-cursor")!=E&&X.setAttribute("data-cursor",
E)}function z(){var E=Ka.getActiveLayer();return E.visible&&E.ancestorsAreVisible()?0!=E.alpha||(a.showLayerNotification(E,sa("Whoops! This layer's opacity is currently 0%"),"opacity"),!1):(a.showLayerNotification(E,sa("Whoops! This layer is currently hidden"),"layer"),!1)}function G(){var E=Ka.getActiveLayer();return E instanceof Ib&&!Ka.isEditingMask()?(a.showLayerNotification(E,sa("Whoops! You can't draw on a group"),"layer"),!1):z()}function L(E,P,aa,qa,Aa){E.setValues(-Aa,qa,P-qa-Aa+aa/4,P+aa-
Aa-aa/4);E.setBlockIncrement(Math.max(1,~~(.66*qa)));E.setUnitIncrement(Math.max(1,~~(.05*qa)))}function N(){fb.setToIdentity();fb.translate(Bb,kc);fb.scale(fc,fc);fb.rotate(Kc);if(null!=Gd&&null!=A&&!Gd.getValueIsAdjusting()&&!A.getValueIsAdjusting()){var E=Ca(new Sa(0,0,ua.width,ua.height));L(Gd,E.left,E.getWidth(),da(pa)(X).width(),Va.getOffset().x);L(A,E.top,E.getHeight(),da(pa)(X).height(),Va.getOffset().y)}Va.repaintAll()}function M(E){return fb.getInverted().getTransformedPoint(E)}function ca(E){E=
M(E);return E.x=Math.floor(E.x),E.y=Math.floor(E.y),E}function W(E){return fb.getTransformedPoint(E)}function ka(E){E=W(E);return E.x=Math.round(E.x),E.y=Math.round(E.y),E}function ea(E,P){E.beginPath();E.moveTo(P[0].x,P[0].y);for(var aa=1;aa<P.length;aa++)E.lineTo(P[aa].x,P[aa].y);E.lineTo(P[0].x,P[0].y);E.stroke()}function ma(E,P){var aa=W({x:(P.left+P.right)/2,y:(P.top+P.bottom)/2});P=P.toPoints();for(var qa=0;qa<P.length;qa++)P[qa]=ka(P[qa]),P[qa].x+=.5*Math.sign(aa.x-P[qa].x),P[qa].y+=.5*Math.sign(aa.y-
P[qa].y);ea(E,P)}function Ca(E){var P=ka({x:E.left-1,y:E.top-1}),aa=ka({x:E.left-1,y:E.bottom}),qa=ka({x:E.right,y:E.top-1});E=ka({x:E.right,y:E.bottom});P=new Sa(Math.min(Math.min(P.x,aa.x),Math.min(qa.x,E.x)),Math.min(Math.min(P.y,aa.y),Math.min(qa.y,E.y)),Math.max(Math.max(P.x,aa.x),Math.max(qa.x,E.x))+1,Math.max(Math.max(P.y,aa.y),Math.max(qa.y,E.y))+1);return P.grow(2,2),P}function Ja(){var E=X.width,P=X.height,aa=W({x:Ka.width/2,y:Ka.height/2});Va.setOffset(Math.round(Bb+E/2-aa.x),Math.round(kc+
P/2-aa.y))}function Ha(E,P,aa){if(E=Math.max(.1,Math.min(16,E)),Va.getZoom()!=E){var qa=Va.getOffset();Va.setOffset(qa.x+~~((P-qa.x)*(1-E/Va.getZoom())),qa.y+~~((aa-qa.y)*(1-E/Va.getZoom())));Va.setZoom(E);Va.repaintAll()}}function V(E){var P=da(pa)(X).width(),aa=da(pa)(X).height(),qa=parseFloat(E);.01>Math.abs(qa-1)?E=1:.2>Math.abs(qa-2)?E=2:.08>Math.abs(qa-.5)&&(E=.5);Ha(E,P/2,aa/2)}function Na(E){return wc?fe.getPressure():"mouse"===E.pointerType&&0!==E.buttons&&0===E.pressure?1:"touch"===E.pointerType?
(0!==E.pressure&&(Dc=!0),Dc)?2*E.pressure:1:2*E.pressure}function wa(){Zc||(Zc=!0,window.requestAnimationFrame(function(){Va.paint()}))}function wb(E){Ya.union(E);wa()}function kb(){jb=Ka.getBounds();Va.repaintAll()}var Yb,Pb,Va=this,Mc=document.createElement("div"),jc=document.createElement("div"),za=document.createElement("div"),X=document.createElement("canvas"),va=X.getContext("2d"),ua=document.createElement("canvas"),bb=ua.getContext("2d"),xb=Ol(va),Ka=a.getArtwork(),fc=1,Bb=0,kc=0,Kc=0,fb=new pc,
Jc=!1,Ab=!1,qc=32,pb=0,yb=0,$c=!1,$b=[!1,!1,!1],wc=!1,xc=!1,Dc=!1,jb=Ka.getBounds(),Ya=new Sa(0,0,0,0),Zc=!1,lb=[],vb=new dd,Gd=new wg(!1),A=new wg(!0),fe=ve.getRef();Math.sign=Math.sign||function(E){return 0==(E=+E)||isNaN(E)?E:0<E?1:-1};c.prototype.transient=!1;c.prototype.capture=!1;c.prototype.enter=function(){w("default")};c.prototype.leave=function(){this.capture=!1};c.prototype.mouseMove=c.prototype.paint=c.prototype.mouseDown=c.prototype.mouseDrag=c.prototype.mouseUp=c.prototype.keyDown=c.prototype.suspend=
c.prototype.resume=c.prototype.keyUp=function(){};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.mouseDown=function(E,P,aa){var qa=da(Cc).isPressed("space");!qa&&(2==P||0==P&&E.altKey)?(vb.push(Oc,!0),vb.peek().mouseDown(E,P,aa)):qa||0!=P||E.altKey||!da(Cc).isPressed("r")?(1==P||!E.altKey&&qa&&0==P)&&(vb.push(Fd,!0),vb.peek().mouseDown(E,P,aa)):(vb.push(yc,!0),vb.peek().mouseDown(E,P,aa))};d.prototype.keyDown=function(E){if("r"===E.key.toLowerCase()&&" "!==E.key)vb.push(yc,
!0),vb.peek().keyDown(E);else if("r"!==E.key.toLowerCase()&&" "===E.key&&!E.altKey)return vb.push(Fd,!0),vb.peek().keyDown(E),!0};b.prototype=Object.create(c.prototype);b.prototype.constructor=b;b.prototype.getBrushPreviewOval=function(){var E=a.getBrushSize()*fc;return new Sa(pb-E/2,yb-E/2,pb+E/2,yb+E/2)};b.prototype.queueBrushPreview=function(){if(vb.peek()==this){this.shouldPaintBrushPreview=!0;var E=this.getBrushPreviewOval();E.grow(2,2);null!=this.oldPreviewRect&&(E.union(this.oldPreviewRect),
this.oldPreviewRect=null);wb(E)}};b.prototype.eraseBrushPreview=function(){this.shouldPaintBrushPreview=!1;null!=this.oldPreviewRect&&(wb(this.oldPreviewRect),this.oldPreviewRect=null)};b.prototype.mouseMove=function(E,P){this.queueBrushPreview()};b.prototype.enter=function(){c.prototype.enter.call(this);$c&&this.queueBrushPreview()};b.prototype.leave=function(){c.prototype.leave.call(this);this.eraseBrushPreview()};b.prototype.suspend=b.prototype.leave;b.prototype.resume=b.prototype.enter;b.prototype.paint=
function(){if(this.shouldPaintBrushPreview){this.shouldPaintBrushPreview=!1;var E=this.getBrushPreviewOval();va.beginPath();va.arc((E.left+E.right)/2,(E.top+E.bottom)/2,E.getWidth()/2,0,2*Math.PI);va.stroke();E.grow(2,2);null==this.oldPreviewRect?this.oldPreviewRect=E:this.oldPreviewRect.union(E)}};f.prototype=Object.create(b.prototype);f.prototype.constructor=f;f.prototype.mouseDown=function(E,P,aa){if(!this.capture&&0==P&&!E.altKey&&!da(Cc).isPressed("space")&&G()&&(E=M({x:pb,y:yb}),this.eraseBrushPreview(),
Ka.beginStroke(E.x,E.y,aa)))return this.capture=!0,this.smoothMouse=E,!0};f.prototype.mouseDrag=function(E,P){if(("number"!=typeof navigator.maxTouchPoints||3>navigator.maxTouchPoints)&&b.prototype.mouseMove.call(this,E,P),this.capture){E=M({x:pb,y:yb});var aa=Math.min(.999,Math.pow(a.getBrushInfo().smoothing,.3));return this.smoothMouse.x=(1-aa)*E.x+aa*this.smoothMouse.x,this.smoothMouse.y=(1-aa)*E.y+aa*this.smoothMouse.y,Ka.continueStroke(this.smoothMouse.x,this.smoothMouse.y,P),!0}this.mouseMove(E)};
f.prototype.mouseUp=function(E,P,aa){if(this.capture)return 0==P&&(this.capture=!1,Ka.endStroke()),!0};k.prototype=Object.create(b.prototype);k.prototype.constructor=k;k.prototype.drawLine=function(E,P){Ka.beginStroke(E.x,E.y,1);Ka.continueStroke(P.x,P.y,1);Ka.endStroke()};l.prototype=Object.create(b.prototype);l.prototype.constructor=l;h.prototype=Object.create(c.prototype);h.prototype.constructor=h;e.prototype=Object.create(c.prototype);e.prototype.constructor=e;g.prototype=Object.create(c.prototype);
g.prototype.constructor=g;g.prototype.mouseDown=function(E,P,aa){if(0==P&&!E.altKey&&!da(Cc).isPressed("space")&&G())return E=M({x:pb,y:yb}),Ka.isPointWithin(E.x,E.y)&&(Ka.floodFill(E.x,E.y),Va.repaintAll()),!0};p.prototype=Object.create(c.prototype);p.prototype.constructor=p;m.prototype=Object.create(c.prototype);m.prototype.constructor=m;m.prototype.mouseMove=function(E){if(!da(Cc).isPressed("r"))return w("move"),!0};m.prototype.enter=function(){w("move")};n.prototype=Object.create(c.prototype);
n.prototype.constructor=n;r.prototype=Object.create(c.prototype);r.prototype.constructor=r;u.prototype=Object.create(k.prototype);u.prototype.constructor=u;u.prototype.drawLine=function(E,P){Ka.gradientFill(Math.round(E.x),Math.round(E.y),Math.round(P.x),Math.round(P.y),a.getCurGradient())};u.prototype.queueBrushPreview=function(){};this.setZoom=function(E){fc=E;N()};this.getZoom=function(){return fc};this.setGridSize=function(E){qc=Math.max(Math.round(E),1);this.repaintAll()};this.getGridSize=function(){return qc};
this.setOffset=function(E,P){isNaN(E)||isNaN(P)?console.log("Bad offset"):(Bb=E,kc=P,N())};this.getOffset=function(){return{x:Bb,y:kc}};this.setInterpolation=function(E){Jc=E;Fi(va,E);this.repaintAll()};this.setRotation=function(E){Kc=E%(2*Math.PI);N()};this.getRotation=function(){return Kc};this.getRotation90=function(){var E=Math.round(this.getRotation()/Math.PI*2);return 0>(E%=4)&&(E+=4),E};this.zoomIn=function(){V(1.41*this.getZoom())};this.zoomOut=function(){V(.7092*this.getZoom())};this.zoom100=
function(){V(1);Ja()};this.resetRotation=function(){var E=X.width/2,P=X.height/2,aa=new pc;aa.rotateAroundPoint(-this.getRotation(),E,P);aa.multiply(fb);this.setOffset(~~aa.getTranslateX(),~~aa.getTranslateY());this.setRotation(0);Va.emitEvent("canvasRotated90",[0])};var ee=!1;this.getElement=function(){return Mc};this.repaintAll=function(){Ya.left=0;Ya.top=0;Ya.right=X.width;Ya.bottom=X.height;wa()};this.paint=function(){var E,P=!1;if(Zc=!1,Ya.isEmpty()||(va.save(),va.clipTo&&(va.beginPath(),Ya.left|=
0,Ya.top|=0,va.rect(Ya.left,Ya.top,Math.ceil(Ya.getWidth()),Math.ceil(Ya.getHeight())),va.clip()),P=!0),jb.isEmpty()||(E=Pb&&Pb.isOpen()?Pb.getImageData():Ka.fusionLayers().getImageData(),bb.putImageData(E,0,0,jb.left,jb.top,jb.getWidth(),jb.getHeight()),jb.makeEmpty()),va.fillStyle="#606060",va.fillRect(0,0,X.width,X.height),va.save(),va.setTransform(fb.m[0],fb.m[1],fb.m[2],fb.m[3],fb.m[4],fb.m[5]),va.fillStyle=xb,va.fillRect(0,0,Ka.width,Ka.height),va.drawImage(ua,0,0,ua.width,ua.height),va.restore(),
kh(va,"stroke"),va.lineWidth=1,Ka.getSelection().isEmpty()||vb.peek()instanceof p&&vb.peek().capture||(va.setLineDash([3,2]),ma(va,Ka.getSelection()),va.setLineDash([])),Ab)if(E=Ka.getBounds(),2<fc*qc){va.beginPath();for(var aa=qc-1;aa<E.right;aa+=qc){var qa=W({x:aa,y:E.top}),Aa=W({x:aa,y:E.bottom});va.moveTo(qa.x+.5,qa.y+.5);va.lineTo(Aa.x+.5,Aa.y+.5)}for(aa=qc-1;aa<E.bottom;aa+=qc)qa=W({x:0,y:aa}),Aa=W({x:E.right,y:aa}),va.moveTo(qa.x+.5,qa.y+.5),va.lineTo(Aa.x+.5,Aa.y+.5);va.stroke()}vb.paint(va);
va.globalCompositeOperation="source-over";P&&(Ya.makeEmpty(),va.restore())};this.showGrid=function(E){Ab=E;this.repaintAll()};this.resize=function(E,P){E-=da(pa)(za).outerHeight();da(pa)(X).css("height",E+"px");X.width=da(pa)(X).width();X.height=E;Yb=null;P||Ja();this.setInterpolation(Jc);this.repaintAll()};a.on("toolChange",function(E,P){E=lb[P.strokeMode];for(P=0;P<vb.modes.length;P++)if(vb.modes[P]instanceof b){vb.modes[P].leave();vb.modes[P]=E;vb.modes[P].enter();break}R=E});a.on("modeChange",
function(E){switch(E){case ya.M_DRAW:var P=R;break;case ya.M_FLOODFILL:P=qd;break;case ya.M_GRADIENTFILL:P=hb;break;case ya.M_RECT_SELECTION:P=J;break;case ya.M_MOVE_TOOL:P=Y;break;case ya.M_ROTATE_CANVAS:P=yc;break;case ya.M_PAN_CANVAS:P=Fd;break;case ya.M_COLOR_PICKER:P=Oc;break;case ya.M_TRANSFORM:P=ta}vb.setUserMode(P)});a.on("maskViewOpened",function(E){Pb&&Pb.off("changeLayer",kb);(Pb=E).on("changeLayer",kb);kb()});var Ga=new d;var Oc=new h;var Fd=new e;var yc=new r;var qd=new g;var hb=new u;
var J=new p;var Y=new m;var ta=new n;var R=(lb=[new f,new k,new l])[Ma.STROKE_MODE_FREEHAND];vb.setDefaultMode(Ga);vb.setUserMode(R);ua.width=Ka.width;ua.height=Ka.height;X.width=800;X.height=900;X.className="chickenpaint-canvas";X.setAttribute("touch-action","none");va.setLineDash||(va.setLineDash=function(){});X.addEventListener("contextmenu",function(E){E.preventDefault()});X.addEventListener("mouseenter",function(){$c=!0});X.addEventListener("mouseleave",function(){$c=!1;$b[0]||$b[2]||$b[1]||
Va.repaintAll()});X.addEventListener("pointerdown",function(E){xc&&"touch"===E.pointerType||(X.setPointerCapture(E.pointerId),Yb=X.getBoundingClientRect(),pb=E.clientX-Yb.left,yb=E.clientY-Yb.top,wc=fe.isPen(),$b[0]=!1,$b[2]=!1,$b[1]=!1,$b[E.button]=!0,vb.mouseDown(E,E.button,Na(E)))});X.addEventListener("pointermove",function(E){if(Yb||=X.getBoundingClientRect(),!xc||"touch"!==E.pointerType){pb=E.clientX-Yb.left;yb=E.clientY-Yb.top;var P=0!==E.buttons,aa=P?Na(E):0;if(0!=(1&E.buttons)!=$b[0]){if(.5===
E.mozPressure)return;$b[0]=!$b[0];$b[0]?vb.mouseDown(E,0,aa):vb.mouseUp(E,0,aa)}0!=(2&E.buttons)!=$b[2]&&($b[2]=!$b[2],$b[2]?vb.mouseDown(E,2,aa):vb.mouseUp(E,2,aa));0!=(4&E.buttons)!=$b[1]&&($b[1]=!$b[1],$b[1]?vb.mouseDown(E,1,aa):vb.mouseUp(E,1,aa));P?vb.mouseDrag(E,aa):vb.mouseMove(E,aa);xc||"pen"!==E.pointerType||(xc=!0)}});X.addEventListener("pointerup",function(E){$b[0]=!1;$b[2]=!1;wc=$b[1]=!1;vb.mouseUp(E,E.button,0);X.releasePointerCapture(E.pointerId)});X.addEventListener("wheel",function(E){if(0!=
E.deltaY){if(!ee||20<Math.abs(E.deltaY)){var P=0<E.deltaY?1/1.15:1.15;var aa,qa,Aa=(aa={x:E.pageX,y:E.pageY},qa=X.getBoundingClientRect(),{x:aa.x-qa.left-window.pageXOffset,y:aa.y-qa.top-window.pageYOffset});aa=M(Aa);Ka.isPointWithin(aa.x,aa.y)?Ha(Va.getZoom()*P,Aa.x,Aa.y):Ha(Va.getZoom()*P,Bb+~~(Ka.width*fc/2),kc+~~(Ka.height*fc/2));ee=ee||setTimeout(function(){ee=!1},50)}E.preventDefault()}},{passive:!1});document.addEventListener("keydown",function(E){vb.keyDown(E)});document.addEventListener("keyup",
function(E){"alt"===E.key.toLowerCase()&&E.preventDefault();vb.keyUp(E)});document.addEventListener("visibilitychange",function(){var E=X.height+da(pa)(za).outerHeight();X.width=1;X.height=1;Va.resize(E,!0)},!1);window.addEventListener("scroll",function(){Yb=null});X.addEventListener("mousedown",function(E){1==E.button&&E.preventDefault()});Ka.on("changeSelection",function(){Va.repaintAll()});Ka.on("updateRegion",function(E){jb.union(E);wb(Ca(jb))});Gd.on("valueChanged",function(E){var P=Va.getOffset();
Va.setOffset(-E,P.y)});A.on("valueChanged",function(E){var P=Va.getOffset();Va.setOffset(P.x,-E)});this.setInterpolation(!0);Ga=document.createElement("div");Ga.className="chickenpaint-canvas-container-wrapper";Ga.appendChild(X);jc.className="chickenpaint-canvas-container-top";jc.appendChild(Ga);jc.appendChild(A.getElement());za.className="chickenpaint-canvas-container-bottom";za.appendChild(Gd.getElement());Mc.appendChild(jc);Mc.appendChild(za);a.setCanvas(this)}function ad(a,c,d,b){a.getSmallScreenMode()&&
sa(d+" (shorter)")!==d+" (shorter)"?this.title=sa(d+" (shorter)"):this.title=sa(d);b=b||{};this.name=c;this.resizeVert=b.resizeVert||!1;this.resizeHorz=b.resizeHorz||!1;var f,k,l,h=document.createElement("div");d=document.createElement("div");var e=document.createElement("i"),g=document.createElement("button"),p=document.createElement("div"),m=null,n=null,r=this;this.getElement=function(){return h};this.getBodyElement=function(){return p};this.getWidth=function(){return da(pa)(h).outerWidth()};this.getHeight=
function(){return da(pa)(h).outerHeight()};this.getX=function(){return parseInt(h.style.left,10)||0};this.getY=function(){return parseInt(h.style.top,10)||0};this.setLocation=function(w,z){h.style.left=w+"px";h.style.top=z+"px"};this.setWidth=function(w){h.style.width=w+"px"};this.setHeight=function(w){h.style.height=w+"px"};this.setSize=function(w,z){this.setWidth(w);this.setHeight(z)};this.setCollapseDownwards=function(w){b.collapseDownwards=w};this.toggleCollapse=function(w){var z=da(pa)(h);if(void 0===
w)w=!z.hasClass("collapsed");else if(z.hasClass("collapsed")==w)return;var G=z.parents(".chickenpaint").find(".chickenpaint-canvas").height(),L=this.getHeight();L=this.getY()+L;(z.toggleClass("collapsed",w),da(pa)(e).toggleClass("icon-angle-down",!w).toggleClass("icon-angle-up",w),w)?b.collapseDownwards&&this.setLocation(this.getX(),Math.min(L,G)-this.getHeight()):(w=this.getHeight(),b.collapseDownwards?this.setLocation(this.getX(),Math.max(L-w,0)):this.getY()+w>G&&this.setLocation(this.getX(),Math.max(G-
w,0)))};this.userIsDoneWithUs=function(){a.getSmallScreenMode()&&this.toggleCollapse(!0)};e.className="collapse-icon fas icon-angle-down";g.type="button";g.className="btn btn-close";g.textContent="";g.tabIndex=-1;h.className="chickenpaint-palette chickenpaint-palette-"+c;d.className="chickenpaint-palette-head";d.setAttribute("touch-action","none");c=document.createElement("div");var u=document.createElement("h5");c.className="modal-header";u.className="modal-title";u.appendChild(document.createTextNode(this.title));
u.appendChild(e);c.appendChild(u);c.appendChild(g);d.appendChild(c);p.className="chickenpaint-palette-body";h.appendChild(d);h.appendChild(p);this.resizeVert&&((m=document.createElement("div")).className="chickenpaint-resize-handle-vert",m.addEventListener("pointerdown",function(w){k="vertResize";m.setPointerCapture(w.pointerId)}),m.addEventListener("pointermove",function(w){"vertResize"==k&&r.setHeight(w.pageY-da(pa)(h).offset().top)}),m.addEventListener("pointerup",function(w){m.releasePointerCapture(w.pointerId);
k=!1}),h.appendChild(m));this.resizeHorz&&((n=document.createElement("div")).className="chickenpaint-resize-handle-horz",n.addEventListener("pointerdown",function(w){k="horzResize";n.setPointerCapture(w.pointerId)}),n.addEventListener("pointermove",function(w){"horzResize"==k&&r.setWidth(w.pageX-da(pa)(h).offset().left)}),n.addEventListener("pointerup",function(w){n.releasePointerCapture(w.pointerId);k=!1}),h.appendChild(n));d.addEventListener("pointerdown",function(w){0==w.button&&(w.stopPropagation(),
w.preventDefault(),"BUTTON"==w.target.nodeName?r.emitEvent("paletteVisChange",[r,!1]):(f={x:parseInt(h.style.left,10)||0,y:parseInt(h.style.top,10)||0},l={x:w.pageX-da(pa)(h).position().left,y:w.pageY-da(pa)(h).position().top},k=a.getSmallScreenMode()?"dragStart":"dragging",w.target.setPointerCapture(w.pointerId)))});d.addEventListener("pointermove",function(w){if(("dragStart"===k||"dragging"===k)&&0!==w.buttons){var z,G,L=w.pageX-l.x;w=w.pageY-l.y;"dragStart"==k&&(z={x:L,y:w},G=f,25<(z.x-G.x)*(z.x-
G.x)+(z.y-G.y)*(z.y-G.y)&&(k="dragging"));"dragging"==k&&r.setLocation(L,w)}});d.addEventListener("pointerup",function(w){if("dragging"===k||"dragStart"===k){"dragStart"===k&&(w.stopPropagation(),w.preventDefault(),setTimeout(function(){r.setLocation(f.x,f.y);r.toggleCollapse()},100));k=!1;try{w.target.releasePointerCapture(w.pointerId)}catch(z){console.error(z)}}})}function mh(a){function c(k){"LI"==this.nodeName&&(k=b[parseInt(this.getAttribute("data-buttonIndex"),10)],a.actionPerformed({action:k.command}))}
ad.call(this,a,"tool","Tools");var d=this,b=[{className:"chickenpaint-tool-rect-selection",command:"CPRectSelection",toolTip:"Marquee",shortcut:"m",mode:ya.M_RECT_SELECTION},{className:"chickenpaint-tool-move",command:"CPMoveTool",toolTip:"Move tool",shortcut:"v",mode:ya.M_MOVE_TOOL},{className:"chickenpaint-tool-flood-fill",command:"CPFloodFill",toolTip:"Flood fill",shortcut:"f",mode:ya.M_FLOODFILL},{className:"chickenpaint-tool-gradient-fill",command:"CPGradientFill",toolTip:"Gradient fill",shortcut:"g",
mode:ya.M_GRADIENTFILL},{className:"chickenpaint-tool-color-picker",command:"CPColorPicker",toolTip:"Color picker",shortcut:"i",mode:ya.M_COLOR_PICKER},{className:"chickenpaint-tool-blur",command:"CPBlur",toolTip:"Blur",shortcut:"u",mode:ya.M_DRAW,tool:ya.T_BLUR},{className:"chickenpaint-tool-pencil",command:"CPPencil",toolTip:"Pencil",shortcut:"n",mode:ya.M_DRAW,tool:ya.T_PENCIL},{className:"chickenpaint-tool-pen",command:"CPPen",toolTip:"Pen",selected:!0,shortcut:"b",mode:ya.M_DRAW,tool:ya.T_PEN},
{className:"chickenpaint-tool-airbrush",command:"CPAirbrush",toolTip:"Airbrush",shortcut:"a",mode:ya.M_DRAW,tool:ya.T_AIRBRUSH},{className:"chickenpaint-tool-water",command:"CPWater",toolTip:"Waterpaint",shortcut:"w",mode:ya.M_DRAW,tool:ya.T_WATER},{className:"chickenpaint-tool-eraser",command:"CPEraser",toolTip:"Eraser",shortcut:"e",mode:ya.M_DRAW,tool:ya.T_ERASER},{className:"chickenpaint-tool-soft-eraser",command:"CPSoftEraser",toolTip:"Soft eraser",shortcut:"s",mode:ya.M_DRAW,tool:ya.T_SOFTERASER},
{className:"chickenpaint-tool-smudge",command:"CPSmudge",toolTip:"Smudge",shortcut:"d",mode:ya.M_DRAW,tool:ya.T_SMUDGE},{className:"chickenpaint-tool-blender",command:"CPBlender",toolTip:"Blender",shortcut:"c",mode:ya.M_DRAW,tool:ya.T_BLENDER},{className:"chickenpaint-tool-dodge",command:"CPDodge",toolTip:"Dodge (tool)",shortcut:"o",mode:ya.M_DRAW,tool:ya.T_DODGE},{className:"chickenpaint-tool-burn",command:"CPBurn",toolTip:"Burn (tool)",shortcut:"p",mode:ya.M_DRAW,tool:ya.T_BURN},{className:"chickenpaint-tool-rotate-canvas",
command:"CPRotateCanvas",commandDoubleClick:"CPResetCanvasRotation",toolTip:"Rotate canvas",mode:ya.M_ROTATE_CANVAS},{className:"chickenpaint-tool-pan-canvas",command:"CPPanCanvas",toolTip:"Grab canvas",mode:ya.M_PAN_CANVAS}],f=document.createElement("ul");a.on("modeChange",function(k){var l=d.getBodyElement();da(pa)("li",l).removeClass("selected");k==ya.M_DRAW?da(pa)("li[data-tool="+a.getCurTool()+"]",l).addClass("selected"):da(pa)("li[data-mode="+k+"]",l).addClass("selected")});a.on("toolChange",
function(k){var l=d.getBodyElement();a.getCurMode()==ya.M_DRAW&&(da(pa)("li",l).removeClass("selected"),da(pa)("li[data-tool="+k+"]",l).addClass("selected"))});(function(){var k=d.getBodyElement(),l;for(l in f.className="chickenpaint-tools list-unstyled",b)!function(h){var e=b[h],g=document.createElement("li"),p=document.createElement("div");g.className="chickenpaint-toolbar-button "+e.className;g.setAttribute("data-buttonIndex",h);g.setAttribute("data-mode",e.mode);void 0!==e.tool&&g.setAttribute("data-tool",
e.tool);g.title=sa(e.toolTip);e.shortcut&&(g.title+=" ("+e.shortcut.toUpperCase()+")",da(Cc)(e.shortcut,function(){return c.call(g),!1}));e.selected&&(g.className+=" selected");p.className="chickenpaint-toolbar-button-icon";g.appendChild(p);f.appendChild(g)}(l);da(pa)(f).on("click","li",c).on("dblclick","li",function(h){h=b[parseInt(this.getAttribute("data-buttonIndex"),10)];h.commandDoubleClick&&a.actionPerformed({action:h.commandDoubleClick})});k.appendChild(f)})()}function nh(a){ad.call(this,a,
"misc","Misc");var c=this,d=[{className:"chickenpaint-tool-zoom-in",command:"CPZoomIn",toolTip:"Zoom in"},{className:"chickenpaint-tool-zoom-out",command:"CPZoomOut",toolTip:"Zoom out"},{className:"chickenpaint-tool-zoom-100",command:"CPZoom100",toolTip:"Zoom 100%"},{className:"chickenpaint-tool-flip-horizontal",command:"CPHFlip",toolTip:"Flip horizontal"},{className:"chickenpaint-tool-undo",command:"CPUndo",toolTip:"Undo"},{className:"chickenpaint-tool-redo",command:"CPRedo",toolTip:"Redo"},{className:"chickenpaint-tool-send",
command:"CPSend",toolTip:"Save Oekaki"}];!function(){var b=c.getBodyElement(),f=document.createElement("ul"),k;for(k in f.className="chickenpaint-misc-tools list-unstyled",d){var l=d[k],h=document.createElement("li"),e=document.createElement("div");"CPSend"!=l.command||a.isActionSupported("CPContinue")||(l.toolTip="Post Oekaki",l.className="chickenpaint-tool-send-and-end");h.className="chickenpaint-toolbar-button "+l.className;h.setAttribute("data-buttonIndex",k);h.setAttribute("title",sa(l.toolTip));
e.className="chickenpaint-toolbar-button-icon";h.appendChild(e);f.appendChild(h)}da(pa)(f).on("mousedown","li",function(g){da(pa)(this).addClass("selected")}).on("mouseup","li",function(g){da(pa)(this).removeClass("selected")}).on("click","li",function(g){g=d[parseInt(this.getAttribute("data-buttonIndex"),10)];a.actionPerformed({action:g.command})});b.appendChild(f)}()}function oh(a){ad.call(this,a,"stroke","Stroke");var c=[{className:"chickenpaint-tool-freehand",command:"CPFreeHand",toolTip:sa("Free-hand"),
selected:!0},{className:"chickenpaint-tool-line",command:"CPLine",toolTip:sa("Straight line")},{className:"chickenpaint-tool-bezier",command:"CPBezier",toolTip:sa("Bezier curve")}],d=this.getBodyElement();!function(){var b=document.createElement("ul"),f;for(f in b.className="chickenpaint-stroke-tools list-unstyled",c){var k=c[f],l=document.createElement("li"),h=document.createElement("div");l.className="chickenpaint-toolbar-button "+k.className;l.setAttribute("data-buttonIndex",f);l.setAttribute("title",
k.toolTip);k.selected&&(l.className+=" selected");h.className="chickenpaint-toolbar-button-icon";l.appendChild(h);b.appendChild(l)}da(pa)(b).on("click","li",function(e){e=c[parseInt(this.getAttribute("data-buttonIndex"),10)];da(pa)("li",b).removeClass("selected");da(pa)(this).addClass("selected");a.actionPerformed({action:e.command})});d.appendChild(b)}();a.on("toolChange",function(b,f){da(pa)(".chickenpaint-tool-freehand",d).toggleClass("selected",f.strokeMode==Ma.STROKE_MODE_FREEHAND);da(pa)(".chickenpaint-tool-line",
d).toggleClass("selected",f.strokeMode==Ma.STROKE_MODE_LINE);da(pa)(".chickenpaint-tool-bezier",d).toggleClass("selected",f.strokeMode==Ma.STROKE_MODE_BEZIER)})}function ph(a){ad.call(this,a,"color","Color (picker)");var c=new Pl(a),d=new Ql(a,c);a=new Dp(a);var b=this.getBodyElement(),f=document.createElement("div");f.className="chickenpaint-colorpicker-top";f.appendChild(c.getElement());f.appendChild(d.getElement());b.appendChild(f);b.appendChild(a.getElement())}function Dp(a){function c(k,l,h){for(;k.length<
h;)k=l+k;return k}function d(){f.style.backgroundColor="#"+c(Number(b).toString(16),"0",6)}var b=0,f=document.createElement("div");this.getElement=function(){return f};a.on("colorChange",function(k){b=k.getRgb();d()});f.className="chickenpaint-colorpicker-show";f.addEventListener("click",function(k){k.preventDefault();k="#"+c(Number(b).toString(16),"0",6);if(null!=(k=window.prompt(sa("Please enter a color in hex format"),k)))try{(k.match(/^#/)||k.match(/^$/))&&(k=k.substring(1));var l=parseInt(k,
16);a.setCurColor(new ac(l))}catch(h){}});d()}function Nf(a,c){function d(){var l=b.width;f.clearRect(0,0,l,b.height);f.beginPath();f.arc(l/2+1,l/2+1,Math.max(l/2,1)-2,0,2*Math.PI);k.state?f.fill():f.stroke()}var b=document.createElement("canvas"),f=b.getContext("2d"),k=this;this.state=a||!1;this.setValue=function(l){this.state!=l&&(this.state=l,this.emitEvent("valueChange",[l]),d())};this.getElement=function(){return b};b.addEventListener("mousedown",function(l){k.setValue(!k.state)});b.title=c||
"";b.className="chickenpaint-checkbox";b.width=20;b.height=20;b.fillStyle="black";b.strokeStyle="black";d()}function xd(a,c,d,b){function f(){var w=g.width||e,z=g.height,G="string"==typeof u.title?sa(u.title):u.title(u.value),L=3*window.devicePixelRatio,N=.75*g.height;if(d)p.save(),p.fillStyle="white",p.fillRect(0,0,w,z),p.fillStyle="black",p.fillText(G,L,N),p.beginPath(),u.value>=m/2?p.rect(w/2,0,(u.value-m/2)*w/m,z):p.rect(u.value*w/m,0,(m/2-u.value)*w/m,z),p.fill(),p.clip(),p.fillStyle="white";
else{var M=(u.value-a)/m;b&&(M=Math.pow(M,.6666666666666666));M*=w;p.save();p.save();p.fillStyle="black";p.beginPath();p.rect(0,0,M,z);p.fill();p.clip();p.fillStyle="white";p.fillText(G,L,N);p.restore();p.fillStyle="white";p.beginPath();p.rect(M,0,w,z);p.fill();p.clip();p.fillStyle="black"}p.fillText(G,L,N);p.restore()}function k(w){var z=da(pa)(g).width(),G=da(pa)(g).offset().left;w=(w.pageX-G)/z;b&&(w=Math.pow(Math.max(w,0),1.5));u.setValue(w*m+a)}function l(w){switch(n){case 1:return k(w);case 2:var z=
u.title();if(!z.includes(sa("Brush size"))&&!z.includes(sa("Opacity")))return k(w);z=(w.pageX-h)/4;if(0!==z){z=u.value+z;var G=Math.floor(z);u.setValue(G);h=w.pageX-4*(z-G)}}}var h,e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:150,g=document.createElement("canvas"),p=g.getContext("2d"),m=c-a,n=0,r=!1,u=this;this.value=void 0;this.title="";d=d||!1;g.addEventListener("pointerup",function(w){if(0===n)return g.releasePointerCapture(w.pointerId),g.removeEventListener("pointermove",l);if(0!==
n)switch(n){case 1:0!==w.button||w.shiftKey||(n=0);break;case 2:(2==w.button||0===w.button&&w.shiftKey)&&(n=0);break;default:return}return g.releasePointerCapture(w.pointerId),g.removeEventListener("pointermove",l)});this.setValue=function(w){w=~~Math.max(a,Math.min(c,w));this.value!=w&&(this.value=w,this.emitEvent("valueChange",[this.value]),r?f():(r=!0,this.resize()))};this.getElement=function(){return g};this.resize=function(){g.width=da(pa)(g).width()||e;g.height=da(pa)(g).height()||20;1<window.devicePixelRatio&&
(g.style.height=g.height+"px",g.width*=window.devicePixelRatio,g.height*=window.devicePixelRatio);p.font=.47*g.height+"pt sans-serif";f()};g.addEventListener("pointerdown",function(w){0===n&&(2===w.button||0===w.button&&w.shiftKey?(n=2,h=w.pageX):(n=1,k(w)),g.setPointerCapture(w.pointerId),g.addEventListener("pointermove",l))});g.addEventListener("contextmenu",function(w){w.preventDefault()});g.setAttribute("touch-action","none");g.className="chickenpaint-slider";"devicePixelRatio"in window||(window.devicePixelRatio=
1)}function xg(a,c,d){function b(){for(var p=h.style,m=Number(k.getRgb()).toString(16);6>m.length;)m="0"+m;p.backgroundColor="#"+m}var f=this,k=new ac(0),l=255,h=document.createElement("div");this.getElement=function(){return h};this.setColor=function(p){k.isEqual(p)||(k.copyFrom(p),b(),this.emitEvent("colorChange",[k]))};this.setAlpha=function(p){p!=l&&(l=p,b(),this.emitEvent("alphaChange",[l]))};this.getColorRgb=function(){return k.getRgb()};this.getAlpha=function(){return l};this.setCurColor=this.setColor;
h.className="chickenpaint-color-pick-swatch";a&&k.copyFrom(a);c&&(l=c);var e=new bootstrap.Popover(h,{html:!0,content:function(){var p,m,n,r,u;return window.addEventListener("mousedown",g),p=document.createElement("div"),m=document.createElement("div"),n=new Pl(f,k),r=new Ql(f,n,k.getHue()),u=new xd(0,255),p.className="chickenpaint-color-pick-panel",m.className="chickenpaint-colorpicker-top",m.appendChild(n.getElement()),m.appendChild(r.getElement()),p.appendChild(m),u.value=l,u.title=function(w){return sa("Opacity: ")+
w},u.on("valueChange",function(w){f.setAlpha(w)}),p.appendChild(u.getElement()),setTimeout(function(){u.resize()},0),p},trigger:"manual",placement:"bottom",container:d||!1}),g=function(p){var m=p.target;m=m.closest(".popover-body")||m.classList.contains("chickenpaint-color-pick-panel")||m.classList.contains("chickenpaint-colorpicker-select")||m.classList.contains("chickenpaint-colorpicker-slider");p.preventDefault();m||e.hide()};h.addEventListener("click",function(p){p.preventDefault();e.toggle()});
h.addEventListener("hidden.bs.popover",function(){window.removeEventListener("mousedown",g)});b()}function Xi(a,c){var d=document.createElement("div");return d.className="chickenpaint-checkbox-slider-group",d.appendChild(a.getElement()),d.appendChild(c.getElement()),d}function Rl(a,c){for(var d in c)if(c.hasOwnProperty(d)){var b=document.createElement("option");b.appendChild(document.createTextNode(sa(c[d])));b.value=d;a.appendChild(b)}}function Ep(a){function c(){k.gradient(k.getBounds(),0,0,k.width,
0,e,!0);h.putImageData(k.imageData,0,0,0,0,150,32);b.fillRect(0,0,d.width,d.height);b.drawImage(l,0,0)}var d=document.createElement("canvas"),b=d.getContext("2d"),f=Ol(b),k=new I(150,32),l=document.createElement("canvas"),h=l.getContext("2d"),e=a.getCurGradient();this.getElement=function(){return d};a.on("gradientChange",function(g){e=g;c()});d.width=l.width=150;d.height=l.height=32;d.className="chickenpaint-gradient-preview";b.fillStyle=f;c()}function Of(a){ad.call(this,a,"brush","Tool options");
var c=new Fp(a),d=new Gp(a),b=new Hp(a),f=this.getBodyElement();f.appendChild(c.getElement());f.appendChild(d.getElement());f.appendChild(b.getElement());a.on("modeChange",function(k){switch(c.getElement().style.display="none",d.getElement().style.display="none",b.getElement().style.display="none",k){case ya.M_GRADIENTFILL:d.getElement().style.display="block";break;case ya.M_TRANSFORM:b.getElement().style.display="block";break;default:c.getElement().style.display="block"}})}function Fp(a){var c=[1,
2,3,4,5,6,7,8,9,10,15,20,25,30,35,40,45,50,60,70,80,90,100,125,150,175,200],d=document.createElement("div"),b=document.createElement("select"),f=new Nf(!1,sa("Control brush opacity with pen pressure")),k=new xd(1,255),l=new Nf(!0,sa("Control brush size with pen pressure")),h=new xd(1,200,!1,!0),e=new Nf(!1,sa("Control brush scattering with pen pressure")),g=new xd(0,1E3,!1,!0),p=new xd(0,100,!1,!0),m=new xd(0,100,!1,!0),n=new xd(0,100,!1,!0),r=new xd(0,100,!1,!0),u=new Of.CPBrushPreview(a);this.getElement=
function(){return d};k.title=function(w){return sa("Opacity")+": "+w};k.on("valueChange",function(w){a.setAlpha(w)});h.title=function(w){return sa("Brush size")+": "+w};h.on("valueChange",function(w){a.setBrushSize(w)});p.title=function(w){return sa("Color")+": "+w+"%"};p.on("valueChange",function(w){a.getBrushInfo().resat=w/100;a.callToolListeners()});m.title=function(w){return sa("Blend")+": "+w+"%"};m.on("valueChange",function(w){a.getBrushInfo().bleed=w/100;a.callToolListeners()});n.title=function(w){return sa("Spacing")+
": "+w+"%"};n.on("valueChange",function(w){a.getBrushInfo().spacing=w/100;a.callToolListeners()});g.title=function(w){return sa("Scattering")+": "+w+"%"};g.on("valueChange",function(w){a.getBrushInfo().scattering=w/100;a.callToolListeners()});r.title=function(w){return sa("Smoothing")+": "+w+"%"};r.on("valueChange",function(w){a.getBrushInfo().smoothing=w/100;a.callToolListeners()});e.on("valueChange",function(w){a.getBrushInfo().pressureScattering=w;a.callToolListeners()});f.on("valueChange",function(w){a.getBrushInfo().pressureAlpha=
w;a.callToolListeners()});l.on("valueChange",function(w){a.getBrushInfo().pressureSize=w;a.callToolListeners()});b.addEventListener("change",function(w){a.getBrushInfo().tip=parseInt(b.value,10);b.blur()});b.className="form-control form-control-sm";b.tabIndex=-1;Rl(b,["Round Pixelated","Round Hard Edge","Round Soft","Square Pixelated","Square Hard Edge"]);d.appendChild(b);d.appendChild(u.getElement());d.appendChild(Xi(l,h));d.appendChild(Xi(f,k));d.appendChild(p.getElement());d.appendChild(m.getElement());
d.appendChild(n.getElement());d.appendChild(Xi(e,g));d.appendChild(r.getElement());f.setValue(a.getBrushInfo().pressureAlpha);k.setValue(a.getAlpha());l.setValue(a.getBrushInfo().pressureSize);h.setValue(a.getBrushSize());e.setValue(a.getBrushInfo().pressureScattering);g.setValue(~~(100*a.getBrushInfo().scattering));b.value=a.getBrushInfo().tip;p.setValue(~~(100*a.getBrushInfo().resat));m.setValue(~~(100*a.getBrushInfo().bleed));n.setValue(~~(100*a.getBrushInfo().spacing));r.setValue(~~(100*a.getBrushInfo().smoothing));
a.on("toolChange",function(w,z){k.setValue(z.alpha);h.setValue(z.size);l.setValue(z.pressureSize);f.setValue(z.pressureAlpha);b.value=z.tip;e.setValue(z.pressureScattering);~~(100*z.resat)!=p.value&&p.setValue(~~(100*z.resat));~~(100*z.bleed)!=m.value&&m.setValue(~~(100*z.bleed));~~(100*z.spacing)!=n.value&&n.setValue(~~(100*z.spacing));~~(100*z.scattering)!=g.value&&g.setValue(~~(100*z.scattering));~~(100*z.smoothing)!=r.value&&r.setValue(~~(100*z.smoothing))});da(Cc)("1,2,3,4,5,6,7,8,9,0",function(w,
z){w=parseInt(z.shortcut,10);0==w&&(w=10);a.setAlpha(Math.round(w/10*255))});da(Cc)("{,[",function(){for(var w=a.getBrushSize(),z=c.length-1;0<=z;z--)if(w>c[z]){a.setBrushSize(c[z]);break}});da(Cc)("},]",function(){for(var w=a.getBrushSize(),z=0;z<c.length;z++)if(w<c[z]){a.setBrushSize(c[z]);break}})}function Gp(a){function c(){var h=[k.getAlpha()<<24|k.getColorRgb(),l.getAlpha()<<24|l.getColorRgb()];a.setCurGradient(h)}var d,b=document.createElement("div");var f=new Ep(a);var k=new xg(new ac(16777215&
a.getCurGradient()[0]),a.getCurGradient()[0]>>>24,b),l=new xg(new ac(16777215&a.getCurGradient()[1]),a.getCurGradient()[1]>>>24,b);this.getElement=function(){return b};b.className="chickenpaint-gradient-panel";b.style.display="none";k.on("colorChange",c);k.on("alphaChange",c);l.on("colorChange",c);l.on("alphaChange",c);(d=document.createElement("p")).textContent=sa("Gradient");b.appendChild(d);b.appendChild(f.getElement());(d=document.createElement("div")).className="chickenpaint-gradient-colors";
(f=document.createElement("div")).className="chickenpaint-gradient-start-color";f.appendChild(k.getElement());d.appendChild(f);(f=document.createElement("div")).className="chickenpaint-gradient-end-color";f.appendChild(l.getElement());d.appendChild(f);b.appendChild(d)}function Hp(a){var c={smooth:sa("Smooth"),sharp:sa("Sharp")},d=document.createElement("div"),b=document.createElement("button"),f=document.createElement("button"),k=document.createElement("select");if(this.getElement=function(){return d},
d.className="chickenpaint-transform-panel",d.style.display="none",b.type="button",f.type="button",b.className="btn btn-primary btn-block",f.className="btn btn-light btn-block",b.textContent=sa("Apply transform"),f.textContent=sa("Cancel"),k.addEventListener("change",function(h){a.setTransformInterpolation(this.value)}),k.className="form-control chickenpaint-transform-interpolation",Rl(k,c),Ei(de(0,0).getContext("2d"))){c=document.createElement("div");var l=document.createElement("label");l.textContent=
sa("Transform style");c.className="form-group";c.appendChild(l);c.appendChild(k);d.appendChild(c)}k=document.createElement("div");k.appendChild(b);k.appendChild(f);k.className="form-group";d.appendChild(k);b.addEventListener("click",function(h){a.actionPerformed({action:"CPTransformAccept"});h.preventDefault()});f.addEventListener("click",function(h){a.actionPerformed({action:"CPTransformReject"});h.preventDefault()})}function Ip(a){a.preventDefault();a.stopPropagation()}function Hd(a){var c=document.createElement("span");
return c.className="fa "+a,c}function Yi(a){var c=document.createElement("span");return c.className="chickenpaint-icon chickenpaint-icon-"+a,c}function Sl(a,c){var d=document.createElement("div"),b=document.createElement("label");return b.tabIndex=-1,a.tabIndex=-1,d.className="form-check",a.className="form-check-input",b.className="form-check-label",b.setAttribute("for",a.id),b.appendChild(a),b.appendChild(document.createTextNode(c)),d.appendChild(a),d.appendChild(b),d}function qh(a){function c(){var M=
k.getActiveLayer();M.getAlpha()!=p.value&&p.setValue(M.getAlpha());(function(){for(var ca=k.getActiveLayer();m.lastChild;)m.removeChild(m.lastChild);for(var W=T.LM_FIRST;W<=T.LM_LAST;W++)if(W!=T.LM_MULTIPLY2&&(W==ca.blendMode||W===T.LM_PASSTHROUGH&&ca instanceof Ib||W<=T.LM_LAST_CHIBIPAINT)){var ka=document.createElement("option");ka.appendChild(document.createTextNode(sa(T.BLEND_MODE_DISPLAY_NAMES[W])));W!==T.LM_MULTIPLY||ca.blendMode===W||ca.useLegacyMultiply?ka.value=W:ka.value=T.LM_MULTIPLY2;
m.appendChild(ka)}})();M.getBlendMode()!=parseInt(m.value,10)&&(m.value=M.getBlendMode());M.getLockAlpha()!=u.checked&&(u.checked=M.getLockAlpha());(function(){var ca={"image-layer":(Ha=k.getActiveLayer())instanceof Wa,"layer-group":Ha instanceof Ib,"clipping-mask":Ha instanceof Wa&&Ha.clip,"no-clipping-mask":Ha instanceof Wa&&!Ha.clip,"no-clipping-mask-or-is-group":!(Ha instanceof Wa)||!Ha.clip,mask:Ha&&null!==Ha.mask,"no-mask":Ha&&null===Ha.mask,"mask-enabled":Ha&&null!==Ha.mask&&Ha.maskVisible,
"mask-disabled":Ha&&null!==Ha.mask&&!Ha.maskVisible};Ha=0;for(var W="mask no-mask clipping-mask no-clipping-mask-or-is-group image-layer layer-group".split(" ");Ha<W.length;Ha++){var ka=W[Ha],ea=N.getElementsByClassName("chickenpaint-action-require-"+ka),ma=!0,Ca=!1,Ja=void 0;try{for(var Ha,V,Na=ea[Symbol.iterator]();!(ma=(V=Na.next()).done);ma=!0)V.value.style.display=ca[ka]?"inline-block":"none"}catch(wa){Ca=!0,Ja=wa}finally{try{ma||null==Na.return||Na.return()}finally{if(Ca)throw Ja;}}}N.querySelectorAll("[data-action]").forEach(function(wa){var wb=
wa.getAttribute("data-action");wa.classList.toggle("disabled",!a.isActionAllowed(wb))})})()}function d(){k=this;g.resize();c()}var b=this;ad.call(this,a,"layers","Layers",{resizeHorz:!0,resizeVert:!0});var f=this,k=a.getArtwork(),l=null,h=this.getBodyElement(),e=this.getElement(),g=new function(){function M(za){var X=da(pa)(".chickenpaint-layer",kb);return X.get(X.length-1-za)}function ca(za){za=da(pa)(za).closest(".chickenpaint-layer");if(!za.length)return-1;var X=da(pa)(".chickenpaint-layer",kb);
return X.length-1-X.index(za)}function W(){if(2===wa.state){var za=e.getBoundingClientRect(),X=!0,va=!0;if(wa.dropTarget=function(Ka,fc){var Bb=da(pa)(".chickenpaint-layer",kb);Ka={layer:l[l.length-1],displayIndex:l.length-1,direction:"over"};for(var kc=0;kc<Bb.length;kc++){var Kc=Bb[Bb.length-1-kc].getBoundingClientRect();if(0===kc&&fc>Kc.bottom){Ka=k.getLayersRoot().layers[0];Ka={layer:Ka,displayIndex:l.indexOf(Ka),direction:"under"};break}if(fc>=Kc.top){Bb=l[kc];var fb=Kc.bottom-Kc.top;Ka={layer:Bb,
displayIndex:kc};Bb instanceof Ib?fc>=Kc.top+.75*fb?Bb.expanded&&0<Bb.layers.length?(Ka.layer=Bb.layers[Bb.layers.length-1],Ka.displayIndex--,Ka.direction="over"):Ka.direction="under":fc>=Kc.top+.25*fb?Bb.expanded&&0<Bb.layers.length?(Ka.layer=Bb.layers[Bb.layers.length-1],Ka.displayIndex--,Ka.direction="over"):Ka.direction="inside":Ka.direction="over":fc>=Kc.top+.5*fb?Ka.direction="under":Ka.direction="over";break}}return Ka.layer.parent==wa.layer.parent&&("over"==Ka.direction||"under"==Ka.direction)&&
(fc=Ka.layer.parent,kc=fc.indexOf(Ka.layer),"over"==Ka.direction&&fc.layers[kc+1]==wa.layer||"under"==Ka.direction&&fc.layers[kc-1]==wa.layer||Ka.layer==wa.layer)?null:wa.layer instanceof Ib&&(Ka.layer==wa.layer&&"inside"==Ka.direction||Ka.layer.hasAncestor(wa.layer))?null:Ka}(wa.dragX,wa.dragY),wa.dropTarget){var ua=M(wa.dropTarget.displayIndex);switch(wa.dropTarget.direction){case "over":case "under":kb.appendChild(wa.dropBetweenMarkerElem);var bb;X=wa.dropTarget.layer.getDepth()-1;if(ua=ua.getBoundingClientRect(),
"under"==wa.dropTarget.direction&&wa.dropTarget.layer instanceof Ib&&wa.dropTarget.layer.expanded){for(bb=wa.dropTarget.displayIndex-1;0<=bb&&l[bb].hasAncestor(wa.dropTarget.layer);bb--);bb=M(bb+1).getBoundingClientRect().bottom}else bb=ua.bottom;X=ua.left-za.left+(0<X?26+16*X:0);wa.dropBetweenMarkerElem.style.left=X+"px";wa.dropBetweenMarkerElem.style.width=ua.right-za.left-X+"px";wa.dropBetweenMarkerElem.style.top=("over"==wa.dropTarget.direction?ua.top-1:bb+1)-za.top+"px";da(pa)(".chickenpaint-layer-drop-target",
kb).removeClass("chickenpaint-layer-drop-target");X=!1;break;case "inside":var xb=da(pa)(".chickenpaint-layer",kb);xb.each(function(Ka){da(pa)(this).toggleClass("chickenpaint-layer-drop-target",xb.length-1-Ka==wa.dropTarget.displayIndex)});va=!1}}va&&da(pa)(".chickenpaint-layer-drop-target",kb).removeClass("chickenpaint-layer-drop-target");X&&da(pa)(wa.dropBetweenMarkerElem).remove();wa.frameElem.style.top=wa.dragY-za.top-parseInt(wa.frameElem.style.height,10)/2+"px"}else da(pa)(wa.dropBetweenMarkerElem).remove(),
da(pa)(wa.frameElem).remove()}function ka(za){var X=za.getImageThumbnail().getAsCanvas(Yb);return X.title=sa("Image"),X.className="chickenpaint-layer-thumbnail chickenpaint-layer-image-thumbnail",X.style.maxWidth=X.width/X.height*25+"px",za!=k.getActiveLayer()||k.isEditingMask()||(X.className+=" active"),X}function ea(za){var X,va=za.getMaskThumbnail().getAsCanvas(Yb);return va.title=sa("Layer mask"),va.className="chickenpaint-layer-thumbnail chickenpaint-layer-mask-thumbnail",va.style.maxWidth=va.width/
va.height*25+"px",za==k.getActiveLayer()&&k.isEditingMask()&&(va.className+=" active"),za.maskVisible||(va.className+=" disabled",(X=va.getContext("2d")).strokeStyle="red",X.lineWidth=3,X.moveTo(5,5),X.lineTo(va.width-5,va.height-5),X.moveTo(va.width-5,5),X.lineTo(5,va.height-5),X.stroke()),va}function ma(za,X){var va=document.createElement("div"),ua=document.createElement("div"),bb=document.createElement("div"),xb=document.createElement("div"),Ka=document.createElement("div"),fc=document.createElement("div"),
Bb=document.createElement("div");if(va.className="chickenpaint-layer list-group-item",X==k.getActiveLayer()&&(va.className+=" active"),ua.className="chickenpaint-layer-eye",X.ancestorsAreVisible()||(ua.className+=" chickenpaint-layer-eye-hidden-ancestors"),ua.style.marginRight=2+16*(X.getDepth()-1)+"px",X.visible?(va.className+=" chickenpaint-layer-visible",ua.appendChild(Hd("icon-eye"))):(va.className+=" chickenpaint-layer-hidden",ua.appendChild(Hd("icon-eye-slash"))),va.appendChild(ua),bb.className=
"chickenpaint-layer-description",X instanceof Wa){if(X.clip&&(va.className+=" chickenpaint-layer-clipped",xb.appendChild(Hd("icon-level-down-alt fa-flip-horizontal"))),X.lockAlpha)ua=Yi("lock-alpha"),ua.title=sa("Transparency locked"),fc.appendChild(ua)}else X instanceof Ib&&(va.className+=" chickenpaint-layer-group",X.expanded?(va.className+=" chickenpaint-layer-group-expanded",xb.appendChild(Hd("icon-folder-open chickenpaint-layer-group-toggle"))):(va.className+=" chickenpaint-layer-group-collapsed",
xb.appendChild(Hd("icon-folder chickenpaint-layer-group-toggle"))));xb.childNodes.length&&(xb.className="chickenpaint-layer-icons",va.appendChild(xb));try{X instanceof Wa&&va.appendChild(ka(X)),X.mask&&va.appendChild(ea(X))}catch(kc){console.log("Failed to create layer thumb")}xb=X.name&&0<X.name.length?X.name:"(unnamed "+(X instanceof Ib?"group":"layer")+")";return Ka.innerText=xb,Ka.setAttribute("title",xb),Ka.className="chickenpaint-layer-name",Bb.innerText=sa(T.BLEND_MODE_DISPLAY_NAMES[X.blendMode])+
": "+X.alpha+"%",Bb.className="chickenpaint-layer-blend",bb.appendChild(Ka),bb.appendChild(Bb),va.appendChild(bb),fc.className="chickenpaint-layer-status",va.appendChild(fc),va.setAttribute("data-display-index",""+za),va}function Ca(za){if(-1<za){var X=l[za];za=M(za);X&&za&&n.show(X,za)}}function Ja(za){2===wa.state?(da(pa)(wa.layerElem).removeClass("chickenpaint-layer-dragging"),wa.dropTarget&&("inside"==wa.dropTarget.direction?a.actionPerformed({action:"CPRelocateLayer",layer:wa.layer,toGroup:wa.dropTarget.layer,
toIndex:wa.dropTarget.layer.layers.length}):a.actionPerformed({action:"CPRelocateLayer",layer:wa.layer,toGroup:wa.dropTarget.layer.parent,toIndex:wa.dropTarget.layer.parent.indexOf(wa.dropTarget.layer)+("over"==wa.dropTarget.direction?1:0)})),wa.dropTarget=null,wa.state=0,W()):wa.state=0;Va&&(clearTimeout(Va),Va=null);kb.releasePointerCapture(za.pointerId);kb.removeEventListener("pointermove",V);kb.removeEventListener("pointerup",Ja)}function Ha(){wa.state=2;wa.frameElem=document.createElement("div");
wa.frameElem.className="chickenpaint-layer-drag-frame";wa.frameElem.style.width=da(pa)(wa.layerElem).outerWidth(!1)+"px";wa.frameElem.style.height=da(pa)(wa.layerElem).outerHeight(!1)+"px";wa.dropBetweenMarkerElem=document.createElement("div");wa.dropBetweenMarkerElem.className="chickenpaint-layer-drop-between-mark";wa.layerElem.className+=" chickenpaint-layer-dragging";kb.appendChild(wa.frameElem)}function V(za){za=za.clientY;switch(wa.state){case 3:if(5<Math.abs(za-wa.dragY))wa.state=4;else break;
case 4:kb.scrollTop=wa.initialScrollTop+wa.dragY-za;break;case 1:if(5<Math.abs(za-wa.dragY))Ha();else break;case 2:wa.dragY=za,W()}}function Na(za,X,va){try{va?da(pa)(".chickenpaint-layer-mask-thumbnail",za).replaceWith(ea(X)):da(pa)(".chickenpaint-layer-image-thumbnail",za).replaceWith(ka(X))}catch(ua){}}var wa={state:0,layer:null,layerElem:null,dragX:0,dragY:0,initialScrollTop:0,dropTarget:null,dropBetweenMarkerElem:null,frameElem:null},wb=document.createElement("div"),kb=document.createElement("div"),
Yb=0,Pb=!1,Va=null;this.buildLayers=function(){var za=(l=k.getLayersRoot().getLinearizedLayerList(!0)).map(function(ua,bb){return ma(bb,ua)}),X=document.createDocumentFragment();da(pa)(kb).empty();for(var va=za.length-1;0<=va;va--)X.appendChild(za[va]);kb.appendChild(X);W()};this.layerChanged=function(za){var X=l.indexOf(za),va=da(pa)(M(X));0===va.length||za instanceof Ib&&(za.expanded!=da(pa)(va).hasClass("chickenpaint-layer-group-expanded")||za.visible!=da(pa)(va).hasClass("chickenpaint-layer-visible"))?
this.buildLayers():va.replaceWith(ma(X,za))};this.setRotation90=function(za){if(Yb!=za)for(Yb=za,za=0;za<l.length;za++){var X=l[za],va=da(pa)(M(za));0<va.length&&(Na(va,X,!1),X.mask&&Na(va,X,!0))}};this.layerImageThumbChanged=function(za){var X=l.indexOf(za);X=da(pa)(M(X));0<X.length&&Na(X,za,!1)};this.layerMaskThumbChanged=function(za){var X=l.indexOf(za);X=da(pa)(M(X));0<X.length&&(za.mask?Na(X,za,!0):da(pa)(".chickenpaint-layer-mask-thumbnail",X).remove())};this.activeLayerChanged=function(za,
X){da(pa)(".active",kb).removeClass("active");za=da(pa)(M(l.indexOf(za)));za.addClass("active");da(pa)(".chickenpaint-layer-image-thumbnail",za).toggleClass("active",!X);da(pa)(".chickenpaint-layer-mask-thumbnail",za).toggleClass("active",X)};this.resize=function(){f.dismissNotification();this.buildLayers()};this.getElement=function(){return wb};this.revealLayer=function(za){za=M(za);var X=za.getBoundingClientRect(),va=kb.getBoundingClientRect();return kb.scrollTop=Math.max(Math.min(Math.max(kb.scrollTop,
kb.scrollTop+X.bottom-va.bottom),kb.scrollTop+X.top-va.top),0),za};e.id="chickenpaint-layer-pop";wb.className="chickenpaint-layers-widget";wb.addEventListener("contextmenu",function(za){return za.preventDefault()},!0);kb.className="list-group";kb.addEventListener("dblclick",function(za){0===za.button&&0<da(pa)(za.target).closest(".chickenpaint-layer-description").length&&0===da(pa)(za.target).closest("input").length&&(Ca(ca(za.target)),za.preventDefault())});kb.addEventListener("pointerdown",function(za){var X=
ca(da(pa)(za.target).closest(".chickenpaint-layer")[0]);if(-1!=X){var va=l[X];if(0==za.button&&da(pa)(za.target).closest(".chickenpaint-layer-eye").length)a.actionPerformed({action:"CPSetLayerVisibility",layer:va,visible:!va.visible});else if(0==za.button&&va instanceof Ib&&da(pa)(za.target).closest(".chickenpaint-layer-group-toggle").length)a.actionPerformed({action:"CPExpandLayerGroup",group:va,expand:!va.expanded});else{var ua,bb,xb=k.getActiveLayer()!=va;(Pb=0<da(pa)(za.target).closest(".chickenpaint-layer-mask-thumbnail").length||
va instanceof Ib&&null!==va.mask&&xb,0==za.button&&za.shiftKey&&!za.ctrlKey&&!za.metaKey&&Pb)?a.actionPerformed({action:"CPSetMaskVisible",layer:va,visible:!va.maskVisible}):(ua=0==za.button||xb?Pb:k.isEditingMask(),bb=k.isEditingMask()!=ua,(xb||bb)&&a.actionPerformed({action:"CPSetActiveLayer",layer:va,mask:ua}),ua&&za.altKey)?a.actionPerformed({action:"CPToggleMaskView"}):ua&&!za.shiftKey&&(za.ctrlKey||za.metaKey)?a.actionPerformed({action:"CPApplyLayerMask"}):ua&&za.shiftKey&&(za.ctrlKey||za.metaKey)?
a.actionPerformed({action:"CPRemoveLayerMask"}):0==za.button?("pen"===za.pointerType||"touch"===za.pointerType?(wa.state=3,wa.initialScrollTop=kb.scrollTop,Va&&clearTimeout(Va),Va=setTimeout(function(){3===wa.state&&(Ha(),wa.dragY=za.clientY,W())},800)):wa.state=1,wa.dropTarget=null,wa.layer=va,wa.layerElem=M(X),wa.dragX=za.clientX,wa.dragY=za.clientY,kb.setPointerCapture(za.pointerId),kb.addEventListener("pointermove",V),kb.addEventListener("pointerup",Ja)):2!=za.button||xb||(za.preventDefault(),
-1!=ca(za.target)&&(Ca(ca(za.target)),za.preventDefault()))}}});kb.setAttribute("touch-action","none");for(var Mc=0,jc=["ontouchstart","ontouchmove","ontouchend","ontouchcancel"];Mc<jc.length;Mc++)kb.addEventListener(jc[Mc],Ip);wb.appendChild(kb)},p=new xd(0,100,!1,!1,208),m=document.createElement("select"),n=new function(){var M=null,ca="",W=document.createElement("input"),ka=this;this.hide=function(){M=null;var ea=da(pa)(W).parent();ea&&(da(pa)(W).remove(),ea.text(ca))};this.renameAndHide=function(){M&&
M.name!=W.value&&a.actionPerformed({action:"CPSetLayerName",layer:M,name:W.value});this.hide()};this.show=function(ea,ma){ca=(M=ea).name;W.value=ca;(ea=ma.querySelector(".chickenpaint-layer-name"))&&ea.parentNode&&(ma=ea.firstChild)&&ma.nodeType===Node.TEXT_NODE&&(ea.removeChild(ma),ea.appendChild(W));W.select()};W.type="text";W.className="chickenpaint-layer-rename form-control input-sm";W.addEventListener("keydown",function(ea){ea.stopPropagation()});W.addEventListener("keydown",function(ea){"Enter"===
ea.key&&ka.renameAndHide();ea.stopPropagation()});W.addEventListener("keyup",function(ea){"Escape"===ea.key&&ka.hide();ea.stopPropagation()});W.addEventListener("blur",function(ea){M&&ka.renameAndHide()})},r=document.createElement("input"),u=document.createElement("input"),w=!1,z=this.setSize,G=this.setWidth,L=this.setHeight;this.setSize=function(M,ca){z.call(this,M,ca);this.dismissNotification();p.resize()};this.setWidth=function(M){G.call(this,M);p.resize();g.resize()};this.setHeight=function(M){L.call(this,
M);g.resize()};this.setRotation90=function(M){g.setRotation90(M)};this.dismissNotification=function(){da(pa)(".chickenpaint-layer[aria-describedby],.chickenpaint-slider[aria-describedby]",h).each(function(M,ca){ca=da(pa)(ca);(M=bootstrap.Popover.getInstance(ca[0]))&&M.dispose()});w&&(clearTimeout(w),w=!1)};this.showNotification=function(M,ca,W){var ka=l.indexOf(M);M=k.getActiveLayer()==M&&"opacity"==W?p.getElement():g.revealLayer(ka);b.dismissNotification();(new bootstrap.Popover(M,{html:!1,content:ca,
placement:"left",trigger:"manual",fallbackPlacement:[],boundary:"window",container:f.getElement()})).show();w=setTimeout(function(){w=!1;b.dismissNotification()},Math.max(Math.round(70*ca.length),3E3))};m.className="form-control form-control-sm";m.tabIndex=-1;m.title=sa("Layer blending mode");m.addEventListener("change",function(M){a.actionPerformed({action:"CPSetLayerBlendMode",blendMode:parseInt(m.value,10)});m.blur()});h.appendChild(m);p.title=function(M){return sa("Opacity")+": "+M+"%"};p.on("valueChange",
function(M){a.actionPerformed({action:"CPSetLayerAlpha",alpha:M})});h.appendChild(p.getElement());r.id="chickenpaint-chk-sample-all-layers";r.type="checkbox";r.addEventListener("click",function(M){k.setSampleAllLayers(r.checked);document.activeElement.blur()});h.appendChild(Sl(r,sa("Sample all layers")));u.id="chickenpaint-chk-lock-alpha";u.type="checkbox";u.addEventListener("click",function(M){a.actionPerformed({action:"CPSetLayerLockAlpha",lock:u.checked});document.activeElement.blur()});h.appendChild(Sl(u,
sa("Lock transparency")));h.appendChild(g.getElement());var N=function(){var M=[{title:"Add layer",icon:Hd("icon-file"),action:"CPAddLayer"},{title:"Add group",icon:Hd("icon-folder"),action:"CPAddGroup"},{title:"Merge down",icon:Hd("icon-download_FILL"),action:"CPLayerMergeDown",require:["image-layer"]},{title:"Merge group",icon:Hd("icon-collapse_all_FILL"),action:"CPGroupMerge",require:["layer-group"]},{title:"Clip to the layer below",icon:Hd("icon-level-down-alt fa-flip-horizontal"),action:"CPCreateClippingMask",
require:"no-clipping-mask-or-is-group"},{title:"Unclip from the layer below",icon:Hd("icon-level-down-alt fa-flip-horizontal"),action:"CPReleaseClippingMask",require:"clipping-mask"},{title:"Add layer mask",icon:Yi("mask"),action:"CPAddLayerMask",require:["no-mask"]},{title:"Apply mask",icon:Yi("mask"),action:"CPApplyLayerMask",require:["mask"]},{title:"Duplicate",icon:Hd("icon-clone"),action:"CPLayerDuplicate"},{title:"Delete layer",icon:Hd("icon-trash"),action:"CPRemoveLayer"}],ca=document.createElement("ul");
ca.className="chickenpaint-layer-buttons list-unstyled";var W=!0,ka=!1,ea=void 0;try{for(var ma,Ca=M[Symbol.iterator]();!(W=(ma=Ca.next()).done);W=!0)!function(){var Ja=ma.value,Ha=document.createElement("li");Ha.setAttribute("data-action",Ja.action);Ha.className="chickenpaint-small-toolbar-button "+(Ja.require?"chickenpaint-action-require-"+Ja.require:"");Ha.title=sa(Ja.title);Ha.appendChild(Ja.icon);Ha.addEventListener("click",function(){a.actionPerformed({action:Ja.action})});ca.appendChild(Ha)}()}catch(Ja){ka=
!0,ea=Ja}finally{try{W||null==Ca.return||Ca.return()}finally{if(ka)throw ea;}}return ca}();h.appendChild(N);k.on("changeActiveLayer",function(M,ca,W){g.activeLayerChanged(ca,W);c()});k.on("changeLayer",function(M){k=this;f.dismissNotification();g.layerChanged(M);c()});k.on("changeStructure",d);k.on("changeLayerMaskThumb",function(M){k=this;g.layerMaskThumbChanged(M)});k.on("changeLayerImageThumb",function(M){k=this;g.layerImageThumbChanged(M)});a.on("layerNotification",this.showNotification.bind(this));
d.call(k)}function Jp(){this.table=new Uint8Array(256);this.loadIdentity=function(){for(var a=0;256>a;a++)this.table[a]=a};this.loadBrightnessContrast=function(a,c){c=0<c?1/(1.0001-c):1+c;a=.5-.5*c+a;for(var d=0;256>d;d++)this.table[d]=Math.min(255,Math.max(~~(255*(d/255*c+a)),0))};this.invert=function(){for(var a=0;256>a;a++)this.table[a]=255-this.table[a]}}function Tl(a,c){var d=document.createElement("div"),b=document.createElement("label");return d.className="form-check",a.className="form-check-input",
b.className="form-check-label",b.setAttribute("for",a.id),b.appendChild(a),b.appendChild(document.createTextNode(c)),d.appendChild(a),d.appendChild(b),d}function rh(a){function c(W){for(var ka=0;ka<W.length;ka++){var ea=new h(W[ka],32,32);ea.on("click",function(){p=this.texture;l()});z.appendChild(ea.getElement())}}function d(W){for(var ka=new ob(W,W,8),ea=1;ea<W*W;ea++)ka.data[ea]=255;return ka}function b(W){for(var ka=2*W,ea=new ob(ka,ka,8),ma=0;ma<ka;ma++)for(var Ca=0;Ca<ka;Ca++)ea.data[ma+Ca*
ka]=0==(~~(ma/W)+~~(Ca/W))%2?0:255;return ea}function f(W,ka){for(var ea=new ob(ka,ka,8),ma=0;ma<ka*ka;ma++)~~(ma%ka)>=W&&(ea.data[ma]=255);return ea}function k(W,ka){for(var ea=new ob(ka,ka,8),ma=0;ma<ka*ka;ma++)ma/ka>=W&&(ea.data[ma]=255);return ea}function l(){if(null!=p){m=p.clone();n&&m.mirrorHorizontally();var W=new Jp;W.loadBrightnessContrast(u,w);r&&W.invert();m.applyLUT(W)}else m=null;a.getArtwork().setBrushTexture(m);null!=L&&L.updateTexture()}function h(W,ka,ea){var ma=document.createElement("canvas"),
Ca=ma.getContext("2d"),Ja=this;this.setTexture=function(Ha){this.texture=Ha;this.paint()};this.getElement=function(){return ma};this.paint=function(){null!=this.texture?Ca.fillStyle=Ca.createPattern(this.texture.getAsCanvas(),"repeat"):Ca.fillStyle="white";Ca.fillRect(0,0,ma.width,ma.height)};ma.addEventListener("click",function(){Ja.emit("click")});ma.width=ka;ma.height=ea;this.setTexture(W)}ad.call(this,a,"textures","Textures");var e,g,p,m,n=!1,r=!1,u=0,w=0,z=document.createElement("div"),G=this.getBodyElement();
h.prototype=Object.create(da(Pc).prototype);h.prototype.constructor=h;var L=new function(){function W(){ma.checked=r;Ca.checked=n;Ja.setValue(100*u+100);Ha.setValue(100*w+100)}var ka,ea=document.createElement("div"),ma=document.createElement("input"),Ca=document.createElement("input"),Ja=new xd(0,200,!0),Ha=new xd(0,200,!0),V=new h(null,64,64),Na=document.createElement("button"),wa=new bootstrap.Popover(Na,{html:!0,content:function(){return Yb},trigger:"manual",placement:"right",container:G});this.updateTexture=
function(){Na.disabled=null==m;V.setTexture(m)};this.getElement=function(){return ea};ea.className="chickenpaint-texture-options";ea.appendChild(V.getElement());Na.type="button";Na.className="btn btn-light btn-sm";Na.setAttribute("data-bs-toggle","popover");Na.setAttribute("data-bs-placement","right");Na.textContent=sa("Customize");(ka=document.createElement("div")).className="chickenpaint-texture-controls";ma.id="chickenpaint-chk-texture-invert";ma.type="checkbox";ma.addEventListener("click",function(Pb){r=
this.checked;l()});ka.appendChild(Tl(ma,sa("Inverse")));Ca.id="chickenpaint-chk-texture-mirror";Ca.type="checkbox";Ca.addEventListener("click",function(Pb){n=this.checked;l()});ka.appendChild(Tl(Ca,sa("Mirror")));Ja.title=function(Pb){return sa("Brightness")+": "+(Pb-100)+"%"};Ja.on("valueChange",function(Pb){u=(Pb-100)/100;l()});ka.appendChild(Ja.getElement());Ha.title=function(Pb){return sa("Contrast")+": "+(Pb-100)+"%"};Ha.on("valueChange",function(Pb){w=(Pb-100)/100;l()});ka.appendChild(Ha.getElement());
var wb=document.createElement("button");var kb=document.createElement("button");wb.textContent="Ok";wb.className="btn btn-primary btn-sm";wb.type="button";wb.addEventListener("click",function(Pb){wa.hide()});ka.appendChild(wb);ka.appendChild(document.createTextNode(" "));kb.textContent="Reset";kb.className="btn btn-secondary btn-sm";kb.type="button";kb.addEventListener("click",function(Pb){w=u=0;r=n=!1;W();l()});ka.appendChild(kb);W();var Yb=ka;Na.addEventListener("click",function(){wa.toggle()});
ea.appendChild(Na);this.updateTexture()};G.appendChild(L.getElement());z.className="chickenpaint-texture-swatches";G.appendChild(z);c((e=[null],(g=new ob(2,2,8)).data[0]=255,g.data[3]=255,e.push(g),e.push(d(2)),e.push(d(3)),e.push(d(4)),e.push(d(6)),e.push(d(8)),e.push(f(1,2)),e.push(f(2,4)),e.push(k(1,2)),e.push(k(2,4)),e.push(b(2)),e.push(b(4)),e.push(b(8)),e.push(b(16)),e));e=a.getResourcesRoot()+"gfx/textures32.png";var N=function(W){c(W)};var M=new Image;var ca=[];M.onload=function(){var W=document.createElement("canvas"),
ka=W.getContext("2d",{willReadFrequently:!0});W.width=M.width;W.height=M.height;for(W=0;2>W;W++){ka.drawImage(M,0,32*W,32,32,0,0,32,32);try{for(var ea=ka.getImageData(0,0,32,32),ma=new ob(32,32,8),Ca=0;1024>Ca;Ca++)ma.data[Ca]=ea.data[4*Ca];ca.push(ma)}catch(Ja){console.log(Ja)}}N(ca)};M.src=e}function sh(a){function c(G){var L=document.createElement("div"),N=document.createElement("a"),M=document.createElement("ul"),ca=document.createElement("a"),W=document.createElement("a"),ka=this;this.getElement=
function(){return L};this.setColor=function(ma){N.setAttribute("data-color",ma);var Ca=N.style;for(ma=""+Number(ma).toString(16);6>ma.length;)ma="0"+ma;Ca.backgroundColor="#"+ma};this.setColor(G);N.href="#";N.className="chickenpaint-color-swatch dropdown-toggle";ca.className="dropdown-item";ca.href="#";ca.textContent=sa("Remove");ca.addEventListener("click",function(ma){ma.preventDefault();da(pa)(L).remove();l=!0});W.className="dropdown-item";W.href="#";W.textContent=sa("Replace with current color");
W.addEventListener("click",function(ma){ma.preventDefault();ka.setColor(a.getCurColor().getRgb());l=!0});M.className="dropdown-menu";G=document.createElement("li");var ea=document.createElement("li");G.appendChild(ca);ea.appendChild(W);M.appendChild(G);M.appendChild(ea);L.className="chickenpaint-color-swatch-wrapper";L.appendChild(N);L.appendChild(M)}function d(G){G=new c(G);h.appendChild(G.getElement())}function b(G){var L=document.createElement("span");return L.className="fa icon-"+G,L}ad.call(this,
a,"swatches","Color swatches");var f,k=[16777215,0,16711680,65280,255,16776960],l=!1,h=document.createElement("ul"),e=document.createElement("div"),g=this;this.getSwatches=function(){for(var G=da(pa)(".chickenpaint-color-swatch",h),L=Array(G.length),N=0;N<G.length;N++)L[N]=parseInt(G.get(N).getAttribute("data-color"),10);return L};this.setSwatches=function(G){for(;h.lastChild;)h.removeChild(h.lastChild);!0;for(var L=0;L<G.length;L++)d(G[L]);l=!0};this.isModified=function(){return l};(function(){h.className=
"chickenpaint-color-swatches list-unstyled";for(var G=0;G<k.length;G++)h.appendChild((new c(k[G])).getElement());h.addEventListener("click",function(L){var N=L.target;/^<a data-color=/i.test(N.outerHTML)&&/chickenpaint-color-swatch/.test(N.className)&&0==L.button&&void 0!==N.getAttribute("data-color")&&(a.setCurColor(new ac(parseInt(N.getAttribute("data-color"),10))),L.stopPropagation(),L.preventDefault())});h.addEventListener("contextmenu",function(L){var N=L.target;if(/^<a data-color=/i.test(N.outerHTML)&&
/chickenpaint-color-swatch/.test(N.className)){L.preventDefault();var M=new bootstrap.Dropdown(da(pa)(N));M.toggle();document.addEventListener("click",function ka(W){M.hide();document.removeEventListener("click",ka)})}})})();this.getBodyElement().appendChild(h);var p=document.createElement("button");var m=document.createElement("button");var n=document.createElement("ul");var r=document.createElement("a");var u=document.createElement("a");m.type="button";m.title=sa("Add the current brush color as a new swatch");
m.className="btn chickenpaint-small-toolbar-button chickenpaint-color-swatch-add";m.appendChild(b("plus"));p.type="button";p.className="btn dropdown-toggle chickenpaint-small-toolbar-button chickenpaint-color-swatch-settings";p.setAttribute("data-bs-toggle","dropdown");p.appendChild(b("cog"));r.className="dropdown-item";r.href="#";r.textContent=sa("Save swatches to your computer...");r.addEventListener("click",function(G){G.preventDefault();G=new Blob([(new Mf).write(g.getSwatches())],{type:"application/octet-stream"});
da(vg).saveAs(G,"oekakiswatches.aco")});u.className="dropdown-item";u.href="#";u.textContent=sa("Load swatches from your computer...");u.addEventListener("click",function(G){G.preventDefault();f.onchange=function(){var L=this.files;if(!(1>L.length)){L=L[0];var N=new FileReader;N.onload=function(){var M=(new Mf).read(this.result);null!=M&&0<M.length?g.setSwatches(M):alert(sa("The swatches could not be read, did you select an .aco file?"))};N.readAsArrayBuffer(L)}};f.click()});n.className="dropdown-menu";
var w=document.createElement("li");var z=document.createElement("li");w.appendChild(r);z.appendChild(u);n.appendChild(w);n.appendChild(z);(r=document.createElement("div")).className="btn-group";r.appendChild(p);r.appendChild(n);m.addEventListener("click",function(G){d(a.getCurColor().getRgb());l=!0});e.className="chickenpaint-color-swatches-buttons";window.File&&window.FileReader&&window.FileList&&window.Blob&&((f=document.createElement("input")).type="file",f.multiple=!1,f.style.display="none",e.appendChild(r),
e.appendChild(f));e.appendChild(m);this.getBodyElement().appendChild(e)}function th(a){function c(){var u=da(pa)(l).parents(".chickenpaint").find(".chickenpaint-canvas");return{width:u.width(),height:u.height()}}function d(u,w){var z=u.getElement();w?l.contains(z)||l.appendChild(z):l.contains(z)&&l.removeChild(z);h.emitEvent("paletteVisChange",[u.name,w])}var b={tool:new mh(a),misc:new nh(a),stroke:new oh(a),color:new ph(a),brush:new Of(a),layers:new qh(a),textures:new rh(a),swatches:new sh(a)},f=
{tool:!1,color:!1,misc:!1},k={color:!0,textures:!0,layers:!0},l=document.createElement("div"),h=this,e=[],g=[],p;for(p in this.palettes=b,this.showPaletteByName=function(u,w){(u=b[u])&&d(u,w)},this.togglePalettes=function(){if(0==g.length)da(pa)("> .chickenpaint-palette",l).each(function(){h.showPaletteByName(this.getAttribute("data-paletteName"),!1);g.push(this)});else{for(var u=0;u<g.length;u++)h.showPaletteByName(g[u].getAttribute("data-paletteName"),!0);g=[]}},this.constrainPalettes=function(){var u=
c();for(z in b){var w=b[z];w.getX()+w.getWidth()/2>u.width&&w.setLocation(u.width-w.getWidth(),w.getY());w.getY()+w.getHeight()/2>u.height&&w.setLocation(w.getX(),u.height-w.getHeight())}var z=0<u.width-b.tool.getWidth()-b.misc.getWidth()-b.stroke.getWidth()-b.color.getWidth()-b.brush.getWidth()-15;b.swatches.getX()+b.swatches.getWidth()==b.brush.getX()+b.brush.getWidth()&&20>Math.abs(b.swatches.getY()-b.brush.getY())&&b.swatches.setLocation(b.brush.getX()-b.swatches.getWidth()-(z?5:1),0);b.layers.getY()+
b.layers.getHeight()>u.height&&b.layers.setHeight(Math.max(u.height-b.layers.getY(),200))},this.arrangePalettes=function(){var u=c();if(a.getSmallScreenMode()){b.tool.setLocation(0,0);b.misc.setLocation(b.tool.getX()+b.tool.getWidth()+1,0);var w=16>=u.width-(b.tool.getWidth()+b.misc.getWidth()+b.brush.getWidth())?b.misc.getY()+b.misc.getHeight()+1:0;b.brush.setLocation(u.width-b.brush.getWidth()-15,w);b.textures.setWidth(u.width-b.textures.getX());b.layers.setLocation(b.brush.getX()+b.brush.getWidth()-
b.layers.getWidth(),b.textures.getY()-b.layers.getHeight());w=Math.max(b.textures.getY()-330-1,370);b.layers.setHeight(w);b.layers.setWidth(218);b.stroke.setLocation(b.misc.getX(),b.misc.getY()+b.misc.getHeight()+1);b.swatches.setLocation(b.stroke.getX(),b.stroke.getY()+b.stroke.getHeight()+1)}else{w=0<u.width-b.tool.getWidth()-b.misc.getWidth()-b.stroke.getWidth()-b.color.getWidth()-b.brush.getWidth()-15;b.brush.setLocation(u.width-b.brush.getWidth()-15,0);var z=b.brush.getY()+b.brush.getHeight();
z=300<u.height-z?z+2:z;b.layers.setSize(b.brush.getWidth()+(w?30:0),u.height-z);b.layers.setLocation(b.brush.getX()+b.brush.getWidth()-b.layers.getWidth(),z);b.tool.setLocation(0,0);b.misc.setLocation(b.tool.getX()+b.tool.getWidth()+(w?5:1),0);w?b.stroke.setLocation(b.misc.getX()+b.misc.getWidth()+(w?5:1),0):b.stroke.setLocation(b.misc.getX(),b.misc.getY()+b.misc.getHeight()+1);b.swatches.setLocation(Math.max(b.brush.getX()-b.swatches.getWidth()-(w?5:1),b.tool.getX()+b.tool.getWidth()),0);b.textures.setWidth(Math.min(b.layers.getX()-
b.textures.getX(),490))}b.textures.setLocation(b.color.getX()+b.color.getWidth()+4,u.height-b.textures.getHeight());b.color.setLocation(0,Math.max(b.tool.getY()+b.tool.getHeight(),u.height-b.color.getHeight()))},a.on("smallScreen",function(u){if(u)for(var w in b)b[w].toggleCollapse(u&&(!(w in f)||f[w]))}),this.getElement=function(){return l},l.className="chickenpaint-palettes",b){var m=b[p],n=m.getElement();m.on("paletteVisChange",function(){d(this,!1)});p in k&&m.setCollapseDownwards(!0);n.setAttribute("data-paletteName",
p);e.push(n)}for(var r in b)k=b[r].getElement(),l.appendChild(k)}function Kp(a,c){function d(h){var e,g=h.data("action"),p=h.data("checkbox");a.isActionAllowed(g)&&(p?(h.toggleClass("selected"),e=h.hasClass("selected")):e=!1,a.actionPerformed({action:g,checkbox:p,selected:e}))}var b=da(pa)('<nav class="navbar navbar-expand-md bg-light"><div class="navbar-upper"><a class="navbar-brand" href="#">ChickenPaint Be</a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#chickenpaint-main-menu-content" aria-controls="chickenpaint-main-menu-content" aria-expanded="false" aria-label="Toggle main menu"><span class="navbar-toggler-icon"></span></button></div><div class="collapse navbar-collapse" id="chickenpaint-main-menu-content"><div class="navbar-nav"></div></div><div class="widget-nav" id="chickenpaint-palette-toggler-content"></div></nav>'),
f=navigator.userAgent.toLowerCase().includes("mac os");this.getElement=function(){return b[0]};(function(h,e){h.append(e.map(function(g){var p=da(pa)('<div class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+sa(g.name)+'</a><ul class="dropdown-menu"></ul></div>'),m=da(pa)(".dropdown-toggle",p),n=da(pa)(".dropdown-menu",p);return m[0].addEventListener("show.bs.dropdown",function(r){!function(u){da(pa)("[data-action]",
u).each(function(){var L=da(pa)(this),N=this.getAttribute("data-action");N=a.isActionAllowed(N);L.toggleClass("disabled",!N).toggleClass("hidden",!N&&!0===L.data("hideIfNotAvailable"))});da(pa)(".dropdown-divider",u).removeClass("hidden");u=da(pa)(".dropdown-item:not(.hidden),.dropdown-divider:not(.hidden)",u);for(var w=null,z=0;z<u.length;z++){var G=da(pa)(u[z]);G.hasClass("dropdown-divider")?0===z||w?G.addClass("hidden"):w=G:w=null}w&&w.addClass("hidden")}(p)}),n.append(g.children.map(function(r){if(!r.action||
a.isActionSupported(r.action)){if("CPSend"!=r.action||a.isActionSupported("CPContinue")||(r.name=sa("Post Oekaki"),r.shortcut="ctrl+p"),"-"==r.name?w=da(pa)('<hr class="dropdown-divider"></hr>'):(w=da(pa)('<a class="dropdown-item" href="#" data-action="'+r.action+'"><span>'+sa(r.name)+"</span></a>"),r.checkbox&&da(pa)(w).data("checkbox",!0).toggleClass("selected",!!r.checked),r.hideIfNotAvailable&&w.data("hideIfNotAvailable",!0)),r.title&&w.attr("title",sa(r.title)),r.shortcut){var u,w,z=w,G=document.createElement("small");
f&&(r.shortcut=r.shortcut.replace(/SHIFT/im,"\u21e7"),r.shortcut=r.shortcut.replace(/ALT/im,"\u2325"),r.shortcut=r.shortcut.replace(/CTRL/im,"\u2318"));G.className="chickenpaint-shortcut";G.textContent=(u=(u=(u=(u=(u=r.shortcut).toUpperCase()).replace(/(,.+)$/,"")).replace("CTRL+=","CTRL++")).replace("\u2318+=","\u2318++"),u=f?u.replace(/([^+])\+/g,"$1"):u.replace(/([^+])\+/g,"$1 "));z.append(G);da(Cc)(r.shortcut,function(L){return d(z),L.preventDefault(),L.stopPropagation(),!1})}return da(pa)("<li>").append(w)}})),
p}))})(da(pa)(".navbar-nav",b),Ul);(function(h,e){h.append(e.filter(function(g){return!!g.mnemonic&&a.isActionSupported(g.action)}).map(function(g){var p=da(pa)('<button class="widget-toggler selected" type="button" data-action="'.concat(g.action,'" data-checkbox="true" data-selected="').concat(!g.checked,'">')+"<span>"+g.mnemonic+"</span></button>");return p.on("click",function(m){d(p);m.preventDefault()}),p}))})(da(pa)(".widget-nav",b),Ul[5].children);da(pa)(b).on("click","a:not(.dropdown-toggle)",
function(h){d(da(pa)(this));h.preventDefault()});da(pa)(".navbar-toggler",b).on("click",function(h){h.preventDefault()});c.getPaletteManager().on("paletteVisChange",function(h,e){da(pa)('[data-action="CPPal'+h.substring(0,1).toUpperCase()+h.substring(1)+'"]',b).toggleClass("selected",e)});var k=da(pa)(".dropdown-item[data-action=CPFullScreen]",b),l=da(pa)(".dropdown-item[data-action=CPToolbarStyle]",b);a.on("fullScreen",function(h){return k.toggleClass("selected",h)});k.toggleClass("selected",a.isFullScreen());
a.on("toolbarStyleChange",function(h){return l.toggleClass("selected","old"===h)});l.toggleClass("selected","old"===a.getToolbarStyle())}function uh(a,c){var d=this,b=document.createElement("div"),f=new lh(a),k=new th(a),l=!1,h=this;this.togglePalettes=function(){k.togglePalettes()};this.arrangePalettes=function(){setTimeout(k.arrangePalettes.bind(k),0)};this.constrainPalettes=function(){k.constrainPalettes()};this.showPalette=function(m,n){k.showPaletteByName(m,n)};this.getSwatches=function(){return k.palettes.swatches.getSwatches()};
this.setSwatches=function(m){k.palettes.swatches.setSwatches(m)};this.getPaletteManager=function(){return k};this.setRotation90=function(m){f.setRotation(m*Math.PI/2);k.palettes.layers.setRotation90(m)};this.setFullScreenMode=function(m){l!==m&&(l=m,h.resize(),h.arrangePalettes())};this.resize=function(){var m=window.innerHeight,n=e.getElement().getBoundingClientRect().height;f.resize(l?m-n:Math.min(Math.max(m-n-65,500),850),!1);h.constrainPalettes()};var e=new Kp(a,this);c.appendChild(e.getElement());
b.className="chickenpaint-main-section";b.appendChild(f.getElement());b.appendChild(k.getElement());c.appendChild(b);f.on("canvasRotated90",function(m){k.palettes.layers.setRotation90(m)});screen.orientation&&screen.orientation.addEventListener("change",function(m){d.resize();a.actionPerformed({action:"CPArrangePalettes"});setTimeout(function(){d.resize();a.actionPerformed({action:"CPArrangePalettes"})},10);Promise.resolve().then(function(){d.resize()}).then(function(){a.actionPerformed({action:"CPArrangePalettes"})})});
var g=document.getElementById("chickenpaint-main-menu-content");if(document.addEventListener("show.bs.modal",function(){g&&g.classList.contains("show")&&(new bootstrap.Collapse(g,{toggle:!1})).hide()}),g){var p=document.querySelector(".chickenpaint .widget-nav");p&&(g.addEventListener("show.bs.collapse",function(m){p.classList.add("hidden")}),g.addEventListener("hidden.bs.collapse",function(m){p.classList.remove("hidden")}));window.addEventListener("resize",function(){p.classList.remove("hidden")})}document.addEventListener("hidden.bs.collapse",
this.resize.bind(this));window.addEventListener("resize",this.resize.bind(this));a.on("fullScreen",function(m){return d.setFullScreenMode(m)});a.on("toolbarStyleChange",function(m){da(pa)(c).toggleClass("chickenpaint-toolbar-style-old","old"===m)});a.on("unsavedChanges",function(m){da(pa)(c).toggleClass("chickenpaint-unsaved",m)});setTimeout(this.resize.bind(this),0)}function Lp(a){var c=da(pa)('<div class="modal fade chickenpaint-about-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">About ChickenPaint Be</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n\t\t\t\t\t\t<a class="chickenpaint-on-github" target="_blank" href="https://github.com/satopian/ChickenPaint_Be" rel="noopener"><span class="icon-github"></span> ChickenPaint Be on GitHub</a>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tCustomized from <a href="https://github.com/thenickdude/chickenpaint" target="_blank" rel="noopener">ChickenPaint</a>.<br>\n\t\t\t\t\t\tby satopian.<br>\n\t\t\t\t\t\t<a href="https://www.gnu.org/licenses/" target="_blank" rel="noopener">GNU General Public License</a></br>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<a class="chickenpaint-on-github" target="_blank" href="https://github.com/thenickdude/chickenpaint" rel="noopener"><span class="icon-github"></span> ChickenPaint on GitHub</a>\n                            \n                            <p>\n                                ChickenPaint is a translation of <a href="https://github.com/thenickdude/chibipaint" target="_blank" rel="noopener">ChibiPaint</a>\n                                from Java to JavaScript by Nicholas Sherlock / Chicken Smoothie\n                            </p>\n                            <p>\n                                ChibiPaint is Copyright (c) 2006-2008 Marc Schefer. All Rights Reserved\n                            </p>\n                            <p>\n                                ChickenPaint is free software: you can redistribute it and/or modify\n                                it under the terms of the GNU General Public License as published by\n                                the Free Software Foundation, either version 3 of the License, or\n                                (at your option) any later version.\n                            </p>\n        \n                            <p>\n                                ChickenPaint is distributed in the hope that it will be useful,\n                                but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n                                <a target="_blank" href="https://www.gnu.org/licenses/" rel="noopener">GNU General Public License</a> for more details.\n                            </p>\n        \n                            <pre class="pre-scrollable chickenpaint-third-party-licenses">Toolbar icons designed by <a target="_blank" href="https://github.com/Anteira" rel="noopener">Miglena Lapavicheva (Anteira)</a>\n    These icons are dual-licensed under <a target="_blank" href="https://spdx.org/licenses/GPL-3.0-or-later.html" rel="noopener">GPL-3.0-or-later</a> and <a target="_blank" href="https://creativecommons.org/licenses/by/3.0/" rel="noopener">CC-BY-3.0</a>\n\nIncludes icons from the <a target="_blank" href="https://extensions.libreoffice.org/en/extensions/show/tango-icon-theme-for-libreoffice" rel="noopener">Tango Icon Theme for LibreOffice</a>:\n    All artwork is licensed under the Creative Commons Attribution-Share Alike 3.0\n    United States License. To view a copy of this licence, visit\n    https://creativecommons.org/licenses/by-sa/3.0/ or send a letter to Creative\n    Commons, 171 Second Street, Suite 300, San Francisco, California 94105, USA.\n    \n    Credit for icons imported from git://git.gnome.org/gnome-icon-theme or derivatives\n    of these goes to the GNOME project (https://www.gnome.org)\n    Derivatives and new icons were created by Alexander Wilms &lt;f.alexander.wilms@gmail.com> \n    and Miroslav Mazel &lt;mazelm@gmail.com>\n    \nIncludes these MIT-licensed libraries:\n\n    Includes the <a target="_blank" href="https://github.com/eligrey/FileSaver.js" rel="noopener">FileSaver.js library</a>\n    FileSaver.js Copyright \u00a9 2015 <a target="_blank" href="https://eligrey.com/" rel="noopener">Eli Grey</a>\n\n    Includes the <a target="_blank" href="https://github.com/nodeca/pako" rel="noopener">Pako zlib compression library</a>\n    Copyright (C) 2014-2015 by Vitaly Puzrin\n    \n    Includes the <a target="_blank" href="https://github.com/madrobby/keymaster" rel="noopener">keymaster.js</a> keyboard library\n    Copyright (c) 2011-2013 Thomas Fuchs\n\n    Includes the <a target="_blank" href="https://github.com/stefanpenner/es6-promise" rel="noopener">es6-promise</a> library\n    Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors\n\n    Includes the <a target="_blank" href="https://benalman.com/projects/jquery-throttle-debounce-plugin/" rel="noopener">jQuery throttle-debounce</a> library\n    Copyright (c) 2010 "Cowboy" Ben Alman\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="https://jquery.com/" target="_blank" rel="noopener">jQuery library</a> \nCopyright <a href="https://jquery.com/license/" target="_blank" rel="noopener">OpenJS Foundation and other contributors</a>\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/jquery\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n    \n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\n    Includes Font Awesome by Fonticons, Inc. - <a href="https://fontawesome.com/" target="_blank" rel="noopener">https://fontawesome.com/</a>\nIncludes Material Design icons by Google - <a href="https://fonts.google.com/" target="_blank" rel="noopener">https://fonts.google.com/</a>\n                    </pre>\n                </div>\n            </div>\n        </div>\n    ');
c[0].addEventListener("hidden.bs.modal",function(b){c.remove()});var d=new bootstrap.Modal(c[0]);a.appendChild(c[0]);this.show=function(){d.show()}}function vh(a,c){var d=da(pa)('<div class="modal fade" tabindex="-1" role="dialog">\n\t            <div class="modal-dialog">\n\t                <div class="modal-content">\n\t                    <div class="modal-header">\n\t                        <h5 class="modal-title">'.concat(sa("Complete transform"),'</h5>\n\t                        <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n\t                        </button>\n\t                    </div>\n\t                    <div class="modal-body">\n\t                        <p>\n\t\t\t\t\t\t\t').concat(sa("You need to finish transforming this layer before you can do that. What would you like to do with the transform?"),
'\n\t\t\t\t\t\t\t</p>\n\t                    </div>\n\t                    <div class="modal-footer">\n\t                        <button type="button" class="btn btn-light" data-bs-dismiss="modal">').concat(sa("Cancel"),'</button>\n\t                        <button type="button" class="btn btn-light chickenpaint-reject-transform" data-bs-dismiss="modal">').concat(sa("Undo transform"),'</button>\n\t                        <button type="button" class="btn btn-primary chickenpaint-accept-transform" data-bs-dismiss="modal">').concat(sa("Apply transform"),
"</button>\n\t                    </div>\n\t                </div>\n\t            </div>\n\t        </div>\n\t    ")),b=this,f=da(pa)(".chickenpaint-accept-transform",d),k=da(pa)(".chickenpaint-reject-transform",d);f.on("click",function(h){c.actionPerformed({action:"CPTransformAccept"});b.emitEvent("accept")});k.on("click",function(h){c.actionPerformed({action:"CPTransformReject"});b.emitEvent("reject")});var l=new bootstrap.Modal(d[0]);this.show=function(){l.show()};d[0].addEventListener("hidden.bs.modal",
function(h){d.remove()});a.addEventListener("keydown",function g(e){"Enter"===e.key&&(l.hide(),c.actionPerformed({action:"CPTransformAccept"}),b.emitEvent("accept"),a.removeEventListener("keydown",g))});a.appendChild(d[0])}function Mp(a){var c=da(pa)('<div class="modal fade chickenpaint-shortcuts-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat(sa("Shortcuts"),
'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>\n                                ').concat(sa("Many of the menu options and painting tools have keyboard shortcuts which are written next to them or appear when you hover."),"\n                            </p>\n                            <p>\n                                ").concat(sa("Here are some other shortcuts which are not as obvious!"),
'\n                            </p>\n                            <div class="chickenpaint-shortcuts-sections">\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(sa("Color swatches palette"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(sa("Left"),
"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(sa("Use as the drawing color"),'\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(sa("Right"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(sa("Remove or replace a color swatch"),
'\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(sa("Line drawing mode"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ').concat(sa("Left"),
"</span>\n                                                </dt>\n                                                <dd>\n                                                   ").concat(sa("Snap line to nearest 45 degrees"),'\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(sa("Painting tools"),
'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">1</span> - <span class="chickenpaint-shortcut-key">9</span> , <span class="chickenpaint-shortcut-key">0</span></span>\n                                                </dt>\n                                                <dd>\n                                                    ').concat(sa("Change brush opacity"),
'\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">[</span> , <span class="chickenpaint-shortcut-key">]</span></span>\n                                                </dt>\n                                                <dd>\n                                                    ').concat(sa("Change brush size"),
'\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(sa("Brush palette"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(sa("Right"),
'</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut-alternate">').concat(sa("or"),'</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ').concat(sa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(sa("Adjust brush sliders more precisely"),
'\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(sa("Drawing canvas"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(sa("Middle"),
'</span> <span class="chickenpaint-shortcut-alternate">').concat(sa("or"),'</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Space</span> + <span class="fa icon-mouse-pointer"></span> ').concat(sa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(sa("Move the canvas around"),'\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">R</span> + <span class="fa icon-mouse-pointer"></span> ').concat(sa("Left"),
"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(sa("Rotate the canvas"),'\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(sa("Right"),'</span> <span class="chickenpaint-shortcut-alternate">').concat(sa("or"),
'</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa icon-mouse-pointer"></span> ').concat(sa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(sa("Sample the color under the cursor"),'\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(sa("Layers palette"),
'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(sa("Double click"),'</span> <span class="chickenpaint-shortcut-alternate">').concat(sa("or"),'</span> <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(sa("Right"),
"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(sa("Rename layer"),'\n                                                </dd>\n                                                <dt>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ').concat(sa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(sa("Toggle mask enable/disable"),
'\n                                                </dd>\n                                                <dt>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa icon-mouse-pointer"></span> ').concat(sa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(sa("Toggle mask View"),'\n                                                </dd>\n\t\t\t\t\t\t\t\t\t\t\t\t<dt>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">').concat(Vl,
'</span> + <span class="fa icon-mouse-pointer"></span> ').concat(sa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(sa("Apply layer mask"),'\n                                                </dd>\n\t\t\t\t\t\t\t\t\t\t\t\t<dt>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span></span> +\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">').concat(Vl,
'</span> + <span class="fa icon-mouse-pointer"></span> ').concat(sa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(sa("Delete layer mask"),"\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            "));
c[0].addEventListener("hidden.bs.modal",function(b){c.remove()});var d=new bootstrap.Modal(c[0]);a.appendChild(c[0]);this.show=function(){d.show()}}function Np(a,c){var d=da(pa)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat(sa("Box blur"),'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <form>\n                                <div class="form-group">\n                                    <label>').concat(sa("Blur amount (pixels)"),
'</label>\n                                    <input type="number" class="form-control chickenpaint-blur-amount" value="3">\n                                </div>\n                                <div class="form-group">\n                                    <label>').concat(sa("Iterations (1-8, larger gives smoother blur)"),'</label>\n                                    <input type="number" class="form-control chickenpaint-blur-iterations" value="1" min="1" max="8">\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">').concat(sa("Cancel"),
'</button>\n                            <button type="button" class="btn btn-primary chickenpaint-apply-box-blur" data-bs-dismiss="modal">').concat(sa("Ok"),"</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")),b=da(pa)(".chickenpaint-blur-amount",d),f=da(pa)(".chickenpaint-blur-iterations",d),k=da(pa)(".chickenpaint-apply-box-blur",d),l=new bootstrap.Modal(d[0]);this.show=function(){var h=document.getElementById("chickenpaint-main-menu-content");
h&&h.classList.contains("show")&&(new bootstrap.Collapse(h,{toggle:!1})).hide();l.show()};k[0].addEventListener("click",function(h){h=Math.max(parseInt(b.val(),10),1);var e=Math.min(Math.max(parseInt(f.val(),10),1),8);c.getArtwork().boxBlur(h,h,e);l.hide()});d[0].addEventListener("hidden.bs.modal",function(h){d[0].remove()});d[0].addEventListener("shown.bs.modal",function(h){b[0].focus()});d[0].addEventListener("keydown",function(h){"Enter"===h.key&&d.hasClass("show")&&(k[0].click(),h.preventDefault())});
a.appendChild(d[0])}function Op(a){var c=da(pa)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing tablet support</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p class="chickenpaint-tablet-there-are-two-options">\n                                There are two ways you could use your tablet\'s pen pressure support with ChickenPaint.\n                            </p>\n                            <div class="chickenpaint-tablet-support chickenpaint-wacom-support">\n                                <h5>\n                                    Plugin for Wacom tablets\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-firefox"></span>\n                                        Firefox (32-bit only)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-safari"></span>\n                                        Safari\n                                    </div>\n                                        <div class="chickenpaint-supported-browser">\n                                        <span class="icon-opera"></span>\n                                        Opera\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-installed">\n                                    The plugin for Wacom tablets doesn\'t seem to be installed in your browser yet.\n                                </p>\n                                <p class="chickenpaint-not-installed">\n                                    Please make sure that you\'ve installed the latest drivers for your tablet from the \n                                    <a href="http://www.wacom.com/en-us/support/product-support/drivers" target="_blank">Wacom drivers page</a>,\n                                    then restart your browser.\n                                </p>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t support the Wacom tablet plugin, please \n                                    try one of the browsers listed above instead.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    The Wacom tablet plugin is installed and working.\n                                </p>\n                            </div>\n                            <div class="chickenpaint-tablet-support chickenpaint-pointerevents-support">\n                                <h5>\n                                    Built-in support for most tablets.\n                                    <small>macOS, Windows 10 or newer</small>\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n\t\t\t\t\t\t\t\t\t<div class="chickenpaint-supported-browser">\n\t\t\t\t\t\t\t\t\t<span class="icon-chrome"></span>\n\t\t\t\t\t\t\t\t\t\tChrome\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="chickenpaint-supported-browser">\n                                        <span class="icon-edge"></span>\n                                        Edge (Windows 10)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-firefox"></span>\n                                        Firefox (<a href="https://github.com/satopian/ChickenPaint_Be/blob/main/help/Firefox%20pressure%20support.md" target="_blank" rel="noopener">help <i class="fa icon-external-link-alt"></i></a>)\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t have built-in support for drawing tablets, please try\n                                    one of the other browsers listed above.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    Your browser has built-in support for drawing tablets!\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n       '),
d=da(pa)(".chickenpaint-wacom-support",c),b=da(pa)(".chickenpaint-pointerevents-support",c),f=da(pa)(".chickenpaint-tablet-there-are-two-options",c),k=ve.getRef().isTabletPresent(),l=!!window.hasNativePointerEvents;d.toggleClass("supported",k);k?(b.hide(),f.hide()):((/Chrome/i.test(navigator.userAgent)&&!/OPR/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent))&&d.addClass("not-supported"),l&&(d.hide(),f.hide()));b.toggleClass("supported",l);b.toggleClass("not-supported",
!l);c[0].addEventListener("hidden.bs.modal",function(e){c.remove()});var h=new bootstrap.Modal(c[0]);a.appendChild(c[0]);this.show=function(){h.show()}}function Pp(a,c){var d=da(pa)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat(sa("Grid options"),'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <form>\n                                <div class="form-group">\n                                    <label>').concat(sa("Grid size"),
'</label>\n                                    <input type="number" class="form-control chickenpaint-grid-size" value="" autofocus>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">').concat(sa("Cancel"),'</button>\n                            <button type="button" class="btn btn-primary chickenpaint-apply-grid-settings" data-bs-dismiss="modal">').concat(sa("Ok"),
"</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")),b=da(pa)(".chickenpaint-grid-size",d),f=da(pa)(".chickenpaint-apply-grid-settings",d),k=new bootstrap.Modal(d[0]);this.show=function(){var l=document.getElementById("chickenpaint-main-menu-content");l&&l.classList.contains("show")&&(new bootstrap.Collapse(l,{toggle:!1})).hide();k.show()};b.val(c.getGridSize());d[0].addEventListener("hidden.bs.modal",function(l){d[0].remove()});
f[0].addEventListener("click",function(l){l=parseInt(b.val(),10);c.setGridSize(l);bootstrap.Modal.getInstance(d[0]).hide()});d[0].addEventListener("shown.bs.modal",function(l){b[0].focus()});d[0].addEventListener("keydown",function(l){"Enter"===l.key&&(l.preventDefault(),f[0].click())});a.appendChild(d[0])}function wh(a,c,d){var b=da(pa)('<div class="modal fade chickenpaint-send-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content" data-stage="saving">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat(sa("Saving drawing..."),
'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p class="chickenpaint-saving-progress-message">').concat(sa("Preparing your drawing to be saved, please wait..."),'</p>\n                            <pre class="chickenpaint-saving-error-message pre-scrollable"></pre>\n                            <div class="progress">\n                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>\n                            </div>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light chickenpaint-send-cancel" data-bs-dismiss="modal">').concat(sa("Cancel"),
'</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-not-previously-posted" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">').concat(sa("Drawing saved!"),'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>').concat(sa("Your drawing has been saved, would you like to post it to the forum now?"),
'</p>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-bs-dismiss="modal">').concat(sa("Yes, post it now"),'</button>\n                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-bs-dismiss="modal">').concat(sa("No, keep drawing"),'</button>\n                            <button type="button" class="btn btn-light chickenpaint-exit" data-bs-dismiss="modal">').concat(sa("No, quit and I'll finish it later"),
'</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-already-posted" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing saved!</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>').concat(sa("Your drawing has been saved, would you like to view it on the forum now?"),
'</p>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-bs-dismiss="modal">').concat(sa("Yes, view the post"),'</button>\n                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-bs-dismiss="modal">').concat(sa("No, keep drawing"),'</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-redirect" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing saved!</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>').concat(sa("Your drawing has been saved, redirecting you to view your new post now..."),
"</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")),f=da(pa)(".chickenpaint-saving-progress-message",b),k=da(pa)(".chickenpaint-saving-error-message",b),l=da(pa)(".progress-bar",b),h=this;d.on("savingProgress",function(g,p){g*=100;f.text(p);da(pa)(l).attr("aria-valuenow",g).css("width",g+"%")});d.on("savingComplete",function(){da(pa)(".modal-content[data-stage='saving']",b).hide();a.isActionSupported("CPContinue")?a.isActionSupported("CPExit")?
da(pa)(".modal-content[data-stage='success-not-previously-posted']",b).show():da(pa)(".modal-content[data-stage='success-already-posted']",b).show():da(pa)(".modal-content[data-stage='success-redirect']",b).show()});d.on("savingFailure",function(g){l.addClass("progress-bar-danger");var p=sa("Sorry, your drawing could not be saved, please try again later.");g&&(0<(g=g.replace(/^CHIBIERROR\s*/,"")).length&&(p+="<br><br>".concat(sa("The error returned from the server was"),":"),k.text(g).show()),f.html(p))});
da(pa)(".chickenpaint-post-drawing",b).on("click",function(){a.actionPerformed({action:"CPPost"})});da(pa)(".chickenpaint-exit",b).toggle(a.isActionSupported("CPExit")).on("click",function(){alert("When you want to come back and finish your drawing, just click the 'new drawing' button again and you can choose to continue this drawing.");a.actionPerformed({action:"CPExit"})});da(pa)(".chickenpaint-send-cancel",b).on("click",function(){d.cancel()});b[0].addEventListener("hidden.bs.modal",function(g){b.remove()});
b.appendTo(c);var e=new bootstrap.Modal(b[0]);this.show=function(){e.show();h.emitEvent("shown")}}function ya(a){function c(V){this.palName=V}function d(V){this.toolNum=V}function b(V){this.modeNum=V}function f(V){switch(N=V==ud.EDITING_MODE_IMAGE?ya.COLOR_MODE_RGB:ya.COLOR_MODE_GREYSCALE,z.emitEvent("colorModeChange",[V==ud.EDITING_MODE_IMAGE?"rgb":"greyscale"]),N){case ya.COLOR_MODE_RGB:var Na=G.clone();break;case ya.COLOR_MODE_GREYSCALE:Na=new ac(ac.greyToRGB(L))}z.artwork.setForegroundColor(Na.getRgb());
z.emitEvent("colorChange",[Na])}function k(){z.emitEvent("toolChange",[M,Ca[M]])}function l(V){ca!=V&&(V==ya.M_TRANSFORM&&(W=ca),ca=V,z.emitEvent("modeChange",[ca]))}function h(V){l(ya.M_DRAW);M=V;z.artwork.setBrush(Ca[V]);k()}function e(V,Na){p&&(p.addEventListener("dblclick",function(wa){wa.preventDefault();wa.stopPropagation()}),z.artwork.on("editModeChanged",f),r=new uh(z,p),z.emitEvent("fullScreen",[ma]),z.emitEvent("smallScreen",[ea]),Ja.load(),h(ya.T_PEN),r.arrangePalettes(),V&&r.setSwatches(V),
Na&&r.setRotation90(Na),ve.getRef().detectTablet(),function(wa){var wb=wa in window;wb||(wb=document.createElement("div"),wb.setAttribute(wa,"return;"),wb="function"==typeof wb[wa]);return wb}("onbeforeunload")?window.addEventListener("beforeunload",function(wa){if(z.artwork.getHasUnsavedChanges())return wa.preventDefault(),"Your drawing has unsaved changes!"}):da(pa)("a").on("click",function(wa){if("#"!=this.getAttribute("href")&&z.artwork.getHasUnsavedChanges())return confirm("Your drawing has unsaved changes! Are you sure to want to navigate away?")}),
z.artwork.on("unsavedChanges",function(wa){a.allowMultipleSends&&z.emitEvent("unsavedChanges",[wa])}))}var g=this;!function(){try{if("undefined"!=typeof navigator){var V=navigator.languages;Array.isArray(V)||(V=[V]);var Na=!0,wa=!1,wb=void 0;try{for(var kb,Yb=V[Symbol.iterator]();!(Na=(kb=Yb.next()).done);Na=!0){var Pb=kb.value,Va=/^(..)([-_].+)?$/.exec(Pb);if(Va){if(Va[1]=Va[1].toLowerCase(),Va[1]in Vi){Ui(Pb);break}if("en"===Va[1]){Ui("en");break}}}}catch(Mc){wa=!0,wb=Mc}finally{try{Na||null==Yb.return||
Yb.return()}finally{if(wa)throw wb;}}}}catch(Mc){console.error(Mc)}}();a.language&&Ui(a.language);var p=a.uiElem;document.addEventListener("keydown",function(V){((V.ctrlKey||V.metaKey)&&"+;=-shro".split("").includes(V.key.toLowerCase())||"Enter"===V.key)&&V.preventDefault()});p.addEventListener("contextmenu",function(V){V.preventDefault();V.stopPropagation()},{passive:!1});var m,n,r,u,w,z=this,G=new ac(0),L=255,N=ya.COLOR_MODE_RGB,M=ya.T_PENCIL,ca=ya.M_DRAW,W=ca,ka=[4278190080,4294967295],ea=!1,ma=
!1,Ca=((m=Array(ya.T_MAX))[ya.T_PENCIL]=new Ma({toolNb:ya.T_PENCIL,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ma.TIP_ROUND_AA,brushMode:Ma.BRUSH_MODE_PAINT,paintMode:Ma.PAINT_MODE_OPACITY}),m[ya.T_ERASER]=new Ma({toolNb:ya.T_ERASER,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!1,tip:Ma.TIP_ROUND_AA,brushMode:Ma.BRUSH_MODE_ERASE,paintMode:Ma.PAINT_MODE_OPACITY}),m[ya.T_PEN]=new Ma({toolNb:ya.T_PEN,size:2,alpha:128,isAA:!0,
minSpacing:.5,spacing:.05,pressureSize:!0,pressureAlpha:!1,tip:Ma.TIP_ROUND_AA,brushMode:Ma.BRUSH_MODE_PAINT,paintMode:Ma.PAINT_MODE_FLOW,alphaScale:.5}),m[ya.T_SOFTERASER]=new Ma({toolNb:ya.T_SOFTERASER,size:16,alpha:64,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ma.TIP_ROUND_AIRBRUSH,brushMode:Ma.BRUSH_MODE_ERASE,paintMode:Ma.PAINT_MODE_FLOW,alphaScale:.125}),m[ya.T_AIRBRUSH]=new Ma({toolNb:ya.T_AIRBRUSH,size:50,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,
pressureAlpha:!0,tip:Ma.TIP_ROUND_AIRBRUSH,brushMode:Ma.BRUSH_MODE_PAINT,paintMode:Ma.PAINT_MODE_FLOW,alphaScale:.125}),m[ya.T_DODGE]=new Ma({toolNb:ya.T_DODGE,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ma.TIP_ROUND_AIRBRUSH,brushMode:Ma.BRUSH_MODE_DODGE,paintMode:Ma.PAINT_MODE_FLOW,alphaScale:.125}),m[ya.T_BURN]=new Ma({toolNb:ya.T_BURN,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ma.TIP_ROUND_AIRBRUSH,brushMode:Ma.BRUSH_MODE_BURN,
paintMode:Ma.PAINT_MODE_FLOW,alphaScale:.125}),m[ya.T_WATER]=new Ma({toolNb:ya.T_WATER,size:30,alpha:70,isAA:!1,minSpacing:.5,spacing:.02,pressureSize:!1,pressureAlpha:!0,tip:Ma.TIP_ROUND_AA,brushMode:Ma.BRUSH_MODE_WATER,paintMode:Ma.PAINT_MODE_FLOW,alphaScale:.125,resat:.3,bleed:.6}),m[ya.T_BLUR]=new Ma({toolNb:ya.T_BLUR,size:20,alpha:255,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ma.TIP_ROUND_PIXEL,brushMode:Ma.BRUSH_MODE_BLUR,paintMode:Ma.PAINT_MODE_FLOW,alphaScale:.125}),
m[ya.T_SMUDGE]=new Ma({toolNb:ya.T_SMUDGE,size:20,alpha:128,isAA:!1,minSpacing:.5,spacing:.01,pressureSize:!1,pressureAlpha:!0,tip:Ma.TIP_ROUND_AIRBRUSH,brushMode:Ma.BRUSH_MODE_SMUDGE,paintMode:Ma.PAINT_MODE_FLOW,alphaScale:.125,resat:0,bleed:1}),m[ya.T_BLENDER]=new Ma({toolNb:ya.T_BLENDER,size:20,alpha:60,isAA:!1,minSpacing:.5,spacing:.1,pressureSize:!1,pressureAlpha:!0,tip:Ma.TIP_ROUND_AIRBRUSH,brushMode:Ma.BRUSH_MODE_OIL,paintMode:Ma.PAINT_MODE_FLOW,alphaScale:.125,resat:0,bleed:.07}),m),Ja=new Qp,
Ha={CPFullScreen:{action:function(){z.setFullScreen(!ma)},isSupported:function(){return!("disable"===a.fullScreenMode||"force"===a.fullScreenMode||!1===a.allowFullScreen)},modifies:{gui:!0}},CPZoomIn:{action:function(){n.zoomIn()},modifies:{gui:!0}},CPZoomOut:{action:function(){n.zoomOut()},modifies:{gui:!0}},CPZoom100:{action:function(){n.zoom100()},modifies:{gui:!0}},CPToolbarStyle:{action:function(){z.setToolbarStyle("new"===Ja.toolbarStyle?"old":"new")},modifies:{gui:!0}},CPUndo:{action:function(){z.artwork.undo()},
modifies:{document:!0},allowed:"isUndoAllowed"},CPRedo:{action:function(){z.artwork.redo()},modifies:{document:!0},allowed:"isRedoAllowed"},CPClearHistory:{action:function(){confirm(sa("You're about to clear the current Undo/Redo history.\nThis operation cannot be undone, are you sure you want to do that?"))&&z.artwork.clearHistory()},modifies:{document:!0}},CPPencil:new d(ya.T_PENCIL),CPPen:new d(ya.T_PEN),CPEraser:new d(ya.T_ERASER),CPSoftEraser:new d(ya.T_SOFTERASER),CPAirbrush:new d(ya.T_AIRBRUSH),
CPDodge:new d(ya.T_DODGE),CPBurn:new d(ya.T_BURN),CPWater:new d(ya.T_WATER),CPBlur:new d(ya.T_BLUR),CPSmudge:new d(ya.T_SMUDGE),CPBlender:new d(ya.T_BLENDER),CPFloodFill:new b(ya.M_FLOODFILL),CPGradientFill:new b(ya.M_GRADIENTFILL),CPRectSelection:new b(ya.M_RECT_SELECTION),CPMoveTool:new b(ya.M_MOVE_TOOL),CPRotateCanvas:new b(ya.M_ROTATE_CANVAS),CPPanCanvas:new b(ya.M_PAN_CANVAS),CPColorPicker:new b(ya.M_COLOR_PICKER),CPTransform:{action:function(){var V=z.artwork.getActiveLayer();null==z.artwork.transformAffineBegin()?
z.showLayerNotification(V,sa("Whoops! All of the selected pixels are transparent!"),"layer"):l(ya.M_TRANSFORM)},modifies:{mode:!0},allowed:function(){var V=z.artwork.getActiveLayer();if(V.visible)if(0==V.alpha)z.showLayerNotification(V,sa("Whoops! This layer's opacity is currently 0%"),"opacity");else{if(null!=z.artwork.transformAffineBegin())return 0!=V.getEffectiveAlpha();z.showLayerNotification(V,sa("Whoops! All of the selected pixels are transparent!"),"layer")}else z.showLayerNotification(V,
sa("Whoops! This layer is currently hidden"),"layer")}},CPTransformAccept:{action:function(){ca==ya.M_TRANSFORM&&(z.artwork.transformAffineFinish(),l(W))},modifies:{mode:!0}},CPTransformReject:{action:function(){ca==ya.M_TRANSFORM&&(z.artwork.transformAffineAbort(),l(W))},modifies:{document:!0,mode:!0}},CPFreeHand:{action:function(){Ca[M].strokeMode=Ma.STROKE_MODE_FREEHAND;k()},modifies:{tool:!0}},CPLine:{action:function(){Ca[M].strokeMode=Ma.STROKE_MODE_LINE;k()},modifies:{tool:!0}},CPBezier:{action:function(){Ca[M].strokeMode=
Ma.STROKE_MODE_BEZIER;k()},modifies:{tool:!0}},CPAbout:{action:function(){(new Lp(p)).show()},modifies:{}},CPShortcuts:{action:function(){(new Mp(p)).show()},modifies:{}},CPTabletSupport:{action:function(){(new Op(p)).show()},modifies:{}},CPLayerDuplicate:{action:function(){z.artwork.duplicateLayer()},modifies:{document:!0}},CPLayerMergeDown:{action:function(){z.artwork.mergeDown()},modifies:{document:!0},allowed:"isMergeDownAllowed"},CPGroupMerge:{action:function(){z.artwork.mergeGroup()},modifies:{document:!0},
allowed:"isMergeGroupAllowed"},CPLayerMergeAll:{action:function(){z.artwork.mergeAllLayers()},modifies:{document:!0},allowed:"isMergeAllLayersAllowed"},CPExpandLayerGroup:{action:function(V){z.artwork.expandLayerGroup(V.group,V.expand)},modifies:{document:!0}},CPFill:{action:function(){z.artwork.fill(4278190080|z.getCurColor().getRgb())},modifies:{document:!0},requiresDrawable:!0},CPClear:{action:function(){z.artwork.clear()},modifies:{document:!0},requiresDrawable:!0},CPSelectAll:{action:function(){z.artwork.rectangleSelection(z.artwork.getBounds());
n.repaintAll()},modifies:{document:!0}},CPDeselectAll:{action:function(){z.artwork.rectangleSelection(new Sa(0,0,0,0));n.repaintAll()},modifies:{document:!0}},CPHFlip:{action:function(){z.artwork.hFlip()},modifies:{document:!0},requiresDrawable:!0},CPVFlip:{action:function(){z.artwork.vFlip()},modifies:{document:!0},requiresDrawable:!0},CPMNoise:{action:function(){z.artwork.monochromaticNoise()},modifies:{document:!0},requiresDrawable:!0},CPCNoise:{action:function(){z.artwork.colorNoise()},modifies:{document:!0},
allowed:"isColorNoiseAllowed"},CPFXBoxBlur:{action:function(){u||=new Np(p,z);u.show()},modifies:{document:!0},requiresDrawable:!0},CPFXInvert:{action:function(){z.artwork.invert()},modifies:{document:!0},requiresDrawable:!0},CPCut:{action:function(){z.artwork.cutSelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCutSelectionAllowed"},CPCopy:{action:function(){z.artwork.copySelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCopySelectionAllowed"},CPCopyMerged:{action:function(){z.artwork.copySelectionMerged()},
modifies:{document:!0},allowed:"isCopySelectionMergedAllowed"},CPPaste:{action:function(){z.artwork.pasteClipboard()},modifies:{document:!0},allowed:"isPasteClipboardAllowed"},CPToggleGrid:{action:function(V){n.showGrid(V.selected)},modifies:{gui:!0}},CPGridOptions:{action:function(){w||=new Pp(p,n);w.show()},modifies:{gui:!0}},CPLinearInterpolation:{action:function(V){n.setInterpolation(V.selected)},modifies:{gui:!0},isSupported:function(){return!!Ei(de(0,0).getContext("2d"))}},CPResetCanvasRotation:{action:function(){n.resetRotation()},
modifies:{gui:!0}},CPAddLayer:{action:function(){z.artwork.addLayer("layer")},modifies:{document:!0}},CPAddGroup:{action:function(){z.artwork.addLayer("group")},modifies:{document:!0}},CPAddLayerMask:{action:function(){z.artwork.addLayerMask()},modifies:{document:!0},allowed:"isAddLayerMaskAllowed"},CPApplyLayerMask:{action:function(){z.artwork.applyLayerMask(!0)},modifies:{document:!0},allowed:"isApplyLayerMaskAllowed"},CPRemoveLayerMask:{action:function(){z.artwork.removeLayerMask(!1)},modifies:{document:!0},
allowed:"isRemoveLayerMaskAllowed"},CPRemoveLayer:{action:function(){z.artwork.removeLayer()||alert(sa("Sorry, you can't remove the last remaining layer in the drawing."))},modifies:{document:!0},allowed:"isRemoveLayerAllowed"},CPCreateClippingMask:{action:function(){z.artwork.createClippingMask()},modifies:{document:!0},allowed:"isCreateClippingMaskAllowed"},CPReleaseClippingMask:{action:function(){z.artwork.releaseClippingMask()},modifies:{document:!0},allowed:"isReleaseClippingMaskAllowed"},CPRelocateLayer:{action:function(V){z.artwork.relocateLayer(V.layer,
V.toGroup,V.toIndex)},modifies:{document:!0}},CPSetActiveLayer:{action:function(V){V.mask&&V.layer.mask&&!V.layer.maskVisible&&z.artwork.setLayerMaskVisible(V.layer,!0);z.artwork.setActiveLayer(V.layer,V.mask);z.artwork.performIdleTasks()},modifies:{document:!0}},CPToggleMaskView:{action:function(){var V=z.artwork.toggleMaskView();V&&z.emitEvent("maskViewOpened",[V])},modifies:{gui:!0}},CPSetMaskVisible:{action:function(V){z.artwork.setLayerMaskVisible(V.layer,V.visible)},modifies:{layerProp:!0}},
CPSetLayerVisibility:{action:function(V){z.artwork.setLayerVisibility(V.layer,V.visible)},modifies:{layerProp:!0}},CPSetLayerName:{action:function(V){z.artwork.setLayerName(V.layer,V.name)},modifies:{layerProp:!0}},CPSetLayerBlendMode:{action:function(V){z.artwork.setLayerBlendMode(V.blendMode)},modifies:{layerProp:!0}},CPSetLayerAlpha:{action:function(V){z.artwork.setLayerAlpha(V.alpha)},modifies:{layerProp:!0}},CPSetLayerLockAlpha:{action:function(V){z.artwork.setLayerLockAlpha(V.lock)},modifies:{layerProp:!0}},
CPPalColor:new c("color"),CPPalBrush:new c("brush"),CPPalLayers:new c("layers"),CPPalStroke:new c("stroke"),CPPalSwatches:new c("swatches"),CPPalTool:new c("tool"),CPPalMisc:new c("misc"),CPPalTextures:new c("textures"),CPTogglePalettes:{action:function(){r.togglePalettes()},modifies:{gui:!0}},CPArrangePalettes:{action:function(){r.arrangePalettes()},modifies:{gui:!0}},CPSave:{action:function(){var V;(V=new ug({artwork:z.getArtwork(),rotation:n.getRotation90(),swatches:r.getSwatches()})).on("savingComplete",
function(){z.artwork.setHasUnsavedChanges(!1)});V.on("savingFailure",function(){alert(sa("Sorry, your drawing could not be saved, please try again later."))});V.save()},isSupported:function(){return!1!==a.allowDownload},modifies:{document:!0}},CPSend:{action:function(){!function(){if(z.isActionSupported("CPContinue")||confirm(sa("Are you sure you want to send your drawing to the server and finish drawing now?"))){var V=new ug({artwork:z.getArtwork(),rotation:n.getRotation90(),swatches:r.getSwatches(),
url:a.saveUrl}),Na=new wh(z,p,V);V.on("savingComplete",function(){z.artwork.setHasUnsavedChanges(!1);!z.isActionSupported("CPContinue")&&z.isActionSupported("CPPost")&&z.actionPerformed({action:"CPPost"})});V.on("savingFailure",function(){alert(sa("Sorry, your drawing could not be saved, please try again later."))});Na.on("shown",function(){V.save()});Na.show()}}()},isSupported:function(){return!!a.saveUrl},modifies:{document:!0}},CPPost:{action:function(){if("function"==typeof handleExit)return handleExit();
window.location=a.postUrl},isSupported:function(){return!!a.postUrl},modifies:{document:!0}},CPContinue:{action:function(){},isSupported:function(){return!!a.allowMultipleSends}},CPExit:{action:function(){window.location=a.exitUrl},isSupported:function(){return!!a.exitUrl},modifies:{}}};switch(c.prototype.action=function(V){r.showPalette(this.palName,V.selected)},c.prototype.modifies={gui:!0},d.prototype.action=function(){h(this.toolNum)},d.prototype.modifies={mode:!0,tool:!0},d.prototype.requiresDrawable=
!0,b.prototype.action=function(){l(this.modeNum)},b.prototype.modifies={mode:!0},this.callToolListeners=function(){k()},this.getArtwork=function(){return this.artwork},this.setCanvas=function(V){n=V},this.setTransformInterpolation=function(V){this.artwork.setTransformInterpolation(V)},this.setCurColor=function(V){switch(N){case ya.COLOR_MODE_RGB:G.isEqual(V)||(G.copyFrom(V),this.artwork.setForegroundColor(V.getRgb()),this.emitEvent("colorChange",[V]));break;case ya.COLOR_MODE_GREYSCALE:if(V=V.getValue(),
L!=V){var Na=ac.greyToRGB(V);this.artwork.setForegroundColor(Na);L=V;this.emitEvent("colorChange",[new ac(Na)])}}},this.getCurColor=function(){switch(N){case ya.COLOR_MODE_RGB:return G.clone();case ya.COLOR_MODE_GREYSCALE:return new ac(ac.greyToRGB(L))}},this.setCurGradient=function(V){ka=V.slice(0);this.emitEvent("gradientChange",[ka])},this.getCurGradient=function(){return ka.slice(0)},this.setBrushSize=function(V){Ca[M].size=Math.max(1,Math.min(200,V));k()},this.getBrushSize=function(){return Ca[M].size},
this.setAlpha=function(V){Ca[M].alpha=V;k()},this.getAlpha=function(){return Ca[M].alpha},this.getCurMode=function(){return ca},this.getCurTool=function(){return M},this.getBrushInfo=function(){return Ca[M]},this.isActionSupported=function(V){if(Ha[V]){var Na=Vd(Ha[V].isSupported);return"function"==Na?Ha[V].isSupported():"undefined"==Na||Ha[V].isSupported}return!1},this.isActionAllowed=function(V){V=Ha[V];return!!V&&("function"==typeof V.allowed?V.allowed():"string"==typeof V.allowed?this.artwork[V.allowed]():
!V.requiresDrawable||this.artwork.isActiveLayerDrawable())},this.showLayerNotification=function(V,Na,wa){this.emitEvent("layerNotification",[V,Na,wa])},this.actionPerformed=function(V){if(null!=this.artwork&&null!=n){var Na=Ha[V.action];Na&&(ca==ya.M_TRANSFORM&&(Na.modifies.document||Na.modifies.mode)&&-1==["CPTransformAccept","CPTransformReject"].indexOf(V.action)?"CPUndo"==V.action?Ha.CPTransformReject.action():"CPTransform"!=V.action&&(Na=new vh(p,this),Na.on("accept",this.actionPerformed.bind(this,
V)),Na.on("reject",this.actionPerformed.bind(this,V)),Na.show()):Na.action(V))}},this.setSmallScreenMode=function(V){ea!==V&&(ea=V,da(pa)(p).toggleClass("chickenpaint-small-screen",ea),z.emitEvent("smallScreen",[ea]))},this.getSmallScreenMode=function(){return ea},this.setFullScreen=function(V){ma!==V&&(ma=V,da(pa)("body").toggleClass("chickenpaint-full-screen",ma),da(pa)(p).toggleClass("chickenpaint-full-screen",ma),ma&&0===da(pa)("head meta[name=viewport]").length?(da(pa)("head").append('<meta name="viewport" content="width=device-width,user-scalable=no">'),
setTimeout(function(){return z.emitEvent("fullScreen",[ma])},200)):z.emitEvent("fullScreen",[ma]))},this.isFullScreen=function(){return ma},this.setToolbarStyle=function(V){Ja.set("toolbarStyle",V);Ja.save()},this.getToolbarStyle=function(){return Ja.get("toolbarStyle")},this.getResourcesRoot=function(){return a.resourcesRoot},!function(){if(!((V=de(0,0)).getContext&&V.getContext("2d")&&"Uint8Array"in window))throw new ya.UnsupportedBrowserException;var V;V=(-1!=navigator.userAgent.indexOf("iPad")||
-1!=navigator.userAgent.indexOf("iPod")||-1!=navigator.userAgent.indexOf("iPhone"))&&-1!=navigator.userAgent.indexOf(" OS 8_0 ");var Na=-1==navigator.userAgent.indexOf("CriOS")&&-1!=navigator.userAgent.indexOf("Safari");if(V&&Na)throw new ya.UnsupportedBrowserException("You are using Safari 8.0.0, which is unable to upload drawings. That bug was fixed in the iOS 8.0.2 update, or in Chrome for iOS.");}(),p&&(("string"!=typeof document.body.style.flexBasis&&"string"!=typeof document.body.style.msFlexDirection||
/Presto/.test(navigator.userAgent))&&(p.className+=" no-flexbox"),p.className+=" chickenpaint chickenpaint-lang-"+Wi),a.resourcesRoot=a.resourcesRoot||"chickenpaint/",a.disableBootstrapAPI&&da(pa)(document).off(".data-api"),this.setSmallScreenMode(!!("number"==typeof navigator.maxTouchPoints&&2<navigator.maxTouchPoints&&(820>=window.screen.width||820>=window.screen.height))),a.fullScreenMode){case "force":this.setFullScreen(!0);break;case "auto":this.setFullScreen(ea)}(Ja.on("toolbarStyle",function(V){return g.emitEvent("toolbarStyleChange",
[V])}),a.loadImageUrl||a.loadChibiFileUrl)?(m=new hh(a),new Cp(p,m,a.resourcesRoot),m.on("loadingComplete",function(V){z.artwork=V.layers||V.flat;e(V.swatches,a.rotation);a.onLoaded&&a.onLoaded(this)}),m.load()):(a.artwork?this.artwork=a.artwork:(this.artwork=new ud(a.canvasWidth||800,a.canvasHeight||600),this.artwork.addBackgroundLayer(),this.artwork.addDefaultLayer()),e(),a.onLoaded&&a.onLoaded(this))}var Wl,Pf,Qe,xh,yh,we,Xl,Yl,yg,Qf,Zl,Zi,Rf,$i,aj,bj,$l,cj,am,yd,Sf,zh,bm,cm,dm,dj,ej,Tf="undefined"!=
typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},tc={},Ua={},Ah=function(a){return a&&a.Math===Math&&a};Ua=Ah("object"==typeof globalThis&&globalThis)||Ah("object"==typeof window&&window)||Ah("object"==typeof self&&self)||Ah("object"==typeof Tf&&Tf)||function(){return this}()||Ua||Function("return this")();var mc={},nc={};mc=!(nc=function(a){try{return!!a()}catch(c){return!0}})(function(){return 7!==Object.defineProperty({},
1,{get:function(){return 7}})[1]});var uc={},Uf={};Uf=!nc(function(){var a=function(){}.bind();return"function"!=typeof a||a.hasOwnProperty("prototype")});var Bh=Function.prototype.call;uc=Uf?Bh.bind(Bh):function(){return Bh.apply(Bh,arguments)};var em={}.propertyIsEnumerable,fm=Object.getOwnPropertyDescriptor;var fj=fm&&!em.call({1:2},1)?function(a){a=fm(this,a);return!!a&&a.enumerable}:em;var Rd={};Rd=function(a,c){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:c}};var Wd={},
gj={},Vb={},gm=Function.prototype,hj=gm.call,Rp=Uf&&gm.bind.bind(hj,hj),zd={},Sp=(Vb=Uf?Rp:function(a){return function(){return hj.apply(a,arguments)}})({}.toString),Tp=Vb("".slice);zd=function(a){return Tp(Sp(a),8,-1)};var ij=Object,Up=Vb("".split);gj=nc(function(){return!ij("z").propertyIsEnumerable(0)})?function(a){return"String"===zd(a)?Up(a,""):ij(a)}:ij;var zg={},of={};of=function(a){return null==a};var Vp=TypeError;zg=function(a){if(of(a))throw new Vp("Can't call method on "+a);return a};Wd=
function(a){return gj(zg(a))};var Re={},jj={},vc={},Nb={},Ch={},kj="object"==typeof document&&document.all,Wp=(Ch={all:kj,IS_HTMLDDA:void 0===kj&&void 0!==kj}).all;Nb=Ch.IS_HTMLDDA?function(a){return"function"==typeof a||a===Wp}:function(a){return"function"==typeof a};var Xp=Ch.all;vc=Ch.IS_HTMLDDA?function(a){return"object"==typeof a?null!==a:Nb(a)||a===Xp}:function(a){return"object"==typeof a?null!==a:Nb(a)};var pf={},kd={};kd=function(a,c){var d;return 2>arguments.length?(d=Ua[a],Nb(d)?d:void 0):
Ua[a]&&Ua[a][c]};var xe={};xe=Vb({}.isPrototypeOf);var lj={},Xd={},Se={},qf={};qf="undefined"!=typeof navigator&&String(navigator.userAgent)||"";var hm=Ua.process,im=Ua.Deno,jm=hm&&hm.versions||im&&im.version,km=jm&&jm.v8;km&&(xh=0<(Qe=km.split("."))[0]&&4>Qe[0]?1:+(Qe[0]+Qe[1]));!xh&&qf&&(!(Qe=qf.match(/Edge\/(\d+)/))||74<=Qe[1])&&(Qe=qf.match(/Chrome\/(\d+)/))&&(xh=+Qe[1]);Se=xh;var Yp=Ua.String;lj=(Xd=!!Object.getOwnPropertySymbols&&!nc(function(){var a=Symbol("symbol detection");return!Yp(a)||
!(Object(a)instanceof Symbol)||!Symbol.sham&&Se&&41>Se}))&&!Symbol.sham&&"symbol"==Vd(Symbol.iterator);var Zp=Object;pf=lj?function(a){return"symbol"==(void 0===a?"undefined":Vd(a))}:function(a){var c=kd("Symbol");return Nb(c)&&xe(c.prototype,Zp(a))};var Ag={},Sd={},rf={},$p=String;rf=function(a){try{return $p(a)}catch(c){return"Object"}};var aq=TypeError;Sd=function(a){if(Nb(a))return a;throw new aq(rf(a)+" is not a function");};Ag=function(a,c){a=a[c];return of(a)?void 0:Sd(a)};var lm={},bq=TypeError;
lm=function(a,c){var d,b;if("string"===c&&Nb(d=a.toString)&&!vc(b=uc(d,a))||Nb(d=a.valueOf)&&!vc(b=uc(d,a))||"string"!==c&&Nb(d=a.toString)&&!vc(b=uc(d,a)))return b;throw new bq("Can't convert object to primitive value");};var zc={},ye={},ld={};ld=!1;var ze={},Dh={},cq=Object.defineProperty;Dh=function(a,c){try{cq(Ua,a,{value:c,configurable:!0,writable:!0})}catch(d){Ua[a]=c}return c};ze=Ua["__core-js_shared__"]||Dh("__core-js_shared__",{});(ye=function(a,c){return ze[a]||(ze[a]=void 0!==c?c:{})})("versions",
[]).push({version:"3.33.2",mode:ld?"pure":"global",copyright:"\u00a9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.2/LICENSE",source:"https://github.com/zloirock/core-js"});var qb={},sf={},dq=Object;sf=function(a){return dq(zg(a))};var eq=Vb({}.hasOwnProperty);qb=Object.hasOwn||function(a,c){return eq(sf(a),c)};var tf={},fq=0,gq=Math.random(),hq=Vb((1).toString);tf=function(a){return"Symbol("+(void 0===a?"":a)+")_"+hq(++fq+gq,36)};var Vf=Ua.Symbol,
mj=ye("wks"),iq=lj?Vf.for||Vf:Vf&&Vf.withoutSetter||tf,jq=TypeError,kq=(zc=function(a){return qb(mj,a)||(mj[a]=Xd&&qb(Vf,a)?Vf[a]:iq("Symbol."+a)),mj[a]})("toPrimitive");jj=function(a,c){if(!vc(a)||pf(a))return a;var d,b=Ag(a,kq);if(b){if(void 0===c&&(c="default"),d=uc(b,a,c),!vc(d)||pf(d))return d;throw new jq("Can't convert object to primitive value");}return void 0===c&&(c="number"),lm(a,c)};Re=function(a){a=jj(a,"string");return pf(a)?a:a+""};var nj={},Wf={},oj=Ua.document,lq=vc(oj)&&vc(oj.createElement);
Wf=function(a){return lq?oj.createElement(a):{}};nj=!mc&&!nc(function(){return 7!==Object.defineProperty(Wf("div"),"a",{get:function(){return 7}}).a});var mm=Object.getOwnPropertyDescriptor,mq=Pf=mc?mm:function(a,c){if(a=Wd(a),c=Re(c),nj)try{return mm(a,c)}catch(d){}if(qb(a,c))return Rd(!uc(fj,a,c),a[c])},Id={},pj={};pj=mc&&nc(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype});var Uc={},nq=String,oq=TypeError;Uc=function(a){if(vc(a))return a;
throw new oq(nq(a)+" is not an object");};var pq=TypeError,qj=Object.defineProperty,qq=Object.getOwnPropertyDescriptor;var Jd=mc?pj?function(a,c,d){if(Uc(a),c=Re(c),Uc(d),"function"==typeof a&&"prototype"===c&&"value"in d&&"writable"in d&&!d.writable){var b=qq(a,c);b&&b.writable&&(a[c]=d.value,d={configurable:"configurable"in d?d.configurable:b.configurable,enumerable:"enumerable"in d?d.enumerable:b.enumerable,writable:!1})}return qj(a,c,d)}:qj:function(a,c,d){if(Uc(a),c=Re(c),Uc(d),nj)try{return qj(a,
c,d)}catch(b){}if("get"in d||"set"in d)throw new pq("Accessors not supported");return"value"in d&&(a[c]=d.value),a};Id=mc?function(a,c,d){return Jd(a,c,Rd(1,d))}:function(a,c,d){return a[c]=d,a};var Qc={},Eh={},rj={},nm=Function.prototype,rq=mc&&Object.getOwnPropertyDescriptor,sj=qb(nm,"name"),sq=sj&&(!mc||mc&&rq(nm,"name").configurable),tq=(rj={EXISTS:sj,PROPER:sj&&"something"===function(){}.name,CONFIGURABLE:sq}).CONFIGURABLE,Fh={},uq=Vb(Function.toString);Nb(ze.inspectSource)||(ze.inspectSource=
function(a){return uq(a)});Fh=ze.inspectSource;var Ad={},om={},pm=Ua.WeakMap;om=Nb(pm)&&/native code/.test(String(pm));var Bg={},qm=ye("keys");Bg=function(a){return qm[a]||(qm[a]=tf(a))};var uf={};uf={};var tj=Ua.TypeError,vq=Ua.WeakMap;if(om||ze.state){var ie=ze.state||(ze.state=new vq);ie.get=ie.get;ie.has=ie.has;ie.set=ie.set;var uj=function(a,c){if(ie.has(a))throw new tj("Object already initialized");return c.facade=a,ie.set(a,c),c};var Gh=function(a){return ie.get(a)||{}};var vj=function(a){return ie.has(a)}}else{var Xf=
Bg("state");uf[Xf]=!0;uj=function(a,c){if(qb(a,Xf))throw new tj("Object already initialized");return c.facade=a,Id(a,Xf,c),c};Gh=function(a){return qb(a,Xf)?a[Xf]:{}};vj=function(a){return qb(a,Xf)}}var wq=(Ad={set:uj,get:Gh,has:vj,enforce:function(a){return vj(a)?Gh(a):uj(a,{})},getterFor:function(a){return function(c){var d;if(!vc(c)||(d=Gh(c)).type!==a)throw new tj("Incompatible receiver, "+a+" required");return d}}}).enforce,xq=Ad.get,rm=String,Hh=Object.defineProperty,yq=Vb("".slice),zq=Vb("".replace),
Aq=Vb([].join),Bq=mc&&!nc(function(){return 8!==Hh(function(){},"length",{value:8}).length}),Cq=String(String).split("String"),Dq=Eh=function(a,c,d){"Symbol("===yq(rm(c),0,7)&&(c="["+zq(rm(c),/^Symbol\(([^)]*)\)/,"$1")+"]");d&&d.getter&&(c="get "+c);d&&d.setter&&(c="set "+c);(!qb(a,"name")||tq&&a.name!==c)&&(mc?Hh(a,"name",{value:c,configurable:!0}):a.name=c);Bq&&d&&qb(d,"arity")&&a.length!==d.arity&&Hh(a,"length",{value:d.arity});try{d&&qb(d,"constructor")&&d.constructor?mc&&Hh(a,"prototype",{writable:!1}):
a.prototype&&(a.prototype=void 0)}catch(b){}d=wq(a);return qb(d,"source")||(d.source=Aq(Cq,"string"==typeof c?c:"")),a};Function.prototype.toString=Dq(function(){return Nb(this)&&xq(this).source||Fh(this)},"toString");Qc=function(a,c,d,b){b||={};var f=b.enumerable,k=void 0!==b.name?b.name:c;if(Nb(d)&&Eh(d,k,b),b.global)f?a[c]=d:Dh(c,d);else{try{b.unsafe?a[c]&&(f=!0):delete a[c]}catch(l){}f?a[c]=d:Jd(a,c,{value:d,enumerable:!1,configurable:!b.nonConfigurable,writable:!b.nonWritable})}return a};var Ih=
{},sm={},wj={},Yf={},Jh={},tm={},Eq=Math.ceil,Fq=Math.floor;tm=Math.trunc||function(a){a=+a;return(0<a?Fq:Eq)(a)};Jh=function(a){a=+a;return a!=a||0===a?0:tm(a)};var Gq=Math.max,Hq=Math.min;Yf=function(a,c){a=Jh(a);return 0>a?Gq(a+c,0):Hq(a,c)};var vf={},xj={},Iq=Math.min;xj=function(a){return 0<a?Iq(Jh(a),9007199254740991):0};vf=function(a){return xj(a.length)};var um=function(a){return function(c,d,b){var f;c=Wd(c);var k=vf(c);b=Yf(b,k);if(a&&d!=d)for(;k>b;){if((f=c[b++])!=f)return!0}else for(;k>
b;b++)if((a||b in c)&&c[b]===d)return a||b||0;return!a&&-1}},Jq={includes:um(!0),indexOf:um(!1)}.indexOf,vm=Vb([].push);wj=function(a,c){var d;a=Wd(a);var b=0,f=[];for(d in a)!qb(uf,d)&&qb(a,d)&&vm(f,d);for(;c.length>b;)qb(a,d=c[b++])&&(~Jq(f,d)||vm(f,d));return f};var Kh={},Kq=(Kh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ")).concat("length","prototype");var Cg=Object.getOwnPropertyNames||function(a){return wj(a,Kq)};var Lh=Object.getOwnPropertySymbols;
var Lq=Vb([].concat);sm=kd("Reflect","ownKeys")||function(a){var c=Cg(Uc(a)),d=Lh;return d?Lq(c,d(a)):c};Ih=function(a,c,d){for(var b=sm(c),f=Jd,k=Pf,l=0;l<b.length;l++){var h=b[l];qb(a,h)||d&&qb(d,h)||f(a,h,k(c,h))}};var Dg={},Mq=/#|\.prototype\./,Eg=function(a,c){a=Nq[Oq(a)];return a===Pq||a!==Qq&&(Nb(c)?nc(c):!!c)},Oq=Eg.normalize=function(a){return String(a).replace(Mq,".").toLowerCase()},Nq=Eg.data={},Qq=Eg.NATIVE="N",Pq=Eg.POLYFILL="P";Dg=Eg;tc=function(a,c){var d,b,f,k,l,h=a.target,e=a.global,
g=a.stat;if(d=e?Ua:g?Ua[h]||Dh(h,{}):(Ua[h]||{}).prototype)for(b in c){if(k=c[b],f=a.dontCallGetSet?(l=mq(d,b))&&l.value:d[b],!Dg(e?b:h+(g?".":"#")+b,a.forced)&&void 0!==f){if((void 0===k?"undefined":Vd(k))==(void 0===f?"undefined":Vd(f)))continue;Ih(k,f)}(a.sham||f&&f.sham)&&Id(k,"sham",!0);Qc(d,b,k,a)}};var Zf={};Zf=Array.isArray||function(a){return"Array"===zd(a)};var yj={},Rq=TypeError;yj=function(a){if(9007199254740991<a)throw Rq("Maximum allowed index exceeded");return a};var Mh={};Mh=function(a,
c,d){c=Re(c);c in a?Jd(a,c,Rd(0,d)):a[c]=d};var zj={},wm={},Aj={},Ae={},Nh={},Sq=zc("toStringTag"),xm={};xm[Sq]="z";Nh="[object z]"===String(xm);var Tq=zc("toStringTag"),Uq=Object,Vq="Arguments"===zd(function(){return arguments}());Ae=Nh?zd:function(a){var c;if(void 0===a)var d="Undefined";else{if(null===a)var b="Null";else{a:{var f=a=Uq(a);try{b=f[Tq];break a}catch(k){}b=void 0}b="string"==typeof(d=b)?d:Vq?zd(a):"Object"===(c=zd(a))&&Nb(a.callee)?"Arguments":c}d=b}return d};var ym=function(){},Wq=
[],zm=kd("Reflect","construct"),Bj=/^\s*(?:class|function)\b/,Xq=Vb(Bj.exec),Yq=!Bj.test(ym),Fg=function(a){if(!Nb(a))return!1;try{return zm(ym,Wq,a),!0}catch(c){return!1}},Am=function(a){if(!Nb(a))return!1;switch(Ae(a)){case "AsyncFunction":case "GeneratorFunction":case "AsyncGeneratorFunction":return!1}try{return Yq||!!Xq(Bj,Fh(a))}catch(c){return!0}};Am.sham=!0;Aj=!zm||nc(function(){var a;return Fg(Fg.call)||!Fg(Object)||!Fg(function(){a=!0})||a})?Am:Fg;var Zq=zc("species"),Bm=Array;wm=function(a){var c;
return Zf(a)&&(c=a.constructor,Aj(c)&&(c===Bm||Zf(c.prototype))?c=void 0:vc(c)&&null===(c=c[Zq])&&(c=void 0)),void 0===c?Bm:c};zj=function(a,c){return new (wm(a))(0===c?0:c)};var Cm={},$q=zc("species");Cm=function(a){return 51<=Se||!nc(function(){var c=[];return(c.constructor={})[$q]=function(){return{foo:1}},1!==c[a](Boolean).foo})};var Dm=zc("isConcatSpreadable"),ar=!(51<=Se||!nc(function(){var a=[];return a[Dm]=!1,a.concat()[0]!==a}))||!Cm("concat");tc({target:"Array",proto:!0,arity:1,forced:ar},
{concat:function(a){var c,d=sf(this),b=zj(d,0),f=0;var k=-1;for(c=arguments.length;k<c;k++){var l=-1===k?d:arguments[k];var h=l;if(vc(h)){var e=h[Dm];h=void 0!==e?!!e:Zf(h)}else h=!1;if(h)for(e=vf(l),yj(f+e),h=0;h<e;h++,f++)h in l&&Mh(b,f,l[h]);else yj(f+1),Mh(b,f++,l)}return b.length=f,b}});var Em={};Em=Nh?{}.toString:function(){return"[object "+Ae(this)+"]"};Nh||Qc(Object.prototype,"toString",Em,{unsafe:!0});var je={},br=String;je=function(a){if("Symbol"===Ae(a))throw TypeError("Cannot convert a Symbol value to a string");
return br(a)};var Td={},Oh={};Oh=Object.keys||function(a){return wj(a,Kh)};var Fm=mc&&!pj?Object.defineProperties:function(a,c){Uc(a);var d,b=Wd(c);c=Oh(c);for(var f=c.length,k=0;f>k;)Jd(a,d=c[k++],b[d]);return a};var Ph={};Ph=kd("document","documentElement");var Gm=Bg("IE_PROTO"),Cj=function(){},Hm=function(a){a.write("<script>\x3c/script>");a.close();return a.parentWindow.Object},Qh=function(){try{yh=new ActiveXObject("htmlfile")}catch(d){}var a;if("undefined"!=typeof document){if(document.domain&&
yh)var c=Hm(yh);else c=Wf("iframe"),c=(c.style.display="none",Ph.appendChild(c),c.src="javascript:",(a=c.contentWindow.document).open(),a.write("<script>document.F=Object\x3c/script>"),a.close(),a.F);a=c}else a=Hm(yh);Qh=a;for(a=Kh.length;a--;)delete Qh.prototype[Kh[a]];return Qh()};uf[Gm]=!0;Td=Object.create||function(a,c){var d;return null!==a?(Cj.prototype=Uc(a),d=new Cj,Cj.prototype=null,d[Gm]=a):d=Qh(),void 0===c?d:Fm(d,c)};var Im=Cg,Jm={},cr=Array,dr=Math.max;Jm=function(a,c,d){var b=vf(a);
c=Yf(c,b);d=Yf(void 0===d?b:d,b);b=cr(dr(d-c,0));for(var f=0;c<d;c++,f++)Mh(b,f,a[c]);return b.length=f,b};var Km="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var Dj=function(a){if(Km&&"Window"===zd(a))try{var c=Im(a)}catch(d){c=Jm(Km)}else c=Im(Wd(a));return c};var $f={};$f=function(a,c,d){return d.get&&Eh(d.get,c,{getter:!0}),d.set&&Eh(d.set,c,{setter:!0}),Jd(a,c,d)};var Lm=zc;var rd={},wf={};wf=Ua;var er=Jd;rd=function(a){var c=wf.Symbol||(wf.Symbol=
{});qb(c,a)||er(c,a,{value:Lm(a)})};var Ej={};Ej=function(){var a=kd("Symbol"),c=(a=a&&a.prototype)&&a.valueOf,d=zc("toPrimitive");a&&!a[d]&&Qc(a,d,function(b){return uc(c,this)},{arity:1})};var ke={},fr=Jd,Mm=zc("toStringTag");ke=function(a,c,d){a&&!d&&(a=a.prototype);a&&!qb(a,Mm)&&fr(a,Mm,{configurable:!0,value:c})};var xf={},Rh={},gr=(Rh=function(a){if("Function"===zd(a))return Vb(a)})(Rh.bind);xf=function(a,c){return Sd(a),void 0===c?a:Uf?gr(a,c):function(){return a.apply(c,arguments)}};var Nm=
Vb([].push),Te=function(a){var c=1===a,d=2===a,b=3===a,f=4===a,k=6===a,l=7===a,h=5===a||k;return function(e,g,p,m){var n,r,u=sf(e),w=gj(u);g=xf(g,p);p=vf(w);var z=0;m=m||zj;for(e=c?m(e,p):d||l?m(e,0):void 0;p>z;z++)if((h||z in w)&&(r=g(n=w[z],z,u),a))if(c)e[z]=r;else if(r)switch(a){case 3:return!0;case 5:return n;case 6:return z;case 2:Nm(e,n)}else switch(a){case 4:return!1;case 7:Nm(e,n)}return k?-1:b||f?f:e}},Sh={forEach:Te(0),map:Te(1),filter:Te(2),some:Te(3),every:Te(4),find:Te(5),findIndex:Te(6),
filterReject:Te(7)}.forEach,Bd=Bg("hidden"),hr=Ad.set,Om=Ad.getterFor("Symbol"),Ud=Object.prototype,ag=Ua.Symbol,Gg=ag&&ag.prototype,ir=Ua.RangeError,jr=Ua.TypeError,Fj=Ua.QObject,Pm=Pf,yf=Jd,Qm=Dj,kr=fj,Rm=Vb([].push),Be=ye("symbols"),Hg=ye("op-symbols"),lr=ye("wks"),Gj=!Fj||!Fj.prototype||!Fj.prototype.findChild,Sm=function(a,c,d){var b=Pm(Ud,c);b&&delete Ud[c];yf(a,c,d);b&&a!==Ud&&yf(Ud,c,b)},Hj=mc&&nc(function(){return 7!==Td(yf({},"a",{get:function(){return yf(this,"a",{value:7}).a}})).a})?Sm:
yf,Ij=function(a,c){var d=Be[a]=Td(Gg);return hr(d,{type:"Symbol",tag:a,description:c}),mc||(d.description=c),d},Th=function(a,c,d){a===Ud&&Th(Hg,c,d);Uc(a);c=Re(c);return(Uc(d),qb(Be,c))?(d.enumerable?(qb(a,Bd)&&a[Bd][c]&&(a[Bd][c]=!1),d=Td(d,{enumerable:Rd(0,!1)})):(qb(a,Bd)||yf(a,Bd,Rd(1,{})),a[Bd][c]=!0),Hj(a,c,d)):yf(a,c,d)},Kj=function(a,c){Uc(a);var d=Wd(c);return Sh(Oh(d).concat(Tm(d)),function(b){mc&&!uc(Jj,d,b)||Th(a,b,d[b])}),a},Jj=function(a){a=Re(a);var c=uc(kr,this,a);return(!(this===
Ud&&qb(Be,a))||!!qb(Hg,a))&&(!(c||!qb(this,a)||!qb(Be,a)||qb(this,Bd)&&this[Bd][a])||c)},Um=function(a,c){a=Wd(a);c=Re(c);if(a!==Ud||!qb(Be,c)||qb(Hg,c)){var d=Pm(a,c);return d&&qb(Be,c)&&!(qb(a,Bd)&&a[Bd][c])&&(d.enumerable=!0),d}},Vm=function(a){a=Qm(Wd(a));var c=[];return Sh(a,function(d){qb(Be,d)||qb(uf,d)||Rm(c,d)}),c},Tm=function(a){var c=a===Ud;a=Qm(c?Hg:Wd(a));var d=[];return Sh(a,function(b){qb(Be,b)&&(!c||qb(Ud,b))&&Rm(d,Be[b])}),d};Xd||(Gg=(ag=function(){if(xe(Gg,this))throw new jr("Symbol is not a constructor");
var a=arguments.length&&void 0!==arguments[0]?je(arguments[0]):void 0,c=tf(a),d=function(b){var f=void 0===this?Ua:this;f===Ud&&uc(d,Hg,b);qb(f,Bd)&&qb(f[Bd],c)&&(f[Bd][c]=!1);b=Rd(1,b);try{Hj(f,c,b)}catch(k){if(!(k instanceof ir))throw k;Sm(f,c,b)}};return mc&&Gj&&Hj(Ud,c,{configurable:!0,set:d}),Ij(c,a)}).prototype,Qc(Gg,"toString",function(){return Om(this).tag}),Qc(ag,"withoutSetter",function(a){return Ij(tf(a),a)}),fj=Jj,Jd=Th,Fm=Kj,Pf=Um,Cg=Dj=Vm,Lh=Tm,Lm=function(a){return Ij(zc(a),a)},mc&&
($f(Gg,"description",{configurable:!0,get:function(){return Om(this).description}}),ld||Qc(Ud,"propertyIsEnumerable",Jj,{unsafe:!0})));tc({global:!0,constructor:!0,wrap:!0,forced:!Xd,sham:!Xd},{Symbol:ag});Sh(Oh(lr),function(a){rd(a)});tc({target:"Symbol",stat:!0,forced:!Xd},{useSetter:function(){Gj=!0},useSimple:function(){Gj=!1}});tc({target:"Object",stat:!0,forced:!Xd,sham:!mc},{create:function(a,c){return void 0===c?Td(a):Kj(Td(a),c)},defineProperty:Th,defineProperties:Kj,getOwnPropertyDescriptor:Um});
tc({target:"Object",stat:!0,forced:!Xd},{getOwnPropertyNames:Vm});Ej();ke(ag,"Symbol");uf[Bd]=!0;var Lj={};Lj=Xd&&!!Symbol.for&&!!Symbol.keyFor;var Mj=ye("string-to-symbol-registry"),mr=ye("symbol-to-string-registry");tc({target:"Symbol",stat:!0,forced:!Lj},{for:function(a){a=je(a);if(qb(Mj,a))return Mj[a];var c=kd("Symbol")(a);return Mj[a]=c,mr[c]=a,c}});var Wm=ye("symbol-to-string-registry");tc({target:"Symbol",stat:!0,forced:!Lj},{keyFor:function(a){if(!pf(a))throw TypeError(rf(a)+" is not a symbol");
if(qb(Wm,a))return Wm[a]}});var Uh={},Xm=Function.prototype,Ym=Xm.apply,Zm=Xm.call;Uh="object"==typeof Reflect&&Reflect.apply||(Uf?Zm.bind(Ym):function(){return Zm.apply(Ym,arguments)});var Ig={};Ig=Vb([].slice);var $m={},an=Vb([].push);$m=function(a){if(Nb(a))return a;if(Zf(a)){for(var c=a.length,d=[],b=0;b<c;b++){var f=a[b];"string"==typeof f?an(d,f):("number"==typeof f||"Number"===zd(f)||"String"===zd(f))&&an(d,je(f))}var k=d.length,l=!0;return function(h,e){if(l)return l=!1,e;if(Zf(this))return e;
for(var g=0;g<k;g++)if(d[g]===h)return e}}};var nr=String,Ue=kd("JSON","stringify"),Vh=Vb(/./.exec),bn=Vb("".charAt),or=Vb("".charCodeAt),pr=Vb("".replace),qr=Vb((1).toString),rr=/[\uD800-\uDFFF]/g,cn=/^[\uD800-\uDBFF]$/,dn=/^[\uDC00-\uDFFF]$/,en=!Xd||nc(function(){var a=kd("Symbol")("stringify detection");return"[null]"!==Ue([a])||"{}"!==Ue({a})||"{}"!==Ue(Object(a))}),fn=nc(function(){return'"\udf06\ud834"'!==Ue("\udf06\ud834")||'"\udead"'!==Ue("\udead")}),sr=function(a,c){var d=Ig(arguments),b=
$m(c);if(Nb(b)||void 0!==a&&!pf(a))return d[1]=function(f,k){if(Nb(b)&&(k=uc(b,this,nr(f),k)),!pf(k))return k},Uh(Ue,null,d)},tr=function(a,c,d){var b=bn(d,c-1);c=bn(d,c+1);return Vh(cn,a)&&!Vh(dn,c)||Vh(dn,a)&&!Vh(cn,b)?"\\u"+qr(or(a,0),16):a};Ue&&tc({target:"JSON",stat:!0,arity:3,forced:en||fn},{stringify:function(a,c,d){var b=Ig(arguments);b=Uh(en?sr:Ue,null,b);return fn&&"string"==typeof b?pr(b,rr,tr):b}});var ur=!Xd||nc(function(){Lh(1)});tc({target:"Object",stat:!0,forced:ur},{getOwnPropertySymbols:function(a){var c=
Lh;return c?c(sf(a)):[]}});rd("asyncIterator");var Ce=Ua.Symbol,zf=Ce&&Ce.prototype;if(mc&&Nb(Ce)&&(!("description"in zf)||void 0!==Ce().description)){var gn={},Wh=function(){var a=1>arguments.length||void 0===arguments[0]?void 0:je(arguments[0]),c=xe(zf,this)?new Ce(a):void 0===a?Ce():Ce(a);return""===a&&(gn[c]=!0),c};Ih(Wh,Ce);Wh.prototype=zf;zf.constructor=Wh;var vr="Symbol(description detection)"===String(Ce("description detection")),wr=Vb(zf.valueOf),xr=Vb(zf.toString),yr=/^Symbol\((.*)\)[^)]+$/,
zr=Vb("".replace),Ar=Vb("".slice);$f(zf,"description",{configurable:!0,get:function(){var a=wr(this);if(qb(gn,a))return"";a=xr(a);a=vr?Ar(a,7,-1):zr(a,yr,"$1");return""===a?void 0:a}});tc({global:!0,constructor:!0,forced:!0},{Symbol:Wh})}rd("hasInstance");rd("isConcatSpreadable");rd("iterator");rd("match");rd("matchAll");rd("replace");rd("search");rd("species");rd("split");rd("toPrimitive");Ej();rd("toStringTag");ke(kd("Symbol"),"Symbol");rd("unscopables");ke(Ua.JSON,"JSON",!0);ke(Math,"Math",!0);
tc({global:!0},{Reflect:{}});ke(Ua.Reflect,"Reflect",!0);wf.Symbol;var Nj={};Nj={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,
StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};var hn={},Oj=Wf("span").classList,jn=Oj&&Oj.constructor&&Oj.constructor.prototype;hn=jn===Object.prototype?void 0:jn;var bg={},Jg={},Br=Jd,Pj=zc("unscopables"),Qj=Array.prototype;void 0===Qj[Pj]&&Br(Qj,Pj,{configurable:!0,value:Td(null)});Jg=function(a){Qj[Pj][a]=!0};var Ve={};Ve={};var Cr=Jd,Xh={},kn={},Rj={},le={},ln={};ln=!nc(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype});
var mn=Bg("IE_PROTO"),Sj=Object,Dr=Sj.prototype;le=ln?Sj.getPrototypeOf:function(a){a=sf(a);if(qb(a,mn))return a[mn];var c=a.constructor;return Nb(c)&&a instanceof c?c.prototype:a instanceof Sj?Dr:null};var Tj=zc("iterator"),nn=!1;[].keys&&("next"in(Yl=[].keys())?(Xl=le(le(Yl)))!==Object.prototype&&(we=Xl):nn=!0);!vc(we)||nc(function(){var a={};return we[Tj].call(a)!==a})?we={}:ld&&(we=Td(we));Nb(we[Tj])||Qc(we,Tj,function(){return this});var Er=(Rj={IteratorPrototype:we,BUGGY_SAFARI_ITERATORS:nn}).IteratorPrototype,
Fr=function(){return this};kn=function(a,c,d,b){c+=" Iterator";return a.prototype=Td(Er,{next:Rd(+!b,d)}),ke(a,c,!1,!0),Ve[c]=Fr,a};var ed={},on={};on=function(a,c,d){try{return Vb(Sd(Object.getOwnPropertyDescriptor(a,c)[d]))}catch(b){}};var pn={},Gr=String,Hr=TypeError;pn=function(a){if("object"==typeof a||Nb(a))return a;throw new Hr("Can't set "+Gr(a)+" as a prototype");};ed=Object.setPrototypeOf||("__proto__"in{}?function(){var a,c=!1,d={};try{(a=on(Object.prototype,"__proto__","set"))(d,[]),c=
d instanceof Array}catch(b){}return function(b,f){return Uc(b),pn(f),c?a(b,f):b.__proto__=f,b}}():void 0);var Ir=rj.PROPER,Jr=rj.CONFIGURABLE,qn=Rj.IteratorPrototype,Yh=Rj.BUGGY_SAFARI_ITERATORS,Kg=zc("iterator"),rn=function(){return this};Xh=function(a,c,d,b,f,k,l){kn(d,c,b);var h,e,g;b=function(z){if(z===f&&u)return u;if(!Yh&&z&&z in n)return n[z];switch(z){case "keys":case "values":case "entries":return function(){return new d(this,z)}}return function(){return new d(this)}};var p=c+" Iterator",
m=!1,n=a.prototype,r=n[Kg]||n["@@iterator"]||f&&n[f],u=!Yh&&r||b(f),w="Array"===c&&n.entries||r;if(w&&(h=le(w.call(new a)))!==Object.prototype&&h.next&&(ld||le(h)===qn||(ed?ed(h,qn):Nb(h[Kg])||Qc(h,Kg,rn)),ke(h,p,!0,!0),ld&&(Ve[p]=rn)),Ir&&"values"===f&&r&&"values"!==r.name&&(!ld&&Jr?Id(n,"name","values"):(m=!0,u=function(){return uc(r,this)})),f)if(e={values:b("values"),keys:k?u:b("keys"),entries:b("entries")},l)for(g in e)!Yh&&!m&&g in n||Qc(n,g,e[g]);else tc({target:c,proto:!0,forced:Yh||m},e);
return(!ld||l)&&n[Kg]!==u&&Qc(n,Kg,u,{name:f}),Ve[c]=u,e};var Yd={};Yd=function(a,c){return{value:a,done:c}};var Kr=Ad.set,Lr=Ad.getterFor("Array Iterator");bg=Xh(Array,"Array",function(a,c){Kr(this,{type:"Array Iterator",target:Wd(a),index:0,kind:c})},function(){var a=Lr(this),c=a.target,d=a.index++;if(!c||d>=c.length)return a.target=void 0,Yd(void 0,!0);switch(a.kind){case "keys":return Yd(d,!1);case "values":return Yd(c[d],!1)}return Yd([d,c[d]],!1)},"values");var sn=Ve.Arguments=Ve.Array;if(Jg("keys"),
Jg("values"),Jg("entries"),!ld&&mc&&"values"!==sn.name)try{Cr(sn,"name",{value:"values"})}catch(a){}var Uj=zc("iterator"),tn=zc("toStringTag"),Vj=bg.values,un=function(a,c){if(a){if(a[Uj]!==Vj)try{Id(a,Uj,Vj)}catch(b){a[Uj]=Vj}if(a[tn]||Id(a,tn,c),Nj[c])for(var d in bg)if(a[d]!==bg[d])try{Id(a,d,bg[d])}catch(b){a[d]=bg[d]}}},Zh;for(Zh in Nj)un(Ua[Zh]&&Ua[Zh].prototype,Zh);un(hn,"DOMTokenList");var vn={};vn=function(a,c){vc(c)&&"cause"in c&&Id(a,"cause",c.cause)};var wn={},xn={},yn=Error,Mr=Vb("".replace),
Nr=String((new yn("zxcasd")).stack),zn=/\n\s*at [^:]*:[^\n]*/,Or=zn.test(Nr);xn=function(a,c){if(Or&&"string"==typeof a&&!yn.prepareStackTrace)for(;c--;)a=Mr(a,zn,"");return a};var An={};An=!nc(function(){var a=Error("a");return!("stack"in a)||(Object.defineProperty(a,"stack",Rd(1,7)),7!==a.stack)});var Bn=Error.captureStackTrace;wn=function(a,c,d,b){An&&(Bn?Bn(a,c):Id(a,"stack",xn(d,b)))};var We={},Cn={},Pr=zc("iterator"),Qr=Array.prototype;Cn=function(a){return void 0!==a&&(Ve.Array===a||Qr[Pr]===
a)};var Dn={},Wj={},Rr=zc("iterator");Wj=function(a){if(!of(a))return Ag(a,Rr)||Ag(a,"@@iterator")||Ve[Ae(a)]};var Sr=TypeError;Dn=function(a,c){var d=2>arguments.length?Wj(a):c;if(Sd(d))return Uc(uc(d,a));throw new Sr(rf(a)+" is not iterable");};var Xj={};Xj=function(a,c,d){var b;Uc(a);try{if(!(b=Ag(a,"return"))){if("throw"===c)throw d;return d}b=uc(b,a)}catch(k){var f=!0;b=k}if("throw"===c)throw d;if(f)throw b;return Uc(b),d};var Tr=TypeError,$h=function(a,c){this.stopped=a;this.result=c},En=$h.prototype;
We=function(a,c,d){var b,f=!(!d||!d.AS_ENTRIES);var k=!(!d||!d.IS_RECORD);var l=!(!d||!d.IS_ITERATOR);var h=!(!d||!d.INTERRUPTED),e=xf(c,d&&d.that),g=function(m){return p&&Xj(p,"normal",m),new $h(!0,m)};c=function(m){return f?(Uc(m),h?e(m[0],m[1],g):e(m[0],m[1])):h?e(m,g):e(m)};if(k)var p=a.iterator;else if(l)p=a;else{if(!(l=Wj(a)))throw new Tr(rf(a)+" is not iterable");if(Cn(l)){k=0;for(l=vf(a);l>k;k++)if((b=c(a[k]))&&xe(En,b))return b;return new $h(!1)}p=Dn(a,l)}for(a=k?a.next:p.next;!(k=uc(a,p)).done;){try{b=
c(k.value)}catch(m){Xj(p,"throw",m)}if("object"==typeof b&&b&&xe(En,b))return b}return new $h(!1)};var Fn={};Fn=function(a,c){return void 0===a?2>arguments.length?"":c:je(a)};var Ur=zc("toStringTag"),ai=Error,Vr=[].push,cg=function(a,c){var d,b=xe(Yj,this);ed?d=ed(new ai,b?le(this):Yj):(d=b?this:Td(Yj),Id(d,Ur,"Error"));void 0!==c&&Id(d,"message",Fn(c));wn(d,cg,d.stack,1);2<arguments.length&&vn(d,arguments[2]);b=[];return We(a,Vr,{that:b}),Id(d,"errors",b),d};ed?ed(cg,ai):Ih(cg,ai,{name:!0});var Yj=
cg.prototype=Td(ai.prototype,{constructor:Rd(1,cg),message:Rd(1,""),name:Rd(1,"AggregateError")});tc({global:!0,constructor:!0,arity:2},{AggregateError:cg});var me={};me="process"===zd(Ua.process);var Zj={},Gn=zc("species");Zj=function(a){a=kd(a);mc&&a&&!a[Gn]&&$f(a,Gn,{configurable:!0,get:function(){return this}})};var bi={},Wr=TypeError;bi=function(a,c){if(xe(c,a))return a;throw new Wr("Incorrect invocation");};var ci={},Hn={},Xr=TypeError;Hn=function(a){if(Aj(a))return a;throw new Xr(rf(a)+" is not a constructor");
};var Yr=zc("species");ci=function(a,c){var d;a=Uc(a).constructor;return void 0===a||of(d=Uc(a)[Yr])?c:Hn(d)};var In={},Jn={},Zr=TypeError;Jn=function(a,c){if(a<c)throw new Zr("Not enough arguments");return a};var ak={};ak=/(?:ipad|iphone|ipod).*applewebkit/i.test(qf);var bk=Ua.setImmediate,ck=Ua.clearImmediate,$r=Ua.process,dk=Ua.Dispatch,as=Ua.Function,Kn=Ua.MessageChannel,bs=Ua.String,ek=0,Lg={};nc(function(){yg=Ua.location});var fk=function(a){if(qb(Lg,a)){var c=Lg[a];delete Lg[a];c()}},gk=function(a){return function(){fk(a)}},
Ln=function(a){fk(a.data)},Mn=function(a){Ua.postMessage(bs(a),yg.protocol+"//"+yg.host)};bk&&ck||(bk=function(a){Jn(arguments.length,1);var c=Nb(a)?a:as(a),d=Ig(arguments,1);return Lg[++ek]=function(){Uh(c,void 0,d)},Qf(ek),ek},ck=function(a){delete Lg[a]},me?Qf=function(a){$r.nextTick(gk(a))}:dk&&dk.now?Qf=function(a){dk.now(gk(a))}:Kn&&!ak?(Zi=(Zl=new Kn).port2,Zl.port1.onmessage=Ln,Qf=xf(Zi.postMessage,Zi)):Ua.addEventListener&&Nb(Ua.postMessage)&&!Ua.importScripts&&yg&&"file:"!==yg.protocol&&
!nc(Mn)?(Qf=Mn,Ua.addEventListener("message",Ln,!1)):Qf="onreadystatechange"in Wf("script")?function(a){Ph.appendChild(Wf("script")).onreadystatechange=function(){Ph.removeChild(this);fk(a)}}:function(a){setTimeout(gk(a),0)});var Nn=(In={set:bk,clear:ck}).set,di={},cs=Pf,hk=In.set,ik={},On=function(){this.tail=this.head=null};On.prototype={add:function(a){a={item:a,next:null};var c=this.tail;c?c.next=a:this.head=a;this.tail=a},get:function(){var a=this.head;if(a)return null===(this.head=a.next)&&
(this.tail=null),a.item}};ik=On;var Pn={};Pn=/ipad|iphone|ipod/i.test(qf)&&"undefined"!=typeof Pebble;var Qn={};Qn=/web0s(?!.*chrome)/i.test(qf);var Rn=Ua.MutationObserver||Ua.WebKitMutationObserver,Sn=Ua.document,Tn=Ua.process,ei=Ua.Promise,Un=cs(Ua,"queueMicrotask"),jk=Un&&Un.value;if(!jk){var fi=new ik,gi=function(){var a,c;for(me&&(a=Tn.domain)&&a.exit();c=fi.get();)try{c()}catch(d){throw fi.head&&Rf(),d;}a&&a.enter()};ak||me||Qn||!Rn||!Sn?!Pn&&ei&&ei.resolve?((bj=ei.resolve(void 0)).constructor=
ei,$l=xf(bj.then,bj),Rf=function(){$l(gi)}):me?Rf=function(){Tn.nextTick(gi)}:(hk=xf(hk,Ua),Rf=function(){hk(gi)}):($i=!0,aj=Sn.createTextNode(""),(new Rn(gi)).observe(aj,{characterData:!0}),Rf=function(){aj.data=$i=!$i});jk=function(a){fi.head||Rf();fi.add(a)}}di=jk;var Vn={};Vn=function(a,c){try{1==arguments.length?console.error(a):console.error(a,c)}catch(d){}};var dg={};dg=function(a){try{return{error:!1,value:a()}}catch(c){return{error:!0,value:c}}};var Vc={};Vc=Ua.Promise;var Wn={},Xn={};Wn=
!(Xn="object"==typeof Deno&&Deno&&"object"==typeof Deno.version)&&!me&&"object"==typeof window&&"object"==typeof document;var Yn=Vc&&Vc.prototype,ds=zc("species"),Zn=!1,$n=Nb(Ua.PromiseRejectionEvent);var Af=Dg("Promise",function(){var a=Fh(Vc),c=a!==String(Vc);if(!c&&66===Se||ld&&(!Yn.catch||!Yn.finally))return!0;if(!Se||51>Se||!/native code/.test(a)){a=new Vc(function(b){b(1)});var d=function(b){b(function(){},function(){})};if((a.constructor={})[ds]=d,!(Zn=a.then(function(){})instanceof d))return!0}return!c&&
(Wn||Xn)&&!$n});var es=Zn;var fs=TypeError,gs=function(a){var c,d;this.promise=new a(function(b,f){if(void 0!==c||void 0!==d)throw new fs("Bad Promise constructor");c=b;d=f});this.resolve=Sd(c);this.reject=Sd(d)};var Xe=function(a){return new gs(a)};var kk=Ad.getterFor("Promise"),hs=Ad.set,eg=Vc&&Vc.prototype,fg=Vc,hi=eg,ao=Ua.TypeError,lk=Ua.document,mk=Ua.process,nk=Xe,is=nk,js=!!(lk&&lk.createEvent&&Ua.dispatchEvent),bo=function(a){var c;return!(!vc(a)||!Nb(c=a.then))&&c},co=function(a,c){var d,
b,f,k=c.value,l=1===c.state,h=l?a.ok:a.fail,e=a.resolve,g=a.reject,p=a.domain;try{h?(l||(2===c.rejection&&ks(c),c.rejection=1),!0===h?d=k:(p&&p.enter(),d=h(k),p&&(p.exit(),f=!0)),d===a.promise?g(new ao("Promise-chain cycle")):(b=bo(d))?uc(b,d,e,g):e(d)):g(k)}catch(m){p&&!f&&p.exit(),g(m)}},eo=function(a,c){a.notified||(a.notified=!0,di(function(){for(var d,b=a.reactions;d=b.get();)co(d,a);a.notified=!1;c&&!a.rejection&&ls(a)}))},fo=function(a,c,d){var b,f;js?((b=lk.createEvent("Event")).promise=c,
b.reason=d,b.initEvent(a,!1,!0),Ua.dispatchEvent(b)):b={promise:c,reason:d};!$n&&(f=Ua["on"+a])?f(b):"unhandledrejection"===a&&Vn("Unhandled promise rejection",d)},ls=function(a){uc(Nn,Ua,function(){var c,d=a.facade,b=a.value;if(1!==a.rejection&&!a.parent&&(c=dg(function(){me?mk.emit("unhandledRejection",b,d):fo("unhandledrejection",d,b)}),a.rejection=me||1!==a.rejection&&!a.parent?2:1,c.error))throw c.value;})},ks=function(a){uc(Nn,Ua,function(){var c=a.facade;me?mk.emit("rejectionHandled",c):fo("rejectionhandled",
c,a.value)})},gg=function(a,c,d){return function(b){a(c,b,d)}},hg=function(a,c,d){a.done||(a.done=!0,d&&(a=d),a.value=c,a.state=2,eo(a,!0))},ok=function(a,c,d){if(!a.done){a.done=!0;d&&(a=d);try{if(a.facade===c)throw new ao("Promise can't be resolved itself");var b=bo(c);b?di(function(){var f={done:!1};try{uc(b,c,gg(ok,f,a),gg(hg,f,a))}catch(k){hg(f,k,a)}}):(a.value=c,a.state=1,eo(a,!1))}catch(f){hg({done:!1},f,a)}}};if(Af&&(hi=(fg=function(a){bi(this,hi);Sd(a);uc(cj,this);var c=kk(this);try{a(gg(ok,
c),gg(hg,c))}catch(d){hg(c,d)}}).prototype,(cj=function(a){hs(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new ik,rejection:!1,state:0,value:void 0})}).prototype=Qc(hi,"then",function(a,c){var d=kk(this),b=nk(ci(this,fg));return d.parent=!0,b.ok=!Nb(a)||a,b.fail=Nb(c)&&c,b.domain=me?mk.domain:void 0,0===d.state?d.reactions.add(b):di(function(){co(b,d)}),b.promise}),am=function(){var a=new cj,c=kk(a);this.promise=a;this.resolve=gg(ok,c);this.reject=gg(hg,c)},Xe=nk=function(a){return a===
fg||void 0===a?new am(a):is(a)},!ld&&Nb(Vc)&&eg!==Object.prototype)){var ms=eg.then;es||Qc(eg,"then",function(a,c){var d=this;return(new fg(function(b,f){uc(ms,d,b,f)})).then(a,c)},{unsafe:!0});try{delete eg.constructor}catch(a){}ed&&ed(eg,hi)}tc({global:!0,constructor:!0,wrap:!0,forced:Af},{Promise:fg});ke(fg,"Promise",!1,!0);Zj("Promise");var Mg={},pk={},go=zc("iterator"),ho=!1;try{var ns=0,io={next:function(){return{done:!!ns++}},return:function(){ho=!0}};io[go]=function(){return this};Array.from(io,
function(){throw 2;})}catch(a){}pk=function(a,c){if(!c&&!ho)return!1;var d=!1;try{c={},c[go]=function(){return{next:function(){return{done:d=!0}}}},a(c)}catch(b){}return d};Mg=Af||!pk(function(a){Vc.all(a).then(void 0,function(){})});tc({target:"Promise",stat:!0,forced:Mg},{all:function(a){var c=this,d=Xe(c),b=d.resolve,f=d.reject,k=dg(function(){var l=Sd(c.resolve),h=[],e=0,g=1;We(a,function(p){var m=e++,n=!1;g++;uc(l,c,p).then(function(r){!n&&(n=!0,h[m]=r,--g||b(h))},f)});--g||b(h)});return k.error&&
f(k.value),d.promise}});var jo=Vc&&Vc.prototype;if(tc({target:"Promise",proto:!0,forced:Af,real:!0},{catch:function(a){return this.then(void 0,a)}}),!ld&&Nb(Vc)){var ko=kd("Promise").prototype.catch;jo.catch!==ko&&Qc(jo,"catch",ko,{unsafe:!0})}tc({target:"Promise",stat:!0,forced:Mg},{race:function(a){var c=this,d=Xe(c),b=d.reject,f=dg(function(){var k=Sd(c.resolve);We(a,function(l){uc(k,c,l).then(d.resolve,b)})});return f.error&&b(f.value),d.promise}});tc({target:"Promise",stat:!0,forced:Af},{reject:function(a){var c=
Xe(this);return uc(c.reject,void 0,a),c.promise}});var ii={};ii=function(a,c){if(Uc(a),vc(c)&&c.constructor===a)return c;a=Xe(a);return(0,a.resolve)(c),a.promise};var os=kd("Promise"),ps=ld&&!Af;tc({target:"Promise",stat:!0,forced:ld||Af},{resolve:function(a){return ii(ps&&this===os?Vc:this,a)}});tc({target:"Promise",stat:!0,forced:Mg},{allSettled:function(a){var c=this,d=Xe(c),b=d.resolve,f=d.reject,k=dg(function(){var l=Sd(c.resolve),h=[],e=0,g=1;We(a,function(p){var m=e++,n=!1;g++;uc(l,c,p).then(function(r){!n&&
(n=!0,h[m]={status:"fulfilled",value:r},--g||b(h))},function(r){!n&&(n=!0,h[m]={status:"rejected",reason:r},--g||b(h))})});--g||b(h)});return k.error&&f(k.value),d.promise}});tc({target:"Promise",stat:!0,forced:Mg},{any:function(a){var c=this,d=kd("AggregateError"),b=Xe(c),f=b.resolve,k=b.reject,l=dg(function(){var h=Sd(c.resolve),e=[],g=0,p=1,m=!1;We(a,function(n){var r=g++,u=!1;p++;uc(h,c,n).then(function(w){u||m||(m=!0,f(w))},function(w){!u&&!m&&(u=!0,e[r]=w,--p||k(new d(e,"No one promise resolved")))})});
--p||k(new d(e,"No one promise resolved"))});return l.error&&k(l.value),b.promise}});var qk=Vc&&Vc.prototype,qs=!!Vc&&nc(function(){qk.finally.call({then:function(){}},function(){})});if(tc({target:"Promise",proto:!0,real:!0,forced:qs},{finally:function(a){var c=ci(this,kd("Promise")),d=Nb(a);return this.then(d?function(b){return ii(c,a()).then(function(){return b})}:a,d?function(b){return ii(c,a()).then(function(){throw b;})}:a)}}),!ld&&Nb(Vc)){var lo=kd("Promise").prototype.finally;qk.finally!==
lo&&Qc(qk,"finally",lo,{unsafe:!0})}var rs=Vb("".charAt),mo=Vb("".charCodeAt),ss=Vb("".slice),no=function(a){return function(c,d){var b,f;c=je(zg(c));d=Jh(d);var k=c.length;return 0>d||d>=k?a?"":void 0:55296>(b=mo(c,d))||56319<b||d+1===k||56320>(f=mo(c,d+1))||57343<f?a?rs(c,d):b:a?ss(c,d,d+2):(b-55296<<10)+(f-56320)+65536}},ts={codeAt:no(!1),charAt:no(!0)}.charAt,us=Ad.set,vs=Ad.getterFor("String Iterator");Xh(String,"String",function(a){us(this,{type:"String Iterator",string:je(a),index:0})},function(){var a,
c=vs(this),d=c.string,b=c.index;return b>=d.length?Yd(void 0,!0):(a=ts(d,b),c.index+=a.length,Yd(a,!1))});wf.Promise;var rk={},sk={},ws=Jd,ji={},tk={};tk=nc(function(){if("function"==typeof ArrayBuffer){var a=new ArrayBuffer(8);Object.isExtensible(a)&&Object.defineProperty(a,"a",{value:8})}});var ki=Object.isExtensible;ji=nc(function(){ki(1)})||tk?function(a){return!!vc(a)&&(!tk||"ArrayBuffer"!==zd(a))&&(!ki||ki(a))}:ki;var oo={};oo=!nc(function(){return Object.isExtensible(Object.preventExtensions({}))});
var po=!1,De=tf("meta"),xs=0,uk=function(a){ws(a,De,{value:{objectID:"O"+xs++,weakData:{}}})},ys=sk={enable:function(){ys.enable=function(){};po=!0;var a=Cg,c=Vb([].splice),d={};d[De]=1;a(d).length&&(Cg=function(b){b=a(b);for(var f=0,k=b.length;f<k;f++)if(b[f]===De){c(b,f,1);break}return b},tc({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Dj}))},fastKey:function(a,c){if(!vc(a))return"symbol"==(void 0===a?"undefined":Vd(a))?a:("string"==typeof a?"S":"P")+a;if(!qb(a,De)){if(!ji(a))return"F";
if(!c)return"E";uk(a)}return a[De].objectID},getWeakData:function(a,c){if(!qb(a,De)){if(!ji(a))return!0;if(!c)return!1;uk(a)}return a[De].weakData},onFreeze:function(a){return oo&&po&&ji(a)&&!qb(a,De)&&uk(a),a}};uf[De]=!0;var qo={};qo=function(a,c,d){var b,f;return ed&&Nb(b=c.constructor)&&b!==d&&vc(f=b.prototype)&&f!==d.prototype&&ed(a,f),a};rk=function(a,c,d){var b=-1!==a.indexOf("Map"),f=-1!==a.indexOf("Weak"),k=b?"set":"add",l=Ua[a],h=l&&l.prototype,e=l,g={},p=function(z){var G=Vb(h[z]);Qc(h,
z,"add"===z?function(L){return G(this,0===L?0:L),this}:"delete"===z?function(L){return(!f||!!vc(L))&&G(this,0===L?0:L)}:"get"===z?function(L){return f&&!vc(L)?void 0:G(this,0===L?0:L)}:"has"===z?function(L){return(!f||!!vc(L))&&G(this,0===L?0:L)}:function(L,N){return G(this,0===L?0:L,N),this})};if(Dg(a,!Nb(l)||!(f||h.forEach&&!nc(function(){(new l).entries().next()}))))e=d.getConstructor(c,a,b,k),sk.enable();else if(Dg(a,!0)){var m=new e,n=m[k](f?{}:-0,1)!==m,r=nc(function(){m.has(1)}),u=pk(function(z){new l(z)}),
w=!f&&nc(function(){for(var z=new l,G=5;G--;)z[k](G,G);return!z.has(-0)});u||((e=c(function(z,G){bi(z,h);z=qo(new l,z,e);return of(G)||We(G,z[k],{that:z,AS_ENTRIES:b}),z})).prototype=h,h.constructor=e);(r||w)&&(p("delete"),p("has"),b&&p("get"));(w||n)&&p(k);f&&h.clear&&delete h.clear}return g[a]=e,tc({global:!0,constructor:!0,forced:e!==l},g),ke(e,a),f||d.setStrong(e,a,b),e};var ro={},vk={};vk=function(a,c,d){for(var b in c)Qc(a,b,c[b],d);return a};var so=sk.fastKey,to=Ad.set,wk=Ad.getterFor;rk("Map",
function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},ro={getConstructor:function(a,c,d,b){a=a(function(e,g){bi(e,f);to(e,{type:c,index:Td(null),first:void 0,last:void 0,size:0});mc||(e.size=0);of(g)||We(g,e[b],{that:e,AS_ENTRIES:d})});var f=a.prototype,k=wk(c),l=function(e,g,p){var m,n,r=k(e),u=h(e,g);return u?u.value=p:(r.last=u={index:n=so(g,!0),key:g,value:p,previous:m=r.last,next:void 0,removed:!1},r.first||(r.first=u),m&&(m.next=u),mc?r.size++:e.size++,"F"!==n&&
(r.index[n]=u)),e},h=function(e,g){e=k(e);var p=so(g);if("F"!==p)return e.index[p];for(e=e.first;e;e=e.next)if(e.key===g)return e};return vk(f,{clear:function(){for(var e=k(this),g=e.index,p=e.first;p;)p.removed=!0,p.previous&&(p.previous=p.previous.next=void 0),delete g[p.index],p=p.next;e.first=e.last=void 0;mc?e.size=0:this.size=0},delete:function(e){var g=k(this);if(e=h(this,e)){var p=e.next,m=e.previous;delete g.index[e.index];e.removed=!0;m&&(m.next=p);p&&(p.previous=m);g.first===e&&(g.first=
p);g.last===e&&(g.last=m);mc?g.size--:this.size--}return!!e},forEach:function(e){for(var g,p=k(this),m=xf(e,1<arguments.length?arguments[1]:void 0);g=g?g.next:p.first;)for(m(g.value,g.key,this);g&&g.removed;)g=g.previous},has:function(e){return!!h(this,e)}}),vk(f,d?{get:function(e){return(e=h(this,e))&&e.value},set:function(e,g){return l(this,0===e?0:e,g)}}:{add:function(e){return l(this,e=0===e?0:e,e)}}),mc&&$f(f,"size",{configurable:!0,get:function(){return k(this).size}}),a},setStrong:function(a,
c,d){var b=c+" Iterator",f=wk(c),k=wk(b);Xh(a,c,function(l,h){to(this,{type:b,target:l,state:f(l),kind:h,last:void 0})},function(){for(var l=k(this),h=l.kind,e=l.last;e&&e.removed;)e=e.previous;return l.target&&(l.last=e=e?e.next:l.state.first)?"keys"===h?Yd(e.key,!1):"values"===h?Yd(e.value,!1):Yd([e.key,e.value],!1):(l.target=void 0,Yd(void 0,!0))},d?"entries":"values",!d,!0);Zj(c)}});wf.Map;rk("Set",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},ro);wf.Set;
var ig={},uo={};uo="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView;var vo=Ad.enforce,zs=Ad.get,li=Ua.Int8Array,xk=li&&li.prototype,wo=Ua.Uint8ClampedArray,xo=wo&&wo.prototype,ne=li&&le(li),Zd=xk&&le(xk),As=Object.prototype,yk=Ua.TypeError,yo=zc("toStringTag"),zk=tf("TYPED_ARRAY_TAG"),Ee=uo&&!!ed&&"Opera"!==Ae(Ua.opera),zo=!1,Fe={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ak={BigInt64Array:8,BigUint64Array:8},
Ao=function(a){a=le(a);if(vc(a)){var c=zs(a);return c&&qb(c,"TypedArrayConstructor")?c.TypedArrayConstructor:Ao(a)}},Bo=function(a){if(!vc(a))return!1;a=Ae(a);return qb(Fe,a)||qb(Ak,a)};for(yd in Fe)(zh=(Sf=Ua[yd])&&Sf.prototype)?vo(zh).TypedArrayConstructor=Sf:Ee=!1;for(yd in Ak)(zh=(Sf=Ua[yd])&&Sf.prototype)&&(vo(zh).TypedArrayConstructor=Sf);if((!Ee||!Nb(ne)||ne===Function.prototype)&&(ne=function(){throw new yk("Incorrect invocation");},Ee))for(yd in Fe)Ua[yd]&&ed(Ua[yd],ne);if((!Ee||!Zd||Zd===
As)&&(Zd=ne.prototype,Ee))for(yd in Fe)Ua[yd]&&ed(Ua[yd].prototype,Zd);if(Ee&&le(xo)!==Zd&&ed(xo,Zd),mc&&!qb(Zd,yo))for(yd in zo=!0,$f(Zd,yo,{configurable:!0,get:function(){return vc(this)?this[zk]:void 0}}),Fe)Ua[yd]&&Id(Ua[yd],zk,yd);var Co={},Bs=(ig={NATIVE_ARRAY_BUFFER_VIEWS:Ee,TYPED_ARRAY_TAG:zo&&zk,aTypedArray:function(a){if(Bo(a))return a;throw new yk("Target is not a typed array");},aTypedArrayConstructor:function(a){if(Nb(a)&&(!ed||xe(ne,a)))return a;throw new yk(rf(a)+" is not a typed array constructor");
},exportTypedArrayMethod:function(a,c,d,b){if(mc){if(d)for(var f in Fe){var k=Ua[f];if(k&&qb(k.prototype,a))try{delete k.prototype[a]}catch(l){try{k.prototype[a]=c}catch(h){}}}Zd[a]&&!d||Qc(Zd,a,d?c:Ee&&xk[a]||c,b)}},exportTypedArrayStaticMethod:function(a,c,d){var b,f;if(mc){if(ed){if(d)for(b in Fe)if((f=Ua[b])&&qb(f,a))try{delete f[a]}catch(k){}if(ne[a]&&!d)return;try{return Qc(ne,a,d?c:Ee&&ne[a]||c)}catch(k){}}for(b in Fe)(f=Ua[b])&&(!f[a]||d)&&Qc(f,a,c)}},getTypedArrayConstructor:Ao,isView:function(a){if(!vc(a))return!1;
a=Ae(a);return"DataView"===a||qb(Fe,a)||qb(Ak,a)},isTypedArray:Bo,TypedArray:ne,TypedArrayPrototype:Zd}).aTypedArrayConstructor,Cs=ig.getTypedArrayConstructor;Co=function(a){return Bs(ci(a,Cs(a)))};var Ds=ig.aTypedArray;(0,ig.exportTypedArrayMethod)("slice",function(a,c){a=Ig(Ds(this),a,c);var d=Co(this);c=0;var b=a.length;for(d=new d(b);b>c;)d[c]=a[c++];return d},nc(function(){(new Int8Array(1)).slice()}));var Bk={};Bk=function(a){var c=sf(this),d=vf(c),b=arguments.length,f=Yf(1<b?arguments[1]:void 0,
d);b=2<b?arguments[2]:void 0;for(d=void 0===b?d:Yf(b,d);d>f;)c[f++]=a;return c};var Do={},Es=TypeError;Do=function(a){a=jj(a,"number");if("number"==typeof a)throw new Es("Can't convert number to bigint");return BigInt(a)};var Fs=ig.aTypedArray,Gs=ig.exportTypedArrayMethod,Hs=Vb("".slice);Gs("fill",function(a){var c=arguments.length;Fs(this);var d="Big"===Hs(Ae(this),0,3)?Do(a):+a;return uc(Bk,this,d,1<c?arguments[1]:void 0,2<c?arguments[2]:void 0)},nc(function(){var a=0;return(new Int8Array(2)).fill({valueOf:function(){return a++}}),
1!==a}));var Ck={};(Ck=function(a,c){return Vb(Ua[a].prototype[c])})("Array","values");tc({target:"Array",proto:!0},{fill:Bk});Jg("fill");Ck("Array","fill");var Is=Pf,Eo={},Fo={},Js=zc("match");Fo=function(a){var c;return vc(a)&&(void 0!==(c=a[Js])?!!c:"RegExp"===zd(a))};var Ks=TypeError;Eo=function(a){if(Fo(a))throw new Ks("The method doesn't accept regular expressions");return a};var Go={},Ls=zc("match");Go=function(a){var c=/./;try{"/./"[a](c)}catch(d){try{return c[Ls]=!1,"/./"[a](c)}catch(b){}}return!1};
var Ho=Rh("".endsWith),Ms=Rh("".slice),Ns=Math.min,Io=Go("endsWith"),Os=!ld&&!Io&&!(!(Wl=Is(String.prototype,"endsWith"))||Wl.writable);tc({target:"String",proto:!0,forced:!Os&&!Io},{endsWith:function(a){var c=je(zg(this));Eo(a);var d=1<arguments.length?arguments[1]:void 0,b=c.length;d=void 0===d?b:Ns(xj(d),b);b=je(a);return Ho?Ho(c,b,d):Ms(c,d-b.length,d)===b}});Ck("String","endsWith");var pa={};var Dk="undefined"!=typeof window?window:void 0;var Yk=function(a,c){function d(q,v,x){var C,F,K=(x=x||
lb).createElement("script");if(K.text=q,v)for(C in vb)(F=v[C]||v.getAttribute&&v.getAttribute(C))&&K.setAttribute(C,F);x.head.appendChild(K).parentNode.removeChild(K)}function b(q){return null==q?q+"":"object"==typeof q||"function"==typeof q?$c[$b.call(q)]||"object":void 0===q?"undefined":Vd(q)}function f(q){var v=!!q&&"length"in q&&q.length,x=b(q);return!(Ya(q)||Zc(q))&&("array"===x||0===v||"number"==typeof v&&0<v&&v-1 in q)}function k(q,v){return q.nodeName&&q.nodeName.toLowerCase()===v.toLowerCase()}
function l(q,v){return v?"\x00"===q?"\ufffd":q.slice(0,-1)+"\\"+q.charCodeAt(q.length-1).toString(16)+" ":"\\"+q}function h(q,v,x){return Ya(v)?A.grep(q,function(C,F){return!!v.call(C,F,C)!==x}):v.nodeType?A.grep(q,function(C){return C===v!==x}):"string"!=typeof v?A.grep(q,function(C){return-1<yb.call(v,C)!==x}):A.filter(v,q,x)}function e(q,v){for(;(q=q[v])&&1!==q.nodeType;);return q}function g(q){return q}function p(q){throw q;}function m(q,v,x,C){var F;try{q&&Ya(F=q.promise)?F.call(q).done(v).fail(x):
q&&Ya(F=q.then)?F.call(q,v,x):v.apply(void 0,[q].slice(C))}catch(K){x.apply(void 0,[K])}}function n(){lb.removeEventListener("DOMContentLoaded",n);a.removeEventListener("load",n);A.ready()}function r(q,v){return v.toUpperCase()}function u(q){return q.replace(Ba,"ms-").replace(Oa,r)}function w(){this.expando=A.expando+w.uid++}function z(q,v,x){var C;if(void 0===x&&1===q.nodeType)if(C="data-"+v.replace(jd,"-$&").toLowerCase(),"string"==typeof(x=q.getAttribute(C))){try{var F=x;x="true"===F||"false"!==
F&&("null"===F?null:F===+F+""?+F:Ec.test(F)?JSON.parse(F):F)}catch(K){}ub.set(q,v,x)}else x=void 0;return x}function G(q,v,x,C){var F,K,Q=20,U=C?function(){return C.cur()}:function(){return A.css(q,v,"")},Z=U(),na=x&&x[3]||(A.cssNumber[v]?"":"px"),Da=q.nodeType&&(A.cssNumber[v]||"px"!==na&&+Z)&&$a.exec(A.css(q,v));if(Da&&Da[3]!==na){Z/=2;na=na||Da[3];for(Da=+Z||1;Q--;)A.style(q,v,Da+na),0>=(1-K)*(1-(K=U()/Z||.5))&&(Q=0),Da/=K;Da*=2;A.style(q,v,Da+na);x=x||[]}return x&&(Da=+Da||+Z||0,F=x[1]?Da+(x[1]+
1)*x[2]:+x[2],C&&(C.unit=na,C.start=Da,C.end=F)),F}function L(q,v){for(var x,C,F=[],K=0,Q=q.length;K<Q;K++)if((C=q[K]).style)if(x=C.style.display,v){if("none"!==x||(F[K]=Ea.get(C,"display")||null,F[K]||(C.style.display="")),""===C.style.display&&Qd(C)){x=K;var U=void 0;var Z=C.ownerDocument;C=C.nodeName;var na=mi[C];Z=(na||(U=Z.body.appendChild(Z.createElement(C)),na=A.css(U,"display"),U.parentNode.removeChild(U),"none"===na&&(na="block"),mi[C]=na),na);F[x]=Z}}else"none"!==x&&(F[K]="none",Ea.set(C,
"display",x));for(K=0;K<Q;K++)null!=F[K]&&(q[K].style.display=F[K]);return q}function N(q,v){var x;return(x=void 0!==q.getElementsByTagName?q.getElementsByTagName(v||"*"):void 0!==q.querySelectorAll?q.querySelectorAll(v||"*"):[],void 0===v||v&&k(q,v))?A.merge([q],x):x}function M(q,v){for(var x=0,C=q.length;x<C;x++)Ea.set(q[x],"globalEval",!v||Ea.get(v[x],"globalEval"))}function ca(q,v,x,C,F){for(var K,Q,U,Z,na=v.createDocumentFragment(),Da=[],ja=0,Qa=q.length;ja<Qa;ja++)if((K=q[ja])||0===K)if("object"===
b(K))A.merge(Da,K.nodeType?[K]:K);else if(Ek.test(K)){Q=Q||na.appendChild(v.createElement("div"));U=Cd[(ni.exec(K)||["",""])[1].toLowerCase()]||Cd._default;Q.innerHTML=U[1]+A.htmlPrefilter(K)+U[2];for(U=U[0];U--;)Q=Q.lastChild;A.merge(Da,Q.childNodes);(Q=na.firstChild).textContent=""}else Da.push(v.createTextNode(K));na.textContent="";for(ja=0;K=Da[ja++];)if(C&&-1<A.inArray(K,C))F&&F.push(K);else if(Z=Rb(K),Q=N(na.appendChild(K),"script"),Z&&M(Q),x)for(U=0;K=Q[U++];)oi.test(K.type||"")&&x.push(K);
return na}function W(){return!0}function ka(){return!1}function ea(q,v,x,C,F,K){var Q,U;if("object"==typeof v){for(U in"string"!=typeof x&&(C=C||x,x=void 0),v)ea(q,U,x,C,v[U],K);return q}if(null==C&&null==F?(F=x,C=x=void 0):null==F&&("string"==typeof x?(F=C,C=void 0):(F=C,C=x,x=void 0)),!1===F)F=ka;else if(!F)return q;return 1===K&&(Q=F,(F=function(Z){return A().off(Z),Q.apply(this,arguments)}).guid=Q.guid||(Q.guid=A.guid++)),q.each(function(){A.event.add(this,v,F,C,x)})}function ma(q,v,x){x?(Ea.set(q,
v,!1),A.event.add(q,v,{namespace:!1,handler:function(C){var F,K=Ea.get(this,v);if(1&C.isTrigger&&this[v])if(K)(A.event.special[v]||{}).delegateType&&C.stopPropagation();else{if(K=Ab.call(arguments),Ea.set(this,v,K),this[v](),F=Ea.get(this,v),Ea.set(this,v,!1),K!==F)return C.stopImmediatePropagation(),C.preventDefault(),F}else K&&(Ea.set(this,v,A.event.trigger(K[0],K.slice(1),this)),C.stopPropagation(),C.isImmediatePropagationStopped=W)}})):void 0===Ea.get(q,v)&&A.event.add(q,v,W)}function Ca(q,v){return k(q,
"table")&&k(11!==v.nodeType?v:v.firstChild,"tr")&&A(q).children("tbody")[0]||q}function Ja(q){return q.type=(null!==q.getAttribute("type"))+"/"+q.type,q}function Ha(q){return"true/"===(q.type||"").slice(0,5)?q.type=q.type.slice(5):q.removeAttribute("type"),q}function V(q,v){var x,C,F,K,Q;if(1===v.nodeType){if(Ea.hasData(q)&&(Q=Ea.get(q).events))for(C in Ea.remove(v,"handle events"),Q){var U=0;for(x=Q[C].length;U<x;U++)A.event.add(v,C,Q[C][U])}ub.hasData(q)&&(F=ub.access(q),K=A.extend({},F),ub.set(v,
K))}}function Na(q,v,x,C){v=qc(v);var F,K,Q,U=0,Z=q.length,na=Z-1,Da=v[0],ja=Ya(Da);if(ja||1<Z&&"string"==typeof Da&&!jb.checkClone&&Ng.test(Da))return q.each(function(Xa){var cb=q.eq(Xa);ja&&(v[0]=Da.call(this,Xa,cb.html()));Na(cb,v,x,C)});if(Z&&(K=(F=ca(v,q[0].ownerDocument,!1,q,C)).firstChild,1===F.childNodes.length&&(F=K),K||C)){for(Q=(K=A.map(N(F,"script"),Ja)).length;U<Z;U++){var Qa=F;U!==na&&(Qa=A.clone(Qa,!0,!0),Q&&A.merge(K,N(Qa,"script")));x.call(q[U],Qa,U)}if(Q)for(F=K[K.length-1].ownerDocument,
A.map(K,Ha),U=0;U<Q;U++)Qa=K[U],oi.test(Qa.type||"")&&!Ea.access(Qa,"globalEval")&&A.contains(F,Qa)&&(Qa.src&&"module"!==(Qa.type||"").toLowerCase()?A._evalUrl&&!Qa.noModule&&A._evalUrl(Qa.src,{nonce:Qa.nonce||Qa.getAttribute("nonce")},F):d(Qa.textContent.replace(Ye,""),Qa,F))}return q}function wa(q,v,x){for(var C=v?A.filter(v,q):q,F=0;null!=(v=C[F]);F++)x||1!==v.nodeType||A.cleanData(N(v)),v.parentNode&&(x&&Rb(v)&&M(N(v,"script")),v.parentNode.removeChild(v));return q}function wb(q,v,x){var C,F,
K,Q,U=Bf.test(v),Z=q.style;return(x=x||Cf(q))&&(Q=x.getPropertyValue(v)||x[v],U&&Q&&(Q=Q.replace(Oc,"$1")||void 0),""!==Q||Rb(q)||(Q=A.style(q,v)),!jb.pixelBoxStyles()&&Df.test(Q)&&Kd.test(v)&&(C=Z.width,F=Z.minWidth,K=Z.maxWidth,Z.minWidth=Z.maxWidth=Z.width=Q,Q=x.width,Z.width=C,Z.minWidth=F,Z.maxWidth=K)),void 0!==Q?Q+"":Q}function kb(q,v){return{get:function(){if(q())delete this.get;else return(this.get=v).apply(this,arguments)}}}function Yb(q){var v;if(!(v=A.cssProps[q]||Og[q])){if(!(q in Ge)){a:{v=
q;for(var x=v[0].toUpperCase()+v.slice(1),C=$d.length;C--;)if((v=$d[C]+x)in Ge)break a;v=void 0}q=Og[q]=v||q}v=q}return v}function Pb(q,v,x){return(q=$a.exec(v))?Math.max(0,q[2]-(x||0))+(q[3]||"px"):v}function Va(q,v,x,C,F,K){var Q="width"===v?1:0,U=0,Z=0,na=0;if(x===(C?"border":"content"))return 0;for(;4>Q;Q+=2)"margin"===x&&(na+=A.css(q,x+ab[Q],!0,F)),C?("content"===x&&(Z-=A.css(q,"padding"+ab[Q],!0,F)),"margin"!==x&&(Z-=A.css(q,"border"+ab[Q]+"Width",!0,F))):(Z+=A.css(q,"padding"+ab[Q],!0,F),"padding"!==
x?Z+=A.css(q,"border"+ab[Q]+"Width",!0,F):U+=A.css(q,"border"+ab[Q]+"Width",!0,F));return!C&&0<=K&&(Z+=Math.max(0,Math.ceil(q["offset"+v[0].toUpperCase()+v.slice(1)]-K-Z-U-.5))||0),Z+na}function Mc(q,v,x){var C=Cf(q),F=(!jb.boxSizingReliable()||x)&&"border-box"===A.css(q,"boxSizing",!1,C),K=F,Q=wb(q,v,C),U="offset"+v[0].toUpperCase()+v.slice(1);if(Df.test(Q)){if(!x)return Q;Q="auto"}return(!jb.boxSizingReliable()&&F||!jb.reliableTrDimensions()&&k(q,"tr")||"auto"===Q||!parseFloat(Q)&&"inline"===A.css(q,
"display",!1,C))&&q.getClientRects().length&&(F="border-box"===A.css(q,"boxSizing",!1,C),(K=U in q)&&(Q=q[U])),(Q=parseFloat(Q)||0)+Va(q,v,x||(F?"border":"content"),K,C,Q)+"px"}function jc(q,v,x,C,F){return new jc.prototype.init(q,v,x,C,F)}function za(){return a.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function X(q,v){var x,C=0,F={height:q};for(v=v?1:0;4>C;C+=2-v)F["margin"+(x=ab[C])]=F["padding"+x]=q;return v&&(F.opacity=F.width=q),F}function va(q,v,x){for(var C,F=(ua.tweeners[v]||[]).concat(ua.tweeners["*"]),
K=0,Q=F.length;K<Q;K++)if(C=F[K].call(x,v,q))return C}function ua(q,v,x){var C,F=0,K=ua.prefilters.length,Q=A.Deferred().always(function(){delete U.elem}),U=function(){if(C)return!1;var na=Ze||za();na=Math.max(0,Z.startTime+Z.duration-na);for(var Da=1-(na/Z.duration||0),ja=0,Qa=Z.tweens.length;ja<Qa;ja++)Z.tweens[ja].run(Da);return(Q.notifyWith(q,[Z,Da,na]),1>Da&&Qa)?na:(Qa||Q.notifyWith(q,[Z,1,0]),Q.resolveWith(q,[Z]),!1)},Z=Q.promise({elem:q,props:A.extend({},v),opts:A.extend(!0,{specialEasing:{},
easing:A.easing._default},x),originalProperties:v,originalOptions:x,startTime:Ze||za(),duration:x.duration,tweens:[],createTween:function(na,Da){na=A.Tween(q,Z.opts,na,Da,Z.opts.specialEasing[na]||Z.opts.easing);return Z.tweens.push(na),na},stop:function(na){var Da=0,ja=na?Z.tweens.length:0;if(C)return this;for(C=!0;Da<ja;Da++)Z.tweens[Da].run(1);return na?(Q.notifyWith(q,[Z,1,0]),Q.resolveWith(q,[Z,na])):Q.rejectWith(q,[Z,na]),this}});x=Z.props;(function(na,Da){var ja,Qa,Xa,cb,Jb;for(ja in na)if(Xa=
Da[Qa=u(ja)],Array.isArray(cb=na[ja])&&(Xa=cb[1],cb=na[ja]=cb[0]),ja!==Qa&&(na[Qa]=cb,delete na[ja]),(Jb=A.cssHooks[Qa])&&"expand"in Jb)for(ja in cb=Jb.expand(cb),delete na[Qa],cb)ja in na||(na[ja]=cb[ja],Da[ja]=Xa);else Da[Qa]=Xa})(x,Z.opts.specialEasing);for(;F<K;F++)if(v=ua.prefilters[F].call(Z,q,x,Z.opts))return Ya(v.stop)&&(A._queueHooks(Z.elem,Z.opts.queue).stop=v.stop.bind(v)),v;return A.map(x,va,Z),Ya(Z.opts.start)&&Z.opts.start.call(q,Z),Z.progress(Z.opts.progress).done(Z.opts.done,Z.opts.complete).fail(Z.opts.fail).always(Z.opts.always),
A.fx.timer(A.extend(U,{elem:q,anim:Z,queue:Z.opts.queue})),Z}function bb(q){return(q.match(P)||[]).join(" ")}function xb(q){return q.getAttribute&&q.getAttribute("class")||""}function Ka(q){return Array.isArray(q)?q:"string"==typeof q&&q.match(P)||[]}function fc(q){return function(v,x){"string"!=typeof v&&(x=v,v="*");var C=0,F=v.toLowerCase().match(P)||[];if(Ya(x))for(;v=F[C++];)"+"===v[0]?(q[v=v.slice(1)||"*"]=q[v]||[]).unshift(x):(q[v]=q[v]||[]).push(x)}}function Bb(q,v,x,C){function F(U){var Z;
return K[U]=!0,A.each(q[U]||[],function(na,Da){na=Da(v,x,C);return"string"!=typeof na||Q||K[na]?Q?!(Z=na):void 0:(v.dataTypes.unshift(na),F(na),!1)}),Z}var K={},Q=q===Pg;return F(v.dataTypes[0])||!K["*"]&&F("*")}function kc(q,v){var x,C,F=A.ajaxSettings.flatOptions||{};for(x in v)void 0!==v[x]&&((F[x]?q:C||={})[x]=v[x]);return C&&A.extend(!0,q,C),q}var Kc,fb=[],Jc=Object.getPrototypeOf,Ab=fb.slice,qc=fb.flat?function(q){return fb.flat.call(q)}:function(q){return fb.concat.apply([],q)},pb=fb.push,
yb=fb.indexOf,$c={},$b=$c.toString,wc=$c.hasOwnProperty,xc=wc.toString,Dc=xc.call(Object),jb={},Ya=function(q){return"function"==typeof q&&"number"!=typeof q.nodeType&&"function"!=typeof q.item},Zc=function(q){return null!=q&&q===q.window},lb=a.document,vb={type:!0,src:!0,nonce:!0,noModule:!0},Gd=/HTML$/i,A=function(q,v){return new A.fn.init(q,v)};A.fn=A.prototype={jquery:"3.7.1",constructor:A,length:0,toArray:function(){return Ab.call(this)},get:function(q){return null==q?Ab.call(this):0>q?this[q+
this.length]:this[q]},pushStack:function(q){q=A.merge(this.constructor(),q);return q.prevObject=this,q},each:function(q){return A.each(this,q)},map:function(q){return this.pushStack(A.map(this,function(v,x){return q.call(v,x,v)}))},slice:function(){return this.pushStack(Ab.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,function(q,v){return(v+1)%2}))},odd:function(){return this.pushStack(A.grep(this,
function(q,v){return v%2}))},eq:function(q){var v=this.length;q=+q+(0>q?v:0);return this.pushStack(0<=q&&q<v?[this[q]]:[])},end:function(){return this.prevObject||this.constructor()},push:pb,sort:fb.sort,splice:fb.splice};A.extend=A.fn.extend=function(){var q,v,x,C,F,K=arguments[0]||{},Q=1,U=arguments.length,Z=!1;"boolean"==typeof K&&(Z=K,K=arguments[Q]||{},Q++);"object"==typeof K||Ya(K)||(K={});for(Q===U&&(K=this,Q--);Q<U;Q++)if(null!=(q=arguments[Q]))for(v in q){var na=q[v];"__proto__"!==v&&K!==
na&&(Z&&na&&(A.isPlainObject(na)||(C=Array.isArray(na)))?(x=K[v],F=C&&!Array.isArray(x)?[]:C||A.isPlainObject(x)?x:{},C=!1,K[v]=A.extend(Z,F,na)):void 0!==na&&(K[v]=na))}return K};A.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(q){throw Error(q);},noop:function(){},isPlainObject:function(q){var v,x;return!!q&&"[object Object]"===$b.call(q)&&(!(v=Jc(q))||"function"==typeof(x=wc.call(v,"constructor")&&v.constructor)&&xc.call(x)===Dc)},isEmptyObject:function(q){for(var v in q)return!1;
return!0},globalEval:function(q,v,x){d(q,{nonce:v&&v.nonce},x)},each:function(q,v){var x,C=0;if(f(q))for(x=q.length;C<x&&!1!==v.call(q[C],C,q[C]);C++);else for(C in q)if(!1===v.call(q[C],C,q[C]))break;return q},text:function(q){var v,x="",C=0,F=q.nodeType;if(!F)for(;v=q[C++];)x+=A.text(v);return 1===F||11===F?q.textContent:9===F?q.documentElement.textContent:3===F||4===F?q.nodeValue:x},makeArray:function(q,v){v=v||[];return null!=q&&(f(Object(q))?A.merge(v,"string"==typeof q?[q]:q):pb.call(v,q)),
v},inArray:function(q,v,x){return null==v?-1:yb.call(v,q,x)},isXMLDoc:function(q){var v=q&&(q.ownerDocument||q).documentElement;return!Gd.test(q&&q.namespaceURI||v&&v.nodeName||"HTML")},merge:function(q,v){for(var x=+v.length,C=0,F=q.length;C<x;C++)q[F++]=v[C];return q.length=F,q},grep:function(q,v,x){var C=[],F=0,K=q.length;for(x=!x;F<K;F++)!v(q[F],F)!==x&&C.push(q[F]);return C},map:function(q,v,x){var C,F,K=0,Q=[];if(f(q))for(C=q.length;K<C;K++)null!=(F=v(q[K],K,x))&&Q.push(F);else for(K in q)null!=
(F=v(q[K],K,x))&&Q.push(F);return qc(Q)},guid:1,support:jb});"function"==typeof Symbol&&(A.fn[Symbol.iterator]=fb[Symbol.iterator]);A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(q,v){$c["[object "+v+"]"]=v.toLowerCase()});var fe=fb.pop,ee=fb.sort,Ga=fb.splice,Oc=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");A.contains=function(q,v){v=v&&v.parentNode;return q===v||!!(v&&1===v.nodeType&&(q.contains?q.contains(v):
q.compareDocumentPosition&&16&q.compareDocumentPosition(v)))};var Fd=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;A.escapeSelector=function(q){return(q+"").replace(Fd,l)};(function(){function q(S,ha,ia,Fa){var Ra,mb,eb,Kb,gb=ha&&ha.ownerDocument;var Wb=ha?ha.nodeType:9;if(ia=ia||[],"string"!=typeof S||!S||1!==Wb&&9!==Wb&&11!==Wb)return ia;if(!Fa&&(U(ha),ha=ha||Ob,lc)){if(11!==Wb&&(Kb=Fk.exec(S)))if(Ra=Kb[1])if(9===Wb){if(!(mb=ha.getElementById(Ra)))return ia;if(mb.id===Ra)return Gc.call(ia,mb),
ia}else{if(gb&&(mb=gb.getElementById(Ra))&&q.contains(ha,mb)&&mb.id===Ra)return Gc.call(ia,mb),ia}else{if(Kb[2])return Gc.apply(ia,ha.getElementsByTagName(S)),ia;if((Ra=Kb[3])&&ha.getElementsByClassName)return Gc.apply(ia,ha.getElementsByClassName(Ra)),ia}if(!(fd[S+" "]||Rc&&Rc.test(S))){if(Ra=S,gb=ha,1===Wb&&(Hc.test(S)||rc.test(S))){(gb=Qg.test(S)&&Q(ha.parentNode)||ha)==ha&&jb.scope||((eb=ha.getAttribute("id"))?eb=A.escapeSelector(eb):ha.setAttribute("id",eb=oc));for(Wb=(Ra=na(S)).length;Wb--;)Ra[Wb]=
(eb?"#"+eb:":scope")+" "+Da(Ra[Wb]);Ra=Ra.join(",")}try{return Gc.apply(ia,gb.querySelectorAll(Ra)),ia}catch(Sb){fd(S,!0)}finally{eb===oc&&ha.removeAttribute("id")}}}return Jb(S.replace(Oc,"$1"),ha,ia,Fa)}function v(){var S=[];return function Ra(ia,Fa){return S.push(ia+" ")>Db.cacheLength&&delete Ra[S.shift()],Ra[ia+" "]=Fa}}function x(S){return S[oc]=!0,S}function C(S){var ha=Ob.createElement("fieldset");try{return!!S(ha)}catch(ia){return!1}finally{ha.parentNode&&ha.parentNode.removeChild(ha)}}function F(S){return function(ha){return"form"in
ha?ha.parentNode&&!1===ha.disabled?"label"in ha?"label"in ha.parentNode?ha.parentNode.disabled===S:ha.disabled===S:ha.isDisabled===S||!S!==ha.isDisabled&&Gk(ha)===S:ha.disabled===S:"label"in ha&&ha.disabled===S}}function K(S){return x(function(ha){return ha=+ha,x(function(ia,Fa){for(var Ra,mb=S([],ia.length,ha),eb=mb.length;eb--;)ia[Ra=mb[eb]]&&(ia[Ra]=!(Fa[Ra]=ia[Ra]))})})}function Q(S){return S&&void 0!==S.getElementsByTagName&&S}function U(S){var ha;S=S?S.ownerDocument||S:lb;return S!=Ob&&9===
S.nodeType&&S.documentElement&&(zb=(Ob=S).documentElement,lc=!A.isXMLDoc(Ob),Ld=zb.matches||zb.webkitMatchesSelector||zb.msMatchesSelector,zb.msMatchesSelector&&lb!=Ob&&(ha=Ob.defaultView)&&ha.top!==ha&&ha.addEventListener("unload",Hk),jb.getById=C(function(ia){return zb.appendChild(ia).id=A.expando,!Ob.getElementsByName||!Ob.getElementsByName(A.expando).length}),jb.disconnectedMatch=C(function(ia){return Ld.call(ia,"*")}),jb.scope=C(function(){return Ob.querySelectorAll(":scope")}),jb.cssHas=C(function(){try{return Ob.querySelector(":has(*,:jqfake)"),
!1}catch(ia){return!0}}),jb.getById?(Db.filter.ID=function(ia){var Fa=ia.replace(ae,Md);return function(Ra){return Ra.getAttribute("id")===Fa}},Db.find.ID=function(ia,Fa){if(void 0!==Fa.getElementById&&lc)return(ia=Fa.getElementById(ia))?[ia]:[]}):(Db.filter.ID=function(ia){var Fa=ia.replace(ae,Md);return function(Ra){return(Ra=void 0!==Ra.getAttributeNode&&Ra.getAttributeNode("id"))&&Ra.value===Fa}},Db.find.ID=function(ia,Fa){if(void 0!==Fa.getElementById&&lc){var Ra,mb=Fa.getElementById(ia);if(mb){if((Ra=
mb.getAttributeNode("id"))&&Ra.value===ia)return[mb];var eb=Fa.getElementsByName(ia);for(Fa=0;mb=eb[Fa++];)if((Ra=mb.getAttributeNode("id"))&&Ra.value===ia)return[mb]}return[]}}),Db.find.TAG=function(ia,Fa){return void 0!==Fa.getElementsByTagName?Fa.getElementsByTagName(ia):Fa.querySelectorAll(ia)},Db.find.CLASS=function(ia,Fa){if(void 0!==Fa.getElementsByClassName&&lc)return Fa.getElementsByClassName(ia)},Rc=[],C(function(ia){var Fa;zb.appendChild(ia).innerHTML="<a id='"+oc+"' href='' disabled='disabled'></a><select id='"+
oc+"-\r\\' disabled='disabled'><option selected=''></option></select>";ia.querySelectorAll("[selected]").length||Rc.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");ia.querySelectorAll("[id~="+oc+"-]").length||Rc.push("~=");ia.querySelectorAll("a#"+oc+"+*").length||Rc.push(".#.+[+~]");ia.querySelectorAll(":checked").length||Rc.push(":checked");(Fa=Ob.createElement("input")).setAttribute("type",
"hidden");ia.appendChild(Fa).setAttribute("name","D");zb.appendChild(ia).disabled=!0;2!==ia.querySelectorAll(":disabled").length&&Rc.push(":enabled",":disabled");(Fa=Ob.createElement("input")).setAttribute("name","");ia.appendChild(Fa);ia.querySelectorAll("[name='']").length||Rc.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")")}),jb.cssHas||Rc.push(":has"),Rc=Rc.length&&new RegExp(Rc.join("|")),be=function(ia,Fa){if(ia===Fa)return Lb=!0,0;var Ra=!ia.compareDocumentPosition-
!Fa.compareDocumentPosition;return Ra||(1&(Ra=(ia.ownerDocument||ia)==(Fa.ownerDocument||Fa)?ia.compareDocumentPosition(Fa):1)||!jb.sortDetached&&Fa.compareDocumentPosition(ia)===Ra?ia===Ob||ia.ownerDocument==lb&&q.contains(lb,ia)?-1:Fa===Ob||Fa.ownerDocument==lb&&q.contains(lb,Fa)?1:sd?yb.call(sd,ia)-yb.call(sd,Fa):0:4&Ra?-1:1)}),Ob}function Z(){}function na(S,ha){var ia,Fa,Ra,mb,eb,Kb;if(eb=td[S+" "])return ha?0:eb.slice(0);eb=S;var gb=[];for(Kb=Db.preFilter;eb;){for(mb in(!ia||(Fa=gd.exec(eb)))&&
(Fa&&(eb=eb.slice(Fa[0].length)||eb),gb.push(Ra=[])),ia=!1,(Fa=rc.exec(eb))&&(ia=Fa.shift(),Ra.push({value:ia,type:Fa[0].replace(Oc," ")}),eb=eb.slice(ia.length)),Db.filter)(Fa=md[mb].exec(eb))&&(!Kb[mb]||(Fa=Kb[mb](Fa)))&&(ia=Fa.shift(),Ra.push({value:ia,type:mb,matches:Fa}),eb=eb.slice(ia.length));if(!ia)break}return ha?eb.length:eb?q.error(S):td(S,gb).slice(0)}function Da(S){for(var ha=0,ia=S.length,Fa="";ha<ia;ha++)Fa+=S[ha].value;return Fa}function ja(S,ha,ia){var Fa=ha.dir,Ra=ha.next,mb=Ra||
Fa,eb=ia&&"parentNode"===mb,Kb=oe++;return ha.first?function(gb,Wb,Sb){for(;gb=gb[Fa];)if(1===gb.nodeType||eb)return S(gb,Wb,Sb);return!1}:function(gb,Wb,Sb){var Wc,Zb,hc=[nd,Kb];if(Sb)for(;gb=gb[Fa];){if((1===gb.nodeType||eb)&&S(gb,Wb,Sb))return!0}else for(;gb=gb[Fa];)if(1===gb.nodeType||eb)if(Zb=gb[oc]||(gb[oc]={}),Ra&&k(gb,Ra))gb=gb[Fa]||gb;else{if((Wc=Zb[mb])&&Wc[0]===nd&&Wc[1]===Kb)return hc[2]=Wc[2];if(Zb[mb]=hc,hc[2]=S(gb,Wb,Sb))return!0}return!1}}function Qa(S){return 1<S.length?function(ha,
ia,Fa){for(var Ra=S.length;Ra--;)if(!S[Ra](ha,ia,Fa))return!1;return!0}:S[0]}function Xa(S,ha,ia,Fa,Ra){for(var mb,eb=[],Kb=0,gb=S.length,Wb=null!=ha;Kb<gb;Kb++)(mb=S[Kb])&&(!ia||ia(mb,Fa,Ra))&&(eb.push(mb),Wb&&ha.push(Kb));return eb}function cb(S,ha){var ia,Fa,Ra,mb,eb=[],Kb=[],gb=Xc[S+" "];if(!gb){ha||=na(S);for(mb=ha.length;mb--;)(gb=function Wc(Sb){var Zb,hc,Ic=Sb.length,Dd=Db.relative[Sb[0].type];var Yc=Dd||Db.relative[" "];for(var Tb=Dd?1:0,Nd=ja(function(D){return D===Zb},Yc,!0),Od=ja(function(D){return-1<
yb.call(Zb,D)},Yc,!0),y=[function(D,O,t){D=!Dd&&(t||O!=Nc)||((Zb=O).nodeType?Nd(D,O,t):Od(D,O,t));return Zb=null,D}];Tb<Ic;Tb++)if(Yc=Db.relative[Sb[Tb].type])y=[ja(Qa(y),Yc)];else{if((Yc=Db.filter[Sb[Tb].type].apply(null,Sb[Tb].matches))[oc]){for(hc=++Tb;hc<Ic&&!Db.relative[Sb[hc].type];hc++);return function la(O,t,B,H,ba,fa){return H&&!H[oc]&&(H=la(H)),ba&&!ba[oc]&&(ba=la(ba,fa)),x(function(ra,oa,xa,Ia){var La,Pa,rb=[],nb=[],Za=oa.length,sb;if(!(sb=ra)){sb=t||"*";for(var Eb=xa.nodeType?[xa]:xa,
db=[],Fb=0,Xb=Eb.length;Fb<Xb;Fb++)q(sb,Eb[Fb],db);sb=db}sb=!O||!ra&&t?sb:Xa(sb,rb,O,xa,Ia);if(B?B(sb,Pa=ba||(ra?O:Za||H)?[]:oa,xa,Ia):Pa=sb,H){var Ub=Xa(Pa,nb);H(Ub,[],xa,Ia);for(xa=Ub.length;xa--;)(La=Ub[xa])&&(Pa[nb[xa]]=!(sb[nb[xa]]=La))}if(ra){if(ba||O){if(ba){Ub=[];for(xa=Pa.length;xa--;)(La=Pa[xa])&&Ub.push(sb[xa]=La);ba(null,Pa=[],Ub,Ia)}for(xa=Pa.length;xa--;)(La=Pa[xa])&&-1<(Ub=ba?yb.call(ra,La):rb[xa])&&(ra[Ub]=!(oa[Ub]=La))}}else Pa=Xa(Pa===oa?Pa.splice(Za,Pa.length):Pa),ba?ba(null,oa,
Pa,Ia):Gc.apply(oa,Pa)})}(1<Tb&&Qa(y),1<Tb&&Da(Sb.slice(0,Tb-1).concat({value:" "===Sb[Tb-2].type?"*":""})).replace(Oc,"$1"),Yc,Tb<hc&&Wc(Sb.slice(Tb,hc)),hc<Ic&&Wc(Sb=Sb.slice(hc)),hc<Ic&&Da(Sb))}y.push(Yc)}return Qa(y)}(ha[mb]))[oc]?eb.push(gb):Kb.push(gb);(gb=Xc(S,(ia=0<eb.length,Fa=0<Kb.length,Ra=function(Wb,Sb,Wc,Zb,hc){var Ic,Dd,Yc=0,Tb="0",Nd=Wb&&[],Od=[],y=Nc,D=Wb||Fa&&Db.find.TAG("*",hc),O=nd+=null==y?1:Math.random()||.1,t=D.length;for(hc&&(Nc=Sb==Ob||Sb||hc);Tb!==t&&null!=(Ic=D[Tb]);Tb++){if(Fa&&
Ic){var B=0;for(Sb||Ic.ownerDocument==Ob||(U(Ic),Wc=!lc);Dd=Kb[B++];)if(Dd(Ic,Sb||Ob,Wc)){Gc.call(Zb,Ic);break}hc&&(nd=O)}ia&&((Ic=!Dd&&Ic)&&Yc--,Wb&&Nd.push(Ic))}if(Yc+=Tb,ia&&Tb!==Yc){for(B=0;Dd=eb[B++];)Dd(Nd,Od,Sb,Wc);if(Wb){if(0<Yc)for(;Tb--;)Nd[Tb]||Od[Tb]||(Od[Tb]=fe.call(Zb));Od=Xa(Od)}Gc.apply(Zb,Od);hc&&!Wb&&0<Od.length&&1<Yc+eb.length&&A.uniqueSort(Zb)}return hc&&(nd=O,Nc=y),Nd},ia?x(Ra):Ra))).selector=S}return gb}function Jb(S,ha,ia,Fa){var Ra,mb,eb,Kb,gb,Wb="function"==typeof S&&S,Sb=
!Fa&&na(S=Wb.selector||S);if(ia=ia||[],1===Sb.length){if(2<(mb=Sb[0]=Sb[0].slice(0)).length&&"ID"===(eb=mb[0]).type&&9===ha.nodeType&&lc&&Db.relative[mb[1].type]){if(!(ha=(Db.find.ID(eb.matches[0].replace(ae,Md),ha)||[])[0]))return ia;Wb&&(ha=ha.parentNode);S=S.slice(mb.shift().value.length)}for(Ra=md.needsContext.test(S)?0:mb.length;Ra--&&(eb=mb[Ra],!Db.relative[Kb=eb.type]);)if((gb=Db.find[Kb])&&(Fa=gb(eb.matches[0].replace(ae,Md),Qg.test(mb[0].type)&&Q(ha.parentNode)||ha))){if(mb.splice(Ra,1),
!(S=Fa.length&&Da(mb)))return Gc.apply(ia,Fa),ia;break}}return(Wb||cb(S,Sb))(Fa,ha,!lc,ia,!ha||Qg.test(S)&&Q(ha.parentNode)||ha),ia}var ic,Db,Nc,sd,Lb,Ob,zb,lc,Rc,Ld,Gc=pb,oc=A.expando,nd=0,oe=0,He=v(),td=v(),Xc=v(),fd=v(),be=function(S,ha){return S===ha&&(Lb=!0),0},pe=RegExp("[\\x20\\t\\r\\n\\f]+","g"),gd=RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),rc=RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),Hc=RegExp("[\\x20\\t\\r\\n\\f]|>"),Pd=RegExp(":((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
Lc=RegExp("^(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+$"),md={ID:RegExp("^#((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)"),CLASS:RegExp("^\\.((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)"),TAG:RegExp("^((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+|[*])"),ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\]"),
PSEUDO:RegExp("^:((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},$e=/^(?:input|select|textarea|button)$/i,jg=/^h\d$/i,Fk=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Qg=/[+~]/,ae=RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),Md=function(S,ha){S="0x"+S.slice(1)-65536;return ha||(0>S?String.fromCharCode(S+65536):String.fromCharCode(S>>10|55296,1023&S|56320))},Hk=function(){U()},Gk=ja(function(S){return!0===S.disabled&&k(S,"fieldset")},{dir:"parentNode",next:"legend"});try{Gc.apply(fb=Ab.call(lb.childNodes),lb.childNodes),fb[lb.childNodes.length].nodeType}catch(S){Gc=
{apply:function(ha,ia){pb.apply(ha,Ab.call(ia))},call:function(ha){pb.apply(ha,Ab.call(arguments,1))}}}for(ic in q.matches=function(S,ha){return q(S,null,null,ha)},q.matchesSelector=function(S,ha){if(U(S),!(!lc||fd[ha+" "]||Rc&&Rc.test(ha)))try{var ia=Ld.call(S,ha);if(ia||jb.disconnectedMatch||S.document&&11!==S.document.nodeType)return ia}catch(Fa){fd(ha,!0)}return 0<q(ha,Ob,null,[S]).length},q.contains=function(S,ha){return(S.ownerDocument||S)!=Ob&&U(S),A.contains(S,ha)},q.attr=function(S,ha){(S.ownerDocument||
S)!=Ob&&U(S);var ia=Db.attrHandle[ha.toLowerCase()];ia=ia&&wc.call(Db.attrHandle,ha.toLowerCase())?ia(S,ha,!lc):void 0;return void 0!==ia?ia:S.getAttribute(ha)},q.error=function(S){throw Error("Syntax error, unrecognized expression: "+S);},A.uniqueSort=function(S){var ha,ia=[],Fa=0,Ra=0;if(Lb=!jb.sortStable,sd=!jb.sortStable&&Ab.call(S,0),ee.call(S,be),Lb){for(;ha=S[Ra++];)ha===S[Ra]&&(Fa=ia.push(Ra));for(;Fa--;)Ga.call(S,ia[Fa],1)}return sd=null,S},A.fn.uniqueSort=function(){return this.pushStack(A.uniqueSort(Ab.apply(this)))},
(Db=A.expr={cacheLength:50,createPseudo:x,match:md,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(S){return S[1]=S[1].replace(ae,Md),S[3]=(S[3]||S[4]||S[5]||"").replace(ae,Md),"~="===S[2]&&(S[3]=" "+S[3]+" "),S.slice(0,4)},CHILD:function(S){return S[1]=S[1].toLowerCase(),"nth"===S[1].slice(0,3)?(S[3]||q.error(S[0]),S[4]=+(S[4]?S[5]+(S[6]||1):2*("even"===S[3]||"odd"===
S[3])),S[5]=+(S[7]+S[8]||"odd"===S[3])):S[3]&&q.error(S[0]),S},PSEUDO:function(S){var ha,ia=!S[6]&&S[2];return md.CHILD.test(S[0])?null:(S[3]?S[2]=S[4]||S[5]||"":ia&&Pd.test(ia)&&(ha=na(ia,!0))&&(ha=ia.indexOf(")",ia.length-ha)-ia.length)&&(S[0]=S[0].slice(0,ha),S[2]=ia.slice(0,ha)),S.slice(0,3))}},filter:{TAG:function(S){var ha=S.replace(ae,Md).toLowerCase();return"*"===S?function(){return!0}:function(ia){return k(ia,ha)}},CLASS:function(S){var ha=He[S+" "];return ha||(ha=RegExp("(^|[\\x20\\t\\r\\n\\f])"+
S+"([\\x20\\t\\r\\n\\f]|$)"),He(S,function(ia){return ha.test("string"==typeof ia.className&&ia.className||void 0!==ia.getAttribute&&ia.getAttribute("class")||"")}))},ATTR:function(S,ha,ia){return function(Fa){Fa=q.attr(Fa,S);return null==Fa?"!="===ha:!ha||((Fa+="","="===ha)?Fa===ia:"!="===ha?Fa!==ia:"^="===ha?ia&&0===Fa.indexOf(ia):"*="===ha?ia&&-1<Fa.indexOf(ia):"$="===ha?ia&&Fa.slice(-ia.length)===ia:"~="===ha?-1<(" "+Fa.replace(pe," ")+" ").indexOf(ia):"|="===ha&&(Fa===ia||Fa.slice(0,ia.length+
1)===ia+"-"))}},CHILD:function(S,ha,ia,Fa,Ra){var mb="nth"!==S.slice(0,3),eb="last"!==S.slice(-4),Kb="of-type"===ha;return 1===Fa&&0===Ra?function(gb){return!!gb.parentNode}:function(gb,Wb,Sb){var Wc,Zb,hc;Wb=mb!==eb?"nextSibling":"previousSibling";var Ic=gb.parentNode,Dd=Kb&&gb.nodeName.toLowerCase(),Yc=!Sb&&!Kb,Tb=!1;if(Ic){if(mb){for(;Wb;){for(Zb=gb;Zb=Zb[Wb];)if(Kb?k(Zb,Dd):1===Zb.nodeType)return!1;var Nd=Wb="only"===S&&!Nd&&"nextSibling"}return!0}if(Nd=[eb?Ic.firstChild:Ic.lastChild],eb&&Yc)for(Tb=
(hc=(Wc=(Sb=Ic[oc]||(Ic[oc]={}))[S]||[])[0]===nd&&Wc[1])&&Wc[2],Zb=hc&&Ic.childNodes[hc];Zb=++hc&&Zb&&Zb[Wb]||(Tb=hc=0)||Nd.pop();){if(1===Zb.nodeType&&++Tb&&Zb===gb){Sb[S]=[nd,hc,Tb];break}}else if(Yc&&(Tb=hc=(Wc=(gb[oc]||(gb[oc]={}))[S]||[])[0]===nd&&Wc[1]),!1===Tb)for(;(Zb=++hc&&Zb&&Zb[Wb]||(Tb=hc=0)||Nd.pop())&&((Kb?!k(Zb,Dd):1!==Zb.nodeType)||!++Tb||(Yc&&((Sb=Zb[oc]||(Zb[oc]={}))[S]=[nd,Tb]),Zb!==gb)););return(Tb-=Ra)===Fa||0==Tb%Fa&&0<=Tb/Fa}}},PSEUDO:function(S,ha){var ia,Fa=Db.pseudos[S]||
Db.setFilters[S.toLowerCase()]||q.error("unsupported pseudo: "+S);return Fa[oc]?Fa(ha):1<Fa.length?(ia=[S,S,"",ha],Db.setFilters.hasOwnProperty(S.toLowerCase())?x(function(Ra,mb){for(var eb,Kb=Fa(Ra,ha),gb=Kb.length;gb--;)eb=yb.call(Ra,Kb[gb]),Ra[eb]=!(mb[eb]=Kb[gb])}):function(Ra){return Fa(Ra,0,ia)}):Fa}},pseudos:{not:x(function(S){var ha=[],ia=[],Fa=cb(S.replace(Oc,"$1"));return Fa[oc]?x(function(Ra,mb,eb,Kb){var gb;eb=Fa(Ra,null,Kb,[]);for(Kb=Ra.length;Kb--;)(gb=eb[Kb])&&(Ra[Kb]=!(mb[Kb]=gb))}):
function(Ra,mb,eb){return ha[0]=Ra,Fa(ha,null,eb,ia),ha[0]=null,!ia.pop()}}),has:x(function(S){return function(ha){return 0<q(S,ha).length}}),contains:x(function(S){return S=S.replace(ae,Md),function(ha){return-1<(ha.textContent||A.text(ha)).indexOf(S)}}),lang:x(function(S){return Lc.test(S||"")||q.error("unsupported lang: "+S),S=S.replace(ae,Md).toLowerCase(),function(ha){var ia;do if(ia=lc?ha.lang:ha.getAttribute("xml:lang")||ha.getAttribute("lang"))return(ia=ia.toLowerCase())===S||0===ia.indexOf(S+
"-");while((ha=ha.parentNode)&&1===ha.nodeType);return!1}}),target:function(S){var ha=a.location&&a.location.hash;return ha&&ha.slice(1)===S.id},root:function(S){return S===zb},focus:function(S){a:{try{var ha=Ob.activeElement;break a}catch(ia){}ha=void 0}return S===ha&&Ob.hasFocus()&&!!(S.type||S.href||~S.tabIndex)},enabled:F(!1),disabled:F(!0),checked:function(S){return k(S,"input")&&!!S.checked||k(S,"option")&&!!S.selected},selected:function(S){return S.parentNode&&S.parentNode.selectedIndex,!0===
S.selected},empty:function(S){for(S=S.firstChild;S;S=S.nextSibling)if(6>S.nodeType)return!1;return!0},parent:function(S){return!Db.pseudos.empty(S)},header:function(S){return jg.test(S.nodeName)},input:function(S){return $e.test(S.nodeName)},button:function(S){return k(S,"input")&&"button"===S.type||k(S,"button")},text:function(S){var ha;return k(S,"input")&&"text"===S.type&&(null==(ha=S.getAttribute("type"))||"text"===ha.toLowerCase())},first:K(function(){return[0]}),last:K(function(S,ha){return[ha-
1]}),eq:K(function(S,ha,ia){return[0>ia?ia+ha:ia]}),even:K(function(S,ha){for(var ia=0;ia<ha;ia+=2)S.push(ia);return S}),odd:K(function(S,ha){for(var ia=1;ia<ha;ia+=2)S.push(ia);return S}),lt:K(function(S,ha,ia){for(ha=0>ia?ia+ha:ia>ha?ha:ia;0<=--ha;)S.push(ha);return S}),gt:K(function(S,ha,ia){for(ia=0>ia?ia+ha:ia;++ia<ha;)S.push(ia);return S})}}).pseudos.nth=Db.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Db.pseudos[ic]=function(S){return function(ha){return k(ha,"input")&&ha.type===
S}}(ic);for(ic in{submit:!0,reset:!0})Db.pseudos[ic]=function(S){return function(ha){return(k(ha,"input")||k(ha,"button"))&&ha.type===S}}(ic);Z.prototype=Db.filters=Db.pseudos;Db.setFilters=new Z;jb.sortStable=oc.split("").sort(be).join("")===oc;U();jb.sortDetached=C(function(S){return 1&S.compareDocumentPosition(Ob.createElement("fieldset"))});A.find=q;A.expr[":"]=A.expr.pseudos;A.unique=A.uniqueSort;q.compile=cb;q.select=Jb;q.setDocument=U;q.tokenize=na;q.escape=A.escapeSelector;q.getText=A.text;
q.isXML=A.isXMLDoc;q.selectors=A.expr;q.support=A.support;q.uniqueSort=A.uniqueSort})();var yc=function(q,v,x){for(var C=[],F=void 0!==x;(q=q[v])&&9!==q.nodeType;)if(1===q.nodeType){if(F&&A(q).is(x))break;C.push(q)}return C},qd=function(q,v){for(var x=[];q;q=q.nextSibling)1===q.nodeType&&q!==v&&x.push(q);return x},hb=A.expr.match.needsContext,J=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;A.filter=function(q,v,x){var C=v[0];return(x&&(q=":not("+q+")"),1===v.length&&1===C.nodeType)?
A.find.matchesSelector(C,q)?[C]:[]:A.find.matches(q,A.grep(v,function(F){return 1===F.nodeType}))};A.fn.extend({find:function(q){var v,x=this.length,C=this;if("string"!=typeof q)return this.pushStack(A(q).filter(function(){for(F=0;F<x;F++)if(A.contains(C[F],this))return!0}));var F=0;for(v=this.pushStack([]);F<x;F++)A.find(q,C[F],v);return 1<x?A.uniqueSort(v):v},filter:function(q){return this.pushStack(h(this,q||[],!1))},not:function(q){return this.pushStack(h(this,q||[],!0))},is:function(q){return!!h(this,
"string"==typeof q&&hb.test(q)?A(q):q||[],!1).length}});var Y=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(A.fn.init=function(q,v,x){var C,F;if(!q)return this;if(x=x||ta,"string"==typeof q){if((C="<"===q[0]&&">"===q[q.length-1]&&3<=q.length?[null,q,null]:Y.exec(q))&&(C[1]||!v)){if(!C[1])return(F=lb.getElementById(C[2]))&&(this[0]=F,this.length=1),this;if(v=v instanceof A?v[0]:v,A.merge(this,A.parseHTML(C[1],v&&v.nodeType?v.ownerDocument||v:lb,!0)),J.test(C[1])&&A.isPlainObject(v))for(C in v)Ya(this[C])?
this[C](v[C]):this.attr(C,v[C]);return this}return!v||v.jquery?(v||x).find(q):this.constructor(v).find(q)}return q.nodeType?(this[0]=q,this.length=1,this):Ya(q)?void 0!==x.ready?x.ready(q):q(A):A.makeArray(q,this)}).prototype=A.fn;var ta=A(lb);var R=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};A.fn.extend({has:function(q){var v=A(q,this),x=v.length;return this.filter(function(){for(var C=0;C<x;C++)if(A.contains(this,v[C]))return!0})},closest:function(q,v){var x,C=0,
F=this.length,K=[],Q="string"!=typeof q&&A(q);if(!hb.test(q))for(;C<F;C++)for(x=this[C];x&&x!==v;x=x.parentNode)if(11>x.nodeType&&(Q?-1<Q.index(x):1===x.nodeType&&A.find.matchesSelector(x,q))){K.push(x);break}return this.pushStack(1<K.length?A.uniqueSort(K):K)},index:function(q){return q?"string"==typeof q?yb.call(A(q),this[0]):yb.call(this,q.jquery?q[0]:q):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(q,v){return this.pushStack(A.uniqueSort(A.merge(this.get(),A(q,v))))},
addBack:function(q){return this.add(null==q?this.prevObject:this.prevObject.filter(q))}});A.each({parent:function(q){return(q=q.parentNode)&&11!==q.nodeType?q:null},parents:function(q){return yc(q,"parentNode")},parentsUntil:function(q,v,x){return yc(q,"parentNode",x)},next:function(q){return e(q,"nextSibling")},prev:function(q){return e(q,"previousSibling")},nextAll:function(q){return yc(q,"nextSibling")},prevAll:function(q){return yc(q,"previousSibling")},nextUntil:function(q,v,x){return yc(q,"nextSibling",
x)},prevUntil:function(q,v,x){return yc(q,"previousSibling",x)},siblings:function(q){return qd((q.parentNode||{}).firstChild,q)},children:function(q){return qd(q.firstChild)},contents:function(q){return null!=q.contentDocument&&Jc(q.contentDocument)?q.contentDocument:(k(q,"template")&&(q=q.content||q),A.merge([],q.childNodes))}},function(q,v){A.fn[q]=function(x,C){var F=A.map(this,v,x);return"Until"!==q.slice(-5)&&(C=x),C&&"string"==typeof C&&(F=A.filter(C,F)),1<this.length&&(E[q]||A.uniqueSort(F),
R.test(q)&&F.reverse()),this.pushStack(F)}});var P=/[^\x20\t\r\n\f]+/g;A.Callbacks=function(q){q="string"==typeof q?(v=q,x={},A.each(v.match(P)||[],function(Qa,Xa){x[Xa]=!0}),x):A.extend({},q);var v,x,C,F,K,Q,U=[],Z=[],na=-1,Da=function(){Q=Q||q.once;for(K=C=!0;Z.length;na=-1)for(F=Z.shift();++na<U.length;)!1===U[na].apply(F[0],F[1])&&q.stopOnFalse&&(na=U.length,F=!1);q.memory||(F=!1);C=!1;Q&&(U=F?[]:"")},ja={add:function(){return U&&(F&&!C&&(na=U.length-1,Z.push(F)),function cb(Xa){A.each(Xa,function(Jb,
ic){Ya(ic)?q.unique&&ja.has(ic)||U.push(ic):ic&&ic.length&&"string"!==b(ic)&&cb(ic)})}(arguments),F&&!C&&Da()),this},remove:function(){return A.each(arguments,function(Qa,Xa){for(var cb;-1<(cb=A.inArray(Xa,U,cb));)U.splice(cb,1),cb<=na&&na--}),this},has:function(Qa){return Qa?-1<A.inArray(Qa,U):0<U.length},empty:function(){return U&&=[],this},disable:function(){return Q=Z=[],U=F="",this},disabled:function(){return!U},lock:function(){return Q=Z=[],F||C||(U=F=""),this},locked:function(){return!!Q},
fireWith:function(Qa,Xa){return Q||(Xa=[Qa,(Xa=Xa||[]).slice?Xa.slice():Xa],Z.push(Xa),C||Da()),this},fire:function(){return ja.fireWith(this,arguments),this},fired:function(){return!!K}};return ja};A.extend({Deferred:function(q){var v=[["notify","progress",A.Callbacks("memory"),A.Callbacks("memory"),2],["resolve","done",A.Callbacks("once memory"),A.Callbacks("once memory"),0,"resolved"],["reject","fail",A.Callbacks("once memory"),A.Callbacks("once memory"),1,"rejected"]],x="pending",C={state:function(){return x},
always:function(){return F.done(arguments).fail(arguments),this},catch:function(K){return C.then(null,K)},pipe:function(){var K=arguments;return A.Deferred(function(Q){A.each(v,function(U,Z){var na=Ya(K[Z[4]])&&K[Z[4]];F[Z[1]](function(){var Da=na&&na.apply(this,arguments);Da&&Ya(Da.promise)?Da.promise().progress(Q.notify).done(Q.resolve).fail(Q.reject):Q[Z[0]+"With"](this,na?[Da]:arguments)})});K=null}).promise()},then:function(K,Q,U){function Z(Da,ja,Qa,Xa){return function(){var cb=this,Jb=arguments,
ic=function(){var Nc,sd;if(!(Da<na)){if((Nc=Qa.apply(cb,Jb))===ja.promise())throw TypeError("Thenable self-resolution");Ya(sd=Nc&&("object"==typeof Nc||"function"==typeof Nc)&&Nc.then)?Xa?sd.call(Nc,Z(na,ja,g,Xa),Z(na,ja,p,Xa)):(na++,sd.call(Nc,Z(na,ja,g,Xa),Z(na,ja,p,Xa),Z(na,ja,g,ja.notifyWith))):(Qa!==g&&(cb=void 0,Jb=[Nc]),(Xa||ja.resolveWith)(cb,Jb))}},Db=Xa?ic:function(){try{ic()}catch(Nc){A.Deferred.exceptionHook&&A.Deferred.exceptionHook(Nc,Db.error),Da+1>=na&&(Qa!==p&&(cb=void 0,Jb=[Nc]),
ja.rejectWith(cb,Jb))}};Da?Db():(A.Deferred.getErrorHook?Db.error=A.Deferred.getErrorHook():A.Deferred.getStackHook&&(Db.error=A.Deferred.getStackHook()),a.setTimeout(Db))}}var na=0;return A.Deferred(function(Da){v[0][3].add(Z(0,Da,Ya(U)?U:g,Da.notifyWith));v[1][3].add(Z(0,Da,Ya(K)?K:g));v[2][3].add(Z(0,Da,Ya(Q)?Q:p))}).promise()},promise:function(K){return null!=K?A.extend(K,C):C}},F={};return A.each(v,function(K,Q){var U=Q[2],Z=Q[5];C[Q[1]]=U.add;Z&&U.add(function(){x=Z},v[3-K][2].disable,v[3-K][3].disable,
v[0][2].lock,v[0][3].lock);U.add(Q[3].fire);F[Q[0]]=function(){return F[Q[0]+"With"](this===F?void 0:this,arguments),this};F[Q[0]+"With"]=U.fireWith}),C.promise(F),q&&q.call(F,F),F},when:function(q){var v=arguments.length,x=v,C=Array(x),F=Ab.call(arguments),K=A.Deferred(),Q=function(U){return function(Z){C[U]=this;F[U]=1<arguments.length?Ab.call(arguments):Z;--v||K.resolveWith(C,F)}};if(1>=v&&(m(q,K.done(Q(x)).resolve,K.reject,!v),"pending"===K.state()||Ya(F[x]&&F[x].then)))return K.then();for(;x--;)m(F[x],
Q(x),K.reject);return K.promise()}});var aa=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;A.Deferred.exceptionHook=function(q,v){a.console&&a.console.warn&&q&&aa.test(q.name)&&a.console.warn("jQuery.Deferred exception: "+q.message,q.stack,v)};A.readyException=function(q){a.setTimeout(function(){throw q;})};var qa=A.Deferred();A.fn.ready=function(q){return qa.then(q).catch(function(v){A.readyException(v)}),this};A.extend({isReady:!1,readyWait:1,ready:function(q){(!0===q?!--A.readyWait:!A.isReady)&&
(A.isReady=!0,!0!==q&&0<--A.readyWait||qa.resolveWith(lb,[A]))}});A.ready.then=qa.then;"complete"===lb.readyState||"loading"!==lb.readyState&&!lb.documentElement.doScroll?a.setTimeout(A.ready):(lb.addEventListener("DOMContentLoaded",n),a.addEventListener("load",n));var Aa=function(q,v,x,C,F,K,Q){var U=0,Z=q.length,na=null==x;if("object"===b(x))for(U in F=!0,x)Aa(q,v,U,x[U],!0,K,Q);else if(void 0!==C&&(F=!0,Ya(C)||(Q=!0),na&&(Q?(v.call(q,C),v=null):(na=v,v=function(Da,ja,Qa){return na.call(A(Da),Qa)})),
v))for(;U<Z;U++)v(q[U],x,Q?C:C.call(q[U],U,v(q[U],x)));return F?q:na?v.call(q):Z?v(q[0],x):K},Ba=/^-ms-/,Oa=/-([a-z])/g,tb=function(q){return 1===q.nodeType||9===q.nodeType||!+q.nodeType};w.uid=1;w.prototype={cache:function(q){var v=q[this.expando];return!v&&(v={},tb(q)&&(q.nodeType?q[this.expando]=v:Object.defineProperty(q,this.expando,{value:v,configurable:!0}))),v},set:function(q,v,x){var C;q=this.cache(q);if("string"==typeof v)q[u(v)]=x;else for(C in v)q[u(C)]=v[C];return q},get:function(q,v){return void 0===
v?this.cache(q):q[this.expando]&&q[this.expando][u(v)]},access:function(q,v,x){return void 0===v||v&&"string"==typeof v&&void 0===x?this.get(q,v):(this.set(q,v,x),void 0!==x?x:v)},remove:function(q,v){var x=q[this.expando];if(void 0!==x){if(void 0!==v){var C=(v=Array.isArray(v)?v.map(u):(v=u(v))in x?[v]:v.match(P)||[]).length;for(;C--;)delete x[v[C]]}(void 0===v||A.isEmptyObject(x))&&(q.nodeType?q[this.expando]=void 0:delete q[this.expando])}},hasData:function(q){q=q[this.expando];return void 0!==
q&&!A.isEmptyObject(q)}};var Ea=new w,ub=new w,Ec=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,jd=/[A-Z]/g;A.extend({hasData:function(q){return ub.hasData(q)||Ea.hasData(q)},data:function(q,v,x){return ub.access(q,v,x)},removeData:function(q,v){ub.remove(q,v)},_data:function(q,v,x){return Ea.access(q,v,x)},_removeData:function(q,v){Ea.remove(q,v)}});A.fn.extend({data:function(q,v){var x,C,F,K=this[0],Q=K&&K.attributes;if(void 0===q){if(this.length&&(F=ub.get(K),1===K.nodeType&&!Ea.get(K,"hasDataAttrs"))){for(x=
Q.length;x--;)Q[x]&&0===(C=Q[x].name).indexOf("data-")&&z(K,C=u(C.slice(5)),F[C]);Ea.set(K,"hasDataAttrs",!0)}return F}return"object"==typeof q?this.each(function(){ub.set(this,q)}):Aa(this,function(U){var Z;if(K&&void 0===U)return void 0!==(Z=ub.get(K,q))||void 0!==(Z=z(K,q))?Z:void 0;this.each(function(){ub.set(this,q,U)})},null,v,1<arguments.length,null,!0)},removeData:function(q){return this.each(function(){ub.remove(this,q)})}});A.extend({queue:function(q,v,x){var C;if(q)return v=(v||"fx")+"queue",
C=Ea.get(q,v),x&&(!C||Array.isArray(x)?C=Ea.access(q,v,A.makeArray(x)):C.push(x)),C||[]},dequeue:function(q,v){v=v||"fx";var x=A.queue(q,v),C=x.length,F=x.shift(),K=A._queueHooks(q,v);"inprogress"===F&&(F=x.shift(),C--);F&&("fx"===v&&x.unshift("inprogress"),delete K.stop,F.call(q,function(){A.dequeue(q,v)},K));!C&&K&&K.empty.fire()},_queueHooks:function(q,v){var x=v+"queueHooks";return Ea.get(q,x)||Ea.access(q,x,{empty:A.Callbacks("once memory").add(function(){Ea.remove(q,[v+"queue",x])})})}});A.fn.extend({queue:function(q,
v){var x=2;return("string"!=typeof q&&(v=q,q="fx",x--),arguments.length<x)?A.queue(this[0],q):void 0===v?this:this.each(function(){var C=A.queue(this,q,v);A._queueHooks(this,q);"fx"===q&&"inprogress"!==C[0]&&A.dequeue(this,q)})},dequeue:function(q){return this.each(function(){A.dequeue(this,q)})},clearQueue:function(q){return this.queue(q||"fx",[])},promise:function(q,v){var x,C=1,F=A.Deferred(),K=this,Q=this.length,U=function(){--C||F.resolveWith(K,[K])};"string"!=typeof q&&(v=q,q=void 0);for(q=
q||"fx";Q--;)(x=Ea.get(K[Q],q+"queueHooks"))&&x.empty&&(C++,x.empty.add(U));return U(),F.promise(v)}});var Ta=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$a=RegExp("^(?:([+-])=|)("+Ta+")([a-z%]*)$","i"),ab=["Top","Right","Bottom","Left"],Cb=lb.documentElement,Rb=function(q){return A.contains(q.ownerDocument,q)},wd={composed:!0};Cb.getRootNode&&(Rb=function(q){return A.contains(q.ownerDocument,q)||q.getRootNode(wd)===q.ownerDocument});var Qd=function(q,v){return"none"===(q=v||q).style.display||""===
q.style.display&&Rb(q)&&"none"===A.css(q,"display")},mi={};A.fn.extend({show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(q){return"boolean"==typeof q?q?this.show():this.hide():this.each(function(){Qd(this)?A(this).show():A(this).hide()})}});var qe=/^(?:checkbox|radio)$/i,ni=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,oi=/^$|^module$|\/(?:java|ecma)script/i;var af=lb.createDocumentFragment().appendChild(lb.createElement("div"));(bf=lb.createElement("input")).setAttribute("type",
"radio");bf.setAttribute("checked","checked");bf.setAttribute("name","t");af.appendChild(bf);jb.checkClone=af.cloneNode(!0).cloneNode(!0).lastChild.checked;af.innerHTML="<textarea>x</textarea>";jb.noCloneChecked=!!af.cloneNode(!0).lastChild.defaultValue;af.innerHTML="<option></option>";jb.option=!!af.lastChild;var Cd={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,
"",""]};Cd.tbody=Cd.tfoot=Cd.colgroup=Cd.caption=Cd.thead;Cd.th=Cd.td;jb.option||(Cd.optgroup=Cd.option=[1,"<select multiple='multiple'>","</select>"]);var Ek=/<|&#?\w+;/,pi=/^([^.]*)(?:\.(.+)|)/;A.event={global:{},add:function(q,v,x,C,F){var K,Q,U,Z,na,Da,ja,Qa;var Xa=Ea.get(q);if(tb(q))for(x.handler&&(x=(K=x).handler,F=K.selector),F&&A.find.matchesSelector(Cb,F),x.guid||(x.guid=A.guid++),(Z=Xa.events)||(Z=Xa.events=Object.create(null)),(Q=Xa.handle)||(Q=Xa.handle=function(Jb){return A.event.triggered!==
Jb.type?A.event.dispatch.apply(q,arguments):void 0}),Xa=(v=(v||"").match(P)||[""]).length;Xa--;){var cb=Qa=(U=pi.exec(v[Xa])||[])[1];U=(U[2]||"").split(".").sort();cb&&(Da=A.event.special[cb]||{},cb=(F?Da.delegateType:Da.bindType)||cb,Da=A.event.special[cb]||{},na=A.extend({type:cb,origType:Qa,data:C,handler:x,guid:x.guid,selector:F,needsContext:F&&A.expr.match.needsContext.test(F),namespace:U.join(".")},K),(ja=Z[cb])||((ja=Z[cb]=[]).delegateCount=0,(!Da.setup||!1===Da.setup.call(q,C,U,Q))&&q.addEventListener&&
q.addEventListener(cb,Q)),Da.add&&(Da.add.call(q,na),na.handler.guid||(na.handler.guid=x.guid)),F?ja.splice(ja.delegateCount++,0,na):ja.push(na),A.event.global[cb]=!0)}},remove:function(q,v,x,C,F){var K,Q,U,Z,na,Da,ja,Qa,Xa=Ea.hasData(q)&&Ea.get(q);if(Xa&&(Z=Xa.events)){for(na=(v=(v||"").match(P)||[""]).length;na--;)if(Da=Qa=(U=pi.exec(v[na])||[])[1],ja=(U[2]||"").split(".").sort(),Da){var cb=A.event.special[Da]||{};var Jb=Z[Da=(C?cb.delegateType:cb.bindType)||Da]||[];U=U[2]&&RegExp("(^|\\.)"+ja.join("\\.(?:.*\\.|)")+
"(\\.|$)");for(Q=K=Jb.length;K--;){var ic=Jb[K];!F&&Qa!==ic.origType||x&&x.guid!==ic.guid||U&&!U.test(ic.namespace)||C&&C!==ic.selector&&("**"!==C||!ic.selector)||(Jb.splice(K,1),ic.selector&&Jb.delegateCount--,!cb.remove||cb.remove.call(q,ic))}Q&&!Jb.length&&(cb.teardown&&!1!==cb.teardown.call(q,ja,Xa.handle)||A.removeEvent(q,Da,Xa.handle),delete Z[Da])}else for(Da in Z)A.event.remove(q,Da+v[na],x,C,!0);A.isEmptyObject(Z)&&Ea.remove(q,"handle events")}},dispatch:function(q){var v,x,C,F=Array(arguments.length),
K=A.event.fix(q);var Q=(Ea.get(this,"events")||Object.create(null))[K.type]||[];var U=A.event.special[K.type]||{};var Z=1;for(F[0]=K;Z<arguments.length;Z++)F[Z]=arguments[Z];if(K.delegateTarget=this,!U.preDispatch||!1!==U.preDispatch.call(this,K)){var na=A.event.handlers.call(this,K,Q);for(Z=0;(x=na[Z++])&&!K.isPropagationStopped();)for(K.currentTarget=x.elem,Q=0;(C=x.handlers[Q++])&&!K.isImmediatePropagationStopped();)K.rnamespace&&!1!==C.namespace&&!K.rnamespace.test(C.namespace)||(K.handleObj=
C,K.data=C.data,void 0===(v=((A.event.special[C.origType]||{}).handle||C.handler).apply(x.elem,F))||!1!==(K.result=v)||(K.preventDefault(),K.stopPropagation()));return U.postDispatch&&U.postDispatch.call(this,K),K.result}},handlers:function(q,v){var x,C,F,K=[],Q=v.delegateCount,U=q.target;if(Q&&U.nodeType&&!("click"===q.type&&1<=q.button))for(;U!==this;U=U.parentNode||this)if(1===U.nodeType&&("click"!==q.type||!0!==U.disabled)){var Z=0;var na=[];for(F={};Z<Q;Z++)void 0===F[C=(x=v[Z]).selector+" "]&&
(F[C]=x.needsContext?-1<A(C,this).index(U):A.find(C,this,null,[U]).length),F[C]&&na.push(x);na.length&&K.push({elem:U,handlers:na})}return U=this,Q<v.length&&K.push({elem:U,handlers:v.slice(Q)}),K},addProp:function(q,v){Object.defineProperty(A.Event.prototype,q,{enumerable:!0,configurable:!0,get:Ya(v)?function(){if(this.originalEvent)return v(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[q]},set:function(x){Object.defineProperty(this,q,{enumerable:!0,configurable:!0,
writable:!0,value:x})}})},fix:function(q){return q[A.expando]?q:new A.Event(q)},special:{load:{noBubble:!0},click:{setup:function(q){q=this||q;return qe.test(q.type)&&q.click&&k(q,"input")&&ma(q,"click",!0),!1},trigger:function(q){q=this||q;return qe.test(q.type)&&q.click&&k(q,"input")&&ma(q,"click"),!0},_default:function(q){q=q.target;return qe.test(q.type)&&q.click&&k(q,"input")&&Ea.get(q,"click")||k(q,"a")}},beforeunload:{postDispatch:function(q){void 0!==q.result&&q.originalEvent&&(q.originalEvent.returnValue=
q.result)}}}};A.removeEvent=function(q,v,x){q.removeEventListener&&q.removeEventListener(v,x)};A.Event=function(q,v){if(!(this instanceof A.Event))return new A.Event(q,v);q&&q.type?(this.originalEvent=q,this.type=q.type,this.isDefaultPrevented=q.defaultPrevented||void 0===q.defaultPrevented&&!1===q.returnValue?W:ka,this.target=q.target&&3===q.target.nodeType?q.target.parentNode:q.target,this.currentTarget=q.currentTarget,this.relatedTarget=q.relatedTarget):this.type=q;v&&A.extend(this,v);this.timeStamp=
q&&q.timeStamp||Date.now();this[A.expando]=!0};A.Event.prototype={constructor:A.Event,isDefaultPrevented:ka,isPropagationStopped:ka,isImmediatePropagationStopped:ka,isSimulated:!1,preventDefault:function(){var q=this.originalEvent;this.isDefaultPrevented=W;q&&!this.isSimulated&&q.preventDefault()},stopPropagation:function(){var q=this.originalEvent;this.isPropagationStopped=W;q&&!this.isSimulated&&q.stopPropagation()},stopImmediatePropagation:function(){var q=this.originalEvent;this.isImmediatePropagationStopped=
W;q&&!this.isSimulated&&q.stopImmediatePropagation();this.stopPropagation()}};A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},A.event.addProp);A.each({focus:"focusin",blur:"focusout"},function(q,
v){function x(C){if(lb.documentMode){var F=Ea.get(this,"handle"),K=A.event.fix(C);K.type="focusin"===C.type?"focus":"blur";K.isSimulated=!0;F(C);K.target===K.currentTarget&&F(K)}else A.event.simulate(v,C.target,A.event.fix(C))}A.event.special[q]={setup:function(){var C;if(ma(this,q,!0),!lb.documentMode)return!1;(C=Ea.get(this,v))||this.addEventListener(v,x);Ea.set(this,v,(C||0)+1)},trigger:function(){return ma(this,q),!0},teardown:function(){var C;if(!lb.documentMode)return!1;(C=Ea.get(this,v)-1)?
Ea.set(this,v,C):(this.removeEventListener(v,x),Ea.remove(this,v))},_default:function(C){return Ea.get(C.target,q)},delegateType:v};A.event.special[v]={setup:function(){var C=this.ownerDocument||this.document||this,F=lb.documentMode?this:C,K=Ea.get(F,v);K||(lb.documentMode?this.addEventListener(v,x):C.addEventListener(q,x,!0));Ea.set(F,v,(K||0)+1)},teardown:function(){var C=this.ownerDocument||this.document||this,F=lb.documentMode?this:C,K=Ea.get(F,v)-1;K?Ea.set(F,v,K):(lb.documentMode?this.removeEventListener(v,
x):C.removeEventListener(q,x,!0),Ea.remove(F,v))}}});A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(q,v){A.event.special[q]={delegateType:v,bindType:v,handle:function(x){var C,F=x.relatedTarget,K=x.handleObj;return F&&(F===this||A.contains(this,F))||(x.type=K.origType,C=K.handler.apply(this,arguments),x.type=v),C}}});A.fn.extend({on:function(q,v,x,C){return ea(this,q,v,x,C)},one:function(q,v,x,C){return ea(this,q,v,x,C,1)},off:function(q,
v,x){var C,F;if(q&&q.preventDefault&&q.handleObj)return C=q.handleObj,A(q.delegateTarget).off(C.namespace?C.origType+"."+C.namespace:C.origType,C.selector,C.handler),this;if("object"==typeof q){for(F in q)this.off(F,v,q[F]);return this}return(!1===v||"function"==typeof v)&&(x=v,v=void 0),!1===x&&(x=ka),this.each(function(){A.event.remove(this,q,x,v)})}});var Ik=/<script|<style|<link/i,Ng=/checked\s*(?:[^=]|=\s*.checked.)/i,Ye=/^\s*<!\[CDATA\[|\]\]>\s*$/g;A.extend({htmlPrefilter:function(q){return q},
clone:function(q,v,x){var C,F,K=q.cloneNode(!0),Q=Rb(q);if(!(jb.noCloneChecked||1!==q.nodeType&&11!==q.nodeType||A.isXMLDoc(q))){var U=0;var Z=N(K);for(C=(F=N(q)).length;U<C;U++){var na=F[U],Da=Z[U],ja=Da.nodeName.toLowerCase();"input"===ja&&qe.test(na.type)?Da.checked=na.checked:("input"===ja||"textarea"===ja)&&(Da.defaultValue=na.defaultValue);!0}}if(v)if(x)for(U=0,F=F||N(q),Z=Z||N(K),C=F.length;U<C;U++)V(F[U],Z[U]);else V(q,K);return 0<(Z=N(K,"script")).length&&M(Z,!Q&&N(q,"script")),K},cleanData:function(q){for(var v,
x,C,F=A.event.special,K=0;void 0!==(x=q[K]);K++)if(tb(x)){if(v=x[Ea.expando]){if(v.events)for(C in v.events)F[C]?A.event.remove(x,C):A.removeEvent(x,C,v.handle);x[Ea.expando]=void 0}x[ub.expando]&&(x[ub.expando]=void 0)}}});A.fn.extend({detach:function(q){return wa(this,q,!0)},remove:function(q){return wa(this,q)},text:function(q){return Aa(this,function(v){return void 0===v?A.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=v)})},
null,q,arguments.length)},append:function(){return Na(this,arguments,function(q){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ca(this,q).appendChild(q)})},prepend:function(){return Na(this,arguments,function(q){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var v=Ca(this,q);v.insertBefore(q,v.firstChild)}})},before:function(){return Na(this,arguments,function(q){this.parentNode&&this.parentNode.insertBefore(q,this)})},after:function(){return Na(this,arguments,function(q){this.parentNode&&
this.parentNode.insertBefore(q,this.nextSibling)})},empty:function(){for(var q,v=0;null!=(q=this[v]);v++)1===q.nodeType&&(A.cleanData(N(q,!1)),q.textContent="");return this},clone:function(q,v){return q=null!=q&&q,v=null==v?q:v,this.map(function(){return A.clone(this,q,v)})},html:function(q){return Aa(this,function(v){var x=this[0]||{},C=0,F=this.length;if(void 0===v&&1===x.nodeType)return x.innerHTML;if("string"==typeof v&&!Ik.test(v)&&!Cd[(ni.exec(v)||["",""])[1].toLowerCase()]){v=A.htmlPrefilter(v);
try{for(;C<F;C++)x=this[C]||{},1===x.nodeType&&(A.cleanData(N(x,!1)),x.innerHTML=v);x=0}catch(K){}}x&&this.empty().append(v)},null,q,arguments.length)},replaceWith:function(){var q=[];return Na(this,arguments,function(v){var x=this.parentNode;0>A.inArray(this,q)&&(A.cleanData(N(this)),x&&x.replaceChild(v,this))},q)}});A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(q,v){A.fn[q]=function(x){for(var C=[],F=A(x),K=F.length-1,
Q=0;Q<=K;Q++)x=Q===K?this:this.clone(!0),A(F[Q])[v](x),pb.apply(C,x.get());return this.pushStack(C)}});var Df=RegExp("^("+Ta+")(?!px)[a-z%]+$","i"),Bf=/^--/,Cf=function(q){var v=q.ownerDocument.defaultView;return v&&v.opener||(v=a),v.getComputedStyle(q)},kg=function(q,v,x){var C,F={};for(C in v)F[C]=q.style[C],q.style[C]=v[C];for(C in x=x.call(q),v)q.style[C]=F[C];return x},Kd=RegExp(ab.join("|"),"i");!function(){function q(){if(Z){U.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";
Z.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";Cb.appendChild(U).appendChild(Z);var na=a.getComputedStyle(Z);v="1%"!==na.top;Q=12===Math.round(parseFloat(na.marginLeft));Z.style.right="60%";F=36===Math.round(parseFloat(na.right));x=36===Math.round(parseFloat(na.width));Z.style.position="absolute";C=12===Math.round(parseFloat(Z.offsetWidth/3));Cb.removeChild(U);Z=null}}var v,x,C,F,K,Q,U=lb.createElement("div"),
Z=lb.createElement("div");Z.style&&(Z.style.backgroundClip="content-box",Z.cloneNode(!0).style.backgroundClip="",jb.clearCloneStyle="content-box"===Z.style.backgroundClip,A.extend(jb,{boxSizingReliable:function(){return q(),x},pixelBoxStyles:function(){return q(),F},pixelPosition:function(){return q(),v},reliableMarginLeft:function(){return q(),Q},scrollboxSize:function(){return q(),C},reliableTrDimensions:function(){var na,Da,ja,Qa;return null==K&&(na=lb.createElement("table"),Da=lb.createElement("tr"),
ja=lb.createElement("div"),na.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Da.style.cssText="box-sizing:content-box;border:1px solid",Da.style.height="1px",ja.style.height="9px",ja.style.display="block",Cb.appendChild(na).appendChild(Da).appendChild(ja),K=parseInt((Qa=a.getComputedStyle(Da)).height,10)+parseInt(Qa.borderTopWidth,10)+parseInt(Qa.borderBottomWidth,10)===Da.offsetHeight,Cb.removeChild(na)),K}}))}();var $d=["Webkit","Moz","ms"],Ge=lb.createElement("div").style,
Og={},Jk=/^(none|table(?!-c[ea]).+)/,Rg={position:"absolute",visibility:"hidden",display:"block"},Ef={letterSpacing:"0",fontWeight:"400"};A.extend({cssHooks:{opacity:{get:function(q,v){if(v)return q=wb(q,"opacity"),""===q?"1":q}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,
scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(q,v,x,C){if(q&&3!==q.nodeType&&8!==q.nodeType&&q.style){var F,K,Q,U=u(v),Z=Bf.test(v),na=q.style;if(Z||(v=Yb(U)),Q=A.cssHooks[v]||A.cssHooks[U],void 0===x)return Q&&"get"in Q&&void 0!==(F=Q.get(q,!1,C))?F:na[v];"string"===(K=void 0===x?"undefined":Vd(x))&&(F=$a.exec(x))&&F[1]&&(x=G(q,v,F),K="number");null!=x&&x==x&&("number"!==K||Z||(x+=F&&F[3]||(A.cssNumber[U]?
"":"px")),jb.clearCloneStyle||""!==x||0!==v.indexOf("background")||(na[v]="inherit"),Q&&"set"in Q&&void 0===(x=Q.set(q,x,C))||(Z?na.setProperty(v,x):na[v]=x))}},css:function(q,v,x,C){var F,K,Q,U=u(v);return(Bf.test(v)||(v=Yb(U)),(Q=A.cssHooks[v]||A.cssHooks[U])&&"get"in Q&&(F=Q.get(q,!0,x)),void 0===F&&(F=wb(q,v,C)),"normal"===F&&v in Ef&&(F=Ef[v]),""===x||x)?(K=parseFloat(F),!0===x||isFinite(K)?K||0:F):F}});A.each(["height","width"],function(q,v){A.cssHooks[v]={get:function(x,C,F){if(C)return!Jk.test(A.css(x,
"display"))||x.getClientRects().length&&x.getBoundingClientRect().width?Mc(x,v,F):kg(x,Rg,function(){return Mc(x,v,F)})},set:function(x,C,F){var K,Q=Cf(x),U=!jb.scrollboxSize()&&"absolute"===Q.position,Z=(U||F)&&"border-box"===A.css(x,"boxSizing",!1,Q);F=F?Va(x,v,F,Z,Q):0;return Z&&U&&(F-=Math.ceil(x["offset"+v[0].toUpperCase()+v.slice(1)]-parseFloat(Q[v])-Va(x,v,"border",!1,Q)-.5)),F&&(K=$a.exec(C))&&"px"!==(K[3]||"px")&&(x.style[v]=C,C=A.css(x,v)),Pb(x,C,F)}}});A.cssHooks.marginLeft=kb(jb.reliableMarginLeft,
function(q,v){if(v)return(parseFloat(wb(q,"marginLeft"))||q.getBoundingClientRect().left-kg(q,{marginLeft:0},function(){return q.getBoundingClientRect().left}))+"px"});A.each({margin:"",padding:"",border:"Width"},function(q,v){A.cssHooks[q+v]={expand:function(x){var C=0,F={};for(x="string"==typeof x?x.split(" "):[x];4>C;C++)F[q+ab[C]+v]=x[C]||x[C-2]||x[0];return F}};"margin"!==q&&(A.cssHooks[q+v].set=Pb)});A.fn.extend({css:function(q,v){return Aa(this,function(x,C,F){var K,Q={},U=0;if(Array.isArray(C)){F=
Cf(x);for(K=C.length;U<K;U++)Q[C[U]]=A.css(x,C[U],!1,F);return Q}return void 0!==F?A.style(x,C,F):A.css(x,C)},q,v,1<arguments.length)}});A.Tween=jc;jc.prototype={constructor:jc,init:function(q,v,x,C,F,K){this.elem=q;this.prop=x;this.easing=F||A.easing._default;this.options=v;this.start=this.now=this.cur();this.end=C;this.unit=K||(A.cssNumber[x]?"":"px")},cur:function(){var q=jc.propHooks[this.prop];return q&&q.get?q.get(this):jc.propHooks._default.get(this)},run:function(q){var v,x=jc.propHooks[this.prop];
return this.options.duration?this.pos=v=A.easing[this.easing](q,this.options.duration*q,0,1,this.options.duration):this.pos=v=q,this.now=(this.end-this.start)*v+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),x&&x.set?x.set(this):jc.propHooks._default.set(this),this}};jc.prototype.init.prototype=jc.prototype;jc.propHooks={_default:{get:function(q){var v;return 1!==q.elem.nodeType||null!=q.elem[q.prop]&&null==q.elem.style[q.prop]?q.elem[q.prop]:(v=A.css(q.elem,q.prop,
""))&&"auto"!==v?v:0},set:function(q){A.fx.step[q.prop]?A.fx.step[q.prop](q):1!==q.elem.nodeType||!A.cssHooks[q.prop]&&null==q.elem.style[Yb(q.prop)]?q.elem[q.prop]=q.now:A.style(q.elem,q.prop,q.now+q.unit)}}};jc.propHooks.scrollTop=jc.propHooks.scrollLeft={set:function(q){q.elem.nodeType&&q.elem.parentNode&&(q.elem[q.prop]=q.now)}};A.easing={linear:function(q){return q},swing:function(q){return.5-Math.cos(q*Math.PI)/2},_default:"swing"};A.fx=jc.prototype.init;A.fx.step={};var bf,Ze,lg,qi=/^(?:toggle|show|hide)$/,
ri=/queueHooks$/;A.Animation=A.extend(ua,{tweeners:{"*":[function(q,v){var x=this.createTween(q,v);return G(x.elem,q,$a.exec(v),x),x}]},tweener:function(q,v){Ya(q)?(v=q,q=["*"]):q=q.match(P);for(var x,C=0,F=q.length;C<F;C++)x=q[C],ua.tweeners[x]=ua.tweeners[x]||[],ua.tweeners[x].unshift(v)},prefilters:[function(q,v,x){var C,F,K,Q,U,Z,na,Da="width"in v||"height"in v,ja=this,Qa={},Xa=q.style,cb=q.nodeType&&Qd(q),Jb=Ea.get(q,"fxshow");for(C in x.queue||(null==(Q=A._queueHooks(q,"fx")).unqueued&&(Q.unqueued=
0,U=Q.empty.fire,Q.empty.fire=function(){Q.unqueued||U()}),Q.unqueued++,ja.always(function(){ja.always(function(){Q.unqueued--;A.queue(q,"fx").length||Q.empty.fire()})})),v)if(F=v[C],qi.test(F)){if(delete v[C],K=K||"toggle"===F,F===(cb?"hide":"show")){if("show"!==F||!Jb||void 0===Jb[C])continue;cb=!0}Qa[C]=Jb&&Jb[C]||A.style(q,C)}if((v=!A.isEmptyObject(v))||!A.isEmptyObject(Qa))for(C in Da&&1===q.nodeType&&(x.overflow=[Xa.overflow,Xa.overflowX,Xa.overflowY],null==(Z=Jb&&Jb.display)&&(Z=Ea.get(q,"display")),
"none"===(na=A.css(q,"display"))&&(Z?na=Z:(L([q],!0),Z=q.style.display||Z,na=A.css(q,"display"),L([q]))),("inline"===na||"inline-block"===na&&null!=Z)&&"none"===A.css(q,"float")&&(v||(ja.done(function(){Xa.display=Z}),null!=Z||(Z="none"===(na=Xa.display)?"":na)),Xa.display="inline-block")),x.overflow&&(Xa.overflow="hidden",ja.always(function(){Xa.overflow=x.overflow[0];Xa.overflowX=x.overflow[1];Xa.overflowY=x.overflow[2]})),v=!1,Qa)v||(Jb?"hidden"in Jb&&(cb=Jb.hidden):Jb=Ea.access(q,"fxshow",{display:Z}),
K&&(Jb.hidden=!cb),cb&&L([q],!0),ja.done(function(){for(C in cb||L([q]),Ea.remove(q,"fxshow"),Qa)A.style(q,C,Qa[C])})),v=va(cb?Jb[C]:0,C,ja),C in Jb||(Jb[C]=v.start,cb&&(v.end=v.start,v.start=0))}],prefilter:function(q,v){v?ua.prefilters.unshift(q):ua.prefilters.push(q)}});A.speed=function(q,v,x){var C=q&&"object"==typeof q?A.extend({},q):{complete:x||!x&&v||Ya(q)&&q,duration:q,easing:x&&v||v&&!Ya(v)&&v};return A.fx.off?C.duration=0:"number"!=typeof C.duration&&(C.duration in A.fx.speeds?C.duration=
A.fx.speeds[C.duration]:C.duration=A.fx.speeds._default),(null==C.queue||!0===C.queue)&&(C.queue="fx"),C.old=C.complete,C.complete=function(){Ya(C.old)&&C.old.call(this);C.queue&&A.dequeue(this,C.queue)},C};A.fn.extend({fadeTo:function(q,v,x,C){return this.filter(Qd).css("opacity",0).show().end().animate({opacity:v},q,x,C)},animate:function(q,v,x,C){var F=A.isEmptyObject(q),K=A.speed(v,x,C);v=function(){var Q=ua(this,A.extend({},q),K);(F||Ea.get(this,"finish"))&&Q.stop(!0)};return v.finish=v,F||!1===
K.queue?this.each(v):this.queue(K.queue,v)},stop:function(q,v,x){var C=function(F){var K=F.stop;delete F.stop;K(x)};return"string"!=typeof q&&(x=v,v=q,q=void 0),v&&this.queue(q||"fx",[]),this.each(function(){var F=!0,K=null!=q&&q+"queueHooks",Q=A.timers,U=Ea.get(this);if(K)U[K]&&U[K].stop&&C(U[K]);else for(K in U)U[K]&&U[K].stop&&ri.test(K)&&C(U[K]);for(K=Q.length;K--;)Q[K].elem!==this||null!=q&&Q[K].queue!==q||(Q[K].anim.stop(x),F=!1,Q.splice(K,1));!F&&x||A.dequeue(this,q)})},finish:function(q){return!1!==
q&&(q=q||"fx"),this.each(function(){var v=Ea.get(this),x=v[q+"queue"];var C=v[q+"queueHooks"];var F=A.timers,K=x?x.length:0;v.finish=!0;A.queue(this,q,[]);C&&C.stop&&C.stop.call(this,!0);for(C=F.length;C--;)F[C].elem===this&&F[C].queue===q&&(F[C].anim.stop(!0),F.splice(C,1));for(C=0;C<K;C++)x[C]&&x[C].finish&&x[C].finish.call(this);delete v.finish})}});A.each(["toggle","show","hide"],function(q,v){var x=A.fn[v];A.fn[v]=function(C,F,K){return null==C||"boolean"==typeof C?x.apply(this,arguments):this.animate(X(v,
!0),C,F,K)}});A.each({slideDown:X("show"),slideUp:X("hide"),slideToggle:X("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(q,v){A.fn[q]=function(x,C,F){return this.animate(v,x,C,F)}});A.timers=[];A.fx.tick=function(){var q,v=0,x=A.timers;for(Ze=Date.now();v<x.length;v++)(q=x[v])()||x[v]!==q||x.splice(v--,1);x.length||A.fx.stop();Ze=void 0};A.fx.timer=function(q){A.timers.push(q);A.fx.start()};A.fx.interval=13;A.fx.start=function(){lg||(lg=!0,function v(){lg&&
(!1===lb.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(v):a.setTimeout(v,A.fx.interval),A.fx.tick())}())};A.fx.stop=function(){lg=null};A.fx.speeds={slow:600,fast:200,_default:400};A.fn.delay=function(q,v){return q=A.fx&&A.fx.speeds[q]||q,v=v||"fx",this.queue(v,function(x,C){var F=a.setTimeout(x,q);C.stop=function(){a.clearTimeout(F)}})};var cf=lb.createElement("input");var Sg=lb.createElement("select").appendChild(lb.createElement("option"));cf.type="checkbox";jb.checkOn=""!==cf.value;
jb.optSelected=Sg.selected;(cf=lb.createElement("input")).value="t";cf.type="radio";jb.radioValue="t"===cf.value;var df=A.expr.attrHandle;A.fn.extend({attr:function(q,v){return Aa(this,A.attr,q,v,1<arguments.length)},removeAttr:function(q){return this.each(function(){A.removeAttr(this,q)})}});A.extend({attr:function(q,v,x){var C,F,K=q.nodeType;if(3!==K&&8!==K&&2!==K){if(void 0===q.getAttribute)return A.prop(q,v,x);if(1===K&&A.isXMLDoc(q)||(F=A.attrHooks[v.toLowerCase()]||(A.expr.match.bool.test(v)?
si:void 0)),void 0!==x){if(null===x){A.removeAttr(q,v);return}return F&&"set"in F&&void 0!==(C=F.set(q,x,v))?C:(q.setAttribute(v,x+""),x)}return F&&"get"in F&&null!==(C=F.get(q,v))?C:null==(C=A.find.attr(q,v))?void 0:C}},attrHooks:{type:{set:function(q,v){if(!jb.radioValue&&"radio"===v&&k(q,"input")){var x=q.value;return q.setAttribute("type",v),x&&(q.value=x),v}}}},removeAttr:function(q,v){var x=0,C=v&&v.match(P);if(C&&1===q.nodeType)for(;v=C[x++];)q.removeAttribute(v)}});var si={set:function(q,
v,x){return!1===v?A.removeAttr(q,x):q.setAttribute(x,x),x}};A.each(A.expr.match.bool.source.match(/\w+/g),function(q,v){var x=df[v]||A.find.attr;df[v]=function(C,F,K){var Q,U,Z=F.toLowerCase();return K||(U=df[Z],df[Z]=Q,Q=null!=x(C,F,K)?Z:null,df[Z]=U),Q}});var Kk=/^(?:input|select|textarea|button)$/i,Lk=/^(?:a|area)$/i;A.fn.extend({prop:function(q,v){return Aa(this,A.prop,q,v,1<arguments.length)},removeProp:function(q){return this.each(function(){delete this[A.propFix[q]||q]})}});A.extend({prop:function(q,
v,x){var C,F,K=q.nodeType;if(3!==K&&8!==K&&2!==K)return(1===K&&A.isXMLDoc(q)||(v=A.propFix[v]||v,F=A.propHooks[v]),void 0!==x)?F&&"set"in F&&void 0!==(C=F.set(q,x,v))?C:q[v]=x:F&&"get"in F&&null!==(C=F.get(q,v))?C:q[v]},propHooks:{tabIndex:{get:function(q){var v=A.find.attr(q,"tabindex");return v?parseInt(v,10):Kk.test(q.nodeName)||Lk.test(q.nodeName)&&q.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}});jb.optSelected||(A.propHooks.selected={get:function(q){q=q.parentNode;return q&&q.parentNode&&
q.parentNode.selectedIndex,null},set:function(q){q=q.parentNode;q&&(q.selectedIndex,q.parentNode&&q.parentNode.selectedIndex)}});A.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){A.propFix[this.toLowerCase()]=this});A.fn.extend({addClass:function(q){var v,x,C,F,K,Q;return Ya(q)?this.each(function(U){A(this).addClass(q.call(this,U,xb(this)))}):(v=Ka(q)).length?this.each(function(){if(C=xb(this),x=1===this.nodeType&&
" "+bb(C)+" "){for(K=0;K<v.length;K++)F=v[K],0>x.indexOf(" "+F+" ")&&(x+=F+" ");C!==(Q=bb(x))&&this.setAttribute("class",Q)}}):this},removeClass:function(q){var v,x,C,F,K,Q;return Ya(q)?this.each(function(U){A(this).removeClass(q.call(this,U,xb(this)))}):arguments.length?(v=Ka(q)).length?this.each(function(){if(C=xb(this),x=1===this.nodeType&&" "+bb(C)+" "){for(K=0;K<v.length;K++)for(F=v[K];-1<x.indexOf(" "+F+" ");)x=x.replace(" "+F+" "," ");C!==(Q=bb(x))&&this.setAttribute("class",Q)}}):this:this.attr("class",
"")},toggleClass:function(q,v){var x,C,F,K,Q=void 0===q?"undefined":Vd(q),U="string"===Q||Array.isArray(q);return Ya(q)?this.each(function(Z){A(this).toggleClass(q.call(this,Z,xb(this),v),v)}):"boolean"==typeof v&&U?v?this.addClass(q):this.removeClass(q):(x=Ka(q),this.each(function(){if(U)for(F=0,K=A(this);F<x.length;F++)C=x[F],K.hasClass(C)?K.removeClass(C):K.addClass(C);else(void 0===q||"boolean"===Q)&&((C=xb(this))&&Ea.set(this,"__className__",C),this.setAttribute&&this.setAttribute("class",C||
!1===q?"":Ea.get(this,"__className__")||""))}))},hasClass:function(q){var v,x=0;for(q=" "+q+" ";v=this[x++];)if(1===v.nodeType&&-1<(" "+bb(xb(v))+" ").indexOf(q))return!0;return!1}});var Tg=/\r/g;A.fn.extend({val:function(q){var v,x,C,F=this[0];return arguments.length?(C=Ya(q),this.each(function(K){var Q;1!==this.nodeType||(null==(Q=C?q.call(this,K,A(this).val()):q)?Q="":"number"==typeof Q?Q+="":Array.isArray(Q)&&(Q=A.map(Q,function(U){return null==U?"":U+""})),(v=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()])&&
"set"in v&&void 0!==v.set(this,Q,"value")||(this.value=Q))})):F?(v=A.valHooks[F.type]||A.valHooks[F.nodeName.toLowerCase()])&&"get"in v&&void 0!==(x=v.get(F,"value"))?x:"string"==typeof(x=F.value)?x.replace(Tg,""):null==x?"":x:void 0}});A.extend({valHooks:{option:{get:function(q){var v=A.find.attr(q,"value");return null!=v?v:bb(A.text(q))}},select:{get:function(q){var v,x,C=q.options,F=q.selectedIndex,K="select-one"===q.type,Q=K?null:[],U=K?F+1:C.length;for(x=0>F?U:K?F:0;x<U;x++)if(!(!(v=C[x]).selected&&
x!==F||v.disabled||v.parentNode.disabled&&k(v.parentNode,"optgroup"))){if(q=A(v).val(),K)return q;Q.push(q)}return Q},set:function(q,v){var x,C,F=q.options;v=A.makeArray(v);for(var K=F.length;K--;)((C=F[K]).selected=-1<A.inArray(A.valHooks.option.get(C),v))&&(x=!0);return x||(q.selectedIndex=-1),v}}}});A.each(["radio","checkbox"],function(){A.valHooks[this]={set:function(q,v){if(Array.isArray(v))return q.checked=-1<A.inArray(A(q).val(),v)}};jb.checkOn||(A.valHooks[this].get=function(q){return null===
q.getAttribute("value")?"on":q.value})});var ef=a.location,ti=Date.now(),Ug=/\?/;A.parseXML=function(q){var v;if(!q||"string"!=typeof q)return null;try{var x=(new a.DOMParser).parseFromString(q,"text/xml")}catch(C){}return v=x&&x.getElementsByTagName("parsererror")[0],(!x||v)&&A.error("Invalid XML: "+(v?A.map(v.childNodes,function(C){return C.textContent}).join("\n"):q)),x};var ui=/^(?:focusinfocus|focusoutblur)$/,vi=function(q){q.stopPropagation()};A.extend(A.event,{trigger:function(q,v,x,C){var F,
K,Q,U,Z,na,Da=[x||lb],ja=wc.call(q,"type")?q.type:q;var Qa=wc.call(q,"namespace")?q.namespace.split("."):[];if(F=na=K=x=x||lb,3!==x.nodeType&&8!==x.nodeType&&!ui.test(ja+A.event.triggered)&&(-1<ja.indexOf(".")&&(ja=(Qa=ja.split(".")).shift(),Qa.sort()),Q=0>ja.indexOf(":")&&"on"+ja,(q=q[A.expando]?q:new A.Event(ja,"object"==typeof q&&q)).isTrigger=C?2:3,q.namespace=Qa.join("."),q.rnamespace=q.namespace?RegExp("(^|\\.)"+Qa.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,q.result=void 0,q.target||(q.target=x),
v=null==v?[q]:A.makeArray(v,[q]),Z=A.event.special[ja]||{},C||!Z.trigger||!1!==Z.trigger.apply(x,v))){if(!C&&!Z.noBubble&&!Zc(x)){var Xa=Z.delegateType||ja;for(ui.test(Xa+ja)||(F=F.parentNode);F;F=F.parentNode)Da.push(F),K=F;K===(x.ownerDocument||lb)&&Da.push(K.defaultView||K.parentWindow||a)}for(Qa=0;(F=Da[Qa++])&&!q.isPropagationStopped();)na=F,q.type=1<Qa?Xa:Z.bindType||ja,(U=(Ea.get(F,"events")||Object.create(null))[q.type]&&Ea.get(F,"handle"))&&U.apply(F,v),(U=Q&&F[Q])&&U.apply&&tb(F)&&(q.result=
U.apply(F,v),!1===q.result&&q.preventDefault());return q.type=ja,!C&&!q.isDefaultPrevented()&&(!Z._default||!1===Z._default.apply(Da.pop(),v))&&tb(x)&&Q&&Ya(x[ja])&&!Zc(x)&&((K=x[Q])&&(x[Q]=null),A.event.triggered=ja,q.isPropagationStopped()&&na.addEventListener(ja,vi),x[ja](),q.isPropagationStopped()&&na.removeEventListener(ja,vi),A.event.triggered=void 0,K&&(x[Q]=K)),q.result}},simulate:function(q,v,x){q=A.extend(new A.Event,x,{type:q,isSimulated:!0});A.event.trigger(q,null,v)}});A.fn.extend({trigger:function(q,
v){return this.each(function(){A.event.trigger(q,v,this)})},triggerHandler:function(q,v){var x=this[0];if(x)return A.event.trigger(q,v,x,!0)}});var wi=/\[\]$/,Vg=/\r?\n/g,Mk=/^(?:submit|button|image|reset|file)$/i,Nk=/^(?:input|select|textarea|keygen)/i;A.param=function(q,v){var x,C=[],F=function(K,Q){Q=Ya(Q)?Q():Q;C[C.length]=encodeURIComponent(K)+"="+encodeURIComponent(null==Q?"":Q)};if(null==q)return"";if(Array.isArray(q)||q.jquery&&!A.isPlainObject(q))A.each(q,function(){F(this.name,this.value)});
else for(x in q)!function Da(Q,U,Z,na){var ja;if(Array.isArray(U))A.each(U,function(Qa,Xa){Z||wi.test(Q)?na(Q,Xa):Da(Q+"["+("object"==typeof Xa&&null!=Xa?Qa:"")+"]",Xa,Z,na)});else if(Z||"object"!==b(U))na(Q,U);else for(ja in U)Da(Q+"["+ja+"]",U[ja],Z,na)}(x,q[x],v,F);return C.join("&")};A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var q=A.prop(this,"elements");return q?A.makeArray(q):this}).filter(function(){var q=this.type;
return this.name&&!A(this).is(":disabled")&&Nk.test(this.nodeName)&&!Mk.test(q)&&(this.checked||!qe.test(q))}).map(function(q,v){q=A(this).val();return null==q?null:Array.isArray(q)?A.map(q,function(x){return{name:v.name,value:x.replace(Vg,"\r\n")}}):{name:v.name,value:q.replace(Vg,"\r\n")}}).get()}});var Ok=/%20/g,Pk=/#.*$/,Qk=/([?&])_=[^&]*/,Rk=/^(.*?):[ \t]*([^\r\n]*)$/mg,Sk=/^(?:GET|HEAD)$/,Tk=/^\/\//,xi={},Pg={},re="*/".concat("*"),mg=lb.createElement("a");mg.href=ef.href;A.extend({active:0,
lastModified:{},etag:{},ajaxSettings:{url:ef.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ef.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":re,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,
"text html":!0,"text json":JSON.parse,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(q,v){return v?kc(kc(q,A.ajaxSettings),v):kc(A.ajaxSettings,q)},ajaxPrefilter:fc(xi),ajaxTransport:fc(Pg),ajax:function(q,v){function x(zb,lc,Rc,Ld){var Gc,oc,nd,oe,He,td=lc;Ob||(Ob=!0,U&&a.clearTimeout(U),C=void 0,K=Ld||"",Lb.readyState=0<zb?4:0,Gc=200<=zb&&300>zb||304===zb,Rc&&(oe=function(Xc,fd,be){for(var pe,gd,rc,Hc,Pd=Xc.contents,Lc=Xc.dataTypes;"*"===Lc[0];)Lc.shift(),void 0===pe&&
(pe=Xc.mimeType||fd.getResponseHeader("Content-Type"));if(pe)for(gd in Pd)if(Pd[gd]&&Pd[gd].test(pe)){Lc.unshift(gd);break}if(Lc[0]in be)rc=Lc[0];else{for(gd in be){if(!Lc[0]||Xc.converters[gd+" "+Lc[0]]){rc=gd;break}Hc||=gd}rc=rc||Hc}if(rc)return rc!==Lc[0]&&Lc.unshift(rc),be[rc]}(ja,Lb,Rc)),!Gc&&-1<A.inArray("script",ja.dataTypes)&&0>A.inArray("json",ja.dataTypes)&&(ja.converters["text script"]=function(){}),oe=function(Xc,fd,be,pe){var gd,rc,Hc,Pd,Lc,md={},$e=Xc.dataTypes.slice();if($e[1])for(Hc in Xc.converters)md[Hc.toLowerCase()]=
Xc.converters[Hc];for(rc=$e.shift();rc;)if(Xc.responseFields[rc]&&(be[Xc.responseFields[rc]]=fd),!Lc&&pe&&Xc.dataFilter&&(fd=Xc.dataFilter(fd,Xc.dataType)),Lc=rc,rc=$e.shift())if("*"===rc)rc=Lc;else if("*"!==Lc&&Lc!==rc){if(!(Hc=md[Lc+" "+rc]||md["* "+rc]))for(gd in md)if((Pd=gd.split(" "))[1]===rc&&(Hc=md[Lc+" "+Pd[0]]||md["* "+Pd[0]])){!0===Hc?Hc=md[gd]:!0!==md[gd]&&(rc=Pd[0],$e.unshift(Pd[1]));break}if(!0!==Hc)if(Hc&&Xc.throws)fd=Hc(fd);else try{fd=Hc(fd)}catch(jg){return{state:"parsererror",error:Hc?
jg:"No conversion from "+Lc+" to "+rc}}}return{state:"success",data:fd}}(ja,oe,Lb,Gc),Gc?(ja.ifModified&&((He=Lb.getResponseHeader("Last-Modified"))&&(A.lastModified[F]=He),(He=Lb.getResponseHeader("etag"))&&(A.etag[F]=He)),204===zb||"HEAD"===ja.type?td="nocontent":304===zb?td="notmodified":(td=oe.state,oc=oe.data,Gc=!(nd=oe.error))):(nd=td,(zb||!td)&&(td="error",0>zb&&(zb=0))),Lb.status=zb,Lb.statusText=(lc||td)+"",Gc?cb.resolveWith(Qa,[oc,td,Lb]):cb.rejectWith(Qa,[Lb,td,nd]),Lb.statusCode(ic),ic=
void 0,Z&&Xa.trigger(Gc?"ajaxSuccess":"ajaxError",[Lb,ja,Gc?oc:nd]),Jb.fireWith(Qa,[Lb,td]),!Z||(Xa.trigger("ajaxComplete",[Lb,ja]),--A.active||A.event.trigger("ajaxStop")))}"object"==typeof q&&(v=q,q=void 0);v=v||{};var C,F,K,Q,U,Z,na,Da,ja=A.ajaxSetup({},v),Qa=ja.context||ja,Xa=ja.context&&(Qa.nodeType||Qa.jquery)?A(Qa):A.event,cb=A.Deferred(),Jb=A.Callbacks("once memory"),ic=ja.statusCode||{},Db={},Nc={},sd="canceled",Lb={readyState:0,getResponseHeader:function(zb){var lc;if(Ob){if(!Q)for(Q={};lc=
Rk.exec(K);)Q[lc[1].toLowerCase()+" "]=(Q[lc[1].toLowerCase()+" "]||[]).concat(lc[2]);lc=Q[zb.toLowerCase()+" "]}return null==lc?null:lc.join(", ")},getAllResponseHeaders:function(){return Ob?K:null},setRequestHeader:function(zb,lc){return null==Ob&&(Db[zb=Nc[zb.toLowerCase()]=Nc[zb.toLowerCase()]||zb]=lc),this},overrideMimeType:function(zb){return null==Ob&&(ja.mimeType=zb),this},statusCode:function(zb){var lc;if(zb)if(Ob)Lb.always(zb[Lb.status]);else for(lc in zb)ic[lc]=[ic[lc],zb[lc]];return this},
abort:function(zb){zb=zb||sd;return C&&C.abort(zb),x(0,zb),this}};if(cb.promise(Lb),ja.url=((q||ja.url||ef.href)+"").replace(Tk,ef.protocol+"//"),ja.type=v.method||v.type||ja.method||ja.type,ja.dataTypes=(ja.dataType||"*").toLowerCase().match(P)||[""],null==ja.crossDomain){q=lb.createElement("a");try{q.href=ja.url,q.href=q.href,ja.crossDomain=mg.protocol+"//"+mg.host!=q.protocol+"//"+q.host}catch(zb){ja.crossDomain=!0}}if(ja.data&&ja.processData&&"string"!=typeof ja.data&&(ja.data=A.param(ja.data,
ja.traditional)),Bb(xi,ja,v,Lb),Ob)return Lb;for(na in(Z=A.event&&ja.global)&&0==A.active++&&A.event.trigger("ajaxStart"),ja.type=ja.type.toUpperCase(),ja.hasContent=!Sk.test(ja.type),F=ja.url.replace(Pk,""),ja.hasContent?ja.data&&ja.processData&&0===(ja.contentType||"").indexOf("application/x-www-form-urlencoded")&&(ja.data=ja.data.replace(Ok,"+")):(Da=ja.url.slice(F.length),ja.data&&(ja.processData||"string"==typeof ja.data)&&(F+=(Ug.test(F)?"&":"?")+ja.data,delete ja.data),!1===ja.cache&&(F=F.replace(Qk,
"$1"),Da=(Ug.test(F)?"&":"?")+"_="+ti++ +Da),ja.url=F+Da),ja.ifModified&&(A.lastModified[F]&&Lb.setRequestHeader("If-Modified-Since",A.lastModified[F]),A.etag[F]&&Lb.setRequestHeader("If-None-Match",A.etag[F])),(ja.data&&ja.hasContent&&!1!==ja.contentType||v.contentType)&&Lb.setRequestHeader("Content-Type",ja.contentType),Lb.setRequestHeader("Accept",ja.dataTypes[0]&&ja.accepts[ja.dataTypes[0]]?ja.accepts[ja.dataTypes[0]]+("*"!==ja.dataTypes[0]?", "+re+"; q=0.01":""):ja.accepts["*"]),ja.headers)Lb.setRequestHeader(na,
ja.headers[na]);if(ja.beforeSend&&(!1===ja.beforeSend.call(Qa,Lb,ja)||Ob))return Lb.abort();if(sd="abort",Jb.add(ja.complete),Lb.done(ja.success),Lb.fail(ja.error),C=Bb(Pg,ja,v,Lb)){if(Lb.readyState=1,Z&&Xa.trigger("ajaxSend",[Lb,ja]),Ob)return Lb;ja.async&&0<ja.timeout&&(U=a.setTimeout(function(){Lb.abort("timeout")},ja.timeout));try{var Ob=!1;C.send(Db,x)}catch(zb){if(Ob)throw zb;x(-1,zb)}}else x(-1,"No Transport");return Lb},getJSON:function(q,v,x){return A.get(q,v,x,"json")},getScript:function(q,
v){return A.get(q,void 0,v,"script")}});A.each(["get","post"],function(q,v){A[v]=function(x,C,F,K){return Ya(C)&&(K=K||F,F=C,C=void 0),A.ajax(A.extend({url:x,type:v,dataType:K,data:C,success:F},A.isPlainObject(x)&&x))}});A.ajaxPrefilter(function(q){for(var v in q.headers)"content-type"===v.toLowerCase()&&(q.contentType=q.headers[v]||"")});A._evalUrl=function(q,v,x){return A.ajax({url:q,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(C){A.globalEval(C,
v,x)}})};A.fn.extend({wrapAll:function(q){var v;return this[0]&&(Ya(q)&&(q=q.call(this[0])),v=A(q,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&v.insertBefore(this[0]),v.map(function(){for(var x=this;x.firstElementChild;)x=x.firstElementChild;return x}).append(this)),this},wrapInner:function(q){return Ya(q)?this.each(function(v){A(this).wrapInner(q.call(this,v))}):this.each(function(){var v=A(this),x=v.contents();x.length?x.wrapAll(q):v.append(q)})},wrap:function(q){var v=Ya(q);return this.each(function(x){A(this).wrapAll(v?
q.call(this,x):q)})},unwrap:function(q){return this.parent(q).not("body").each(function(){A(this).replaceWith(this.childNodes)}),this}});A.expr.pseudos.hidden=function(q){return!A.expr.pseudos.visible(q)};A.expr.pseudos.visible=function(q){return!!(q.offsetWidth||q.offsetHeight||q.getClientRects().length)};A.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(q){}};var Uk={0:200,1223:204},Ff=A.ajaxSettings.xhr();jb.cors=!!Ff&&"withCredentials"in Ff;jb.ajax=Ff=!!Ff;A.ajaxTransport(function(q){var v,
x;if(jb.cors||Ff&&!q.crossDomain)return{send:function(C,F){var K,Q=q.xhr();if(Q.open(q.type,q.url,q.async,q.username,q.password),q.xhrFields)for(K in q.xhrFields)Q[K]=q.xhrFields[K];for(K in q.mimeType&&Q.overrideMimeType&&Q.overrideMimeType(q.mimeType),q.crossDomain||C["X-Requested-With"]||(C["X-Requested-With"]="XMLHttpRequest"),C)Q.setRequestHeader(K,C[K]);v=function(U){return function(){v&&(v=x=Q.onload=Q.onerror=Q.onabort=Q.ontimeout=Q.onreadystatechange=null,"abort"===U?Q.abort():"error"===
U?"number"!=typeof Q.status?F(0,"error"):F(Q.status,Q.statusText):F(Uk[Q.status]||Q.status,Q.statusText,"text"!==(Q.responseType||"text")||"string"!=typeof Q.responseText?{binary:Q.response}:{text:Q.responseText},Q.getAllResponseHeaders()))}};Q.onload=v();x=Q.onerror=Q.ontimeout=v("error");void 0!==Q.onabort?Q.onabort=x:Q.onreadystatechange=function(){4===Q.readyState&&a.setTimeout(function(){v&&x()})};v=v("abort");try{Q.send(q.hasContent&&q.data||null)}catch(U){if(v)throw U;}},abort:function(){v&&
v()}}});A.ajaxPrefilter(function(q){q.crossDomain&&(q.contents.script=!1)});A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(q){return A.globalEval(q),q}}});A.ajaxPrefilter("script",function(q){void 0===q.cache&&(q.cache=!1);q.crossDomain&&(q.type="GET")});A.ajaxTransport("script",function(q){if(q.crossDomain||q.scriptAttrs){var v,x;return{send:function(C,
F){v=A("<script>").attr(q.scriptAttrs||{}).prop({charset:q.scriptCharset,src:q.url}).on("load error",x=function(K){v.remove();x=null;K&&F("error"===K.type?404:200,K.type)});lb.head.appendChild(v[0])},abort:function(){x&&x()}}}});var Wg=[],Xg=/(=)\?(?=&|$)|\?\?/;A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var q=Wg.pop()||A.expando+"_"+ti++;return this[q]=!0,q}});A.ajaxPrefilter("json jsonp",function(q,v,x){var C,F,K,Q=!1!==q.jsonp&&(Xg.test(q.url)?"url":"string"==typeof q.data&&0===(q.contentType||
"").indexOf("application/x-www-form-urlencoded")&&Xg.test(q.data)&&"data");if(Q||"jsonp"===q.dataTypes[0])return C=q.jsonpCallback=Ya(q.jsonpCallback)?q.jsonpCallback():q.jsonpCallback,Q?q[Q]=q[Q].replace(Xg,"$1"+C):!1!==q.jsonp&&(q.url+=(Ug.test(q.url)?"&":"?")+q.jsonp+"="+C),q.converters["script json"]=function(){return K||A.error(C+" was not called"),K[0]},q.dataTypes[0]="json",F=a[C],a[C]=function(){K=arguments},x.always(function(){void 0===F?A(a).removeProp(C):a[C]=F;q[C]&&(q.jsonpCallback=v.jsonpCallback,
Wg.push(C));K&&Ya(F)&&F(K[0]);K=F=void 0}),"script"});jb.createHTMLDocument=((Kc=lb.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Kc.childNodes.length);A.parseHTML=function(q,v,x){var C,F,K;return"string"!=typeof q?[]:("boolean"==typeof v&&(x=v,v=!1),v||(jb.createHTMLDocument?((C=(v=lb.implementation.createHTMLDocument("")).createElement("base")).href=lb.location.href,v.head.appendChild(C)):v=lb),F=J.exec(q),K=!x&&[],F)?[v.createElement(F[1])]:(F=ca([q],v,
K),K&&K.length&&A(K).remove(),A.merge([],F.childNodes))};A.fn.load=function(q,v,x){var C,F,K,Q=this,U=q.indexOf(" ");return-1<U&&(C=bb(q.slice(U)),q=q.slice(0,U)),Ya(v)?(x=v,v=void 0):v&&"object"==typeof v&&(F="POST"),0<Q.length&&A.ajax({url:q,type:F||"GET",dataType:"html",data:v}).done(function(Z){K=arguments;Q.html(C?A("<div>").append(A.parseHTML(Z)).find(C):Z)}).always(x&&function(Z,na){Q.each(function(){x.apply(this,K||[Z.responseText,na,Z])})}),this};A.expr.pseudos.animated=function(q){return A.grep(A.timers,
function(v){return q===v.elem}).length};A.offset={setOffset:function(q,v,x){var C,F,K,Q=A.css(q,"position"),U=A(q),Z={};"static"===Q&&(q.style.position="relative");var na=U.offset();var Da=A.css(q,"top");var ja=A.css(q,"left");("absolute"===Q||"fixed"===Q)&&-1<(Da+ja).indexOf("auto")?(K=(C=U.position()).top,F=C.left):(K=parseFloat(Da)||0,F=parseFloat(ja)||0);Ya(v)&&(v=v.call(q,x,A.extend({},na)));null!=v.top&&(Z.top=v.top-na.top+K);null!=v.left&&(Z.left=v.left-na.left+F);"using"in v?v.using.call(q,
Z):U.css(Z)}};A.fn.extend({offset:function(q){if(arguments.length)return void 0===q?this:this.each(function(F){A.offset.setOffset(this,q,F)});var v,x,C=this[0];if(C)return C.getClientRects().length?(v=C.getBoundingClientRect(),x=C.ownerDocument.defaultView,{top:v.top+x.pageYOffset,left:v.left+x.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var q,v=this[0],x={top:0,left:0};if("fixed"===A.css(v,"position"))var C=v.getBoundingClientRect();else{C=this.offset();var F=v.ownerDocument;for(q=
v.offsetParent||F.documentElement;q&&(q===F.body||q===F.documentElement)&&"static"===A.css(q,"position");)q=q.parentNode;q&&q!==v&&1===q.nodeType&&(x=A(q).offset(),x.top+=A.css(q,"borderTopWidth",!0),x.left+=A.css(q,"borderLeftWidth",!0))}return{top:C.top-x.top-A.css(v,"marginTop",!0),left:C.left-x.left-A.css(v,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var q=this.offsetParent;q&&"static"===A.css(q,"position");)q=q.offsetParent;return q||Cb})}});A.each({scrollLeft:"pageXOffset",
scrollTop:"pageYOffset"},function(q,v){var x="pageYOffset"===v;A.fn[q]=function(C){return Aa(this,function(F,K,Q){var U;if(Zc(F)?U=F:9===F.nodeType&&(U=F.defaultView),void 0===Q)return U?U[v]:F[K];U?U.scrollTo(x?U.pageXOffset:Q,x?Q:U.pageYOffset):F[K]=Q},q,C,arguments.length)}});A.each(["top","left"],function(q,v){A.cssHooks[v]=kb(jb.pixelPosition,function(x,C){if(C)return C=wb(x,v),Df.test(C)?A(x).position()[v]+"px":C})});A.each({Height:"height",Width:"width"},function(q,v){A.each({padding:"inner"+
q,content:v,"":"outer"+q},function(x,C){A.fn[C]=function(F,K){var Q=arguments.length&&(x||"boolean"!=typeof F),U=x||(!0===F||!0===K?"margin":"border");return Aa(this,function(Z,na,Da){var ja;return Zc(Z)?0===C.indexOf("outer")?Z["inner"+q]:Z.document.documentElement["client"+q]:9===Z.nodeType?(ja=Z.documentElement,Math.max(Z.body["scroll"+q],ja["scroll"+q],Z.body["offset"+q],ja["offset"+q],ja["client"+q])):void 0===Da?A.css(Z,na,U):A.style(Z,na,Da,U)},v,Q?F:void 0,Q)}})});A.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(q,v){A.fn[v]=function(x){return this.on(v,x)}});A.fn.extend({bind:function(q,v,x){return this.on(q,null,v,x)},unbind:function(q,v){return this.off(q,null,v)},delegate:function(q,v,x,C){return this.on(v,q,x,C)},undelegate:function(q,v,x){return 1==arguments.length?this.off(q,"**"):this.off(v,q||"**",x)},hover:function(q,v){return this.on("mouseenter",q).on("mouseleave",v||q)}});A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(q,v){A.fn[v]=function(x,C){return 0<arguments.length?this.on(v,null,x,C):this.trigger(v)}});var Vk=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;A.proxy=function(q,v){var x,C,F;if("string"==typeof v&&(x=q[v],v=q,q=x),Ya(q))return C=Ab.call(arguments,2),(F=function(){return q.apply(v||this,C.concat(Ab.call(arguments)))}).guid=q.guid=q.guid||A.guid++,F};A.holdReady=function(q){q?A.readyWait++:A.ready(!0)};A.isArray=Array.isArray;A.parseJSON=JSON.parse;A.nodeName=k;A.isFunction=Ya;A.isWindow=
Zc;A.camelCase=u;A.type=b;A.now=Date.now;A.isNumeric=function(q){var v=A.type(q);return("number"===v||"string"===v)&&!isNaN(q-parseFloat(q))};A.trim=function(q){return null==q?"":(q+"").replace(Vk,"$1")};"function"==typeof define&&define.amd&&define("jquery",[],function(){return A});var Wk=a.jQuery,Xk=a.$;return A.noConflict=function(q){return a.$===A&&(a.$=Xk),q&&a.jQuery===A&&(a.jQuery=Wk),A},void 0===c&&(a.jQuery=a.$=A),A};"object"==typeof pa?pa=Dk.document?Yk(Dk,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");
return Yk(a)}:Yk(Dk);var Jo={};Jo=function(){function a(y,D){return D&&"".concat(D,"::").concat(A++)||y.uidEvent||A++}function c(y){var D=a(y);return y.uidEvent=D,Gd[D]=Gd[D]||{},Gd[D]}function d(y,D){var O=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Object.values(y).find(function(t){return t.callable===D&&t.delegationSelector===O})}function b(y,D,O){var t="string"==typeof D,B=l(y);return ee.has(B)||(B=y),[t,t?O:D||O,B]}function f(y,D,O,t,B){if("string"==typeof D&&y){var H,
ba,fa,la=te(b(D,O,t),3);t=la[0];var ra=la[1];la=la[2];D in fe&&(H=ra,ra=function(Ia){if(!Ia.relatedTarget||Ia.relatedTarget!==Ia.delegateTarget&&!Ia.delegateTarget.contains(Ia.relatedTarget))return H.call(this,Ia)});var oa=c(y);oa=oa[la]||(oa[la]={});var xa=d(oa,ra,t?O:null);if(xa)return void(xa.oneOff=xa.oneOff&&B);D=a(ra,D.replace(Zc,""));xa=t?(ba=ra,function Pa(La){for(var rb=y.querySelectorAll(O),nb=!0,Za=!1,sb=void 0,Eb=La.target;Eb&&Eb!==this;Eb=Eb.parentNode)try{for(var db,Fb=rb[Symbol.iterator]();!(nb=
(db=Fb.next()).done);nb=!0)if(db.value===Eb)return h(La,{delegateTarget:Eb}),Pa.oneOff&&Ga.off(y,La.type,O,ba),ba.apply(Eb,[La])}catch(Xb){Za=!0,sb=Xb}finally{try{nb||null==Fb.return||Fb.return()}finally{if(Za)throw sb;}}}):(fa=ra,function rb(Pa){return h(Pa,{delegateTarget:y}),rb.oneOff&&Ga.off(y,Pa.type,fa),fa.apply(y,[Pa])});xa.delegationSelector=t?O:null;xa.callable=ra;xa.oneOff=B;xa.uidEvent=D;oa[D]=xa;y.addEventListener(la,xa,t)}}function k(y,D,O,t,B){(t=d(D[O],t,B))&&(y.removeEventListener(O,
t,!!B),delete D[O][t.uidEvent])}function l(y){return fe[y=y.replace(lb,"")]||y}function h(y){var D=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},O=!0,t=!1,B=void 0;try{for(var H,ba=Object.entries(D)[Symbol.iterator]();!(O=(H=ba.next()).done);O=!0)!function(){var fa=te(H.value,2),la=fa[0],ra=fa[1];try{y[la]=ra}catch(oa){Object.defineProperty(y,la,{configurable:!0,get:function(){return ra}})}}()}catch(fa){t=!0,B=fa}finally{try{O||null==ba.return||ba.return()}finally{if(t)throw B;}}return y}
function e(y){if("true"===y)return!0;if("false"===y)return!1;if(y===Number(y).toString())return Number(y);if(""===y||"null"===y)return null;if("string"!=typeof y)return y;try{return JSON.parse(decodeURIComponent(y))}catch(D){return y}}function g(y){return y.replace(/[A-Z]/g,function(D){return"-".concat(D.toLowerCase())})}function p(y){return y?(y.nodeName||"").toLowerCase():null}function m(y){return null==y?window:"[object Window]"!==y.toString()?(y=y.ownerDocument)&&y.defaultView||window:y}function n(y){return y instanceof
m(y).Element||y instanceof Element}function r(y){return y instanceof m(y).HTMLElement||y instanceof HTMLElement}function u(y){return"undefined"!=typeof ShadowRoot&&(y instanceof m(y).ShadowRoot||y instanceof ShadowRoot)}function w(y){return y.split("-")[0]}function z(){var y=navigator.userAgentData;return null!=y&&y.brands&&Array.isArray(y.brands)?y.brands.map(function(D){return D.brand+"/"+D.version}).join(" "):navigator.userAgent}function G(){return!/^((?!chrome|android).)*safari/i.test(z())}function L(y,
D,O){void 0===D&&(D=!1);void 0===O&&(O=!1);var t=y.getBoundingClientRect(),B=1,H=1;D&&r(y)&&(B=0<y.offsetWidth&&Ge(t.width)/y.offsetWidth||1,H=0<y.offsetHeight&&Ge(t.height)/y.offsetHeight||1);y=(n(y)?m(y):window).visualViewport;D=!G()&&O;O=(t.left+(D&&y?y.offsetLeft:0))/B;y=(t.top+(D&&y?y.offsetTop:0))/H;B=t.width/B;t=t.height/H;return{width:B,height:t,top:y,right:O+B,bottom:y+t,left:O,x:O,y}}function N(y){var D=L(y),O=y.offsetWidth,t=y.offsetHeight;return 1>=Math.abs(D.width-O)&&(O=D.width),1>=
Math.abs(D.height-t)&&(t=D.height),{x:y.offsetLeft,y:y.offsetTop,width:O,height:t}}function M(y,D){var O=D.getRootNode&&D.getRootNode();if(y.contains(D))return!0;if(O&&u(O)){do{if(D&&y.isSameNode(D))return!0;D=D.parentNode||D.host}while(D)}return!1}function ca(y){return m(y).getComputedStyle(y)}function W(y){return((n(y)?y.ownerDocument:y.document)||window.document).documentElement}function ka(y){return"html"===p(y)?y:y.assignedSlot||y.parentNode||(u(y)?y.host:null)||W(y)}function ea(y){return r(y)&&
"fixed"!==ca(y).position?y.offsetParent:null}function ma(y){for(var D=m(y),O=ea(y);O&&0<=["table","td","th"].indexOf(p(O))&&"static"===ca(O).position;)O=ea(O);if(!O||"html"!==p(O)&&("body"!==p(O)||"static"!==ca(O).position)){if(!O)a:{O=/firefox/i.test(z());if(!/Trident/i.test(z())||!r(y)||"fixed"!==ca(y).position)for(y=ka(y),u(y)&&(y=y.host);r(y)&&0>["html","body"].indexOf(p(y));){var t=ca(y);if("none"!==t.transform||"none"!==t.perspective||"paint"===t.contain||-1!==["transform","perspective"].indexOf(t.willChange)||
O&&"filter"===t.willChange||O&&t.filter&&"none"!==t.filter){O=y;break a}y=y.parentNode}O=null}D=O||D}return D}function Ca(y){return 0<=["top","bottom"].indexOf(y)?"x":"y"}function Ja(y){return Object.assign({},{top:0,right:0,bottom:0,left:0},y)}function Ha(y,D){return D.reduce(function(O,t){return O[t]=y,O},{})}function V(y){return y.split("-")[1]}function Na(y){var D,O=y.popper,t=y.popperRect,B=y.placement,H=y.variation,ba=y.offsets,fa=y.position,la=y.gpuAcceleration,ra=y.adaptive,oa=y.roundOffsets,
xa=y.isFixed;y=ba.x;y=void 0===y?0:y;var Ia=ba.y;Ia=void 0===Ia?0:Ia;Ia="function"==typeof oa?oa({x:y,y:Ia}):{x:y,y:Ia};y=Ia.x;Ia=Ia.y;var La=ba.hasOwnProperty("x");ba=ba.hasOwnProperty("y");var Pa="left",rb="top",nb=window;if(ra){var Za=ma(O),sb="clientHeight",Eb="clientWidth";Za===m(O)&&"static"!==ca(Za=W(O)).position&&"absolute"===fa&&(sb="scrollHeight",Eb="scrollWidth");("top"===B||("left"===B||"right"===B)&&"end"===H)&&(rb="bottom",Ia-=(xa&&Za===nb&&nb.visualViewport?nb.visualViewport.height:
Za[sb])-t.height,Ia*=la?1:-1);"left"!==B&&("top"!==B&&"bottom"!==B||"end"!==H)||(Pa="right",y-=(xa&&Za===nb&&nb.visualViewport?nb.visualViewport.width:Za[Eb])-t.width,y*=la?1:-1)}var db,Fb,Xb,Ub,bc,cc;t=Object.assign({position:fa},ra&&Jk);oa=!0===oa?(db={x:y,y:Ia},Fb=m(O),Xb=db.x,Ub=db.y,{x:Ge(Xb*(bc=Fb.devicePixelRatio||1))/bc||0,y:Ge(Ub*bc)/bc||0}):{x:y,y:Ia};return y=oa.x,Ia=oa.y,la?Object.assign({},t,((cc={})[rb]=ba?"0":"",cc[Pa]=La?"0":"",cc.transform=1>=(nb.devicePixelRatio||1)?"translate("+
y+"px, "+Ia+"px)":"translate3d("+y+"px, "+Ia+"px, 0)",cc)):Object.assign({},t,((D={})[rb]=ba?Ia+"px":"",D[Pa]=La?y+"px":"",D.transform="",D))}function wa(y){return y.replace(/left|right|bottom|top/g,function(D){return Ze[D]})}function wb(y){return y.replace(/start|end/g,function(D){return lg[D]})}function kb(y){y=m(y);return{scrollLeft:y.pageXOffset,scrollTop:y.pageYOffset}}function Yb(y){return L(W(y)).left+kb(y).scrollLeft}function Pb(y){y=ca(y);return/auto|scroll|overlay|hidden/.test(y.overflow+
y.overflowY+y.overflowX)}function Va(y,D){void 0===D&&(D=[]);var O,t=function ba(H){return 0<=["html","body","#document"].indexOf(p(H))?H.ownerDocument.body:r(H)&&Pb(H)?H:ba(ka(H))}(y);y=t===(null==(O=y.ownerDocument)?void 0:O.body);O=m(t);t=y?[O].concat(O.visualViewport||[],Pb(t)?t:[]):t;D=D.concat(t);return y?D:D.concat(Va(ka(t)))}function Mc(y){return Object.assign({},y,{left:y.x,top:y.y,right:y.x+y.width,bottom:y.y+y.height})}function jc(y,D,O){var t,B,H,ba,fa,la,ra;if("viewport"===D){D=m(y);
var oa=W(y);D=D.visualViewport;var xa=oa.clientWidth;oa=oa.clientHeight;var Ia=t=0;D&&(xa=D.width,oa=D.height,((B=G())||!B&&"fixed"===O)&&(t=D.offsetLeft,Ia=D.offsetTop));y={width:xa,height:oa,x:t+Yb(y),y:Ia};O=Mc(y)}else O=n(D)?((xa=L(D,!1,"fixed"===O)).top=xa.top+D.clientTop,xa.left+=D.clientLeft,xa.bottom=xa.top+D.clientHeight,xa.right=xa.left+D.clientWidth,xa.width=D.clientWidth,xa.height=D.clientHeight,xa.x=xa.left,xa.y=xa.top,xa):Mc((oa=W(y),Ia=W(oa),B=kb(oa),H=null==(t=oa.ownerDocument)?void 0:
t.body,ba=Kd(Ia.scrollWidth,Ia.clientWidth,H?H.scrollWidth:0,H?H.clientWidth:0),fa=Kd(Ia.scrollHeight,Ia.clientHeight,H?H.scrollHeight:0,H?H.clientHeight:0),la=-B.scrollLeft+Yb(oa),ra=-B.scrollTop,"rtl"===ca(H||Ia).direction&&(la+=Kd(Ia.clientWidth,H?H.clientWidth:0)-ba),{width:ba,height:fa,x:la,y:ra}));return O}function za(y){var D=y.reference,O=y.element,t=(y=y.placement)?w(y):null;y=y?V(y):null;var B=D.x+D.width/2-O.width/2;var H=D.y+D.height/2-O.height/2;switch(t){case "top":B={x:B,y:D.y-O.height};
break;case "bottom":B={x:B,y:D.y+D.height};break;case "right":B={x:D.x+D.width,y:H};break;case "left":B={x:D.x-O.width,y:H};break;default:B={x:D.x,y:D.y}}t=t?Ca(t):null;if(null!=t)switch(H="y"===t?"height":"width",y){case "start":B[t]-=D[H]/2-O[H]/2;break;case "end":B[t]+=D[H]/2-O[H]/2}return B}function X(y,D){void 0===D&&(D={});var O,t,B,H,ba,fa,la=D;D=la.placement;D=void 0===D?y.placement:D;var ra=la.strategy,oa=void 0===ra?y.strategy:ra;ra=la.boundary;var xa=void 0===ra?"clippingParents":ra,Ia=
la.rootBoundary;ra=la.elementContext;ra=void 0===ra?"popper":ra;var La=la.altBoundary;la=la.padding;la=void 0===la?0:la;la=Ja("number"!=typeof la?la:Ha(la,Ye));var Pa=y.rects.popper;La=y.elements[void 0!==La&&La?"popper"===ra?"reference":"popper":ra];La=(O=n(La)?La:La.contextElement||W(y.elements.popper),ba=(H=[].concat("clippingParents"===xa?(t=Va(ka(O)),n(B=0<=["absolute","fixed"].indexOf(ca(O).position)&&r(O)?ma(O):O)?t.filter(function(Za){return n(Za)&&M(Za,B)&&"body"!==p(Za)}):[]):[].concat(xa),
[void 0===Ia?"viewport":Ia]))[0],(fa=H.reduce(function(Za,sb){sb=jc(O,sb,oa);return Za.top=Kd(sb.top,Za.top),Za.right=$d(sb.right,Za.right),Za.bottom=$d(sb.bottom,Za.bottom),Za.left=Kd(sb.left,Za.left),Za},jc(O,ba,oa))).width=fa.right-fa.left,fa.height=fa.bottom-fa.top,fa.x=fa.left,fa.y=fa.top,fa);t=L(y.elements.reference);H=za({reference:t,element:Pa,strategy:"absolute",placement:D});H=Mc(Object.assign({},Pa,H));t="popper"===ra?H:t;var rb={top:La.top-t.top+la.top,bottom:t.bottom-La.bottom+la.bottom,
left:La.left-t.left+la.left,right:t.right-La.right+la.right};y=y.modifiersData.offset;if("popper"===ra&&y){var nb=y[D];Object.keys(rb).forEach(function(Za){var sb=0<=["right","bottom"].indexOf(Za)?1:-1,Eb=0<=["top","bottom"].indexOf(Za)?"y":"x";rb[Za]+=nb[Eb]*sb})}return rb}function va(y,D,O){return void 0===O&&(O={x:0,y:0}),{top:y.top-D.height-O.y,right:y.right-D.width+O.x,bottom:y.bottom-D.height+O.y,left:y.left-D.width-O.x}}function ua(y){return["top","right","bottom","left"].some(function(D){return 0<=
y[D]})}function bb(){for(var y=arguments.length,D=Array(y),O=0;O<y;O++)D[O]=arguments[O];return!D.some(function(t){return!(t&&"function"==typeof t.getBoundingClientRect)})}function xb(y){void 0===y&&(y={});var D=y.defaultModifiers,O=void 0===D?[]:D;y=y.defaultOptions;var t=void 0===y?si:y;return function(B,H,ba){function fa(){xa.forEach(function(Pa){return Pa()});xa=[]}void 0===ba&&(ba=t);var la,ra,oa={placement:"bottom",orderedModifiers:[],options:Object.assign({},si,t),modifiersData:{},elements:{reference:B,
popper:H},attributes:{},styles:{}},xa=[],Ia=!1,La={state:oa,setOptions:function(Pa){Pa="function"==typeof Pa?Pa(oa.options):Pa;fa();oa.options=Object.assign({},t,oa.options,Pa);oa.scrollParents={reference:n(B)?Va(B):B.contextElement?Va(B.contextElement):[],popper:Va(H)};var rb,nb,Za,sb,Eb;Pa=(rb=Object.keys(Eb=[].concat(O,oa.options.modifiers).reduce(function(db,Fb){var Xb=db[Fb.name];return db[Fb.name]=Xb?Object.assign({},Xb,Fb,{options:Object.assign({},Xb.options,Fb.options),data:Object.assign({},
Xb.data,Fb.data)}):Fb,db},{})).map(function(db){return Eb[db]}),nb=new Map,Za=new Set,sb=[],rb.forEach(function(db){nb.set(db.name,db)}),rb.forEach(function(db){Za.has(db.name)||function Ub(Xb){Za.add(Xb.name);[].concat(Xb.requires||[],Xb.requiresIfExists||[]).forEach(function(bc){Za.has(bc)||(bc=nb.get(bc))&&Ub(bc)});sb.push(Xb)}(db)}),Cf.reduce(function(db,Fb){return db.concat(sb.filter(function(Xb){return Xb.phase===Fb}))},[]));return oa.orderedModifiers=Pa.filter(function(db){return db.enabled}),
oa.orderedModifiers.forEach(function(db){var Fb=db.name,Xb=db.options;db=db.effect;"function"==typeof db&&(Fb=db({state:oa,name:Fb,instance:La,options:void 0===Xb?{}:Xb}),xa.push(Fb||function(){}))}),La.update()},forceUpdate:function(){if(!Ia){var Pa=oa.elements,rb=Pa.reference;Pa=Pa.popper;if(bb(rb,Pa)){oa.rects={reference:(nb=ma(Pa),Za="fixed"===oa.options.strategy,Fb=r(nb),Xb=r(nb)&&(Eb=Ge((sb=nb.getBoundingClientRect()).width)/nb.offsetWidth||1,db=Ge(sb.height)/nb.offsetHeight||1,1!==Eb||1!==
db),Ub=W(nb),bc=L(rb,Xb,Za),cc={scrollLeft:0,scrollTop:0},bd={x:0,y:0},(Fb||!Fb&&!Za)&&(("body"!==p(nb)||Pb(Ub))&&(cc=nb!==m(nb)&&r(nb)?{scrollLeft:nb.scrollLeft,scrollTop:nb.scrollTop}:kb(nb)),r(nb)?((bd=L(nb,!0)).x+=nb.clientLeft,bd.y+=nb.clientTop):Ub&&(bd.x=Yb(Ub))),{x:bc.left+cc.scrollLeft-bd.x,y:bc.top+cc.scrollTop-bd.y,width:bc.width,height:bc.height}),popper:N(Pa)};oa.reset=!1;oa.placement=oa.options.placement;oa.orderedModifiers.forEach(function(se){return oa.modifiersData[se.name]=Object.assign({},
se.data)});var nb,Za,sb,Eb,db,Fb,Xb,Ub,bc,cc,bd;for(rb=0;rb<oa.orderedModifiers.length;rb++)!0!==oa.reset?(Za=oa.orderedModifiers[rb],nb=Za.fn,sb=Za.options,sb=void 0===sb?{}:sb,Za=Za.name,"function"==typeof nb&&(oa=nb({state:oa,options:sb,name:Za,instance:La})||oa)):(oa.reset=!1,rb=-1)}}},update:(la=function(){return new Promise(function(Pa){La.forceUpdate();Pa(oa)})},function(){return ra||=new Promise(function(Pa){Promise.resolve().then(function(){ra=void 0;Pa(la())})}),ra}),destroy:function(){fa();
Ia=!0}};return bb(B,H)?(La.setOptions(ba).then(function(Pa){!Ia&&ba.onFirstUpdate&&ba.onFirstUpdate(Pa)}),La):La}}var Ka,fc,Bb=new Map,kc={set:function(y,D,O){Bb.has(y)||Bb.set(y,new Map);y=Bb.get(y);y.has(D)||0===y.size?y.set(D,O):console.error("Bootstrap doesn't allow more than one instance per element. Bound instance: ".concat(Array.from(y.keys())[0],"."))},get:function(y,D){return Bb.has(y)&&Bb.get(y).get(D)||null},remove:function(y,D){if(Bb.has(y)){var O=Bb.get(y);O.delete(D);0===O.size&&Bb.delete(y)}}},
Kc=function(y){return y&&window.CSS&&window.CSS.escape&&(y=y.replace(/#([^\s"#']+)/g,function(D,O){return"#".concat(CSS.escape(O))})),y},fb=function(y){return!(!y||"object"!=typeof y)&&(void 0!==y.jquery&&(y=y[0]),void 0!==y.nodeType)},Jc=function(y){return fb(y)?y.jquery?y[0]:y:"string"==typeof y&&0<y.length?document.querySelector(Kc(y)):null},Ab=function(y){if(!fb(y)||0===y.getClientRects().length)return!1;var D="visible"===getComputedStyle(y).getPropertyValue("visibility"),O=y.closest("details:not([open])");
return O?O!==y&&((y=y.closest("summary"))&&y.parentNode!==O||null===y)?!1:D:D},qc=function(y){return!y||y.nodeType!==Node.ELEMENT_NODE||!!y.classList.contains("disabled")||(void 0!==y.disabled?y.disabled:y.hasAttribute("disabled")&&"false"!==y.getAttribute("disabled"))},pb=function(y){return document.documentElement.attachShadow?"function"==typeof y.getRootNode?(y=y.getRootNode(),y instanceof ShadowRoot?y:null):y instanceof ShadowRoot?y:y.parentNode?pb(y.parentNode):null:null},yb=function(){},$c=
function(){return window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null},$b=[],wc=function(){return"rtl"===document.documentElement.dir},xc=function(y){var D=function(){var O=$c();if(O){var t=y.NAME,B=O.fn[t];O.fn[t]=y.jQueryInterface;O.fn[t].Constructor=y;O.fn[t].noConflict=function(){return O.fn[t]=B,y.jQueryInterface}}};"loading"===document.readyState?($b.length||document.addEventListener("DOMContentLoaded",function(){var O=!0,t=!1,B=void 0;try{for(var H,ba=$b[Symbol.iterator]();!(O=
(H=ba.next()).done);O=!0)(0,H.value)()}catch(fa){t=!0,B=fa}finally{try{O||null==ba.return||ba.return()}finally{if(t)throw B;}}}),$b.push(D)):D()},Dc=function(y){var D=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],O=2<arguments.length&&void 0!==arguments[2]?arguments[2]:y;return"function"==typeof y?y.apply(void 0,ce(D)):O},jb=function(y,D){if(2<arguments.length&&void 0!==arguments[2]&&!arguments[2])return void Dc(y);var O=function(H){if(!H)return 0;var ba=window.getComputedStyle(H);H=ba.transitionDuration;
ba=ba.transitionDelay;var fa=Number.parseFloat(H),la=Number.parseFloat(ba);return fa||la?(H=H.split(",")[0],ba=ba.split(",")[0],1E3*(Number.parseFloat(H)+Number.parseFloat(ba))):0}(D)+5,t=!1,B=function(H){H.target===D&&(t=!0,D.removeEventListener("transitionend",B),Dc(y))};D.addEventListener("transitionend",B);setTimeout(function(){t||D.dispatchEvent(new Event("transitionend"))},O)},Ya=function(y,D,O,t){var B=y.length;D=y.indexOf(D);return-1===D?!O&&t?y[B-1]:y[0]:(D+=O?1:-1,t&&(D=(D+B)%B),y[Math.max(0,
Math.min(D,B-1))])},Zc=/[^.]*(?=\..*)\.|.*/,lb=/\..*/,vb=/::\d+$/,Gd={},A=1,fe={mouseenter:"mouseover",mouseleave:"mouseout"},ee=new Set("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange touchstart touchmove touchend touchcancel pointerdown pointermove pointerup pointerleave pointercancel gesturestart gesturechange gestureend focus blur change reset select submit focusin focusout load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll".split(" ")),
Ga={on:function(y,D,O,t){f(y,D,O,t,!1)},one:function(y,D,O,t){f(y,D,O,t,!0)},off:function(y,D,O,t){if("string"==typeof D&&y){t=te(b(D,O,t),3);var B=t[0],H=t[1];t=t[2];var ba=t!==D,fa=c(y),la=fa[t]||{},ra=D.startsWith(".");if(void 0===H){O=!0;B=!1;H=void 0;if(ra)try{for(var oa,xa=Object.keys(fa)[Symbol.iterator]();!(O=(oa=xa.next()).done);O=!0){ra=void 0;var Ia=y,La=fa,Pa=oa.value,rb=D.slice(1),nb=La[Pa]||{},Za=!0,sb=!1,Eb=void 0;try{for(var db=Object.entries(nb)[Symbol.iterator]();!(Za=(ra=db.next()).done);Za=
!0){var Fb=te(ra.value,2),Xb=Fb[1];Fb[0].includes(rb)&&k(Ia,La,Pa,Xb.callable,Xb.delegationSelector)}}catch(Ed){sb=!0,Eb=Ed}finally{try{Za||null==db.return||db.return()}finally{if(sb)throw Eb;}}!0}}catch(Ed){B=!0,H=Ed}finally{try{O||null==xa.return||xa.return()}finally{if(B)throw H;}}oa=!0;xa=!1;Pa=void 0;try{for(var Ub,bc=Object.entries(la)[Symbol.iterator]();!(oa=(Ub=bc.next()).done);oa=!0){var cc=te(Ub.value,2),bd=cc[1],se=cc[0].replace(vb,"");ba&&!D.includes(se)||k(y,fa,t,bd.callable,bd.delegationSelector)}}catch(Ed){xa=
!0,Pa=Ed}finally{try{oa||null==bc.return||bc.return()}finally{if(xa)throw Pa;}}}else Object.keys(la).length&&k(y,fa,t,H,B?O:null)}},trigger:function(y,D,O){if("string"!=typeof D||!y)return null;var t=$c(),B=null,H=!0,ba=!0,fa=!1;D!==l(D)&&t&&(B=t.Event(D,O),t(y).trigger(B),H=!B.isPropagationStopped(),ba=!B.isImmediatePropagationStopped(),fa=B.isDefaultPrevented());D=h(new Event(D,{bubbles:H,cancelable:!0}),O);return fa&&D.preventDefault(),ba&&y.dispatchEvent(D),D.defaultPrevented&&B&&B.preventDefault(),
D}},Oc={setDataAttribute:function(y,D,O){y.setAttribute("data-bs-".concat(g(D)),O)},removeDataAttribute:function(y,D){y.removeAttribute("data-bs-".concat(g(D)))},getDataAttributes:function(y){if(!y)return{};var D={},O=Object.keys(y.dataset).filter(function(oa){return oa.startsWith("bs")&&!oa.startsWith("bsConfig")}),t=!0,B=!1,H=void 0;try{for(var ba,fa=O[Symbol.iterator]();!(t=(ba=fa.next()).done);t=!0){var la=ba.value,ra=la.replace(/^bs/,"");D[ra=ra.charAt(0).toLowerCase()+ra.slice(1,ra.length)]=
e(y.dataset[la])}}catch(oa){B=!0,H=oa}finally{try{t||null==fa.return||fa.return()}finally{if(B)throw H;}}return D},getDataAttribute:function(y,D){return e(y.getAttribute("data-bs-".concat(g(D))))}},Fd=function(){function y(){Gb(this,y)}return Hb(y,[{key:"_getConfig",value:function(D){return D=this._mergeConfigObj(D),D=this._configAfterMerge(D),this._typeCheckConfig(D),D}},{key:"_configAfterMerge",value:function(D){return D}},{key:"_mergeConfigObj",value:function(D,O){var t=fb(O)?Oc.getDataAttribute(O,
"config"):{};return Le({},this.constructor.Default,"object"==typeof t?t:{},fb(O)?Oc.getDataAttributes(O):{},"object"==typeof D?D:{})}},{key:"_typeCheckConfig",value:function(D){var O=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.constructor.DefaultType,t=!0,B=!1,H=void 0;try{for(var ba,fa=Object.entries(O)[Symbol.iterator]();!(t=(ba=fa.next()).done);t=!0){var la=te(ba.value,2),ra=la[0],oa=la[1],xa=D[ra],Ia=fb(xa)?"element":null==xa?"".concat(xa):Object.prototype.toString.call(xa).match(/\s([a-z]+)/i)[1].toLowerCase();
if(!(new RegExp(oa)).test(Ia))throw TypeError("".concat(this.constructor.NAME.toUpperCase(),': Option "').concat(ra,'" provided type "').concat(Ia,'" but expected type "').concat(oa,'".'));}}catch(La){B=!0,H=La}finally{try{t||null==fa.return||fa.return()}finally{if(B)throw H;}}}}],[{key:"Default",get:function(){return{}}},{key:"DefaultType",get:function(){return{}}},{key:"NAME",get:function(){throw Error('You have to implement the static method "NAME", for each component!');}}]),y}(),yc=function(y){function D(t,
B){var H;return Gb(this,D),H=O.call(this),(t=Jc(t))&&(H._element=t,H._config=H._getConfig(B),kc.set(H._element,H.constructor.DATA_KEY,zi(H))),od(H)}dc(D,y);var O=ec(D);return Hb(D,[{key:"dispose",value:function(){kc.remove(this._element,this.constructor.DATA_KEY);Ga.off(this._element,this.constructor.EVENT_KEY);var t=!0,B=!1,H=void 0;try{for(var ba,fa=Object.getOwnPropertyNames(this)[Symbol.iterator]();!(t=(ba=fa.next()).done);t=!0)this[ba.value]=null}catch(la){B=!0,H=la}finally{try{t||null==fa.return||
fa.return()}finally{if(B)throw H;}}}},{key:"_queueCallback",value:function(t,B){jb(t,B,!(2<arguments.length)||void 0===arguments[2]||arguments[2])}},{key:"_getConfig",value:function(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}}],[{key:"getInstance",value:function(t){return kc.get(Jc(t),this.DATA_KEY)}},{key:"getOrCreateInstance",value:function(t){var B=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(t)||
new this(t,"object"==typeof B?B:null)}},{key:"VERSION",get:function(){return"5.3.3"}},{key:"DATA_KEY",get:function(){return"bs.".concat(this.NAME)}},{key:"EVENT_KEY",get:function(){return".".concat(this.DATA_KEY)}},{key:"eventName",value:function(t){return"".concat(t).concat(this.EVENT_KEY)}}]),D}(Fd),qd=function(y){var D=y.getAttribute("data-bs-target");if(!D||"#"===D){y=y.getAttribute("href");if(!y||!y.includes("#")&&!y.startsWith("."))return null;y.includes("#")&&!y.startsWith("#")&&(y="#".concat(y.split("#")[1]));
D=y&&"#"!==y?y.trim():null}return D?D.split(",").map(function(O){return Kc(O)}).join(","):null},hb={find:function(y){var D=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement;return(Ka=[]).concat.apply(Ka,ce(Element.prototype.querySelectorAll.call(D,y)))},findOne:function(y){return Element.prototype.querySelector.call(1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement,y)},children:function(y,D){return(fc=[]).concat.apply(fc,ce(y.children)).filter(function(O){return O.matches(D)})},
parents:function(y,D){var O=[];for(y=y.parentNode.closest(D);y;)O.push(y),y=y.parentNode.closest(D);return O},prev:function(y,D){for(y=y.previousElementSibling;y;){if(y.matches(D))return[y];y=y.previousElementSibling}return[]},next:function(y,D){for(y=y.nextElementSibling;y;){if(y.matches(D))return[y];y=y.nextElementSibling}return[]},focusableChildren:function(y){var D='a button input textarea select details [tabindex] [contenteditable="true"]'.split(" ").map(function(O){return"".concat(O,':not([tabindex^="-"])')}).join(",");
return this.find(D,y).filter(function(O){return!qc(O)&&Ab(O)})},getSelectorFromElement:function(y){return(y=qd(y))&&hb.findOne(y)?y:null},getElementFromSelector:function(y){return(y=qd(y))?hb.findOne(y):null},getMultipleElementsFromSelector:function(y){return(y=qd(y))?hb.find(y):[]}},J=function(y){var D=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"hide",O="click.dismiss".concat(y.EVENT_KEY),t=y.NAME;Ga.on(document,O,'[data-bs-dismiss="'.concat(t,'"]'),function(B){(["A","AREA"].includes(this.tagName)&&
B.preventDefault(),qc(this))||(B=hb.getElementFromSelector(this)||this.closest(".".concat(t)),y.getOrCreateInstance(B)[D]())})},Y="close".concat(".bs.alert"),ta="closed".concat(".bs.alert"),R=function(y){function D(){return Gb(this,D),O.apply(this,arguments)}dc(D,y);var O=ec(D);return Hb(D,[{key:"close",value:function(){var t=this;if(!Ga.trigger(this._element,Y).defaultPrevented){this._element.classList.remove("show");var B=this._element.classList.contains("fade");this._queueCallback(function(){return t._destroyElement()},
this._element,B)}}},{key:"_destroyElement",value:function(){this._element.remove();Ga.trigger(this._element,ta);this.dispose()}}],[{key:"NAME",get:function(){return"alert"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var B=D.getOrCreateInstance(this);if("string"==typeof t){if(void 0===B[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));B[t](this)}})}}]),D}(yc);J(R,"close");xc(R);var E=function(y){function D(){return Gb(this,D),O.apply(this,
arguments)}dc(D,y);var O=ec(D);return Hb(D,[{key:"toggle",value:function(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}}],[{key:"NAME",get:function(){return"button"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var B=D.getOrCreateInstance(this);"toggle"===t&&B[t]()})}}]),D}(yc);Ga.on(document,"click.bs.button.data-api",'[data-bs-toggle="button"]',function(y){y.preventDefault();y=y.target.closest('[data-bs-toggle="button"]');E.getOrCreateInstance(y).toggle()});
xc(E);var P="touchstart".concat(".bs.swipe"),aa="touchmove".concat(".bs.swipe"),qa="touchend".concat(".bs.swipe"),Aa="pointerdown".concat(".bs.swipe"),Ba="pointerup".concat(".bs.swipe"),Oa={endCallback:null,leftCallback:null,rightCallback:null},tb={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},Ea=function(y){function D(t,B){var H;return Gb(this,D),(H=O.call(this))._element=t,t&&D.isSupported()&&(H._config=H._getConfig(B),H._deltaX=0,H._supportPointerEvents=
!!window.PointerEvent,H._initEvents()),od(H)}dc(D,y);var O=ec(D);return Hb(D,[{key:"dispose",value:function(){Ga.off(this._element,".bs.swipe")}},{key:"_start",value:function(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}},{key:"_end",value:function(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX);this._handleSwipe();Dc(this._config.endCallback)}},{key:"_move",value:function(t){this._deltaX=t.touches&&
1<t.touches.length?0:t.touches[0].clientX-this._deltaX}},{key:"_handleSwipe",value:function(){var t=Math.abs(this._deltaX);40>=t||(t/=this._deltaX,this._deltaX=0,t&&Dc(0<t?this._config.rightCallback:this._config.leftCallback))}},{key:"_initEvents",value:function(){var t=this;this._supportPointerEvents?(Ga.on(this._element,Aa,function(B){return t._start(B)}),Ga.on(this._element,Ba,function(B){return t._end(B)}),this._element.classList.add("pointer-event")):(Ga.on(this._element,P,function(B){return t._start(B)}),
Ga.on(this._element,aa,function(B){return t._move(B)}),Ga.on(this._element,qa,function(B){return t._end(B)}))}},{key:"_eventIsPointerPenTouch",value:function(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}}],[{key:"Default",get:function(){return Oa}},{key:"DefaultType",get:function(){return tb}},{key:"NAME",get:function(){return"swipe"}},{key:"isSupported",value:function(){return"ontouchstart"in document.documentElement||0<navigator.maxTouchPoints}}]),D}(Fd),
ub="slide".concat(".bs.carousel"),Ec="slid".concat(".bs.carousel"),jd="keydown".concat(".bs.carousel"),Ta="mouseenter".concat(".bs.carousel"),$a="mouseleave".concat(".bs.carousel"),ab="dragstart".concat(".bs.carousel"),Cb="load".concat(".bs.carousel").concat(".data-api"),Rb="click".concat(".bs.carousel").concat(".data-api"),wd={ArrowLeft:"right",ArrowRight:"left"},Qd={interval:5E3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},mi={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",
ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},qe=function(y){function D(t,B){var H;return Gb(this,D),(H=O.call(this,t,B))._interval=null,H._activeElement=null,H._isSliding=!1,H.touchTimeout=null,H._swipeHelper=null,H._indicatorsElement=hb.findOne(".carousel-indicators",H._element),H._addEventListeners(),"carousel"===H._config.ride&&H.cycle(),od(H)}dc(D,y);var O=ec(D);return Hb(D,[{key:"next",value:function(){this._slide("next")}},{key:"nextWhenVisible",value:function(){!document.hidden&&
Ab(this._element)&&this.next()}},{key:"prev",value:function(){this._slide("prev")}},{key:"pause",value:function(){this._isSliding&&this._element.dispatchEvent(new Event("transitionend"));this._clearInterval()}},{key:"cycle",value:function(){var t=this;this._clearInterval();this._updateInterval();this._interval=setInterval(function(){return t.nextWhenVisible()},this._config.interval)}},{key:"_maybeEnableCycle",value:function(){var t=this;this._config.ride&&(this._isSliding?Ga.one(this._element,Ec,
function(){return t.cycle()}):this.cycle())}},{key:"to",value:function(t){var B=this,H=this._getItems();if(!(t>H.length-1||0>t)){if(this._isSliding)return void Ga.one(this._element,Ec,function(){return B.to(t)});var ba=this._getItemIndex(this._getActive());ba!==t&&this._slide(t>ba?"next":"prev",H[t])}}},{key:"dispose",value:function(){this._swipeHelper&&this._swipeHelper.dispose();hd(Sc(D.prototype),"dispose",this).call(this)}},{key:"_configAfterMerge",value:function(t){return t.defaultInterval=t.interval,
t}},{key:"_addEventListeners",value:function(){var t=this;this._config.keyboard&&Ga.on(this._element,jd,function(B){return t._keydown(B)});"hover"===this._config.pause&&(Ga.on(this._element,Ta,function(){return t.pause()}),Ga.on(this._element,$a,function(){return t._maybeEnableCycle()}));this._config.touch&&Ea.isSupported()&&this._addTouchEventListeners()}},{key:"_addTouchEventListeners",value:function(){var t=this,B=!0,H=!1,ba=void 0;try{for(var fa,la=hb.find(".carousel-item img",this._element)[Symbol.iterator]();!(B=
(fa=la.next()).done);B=!0)Ga.on(fa.value,ab,function(ra){return ra.preventDefault()})}catch(ra){H=!0,ba=ra}finally{try{B||null==la.return||la.return()}finally{if(H)throw ba;}}this._swipeHelper=new Ea(this._element,{leftCallback:function(){return t._slide(t._directionToOrder("left"))},rightCallback:function(){return t._slide(t._directionToOrder("right"))},endCallback:function(){"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(){return t._maybeEnableCycle()},
500+t._config.interval))}})}},{key:"_keydown",value:function(t){if(!/input|textarea/i.test(t.target.tagName)){var B=wd[t.key];B&&(t.preventDefault(),this._slide(this._directionToOrder(B)))}}},{key:"_getItemIndex",value:function(t){return this._getItems().indexOf(t)}},{key:"_setActiveIndicatorElement",value:function(t){if(this._indicatorsElement){var B=hb.findOne(".active",this._indicatorsElement);B.classList.remove("active");B.removeAttribute("aria-current");(t=hb.findOne('[data-bs-slide-to="'.concat(t,
'"]'),this._indicatorsElement))&&(t.classList.add("active"),t.setAttribute("aria-current","true"))}}},{key:"_updateInterval",value:function(){var t=this._activeElement||this._getActive();t&&(t=Number.parseInt(t.getAttribute("data-bs-interval"),10),this._config.interval=t||this._config.defaultInterval)}},{key:"_slide",value:function(t){var B=this,H=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(!this._isSliding){var ba=this._getActive(),fa="next"===t,la=H||Ya(this._getItems(),ba,fa,
this._config.wrap);if(la!==ba){var ra=this._getItemIndex(la),oa=function(La){return Ga.trigger(B._element,La,{relatedTarget:la,direction:B._orderToDirection(t),from:B._getItemIndex(ba),to:ra})};if(!oa(ub).defaultPrevented&&ba&&la){H=!!this._interval;this.pause();this._isSliding=!0;this._setActiveIndicatorElement(ra);this._activeElement=la;var xa=fa?"carousel-item-start":"carousel-item-end",Ia=fa?"carousel-item-next":"carousel-item-prev";la.classList.add(Ia);la.offsetHeight;ba.classList.add(xa);la.classList.add(xa);
this._queueCallback(function(){la.classList.remove(xa,Ia);la.classList.add("active");ba.classList.remove("active",Ia,xa);B._isSliding=!1;oa(Ec)},ba,this._isAnimated());H&&this.cycle()}}}}},{key:"_isAnimated",value:function(){return this._element.classList.contains("slide")}},{key:"_getActive",value:function(){return hb.findOne(".active.carousel-item",this._element)}},{key:"_getItems",value:function(){return hb.find(".carousel-item",this._element)}},{key:"_clearInterval",value:function(){this._interval&&
(clearInterval(this._interval),this._interval=null)}},{key:"_directionToOrder",value:function(t){return wc()?"left"===t?"prev":"next":"left"===t?"next":"prev"}},{key:"_orderToDirection",value:function(t){return wc()?"prev"===t?"left":"right":"prev"===t?"right":"left"}}],[{key:"Default",get:function(){return Qd}},{key:"DefaultType",get:function(){return mi}},{key:"NAME",get:function(){return"carousel"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var B=D.getOrCreateInstance(this,
t);if("number"!=typeof t){if("string"==typeof t){if(void 0===B[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));B[t]()}}else B.to(t)})}}]),D}(yc);Ga.on(document,Rb,"[data-bs-slide], [data-bs-slide-to]",function(y){var D=hb.getElementFromSelector(this);if(D&&D.classList.contains("carousel"))return y.preventDefault(),y=qe.getOrCreateInstance(D),D=this.getAttribute("data-bs-slide-to"),D?y.to(D):"next"===Oc.getDataAttribute(this,"slide")?y.next():y.prev(),void y._maybeEnableCycle()});
Ga.on(window,Cb,function(){var y=hb.find('[data-bs-ride="carousel"]'),D=!0,O=!1,t=void 0;try{for(var B,H=y[Symbol.iterator]();!(D=(B=H.next()).done);D=!0)qe.getOrCreateInstance(B.value)}catch(ba){O=!0,t=ba}finally{try{D||null==H.return||H.return()}finally{if(O)throw t;}}});xc(qe);var ni="show".concat(".bs.collapse"),oi="shown".concat(".bs.collapse"),af="hide".concat(".bs.collapse"),Cd="hidden".concat(".bs.collapse"),Ek=":scope .".concat("collapse"," .").concat("collapse"),pi={parent:null,toggle:!0},
Ik={parent:"(null|element)",toggle:"boolean"},Ng=function(y){function D(t,B){Gb(this,D);(fa=O.call(this,t,B))._isTransitioning=!1;fa._triggerArray=[];t=hb.find('[data-bs-toggle="collapse"]');B=!0;var H=!1,ba=void 0;try{for(var fa,la,ra=t[Symbol.iterator]();!(B=(la=ra.next()).done);B=!0){var oa=la.value,xa=hb.getSelectorFromElement(oa),Ia=hb.find(xa).filter(function(La){return La===fa._element});null!==xa&&Ia.length&&fa._triggerArray.push(oa)}}catch(La){H=!0,ba=La}finally{try{B||null==ra.return||ra.return()}finally{if(H)throw ba;
}}return fa._initializeChildren(),fa._config.parent||fa._addAriaAndCollapsedClass(fa._triggerArray,fa._isShown()),fa._config.toggle&&fa.toggle(),od(fa)}dc(D,y);var O=ec(D);return Hb(D,[{key:"toggle",value:function(){this._isShown()?this.hide():this.show()}},{key:"show",value:function(){var t=this;if(!this._isTransitioning&&!this._isShown()){var B=[];if(this._config.parent&&(B=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(function(xa){return xa!==t._element}).map(function(xa){return D.getOrCreateInstance(xa,
{toggle:!1})})),!(B.length&&B[0]._isTransitioning||Ga.trigger(this._element,ni).defaultPrevented)){var H=!0,ba=!1,fa=void 0;try{for(var la,ra=B[Symbol.iterator]();!(H=(la=ra.next()).done);H=!0)la.value.hide()}catch(xa){ba=!0,fa=xa}finally{try{H||null==ra.return||ra.return()}finally{if(ba)throw fa;}}var oa=this._getDimension();this._element.classList.remove("collapse");this._element.classList.add("collapsing");this._element.style[oa]=0;this._addAriaAndCollapsedClass(this._triggerArray,!0);this._isTransitioning=
!0;B="scroll".concat(oa[0].toUpperCase()+oa.slice(1));this._queueCallback(function(){t._isTransitioning=!1;t._element.classList.remove("collapsing");t._element.classList.add("collapse","show");t._element.style[oa]="";Ga.trigger(t._element,oi)},this._element,!0);this._element.style[oa]="".concat(this._element[B],"px")}}}},{key:"hide",value:function(){var t=this;if(!this._isTransitioning&&this._isShown()&&!Ga.trigger(this._element,af).defaultPrevented){var B=this._getDimension();this._element.style[B]=
"".concat(this._element.getBoundingClientRect()[B],"px");this._element.offsetHeight;this._element.classList.add("collapsing");this._element.classList.remove("collapse","show");var H=!0,ba=!1,fa=void 0;try{for(var la,ra=this._triggerArray[Symbol.iterator]();!(H=(la=ra.next()).done);H=!0){var oa=la.value,xa=hb.getElementFromSelector(oa);xa&&!this._isShown(xa)&&this._addAriaAndCollapsedClass([oa],!1)}}catch(Ia){ba=!0,fa=Ia}finally{try{H||null==ra.return||ra.return()}finally{if(ba)throw fa;}}this._isTransitioning=
!0;this._element.style[B]="";this._queueCallback(function(){t._isTransitioning=!1;t._element.classList.remove("collapsing");t._element.classList.add("collapse");Ga.trigger(t._element,Cd)},this._element,!0)}}},{key:"_isShown",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains("show")}},{key:"_configAfterMerge",value:function(t){return t.toggle=!!t.toggle,t.parent=Jc(t.parent),t}},{key:"_getDimension",value:function(){return this._element.classList.contains("collapse-horizontal")?
"width":"height"}},{key:"_initializeChildren",value:function(){if(this._config.parent){var t=this._getFirstLevelChildren('[data-bs-toggle="collapse"]'),B=!0,H=!1,ba=void 0;try{for(var fa,la=t[Symbol.iterator]();!(B=(fa=la.next()).done);B=!0){var ra=fa.value,oa=hb.getElementFromSelector(ra);oa&&this._addAriaAndCollapsedClass([ra],this._isShown(oa))}}catch(xa){H=!0,ba=xa}finally{try{B||null==la.return||la.return()}finally{if(H)throw ba;}}}}},{key:"_getFirstLevelChildren",value:function(t){var B=hb.find(Ek,
this._config.parent);return hb.find(t,this._config.parent).filter(function(H){return!B.includes(H)})}},{key:"_addAriaAndCollapsedClass",value:function(t,B){var H=!0,ba=!1,fa=void 0;if(t.length)try{for(var la,ra=t[Symbol.iterator]();!(H=(la=ra.next()).done);H=!0){var oa=la.value;oa.classList.toggle("collapsed",!B);oa.setAttribute("aria-expanded",B)}}catch(xa){ba=!0,fa=xa}finally{try{H||null==ra.return||ra.return()}finally{if(ba)throw fa;}}}}],[{key:"Default",get:function(){return pi}},{key:"DefaultType",
get:function(){return Ik}},{key:"NAME",get:function(){return"collapse"}},{key:"jQueryInterface",value:function(t){var B={};return"string"==typeof t&&/show|hide/.test(t)&&(B.toggle=!1),this.each(function(){var H=D.getOrCreateInstance(this,B);if("string"==typeof t){if(void 0===H[t])throw TypeError('No method named "'.concat(t,'"'));H[t]()}})}}]),D}(yc);Ga.on(document,"click".concat(".bs.collapse",".data-api"),'[data-bs-toggle="collapse"]',function(y){("A"===y.target.tagName||y.delegateTarget&&"A"===
y.delegateTarget.tagName)&&y.preventDefault();y=!0;var D=!1,O=void 0;try{for(var t,B=hb.getMultipleElementsFromSelector(this)[Symbol.iterator]();!(y=(t=B.next()).done);y=!0)Ng.getOrCreateInstance(t.value,{toggle:!1}).toggle()}catch(H){D=!0,O=H}finally{try{y||null==B.return||B.return()}finally{if(D)throw O;}}});xc(Ng);var Ye=["top","bottom","right","left"],Df=Ye.reduce(function(y,D){return y.concat([D+"-start",D+"-end"])},[]),Bf=[].concat(Ye,["auto"]).reduce(function(y,D){return y.concat([D,D+"-start",
D+"-end"])},[]),Cf="beforeRead read afterRead beforeMain main afterMain beforeWrite write afterWrite".split(" "),kg={name:"applyStyles",enabled:!0,phase:"write",fn:function(y){var D=y.state;Object.keys(D.elements).forEach(function(O){var t=D.styles[O]||{},B=D.attributes[O]||{},H=D.elements[O];r(H)&&p(H)&&(Object.assign(H.style,t),Object.keys(B).forEach(function(ba){var fa=B[ba];!1===fa?H.removeAttribute(ba):H.setAttribute(ba,!0===fa?"":fa)}))})},effect:function(y){var D=y.state,O={popper:{position:D.options.strategy,
left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(D.elements.popper.style,O.popper),D.styles=O,D.elements.arrow&&Object.assign(D.elements.arrow.style,O.arrow),function(){Object.keys(D.elements).forEach(function(t){var B=D.elements[t],H=D.attributes[t]||{};t=Object.keys(D.styles.hasOwnProperty(t)?D.styles[t]:O[t]).reduce(function(ba,fa){return ba[fa]="",ba},{});r(B)&&p(B)&&(Object.assign(B.style,t),Object.keys(H).forEach(function(ba){B.removeAttribute(ba)}))})}},
requires:["computeStyles"]},Kd=Math.max,$d=Math.min,Ge=Math.round,Og={name:"arrow",enabled:!0,phase:"main",fn:function(y){var D,O=y.state,t=y.name,B=y.options,H=O.elements.arrow,ba=O.modifiersData.popperOffsets,fa=w(O.placement);y=Ca(fa);fa=0<=["left","right"].indexOf(fa)?"height":"width";if(H&&ba){var la;B=Ja("number"!=typeof(la="function"==typeof(la=B.padding)?la(Object.assign({},O.rects,{placement:O.placement})):la)?la:Ha(la,Ye));la=N(H);var ra="y"===y?"top":"left",oa="y"===y?"bottom":"right",
xa=O.rects.reference[fa]+O.rects.reference[y]-ba[y]-O.rects.popper[fa];ba=ba[y]-O.rects.reference[y];H=(H=ma(H))?"y"===y?H.clientHeight||0:H.clientWidth||0:0;ba=H/2-la[fa]/2+(xa/2-ba/2);fa=Kd(B[ra],$d(ba,H-la[fa]-B[oa]));O.modifiersData[t]=((D={})[y]=fa,D.centerOffset=fa-ba,D)}},effect:function(y){var D=y.state;y=y.options.element;y=void 0===y?"[data-popper-arrow]":y;null!=y&&("string"!=typeof y||(y=D.elements.popper.querySelector(y)))&&M(D.elements.popper,y)&&(D.elements.arrow=y)},requires:["popperOffsets"],
requiresIfExists:["preventOverflow"]},Jk={top:"auto",right:"auto",bottom:"auto",left:"auto"},Rg={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(y){var D=y.state,O=y.options,t=O.gpuAcceleration;y=O.adaptive;O=O.roundOffsets;O=void 0===O||O;t={placement:w(D.placement),variation:V(D.placement),popper:D.elements.popper,popperRect:D.rects.popper,gpuAcceleration:void 0===t||t,isFixed:"fixed"===D.options.strategy};null!=D.modifiersData.popperOffsets&&(D.styles.popper=Object.assign({},D.styles.popper,
Na(Object.assign({},t,{offsets:D.modifiersData.popperOffsets,position:D.options.strategy,adaptive:void 0===y||y,roundOffsets:O}))));null!=D.modifiersData.arrow&&(D.styles.arrow=Object.assign({},D.styles.arrow,Na(Object.assign({},t,{offsets:D.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:O}))));D.attributes.popper=Object.assign({},D.attributes.popper,{"data-popper-placement":D.placement})},data:{}},Ef={passive:!0},bf={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},
effect:function(y){var D=y.state,O=y.instance;y=y.options;var t=y.scroll,B=void 0===t||t;y=y.resize;var H=void 0===y||y,ba=m(D.elements.popper),fa=[].concat(D.scrollParents.reference,D.scrollParents.popper);return B&&fa.forEach(function(la){la.addEventListener("scroll",O.update,Ef)}),H&&ba.addEventListener("resize",O.update,Ef),function(){B&&fa.forEach(function(la){la.removeEventListener("scroll",O.update,Ef)});H&&ba.removeEventListener("resize",O.update,Ef)}},data:{}},Ze={left:"right",right:"left",
bottom:"top",top:"bottom"},lg={start:"end",end:"start"},qi={name:"flip",enabled:!0,phase:"main",fn:function(y){var D=y.state,O=y.options;y=y.name;if(!D.modifiersData[y]._skip){var t=O.mainAxis;t=void 0===t||t;var B=O.altAxis;B=void 0===B||B;var H=O.fallbackPlacements,ba=O.padding,fa=O.boundary,la=O.rootBoundary,ra=O.altBoundary,oa=O.flipVariations,xa=void 0===oa||oa,Ia=O.allowedAutoPlacements;O=D.options.placement;oa=w(O);H=H||(oa!==O&&xa?function(Ub){if("auto"===w(Ub))return[];var bc=wa(Ub);return[wb(Ub),
bc,wb(bc)]}(O):[wa(O)]);var La=[O].concat(H).reduce(function(Ub,bc){var cc,bd,se,Ed,Ko,Lo,Mo,No,Oo,Po,Zk,$k;return Ub.concat("auto"===w(bc)?(bd=(cc={placement:bc,boundary:fa,rootBoundary:la,padding:ba,flipVariations:xa,allowedAutoPlacements:Ia}).placement,se=cc.boundary,Ed=cc.rootBoundary,Ko=cc.padding,Lo=cc.flipVariations,No=void 0===(Mo=cc.allowedAutoPlacements)?Bf:Mo,0===(Zk=(Po=(Oo=V(bd))?Lo?Df:Df.filter(function(ff){return V(ff)===Oo}):Ye).filter(function(ff){return 0<=No.indexOf(ff)})).length&&
(Zk=Po),Object.keys($k=Zk.reduce(function(ff,Yg){return ff[Yg]=X(D,{placement:Yg,boundary:se,rootBoundary:Ed,padding:Ko})[w(Yg)],ff},{})).sort(function(ff,Yg){return $k[ff]-$k[Yg]})):bc)},[]);O=D.rects.reference;H=D.rects.popper;var Pa=new Map;oa=!0;for(var rb=La[0],nb=0;nb<La.length;nb++){var Za=La[nb],sb=w(Za),Eb="start"===V(Za),db=0<=["top","bottom"].indexOf(sb),Fb=db?"width":"height",Xb=X(D,{placement:Za,boundary:fa,rootBoundary:la,altBoundary:ra,padding:ba});Eb=db?Eb?"right":"left":Eb?"bottom":
"top";O[Fb]>H[Fb]&&(Eb=wa(Eb));Fb=wa(Eb);db=[];if(t&&db.push(0>=Xb[sb]),B&&db.push(0>=Xb[Eb],0>=Xb[Fb]),db.every(function(Ub){return Ub})){rb=Za;oa=!1;break}Pa.set(Za,db)}if(oa)for(t=function(Ub){var bc=La.find(function(cc){if(cc=Pa.get(cc))return cc.slice(0,Ub).every(function(bd){return bd})});if(bc)return rb=bc,"break"},B=xa?3:1;0<B&&"break"!==t(B);B--);D.placement!==rb&&(D.modifiersData[y]._skip=!0,D.placement=rb,D.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},ri={name:"hide",enabled:!0,
phase:"main",requiresIfExists:["preventOverflow"],fn:function(y){var D=y.state;y=y.name;var O=D.rects.reference,t=D.rects.popper,B=D.modifiersData.preventOverflow,H=X(D,{elementContext:"reference"}),ba=X(D,{altBoundary:!0});O=va(H,O);t=va(ba,t,B);B=ua(O);ba=ua(t);D.modifiersData[y]={referenceClippingOffsets:O,popperEscapeOffsets:t,isReferenceHidden:B,hasPopperEscaped:ba};D.attributes.popper=Object.assign({},D.attributes.popper,{"data-popper-reference-hidden":B,"data-popper-escaped":ba})}},cf={name:"offset",
enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(y){var D=y.state,O=y.name;y=y.options.offset;var t=void 0===y?[0,0]:y;y=Bf.reduce(function(ba,fa){var la,ra,oa,xa,Ia,La;return ba[fa]=(la=D.rects,oa=0<=["left","top"].indexOf(ra=w(fa))?-1:1,Ia=(xa="function"==typeof t?t(Object.assign({},la,{placement:fa})):t)[0],La=xa[1],Ia=Ia||0,La=(La||0)*oa,0<=["left","right"].indexOf(ra)?{x:La,y:Ia}:{x:Ia,y:La}),ba},{});var B=y[D.placement],H=B.x;B=B.y;null!=D.modifiersData.popperOffsets&&(D.modifiersData.popperOffsets.x+=
H,D.modifiersData.popperOffsets.y+=B);D.modifiersData[O]=y}},Sg={name:"popperOffsets",enabled:!0,phase:"read",fn:function(y){var D=y.state;D.modifiersData[y.name]=za({reference:D.rects.reference,element:D.rects.popper,strategy:"absolute",placement:D.placement})},data:{}},df={name:"preventOverflow",enabled:!0,phase:"main",fn:function(y){var D=y.state,O=y.options;y=y.name;var t=O.mainAxis,B=O.altAxis,H=O.tether;H=void 0===H||H;var ba=O.tetherOffset,fa=void 0===ba?0:ba,la=X(D,{boundary:O.boundary,rootBoundary:O.rootBoundary,
padding:O.padding,altBoundary:O.altBoundary}),ra=w(D.placement),oa=V(D.placement),xa=!oa,Ia=Ca(ra);O="x"===Ia?"y":"x";ba=D.modifiersData.popperOffsets;var La=D.rects.reference,Pa=D.rects.popper;fa="function"==typeof fa?fa(Object.assign({},D.rects,{placement:D.placement})):fa;var rb="number"==typeof fa?{mainAxis:fa,altAxis:fa}:Object.assign({mainAxis:0,altAxis:0},fa),nb=D.modifiersData.offset?D.modifiersData.offset[D.placement]:null;fa={x:0,y:0};if(ba){if(void 0===t||t){var Za,sb="y"===Ia?"top":"left",
Eb="y"===Ia?"bottom":"right",db="y"===Ia?"height":"width";t=ba[Ia];var Fb=t+la[sb],Xb=t-la[Eb],Ub=H?-Pa[db]/2:0,bc="start"===oa?La[db]:Pa[db];oa="start"===oa?-Pa[db]:-La[db];var cc=D.elements.arrow;cc=H&&cc?N(cc):{width:0,height:0};var bd=D.modifiersData["arrow#persistent"]?D.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0};sb=bd[sb];Eb=bd[Eb];cc=Kd(0,$d(La[db],cc[db]));bc=xa?La[db]/2-Ub-cc-sb-rb.mainAxis:bc-cc-sb-rb.mainAxis;xa=xa?-La[db]/2+Ub+cc+Eb+rb.mainAxis:oa+cc+Eb+
rb.mainAxis;Ub=(db=D.elements.arrow&&ma(D.elements.arrow))?"y"===Ia?db.clientTop||0:db.clientLeft||0:0;db=null!=(Za=null==nb?void 0:nb[Ia])?Za:0;Za=H?$d(Fb,t+bc-db-Ub):Fb;Xb=H?Kd(Xb,t+xa-db):Xb;Za=Kd(Za,$d(t,Xb));ba[Ia]=Za;fa[Ia]=Za-t}if(void 0!==B&&B){var se,Ed;B=ba[O];t="y"===O?"height":"width";Za=B+la["x"===Ia?"top":"left"];la=B-la["x"===Ia?"bottom":"right"];ra=-1!==["top","left"].indexOf(ra);Ia=null!=(Ed=null==nb?void 0:nb[O])?Ed:0;Ed=ra?Za:B-La[t]-Pa[t]-Ia+rb.altAxis;La=ra?B+La[t]+Pa[t]-Ia-rb.altAxis:
la;Pa=H&&ra?(se=Kd(Ed,$d(B,La)))>La?La:se:Kd(H?Ed:Za,$d(B,H?La:la));ba[O]=Pa;fa[O]=Pa-B}D.modifiersData[y]=fa}},requiresIfExists:["offset"]},si={placement:"bottom",modifiers:[],strategy:"absolute"},Kk=xb(),Lk=xb({defaultModifiers:[bf,Sg,Rg,kg]}),Tg=xb({defaultModifiers:[bf,Sg,Rg,kg,cf,qi,df,Og,ri]}),ef=Object.freeze(Object.defineProperty({__proto__:null,afterMain:"afterMain",afterRead:"afterRead",afterWrite:"afterWrite",applyStyles:kg,arrow:Og,auto:"auto",basePlacements:Ye,beforeMain:"beforeMain",
beforeRead:"beforeRead",beforeWrite:"beforeWrite",bottom:"bottom",clippingParents:"clippingParents",computeStyles:Rg,createPopper:Tg,createPopperBase:Kk,createPopperLite:Lk,detectOverflow:X,end:"end",eventListeners:bf,flip:qi,hide:ri,left:"left",main:"main",modifierPhases:Cf,offset:cf,placements:Bf,popper:"popper",popperGenerator:xb,popperOffsets:Sg,preventOverflow:df,read:"read",reference:"reference",right:"right",start:"start",top:"top",variationPlacements:Df,viewport:"viewport",write:"write"},
Symbol.toStringTag,{value:"Module"})),ti="hide".concat(".bs.dropdown"),Ug="hidden".concat(".bs.dropdown"),ui="show".concat(".bs.dropdown"),vi="shown".concat(".bs.dropdown"),wi="click".concat(".bs.dropdown").concat(".data-api"),Vg="keydown".concat(".bs.dropdown").concat(".data-api"),Mk="keyup".concat(".bs.dropdown").concat(".data-api"),Nk="".concat('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',".").concat("show"),Ok=wc()?"top-end":"top-start",Pk=wc()?"top-start":"top-end",Qk=wc()?"bottom-end":
"bottom-start",Rk=wc()?"bottom-start":"bottom-end",Sk=wc()?"left-start":"right-start",Tk=wc()?"right-start":"left-start",xi={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Pg={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},re=function(y){function D(t,B){var H;return Gb(this,D),(H=O.call(this,t,B))._popper=
null,H._parent=H._element.parentNode,H._menu=hb.next(H._element,".dropdown-menu")[0]||hb.prev(H._element,".dropdown-menu")[0]||hb.findOne(".dropdown-menu",H._parent),H._inNavbar=H._detectNavbar(),od(H)}dc(D,y);var O=ec(D);return Hb(D,[{key:"toggle",value:function(){return this._isShown()?this.hide():this.show()}},{key:"show",value:function(){if(!qc(this._element)&&!this._isShown()){var t={relatedTarget:this._element};if(!Ga.trigger(this._element,ui,t).defaultPrevented){var B=!0,H=!1,ba=void 0;if(this._createPopper(),
"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))try{for(var fa,la,ra=(fa=[]).concat.apply(fa,ce(document.body.children))[Symbol.iterator]();!(B=(la=ra.next()).done);B=!0)Ga.on(la.value,"mouseover",yb)}catch(oa){H=!0,ba=oa}finally{try{B||null==ra.return||ra.return()}finally{if(H)throw ba;}}this._element.focus();this._element.setAttribute("aria-expanded",!0);this._menu.classList.add("show");this._element.classList.add("show");Ga.trigger(this._element,vi,t)}}}},{key:"hide",
value:function(){!qc(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}},{key:"dispose",value:function(){this._popper&&this._popper.destroy();hd(Sc(D.prototype),"dispose",this).call(this)}},{key:"update",value:function(){this._inNavbar=this._detectNavbar();this._popper&&this._popper.update()}},{key:"_completeHide",value:function(t){if(!Ga.trigger(this._element,ti,t).defaultPrevented){var B=!0,H=!1,ba=void 0;if("ontouchstart"in document.documentElement)try{for(var fa,
la,ra=(fa=[]).concat.apply(fa,ce(document.body.children))[Symbol.iterator]();!(B=(la=ra.next()).done);B=!0)Ga.off(la.value,"mouseover",yb)}catch(oa){H=!0,ba=oa}finally{try{B||null==ra.return||ra.return()}finally{if(H)throw ba;}}this._popper&&this._popper.destroy();this._menu.classList.remove("show");this._element.classList.remove("show");this._element.setAttribute("aria-expanded","false");Oc.removeDataAttribute(this._menu,"popper");Ga.trigger(this._element,Ug,t)}}},{key:"_getConfig",value:function(t){if("object"==
typeof(t=hd(Sc(D.prototype),"_getConfig",this).call(this,t)).reference&&!fb(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw TypeError("".concat("DROPDOWN",': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'));return t}},{key:"_createPopper",value:function(){if(void 0===ef)throw TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var t=this._element;"parent"===this._config.reference?t=this._parent:fb(this._config.reference)?
t=Jc(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);var B=this._getPopperConfig();this._popper=Tg(t,this._menu,B)}},{key:"_isShown",value:function(){return this._menu.classList.contains("show")}},{key:"_getPlacement",value:function(){var t=this._parent;if(t.classList.contains("dropend"))return Sk;if(t.classList.contains("dropstart"))return Tk;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";
var B="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?B?Pk:Ok:B?Rk:Qk}},{key:"_detectNavbar",value:function(){return null!==this._element.closest(".navbar")}},{key:"_getOffset",value:function(){var t=this,B=this._config.offset;return"string"==typeof B?B.split(",").map(function(H){return Number.parseInt(H,10)}):"function"==typeof B?function(H){return B(H,t._element)}:B}},{key:"_getPopperConfig",value:function(){var t={placement:this._getPlacement(),
modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Oc.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),Le({},t,Dc(this._config.popperConfig,[t]))}},{key:"_selectMenuItem",value:function(t){var B=t.key;t=t.target;var H=hb.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(function(ba){return Ab(ba)});
H.length&&Ya(H,t,"ArrowDown"===B,!H.includes(t)).focus()}}],[{key:"Default",get:function(){return xi}},{key:"DefaultType",get:function(){return Pg}},{key:"NAME",get:function(){return"dropdown"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var B=D.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===B[t])throw TypeError('No method named "'.concat(t,'"'));B[t]()}})}},{key:"clearMenus",value:function(t){if(2!==t.button&&("keyup"!==t.type||"Tab"===t.key)){var B=hb.find(Nk),
H=!0,ba=!1,fa=void 0;try{for(var la,ra=B[Symbol.iterator]();!(H=(la=ra.next()).done);H=!0){var oa=D.getInstance(la.value);if(oa&&!1!==oa._config.autoClose){var xa=t.composedPath(),Ia=xa.includes(oa._menu);if(!(xa.includes(oa._element)||"inside"===oa._config.autoClose&&!Ia||"outside"===oa._config.autoClose&&Ia||oa._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))){var La={relatedTarget:oa._element};"click"===t.type&&(La.clickEvent=
t);oa._completeHide(La)}}}}catch(Pa){ba=!0,fa=Pa}finally{try{H||null==ra.return||ra.return()}finally{if(ba)throw fa;}}}}},{key:"dataApiKeydownHandler",value:function(t){var B=/input|textarea/i.test(t.target.tagName),H="Escape"===t.key,ba=["ArrowUp","ArrowDown"].includes(t.key);if((ba||H)&&(!B||H)){t.preventDefault();B=this.matches('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)')?this:hb.prev(this,'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)')[0]||hb.next(this,'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)')[0]||
hb.findOne('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',t.delegateTarget.parentNode);H=D.getOrCreateInstance(B);if(ba)return t.stopPropagation(),H.show(),void H._selectMenuItem(t);H._isShown()&&(t.stopPropagation(),H.hide(),B.focus())}}}]),D}(yc);Ga.on(document,Vg,'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',re.dataApiKeydownHandler);Ga.on(document,Vg,".dropdown-menu",re.dataApiKeydownHandler);Ga.on(document,wi,re.clearMenus);Ga.on(document,Mk,re.clearMenus);Ga.on(document,
wi,'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',function(y){y.preventDefault();re.getOrCreateInstance(this).toggle()});xc(re);var mg="mousedown.bs.".concat("backdrop"),Uk={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ff={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},Wg=function(y){function D(t){var B;return Gb(this,D),(B=O.call(this))._config=B._getConfig(t),
B._isAppended=!1,B._element=null,od(B)}dc(D,y);var O=ec(D);return Hb(D,[{key:"show",value:function(t){if(!this._config.isVisible)return void Dc(t);this._append();var B=this._getElement();this._config.isAnimated&&B.offsetHeight;B.classList.add("show");this._emulateAnimation(function(){Dc(t)})}},{key:"hide",value:function(t){var B=this;this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(function(){B.dispose();Dc(t)})):Dc(t)}},{key:"dispose",value:function(){this._isAppended&&
(Ga.off(this._element,mg),this._element.remove(),this._isAppended=!1)}},{key:"_getElement",value:function(){if(!this._element){var t=document.createElement("div");t.className=this._config.className;this._config.isAnimated&&t.classList.add("fade");this._element=t}return this._element}},{key:"_configAfterMerge",value:function(t){return t.rootElement=Jc(t.rootElement),t}},{key:"_append",value:function(){var t=this;if(!this._isAppended){var B=this._getElement();this._config.rootElement.append(B);Ga.on(B,
mg,function(){Dc(t._config.clickCallback)});this._isAppended=!0}}},{key:"_emulateAnimation",value:function(t){jb(t,this._getElement(),this._config.isAnimated)}}],[{key:"Default",get:function(){return Uk}},{key:"DefaultType",get:function(){return Ff}},{key:"NAME",get:function(){return"backdrop"}}]),D}(Fd),Xg="focusin".concat(".bs.focustrap"),Vk="keydown.tab".concat(".bs.focustrap"),Wk={autofocus:!0,trapElement:null},Xk={autofocus:"boolean",trapElement:"element"},q=function(y){function D(t){var B;return Gb(this,
D),(B=O.call(this))._config=B._getConfig(t),B._isActive=!1,B._lastTabNavDirection=null,od(B)}dc(D,y);var O=ec(D);return Hb(D,[{key:"activate",value:function(){var t=this;this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Ga.off(document,".bs.focustrap"),Ga.on(document,Xg,function(B){return t._handleFocusin(B)}),Ga.on(document,Vk,function(B){return t._handleKeydown(B)}),this._isActive=!0)}},{key:"deactivate",value:function(){this._isActive&&(this._isActive=!1,Ga.off(document,
".bs.focustrap"))}},{key:"_handleFocusin",value:function(t){var B=this._config.trapElement;t.target===document||t.target===B||B.contains(t.target)||(t=hb.focusableChildren(B),0===t.length?B.focus():"backward"===this._lastTabNavDirection?t[t.length-1].focus():t[0].focus())}},{key:"_handleKeydown",value:function(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?"backward":"forward")}}],[{key:"Default",get:function(){return Wk}},{key:"DefaultType",get:function(){return Xk}},{key:"NAME",get:function(){return"focustrap"}}]),
D}(Fd),v=function(){function y(){Gb(this,y);this._element=document.body}return Hb(y,[{key:"getWidth",value:function(){return Math.abs(window.innerWidth-document.documentElement.clientWidth)}},{key:"hide",value:function(){var D=this.getWidth();this._disableOverFlow();this._setElementAttributes(this._element,"padding-right",function(O){return O+D});this._setElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top","padding-right",function(O){return O+D});this._setElementAttributes(".sticky-top",
"margin-right",function(O){return O-D})}},{key:"reset",value:function(){this._resetElementAttributes(this._element,"overflow");this._resetElementAttributes(this._element,"padding-right");this._resetElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top","padding-right");this._resetElementAttributes(".sticky-top","margin-right")}},{key:"isOverflowing",value:function(){return 0<this.getWidth()}},{key:"_disableOverFlow",value:function(){this._saveInitialAttribute(this._element,"overflow");
this._element.style.overflow="hidden"}},{key:"_setElementAttributes",value:function(D,O,t){var B=this,H=this.getWidth();this._applyManipulationCallback(D,function(ba){if(ba===B._element||!(window.innerWidth>ba.clientWidth+H)){B._saveInitialAttribute(ba,O);var fa=window.getComputedStyle(ba).getPropertyValue(O);ba.style.setProperty(O,"".concat(t(Number.parseFloat(fa)),"px"))}})}},{key:"_saveInitialAttribute",value:function(D,O){var t=D.style.getPropertyValue(O);t&&Oc.setDataAttribute(D,O,t)}},{key:"_resetElementAttributes",
value:function(D,O){this._applyManipulationCallback(D,function(t){var B=Oc.getDataAttribute(t,O);null!==B?(Oc.removeDataAttribute(t,O),t.style.setProperty(O,B)):t.style.removeProperty(O)})}},{key:"_applyManipulationCallback",value:function(D,O){var t=!0,B=!1,H=void 0;if(fb(D))O(D);else try{for(var ba,fa=hb.find(D,this._element)[Symbol.iterator]();!(t=(ba=fa.next()).done);t=!0)O(ba.value)}catch(la){B=!0,H=la}finally{try{t||null==fa.return||fa.return()}finally{if(B)throw H;}}}}]),y}(),x="hide".concat(".bs.modal"),
C="hidePrevented".concat(".bs.modal"),F="hidden".concat(".bs.modal"),K="show".concat(".bs.modal"),Q="shown".concat(".bs.modal"),U="resize".concat(".bs.modal"),Z="click.dismiss".concat(".bs.modal"),na="mousedown.dismiss".concat(".bs.modal"),Da="keydown.dismiss".concat(".bs.modal"),ja="click".concat(".bs.modal",".data-api"),Qa={backdrop:!0,focus:!0,keyboard:!0},Xa={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},cb=function(y){function D(t,B){var H;return Gb(this,D),(H=O.call(this,t,
B))._dialog=hb.findOne(".modal-dialog",H._element),H._backdrop=H._initializeBackDrop(),H._focustrap=H._initializeFocusTrap(),H._isShown=!1,H._isTransitioning=!1,H._scrollBar=new v,H._addEventListeners(),od(H)}dc(D,y);var O=ec(D);return Hb(D,[{key:"toggle",value:function(t){return this._isShown?this.hide():this.show(t)}},{key:"show",value:function(t){var B=this;this._isShown||this._isTransitioning||Ga.trigger(this._element,K,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=
!0,this._scrollBar.hide(),document.body.classList.add("modal-open"),this._adjustDialog(),this._backdrop.show(function(){return B._showElement(t)}))}},{key:"hide",value:function(){var t=this;this._isShown&&!this._isTransitioning&&(Ga.trigger(this._element,x).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(function(){return t._hideModal()},this._element,this._isAnimated())))}},{key:"dispose",value:function(){Ga.off(window,
".bs.modal");Ga.off(this._dialog,".bs.modal");this._backdrop.dispose();this._focustrap.deactivate();hd(Sc(D.prototype),"dispose",this).call(this)}},{key:"handleUpdate",value:function(){this._adjustDialog()}},{key:"_initializeBackDrop",value:function(){return new Wg({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}},{key:"_initializeFocusTrap",value:function(){return new q({trapElement:this._element})}},{key:"_showElement",value:function(t){var B=this;document.body.contains(this._element)||
document.body.append(this._element);this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.setAttribute("aria-modal",!0);this._element.setAttribute("role","dialog");this._element.scrollTop=0;var H=hb.findOne(".modal-body",this._dialog);H&&(H.scrollTop=0);this._element.offsetHeight;this._element.classList.add("show");this._queueCallback(function(){B._config.focus&&B._focustrap.activate();B._isTransitioning=!1;Ga.trigger(B._element,Q,{relatedTarget:t})},this._dialog,
this._isAnimated())}},{key:"_addEventListeners",value:function(){var t=this;Ga.on(this._element,Da,function(B){"Escape"===B.key&&(t._config.keyboard?t.hide():t._triggerBackdropTransition())});Ga.on(window,U,function(){t._isShown&&!t._isTransitioning&&t._adjustDialog()});Ga.on(this._element,na,function(B){Ga.one(t._element,Z,function(H){t._element===B.target&&t._element===H.target&&("static"!==t._config.backdrop?t._config.backdrop&&t.hide():t._triggerBackdropTransition())})})}},{key:"_hideModal",value:function(){var t=
this;this._element.style.display="none";this._element.setAttribute("aria-hidden",!0);this._element.removeAttribute("aria-modal");this._element.removeAttribute("role");this._isTransitioning=!1;this._backdrop.hide(function(){document.body.classList.remove("modal-open");t._resetAdjustments();t._scrollBar.reset();Ga.trigger(t._element,F)})}},{key:"_isAnimated",value:function(){return this._element.classList.contains("fade")}},{key:"_triggerBackdropTransition",value:function(){var t=this;if(!Ga.trigger(this._element,
C).defaultPrevented){var B=this._element.scrollHeight>document.documentElement.clientHeight,H=this._element.style.overflowY;"hidden"===H||this._element.classList.contains("modal-static")||(B||(this._element.style.overflowY="hidden"),this._element.classList.add("modal-static"),this._queueCallback(function(){t._element.classList.remove("modal-static");t._queueCallback(function(){t._element.style.overflowY=H},t._dialog)},this._dialog),this._element.focus())}}},{key:"_adjustDialog",value:function(){var t=
this._element.scrollHeight>document.documentElement.clientHeight,B=this._scrollBar.getWidth(),H=0<B;if(H&&!t){var ba=wc()?"paddingLeft":"paddingRight";this._element.style[ba]="".concat(B,"px")}!H&&t&&(t=wc()?"paddingRight":"paddingLeft",this._element.style[t]="".concat(B,"px"))}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="";this._element.style.paddingRight=""}}],[{key:"Default",get:function(){return Qa}},{key:"DefaultType",get:function(){return Xa}},{key:"NAME",get:function(){return"modal"}},
{key:"jQueryInterface",value:function(t,B){return this.each(function(){var H=D.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===H[t])throw TypeError('No method named "'.concat(t,'"'));H[t](B)}})}}]),D}(yc);Ga.on(document,ja,'[data-bs-toggle="modal"]',function(y){var D=this,O=hb.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&y.preventDefault();Ga.one(O,K,function(t){t.defaultPrevented||Ga.one(O,F,function(){Ab(D)&&D.focus()})});(y=hb.findOne(".modal.show"))&&cb.getInstance(y).hide();
cb.getOrCreateInstance(O).toggle(this)});J(cb);xc(cb);var Jb="load".concat(".bs.offcanvas").concat(".data-api"),ic="show".concat(".bs.offcanvas"),Db="shown".concat(".bs.offcanvas"),Nc="hide".concat(".bs.offcanvas"),sd="hidePrevented".concat(".bs.offcanvas"),Lb="hidden".concat(".bs.offcanvas"),Ob="click".concat(".bs.offcanvas").concat(".data-api"),zb="keydown.dismiss".concat(".bs.offcanvas"),lc={backdrop:!0,keyboard:!0,scroll:!1},Rc={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},
Ld=function(y){function D(t,B){var H;return Gb(this,D),(H=O.call(this,t,B))._isShown=!1,H._backdrop=H._initializeBackDrop(),H._focustrap=H._initializeFocusTrap(),H._addEventListeners(),od(H)}dc(D,y);var O=ec(D);return Hb(D,[{key:"toggle",value:function(t){return this._isShown?this.hide():this.show(t)}},{key:"show",value:function(t){var B=this;this._isShown||Ga.trigger(this._element,ic,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new v).hide(),
this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("showing"),this._queueCallback(function(){B._config.scroll&&!B._config.backdrop||B._focustrap.activate();B._element.classList.add("show");B._element.classList.remove("showing");Ga.trigger(B._element,Db,{relatedTarget:t})},this._element,!0))}},{key:"hide",value:function(){var t=this;this._isShown&&(Ga.trigger(this._element,Nc).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),
this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(function(){t._element.classList.remove("show","hiding");t._element.removeAttribute("aria-modal");t._element.removeAttribute("role");t._config.scroll||(new v).reset();Ga.trigger(t._element,Lb)},this._element,!0)))}},{key:"dispose",value:function(){this._backdrop.dispose();this._focustrap.deactivate();hd(Sc(D.prototype),"dispose",this).call(this)}},{key:"_initializeBackDrop",value:function(){var t=this,
B=!!this._config.backdrop;return new Wg({className:"offcanvas-backdrop",isVisible:B,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:B?function(){"static"!==t._config.backdrop?t.hide():Ga.trigger(t._element,sd)}:null})}},{key:"_initializeFocusTrap",value:function(){return new q({trapElement:this._element})}},{key:"_addEventListeners",value:function(){var t=this;Ga.on(this._element,zb,function(B){"Escape"===B.key&&(t._config.keyboard?t.hide():Ga.trigger(t._element,sd))})}}],[{key:"Default",
get:function(){return lc}},{key:"DefaultType",get:function(){return Rc}},{key:"NAME",get:function(){return"offcanvas"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var B=D.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===B[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));B[t](this)}})}}]),D}(yc);Ga.on(document,Ob,'[data-bs-toggle="offcanvas"]',function(y){var D=this,O=hb.getElementFromSelector(this);(["A","AREA"].includes(this.tagName)&&
y.preventDefault(),qc(this))||(Ga.one(O,Lb,function(){Ab(D)&&D.focus()}),(y=hb.findOne(".offcanvas.show"))&&y!==O&&Ld.getInstance(y).hide(),Ld.getOrCreateInstance(O).toggle(this))});Ga.on(window,Jb,function(){var y=!0,D=!1,O=void 0;try{for(var t,B=hb.find(".offcanvas.show")[Symbol.iterator]();!(y=(t=B.next()).done);y=!0)Ld.getOrCreateInstance(t.value).show()}catch(H){D=!0,O=H}finally{try{y||null==B.return||B.return()}finally{if(D)throw O;}}});Ga.on(window,"resize".concat(".bs.offcanvas"),function(){var y=
!0,D=!1,O=void 0;try{for(var t,B=hb.find("[aria-modal][class*=show][class*=offcanvas-]")[Symbol.iterator]();!(y=(t=B.next()).done);y=!0){var H=t.value;"fixed"!==getComputedStyle(H).position&&Ld.getOrCreateInstance(H).hide()}}catch(ba){D=!0,O=ba}finally{try{y||null==B.return||B.return()}finally{if(D)throw O;}}});J(Ld);xc(Ld);var Gc={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],
h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:"src srcset alt title width height".split(" "),li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},oc=new Set("background cite href itemtype longdesc poster src xlink:href".split(" ")),nd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,oe=function(y,D){var O=y.nodeName.toLowerCase();return D.includes(O)?!oc.has(O)||!!nd.test(y.nodeValue):D.filter(function(t){return t instanceof RegExp}).some(function(t){return t.test(O)})},
He={allowList:Gc,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},td={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Xc={entry:"(string|element|function|null)",selector:"(string|element)"},fd=function(y){function D(t){var B;return Gb(this,D),(B=O.call(this))._config=B._getConfig(t),od(B)}dc(D,y);var O=ec(D);return Hb(D,[{key:"getContent",value:function(){var t=
this;return Object.values(this._config.content).map(function(B){return t._resolvePossibleFunction(B)}).filter(Boolean)}},{key:"hasContent",value:function(){return 0<this.getContent().length}},{key:"changeContent",value:function(t){return this._checkContent(t),this._config.content=Le({},this._config.content,t),this}},{key:"toHtml",value:function(){var t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);var B=!0,H=!1,ba=void 0;try{for(var fa,la,ra=Object.entries(this._config.content)[Symbol.iterator]();!(B=
(la=ra.next()).done);B=!0){var oa=te(la.value,2);this._setContent(t,oa[1],oa[0])}}catch(xa){H=!0,ba=xa}finally{try{B||null==ra.return||ra.return()}finally{if(H)throw ba;}}t=t.children[0];B=this._resolvePossibleFunction(this._config.extraClass);return B&&(fa=t.classList).add.apply(fa,ce(B.split(" "))),t}},{key:"_typeCheckConfig",value:function(t){hd(Sc(D.prototype),"_typeCheckConfig",this).call(this,t);this._checkContent(t.content)}},{key:"_checkContent",value:function(t){var B=!0,H=!1,ba=void 0;try{for(var fa,
la=Object.entries(t)[Symbol.iterator]();!(B=(fa=la.next()).done);B=!0){var ra=te(fa.value,2),oa=ra[0],xa=ra[1];hd(Sc(D.prototype),"_typeCheckConfig",this).call(this,{selector:oa,entry:xa},Xc)}}catch(Ia){H=!0,ba=Ia}finally{try{B||null==la.return||la.return()}finally{if(H)throw ba;}}}},{key:"_setContent",value:function(t,B,H){(t=hb.findOne(H,t))&&((B=this._resolvePossibleFunction(B))?fb(B)?this._putElementInTemplate(Jc(B),t):this._config.html?t.innerHTML=this._maybeSanitize(B):t.textContent=B:t.remove())}},
{key:"_maybeSanitize",value:function(t){if(this._config.sanitize){var B=this._config.allowList;var H=this._config.sanitizeFn;if(t.length)if(H&&"function"==typeof H)B=H(t);else{t=(new window.DOMParser).parseFromString(t,"text/html");var ba=(la=[]).concat.apply(la,ce(t.body.querySelectorAll("*")));la=!0;H=!1;var fa=void 0;try{for(var la,ra,oa=ba[Symbol.iterator]();!(la=(ra=oa.next()).done);la=!0){var xa=ra.value,Ia=xa.nodeName.toLowerCase();if(Object.keys(B).includes(Ia)){var La=(Za=[]).concat.apply(Za,
ce(xa.attributes)),Pa=[].concat(B["*"]||[],B[Ia]||[]);ba=!0;var rb=!1,nb=void 0;try{for(var Za,sb,Eb=La[Symbol.iterator]();!(ba=(sb=Eb.next()).done);ba=!0){var db=sb.value;oe(db,Pa)||xa.removeAttribute(db.nodeName)}}catch(Fb){rb=!0,nb=Fb}finally{try{ba||null==Eb.return||Eb.return()}finally{if(rb)throw nb;}}}else xa.remove()}}catch(Fb){H=!0,fa=Fb}finally{try{la||null==oa.return||oa.return()}finally{if(H)throw fa;}}B=t.body.innerHTML}else B=t}else B=t;return B}},{key:"_resolvePossibleFunction",value:function(t){return Dc(t,
[this])}},{key:"_putElementInTemplate",value:function(t,B){if(this._config.html)return B.innerHTML="",void B.append(t);B.textContent=t.textContent}}],[{key:"Default",get:function(){return He}},{key:"DefaultType",get:function(){return td}},{key:"NAME",get:function(){return"TemplateFactory"}}]),D}(Fd),be=new Set(["sanitize","allowList","sanitizeFn"]),pe={AUTO:"auto",TOP:"top",RIGHT:wc()?"left":"right",BOTTOM:"bottom",LEFT:wc()?"right":"left"},gd={allowList:Gc,animation:!0,boundary:"clippingParents",
container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},rc={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",
html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},Hc=function(y){function D(t,B){var H;if(Gb(this,D),void 0===ef)throw TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");return(H=O.call(this,t,B))._isEnabled=!0,H._timeout=0,H._isHovered=null,H._activeTrigger={},H._popper=
null,H._templateFactory=null,H._newContent=null,H.tip=null,H._setListeners(),H._config.selector||H._fixTitle(),od(H)}dc(D,y);var O=ec(D);return Hb(D,[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}},{key:"dispose",value:function(){clearTimeout(this._timeout);
Ga.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler);this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title"));this._disposePopper();hd(Sc(D.prototype),"dispose",this).call(this)}},{key:"show",value:function(){var t=this;if("none"===this._element.style.display)throw Error("Please use show on visible elements");if(this._isWithContent()&&this._isEnabled){var B=Ga.trigger(this._element,this.constructor.eventName("show")),
H=(pb(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(!B.defaultPrevented&&H){this._disposePopper();B=this._getTipElement();this._element.setAttribute("aria-describedby",B.getAttribute("id"));H=this._config.container;var ba=!0,fa=!1,la=void 0;if(this._element.ownerDocument.documentElement.contains(this.tip)||(H.append(B),Ga.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(B),B.classList.add("show"),"ontouchstart"in
document.documentElement)try{for(var ra,oa,xa=(ra=[]).concat.apply(ra,ce(document.body.children))[Symbol.iterator]();!(ba=(oa=xa.next()).done);ba=!0)Ga.on(oa.value,"mouseover",yb)}catch(Ia){fa=!0,la=Ia}finally{try{ba||null==xa.return||xa.return()}finally{if(fa)throw la;}}this._queueCallback(function(){Ga.trigger(t._element,t.constructor.eventName("shown"));!1===t._isHovered&&t._leave();t._isHovered=!1},this.tip,this._isAnimated())}}}},{key:"hide",value:function(){var t=this;if(this._isShown()&&!Ga.trigger(this._element,
this.constructor.eventName("hide")).defaultPrevented){var B=!0,H=!1,ba=void 0;if(this._getTipElement().classList.remove("show"),"ontouchstart"in document.documentElement)try{for(var fa,la,ra=(fa=[]).concat.apply(fa,ce(document.body.children))[Symbol.iterator]();!(B=(la=ra.next()).done);B=!0)Ga.off(la.value,"mouseover",yb)}catch(oa){H=!0,ba=oa}finally{try{B||null==ra.return||ra.return()}finally{if(H)throw ba;}}this._activeTrigger.click=!1;this._activeTrigger.focus=!1;this._activeTrigger.hover=!1;this._isHovered=
null;this._queueCallback(function(){t._isWithActiveTrigger()||(t._isHovered||t._disposePopper(),t._element.removeAttribute("aria-describedby"),Ga.trigger(t._element,t.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}},{key:"update",value:function(){this._popper&&this._popper.update()}},{key:"_isWithContent",value:function(){return!!this._getTitle()}},{key:"_getTipElement",value:function(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),
this.tip}},{key:"_createTipElement",value:function(t){t=this._getTemplateFactory(t).toHtml();if(!t)return null;t.classList.remove("fade","show");t.classList.add("bs-".concat(this.constructor.NAME,"-auto"));var B=this.constructor.NAME;do B+=Math.floor(1E6*Math.random());while(document.getElementById(B));return t.setAttribute("id",B.toString()),this._isAnimated()&&t.classList.add("fade"),t}},{key:"setContent",value:function(t){this._newContent=t;this._isShown()&&(this._disposePopper(),this.show())}},
{key:"_getTemplateFactory",value:function(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new fd(Ai(Le({},this._config),{content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)})),this._templateFactory}},{key:"_getContentForTemplate",value:function(){return{".tooltip-inner":this._getTitle()}}},{key:"_getTitle",value:function(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}},
{key:"_initializeOnDelegatedTarget",value:function(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}},{key:"_isAnimated",value:function(){return this._config.animation||this.tip&&this.tip.classList.contains("fade")}},{key:"_isShown",value:function(){return this.tip&&this.tip.classList.contains("show")}},{key:"_createPopper",value:function(t){var B=pe[Dc(this._config.placement,[this,t,this._element]).toUpperCase()];return Tg(this._element,t,this._getPopperConfig(B))}},
{key:"_getOffset",value:function(){var t=this,B=this._config.offset;return"string"==typeof B?B.split(",").map(function(H){return Number.parseInt(H,10)}):"function"==typeof B?function(H){return B(H,t._element)}:B}},{key:"_resolvePossibleFunction",value:function(t){return Dc(t,[this._element])}},{key:"_getPopperConfig",value:function(t){var B=this;t={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",
options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:function(H){B._getTipElement().setAttribute("data-popper-placement",H.state.placement)}}]};return Le({},t,Dc(this._config.popperConfig,[t]))}},{key:"_setListeners",value:function(){var t=this,B=this._config.trigger.split(" "),H=!0,ba=!1,fa=void 0;try{for(var la,ra=B[Symbol.iterator]();!(H=(la=ra.next()).done);H=!0){var oa=la.value;
if("click"===oa)Ga.on(this._element,this.constructor.eventName("click"),this._config.selector,function(La){t._initializeOnDelegatedTarget(La).toggle()});else if("manual"!==oa){var xa="hover"===oa?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),Ia="hover"===oa?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Ga.on(this._element,xa,this._config.selector,function(La){var Pa=t._initializeOnDelegatedTarget(La);Pa._activeTrigger["focusin"===
La.type?"focus":"hover"]=!0;Pa._enter()});Ga.on(this._element,Ia,this._config.selector,function(La){var Pa=t._initializeOnDelegatedTarget(La);Pa._activeTrigger["focusout"===La.type?"focus":"hover"]=Pa._element.contains(La.relatedTarget);Pa._leave()})}}}catch(La){ba=!0,fa=La}finally{try{H||null==ra.return||ra.return()}finally{if(ba)throw fa;}}this._hideModalHandler=function(){t._element&&t.hide()};Ga.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler)}},{key:"_fixTitle",value:function(){var t=
this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}},{key:"_enter",value:function(){var t=this;this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(function(){t._isHovered&&t.show()},this._config.delay.show))}},{key:"_leave",value:function(){var t=this;this._isWithActiveTrigger()||
(this._isHovered=!1,this._setTimeout(function(){t._isHovered||t.hide()},this._config.delay.hide))}},{key:"_setTimeout",value:function(t,B){clearTimeout(this._timeout);this._timeout=setTimeout(t,B)}},{key:"_isWithActiveTrigger",value:function(){return Object.values(this._activeTrigger).includes(!0)}},{key:"_getConfig",value:function(t){var B=Oc.getDataAttributes(this._element),H=!0,ba=!1,fa=void 0;try{for(var la,ra=Object.keys(B)[Symbol.iterator]();!(H=(la=ra.next()).done);H=!0){var oa=la.value;be.has(oa)&&
delete B[oa]}}catch(xa){ba=!0,fa=xa}finally{try{H||null==ra.return||ra.return()}finally{if(ba)throw fa;}}return t=Le({},B,"object"==typeof t&&t?t:{}),t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}},{key:"_configAfterMerge",value:function(t){return t.container=!1===t.container?document.body:Jc(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),
t}},{key:"_getDelegateConfig",value:function(){var t={},B=!0,H=!1,ba=void 0;try{for(var fa,la=Object.entries(this._config)[Symbol.iterator]();!(B=(fa=la.next()).done);B=!0){var ra=te(fa.value,2),oa=ra[0],xa=ra[1];this.constructor.Default[oa]!==xa&&(t[oa]=xa)}}catch(Ia){H=!0,ba=Ia}finally{try{B||null==la.return||la.return()}finally{if(H)throw ba;}}return t.selector=!1,t.trigger="manual",t}},{key:"_disposePopper",value:function(){this._popper&&(this._popper.destroy(),this._popper=null);this.tip&&(this.tip.remove(),
this.tip=null)}}],[{key:"Default",get:function(){return gd}},{key:"DefaultType",get:function(){return rc}},{key:"NAME",get:function(){return"tooltip"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var B=D.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===B[t])throw TypeError('No method named "'.concat(t,'"'));B[t]()}})}}]),D}(yc);xc(Hc);var Pd=Ai(Le({},Hc.Default),{content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',
trigger:"click"}),Lc=Ai(Le({},Hc.DefaultType),{content:"(null|string|element|function)"}),md=function(y){function D(){return Gb(this,D),O.apply(this,arguments)}dc(D,y);var O=ec(D);return Hb(D,[{key:"_isWithContent",value:function(){return this._getTitle()||this._getContent()}},{key:"_getContentForTemplate",value:function(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}},{key:"_getContent",value:function(){return this._resolvePossibleFunction(this._config.content)}}],
[{key:"Default",get:function(){return Pd}},{key:"DefaultType",get:function(){return Lc}},{key:"NAME",get:function(){return"popover"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var B=D.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===B[t])throw TypeError('No method named "'.concat(t,'"'));B[t]()}})}}]),D}(Hc);xc(md);var $e="activate".concat(".bs.scrollspy"),jg="click".concat(".bs.scrollspy"),Fk="".concat(".nav-link",", .nav-item > ").concat(".nav-link",", .list-group-item"),
Qg={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ae={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},Md=function(y){function D(t,B){var H;return Gb(this,D),(H=O.call(this,t,B))._targetLinks=new Map,H._observableSections=new Map,H._rootElement="visible"===getComputedStyle(H._element).overflowY?null:H._element,H._activeTarget=null,H._observer=null,H._previousScrollData={visibleEntryTop:0,parentScrollTop:0},
H.refresh(),od(H)}dc(D,y);var O=ec(D);return Hb(D,[{key:"refresh",value:function(){this._initializeTargetsAndObservables();this._maybeEnableSmoothScroll();this._observer?this._observer.disconnect():this._observer=this._getNewObserver();var t=!0,B=!1,H=void 0;try{for(var ba,fa=this._observableSections.values()[Symbol.iterator]();!(t=(ba=fa.next()).done);t=!0)this._observer.observe(ba.value)}catch(la){B=!0,H=la}finally{try{t||null==fa.return||fa.return()}finally{if(B)throw H;}}}},{key:"dispose",value:function(){this._observer.disconnect();
hd(Sc(D.prototype),"dispose",this).call(this)}},{key:"_configAfterMerge",value:function(t){return t.target=Jc(t.target)||document.body,t.rootMargin=t.offset?"".concat(t.offset,"px 0px -30%"):t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map(function(B){return Number.parseFloat(B)})),t}},{key:"_maybeEnableSmoothScroll",value:function(){var t=this;this._config.smoothScroll&&(Ga.off(this._config.target,jg),Ga.on(this._config.target,jg,"[href]",function(B){var H=t._observableSections.get(B.target.hash);
if(H){B.preventDefault();B=t._rootElement||window;H=H.offsetTop-t._element.offsetTop;if(B.scrollTo)return void B.scrollTo({top:H,behavior:"smooth"});B.scrollTop=H}}))}},{key:"_getNewObserver",value:function(){var t=this;return new IntersectionObserver(function(B){return t._observerCallback(B)},{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}},{key:"_observerCallback",value:function(t){var B=this,H=function(rb){B._previousScrollData.visibleEntryTop=rb.target.offsetTop;
B._process(B._targetLinks.get("#".concat(rb.target.id)))},ba=(this._rootElement||document.documentElement).scrollTop,fa=ba>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=ba;var la=!0,ra=!1,oa=void 0;try{for(var xa,Ia=t[Symbol.iterator]();!(la=(xa=Ia.next()).done);la=!0){var La=xa.value;if(La.isIntersecting){var Pa=La.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(fa&&Pa){if(H(La),!ba)break}else fa||Pa||H(La)}else this._activeTarget=null,this._clearActiveClass(B._targetLinks.get("#".concat(La.target.id)))}}catch(rb){ra=
!0,oa=rb}finally{try{la||null==Ia.return||Ia.return()}finally{if(ra)throw oa;}}}},{key:"_initializeTargetsAndObservables",value:function(){this._targetLinks=new Map;this._observableSections=new Map;var t=hb.find("[href]",this._config.target),B=!0,H=!1,ba=void 0;try{for(var fa,la=t[Symbol.iterator]();!(B=(fa=la.next()).done);B=!0){var ra=fa.value;if(ra.hash&&!qc(ra)){var oa=hb.findOne(decodeURI(ra.hash),this._element);Ab(oa)&&(this._targetLinks.set(decodeURI(ra.hash),ra),this._observableSections.set(ra.hash,
oa))}}}catch(xa){H=!0,ba=xa}finally{try{B||null==la.return||la.return()}finally{if(H)throw ba;}}}},{key:"_process",value:function(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add("active"),this._activateParents(t),Ga.trigger(this._element,$e,{relatedTarget:t}))}},{key:"_activateParents",value:function(t){var B=!0,H=!1,ba=void 0,fa=!0,la=!1,ra=void 0;if(t.classList.contains("dropdown-item"))hb.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add("active");
else try{for(var oa,xa=hb.parents(t,".nav, .list-group")[Symbol.iterator]();!(fa=(oa=xa.next()).done);fa=!0){var Ia=oa.value;try{for(var La,Pa=hb.prev(Ia,Fk)[Symbol.iterator]();!(B=(La=Pa.next()).done);B=!0)La.value.classList.add("active")}catch(rb){H=!0,ba=rb}finally{try{B||null==Pa.return||Pa.return()}finally{if(H)throw ba;}}}}catch(rb){la=!0,ra=rb}finally{try{fa||null==xa.return||xa.return()}finally{if(la)throw ra;}}}},{key:"_clearActiveClass",value:function(t){t.classList.remove("active");t=hb.find("".concat("[href]",
".").concat("active"),t);var B=!0,H=!1,ba=void 0;try{for(var fa,la=t[Symbol.iterator]();!(B=(fa=la.next()).done);B=!0)fa.value.classList.remove("active")}catch(ra){H=!0,ba=ra}finally{try{B||null==la.return||la.return()}finally{if(H)throw ba;}}}}],[{key:"Default",get:function(){return Qg}},{key:"DefaultType",get:function(){return ae}},{key:"NAME",get:function(){return"scrollspy"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var B=D.getOrCreateInstance(this,t);if("string"==
typeof t){if(void 0===B[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));B[t]()}})}}]),D}(yc);Ga.on(window,"load".concat(".bs.scrollspy",".data-api"),function(){var y=!0,D=!1,O=void 0;try{for(var t,B=hb.find('[data-bs-spy="scroll"]')[Symbol.iterator]();!(y=(t=B.next()).done);y=!0)Md.getOrCreateInstance(t.value)}catch(H){D=!0,O=H}finally{try{y||null==B.return||B.return()}finally{if(D)throw O;}}});xc(Md);var Hk="hide".concat(".bs.tab"),Gk="hidden".concat(".bs.tab"),
S="show".concat(".bs.tab"),ha="shown".concat(".bs.tab"),ia="click".concat(".bs.tab"),Fa="keydown".concat(".bs.tab"),Ra="load".concat(".bs.tab"),mb=":not(".concat(".dropdown-toggle",")"),eb=".nav-link".concat(mb,", .list-group-item").concat(mb,', [role="tab"]').concat(mb,", ").concat('[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]'),Kb=".".concat("active",'[data-bs-toggle="tab"], .').concat("active",'[data-bs-toggle="pill"], .').concat("active",'[data-bs-toggle="list"]'),
gb=function(y){function D(t){var B;return Gb(this,D),(B=O.call(this,t))._parent=B._element.closest('.list-group, .nav, [role="tablist"]'),B._parent&&(B._setInitialAttributes(B._parent,B._getChildren()),Ga.on(B._element,Fa,function(H){return B._keydown(H)})),od(B)}dc(D,y);var O=ec(D);return Hb(D,[{key:"show",value:function(){var t=this._element;if(!this._elemIsActive(t)){var B=this._getActiveElem(),H=B?Ga.trigger(B,Hk,{relatedTarget:t}):null;Ga.trigger(t,S,{relatedTarget:B}).defaultPrevented||H&&H.defaultPrevented||
(this._deactivate(B,t),this._activate(t,B))}}},{key:"_activate",value:function(t,B){var H=this;t&&(t.classList.add("active"),this._activate(hb.getElementFromSelector(t)),this._queueCallback(function(){"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),H._toggleDropDown(t,!0),Ga.trigger(t,ha,{relatedTarget:B})):t.classList.add("show")},t,t.classList.contains("fade")))}},{key:"_deactivate",value:function(t,B){var H=this;t&&(t.classList.remove("active"),
t.blur(),this._deactivate(hb.getElementFromSelector(t)),this._queueCallback(function(){"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),H._toggleDropDown(t,!1),Ga.trigger(t,Gk,{relatedTarget:B})):t.classList.remove("show")},t,t.classList.contains("fade")))}},{key:"_keydown",value:function(t){if("ArrowLeft ArrowRight ArrowUp ArrowDown Home End".split(" ").includes(t.key)){t.stopPropagation();t.preventDefault();var B=this._getChildren().filter(function(ba){return!qc(ba)});
if(["Home","End"].includes(t.key))t=B["Home"===t.key?0:B.length-1];else{var H=["ArrowRight","ArrowDown"].includes(t.key);t=Ya(B,t.target,H,!0)}t&&(t.focus({preventScroll:!0}),D.getOrCreateInstance(t).show())}}},{key:"_getChildren",value:function(){return hb.find(eb,this._parent)}},{key:"_getActiveElem",value:function(){var t=this;return this._getChildren().find(function(B){return t._elemIsActive(B)})||null}},{key:"_setInitialAttributes",value:function(t,B){this._setAttributeIfNotExists(t,"role","tablist");
t=!0;var H=!1,ba=void 0;try{for(var fa,la=B[Symbol.iterator]();!(t=(fa=la.next()).done);t=!0)this._setInitialAttributesOnChild(fa.value)}catch(ra){H=!0,ba=ra}finally{try{t||null==la.return||la.return()}finally{if(H)throw ba;}}}},{key:"_setInitialAttributesOnChild",value:function(t){t=this._getInnerElement(t);var B=this._elemIsActive(t),H=this._getOuterElement(t);t.setAttribute("aria-selected",B);H!==t&&this._setAttributeIfNotExists(H,"role","presentation");B||t.setAttribute("tabindex","-1");this._setAttributeIfNotExists(t,
"role","tab");this._setInitialAttributesOnTargetPanel(t)}},{key:"_setInitialAttributesOnTargetPanel",value:function(t){var B=hb.getElementFromSelector(t);B&&(this._setAttributeIfNotExists(B,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(B,"aria-labelledby","".concat(t.id)))}},{key:"_toggleDropDown",value:function(t,B){var H=this._getOuterElement(t);H.classList.contains("dropdown")&&(t=function(ba,fa){(ba=hb.findOne(ba,H))&&ba.classList.toggle(fa,B)},t(".dropdown-toggle","active"),t(".dropdown-menu",
"show"),H.setAttribute("aria-expanded",B))}},{key:"_setAttributeIfNotExists",value:function(t,B,H){t.hasAttribute(B)||t.setAttribute(B,H)}},{key:"_elemIsActive",value:function(t){return t.classList.contains("active")}},{key:"_getInnerElement",value:function(t){return t.matches(eb)?t:hb.findOne(eb,t)}},{key:"_getOuterElement",value:function(t){return t.closest(".nav-item, .list-group-item")||t}}],[{key:"NAME",get:function(){return"tab"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var B=
D.getOrCreateInstance(this);if("string"==typeof t){if(void 0===B[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));B[t]()}})}}]),D}(yc);Ga.on(document,ia,'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(y){["A","AREA"].includes(this.tagName)&&y.preventDefault();qc(this)||gb.getOrCreateInstance(this).show()});Ga.on(window,Ra,function(){var y=!0,D=!1,O=void 0;try{for(var t,B=hb.find(Kb)[Symbol.iterator]();!(y=(t=B.next()).done);y=
!0)gb.getOrCreateInstance(t.value)}catch(H){D=!0,O=H}finally{try{y||null==B.return||B.return()}finally{if(D)throw O;}}});xc(gb);var Wb="mouseover".concat(".bs.toast"),Sb="mouseout".concat(".bs.toast"),Wc="focusin".concat(".bs.toast"),Zb="focusout".concat(".bs.toast"),hc="hide".concat(".bs.toast"),Ic="hidden".concat(".bs.toast"),Dd="show".concat(".bs.toast"),Yc="shown".concat(".bs.toast"),Tb={animation:"boolean",autohide:"boolean",delay:"number"},Nd={animation:!0,autohide:!0,delay:5E3},Od=function(y){function D(t,
B){var H;return Gb(this,D),(H=O.call(this,t,B))._timeout=null,H._hasMouseInteraction=!1,H._hasKeyboardInteraction=!1,H._setListeners(),od(H)}dc(D,y);var O=ec(D);return Hb(D,[{key:"show",value:function(){var t=this;Ga.trigger(this._element,Dd).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.offsetHeight,this._element.classList.add("show","showing"),this._queueCallback(function(){t._element.classList.remove("showing");
Ga.trigger(t._element,Yc);t._maybeScheduleHide()},this._element,this._config.animation))}},{key:"hide",value:function(){var t=this;this.isShown()&&(Ga.trigger(this._element,hc).defaultPrevented||(this._element.classList.add("showing"),this._queueCallback(function(){t._element.classList.add("hide");t._element.classList.remove("showing","show");Ga.trigger(t._element,Ic)},this._element,this._config.animation)))}},{key:"dispose",value:function(){this._clearTimeout();this.isShown()&&this._element.classList.remove("show");
hd(Sc(D.prototype),"dispose",this).call(this)}},{key:"isShown",value:function(){return this._element.classList.contains("show")}},{key:"_maybeScheduleHide",value:function(){var t=this;this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(function(){t.hide()},this._config.delay)))}},{key:"_onInteraction",value:function(t,B){switch(t.type){case "mouseover":case "mouseout":this._hasMouseInteraction=B;break;case "focusin":case "focusout":this._hasKeyboardInteraction=
B}if(B)return void this._clearTimeout();t=t.relatedTarget;this._element===t||this._element.contains(t)||this._maybeScheduleHide()}},{key:"_setListeners",value:function(){var t=this;Ga.on(this._element,Wb,function(B){return t._onInteraction(B,!0)});Ga.on(this._element,Sb,function(B){return t._onInteraction(B,!1)});Ga.on(this._element,Wc,function(B){return t._onInteraction(B,!0)});Ga.on(this._element,Zb,function(B){return t._onInteraction(B,!1)})}},{key:"_clearTimeout",value:function(){clearTimeout(this._timeout);
this._timeout=null}}],[{key:"Default",get:function(){return Nd}},{key:"DefaultType",get:function(){return Tb}},{key:"NAME",get:function(){return"toast"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var B=D.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===B[t])throw TypeError('No method named "'.concat(t,'"'));B[t](this)}})}}]),D}(yc);return J(Od),xc(Od),{Alert:R,Button:E,Carousel:qe,Collapse:Ng,Dropdown:re,Modal:cb,Offcanvas:Ld,Popover:md,ScrollSpy:Md,Tab:gb,
Toast:Od,Tooltip:Hc}}();(function(){for(var a=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,f){var k=(new Date).getTime(),l=Math.max(0,16-(k-a));f=window.setTimeout(function(){b(k+l)},l);return a=k+l,f});window.cancelAnimationFrame||
(window.cancelAnimationFrame=function(b){clearTimeout(b)})})();Ma.STROKE_MODE_FREEHAND=0;Ma.STROKE_MODE_LINE=1;Ma.STROKE_MODE_BEZIER=2;Ma.TIP_ROUND_PIXEL=0;Ma.TIP_ROUND_AA=1;Ma.TIP_ROUND_AIRBRUSH=2;Ma.TIP_SQUARE_PIXEL=3;Ma.TIP_SQUARE_AA=4;Ma.BRUSH_MODE_PAINT=0;Ma.BRUSH_MODE_ERASE=1;Ma.BRUSH_MODE_DODGE=2;Ma.BRUSH_MODE_BURN=3;Ma.BRUSH_MODE_WATER=4;Ma.BRUSH_MODE_BLUR=5;Ma.BRUSH_MODE_SMUDGE=6;Ma.BRUSH_MODE_OIL=7;Ma.PAINT_MODE_OPACITY=0;Ma.PAINT_MODE_FLOW=1;Ma.DEFAULTS={isAA:!1,minSpacing:0,spacing:0,
pressureSize:!0,pressureAlpha:!1,pressureScattering:!1,alphaScale:1,tip:Ma.TIP_ROUND_PIXEL,brushMode:Ma.BRUSH_MODE_PAINT,paintMode:Ma.PAINT_MODE_OPACITY,strokeMode:Ma.STROKE_MODE_FREEHAND,resat:1,bleed:0,texture:1,size:0,curSize:0,alpha:0,curAlpha:0,scattering:0,curScattering:0,squeeze:0,curSqueeze:0,angle:Math.PI,curAngle:0,smoothing:0};Ma.prototype.applyPressure=function(a){this.pressureSize&&this.brushMode!=Ma.BRUSH_MODE_SMUDGE&&this.brushMode!=Ma.BRUSH_MODE_OIL?this.curSize=Math.max(.1,this.size*
a):this.curSize=Math.max(.1,this.size);16<this.curSize&&(this.curSize=Math.floor(this.curSize));this.curSize=Math.min(this.curSize,400);this.curAlpha=this.pressureAlpha?Math.floor(this.alpha*Math.min(a,1)):this.alpha;this.curSqueeze=this.squeeze;this.curAngle=this.angle;this.curScattering=this.scattering*this.curSize*(this.pressureScattering?a:1)};Ma.prototype.clone=function(){return new Ma(this)};Sa.prototype.makeEmpty=function(){this.bottom=this.right=this.top=this.left=0};Sa.prototype.union=function(a){this.isEmpty()?
this.set(a):a.isEmpty()||(this.left=Math.min(this.left,a.left),this.top=Math.min(this.top,a.top),this.right=Math.max(this.right,a.right),this.bottom=Math.max(this.bottom,a.bottom))};Sa.prototype.getUnion=function(a){var c=this.clone();return c.union(a),c};Sa.prototype.getIntersection=function(a){return new Sa(Math.max(this.left,a.left),Math.max(this.top,a.top),Math.min(this.right,a.right),Math.min(this.bottom,a.bottom))};Sa.prototype.clipTo=function(a){return this.isEmpty()||(a.isEmpty()?this.makeEmpty():
(this.left=Math.min(Math.max(this.left,a.left),a.right),this.top=Math.min(Math.max(this.top,a.top),a.bottom),this.right=Math.max(Math.min(this.right,a.right),a.left),this.bottom=Math.max(Math.min(this.bottom,a.bottom),a.top))),this};Sa.prototype.containsPoint=function(a){return!(a.x<this.left||a.y<this.top||a.x>=this.right||a.y>=this.bottom)};Sa.prototype.isInside=function(a){return this.left>=a.left&&this.top>=a.top&&this.right<=a.right&&this.bottom<=a.bottom};Sa.prototype.clipSourceDest=function(a,
c){c.right=c.left+a.getWidth();c.bottom=c.top+a.getHeight();this.isEmpty()||c.left>=this.right||c.top>=this.bottom||c.right<=this.left||c.bottom<=this.top?(a.makeEmpty(),c.makeEmpty()):(c.right>this.right&&(a.right-=c.right-this.right,c.right=this.right),c.bottom>this.bottom&&(a.bottom-=c.bottom-this.bottom,c.bottom=this.bottom),c.left<this.left&&(a.left+=this.left-c.left,c.left=this.left),c.top<this.top&&(a.top+=this.top-c.top,c.top=this.top))};Sa.prototype.getWidth=function(){return this.right-
this.left};Sa.prototype.getHeight=function(){return this.bottom-this.top};Sa.prototype.getArea=function(){return this.getWidth()*this.getHeight()};Sa.prototype.isEmpty=function(){return this.right<=this.left||this.bottom<=this.top};Sa.prototype.set=function(a){this.left=a.left;this.top=a.top;this.right=a.right;this.bottom=a.bottom};Sa.prototype.clone=function(){return new Sa(this.left,this.top,this.right,this.bottom)};Sa.prototype.translate=function(a,c){return this.left+=a,this.right+=a,this.top+=
c,this.bottom+=c,this};Sa.prototype.getTranslated=function(a,c){var d=this.clone();return d.translate(a,c),d};Sa.prototype.moveTo=function(a,c){this.translate(a-this.left,c-this.top)};Sa.prototype.equals=function(a){return this.left==a.left&&this.right==a.right&&this.top==a.top&&this.bottom==a.bottom};Sa.prototype.grow=function(a,c){this.left-=a;this.right+=a;this.top-=c;this.bottom+=c};Sa.prototype.toString=function(){return"("+this.left+","+this.top+","+this.right+","+this.bottom+")"};Sa.prototype.toPoints=
function(){return[{x:this.left,y:this.top},{x:this.right,y:this.top},{x:this.right,y:this.bottom},{x:this.left,y:this.bottom}]};Sa.prototype.roundNearest=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this};Sa.prototype.roundContain=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this};Sa.createBoundingBox=
function(a){if(0===a.length)return new Sa(0,0,0,0);for(var c=new Sa(a[0].x,a[0].y,a[0].x,a[0].y),d=1;d<a.length;d++)c.left=Math.min(c.left,a[d].x),c.top=Math.min(c.top,a[d].y),c.right=Math.max(c.right,a[d].x),c.bottom=Math.max(c.bottom,a[d].y);return c};Sa.prototype.subtract=function(a){return Sa.subtract(this,a)};Sa.subtract=function(a,c){a instanceof Sa&&(a=[a]);c instanceof Sa&&(c=[c]);var d=a.slice(0);for(a=0;a<c.length;a++)!function(b){var f=c[b];b=d.length;for(var k=0;k<b;k++)!function(l){var h=
d[l];if(h){var e=h.getIntersection(f);if(!e.isEmpty()){var g=[];if(h.top<f.top&&g.push(new Sa(h.left,h.top,h.right,e.top)),h.bottom>f.bottom&&g.push(new Sa(h.left,e.bottom,h.right,h.bottom)),h.left<f.left&&g.push(new Sa(h.left,e.top,e.left,e.bottom)),h.right>f.right&&g.push(new Sa(e.right,e.top,h.right,e.bottom)),0<(g=g.filter(function(p){return!p.isEmpty()})).length)for(d[l]=g[0],l=1;l<g.length;l++)d.push(g[l]);else d[l]=null}}}(k)}(a);return d.filter(function(b){return null!=b})};Sa.union=function(a){if(a instanceof
Sa)a=[a];else{a=a.slice(0);for(var c=0;c<a.length;c++){var d=a[c],b=a.length;if(d)for(var f=c+1;f<b;f++){var k=a[f];if(k&&!d.getIntersection(k).isEmpty()){k=Sa.subtract(k,d);a[f]=k[0];for(var l=1;l<k.length;l++)a.push(k[l])}}}}return a.filter(function(h){return h&&!h.isEmpty()})};"object"==typeof window&&(window.cpRectGarbage=new Sa(1.5,2.5,3.5,4.5));hf.prototype.getBounds=function(){return new Sa(0,0,this.width,this.height)};hf.prototype.isInside=function(a,c){return 0<=a&&0<=c&&a<this.width&&c<
this.height};I.prototype=Object.create(hf.prototype);I.prototype.constructor=I;I.BYTES_PER_PIXEL=4;I.RED_BYTE_OFFSET=0;I.GREEN_BYTE_OFFSET=1;I.BLUE_BYTE_OFFSET=2;I.ALPHA_BYTE_OFFSET=3;I.prototype.clone=function(){return this.cloneRect(this.getBounds())};I.prototype.cloneRect=function(a){var c=new I(a.getWidth(),a.getHeight());return c.copyBitmapRect(this,0,0,a),c};I.prototype.getPixel=function(a,c){a=Math.max(0,Math.min(this.width-1,a));c=Math.max(0,Math.min(this.height-1,c));a=this.offsetOfPixel(a,
c);return this.data[a+I.ALPHA_BYTE_OFFSET]<<24|this.data[a+I.RED_BYTE_OFFSET]<<16|this.data[a+I.GREEN_BYTE_OFFSET]<<8|this.data[a+I.BLUE_BYTE_OFFSET]};I.prototype.copyRectXOR=function(a,c){var d=(c=this.getBounds().clipTo(c)).getWidth(),b=new Uint8Array(d*c.getHeight()*I.BYTES_PER_PIXEL),f=0,k=this.offsetOfPixel(c.left,c.top),l=a.offsetOfPixel(c.left,c.top),h=(this.width-d)*I.BYTES_PER_PIXEL,e=(a.width-d)*I.BYTES_PER_PIXEL;d*=I.BYTES_PER_PIXEL;for(var g=c.top;g<c.bottom;g++,k+=h,l+=e)for(var p=0;p<
d;p++,f++,k++,l++)b[f]=this.data[k]^a.data[l];return b};I.prototype.setRectXOR=function(a,c){var d=(c=this.getBounds().clipTo(c)).getWidth(),b=c.getHeight();c=this.offsetOfPixel(c.left,c.top);var f=0,k=(this.width-d)*I.BYTES_PER_PIXEL;d*=I.BYTES_PER_PIXEL;for(var l=0;l<b;l++){for(var h=0;h<d;h++)this.data[c++]^=a[f++];c+=k}};I.prototype.copyBitmapRect=function(a,c,d,b){var f=new Sa(c,d,0,0);b=b.clone();this.getBounds().clipSourceDest(b,f);c=0|f.getWidth();d=0|f.getHeight();if(0==f.left&&0==f.top&&
c==this.width&&d==this.height&&c==a.width&&d==a.height)this.copyPixelsFrom(a);else{f=this.offsetOfPixel(f.left,f.top);var k=(this.width-c)*I.BYTES_PER_PIXEL;b=a.offsetOfPixel(b.left,b.top);for(var l=(a.width-c)*I.BYTES_PER_PIXEL,h=0;h<d;h++,b+=l,f+=k)for(var e=0;e<c;e++,b+=I.BYTES_PER_PIXEL,f+=I.BYTES_PER_PIXEL)this.data[f]=a.data[b],this.data[f+1]=a.data[b+1],this.data[f+2]=a.data[b+2],this.data[f+3]=a.data[b+3]}};I.prototype.copyAlphaFrom=function(a,c){var d=0|(c=this.getBounds().clipTo(c)).getWidth(),
b=0|c.getHeight();c=this.offsetOfPixel(c.left,c.top)+I.ALPHA_BYTE_OFFSET|0;for(var f=(this.width-d)*I.BYTES_PER_PIXEL|0,k=0;k<b;k++,c+=f)for(var l=0;l<d;l++,c+=I.BYTES_PER_PIXEL)this.data[c]=a.data[c]};I.prototype.setToSize=function(a){(a.width!=this.width||a.height!=this.height)&&(this.width=a.width,this.height=a.height,this.imageData=Ci(this.width,this.height),this.data=this.imageData.data)};I.prototype.copyPixelsFrom=function(a){if(this.setToSize(a),"set"in this.data)this.data.set(a.data);else for(var c=
0;c<this.data.length;c++)this.data[c]=a.data[c]};I.prototype.copyPixelsFromGreyscale=function(a){var c,d=0,b=a.width*a.height;this.setToSize(a);for(c=0;c<b;c++,d+=I.BYTES_PER_PIXEL)this.data[d+I.RED_BYTE_OFFSET]=a.data[c],this.data[d+I.GREEN_BYTE_OFFSET]=a.data[c],this.data[d+I.BLUE_BYTE_OFFSET]=a.data[c],this.data[d+I.ALPHA_BYTE_OFFSET]=255};I.prototype.copyScaledNearestNeighbor=function(a){for(var c,d=0,b=a.width/this.width,f=a.height/this.height,k=0,l=0;k<this.height;k++,l+=f){c=a.offsetOfPixel(0,
Math.round(l));for(var h=0,e=0;h<this.width;h++,d+=I.BYTES_PER_PIXEL,e+=b){var g=c+Math.round(e)*I.BYTES_PER_PIXEL;this.data[d]=a.data[g];this.data[d+1]=a.data[g+1];this.data[d+2]=a.data[g+2];this.data[d+I.ALPHA_BYTE_OFFSET]=a.data[g+I.ALPHA_BYTE_OFFSET]}}};I.prototype.createThumbnailFrom=function(a){var c=Math.min(Math.floor(a.width/this.width),3);if(2>c)this.copyScaledNearestNeighbor(a);else{var d=new Uint16Array(5*this.width),b=a.width*I.BYTES_PER_PIXEL,f=Math.floor(a.width/this.width)*I.BYTES_PER_PIXEL,
k=Math.floor(a.width/this.width/c)*I.BYTES_PER_PIXEL,l=f-k*c,h=Math.floor(a.height/this.height/c);f=h*b-f*this.width;b*=Math.floor(a.height/this.height)-h*c;for(var e=h=0,g=0;g<this.height;g++,h+=b){var p;d.fill(0);for(var m=0;m<c;m++,h+=f)for(var n=p=0;n<this.width;n++,p+=5,h+=l)for(var r=0;r<c;r++,h+=k){var u=a.data[h+I.ALPHA_BYTE_OFFSET],w=u/255;d[p]+=a.data[h]*w;d[p+1]+=a.data[h+1]*w;d[p+2]+=a.data[h+2]*w;d[p+I.ALPHA_BYTE_OFFSET]+=u;d[p+4]=Math.max(d[p+4],u)}for(m=p=0;m<this.width;m++,p+=5,e+=
I.BYTES_PER_PIXEL)n=d[p+4],0==n?this.data[e+I.ALPHA_BYTE_OFFSET]=0:(r=n/d[p+I.ALPHA_BYTE_OFFSET],this.data[e]=d[p]*r,this.data[e+1]=d[p+1]*r,this.data[e+2]=d[p+2]*r,this.data[e+I.ALPHA_BYTE_OFFSET]=n)}}};I.prototype.floodFill=function(a,c,d){if(this.isInside(a,c)){var b=this.getPixel(a,c),f=b>>24&255,k=b>>16&255,l=b>>8&255,h=255&b,e=d>>24&255,g=d>>16&255,p=d>>8&255,m=255&d,n=[],r=this.getBounds(),u=this.data;if(r.left*=I.BYTES_PER_PIXEL,r.right*=I.BYTES_PER_PIXEL,n.push({x1:a*I.BYTES_PER_PIXEL,x2:a*
I.BYTES_PER_PIXEL,y:c,dy:-1}),n.push({x1:a*I.BYTES_PER_PIXEL,x2:a*I.BYTES_PER_PIXEL,y:c+1,dy:1}),0==f){if(0!=e)for(;0<n.length;)if(k=n.pop(),!(k.y<r.top||k.y>=r.bottom)){l=this.offsetOfPixel(0,k.y);for(h=k.x1;h>=r.left&&0==u[h+l+I.ALPHA_BYTE_OFFSET];)u[h+l+I.RED_BYTE_OFFSET]=g,u[h+l+I.GREEN_BYTE_OFFSET]=p,u[h+l+I.BLUE_BYTE_OFFSET]=m,u[h+l+I.ALPHA_BYTE_OFFSET]=e,h-=I.BYTES_PER_PIXEL;if(h>=k.x1){for(;h<=k.x2&&u[h+l+I.ALPHA_BYTE_OFFSET]!=f;)h+=I.BYTES_PER_PIXEL;if(a=h+I.BYTES_PER_PIXEL,h>k.x2)continue}else(h+=
I.BYTES_PER_PIXEL)<k.x1&&n.push({x1:h,x2:k.x1-I.BYTES_PER_PIXEL,y:k.y-k.dy,dy:-k.dy}),a=k.x1+I.BYTES_PER_PIXEL;do{u[h+l+I.RED_BYTE_OFFSET]=g;u[h+l+I.GREEN_BYTE_OFFSET]=p;u[h+l+I.BLUE_BYTE_OFFSET]=m;for(u[h+l+I.ALPHA_BYTE_OFFSET]=e;a<r.right&&u[a+l+I.ALPHA_BYTE_OFFSET]==f;)u[a+l+I.RED_BYTE_OFFSET]=g,u[a+l+I.GREEN_BYTE_OFFSET]=p,u[a+l+I.BLUE_BYTE_OFFSET]=m,u[a+l+I.ALPHA_BYTE_OFFSET]=e,a+=I.BYTES_PER_PIXEL;n.push({x1:h,x2:a-I.BYTES_PER_PIXEL,y:k.y+k.dy,dy:k.dy});a-I.BYTES_PER_PIXEL>k.x2&&n.push({x1:k.x2+
I.BYTES_PER_PIXEL,x2:a-I.BYTES_PER_PIXEL,y:k.y-k.dy,dy:-k.dy});for(h=a+I.BYTES_PER_PIXEL;h<=k.x2&&u[h+l+I.ALPHA_BYTE_OFFSET]!=f;)h+=I.BYTES_PER_PIXEL;a=h+I.BYTES_PER_PIXEL}while(h<=k.x2)}}else if(d!=b)for(;0<n.length;)if(a=n.pop(),!(a.y<r.top||a.y>=r.bottom)){c=this.offsetOfPixel(0,a.y);for(d=a.x1;d>=r.left&&u[d+c+I.RED_BYTE_OFFSET]==k&&u[d+c+I.GREEN_BYTE_OFFSET]==l&&u[d+c+I.BLUE_BYTE_OFFSET]==h&&u[d+c+I.ALPHA_BYTE_OFFSET]==f;)u[d+c+I.RED_BYTE_OFFSET]=g,u[d+c+I.GREEN_BYTE_OFFSET]=p,u[d+c+I.BLUE_BYTE_OFFSET]=
m,u[d+c+I.ALPHA_BYTE_OFFSET]=e,d-=I.BYTES_PER_PIXEL;if(d>=a.x1){for(;d<=a.x2&&(u[d+c+I.RED_BYTE_OFFSET]!=k||u[d+c+I.GREEN_BYTE_OFFSET]!=l||u[d+c+I.BLUE_BYTE_OFFSET]!=h||u[d+c+I.ALPHA_BYTE_OFFSET]!=f);)d+=I.BYTES_PER_PIXEL;if(b=d+I.BYTES_PER_PIXEL,d>a.x2)continue}else(d+=I.BYTES_PER_PIXEL)<a.x1&&n.push({x1:d,x2:a.x1-I.BYTES_PER_PIXEL,y:a.y-a.dy,dy:-a.dy}),b=a.x1+I.BYTES_PER_PIXEL;do{u[d+c+I.RED_BYTE_OFFSET]=g;u[d+c+I.GREEN_BYTE_OFFSET]=p;u[d+c+I.BLUE_BYTE_OFFSET]=m;for(u[d+c+I.ALPHA_BYTE_OFFSET]=e;b<
r.right&&u[b+c+I.RED_BYTE_OFFSET]==k&&u[b+c+I.GREEN_BYTE_OFFSET]==l&&u[b+c+I.BLUE_BYTE_OFFSET]==h&&u[b+c+I.ALPHA_BYTE_OFFSET]==f;)u[b+c+I.RED_BYTE_OFFSET]=g,u[b+c+I.GREEN_BYTE_OFFSET]=p,u[b+c+I.BLUE_BYTE_OFFSET]=m,u[b+c+I.ALPHA_BYTE_OFFSET]=e,b+=I.BYTES_PER_PIXEL;n.push({x1:d,x2:b-I.BYTES_PER_PIXEL,y:a.y+a.dy,dy:a.dy});b-I.BYTES_PER_PIXEL>a.x2&&n.push({x1:a.x2+I.BYTES_PER_PIXEL,x2:b-I.BYTES_PER_PIXEL,y:a.y-a.dy,dy:-a.dy});for(d=b+I.BYTES_PER_PIXEL;d<=a.x2&&(u[d+c+I.RED_BYTE_OFFSET]!=k||u[d+c+I.GREEN_BYTE_OFFSET]!=
l||u[d+c+I.BLUE_BYTE_OFFSET]!=h||u[d+c+I.ALPHA_BYTE_OFFSET]!=f);)d+=I.BYTES_PER_PIXEL;b=d+I.BYTES_PER_PIXEL}while(d<=a.x2)}}};I.prototype.copyPixelColumnToArray=function(a,c,d,b){var f=(this.width-1)*I.BYTES_PER_PIXEL,k=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++){for(var l=0;l<I.BYTES_PER_PIXEL;l++)b[k++]=this.data[a++];a+=f}};I.prototype.copyArrayToPixelColumn=function(a,c,d,b){var f=(this.width-1)*I.BYTES_PER_PIXEL,k=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++){for(var l=0;l<I.BYTES_PER_PIXEL;l++)this.data[a++]=
b[k++];a+=f}};I.prototype.boxBlur=function(a,c,d){var b=(a=this.getBounds().clipTo(a)).getWidth(),f=b*I.BYTES_PER_PIXEL,k=a.getHeight(),l=Math.max(b,k),h=new Uint8Array(l*I.BYTES_PER_PIXEL);l=new Uint8Array(l*I.BYTES_PER_PIXEL);for(var e=a.top;e<a.bottom;e++){for(var g=this.offsetOfPixel(a.left,e),p=0;p<f;p++)h[p]=this.data[g++];(function(m,n){for(var r=0,u=0;u<n;u++){for(var w=m[r+I.ALPHA_BYTE_OFFSET],z=0;3>z;z++,r++)m[r]=Math.round(m[r]*w/255);r++}})(h,b);il(h,l,b,c);g=this.offsetOfPixel(a.left,
e);for(p=0;p<f;p++)this.data[g++]=l[p]}for(c=a.left;c<a.right;c++)this.copyPixelColumnToArray(c,a.top,k,h),il(h,l,k,d),function(m,n){for(var r=0,u=0;u<n;u++){var w=m[r+I.ALPHA_BYTE_OFFSET];if(0!=w){w=255/w;for(var z=0;3>z;z++,r++)m[r]=Math.min(Math.round(m[r]*w),255);r++}else r+=I.BYTES_PER_PIXEL}}(l,k),this.copyArrayToPixelColumn(c,a.top,k,l)};I.prototype.offsetOfPixel=function(a,c){return 4*(c*this.width+a)|0};I.prototype.getMemorySize=function(){return this.data.length};I.prototype.getImageData=
function(){return this.imageData};I.prototype.setImageData=function(a){this.width=a.width;this.height=a.height;this.imageData=a;this.data=a.data};I.prototype.clearAll=function(a){if(0==a&&"fill"in this.data)this.data.fill(0);else{var c=a>>24&255,d=a>>16&255,b=a>>8&255;a&=255;for(var f=0;f<this.width*this.height*I.BYTES_PER_PIXEL;)this.data[f++]=d,this.data[f++]=b,this.data[f++]=a,this.data[f++]=c}};I.prototype.clearRect=function(a,c){a=this.getBounds().clipTo(a);var d=c>>24&255,b=c>>16&255,f=c>>8&
255;c&=255;for(var k=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,l=this.offsetOfPixel(a.left,a.top),h=a.top;h<a.bottom;h++,l+=k)for(var e=a.left;e<a.right;e++)this.data[l++]=b,this.data[l++]=f,this.data[l++]=c,this.data[l++]=d};I.prototype.copyRegionHFlip=function(a,c){a=this.getBounds().clipTo(a);for(var d=a.top;d<a.bottom;d++)for(var b=this.offsetOfPixel(a.left,d),f=c.offsetOfPixel(a.right-1,d),k=a.left;k<a.right;k++,f-=2*I.BYTES_PER_PIXEL)for(var l=0;l<I.BYTES_PER_PIXEL;l++)this.data[b++]=c.data[f++]};
I.prototype.copyRegionVFlip=function(a,c){for(var d=(a=this.getBounds().clipTo(a)).getWidth()*I.BYTES_PER_PIXEL,b=a.top;b<a.bottom;b++)for(var f=this.offsetOfPixel(a.left,b),k=c.offsetOfPixel(a.left,a.bottom-1-(b-a.top)),l=0;l<d;l++)this.data[f++]=c.data[k++]};I.prototype.fillWithNoise=function(a){a=this.getBounds().clipTo(a);for(var c,d=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,b=this.offsetOfPixel(a.left,a.top),f=a.top;f<a.bottom;f++,b+=d)for(var k=a.left;k<a.right;k++,b+=I.BYTES_PER_PIXEL)c=
256*Math.random()|0,this.data[b+I.RED_BYTE_OFFSET]=c,this.data[b+I.GREEN_BYTE_OFFSET]=c,this.data[b+I.BLUE_BYTE_OFFSET]=c,this.data[b+I.ALPHA_BYTE_OFFSET]=255};I.prototype.gradientHorzReplace=function(a,c,d,b){var f={r:b[0]>>16&255,g:b[0]>>8&255,b:255&b[0],a:b[0]>>24&255};b={r:b[1]>>16&255,g:b[1]>>8&255,b:255&b[1],a:b[1]>>24&255};var k=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,l=0|this.offsetOfPixel(a.left,a.top),h=a.bottom-a.top|0;if(d<c){var e=d;d=c;c=e;e=f;f=b;b=e}var g=d-c|0;e=(b.r-f.r)/g;var p=
(b.g-f.g)/g,m=(b.b-f.b)/g;g=(b.a-f.a)/g;for(var n=Math.max(a.left-c,0),r=0;r<h;r++,l+=k){for(var u=a.left,w=0|Math.min(c,a.right);u<w;u++,l+=I.BYTES_PER_PIXEL)this.data[l+I.RED_BYTE_OFFSET]=f.r,this.data[l+I.GREEN_BYTE_OFFSET]=f.g,this.data[l+I.BLUE_BYTE_OFFSET]=f.b,this.data[l+I.ALPHA_BYTE_OFFSET]=f.a;var z=f.r+e*n,G=f.g+p*n,L=f.b+m*n,N=f.a+g*n;for(w=0|Math.min(d,a.right);u<w;u++,l+=I.BYTES_PER_PIXEL)this.data[l+I.RED_BYTE_OFFSET]=z,this.data[l+I.GREEN_BYTE_OFFSET]=G,this.data[l+I.BLUE_BYTE_OFFSET]=
L,this.data[l+I.ALPHA_BYTE_OFFSET]=N,z+=e,G+=p,L+=m,N+=g;for(;u<a.right;u++,l+=I.BYTES_PER_PIXEL)this.data[l+I.RED_BYTE_OFFSET]=b.r,this.data[l+I.GREEN_BYTE_OFFSET]=b.g,this.data[l+I.BLUE_BYTE_OFFSET]=b.b,this.data[l+I.ALPHA_BYTE_OFFSET]=b.a}};I.prototype.gradientVertReplace=function(a,c,d,b){var f={r:b[0]>>16&255,g:b[0]>>8&255,b:255&b[0],a:b[0]>>24&255};b={r:b[1]>>16&255,g:b[1]>>8&255,b:255&b[1],a:b[1]>>24&255};var k=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,l=0|this.offsetOfPixel(a.left,a.top),
h=a.right-a.left|0;if(d<c){var e=d;d=c;c=e;e=f;f=b;b=e}e=a.top;for(var g=0|Math.min(a.bottom,c);e<g;e++,l+=k)for(var p=0;p<h;p++,l+=I.BYTES_PER_PIXEL)this.data[l+I.RED_BYTE_OFFSET]=f.r,this.data[l+I.GREEN_BYTE_OFFSET]=f.g,this.data[l+I.BLUE_BYTE_OFFSET]=f.b,this.data[l+I.ALPHA_BYTE_OFFSET]=f.a;var m=d-c|0;g=(b.r-f.r)/m;p=(b.g-f.g)/m;var n=(b.b-f.b)/m;m=(b.a-f.a)/m;var r=Math.max(e-c,0);c=f.r+g*r;var u=f.g+p*r,w=f.b+n*r;f=f.a+m*r;for(d=0|Math.min(a.bottom,d);e<d;e++,l+=k){for(r=0;r<h;r++,l+=I.BYTES_PER_PIXEL)this.data[l+
I.RED_BYTE_OFFSET]=c,this.data[l+I.GREEN_BYTE_OFFSET]=u,this.data[l+I.BLUE_BYTE_OFFSET]=w,this.data[l+I.ALPHA_BYTE_OFFSET]=f;c+=g;u+=p;w+=n;f+=m}for(;e<a.bottom;e++,l+=k)for(d=0;d<h;d++,l+=I.BYTES_PER_PIXEL)this.data[l+I.RED_BYTE_OFFSET]=b.r,this.data[l+I.GREEN_BYTE_OFFSET]=b.g,this.data[l+I.BLUE_BYTE_OFFSET]=b.b,this.data[l+I.ALPHA_BYTE_OFFSET]=b.a};I.prototype.gradientReplace=function(a,c,d,b,f,k){var l=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,h=0|this.offsetOfPixel(a.left,a.top),e=a.right-a.left|
0,g=k[0]>>16&255,p=k[0]>>8&255,m=255&k[0],n=k[0]>>24&255,r=k[1]>>16&255,u=k[1]>>8&255,w=255&k[1];k=k[1]>>24&255;var z=f-d+(b-c)*(b-c)/(f-d);b=b-c+(f-d)*(f-d)/(b-c);f=1/b;for(var G=a.top;G<a.bottom;G++,h+=l)for(var L=(a.left-c)/b+(G-d)/z,N=0;N<e;N++,h+=I.BYTES_PER_PIXEL){var M=Math.min(Math.max(L,0),1),ca=1-M;this.data[h+I.RED_BYTE_OFFSET]=g*ca+r*M;this.data[h+I.GREEN_BYTE_OFFSET]=p*ca+u*M;this.data[h+I.BLUE_BYTE_OFFSET]=m*ca+w*M;this.data[h+I.ALPHA_BYTE_OFFSET]=n*ca+k*M;L+=f}};I.prototype.gradientAlpha=
function(a,c,d,b,f,k){var l=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,h=0|this.offsetOfPixel(a.left,a.top),e=a.right-a.left|0,g=k[0]>>16&255,p=k[0]>>8&255,m=255&k[0],n=k[0]>>24&255,r=k[1]>>16&255,u=k[1]>>8&255,w=255&k[1];k=k[1]>>24&255;var z=f-d+(b-c)*(b-c)/(f-d);b=b-c+(f-d)*(f-d)/(b-c);f=1/b;for(var G=a.top;G<a.bottom;G++,h+=l)for(var L=(a.left-c)/b+(G-d)/z,N=0;N<e;N++,h+=I.BYTES_PER_PIXEL){var M=Math.min(Math.max(L,0),1),ca=1-M,W=g*ca+r*M,ka=p*ca+u*M,ea=m*ca+w*M;ca=n*ca+k*M;M=this.data[h+I.ALPHA_BYTE_OFFSET];
M=ca+M-ca*M/255|0;if(0<M){ca=255*ca/M|0;var ma=255-ca;this.data[h+I.RED_BYTE_OFFSET]=(W*ca+this.data[h+I.RED_BYTE_OFFSET]*ma)/255|0;this.data[h+I.GREEN_BYTE_OFFSET]=(ka*ca+this.data[h+I.GREEN_BYTE_OFFSET]*ma)/255|0;this.data[h+I.BLUE_BYTE_OFFSET]=(ea*ca+this.data[h+I.BLUE_BYTE_OFFSET]*ma)/255|0;this.data[h+I.ALPHA_BYTE_OFFSET]=M}L+=f}};I.prototype.gradient=function(a,c,d,b,f,k,l){a=this.getBounds().clipTo(a);(c!=b||d!=f)&&(l||255==k[0]>>>24&&255==k[1]>>>24?c==b?this.gradientVertReplace(a,d,f,k):d==
f?this.gradientHorzReplace(a,c,b,k):this.gradientReplace(a,c,d,b,f,k):this.gradientAlpha(a,c,d,b,f,k))};I.prototype.fillWithColorNoise=function(a){a=this.getBounds().clipTo(a);for(var c,d=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,b=this.offsetOfPixel(a.left,a.top),f=a.top;f<a.bottom;f++,b+=d)for(var k=a.left;k<a.right;k++,b+=I.BYTES_PER_PIXEL)c=16777216*Math.random()|0,this.data[b+I.RED_BYTE_OFFSET]=c>>16&255,this.data[b+I.GREEN_BYTE_OFFSET]=c>>8&255,this.data[b+I.BLUE_BYTE_OFFSET]=255&c,this.data[b+
I.ALPHA_BYTE_OFFSET]=255};I.prototype.invert=function(a){a=this.getBounds().clipTo(a);for(var c=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,d=this.offsetOfPixel(a.left,a.top),b=a.top;b<a.bottom;b++,d+=c)for(var f=a.left;f<a.right;f++,d+=I.BYTES_PER_PIXEL)this.data[d+I.RED_BYTE_OFFSET]^=255,this.data[d+I.GREEN_BYTE_OFFSET]^=255,this.data[d+I.BLUE_BYTE_OFFSET]^=255};I.prototype.getNonTransparentBounds=function(a){var c,d,b=a.clone();var f=(this.width-b.getWidth())*I.BYTES_PER_PIXEL;a=this.offsetOfPixel(b.left,
b.top)+I.ALPHA_BYTE_OFFSET;for(d=b.top;d<b.bottom;d++,a+=f){var k=0;for(c=b.left;c<b.right;c++,a+=I.BYTES_PER_PIXEL)k|=this.data[a];if(0!=k)break}if(b.top=d,b.top==b.bottom)return b;a=this.offsetOfPixel(b.right-1,b.bottom-1)+I.ALPHA_BYTE_OFFSET;for(d=b.bottom-1;d>=b.top;d--,a-=f){k=0;for(c=b.right-1;c>=b.left;c--,a-=I.BYTES_PER_PIXEL)k|=this.data[a];if(0!=k)break}b.bottom=d+1;f=I.BYTES_PER_PIXEL*this.width;for(c=b.left;c<b.right;c++){a=this.offsetOfPixel(c,b.top)+I.ALPHA_BYTE_OFFSET;k=0;for(d=b.top;d<
b.bottom;d++,a+=f)k|=this.data[a];if(0!=k)break}b.left=c;for(c=b.right-1;c>=b.left;c--){a=this.offsetOfPixel(c,b.top)+I.ALPHA_BYTE_OFFSET;k=0;for(d=b.top;d<b.bottom;d++,a+=f)k|=this.data[a];if(0!=k)break}return b.right=c+1,b};I.prototype.getAsCanvas=function(a){var c=de(this.imageData.width,this.imageData.height);return c.getContext("2d").putImageData(this.imageData,0,0),jl(c,a||0)};I.prototype.getAsPNG=function(a){var c;return!("string"!=typeof(c=this.getAsCanvas(a).toDataURL("image/png"))||!c.match(/^data:image\/png;base64,/i))&&
window.atob(c.substring(22))};I.prototype.getAsPNGBuffer=function(a){return this.getAsCanvas(a).toBuffer("image/png")};I.prototype.hasAlphaInRect=function(a){a=this.getBounds().clipTo(a);for(var c=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,d=this.offsetOfPixel(a.left,a.top)+I.ALPHA_BYTE_OFFSET,b=a.top;b<a.bottom;b++,d+=c){for(var f=255,k=a.left;k<a.right;k++,d+=I.BYTES_PER_PIXEL)f&=this.data[d];if(255!=f)return!0}return!1};I.prototype.hasAlpha=function(){return this.hasAlphaInRect(this.getBounds())};
I.createFromImage=function(a){var c=de(a.width,a.height).getContext("2d");return c.globalCompositeOperation="copy",c.drawImage(a,0,0),new I(c.getImageData(0,0,a.width,a.height))};I.prototype.equals=function(a){if(this.width!=a.width||this.height!=a.height)return!1;for(var c=0;c<this.data.length;c+=I.BYTES_PER_PIXEL)if(!(0==this.data[c+I.ALPHA_BYTE_OFFSET]&&0==a.data[c+I.ALPHA_BYTE_OFFSET]||this.data[c]==a.data[c]&&this.data[c+1]==a.data[c+1]&&this.data[c+2]==a.data[c+2]&&this.data[c+3]==a.data[c+
3]))return!1;return!0};Ib.prototype=Object.create(Mb.prototype);Ib.prototype.constructor=Ib;Ib.prototype.getLinearizedLayerList=function(a,c){c=c||[];var d=!0,b=!1,f=void 0;try{for(var k,l=this.layers[Symbol.iterator]();!(d=(k=l.next()).done);d=!0){var h=k.value;h instanceof Ib&&(h.expanded||!a)&&h.getLinearizedLayerList(a,c);c.push(h)}}catch(e){b=!0,f=e}finally{try{d||null==l.return||l.return()}finally{if(b)throw f;}}return c};Ib.prototype.clearLayers=function(){this.layers=[]};Ib.prototype.addLayer=
function(a){a.parent=this;this.layers.push(a)};Ib.prototype.insertLayer=function(a,c){c.parent=this;this.layers.splice(a,0,c)};Ib.prototype.removeLayer=function(a){a=this.layers.indexOf(a);-1<a&&this.layers.splice(a,1)};Ib.prototype.removeLayerAtIndex=function(a){var c=this.layers[a];return c&&this.layers.splice(a,1),c};Ib.prototype.setLayerAtIndex=function(a,c){var d=this.layers[a];return c.parent=this,this.layers[a]=c,d};Ib.prototype.setExpanded=function(a){this.expanded=a};Ib.prototype.getExpanded=
function(){return this.expanded};Ib.prototype.indexOf=function(a){return this.layers.indexOf(a)};Ib.prototype.getMemoryUsed=function(){return this.layers.map(function(a){return a.getMemoryUsed()}).reduce(ip,0)};Ib.prototype.clone=function(){var a=new Ib(this.name,this.blendMode);return Mb.prototype.copyFrom.call(a,this),a.expanded=this.expanded,a.layers=this.layers.map(function(c){return c.clone()}),a.layers.forEach(function(c){return c.parent=a}),a};Ib.prototype.getNonTransparentBounds=function(a){var c=
new Sa(0,0,0,0);return this.layers.forEach(function(d){return c.union(d.getNonTransparentBounds(a))}),c};ob.prototype=Object.create(hf.prototype);ob.prototype.constructor=ob;ob.prototype.createBitmap=function(a,c,d){switch(this.bitDepth=d,d){case 32:this.data=new Uint32Array(a*c);break;case 16:this.data=new Uint16Array(a*c);break;default:this.data=new Uint8Array(a*c)}};ob.prototype.clone=function(){var a=new ob(this.width,this.height,this.bitDepth);return a.copyPixelsFrom(this),a};ob.prototype.cloneRect=
function(a){var c=new ob(a.getWidth(),a.getHeight(),this.bitDepth);return c.copyBitmapRect(this,0,0,a),c};ob.prototype.getPixel=function(a,c){return a=Math.max(0,Math.min(this.width-1,a)),c=Math.max(0,Math.min(this.height-1,c)),this.data[this.offsetOfPixel(a,c)]};ob.prototype.clearAll=function(a){this.data.fill(a)};ob.prototype.clearRect=function(a,c){if((a=this.getBounds().clipTo(a)).equals(this.getBounds()))this.clearAll(c);else for(var d=this.width,b=a.right-a.left,f=this.offsetOfPixel(a.left,
a.top),k=a.top;k<a.bottom;k++,f+=d)this.data.fill(c,f,f+b)};ob.prototype.copyScaledNearestNeighbor=function(a){for(var c,d=0,b=a.width/this.width,f=a.height/this.height,k=0,l=0;k<this.height;k++,l+=f){c=a.offsetOfPixel(0,Math.round(l));for(var h=0,e=0;h<this.width;h++,d++,e+=b)this.data[d]=a.data[c+Math.round(e)]}};ob.prototype.floodFill=function(a,c,d){if(this.isInside(a,c)){d&=255;var b=this.getPixel(a,c),f=[],k=this.getBounds(),l=this.data;if(f.push({x1:a,x2:a,y:c,dy:-1}),f.push({x1:a,x2:a,y:c+
1,dy:1}),d!=b)for(;0<f.length;)if(a=f.pop(),!(a.y<k.top||a.y>=k.bottom)){c=this.offsetOfPixel(0,a.y);for(var h=a.x1,e;h>=k.left&&l[h+c]==b;)l[h+c]=d,h--;if(h>=a.x1){for(;h<=a.x2&&l[h+c]!=b;)h++;if(e=h+1,h>a.x2)continue}else++h<a.x1&&f.push({x1:h,x2:a.x1-1,y:a.y-a.dy,dy:-a.dy}),e=a.x1+1;do{for(l[h+c]=d;e<k.right&&l[e+c]==b;)l[e+c]=d,e++;f.push({x1:h,x2:e-1,y:a.y+a.dy,dy:a.dy});e-1>a.x2&&f.push({x1:a.x2+1,x2:e-1,y:a.y-a.dy,dy:-a.dy});for(h=e+1;h<=a.x2&&l[h+c]!=b;)h++;e=h+1}while(h<=a.x2)}}};ob.prototype.createThumbnailFrom=
function(a){var c=Math.min(Math.floor(a.width/this.width),3);if(2>c)this.copyScaledNearestNeighbor(a);else{var d=new Uint16Array(this.width),b=a.width,f=Math.floor(a.width/this.width),k=Math.floor(a.width/this.width/c),l=f-k*c,h=Math.floor(a.height/this.height/c);f=h*b-f*this.width;b*=Math.floor(a.height/this.height)-h*c;for(var e=h=0,g=0;g<this.height;g++,h+=b){var p;d.fill(0);for(var m=0;m<c;m++,h+=f)for(var n=p=0;n<this.width;n++,p++,h+=l)for(var r=0;r<c;r++,h+=k)d[p]+=a.data[h];for(m=p=0;m<this.width;m++,
p++,e++)this.data[e]=d[p]/(c*c)}}};ob.prototype.mirrorHorizontally=function(){for(var a=this.width,c=this.height,d=new Uint8Array(a*c),b=0,f=a,k=0;k<c;k++,f+=a+a)for(var l=0;l<a;l++)d[b++]=this.data[--f];this.data=d};ob.prototype.applyLUT=function(a){for(var c=0;c<this.data.length;c++)this.data[c]=a.table[this.data[c]]};ob.prototype.getAsCanvas=function(a){var c=this.getImageData(0,0,this.width,this.height),d=de(this.width,this.height);return d.getContext("2d").putImageData(c,0,0),jl(d,a||0)};ob.prototype.getImageData=
function(a,c,d,b){var f=Ci(d,b);a=this.offsetOfPixel(a,c);c=0;for(var k=this.width-d,l=0;l<b;l++,a+=k)for(var h=0;h<d;h++,a++)f.data[c++]=this.data[a],f.data[c++]=this.data[a],f.data[c++]=this.data[a],f.data[c++]=255;return f};ob.prototype.pasteImageData=function(a,c,d){var b=0;c=this.offsetOfPixel(c,d);d=this.width-a.width;for(var f=0;f<a.height;f++,c+=d)for(var k=0;k<a.width;k++,b+=4,c++)this.data[c]=a.data[b];return a};ob.prototype.copyPixelsFrom=function(a){a.width!=this.width||a.height!=this.height||
a.bitDepth!=this.bitDepth?(this.data=a.data.slice(0),this.width=a.width,this.height=a.height,this.bitDepth=a.bitDepth):this.data.set(a.data)};ob.prototype.copyRectXOR=function(a,c){for(var d=(c=this.getBounds().clipTo(c)).getWidth(),b=new Uint8Array(d*c.getHeight()),f=0,k=this.offsetOfPixel(c.left,c.top),l=a.offsetOfPixel(c.left,c.top),h=this.width-d,e=a.width-d,g=c.top;g<c.bottom;g++,k+=h,l+=e)for(var p=0;p<d;p++,f++,k++,l++)b[f]=this.data[k]^a.data[l];return b};ob.prototype.setRectXOR=function(a,
c){var d=(c=this.getBounds().clipTo(c)).getWidth(),b=c.getHeight();c=this.offsetOfPixel(c.left,c.top);for(var f=0,k=this.width-d,l=0;l<b;l++){for(var h=0;h<d;h++)this.data[c++]^=a[f++];c+=k}};ob.prototype.copyBitmapRect=function(a,c,d,b){var f=new Sa(c,d,0,0);b=b.clone();this.getBounds().clipSourceDest(b,f);c=0|f.getWidth();d=0|f.getHeight();if(0==f.left&&0==f.top&&c==this.width&&d==this.height&&c==a.width&&d==a.height)this.copyPixelsFrom(a);else{f=this.offsetOfPixel(f.left,f.top);var k=this.width-
c;b=a.offsetOfPixel(b.left,b.top);for(var l=a.width-c,h=0;h<d;h++,b+=l,f+=k)for(var e=0;e<c;e++,b++,f++)this.data[f]=a.data[b]}};ob.prototype.copyRegionHFlip=function(a,c){a=this.getBounds().clipTo(a);for(var d=a.top;d<a.bottom;d++)for(var b=this.offsetOfPixel(a.left,d),f=c.offsetOfPixel(a.right-1,d),k=a.left;k<a.right;k++,f-=2)this.data[b++]=c.data[f++]};ob.prototype.copyRegionVFlip=function(a,c){for(var d=(a=this.getBounds().clipTo(a)).getWidth(),b=a.top;b<a.bottom;b++)for(var f=this.offsetOfPixel(a.left,
b),k=c.offsetOfPixel(a.left,a.bottom-1-(b-a.top)),l=0;l<d;l++)this.data[f++]=c.data[k++]};ob.prototype.copyPixelColumnToArray=function(a,c,d,b){var f=this.width,k=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++)b[k]=this.data[a],a+=f,k++};ob.prototype.copyArrayToPixelColumn=function(a,c,d,b){var f=this.width,k=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++)this.data[a]=b[k],a+=f,k++};ob.prototype.boxBlur=function(a,c,d){var b=(a=this.getBounds().clipTo(a)).getWidth(),f=a.getHeight(),k=Math.max(b,f),l=new this.data.constructor(k);
k=new this.data.constructor(k);for(var h=a.top;h<a.bottom;h++){for(var e=this.offsetOfPixel(a.left,h),g=0;g<b;g++)l[g]=this.data[e++];kl(l,k,b,c);e=this.offsetOfPixel(a.left,h);for(g=0;g<b;g++)this.data[e++]=k[g]}for(c=a.left;c<a.right;c++)this.copyPixelColumnToArray(c,a.top,f,l),kl(l,k,f,d),this.copyArrayToPixelColumn(c,a.top,f,k)};ob.prototype.offsetOfPixel=function(a,c){return c*this.width+a};ob.prototype.fillWithNoise=function(a){a=this.getBounds().clipTo(a);for(var c=this.width-a.getWidth(),
d=this.offsetOfPixel(a.left,a.top),b=a.top;b<a.bottom;b++,d+=c)for(var f=a.left;f<a.right;f++,d++)this.data[d]=256*Math.random()|0};ob.prototype.invert=function(a){a=this.getBounds().clipTo(a);for(var c=this.width-a.getWidth(),d=this.offsetOfPixel(a.left,a.top),b=a.top;b<a.bottom;b++,d+=c)for(var f=a.left;f<a.right;f++,d++)this.data[d]=~this.data[d]};ob.prototype.getValueBounds=function(a,c){var d,b,f=a.clone();var k=this.width-f.getWidth();a=this.offsetOfPixel(f.left,f.top);for(b=f.top;b<f.bottom;b++,
a+=k){var l=!1;for(d=f.left;d<f.right;d++,a++)if(this.data[a]!=c){l=!0;break}if(l)break}if(f.top=b,f.top==f.bottom)return f;a=this.offsetOfPixel(f.right-1,f.bottom-1);for(b=f.bottom-1;b>=f.top;b--,a-=k){l=!1;for(d=f.right-1;d>=f.left;d--,a--)if(this.data[a]!=c){l=!0;break}if(l)break}f.bottom=b+1;k=this.width;for(d=f.left;d<f.right;d++){a=this.offsetOfPixel(d,f.top);l=!1;for(b=f.top;b<f.bottom;b++,a+=k)if(this.data[a]!=c){l=!0;break}if(l)break}f.left=d;for(d=f.right-1;d>=f.left;d--){a=this.offsetOfPixel(d,
f.top);l=!1;for(b=f.top;b<f.bottom;b++,a+=k)if(this.data[a]!=c){l=!0;break}if(l)break}return f.right=d+1,f};ob.prototype.gradientHorzReplace=function(a,c,d,b){var f=255&b[0];b=255&b[1];var k=this.width-a.getWidth(),l=0|this.offsetOfPixel(a.left,a.top),h=a.bottom-a.top|0;if(d<c){var e=d;d=c;c=e;e=f;f=b;b=e}e=(b-f)/(d-c|0);for(var g=Math.max(a.left-c,0),p=0;p<h;p++,l+=k){for(var m=a.left,n=0|Math.min(c,a.right);m<n;m++,l++)this.data[l]=f;var r=f+e*g;for(n=0|Math.min(d,a.right);m<n;m++,l++)this.data[l]=
r,r+=e;for(;m<a.right;m++,l++)this.data[l]=b}};ob.prototype.gradientVertReplace=function(a,c,d,b){var f=255&b[0];b=255&b[1];var k=this.width-a.getWidth(),l=0|this.offsetOfPixel(a.left,a.top),h=a.right-a.left|0;if(d<c){var e=d;d=c;c=e;e=f;f=b;b=e}e=a.top;for(var g=0|Math.min(a.bottom,c);e<g;e++,l+=k)for(var p=0;p<h;p++,l++)this.data[l]=f;g=(b-f)/(d-c|0);c=f+g*Math.max(e-c,0);for(d=0|Math.min(a.bottom,d);e<d;e++,l+=k){for(f=0;f<h;f++,l++)this.data[l]=c;c+=g}for(;e<a.bottom;e++,l+=k)for(d=0;d<h;d++,
l++)this.data[l]=b};ob.prototype.gradientReplace=function(a,c,d,b,f,k){var l=this.width-a.getWidth(),h=0|this.offsetOfPixel(a.left,a.top),e=a.right-a.left|0,g=255&k[0];k=255&k[1];var p=f-d+(b-c)*(b-c)/(f-d);b=b-c+(f-d)*(f-d)/(b-c);f=1/b;for(var m=a.top;m<a.bottom;m++,h+=l)for(var n=(a.left-c)/b+(m-d)/p,r=0;r<e;r++,h++){var u=Math.min(Math.max(n,0),1);this.data[h]=g*(1-u)+k*u;n+=f}};ob.prototype.gradientAlpha=function(a,c,d,b,f,k){var l=this.width-a.getWidth(),h=0|this.offsetOfPixel(a.left,a.top),
e=a.right-a.left|0,g=255&k[0],p=k[0]>>24&255,m=255&k[1];k=k[1]>>24&255;var n=f-d+(b-c)*(b-c)/(f-d);b=b-c+(f-d)*(f-d)/(b-c);f=1/b;for(var r=a.top;r<a.bottom;r++,h+=l)for(var u=(a.left-c)/b+(r-d)/n,w=0;w<e;w++,h++){var z=Math.min(Math.max(u,0),1),G=1-z,L=p*G+k*z;this.data[h]=((g*G+m*z)*L+this.data[h]*(255-L))/255|0;u+=f}};ob.prototype.gradient=function(a,c,d,b,f,k,l){a=this.getBounds().clipTo(a);(c!=b||d!=f)&&(l||255==k[0]>>>24&&255==k[1]>>>24?c==b?this.gradientVertReplace(a,d,f,k):d==f?this.gradientHorzReplace(a,
c,b,k):this.gradientReplace(a,c,d,b,f,k):this.gradientAlpha(a,c,d,b,f,k))};ob.prototype.equals=function(a){if(this.width!=a.width||this.height!=a.height)return!1;for(var c=0;c<this.data.length;c++)if(this.data[c]!=a.data[c])return!1;return!0};var Ac=Array(256),Bc=Array(256);T.multiplyOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;
e&&(g=a.data[b],a.data[b]=g-((255^c.data[b])*g*e/65025|0),g=a.data[b+1],a.data[b+1]=g-((255^c.data[b+1])*g*e/65025|0),g=a.data[b+2],a.data[b+2]=g-((255^c.data[b+2])*g*e/65025|0))}};T.multiplyOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;g&&(p=a.data[b],a.data[b]=p-((255^c.data[b])*p*g/65025|0),p=a.data[b+1],a.data[b+
1]=p-((255^c.data[b+1])*p*g/65025|0),p=a.data[b+2],a.data[b+2]=p-((255^c.data[b+2])*p*g/65025|0))}};T.multiplyOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(e*n+g*r+(e*g*m/255|0))/p|0;e=c.data[b+1];
g=a.data[b+1];a.data[b+1]=(e*n+g*r+(e*g*m/255|0))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(e*n+g*r+(e*g*m/255|0))/p|0;a.data[b+3]=p}}};T.multiplyOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];
a.data[b]=(g*r+p*u+(g*p*n/255|0))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(g*r+p*u+(g*p*n/255|0))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(g*r+p*u+(g*p*n/255|0))/m|0;a.data[b+3]=m}}};T.multiplyOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;
m&&(n=a.data[h],a.data[h]=n-((255^c.data[h])*n*m/65025|0),n=a.data[h+1],a.data[h+1]=n-((255^c.data[h+1])*n*m/65025|0),n=a.data[h+2],a.data[h+2]=n-((255^c.data[h+2])*n*m/65025|0))}};T.multiplyOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;n&&
(r=a.data[e],a.data[e]=r-((255^c.data[e])*r*n/65025|0),r=a.data[e+1],a.data[e+1]=r-((255^c.data[e+1])*r*n/65025|0),r=a.data[e+2],a.data[e+2]=r-((255^c.data[e+2])*r*n/65025|0))}};T.multiplyOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=
m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(m*w+n*z+(m*n*u/255|0))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(m*w+n*z+(m*n*u/255|0))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(m*w+n*z+(m*n*u/255|0))/r|0;a.data[h+3]=r}}};T.multiplyOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,
b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(n*z+r*G+(n*r*w/255|0))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(n*z+r*G+(n*r*w/255|0))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(n*z+r*G+(n*r*w/255|0))/u|0;a.data[e+3]=u}}};T.multiply2OntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=
0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;e&&(g=a.data[b],a.data[b]=g-Math.ceil((255^c.data[b])*g*e/65025),g=a.data[b+1],a.data[b+1]=g-Math.ceil((255^c.data[b+1])*g*e/65025),g=a.data[b+2],a.data[b+2]=g-Math.ceil((255^c.data[b+2])*g*e/65025))}};T.multiply2OntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);
for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;g&&(p=a.data[b],a.data[b]=p-Math.ceil((255^c.data[b])*p*g/65025),p=a.data[b+1],a.data[b+1]=p-Math.ceil((255^c.data[b+1])*p*g/65025),p=a.data[b+2],a.data[b+2]=p-Math.ceil((255^c.data[b+2])*p*g/65025))}};T.multiply2OntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=
c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(e*n+g*r+(e*g*m/255|0))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(e*n+g*r+(e*g*m/255|0))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(e*n+g*r+(e*g*m/255|0))/p|0;a.data[b+3]=p}}};T.multiply2OntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<
f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(g*r+p*u+(g*p*n/255|0))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(g*r+p*u+(g*p*n/255|0))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(g*r+p*u+(g*p*n/255|0))/m|0;a.data[b+3]=m}}};T.multiply2OntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|
0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;m&&(n=a.data[h],a.data[h]=n-Math.ceil((255^c.data[h])*n*m/65025),n=a.data[h+1],a.data[h+1]=n-Math.ceil((255^c.data[h+1])*n*m/65025),n=a.data[h+2],a.data[h+2]=n-Math.ceil((255^c.data[h+2])*n*m/65025))}};T.multiply2OntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),
h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;n&&(r=a.data[e],a.data[e]=r-Math.ceil((255^c.data[e])*r*n/65025),r=a.data[e+1],a.data[e+1]=r-Math.ceil((255^c.data[e+1])*r*n/65025),r=a.data[e+2],a.data[e+2]=r-Math.ceil((255^c.data[e+2])*r*n/65025))}};T.multiply2OntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();
var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(m*w+n*z+(m*n*u/255|0))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(m*w+n*z+(m*n*u/255|0))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(m*w+n*z+(m*n*u/
255|0))/r|0;a.data[h+3]=r}}};T.multiply2OntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(n*z+r*G+(n*r*w/255|0))/
u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(n*z+r*G+(n*r*w/255|0))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(n*z+r*G+(n*r*w/255|0))/u|0;a.data[e+3]=u}}};T.normalOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e)if(255==e)a.data[b]=c.data[b],a.data[b+1]=c.data[b+1],a.data[b+2]=c.data[b+2];else{var g=255-e;var p=c.data[b];a.data[b]=
(p*e+a.data[b]*g)/255|0;p=c.data[b+1];a.data[b+1]=(p*e+a.data[b+1]*g)/255|0;p=c.data[b+2];a.data[b+2]=(p*e+a.data[b+2]*g)/255|0}}};T.normalOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255-g;var m=c.data[b];a.data[b]=(m*g+a.data[b]*p)/255|0;m=c.data[b+1];a.data[b+1]=(m*g+a.data[b+1]*p)/255|0;m=c.data[b+2];a.data[b+
2]=(m*g+a.data[b+2]*p)/255|0}}};T.normalOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0;e=255*e/p|0;g=255-e;a.data[b]=(c.data[b]*e+a.data[b]*g)/255|0;a.data[b+1]=(c.data[b+1]*e+a.data[b+1]*g)/255|0;a.data[b+2]=(c.data[b+2]*e+a.data[b+2]*g)/255|0;a.data[b+3]=p}}};T.normalOntoTransparentFusionWithTransparentLayer=
function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0;g=255*g/m|0;p=255-g;a.data[b]=(c.data[b]*g+a.data[b]*p)/255|0;a.data[b+1]=(c.data[b+1]*g+a.data[b+1]*p)/255|0;a.data[b+2]=(c.data[b+2]*g+a.data[b+2]*p)/255|0;a.data[b+3]=m}}};T.normalOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=
0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m)if(255==m)a.data[h]=c.data[h],a.data[h+1]=c.data[h+1],a.data[h+2]=c.data[h+2];else{var n=255-m;var r=c.data[h];a.data[h]=(r*m+a.data[h]*n)/255|0;r=c.data[h+1];a.data[h+1]=(r*m+a.data[h+1]*n)/255|0;r=c.data[h+2];a.data[h+2]=(r*m+a.data[h+2]*n)/255|0}}};T.normalOntoOpaqueFusionWithTransparentLayerMasked=
function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255-n;var u=c.data[e];a.data[e]=(u*n+a.data[e]*r)/255|0;u=c.data[e+1];a.data[e+1]=(u*n+a.data[e+1]*r)/255|0;u=c.data[e+2];a.data[e+2]=(u*n+a.data[e+2]*r)/255|0}}};T.normalOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=
0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0;m=255*m/r|0;n=255-m;a.data[h]=(c.data[h]*m+a.data[h]*n)/255|0;a.data[h+1]=(c.data[h+1]*m+a.data[h+1]*n)/255|0;a.data[h+2]=(c.data[h+2]*m+a.data[h+2]*n)/255|0;a.data[h+3]=r}}};T.normalOntoTransparentFusionWithTransparentLayerMasked=
function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0;n=255*n/u|0;r=255-n;a.data[e]=(c.data[e]*n+a.data[e]*r)/255|0;a.data[e+1]=(c.data[e+1]*n+a.data[e+1]*r)/255|0;a.data[e+2]=(c.data[e+2]*n+a.data[e+2]*r)/255|0;a.data[e+3]=u}}};T.addOntoOpaqueFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];e&&(a.data[b]=a.data[b]+e*c.data[b]/255|0,a.data[b+1]=a.data[b+1]+e*c.data[b+1]/255|0,a.data[b+2]=a.data[b+2]+e*c.data[b+2]/255|0)}};T.addOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<
k;e++,b+=4){var g=c.data[b+3]*d/100|0;g&&(a.data[b]=a.data[b]+g*c.data[b]/255|0,a.data[b+1]=a.data[b+1]+g*c.data[b+1]/255|0,a.data[b+2]=a.data[b+2]+g*c.data[b+2]/255|0)}};T.addOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0;a.data[b]=(g*a.data[b]+e*c.data[b])/p|0;a.data[b+1]=(g*a.data[b+
1]+e*c.data[b+1])/p|0;a.data[b+2]=(g*a.data[b+2]+e*c.data[b+2])/p|0;a.data[b+3]=p}}};T.addOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0;a.data[b]=(p*a.data[b]+g*c.data[b])/m|0;a.data[b+1]=(p*a.data[b+1]+g*c.data[b+1])/m|0;a.data[b+2]=(p*a.data[b+2]+g*c.data[b+2])/m|
0;a.data[b+3]=m}}};T.addOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;m&&(a.data[h]=a.data[h]+m*c.data[h]/255|0,a.data[h+1]=a.data[h+1]+m*c.data[h+1]/255|0,a.data[h+2]=a.data[h+2]+m*c.data[h+2]/255|0)}};T.addOntoOpaqueFusionWithTransparentLayerMasked=function(a,
c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;n&&(a.data[e]=a.data[e]+n*c.data[e]/255|0,a.data[e+1]=a.data[e+1]+n*c.data[e+1]/255|0,a.data[e+2]=a.data[e+2]+n*c.data[e+2]/255|0)}};T.addOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|
0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0;a.data[h]=(n*a.data[h]+m*c.data[h])/r|0;a.data[h+1]=(n*a.data[h+1]+m*c.data[h+1])/r|0;a.data[h+2]=(n*a.data[h+2]+m*c.data[h+2])/r|0;a.data[h+3]=r}}};T.addOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-
l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0;a.data[e]=(r*a.data[e]+n*c.data[e])/u|0;a.data[e+1]=(r*a.data[e+1]+n*c.data[e+1])/u|0;a.data[e+2]=(r*a.data[e+2]+n*c.data[e+2])/u|0;a.data[e+3]=u}}};T.subtractOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|
0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];e&&(a.data[b]=a.data[b]+e*c.data[b]/255-e|0,a.data[b+1]=a.data[b+1]+e*c.data[b+1]/255-e|0,a.data[b+2]=a.data[b+2]+e*c.data[b+2]/255-e|0)}};T.subtractOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;g&&(a.data[b]=a.data[b]+
g*c.data[b]/255-g|0,a.data[b+1]=a.data[b+1]+g*c.data[b+1]/255-g|0,a.data[b+2]=a.data[b+2]+g*c.data[b+2]/255-g|0)}};T.subtractOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g;a.data[b]=(g*a.data[b]+e*c.data[b]-m)/p|0;a.data[b+1]=(g*a.data[b+1]+e*c.data[b+1]-m)/p|0;a.data[b+2]=
(g*a.data[b+2]+e*c.data[b+2]-m)/p|0;a.data[b+3]=p}}};T.subtractOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p;a.data[b]=(p*a.data[b]+g*c.data[b]-n)/m|0;a.data[b+1]=(p*a.data[b+1]+g*c.data[b+1]-n)/m|0;a.data[b+2]=(p*a.data[b+2]+g*c.data[b+2]-n)/m|0;a.data[b+3]=m}}};
T.subtractOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;m&&(a.data[h]=a.data[h]+m*c.data[h]/255-m|0,a.data[h+1]=a.data[h+1]+m*c.data[h+1]/255-m|0,a.data[h+2]=a.data[h+2]+m*c.data[h+2]/255-m|0)}};T.subtractOntoOpaqueFusionWithTransparentLayerMasked=function(a,
c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;n&&(a.data[e]=a.data[e]+n*c.data[e]/255-n|0,a.data[e+1]=a.data[e+1]+n*c.data[e+1]/255-n|0,a.data[e+2]=a.data[e+2]+n*c.data[e+2]/255-n|0)}};T.subtractOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*
(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n;a.data[h]=(n*a.data[h]+m*c.data[h]-u)/r|0;a.data[h+1]=(n*a.data[h+1]+m*c.data[h+1]-u)/r|0;a.data[h+2]=(n*a.data[h+2]+m*c.data[h+2]-u)/r|0;a.data[h+3]=r}}};T.subtractOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),
l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r;a.data[e]=(r*a.data[e]+n*c.data[e]-w)/u|0;a.data[e+1]=(r*a.data[e+1]+n*c.data[e+1]-w)/u|0;a.data[e+2]=(r*a.data[e+2]+n*c.data[e+2]-w)/u|0;a.data[e+3]=u}}};T.screenOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();
var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=a.data[b];a.data[b]=255^((255^p)*g+(255^c.data[b])*(255^p)*e/255)/255;p=a.data[b+1];a.data[b+1]=255^((255^p)*g+(255^c.data[b+1])*(255^p)*e/255)/255;p=a.data[b+2];a.data[b+2]=255^((255^p)*g+(255^c.data[b+2])*(255^p)*e/255)/255}}};T.screenOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*
(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=a.data[b];a.data[b]=255^((255^m)*p+(255^c.data[b])*(255^m)*g/255)/255;m=a.data[b+1];a.data[b+1]=255^((255^m)*p+(255^c.data[b+1])*(255^m)*g/255)/255;m=a.data[b+2];a.data[b+2]=255^((255^m)*p+(255^c.data[b+2])*(255^m)*g/255)/255}}};T.screenOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|
c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=255^((255^e)*n+(255^g)*r+(255^e)*(255^g)*m/255)/p;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=255^((255^e)*n+(255^g)*r+(255^e)*(255^g)*m/255)/p;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=255^((255^e)*n+(255^g)*r+(255^e)*(255^g)*m/255)/p;a.data[b+3]=p}}};T.screenOntoTransparentFusionWithTransparentLayer=
function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=255^((255^g)*r+(255^p)*u+(255^g)*(255^p)*n/255)/m;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=255^((255^g)*r+(255^p)*u+(255^g)*(255^p)*n/255)/m;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=
255^((255^g)*r+(255^p)*u+(255^g)*(255^p)*n/255)/m;a.data[b+3]=m}}};T.screenOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=a.data[h];a.data[h]=255^((255^r)*n+(255^c.data[h])*(255^r)*m/255)/255;r=a.data[h+1];a.data[h+1]=255^((255^r)*n+
(255^c.data[h+1])*(255^r)*m/255)/255;r=a.data[h+2];a.data[h+2]=255^((255^r)*n+(255^c.data[h+2])*(255^r)*m/255)/255}}};T.screenOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=a.data[e];a.data[e]=255^((255^u)*r+(255^c.data[e])*
(255^u)*n/255)/255;u=a.data[e+1];a.data[e+1]=255^((255^u)*r+(255^c.data[e+1])*(255^u)*n/255)/255;u=a.data[e+2];a.data[e+2]=255^((255^u)*r+(255^c.data[e+2])*(255^u)*n/255)/255}}};T.screenOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=
m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=255^((255^m)*w+(255^n)*z+(255^m)*(255^n)*u/255)/r;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=255^((255^m)*w+(255^n)*z+(255^m)*(255^n)*u/255)/r;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=255^((255^m)*w+(255^n)*z+(255^m)*(255^n)*u/255)/r;a.data[h+3]=r}}};T.screenOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,
b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=255^((255^n)*z+(255^r)*G+(255^n)*(255^r)*w/255)/u;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=255^((255^n)*z+(255^r)*G+(255^n)*(255^r)*w/255)/u;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=255^((255^n)*z+(255^r)*G+(255^n)*
(255^r)*w/255)/u;a.data[e+3]=u}}};T.lightenOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=m>=p?m:(m*g+p*e)/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=m>=p?m:(m*g+p*e)/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=m>=p?m:(m*g+p*e)/255|0}}};T.lightenOntoOpaqueFusionWithTransparentLayer=
function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=n>=m?n:(n*p+m*g)/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=n>=m?n:(n*p+m*g)/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=n>=m?n:(n*p+m*g)/255|0}}};T.lightenOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),
k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=g*(255^e)/p|0,n=255^m,r=e*(255^g)/p|0,u=255^r;e=c.data[b];g=a.data[b];a.data[b]=(g>=e?e*r+g*u:g*m+e*n)/255|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(g>=e?e*r+g*u:g*m+e*n)/255|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(g>=e?e*r+g*u:g*m+e*n)/255|0;a.data[b+3]=p}}};T.lightenOntoTransparentFusionWithTransparentLayer=function(a,
c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=p*(255^g)/m|0,r=255^n,u=g*(255^p)/m|0,w=255^u;g=c.data[b];p=a.data[b];a.data[b]=(p>=g?g*u+p*w:p*n+g*r)/255|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(p>=g?g*u+p*w:p*n+g*r)/255|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(p>=g?g*u+p*w:p*n+g*r)/255|0;a.data[b+3]=m}}};T.lightenOntoOpaqueFusionWithOpaqueLayerMasked=
function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=u>=r?u:(u*n+r*m)/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=u>=r?u:(u*n+r*m)/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=u>=r?u:(u*n+r*m)/255|0}}};T.lightenOntoOpaqueFusionWithTransparentLayerMasked=
function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=w>=u?w:(w*r+u*n)/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=w>=u?w:(w*r+u*n)/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=w>=u?w:(w*r+u*n)/255|0}}};T.lightenOntoTransparentFusionWithOpaqueLayerMasked=
function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=n*(255^m)/r|0,w=255^u,z=m*(255^n)/r|0,G=255^z;m=c.data[h];n=a.data[h];a.data[h]=(n>=m?m*z+n*G:n*u+m*w)/255|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(n>=m?m*z+n*G:n*u+m*w)/255|0;m=c.data[h+2];n=
a.data[h+2];a.data[h+2]=(n>=m?m*z+n*G:n*u+m*w)/255|0;a.data[h+3]=r}}};T.lightenOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=r*(255^n)/u|0,z=255^w,G=n*(255^r)/u|0,L=255^G;n=c.data[e];r=a.data[e];
a.data[e]=(r>=n?n*G+r*L:r*w+n*z)/255|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(r>=n?n*G+r*L:r*w+n*z)/255|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(r>=n?n*G+r*L:r*w+n*z)/255|0;a.data[e+3]=u}}};T.darkenOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=m>=p?(m*g+p*e)/255|0:m;p=c.data[b+
1];m=a.data[b+1];a.data[b+1]=m>=p?(m*g+p*e)/255|0:m;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=m>=p?(m*g+p*e)/255|0:m}}};T.darkenOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=n>=m?(n*p+m*g)/255|0:n;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=n>=m?(n*p+m*g)/255|0:n;m=c.data[b+
2];n=a.data[b+2];a.data[b+2]=n>=m?(n*p+m*g)/255|0:n}}};T.darkenOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*(255^g)/p|0,n=255^m,r=g*(255^e)/p|0,u=255^r;e=c.data[b];g=a.data[b];a.data[b]=(g>=e?g*r+e*u:e*m+g*n)/255|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(g>=e?g*r+e*u:e*m+g*
n)/255|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(g>=e?g*r+e*u:e*m+g*n)/255|0;a.data[b+3]=p}}};T.darkenOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*(255^p)/m|0,r=255^n,u=p*(255^g)/m|0,w=255^u;g=c.data[b];p=a.data[b];a.data[b]=(p>=g?p*u+g*w:g*n+p*r)/255|0;g=c.data[b+
1];p=a.data[b+1];a.data[b+1]=(p>=g?p*u+g*w:g*n+p*r)/255|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(p>=g?p*u+g*w:g*n+p*r)/255|0;a.data[b+3]=m}}};T.darkenOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=
u>=r?(u*n+r*m)/255|0:u;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=u>=r?(u*n+r*m)/255|0:u;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=u>=r?(u*n+r*m)/255|0:u}}};T.darkenOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];
a.data[e]=w>=u?(w*r+u*n)/255|0:w;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=w>=u?(w*r+u*n)/255|0:w;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=w>=u?(w*r+u*n)/255|0:w}}};T.darkenOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+
3])-(m*n/255|0)|0,u=m*(255^n)/r|0,w=255^u,z=n*(255^m)/r|0,G=255^z;m=c.data[h];n=a.data[h];a.data[h]=(n>=m?n*z+m*G:m*u+n*w)/255|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(n>=m?n*z+m*G:m*u+n*w)/255|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(n>=m?n*z+m*G:m*u+n*w)/255|0;a.data[h+3]=r}}};T.darkenOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=
0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*(255^r)/u|0,z=255^w,G=r*(255^n)/u|0,L=255^G;n=c.data[e];r=a.data[e];a.data[e]=(r>=n?r*G+n*L:n*w+r*z)/255|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(r>=n?r*G+n*L:n*w+r*z)/255|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(r>=n?r*G+n*L:n*w+r*z)/255|0;a.data[e+3]=u}}};T.dodgeOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),
k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=(m*g+e*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(m*g+e*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=(m*g+e*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0}}};T.dodgeOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=
0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=(n*p+g*(255==m?255:Math.min(255,255*n/(255^m)|0)))/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=(n*p+g*(255==m?255:Math.min(255,255*n/(255^m)|0)))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(n*p+g*(255==m?255:Math.min(255,255*n/(255^m)|0)))/255|0}}};T.dodgeOntoTransparentFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(e*n+g*r+m*(255==e?255:Math.min(255,255*g/(255^e)|0)))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(e*n+g*r+m*(255==e?255:Math.min(255,255*g/(255^e)|0)))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+
2]=(e*n+g*r+m*(255==e?255:Math.min(255,255*g/(255^e)|0)))/p|0;a.data[b+3]=p}}};T.dodgeOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(g*r+p*u+n*(255==g?255:Math.min(255,255*p/(255^g)|0)))/
m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(g*r+p*u+n*(255==g?255:Math.min(255,255*p/(255^g)|0)))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(g*r+p*u+n*(255==g?255:Math.min(255,255*p/(255^g)|0)))/m|0;a.data[b+3]=m}}};T.dodgeOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*
f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=(u*n+m*(255==r?255:Math.min(255,255*u/(255^r)|0)))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(u*n+m*(255==r?255:Math.min(255,255*u/(255^r)|0)))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(u*n+m*(255==r?255:Math.min(255,255*u/(255^r)|0)))/255|0}}};T.dodgeOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-
l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(w*r+n*(255==u?255:Math.min(255,255*w/(255^u)|0)))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(w*r+n*(255==u?255:Math.min(255,255*w/(255^u)|0)))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=(w*r+n*(255==u?255:Math.min(255,255*w/(255^u)|0)))/255|0}}};T.dodgeOntoTransparentFusionWithOpaqueLayerMasked=function(a,
c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(m*w+n*z+u*(255==m?255:Math.min(255,255*n/(255^m)|0)))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(m*w+n*z+u*(255==m?255:Math.min(255,
255*n/(255^m)|0)))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(m*w+n*z+u*(255==m?255:Math.min(255,255*n/(255^m)|0)))/r|0;a.data[h+3]=r}}};T.dodgeOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|
0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(n*z+r*G+w*(255==n?255:Math.min(255,255*r/(255^n)|0)))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(n*z+r*G+w*(255==n?255:Math.min(255,255*r/(255^n)|0)))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(n*z+r*G+w*(255==n?255:Math.min(255,255*r/(255^n)|0)))/u|0;a.data[e+3]=u}}};T.burnOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);
for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=(m*g+e*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(m*g+e*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=(m*g+e*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0}}};T.burnOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=(n*p+g*(0==m?0:255^Math.min(255,255*(255^n)/m)))/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=(n*p+g*(0==m?0:255^Math.min(255,255*(255^n)/m)))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(n*p+g*(0==m?0:255^Math.min(255,255*(255^n)/m)))/255|0}}};T.burnOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-
f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(e*n+g*r+m*(0==e?0:255^Math.min(255,255*(255^g)/e)))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(e*n+g*r+m*(0==e?0:255^Math.min(255,255*(255^g)/e)))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(e*n+g*r+m*(0==e?0:255^Math.min(255,255*(255^g)/e)))/p|0;a.data[b+
3]=p}}};T.burnOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(g*r+p*u+n*(0==g?0:255^Math.min(255,255*(255^p)/g)))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(g*r+p*u+n*(0==g?0:255^Math.min(255,
255*(255^p)/g)))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(g*r+p*u+n*(0==g?0:255^Math.min(255,255*(255^p)/g)))/m|0;a.data[b+3]=m}}};T.burnOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=(u*n+m*(0==
r?0:255^Math.min(255,255*(255^u)/r)))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(u*n+m*(0==r?0:255^Math.min(255,255*(255^u)/r)))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(u*n+m*(0==r?0:255^Math.min(255,255*(255^u)/r)))/255|0}}};T.burnOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=
c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(w*r+n*(0==u?0:255^Math.min(255,255*(255^w)/u)))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(w*r+n*(0==u?0:255^Math.min(255,255*(255^w)/u)))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=(w*r+n*(0==u?0:255^Math.min(255,255*(255^w)/u)))/255|0}}};T.burnOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=
f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(m*w+n*z+u*(0==m?0:255^Math.min(255,255*(255^n)/m)))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(m*w+n*z+u*(0==m?0:255^Math.min(255,255*(255^n)/m)))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(m*w+n*z+u*(0==m?0:255^Math.min(255,
255*(255^n)/m)))/r|0;a.data[h+3]=r}}};T.burnOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(n*z+r*G+w*(0==n?
0:255^Math.min(255,255*(255^r)/n)))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(n*z+r*G+w*(0==n?0:255^Math.min(255,255*(255^r)/n)))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(n*z+r*G+w*(0==n?0:255^Math.min(255,255*(255^r)/n)))/u|0;a.data[e+3]=u}}};T.overlayOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];
var m=a.data[b];a.data[b]=(g*m+(127>=m?2*e*p*m/255:e*(2*(255^p)*(255^m)/255^255)))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(g*m+(127>=m?2*e*p*m/255:e*(2*(255^p)*(255^m)/255^255)))/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=(g*m+(127>=m?2*e*p*m/255:e*(2*(255^p)*(255^m)/255^255)))/255|0}}};T.overlayOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=
4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=(p*n+(127>=n?2*g*m*n/255:g*(2*(255^m)*(255^n)/255^255)))/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=(p*n+(127>=n?2*g*m*n/255:g*(2*(255^m)*(255^n)/255^255)))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(p*n+(127>=n?2*g*m*n/255:g*(2*(255^m)*(255^n)/255^255)))/255|0}}};T.overlayOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(n*e+r*g+(127>=g?2*m*e*g/255:m*(2*(255^e)*(255^g)/255^255)))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(n*e+r*g+(127>=g?2*m*e*g/255:m*(2*(255^e)*(255^g)/255^255)))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(n*e+r*g+(127>=g?2*m*e*g/255:m*(2*(255^e)*(255^g)/255^255)))/p|0;a.data[b+3]=p}}};
T.overlayOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(r*g+u*p+(127>=p?2*n*g*p/255:n*(2*(255^g)*(255^p)/255^255)))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(r*g+u*p+(127>=p?2*n*g*p/
255:n*(2*(255^g)*(255^p)/255^255)))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(r*g+u*p+(127>=p?2*n*g*p/255:n*(2*(255^g)*(255^p)/255^255)))/m|0;a.data[b+3]=m}}};T.overlayOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=
a.data[h];a.data[h]=(n*u+(127>=u?2*m*r*u/255:m*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(n*u+(127>=u?2*m*r*u/255:m*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(n*u+(127>=u?2*m*r*u/255:m*(2*(255^r)*(255^u)/255^255)))/255|0}}};T.overlayOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);
for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(r*w+(127>=w?2*n*u*w/255:n*(2*(255^u)*(255^w)/255^255)))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(r*w+(127>=w?2*n*u*w/255:n*(2*(255^u)*(255^w)/255^255)))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=(r*w+(127>=w?2*n*u*w/255:n*(2*(255^u)*(255^w)/255^255)))/255|0}}};T.overlayOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=
0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(w*m+z*n+(127>=n?2*u*m*n/255:u*(2*(255^m)*(255^n)/255^255)))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(w*m+z*n+(127>=n?2*u*m*n/255:u*
(2*(255^m)*(255^n)/255^255)))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(w*m+z*n+(127>=n?2*u*m*n/255:u*(2*(255^m)*(255^n)/255^255)))/r|0;a.data[h+3]=r}}};T.overlayOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+
3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(z*n+G*r+(127>=r?2*w*n*r/255:w*(2*(255^n)*(255^r)/255^255)))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(z*n+G*r+(127>=r?2*w*n*r/255:w*(2*(255^n)*(255^r)/255^255)))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(z*n+G*r+(127>=r?2*w*n*r/255:w*(2*(255^n)*(255^r)/255^255)))/u|0;a.data[e+3]=u}}};T.hardLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-
f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=(g*m+(127>=p?2*e*p*m/255:e*(2*(255^p)*(255^m)/255^255)))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(g*m+(127>=p?2*e*p*m/255:e*(2*(255^p)*(255^m)/255^255)))/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=(g*m+(127>=p?2*e*p*m/255:e*(2*(255^p)*(255^m)/255^255)))/255|0}}};T.hardLightOntoOpaqueFusionWithTransparentLayer=function(a,c,
d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=(p*n+(127>=m?2*g*m*n/255:g*(2*(255^m)*(255^n)/255^255)))/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=(p*n+(127>=m?2*g*m*n/255:g*(2*(255^m)*(255^n)/255^255)))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(p*n+(127>=m?2*g*m*n/255:g*(2*(255^m)*(255^n)/255^255)))/255|0}}};
T.hardLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(n*e+r*g+(127>=e?2*m*e*g/255:m*(2*(255^e)*(255^g)/255^255)))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(n*e+r*g+(127>=e?2*m*e*g/255:m*(2*(255^
e)*(255^g)/255^255)))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(n*e+r*g+(127>=e?2*m*e*g/255:m*(2*(255^e)*(255^g)/255^255)))/p|0;a.data[b+3]=p}}};T.hardLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=
a.data[b];a.data[b]=(r*g+u*p+(127>=g?2*n*g*p/255:n*(2*(255^g)*(255^p)/255^255)))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(r*g+u*p+(127>=g?2*n*g*p/255:n*(2*(255^g)*(255^p)/255^255)))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(r*g+u*p+(127>=g?2*n*g*p/255:n*(2*(255^g)*(255^p)/255^255)))/m|0;a.data[b+3]=m}}};T.hardLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,
b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=(n*u+(127>=r?2*m*r*u/255:m*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(n*u+(127>=r?2*m*r*u/255:m*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(n*u+(127>=r?2*m*r*u/255:m*(2*(255^r)*(255^u)/255^255)))/255|0}}};T.hardLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,
b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(r*w+(127>=u?2*n*u*w/255:n*(2*(255^u)*(255^w)/255^255)))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(r*w+(127>=u?2*n*u*w/255:n*(2*(255^u)*(255^w)/255^255)))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+
2]=(r*w+(127>=u?2*n*u*w/255:n*(2*(255^u)*(255^w)/255^255)))/255|0}}};T.hardLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];
a.data[h]=(w*m+z*n+(127>=m?2*u*m*n/255:u*(2*(255^m)*(255^n)/255^255)))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(w*m+z*n+(127>=m?2*u*m*n/255:u*(2*(255^m)*(255^n)/255^255)))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(w*m+z*n+(127>=m?2*u*m*n/255:u*(2*(255^m)*(255^n)/255^255)))/r|0;a.data[h+3]=r}}};T.hardLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,
b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(z*n+G*r+(127>=n?2*w*n*r/255:w*(2*(255^n)*(255^r)/255^255)))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(z*n+G*r+(127>=n?2*w*n*r/255:w*(2*(255^n)*(255^r)/255^255)))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(z*n+G*r+(127>=n?2*w*n*r/255:w*(2*(255^n)*(255^r)/255^
255)))/u|0;a.data[e+3]=u}}};T.softLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=(g*m+e*(127>=p?((2*p-255)*Ac[m]/255|0)+m:((2*p-255)*Bc[m]/255|0)+m))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(g*m+e*(127>=p?((2*p-255)*Ac[m]/255|0)+m:((2*p-255)*Bc[m]/255|0)+m))/255|0;p=
c.data[b+2];m=a.data[b+2];a.data[b+2]=(g*m+e*(127>=p?((2*p-255)*Ac[m]/255|0)+m:((2*p-255)*Bc[m]/255|0)+m))/255|0}}};T.softLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=(p*n+g*(127>=m?((2*m-255)*Ac[n]/255|0)+n:((2*m-255)*Bc[n]/255|0)+n))/255|0;m=c.data[b+1];n=
a.data[b+1];a.data[b+1]=(p*n+g*(127>=m?((2*m-255)*Ac[n]/255|0)+n:((2*m-255)*Bc[n]/255|0)+n))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(p*n+g*(127>=m?((2*m-255)*Ac[n]/255|0)+n:((2*m-255)*Bc[n]/255|0)+n))/255|0}}};T.softLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/
255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(n*e+r*g+(127>=e?m*(((2*e-255)*Ac[g]/255|0)+g):m*(((2*e-255)*Bc[g]/255|0)+g)))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(n*e+r*g+(127>=e?m*(((2*e-255)*Ac[g]/255|0)+g):m*(((2*e-255)*Bc[g]/255|0)+g)))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(n*e+r*g+(127>=e?m*(((2*e-255)*Ac[g]/255|0)+g):m*(((2*e-255)*Bc[g]/255|0)+g)))/p|0;a.data[b+3]=p}}};T.softLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|
b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(r*g+u*p+(127>=g?n*(((2*g-255)*Ac[p]/255|0)+p):n*(((2*g-255)*Bc[p]/255|0)+p)))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(r*g+u*p+(127>=g?n*(((2*g-255)*Ac[p]/255|0)+p):n*(((2*g-255)*Bc[p]/255|0)+p)))/m|0;
g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(r*g+u*p+(127>=g?n*(((2*g-255)*Ac[p]/255|0)+p):n*(((2*g-255)*Bc[p]/255|0)+p)))/m|0;a.data[b+3]=m}}};T.softLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=
(n*u+m*(127>=r?((2*r-255)*Ac[u]/255|0)+u:((2*r-255)*Bc[u]/255|0)+u))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(n*u+m*(127>=r?((2*r-255)*Ac[u]/255|0)+u:((2*r-255)*Bc[u]/255|0)+u))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(n*u+m*(127>=r?((2*r-255)*Ac[u]/255|0)+u:((2*r-255)*Bc[u]/255|0)+u))/255|0}}};T.softLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,
b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(r*w+n*(127>=u?((2*u-255)*Ac[w]/255|0)+w:((2*u-255)*Bc[w]/255|0)+w))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(r*w+n*(127>=u?((2*u-255)*Ac[w]/255|0)+w:((2*u-255)*Bc[w]/255|0)+w))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=(r*w+n*(127>=u?((2*u-255)*Ac[w]/255|0)+w:((2*u-255)*Bc[w]/255|0)+w))/255|0}}};T.softLightOntoTransparentFusionWithOpaqueLayerMasked=
function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(w*m+z*n+(127>=m?u*(((2*m-255)*Ac[n]/255|0)+n):u*(((2*m-255)*Bc[n]/255|0)+n)))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+
1]=(w*m+z*n+(127>=m?u*(((2*m-255)*Ac[n]/255|0)+n):u*(((2*m-255)*Bc[n]/255|0)+n)))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(w*m+z*n+(127>=m?u*(((2*m-255)*Ac[n]/255|0)+n):u*(((2*m-255)*Bc[n]/255|0)+n)))/r|0;a.data[h+3]=r}}};T.softLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=
c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(z*n+G*r+(127>=n?w*(((2*n-255)*Ac[r]/255|0)+r):w*(((2*n-255)*Bc[r]/255|0)+r)))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(z*n+G*r+(127>=n?w*(((2*n-255)*Ac[r]/255|0)+r):w*(((2*n-255)*Bc[r]/255|0)+r)))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(z*n+G*r+(127>=n?w*(((2*n-255)*Ac[r]/255|0)+r):w*(((2*n-255)*Bc[r]/255|0)+r)))/u|0;a.data[e+
3]=u}}};T.vividLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=(g*m+(127>=p?e*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):e*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(g*m+(127>=p?e*(0==p?0:255-Math.min(255,255*(255-m)/
(2*p)|0)):e*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=(g*m+(127>=p?e*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):e*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0}}};T.vividLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=
a.data[b];a.data[b]=(p*n+(127>=m?g*(0==m?0:255-Math.min(255,255*(255-n)/(2*m)|0)):g*(255==m?255:Math.min(255,255*n/(2*(255-m))|0))))/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=(p*n+(127>=m?g*(0==m?0:255-Math.min(255,255*(255-n)/(2*m)|0)):g*(255==m?255:Math.min(255,255*n/(2*(255-m))|0))))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(p*n+(127>=m?g*(0==m?0:255-Math.min(255,255*(255-n)/(2*m)|0)):g*(255==m?255:Math.min(255,255*n/(2*(255-m))|0))))/255|0}}};T.vividLightOntoTransparentFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(n*e+r*g+(127>=e?m*(0==e?0:255-Math.min(255,255*(255-g)/(2*e)|0)):m*(255==e?255:Math.min(255,255*g/(2*(255-e))|0))))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(n*e+r*g+(127>=e?m*(0==e?0:
255-Math.min(255,255*(255-g)/(2*e)|0)):m*(255==e?255:Math.min(255,255*g/(2*(255-e))|0))))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(n*e+r*g+(127>=e?m*(0==e?0:255-Math.min(255,255*(255-g)/(2*e)|0)):m*(255==e?255:Math.min(255,255*g/(2*(255-e))|0))))/p|0;a.data[b+3]=p}}};T.vividLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+
3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(r*g+u*p+(127>=g?n*(0==g?0:255-Math.min(255,255*(255-p)/(2*g)|0)):n*(255==g?255:Math.min(255,255*p/(2*(255-g))|0))))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(r*g+u*p+(127>=g?n*(0==g?0:255-Math.min(255,255*(255-p)/(2*g)|0)):n*(255==g?255:Math.min(255,255*p/(2*(255-g))|0))))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(r*g+u*p+(127>=g?n*(0==g?0:255-Math.min(255,
255*(255-p)/(2*g)|0)):n*(255==g?255:Math.min(255,255*p/(2*(255-g))|0))))/m|0;a.data[b+3]=m}}};T.vividLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=(n*u+(127>=r?m*(0==r?0:255-Math.min(255,255*
(255-u)/(2*r)|0)):m*(255==r?255:Math.min(255,255*u/(2*(255-r))|0))))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(n*u+(127>=r?m*(0==r?0:255-Math.min(255,255*(255-u)/(2*r)|0)):m*(255==r?255:Math.min(255,255*u/(2*(255-r))|0))))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(n*u+(127>=r?m*(0==r?0:255-Math.min(255,255*(255-u)/(2*r)|0)):m*(255==r?255:Math.min(255,255*u/(2*(255-r))|0))))/255|0}}};T.vividLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),
h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(r*w+(127>=u?n*(0==u?0:255-Math.min(255,255*(255-w)/(2*u)|0)):n*(255==u?255:Math.min(255,255*w/(2*(255-u))|0))))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(r*w+(127>=u?n*(0==u?0:255-Math.min(255,255*(255-w)/(2*u)|0)):n*(255==u?255:Math.min(255,
255*w/(2*(255-u))|0))))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=(r*w+(127>=u?n*(0==u?0:255-Math.min(255,255*(255-w)/(2*u)|0)):n*(255==u?255:Math.min(255,255*w/(2*(255-u))|0))))/255|0}}};T.vividLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=
void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(w*m+z*n+(127>=m?u*(0==m?0:255-Math.min(255,255*(255-n)/(2*m)|0)):u*(255==m?255:Math.min(255,255*n/(2*(255-m))|0))))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(w*m+z*n+(127>=m?u*(0==m?0:255-Math.min(255,255*(255-n)/(2*m)|0)):u*(255==m?255:Math.min(255,255*n/(2*(255-m))|0))))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(w*m+z*n+(127>=m?u*(0==m?0:255-Math.min(255,255*
(255-n)/(2*m)|0)):u*(255==m?255:Math.min(255,255*n/(2*(255-m))|0))))/r|0;a.data[h+3]=r}}};T.vividLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/
255|0;n=c.data[e];r=a.data[e];a.data[e]=(z*n+G*r+(127>=n?w*(0==n?0:255-Math.min(255,255*(255-r)/(2*n)|0)):w*(255==n?255:Math.min(255,255*r/(2*(255-n))|0))))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(z*n+G*r+(127>=n?w*(0==n?0:255-Math.min(255,255*(255-r)/(2*n)|0)):w*(255==n?255:Math.min(255,255*r/(2*(255-n))|0))))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(z*n+G*r+(127>=n?w*(0==n?0:255-Math.min(255,255*(255-r)/(2*n)|0)):w*(255==n?255:Math.min(255,255*r/(2*(255-n))|0))))/u|0;a.data[e+3]=u}}};T.linearLightOntoOpaqueFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=a.data[b];a.data[b]=(g*p+e*Math.min(255,Math.max(0,p+2*c.data[b]-255)))/255|0;p=a.data[b+1];a.data[b+1]=(g*p+e*Math.min(255,Math.max(0,p+2*c.data[b+1]-255)))/255|0;p=a.data[b+2];a.data[b+2]=(g*p+e*Math.min(255,Math.max(0,p+2*c.data[b+2]-255)))/255|0}}};T.linearLightOntoOpaqueFusionWithTransparentLayer=
function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=a.data[b];a.data[b]=(p*m+g*Math.min(255,Math.max(0,m+2*c.data[b]-255)))/255|0;m=a.data[b+1];a.data[b+1]=(p*m+g*Math.min(255,Math.max(0,m+2*c.data[b+1]-255)))/255|0;m=a.data[b+2];a.data[b+2]=(p*m+g*Math.min(255,Math.max(0,m+2*c.data[b+2]-255)))/255|0}}};T.linearLightOntoTransparentFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(n*e+r*g+m*Math.min(255,Math.max(0,g+2*e-255)))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(n*e+r*g+m*Math.min(255,Math.max(0,g+2*e-255)))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(n*e+
r*g+m*Math.min(255,Math.max(0,g+2*e-255)))/p|0;a.data[b+3]=p}}};T.linearLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(r*g+u*p+n*Math.min(255,Math.max(0,p+2*g-255)))/m|0;g=c.data[b+
1];p=a.data[b+1];a.data[b+1]=(r*g+u*p+n*Math.min(255,Math.max(0,p+2*g-255)))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(r*g+u*p+n*Math.min(255,Math.max(0,p+2*g-255)))/m|0;a.data[b+3]=m}}};T.linearLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=
255^m;var r=a.data[h];a.data[h]=(n*r+m*Math.min(255,Math.max(0,r+2*c.data[h]-255)))/255|0;r=a.data[h+1];a.data[h+1]=(n*r+m*Math.min(255,Math.max(0,r+2*c.data[h+1]-255)))/255|0;r=a.data[h+2];a.data[h+2]=(n*r+m*Math.min(255,Math.max(0,r+2*c.data[h+2]-255)))/255|0}}};T.linearLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=
h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=a.data[e];a.data[e]=(r*u+n*Math.min(255,Math.max(0,u+2*c.data[e]-255)))/255|0;u=a.data[e+1];a.data[e+1]=(r*u+n*Math.min(255,Math.max(0,u+2*c.data[e+1]-255)))/255|0;u=a.data[e+2];a.data[e+2]=(r*u+n*Math.min(255,Math.max(0,u+2*c.data[e+2]-255)))/255|0}}};T.linearLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,
b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(w*m+z*n+u*Math.min(255,Math.max(0,n+2*m-255)))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(w*m+z*n+u*Math.min(255,Math.max(0,n+2*m-255)))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(w*m+z*n+u*Math.min(255,Math.max(0,
n+2*m-255)))/r|0;a.data[h+3]=r}}};T.linearLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(z*n+G*r+w*Math.min(255,
Math.max(0,r+2*n-255)))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(z*n+G*r+w*Math.min(255,Math.max(0,r+2*n-255)))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(z*n+G*r+w*Math.min(255,Math.max(0,r+2*n-255)))/u|0;a.data[e+3]=u}}};T.pinLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=
(g*m+e*(m>=2*p?2*p:m<=2*p-255?2*p-255:m))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(g*m+e*(m>=2*p?2*p:m<=2*p-255?2*p-255:m))/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=(g*m+e*(m>=2*p?2*p:m<=2*p-255?2*p-255:m))/255|0}}};T.pinLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];
a.data[b]=(p*n+g*(n>=2*m?2*m:n<=2*m-255?2*m-255:n))/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=(p*n+g*(n>=2*m?2*m:n<=2*m-255?2*m-255:n))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(p*n+g*(n>=2*m?2*m:n<=2*m-255?2*m-255:n))/255|0}}};T.pinLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-
(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(n*e+r*g+m*(g>=2*e?2*e:g<=2*e-255?2*e-255:g))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(n*e+r*g+m*(g>=2*e?2*e:g<=2*e-255?2*e-255:g))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(n*e+r*g+m*(g>=2*e?2*e:g<=2*e-255?2*e-255:g))/p|0;a.data[b+3]=p}}};T.pinLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);
for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(r*g+u*p+n*(p>=2*g?2*g:p<=2*g-255?2*g-255:p))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(r*g+u*p+n*(p>=2*g?2*g:p<=2*g-255?2*g-255:p))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(r*g+u*p+n*(p>=2*g?2*g:p<=2*g-255?2*g-255:p))/m|0;a.data[b+3]=m}}};T.pinLightOntoOpaqueFusionWithOpaqueLayerMasked=
function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=(n*u+m*(u>=2*r?2*r:u<=2*r-255?2*r-255:u))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(n*u+m*(u>=2*r?2*r:u<=2*r-255?2*r-255:u))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(n*u+m*(u>=2*
r?2*r:u<=2*r-255?2*r-255:u))/255|0}}};T.pinLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(r*w+n*(w>=2*u?2*u:w<=2*u-255?2*u-255:w))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(r*w+
n*(w>=2*u?2*u:w<=2*u-255?2*u-255:w))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=(r*w+n*(w>=2*u?2*u:w<=2*u-255?2*u-255:w))/255|0}}};T.pinLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|
0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(w*m+z*n+u*(n>=2*m?2*m:n<=2*m-255?2*m-255:n))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(w*m+z*n+u*(n>=2*m?2*m:n<=2*m-255?2*m-255:n))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(w*m+z*n+u*(n>=2*m?2*m:n<=2*m-255?2*m-255:n))/r|0;a.data[h+3]=r}}};T.pinLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;
b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(z*n+G*r+w*(r>=2*n?2*n:r<=2*n-255?2*n-255:r))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(z*n+G*r+w*(r>=2*n?2*n:r<=2*n-255?2*n-255:r))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(z*n+G*r+w*(r>=2*n?2*n:r<=2*n-255?2*n-255:r))/u|0;a.data[e+
3]=u}}};T.passthroughOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3],p=d/100,m=1-p,n=g*p+255*m;a.data[b]=(c.data[b]*g*p+255*a.data[b]*m)/n|0;a.data[b+1]=(c.data[b+1]*g*p+255*a.data[b+1]*m)/n|0;a.data[b+2]=(c.data[b+2]*g*p+255*a.data[b+2]*m)/n|0;a.data[b+3]=n}};T.passthroughOntoOpaqueFusionWithOpaqueLayer=T.passthroughOntoOpaqueFusionWithTransparentLayer;
T.passthroughOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3],p=a.data[b+3],m=d/100,n=1-m,r=g*m+p*n;a.data[b]=(c.data[b]*g*m+a.data[b]*p*n)/r|0;a.data[b+1]=(c.data[b+1]*g*m+a.data[b+1]*p*n)/r|0;a.data[b+2]=(c.data[b+2]*g*m+a.data[b+2]*p*n)/r|0;a.data[b+3]=r}};T.passthroughOntoTransparentFusionWithOpaqueLayer=T.passthroughOntoTransparentFusionWithTransparentLayer;
T.passthroughOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3],r=f.data[b]*d/25500,u=1-r,w=n*r+255*u;a.data[e]=(c.data[e]*n*r+255*a.data[e]*u)/w|0;a.data[e+1]=(c.data[e+1]*n*r+255*a.data[e+1]*u)/w|0;a.data[e+2]=(c.data[e+2]*n*r+255*a.data[e+2]*u)/w|0;a.data[e+3]=w}};T.passthroughOntoOpaqueFusionWithOpaqueLayerMasked=
T.passthroughOntoOpaqueFusionWithTransparentLayerMasked;T.passthroughOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3],r=a.data[e+3],u=f.data[b]*d/25500,w=1-u,z=n*u+r*w;a.data[e]=(c.data[e]*n*u+a.data[e]*r*w)/z|0;a.data[e+1]=(c.data[e+1]*n*u+a.data[e+1]*r*w)/z|0;a.data[e+
2]=(c.data[e+2]*n*u+a.data[e+2]*r*w)/z|0;a.data[e+3]=z}};T.passthroughOntoTransparentFusionWithOpaqueLayerMasked=T.passthroughOntoTransparentFusionWithTransparentLayerMasked;T.replaceOntoFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;a.data[b]=c.data[b];a.data[b+1]=c.data[b+1];a.data[b+2]=c.data[b+2];a.data[b+3]=g}};T.replaceOntoFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];a.data[b]=c.data[b];a.data[b+1]=c.data[b+1];a.data[b+2]=c.data[b+2];a.data[b+3]=e}};T.replaceOntoFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=
0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;a.data[e]=c.data[e];a.data[e+1]=c.data[e+1];a.data[e+2]=c.data[e+2];a.data[e+3]=n}};T.replaceOntoFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;a.data[h]=c.data[h];a.data[h+1]=c.data[h+1];a.data[h+2]=c.data[h+
2];a.data[h+3]=m}};T.replaceAlphaOntoFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4)a.data[b+3]=c.data[b+3]*d/100|0};T.replaceAlphaOntoFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=
0;m<l;m++,e+=4,b++)a.data[e+3]=c.data[e+3]*f.data[b]*d/25500|0};T.replaceAlphaOntoFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4)a.data[b+3]=c.data[b+3]};T.replaceAlphaOntoFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=
0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++)a.data[h+3]=c.data[h+3]*f.data[b]/255|0};T.upgradeMultiplyOfOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0,p=void 0;e&&(g=c.data[b],p=a.data[b],c.data[b]=g+Math.ceil((255-g)*p*e%65025/(p*e)),g=c.data[b+1],p=a.data[b+1],c.data[b+1]=g+Math.ceil((255-g)*p*e%65025/(p*e)),g=c.data[b+2],p=a.data[b+2],c.data[b+
2]=g+Math.ceil((255-g)*p*e%65025/(p*e)))}};T.upgradeMultiplyOfTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0,m=void 0;g&&(p=c.data[b],m=a.data[b],c.data[b]=p+Math.ceil((255-p)*m*g%65025/(m*g)),p=c.data[b+1],m=a.data[b+1],c.data[b+1]=p+Math.ceil((255-p)*m*g%65025/(m*g)),p=c.data[b+2],m=a.data[b+2],c.data[b+2]=p+Math.ceil((255-p)*m*g%65025/
(m*g)))}};T._normalFuseImageOntoImageAtPosition=function(a,c,d,b,f,k){d=0|b.getHeight();var l=0|b.getWidth(),h=4*(c.width-l)|0;b=0|c.offsetOfPixel(b.left,b.top);var e=4*(a.width-l)|0;f=0|a.offsetOfPixel(f,k);for(k=0;k<d;k++,b+=h,f+=e)for(var g=0;g<l;g++,b+=4,f+=4){var p=c.data[b+3],m=void 0;if(p){var n=p+(m=a.data[f+3])-(p*m/255|0)|0;p=255*p/n|0;m=255-p;a.data[f]=(c.data[b]*p+a.data[f]*m)/255|0;a.data[f+1]=(c.data[b+1]*p+a.data[f+1]*m)/255|0;a.data[f+2]=(c.data[b+2]*p+a.data[f+2]*m)/255|0;a.data[f+
3]=n}}};T.LM_NORMAL=0;T.LM_MULTIPLY=1;T.LM_ADD=2;T.LM_SCREEN=3;T.LM_LIGHTEN=4;T.LM_DARKEN=5;T.LM_SUBTRACT=6;T.LM_DODGE=7;T.LM_BURN=8;T.LM_OVERLAY=9;T.LM_HARDLIGHT=10;T.LM_SOFTLIGHT=11;T.LM_VIVIDLIGHT=12;T.LM_LINEARLIGHT=13;T.LM_PINLIGHT=14;T.LM_PASSTHROUGH=15;T.LM_MULTIPLY2=16;T.LM_FIRST=0;T.LM_LAST=16;T.LM_LAST_CHIBIPAINT=T.LM_PINLIGHT;T.BLEND_MODE_CODENAMES="normal multiply add screen lighten darken subtract dodge burn overlay hardLight softLight vividLight linearLight pinLight passthrough multiply2".split(" ");
T.BLEND_MODE_DISPLAY_NAMES="Normal;Multiply;Add;Screen;Lighten;Darken;Subtract;Dodge;Burn;Overlay;Hard Light;Soft Light;Vivid Light;Linear Light;Pin Light;Passthrough;Multiply".split(";");(function(){for(var a=0;256>a;a++){var c=a/255;Ac[a]=255*(c-c*c)|0}for(a=0;256>a;a++)c=a/255,Bc[a]=255*(Math.sqrt(c)-c)|0})();Mb.prototype.copyFrom=function(a){this.name=a.name;this.blendMode=a.blendMode;this.useLegacyMultiply=a.useLegacyMultiply;this.alpha=a.alpha;this.visible=a.visible;this.parent=a.parent;this.lockAlpha=
a.lockAlpha;a.mask?this.mask?this.mask.copyPixelsFrom(a.mask):this.mask=a.mask.clone():this.mask=null;this.maskLinked=a.maskLinked;this.maskVisible=a.maskVisible;a.maskThumbnail?this.maskThumbnail?this.maskThumbnail.copyPixelsFrom(a.maskThumbnail):this.maskThumbnail=a.maskThumbnail.clone():this.maskThumbnail=null};Mb.prototype.setMask=function(a){(this.mask=a)||(this.maskThumbnail=null)};Mb.prototype.setAlpha=function(a){this.alpha=a};Mb.prototype.getAlpha=function(){return this.alpha};Mb.prototype.getEffectiveAlpha=
function(){return this.visible?this.alpha:0};Mb.prototype.getEffectiveMask=function(){return this.maskVisible?this.mask:null};Mb.prototype.setName=function(a){this.name=a};Mb.prototype.getName=function(){return this.name};Mb.prototype.setBlendMode=function(a){this.blendMode=a;a===T.LM_MULTIPLY?this.useLegacyMultiply=!0:a===T.LM_MULTIPLY2&&(this.useLegacyMultiply=!1)};Mb.prototype.getBlendMode=function(){return this.blendMode};Mb.prototype.getLockAlpha=function(){return this.lockAlpha};Mb.prototype.setLockAlpha=
function(a){this.lockAlpha=a};Mb.prototype.setVisible=function(a){this.visible=a};Mb.prototype.getVisible=function(){return this.visible};Mb.prototype.isVisible=Mb.prototype.getVisible;Mb.prototype.setMaskLinked=function(a){this.maskLinked=a};Mb.prototype.getMaskLinked=function(){return this.maskLinked};Mb.prototype.setMaskVisible=function(a){this.maskVisible=a};Mb.prototype.getMaskVisible=function(){return this.maskVisible};Mb.prototype.getMemoryUsed=function(){return 0};Mb.prototype.getDepth=function(){return null==
this.parent?0:this.parent.getDepth()+1};Mb.prototype.ancestorsAreVisible=function(){return null==this.parent||this.parent.visible&&this.parent.ancestorsAreVisible()};Mb.prototype.hasAncestor=function(a){return this.parent==a||this.parent&&this.parent.hasAncestor(a)};Mb.prototype.clone=function(){throw"Pure virtual CPLayer.clone() call";};Mb.prototype.getNonTransparentBounds=function(a){return new Sa(0,0,0,0)};Mb.prototype.rebuildMaskThumbnail=function(){if(this.mask){if(!this.maskThumbnail){var a=
Math.ceil(Math.max(this.mask.width/Mb.LAYER_THUMBNAIL_WIDTH,this.mask.height/Mb.LAYER_THUMBNAIL_HEIGHT));this.maskThumbnail=new ob(Math.floor(this.mask.width/a),Math.floor(this.mask.height/a),8)}this.maskThumbnail.createThumbnailFrom(this.mask)}else this.maskThumbnail=null};Mb.prototype.getMaskThumbnail=function(){return!this.maskThumbnail&&this.mask&&this.rebuildMaskThumbnail(),this.maskThumbnail};Mb.LAYER_THUMBNAIL_WIDTH=80;Mb.LAYER_THUMBNAIL_HEIGHT=50;Wa.prototype=Object.create(Mb.prototype);Wa.prototype.constructor=
Wa;Wa.createFromImage=function(a,c){c=new Wa(0,0,c);return c.image=a,c};Wa.prototype.clone=function(){var a=new Wa(0,0,this.name);return a.copyFrom(this),a};Wa.prototype.copyFrom=function(a){Mb.prototype.copyFrom.call(this,a);this.clip=a.clip;this.image?this.image.copyPixelsFrom(a.image):this.image=a.image.clone()};Wa.prototype.hasAlpha=function(){return 100!=this.alpha||this.image.hasAlpha()};Wa.prototype.hasAlphaInRect=function(a){return 100!=this.alpha||this.image.hasAlphaInRect(a)};Wa.prototype.copyImageFrom=
function(a){this.image.copyPixelsFrom(a)};Wa.prototype.getClippingBase=function(){if(this.clip&&this.parent)for(var a=this.parent.indexOf(this)-1;0<=a&&this.parent.layers[a]instanceof Wa;a--)if(!this.parent.layers[a].clip)return this.parent.layers[a];return null};Wa.prototype.getClip=function(){return this.clip};Wa.prototype.setClip=function(a){this.clip=a};Wa.prototype.getNonTransparentBounds=function(a){return this.image.getNonTransparentBounds(a)};Wa.prototype.getBounds=function(){return new Sa(0,
0,this.image.width,this.image.height)};Wa.prototype.getMemoryUsed=function(){return this.image?this.image.getMemorySize():0};Wa.prototype.rebuildImageThumbnail=function(){if(!this.imageThumbnail){var a=Math.ceil(Math.max(this.image.width/Mb.LAYER_THUMBNAIL_WIDTH,this.image.height/Mb.LAYER_THUMBNAIL_HEIGHT));this.imageThumbnail=new I(Math.floor(this.image.width/a),Math.floor(this.image.height/a))}this.imageThumbnail.createThumbnailFrom(this.image)};Wa.prototype.getImageThumbnail=function(){return this.imageThumbnail||
this.rebuildImageThumbnail(),this.imageThumbnail};T.blendFunctionNameForParameters=function(a,c,d,b){d=T.BLEND_MODE_CODENAMES[d]+"Onto";return a?d+="TransparentFusion":d+="OpaqueFusion",100==c?d+="WithOpaqueLayer":d+="WithTransparentLayer",b&&(d+="Masked"),d};T.fuseImageOntoImage=function(a,c,d,b,f,k,l){0>=b||(c=T.blendFunctionNameForParameters(c,b,f,null!=l),k=a.getBounds().clipTo(k),this[c](a,d,b,k,l))};T.normalFuseImageOntoImageAtPosition=function(a,c,d,b,f){f=f.clone();d=new Sa(d,b,0,0);a.getBounds().clipSourceDest(f,
d);this._normalFuseImageOntoImageAtPosition(a,c,100,f,d.left,d.top)};T.multiplyAlphaBy=function(a,c){if(100>c)if(0==c)a.clearAll(0);else{a=a.data;for(var d=3;d<a.length;d+=4)a[d]=Math.round(a[d]*c/100)}};T.multiplyAlphaByMask=function(a,c,d){c/=25500;for(var b=I.ALPHA_BYTE_OFFSET,f=0;b<a.data.length;b+=I.BYTES_PER_PIXEL,f++)a.data[b]=Math.round(a.data[b]*d.data[f]*c)};T.copyAndMultiplyAlphaBy=function(a,c,d,b){if(100==d)a.copyBitmapRect(c,b.left,b.top,b);else if(0==d)a.clearRect(b,0);else for(a=c.data,
c=0;c<a.length;c+=4)a[c]=a[c],a[c+1]=a[c+1],a[c+2]=a[c+2],a[c+3]=Math.round(a[c+3]*d/100)};og.prototype.addChildren=function(a){var c=this;null!=a&&(Array.isArray(a)?(a.forEach(function(d){return d.parent=c}),this.layers=this.layers.concat(a)):(a.parent=this,this.layers.push(a)))};var Pc={};!function(a){function c(){}function d(l,h){for(var e=l.length;e--;)if(l[e].listener===h)return e;return-1}function b(l){return function(){return this[l].apply(this,arguments)}}var f=c.prototype,k=a.EventEmitter;
f.getListeners=function(l){var h,e,g=this._getEvents();if(l instanceof RegExp)for(e in h={},g)g.hasOwnProperty(e)&&l.test(e)&&(h[e]=g[e]);else h=g[l]||(g[l]=[]);return h};f.flattenListeners=function(l){var h,e=[];for(h=0;h<l.length;h+=1)e.push(l[h].listener);return e};f.getListenersAsObject=function(l){var h,e=this.getListeners(l);return e instanceof Array&&((h={})[l]=e),h||e};f.addListener=function(l,h){if(!function n(m){return"function"==typeof m||m instanceof RegExp||!!m&&"object"==typeof m&&n(m.listener)}(h))throw TypeError("listener must be a function");
var e;l=this.getListenersAsObject(l);var g="object"==typeof h;for(e in l)l.hasOwnProperty(e)&&-1===d(l[e],h)&&l[e].push(g?h:{listener:h,once:!1});return this};f.on=b("addListener");f.addOnceListener=function(l,h){return this.addListener(l,{listener:h,once:!0})};f.once=b("addOnceListener");f.defineEvent=function(l){return this.getListeners(l),this};f.defineEvents=function(l){for(var h=0;h<l.length;h+=1)this.defineEvent(l[h]);return this};f.removeListener=function(l,h){var e,g;l=this.getListenersAsObject(l);
for(g in l)l.hasOwnProperty(g)&&-1!==(e=d(l[g],h))&&l[g].splice(e,1);return this};f.off=b("removeListener");f.addListeners=function(l,h){return this.manipulateListeners(!1,l,h)};f.removeListeners=function(l,h){return this.manipulateListeners(!0,l,h)};f.manipulateListeners=function(l,h,e){var g,p,m=l?this.removeListener:this.addListener;l=l?this.removeListeners:this.addListeners;if("object"!=typeof h||h instanceof RegExp)for(g=e.length;g--;)m.call(this,h,e[g]);else for(g in h)h.hasOwnProperty(g)&&
(p=h[g])&&("function"==typeof p?m.call(this,g,p):l.call(this,g,p));return this};f.removeEvent=function(l){var h,e=void 0===l?"undefined":Vd(l),g=this._getEvents();if("string"===e)delete g[l];else if(l instanceof RegExp)for(h in g)g.hasOwnProperty(h)&&l.test(h)&&delete g[h];else delete this._events;return this};f.removeAllListeners=b("removeEvent");f.emitEvent=function(l,h){var e,g,p,m=this.getListenersAsObject(l);for(p in m)if(m.hasOwnProperty(p)){var n=0;for(e=m[p].slice(0);n<e.length;n++)!0===(g=
e[n]).once&&this.removeListener(l,g.listener),g.listener.apply(this,h||[])===this._getOnceReturnValue()&&this.removeListener(l,g.listener)}return this};f.trigger=b("emitEvent");f.emit=function(l){var h=Array.prototype.slice.call(arguments,1);return this.emitEvent(l,h)};f.setOnceReturnValue=function(l){return this._onceReturnValue=l,this};f._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue};f._getEvents=function(){return this._events||(this._events=
{})};c.noConflict=function(){return a.EventEmitter=k,c};"function"==typeof define&&define.amd?define(function(){return c}):Pc?Pc=c:a.EventEmitter=c}("undefined"!=typeof window?window:{});var lp=function(a){function c(b,f){var k;return Gb(this,c),(k=d.call(this)).layer=b,k.buffer=b.mask.getImageData(0,0,b.mask.width,b.mask.height),k.invalidRect=new Sa(0,0,0,0),k.prepareMask=f,k}dc(c,a);var d=ec(c);return Hb(c,[{key:"close",value:function(){this.layer=this.buffer=null;this.emitEvent("changeLayer")}},
{key:"setLayer",value:function(b){this.layer=b;this.invalidRect=b.getBounds();this.emitEvent("changeLayer")}},{key:"isOpen",value:function(){return null!=this.layer}},{key:"invalidateRect",value:function(b){this.invalidRect.union(b)}},{key:"getImageData",value:function(){this.prepareMask();if(!this.invalidRect.isEmpty()&&this.layer&&this.layer.mask){var b=this.buffer,f=this.layer.mask,k=this.invalidRect,l=k.top*f.width+k.left,h=l*I.BYTES_PER_PIXEL,e=k.getWidth();k=k.getHeight();for(var g=f.width-
e,p=g*I.BYTES_PER_PIXEL,m=0;m<k;m++,l+=g,h+=p)for(var n=0;n<e;n++,l++,h+=I.BYTES_PER_PIXEL)b.data[h+I.RED_BYTE_OFFSET]=f.data[l],b.data[h+I.GREEN_BYTE_OFFSET]=f.data[l],b.data[h+I.BLUE_BYTE_OFFSET]=f.data[l],b.data[h+I.ALPHA_BYTE_OFFSET]=255;this.invalidRect.makeEmpty()}return this.buffer}}]),c}(da(Pc)),pd=function(){function a(){Gb(this,a)}return Hb(a,[{key:"merge",value:function(c){return!1}},{key:"noChange",value:function(){return!1}},{key:"getMemoryUsed",value:function(c,d){return 0}},{key:"compact",
value:function(){}}]),a}();ac.prototype.getRgb=function(){return this.rgb};ac.prototype.getSaturation=function(){return this.saturation};ac.prototype.getHue=function(){return this.hue};ac.prototype.getValue=function(){return this.value};ac.prototype.setRgbComponents=function(a,c,d){this.setRgb(a<<16|c<<8|d)};ac.prototype.setRgb=function(a){this.rgb=a;var c=a>>16&255,d=a>>8&255;a&=255;this.value=Math.max(c,Math.max(d,a));var b=Math.min(c,Math.min(d,a));if(0==this.value?this.saturation=0:this.saturation=
~~((this.value-b)/this.value*255),0==this.saturation)this.hue=0;else{var f=(this.value-c)/(this.value-b),k=(this.value-d)/(this.value-b);b=(this.value-a)/(this.value-b);var l=0;this.value==c&&(l=b-k);this.value==d&&(l=2+f-b);this.value==a&&(l=4+k-f);0>(l*=60)&&(l+=360);this.hue=~~l}};ac.prototype.setHsv=function(a,c,d){this.hue=a;this.saturation=c;this.value=d;this.rgb=ch(this)};ac.prototype.setHue=function(a){this.hue=a;this.rgb=ch(this)};ac.prototype.setSaturation=function(a){this.saturation=a;
this.rgb=ch(this)};ac.prototype.setValue=function(a){this.value=a;this.rgb=ch(this)};ac.prototype.setGreyscale=function(a){this.rgb=ac.greyToRGB(a);this.saturation=this.hue=0;this.value=a};ac.prototype.clone=function(){var a=new ac(0);return a.copyFrom(this),a};ac.prototype.copyFrom=function(a){this.rgb=a.rgb;this.hue=a.hue;this.saturation=a.saturation;this.value=a.value};ac.prototype.isEqual=function(a){return this.rgb==a.rgb&&this.hue==a.hue&&this.saturation==a.saturation&&this.value==a.value};
ac.greyToRGB=function(a){return a|a<<8|a<<16};pc.prototype.setToIdentity=function(){this.m=[1,0,0,1,0,0]};pc.prototype.multiply=function(a){var c=this.m[1]*a.m[0]+this.m[3]*a.m[1],d=this.m[0]*a.m[2]+this.m[2]*a.m[3],b=this.m[1]*a.m[2]+this.m[3]*a.m[3],f=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],k=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];this.m[0]=this.m[0]*a.m[0]+this.m[2]*a.m[1];this.m[1]=c;this.m[2]=d;this.m[3]=b;this.m[4]=f;this.m[5]=k};pc.prototype.preMultiply=function(a){var c=a.m[1]*this.m[0]+
a.m[3]*this.m[1],d=a.m[0]*this.m[2]+a.m[2]*this.m[3],b=a.m[1]*this.m[2]+a.m[3]*this.m[3],f=a.m[0]*this.m[4]+a.m[2]*this.m[5]+a.m[4],k=a.m[1]*this.m[4]+a.m[3]*this.m[5]+a.m[5];this.m[0]=a.m[0]*this.m[0]+a.m[2]*this.m[1];this.m[1]=c;this.m[2]=d;this.m[3]=b;this.m[4]=f;this.m[5]=k};pc.prototype.invert=function(){var a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),c=-this.m[1]*a,d=-this.m[2]*a,b=this.m[0]*a,f=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),k=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=
this.m[3]*a;this.m[1]=c;this.m[2]=d;this.m[3]=b;this.m[4]=f;this.m[5]=k};pc.prototype.getInverted=function(){var a=new pc;return a.m[0]=this.m[0],a.m[1]=this.m[1],a.m[2]=this.m[2],a.m[3]=this.m[3],a.m[4]=this.m[4],a.m[5]=this.m[5],a.invert(),a};pc.prototype.rotate=function(a){var c=Math.cos(a);a=Math.sin(a);var d=this.m[1]*c+this.m[3]*a,b=-(this.m[0]*a)+this.m[2]*c,f=-(this.m[1]*a)+this.m[3]*c;this.m[0]=this.m[0]*c+this.m[2]*a;this.m[1]=d;this.m[2]=b;this.m[3]=f};pc.prototype.rotateAroundPoint=function(a,
c,d){this.translate(c,d);this.rotate(a);this.translate(-c,-d)};pc.prototype.translate=function(a,c){this.m[4]+=this.m[0]*a+this.m[2]*c;this.m[5]+=this.m[1]*a+this.m[3]*c};pc.prototype.scale=function(a,c){this.m[0]*=a;this.m[1]*=a;this.m[2]*=c;this.m[3]*=c};pc.prototype.scaleAroundPoint=function(a,c,d,b){this.translate(d,b);this.scale(a,c);this.translate(-d,-b)};pc.prototype.shear=function(a,c){var d=this.m[1]+this.m[3]*c,b=this.m[2]+this.m[0]*a;a=this.m[3]+this.m[1]*a;this.m[0]+=this.m[2]*c;this.m[1]=
d;this.m[2]=b;this.m[3]=a};pc.prototype.getTransformedPoint=function(a){return{x:a.x*this.m[0]+a.y*this.m[2]+this.m[4],y:a.x*this.m[1]+a.y*this.m[3]+this.m[5]}};pc.prototype.transformPoints=function(a){for(var c=0;c<a.length;c++)a[c]=this.getTransformedPoint(a[c])};pc.prototype.getTranslateX=function(){return this.m[4]};pc.prototype.getTranslateY=function(){return this.m[5]};pc.prototype.clone=function(){var a=new pc;return a.m[0]=this.m[0],a.m[1]=this.m[1],a.m[2]=this.m[2],a.m[3]=this.m[3],a.m[4]=
this.m[4],a.m[5]=this.m[5],a};pc.prototype.getDeterminant=function(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]};pc.prototype.decompose=function(){var a=this.getDeterminant(),c=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return{translate:{x:this.m[4],y:this.m[5]},rotate:Math.sign(this.m[1])*Math.acos(this.m[0]/c),scale:{x:c,y:a/c},shear:{x:Math.atan((this.m[0]*this.m[2]+this.m[1]*this.m[3])/(c*c)),y:0}}};pc.prototype.toString=function(){return"["+this.m[0].toFixed(2)+" "+this.m[2].toFixed(2)+
" "+this.m[4].toFixed(2)+"]\n["+this.m[1].toFixed(2)+" "+this.m[3].toFixed(2)+" "+this.m[5].toFixed(2)+"]\n[0.00 0.00 1.00]"};Math.sign=Math.sign||function(a){return 0==(a=+a)||isNaN(a)?a:0<a?1:-1};ue.prototype.toInt=function(){return Math.max(0,Math.min(255,Math.round(255*this.r)))<<16|Math.max(0,Math.min(255,Math.round(255*this.g)))<<8|Math.max(0,Math.min(255,Math.round(255*this.b)))};ue.prototype.mixWith=function(a,c){this.r=this.r*(1-c)+a.r*c;this.g=this.g*(1-c)+a.g*c;this.b=this.b*(1-c)+a.b*
c};ue.prototype.clone=function(){return new ue(this.r,this.g,this.b)};ue.createFromInt=function(a){return new ue((a>>>16&255)/255,(a>>>8&255)/255,(255&a)/255)};var If=function(){function a(c,d){Gb(this,a);this._strokeBuffer=c;this._strokedRegion=d;this.wantsOutputAsInput=!0}return Hb(a,[{key:"paintDab",value:function(c,d,b,f,k,l,h){c=Math.max(1,Math.ceil(l.alpha*f.alphaScale));switch(f.paintMode){case Ma.PAINT_MODE_FLOW:this._paintFlow(k,d,l.brush,l.width,c);break;case Ma.PAINT_MODE_OPACITY:this._paintOpacity(k,
d,l.brush,l.width,c)}}},{key:"mergeOntoImage",value:function(c,d,b){var f=this._strokeBuffer.data,k=this._strokedRegion;d=d.data;var l=c.data,h=b>>16&255,e=b>>8&255;b&=255;var g=0|k.getWidth(),p=0|k.getHeight(),m=this._strokeBuffer.offsetOfPixel(k.left,k.top);k=c.offsetOfPixel(k.left,k.top);var n=this._strokeBuffer.width-g|0;c=(c.width-g)*I.BYTES_PER_PIXEL|0;for(var r=0;r<p;r++,m+=n,k+=c)for(var u=0;u<g;u++,m++,k+=I.BYTES_PER_PIXEL){var w=f[m]/255+.5|0;if(0<w){var z=w+d[k+I.ALPHA_BYTE_OFFSET]*(255-
w)/255|0;w=255*w/z|0;var G=255-w;l[k]=(h*w+d[k]*G)/255&255;l[k+1]=(e*w+d[k+1]*G)/255&255;l[k+2]=(b*w+d[k+2]*G)/255&255;l[k+3]=z}}}},{key:"mergeOntoMask",value:function(c,d,b){var f=this._strokeBuffer.data,k=this._strokedRegion;d=d.data;var l=c.data,h=0|k.getWidth(),e=0|k.getHeight(),g=c.offsetOfPixel(k.left,k.top);k=this._strokeBuffer.offsetOfPixel(k.left,k.top);var p=this._strokeBuffer.width-h|0;c=c.width-h|0;for(var m=0;m<e;m++,k+=p,g+=c)for(var n=0;n<h;n++,k++,g++){var r=f[k]/255|0;0<r&&(l[g]=
(b*r+d[g]*(255-r))/255)}}},{key:"_paintFlow",value:function(c,d,b,f,k){var l=this._strokeBuffer.data;c=c.left+c.top*f;var h=this._strokeBuffer.offsetOfPixel(d.left,d.top),e=d.getHeight(),g=d.getWidth();f-=g;var p=this._strokeBuffer.width-g;this._strokedRegion.union(d);for(d=0;d<e;d++,c+=f,h+=p)for(var m=0;m<g;m++,c++,h++){var n=b[c]*k;0!=n&&(l[h]=Math.min(65025,l[h]+(255-l[h]/255)*n/255))}}},{key:"_paintOpacity",value:function(c,d,b,f,k){var l=this._strokeBuffer.data;c=c.left+c.top*f;var h=this._strokeBuffer.offsetOfPixel(d.left,
d.top),e=d.getWidth();f-=e;var g=this._strokeBuffer.width-e;k=Math.min(255,k);this._strokedRegion.union(d);for(var p=d.top;p<d.bottom;p++,c+=f,h+=g)for(var m=0;m<e;m++,c++,h++)l[h]=Math.max(b[c]*k,l[h])}},{key:"beginStroke",value:function(){}},{key:"endStroke",value:function(){}}]),a}(),mp=function(a){function c(){return Gb(this,c),d.apply(this,arguments)}dc(c,a);var d=ec(c);return Hb(c,[{key:"mergeOntoImage",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion;f=f.data;for(var h=
b.data,e=l.top;e<l.bottom;e++)for(var g=b.offsetOfPixel(l.left,e)+I.ALPHA_BYTE_OFFSET,p=this._strokeBuffer.offsetOfPixel(l.left,e),m=l.left;m<l.right;m++,g+=I.BYTES_PER_PIXEL){var n=k[p++]/255|0;0<n&&(h[g]=f[g]*(255-n)/255)}}}]),c}(If),np=function(a){function c(){return Gb(this,c),d.apply(this,arguments)}dc(c,a);var d=ec(c);return Hb(c,[{key:"mergeOntoImage",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion,h=l.getWidth(),e=l.getHeight(),g=b.offsetOfPixel(l.left,l.top);l=this._strokeBuffer.offsetOfPixel(l.left,
l.top);var p=(b.width-h)*I.BYTES_PER_PIXEL,m=this._strokeBuffer.width-h;f=f.data;b=b.data;for(var n=0;n<e;n++,l+=m,g+=p)for(var r=0;r<h;r++,l++,g+=I.BYTES_PER_PIXEL){var u=k[l]/255|0;0<u&&0!=f[g+I.ALPHA_BYTE_OFFSET]&&(u=(u+255)/255,b[g+I.RED_BYTE_OFFSET]=f[g+I.RED_BYTE_OFFSET]*u,b[g+I.GREEN_BYTE_OFFSET]=f[g+I.GREEN_BYTE_OFFSET]*u,b[g+I.BLUE_BYTE_OFFSET]=f[g+I.BLUE_BYTE_OFFSET]*u)}}},{key:"mergeOntoMask",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion,h=l.getWidth(),e=l.getHeight(),
g=b.offsetOfPixel(l.left,l.top);l=this._strokeBuffer.offsetOfPixel(l.left,l.top);var p=b.width-h,m=this._strokeBuffer.width-h;f=f.data;b=b.data;for(var n=0;n<e;n++,l+=m,g+=p)for(var r=0;r<h;r++,l++,g++){var u=k[l]/255|0;0<u&&(b[g]=Math.min((u+255)/255*f[g],255))}}}]),c}(If),op=function(a){function c(){return Gb(this,c),d.apply(this,arguments)}dc(c,a);var d=ec(c);return Hb(c,[{key:"mergeOntoImage",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion,h=l.getWidth(),e=l.getHeight(),
g=b.offsetOfPixel(l.left,l.top);l=this._strokeBuffer.offsetOfPixel(l.left,l.top);var p=(b.width-h)*I.BYTES_PER_PIXEL,m=this._strokeBuffer.width-h;f=f.data;b=b.data;for(var n=0;n<e;n++,l+=m,g+=p)for(var r=0;r<h;r++,l++,g+=I.BYTES_PER_PIXEL){var u=k[l]/255|0;0<u&&0!=f[g+I.ALPHA_BYTE_OFFSET]&&(b[g+I.RED_BYTE_OFFSET]=f[g+I.RED_BYTE_OFFSET]-(260-f[g+I.RED_BYTE_OFFSET])*u/255|0,b[g+I.GREEN_BYTE_OFFSET]=f[g+I.GREEN_BYTE_OFFSET]-(260-f[g+I.GREEN_BYTE_OFFSET])*u/255|0,b[g+I.BLUE_BYTE_OFFSET]=f[g+I.BLUE_BYTE_OFFSET]-
(260-f[g+I.BLUE_BYTE_OFFSET])*u/255|0)}}},{key:"mergeOntoMask",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion,h=l.getWidth(),e=l.getHeight(),g=b.offsetOfPixel(l.left,l.top);l=this._strokeBuffer.offsetOfPixel(l.left,l.top);var p=b.width-h,m=this._strokeBuffer.width-h;f=f.data;b=b.data;for(var n=0;n<e;n++,l+=m,g+=p)for(var r=0;r<h;r++,l++,g++){var u=k[l]/255|0;0<u&&(b[g]=Math.max(f[g]-(260-f[g])*u/255,0))}}}]),c}(If),qp=function(a){function c(){return Gb(this,c),d.apply(this,
arguments)}dc(c,a);var d=ec(c);return Hb(c,[{key:"mergeOntoImage",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion,h=f.data;b=b.data;var e=l.getWidth(),g=f.width*I.BYTES_PER_PIXEL,p=f.offsetOfPixel(l.left,l.top),m=this._strokeBuffer.offsetOfPixel(l.left,l.top),n=(f.width-e)*I.BYTES_PER_PIXEL;e=this._strokeBuffer.width-e;for(var r=function(W){L+=h[W+I.RED_BYTE_OFFSET];N+=h[W+I.GREEN_BYTE_OFFSET];M+=h[W+I.BLUE_BYTE_OFFSET];ca+=h[W+I.ALPHA_BYTE_OFFSET]},u=l.top;u<l.bottom;u++,
p+=n,m+=e)for(var w=l.left;w<l.right;w++,p+=I.BYTES_PER_PIXEL,m++){var z=k[m]/255|0;if(0<z){z=64+-63*z/255|0;var G=z+4;var L=z*h[p+I.RED_BYTE_OFFSET];var N=z*h[p+I.GREEN_BYTE_OFFSET];var M=z*h[p+I.BLUE_BYTE_OFFSET];var ca=z*h[p+I.ALPHA_BYTE_OFFSET];r(0<u?p-g:p);r(u<f.height-1?p+g:p);r(0<w?p-I.BYTES_PER_PIXEL:p);r(w<f.width-1?p+I.BYTES_PER_PIXEL:p);ca/=G;L/=G;N/=G;M/=G;b[p+I.RED_BYTE_OFFSET]=0|L;b[p+I.GREEN_BYTE_OFFSET]=0|N;b[p+I.BLUE_BYTE_OFFSET]=0|M;b[p+I.ALPHA_BYTE_OFFSET]=0|ca}}}},{key:"mergeOntoMask",
value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion,h=f.data;b=b.data;var e=l.getWidth(),g=f.width,p=f.offsetOfPixel(l.left,l.top),m=this._strokeBuffer.offsetOfPixel(l.left,l.top),n=f.width-e;e=this._strokeBuffer.width-e;for(var r=l.top;r<l.bottom;r++,p+=n,m+=e)for(var u=l.left;u<l.right;u++,p++,m++){var w=k[m]/255|0;if(0<w){var z=64+-63*w/255|0;w=z+4;z=z*h[p]+h[0<r?p-g:p]+h[r<f.height-1?p+g:p]+h[0<u?p-1:p]+h[u<f.width-1?p+1:p];b[p]=z/w|0}}}}]),c}(If),al=function(a){function c(){return Gb(this,
c),d.apply(this,arguments)}dc(c,a);var d=ec(c);return Hb(c,[{key:"mergeOntoImage",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion;f=f.data;var h=b.data,e=this._strokeBuffer.offsetOfPixel(l.left,l.top),g=b.offsetOfPixel(l.left,l.top),p=0|l.getWidth();l=0|l.getHeight();var m=this._strokeBuffer.width-p|0;b=(b.width-p)*I.BYTES_PER_PIXEL|0;for(var n=0;n<l;n++,e+=m,g+=b)for(var r=0;r<p;r++,e++,g+=I.BYTES_PER_PIXEL){var u=k[e],w=u>>>24;if(0<w){var z=f[g+I.ALPHA_BYTE_OFFSET];z=w+
z-w*z/255|0;w=255*w/z|0;var G=255-w;h[g]=((u>>16&255)*w+f[g]*G)/255|0;h[g+1]=((u>>8&255)*w+f[g+1]*G)/255|0;h[g+2]=((255&u)*w+f[g+2]*G)/255|0;h[g+3]=z}}}},{key:"mergeOntoMask",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion;f=f.data;var h=b.data,e=this._strokeBuffer.offsetOfPixel(l.left,l.top),g=b.offsetOfPixel(l.left,l.top),p=0|l.getWidth();l=0|l.getHeight();var m=this._strokeBuffer.width-p|0;b=b.width-p|0;for(var n=0;n<l;n++,e+=m,g+=b)for(var r=0;r<p;r++,e++,g++){var u=
k[e],w=u>>8;0<w&&(h[g]=((255&u)*w+f[g]*(255-w))/255|0)}}}]),c}(If),Qo=2/6,pp=function(a){function c(b,f){var k;return Gb(this,c),(k=d.call(this,b,f)).wantsOutputAsInput=!0,k}dc(c,a);var d=ec(c);return Hb(c,[{key:"_paintToColorStrokeBuffer",value:function(b,f,k,l,h,e){var g=this._strokeBuffer.data,p=f.getWidth(),m=f.getHeight(),n=this._strokeBuffer.width-p,r=l-p;b=b.left+b.top*l;l=this._strokeBuffer.offsetOfPixel(f.left,f.top);this._strokedRegion.union(f);for(f=0;f<m;f++,b+=r,l+=n)for(var u=0;u<p;u++,
b++,l++){var w=k[b]*h/255|0;if(0<w){var z=g[l],G=z>>>24;G=w+G-w*G/255|0;w=255-(255*w/G|0);g[l]=G<<24|(e>>16&255)+((z>>16&255)*w-(e>>16&255)*w)/255<<16|(e>>8&255)+((z>>8&255)*w-(e>>8&255)*w)/255<<8|(255&e)+((255&z)*w-(255&e)*w)/255}}}},{key:"_paintToGreyscaleStrokeBuffer",value:function(b,f,k,l,h,e){var g=this._strokeBuffer.data;this._strokedRegion.union(f);for(var p=f.top,m=b.top;p<f.bottom;p++,m++)for(var n=b.left+m*l,r=this._strokeBuffer.offsetOfPixel(f.left,p),u=f.left;u<f.right;u++,n++,r++){var w=
k[n]*h/255|0;if(!(0>=w)){var z=g[r],G=z>>8;G=w+G-w*G/255|0;0<G&&(w=255-(255*w/G|0),g[r]=G<<8|e+((255&z)*w-e*w)/255)}}}},{key:"beginStroke",value:function(){this._previousSamples=null}},{key:"paintDab",value:function(b,f,k,l,h,e,g){b=Math.max(1,e.alpha/4);var p=(f.left+f.right)/2,m=(f.top+f.bottom)/2,n=Math.max(1,Math.min(64,f.getWidth()*Qo)),r=Math.max(1,Math.min(64,f.getHeight()*Qo));if(k instanceof ob){null==this._previousSamples&&(this._previousSamples=Array(50),this._previousSamples.fill(c._sampleGrey(k,
p,m,n,r)));var u,w,z,G=ml(this._previousSamples);g=z=G=G*(1-(u=l.resat*l.resat))+(255&g)*u;k=c._sampleGrey(k,p,m,n,r);G=g*(1-(w=l.bleed))+k*w;this._previousSamples.push(G);this._previousSamples.shift();this._paintToGreyscaleStrokeBuffer(h,f,e.brush,e.width,b,Math.round(z))}else null==this._previousSamples&&(this._previousSamples=Array(50),this._previousSamples.fill(c._sampleRGB(k,p,m,n,r))),w=nl(this._previousSamples),w.mixWith(ue.createFromInt(g),l.resat*l.resat),g=w.toInt(),w.mixWith(c._sampleRGB(k,
p,m,n,r),l.bleed),this._previousSamples.push(w),this._previousSamples.shift(),this._paintToColorStrokeBuffer(h,f,e.brush,e.width,b,g)}}],[{key:"_sampleGrey",value:function(b,f,k,l,h){for(var e=[{x:f|=0,y:k|=0}],g=.25;1.001>g;g+=.25)Array.prototype.push.apply(e,[{x:~~(f+g*l),y:k},{x:~~(f-g*l),y:k},{x:f,y:~~(k+g*h)},{x:f,y:~~(k-g*h)},{x:~~(f+.7*g*l),y:~~(k+.7*g*h)},{x:~~(f+.7*g*l),y:~~(k-.7*g*h)},{x:~~(f-.7*g*l),y:~~(k+.7*g*h)},{x:~~(f-.7*g*l),y:~~(k-.7*g*h)}]);return ml(e.map(function(p){return b.getPixel(p.x,
p.y)}))}},{key:"_sampleRGB",value:function(b,f,k,l,h){for(var e=[{x:f|=0,y:k|=0}],g=.25;1.001>g;g+=.25)Array.prototype.push.apply(e,[{x:~~(f+g*l),y:k},{x:~~(f-g*l),y:k},{x:f,y:~~(k+g*h)},{x:f,y:~~(k-g*h)},{x:~~(f+.7*g*l),y:~~(k+.7*g*h)},{x:~~(f+.7*g*l),y:~~(k-.7*g*h)},{x:~~(f-.7*g*l),y:~~(k+.7*g*h)},{x:~~(f-.7*g*l),y:~~(k-.7*g*h)}]);return nl(e.map(function(p){return ue.createFromInt(b.getPixel(p.x,p.y))}))}}]),c}(al),sp=function(a){function c(b,f){var k;return Gb(this,c),(k=d.call(this,b,f)).wantsOutputAsInput=
!0,k}dc(c,a);var d=ec(c);return Hb(c,[{key:"_accumulatePaintFromMask",value:function(b,f,k,l){var h=this._brushBuffer.data,e=b.data,g=k.getWidth(),p=k.getHeight();f=f.left+f.top*this._brushBuffer.width;k=b.offsetOfPixel(k.left,k.top);var m=this._brushBuffer.width-g;b=b.width-g;if(!(0>=l))for(var n=0;n<p;n++,f+=m,k+=b)for(var r=0;r<g;r++,f++,k++){var u=e[k],w=h[f],z=w>>8;z=l+z-l*z/255|0;var G=255-(255*l/z|0);h[f]=z<<8|u+((255&w)*G-u*G)/255}}},{key:"_resaturateBrushWithGrey",value:function(b,f,k){if(!(0>=
f)){var l=this._brushBuffer.data,h=b.getWidth(),e=b.getHeight();b=b.left+b.top*this._brushBuffer.width;for(var g=this._brushBuffer.width-h,p=0;p<e;p++,b+=g)for(var m=0;m<h;m++,b++){var n=l[b],r=n>>8;r=f+r-f*r/255|0;var u=255-(255*f/r|0);l[b]=r<<8|k+((255&n)*u-k*u)/255}}}},{key:"_paintToGreyscaleStrokeBuffer",value:function(b,f,k,l,h){var e=this._strokeBuffer.data,g=this._brushBuffer.data,p=b.data;this._strokedRegion.union(k);for(var m=k.top,n=f.top;m<k.bottom;m++,n++)for(var r=this._brushBuffer.offsetOfPixel(f.left,
n),u=this._strokeBuffer.offsetOfPixel(k.left,m),w=b.offsetOfPixel(k.left,m),z=k.left;z<k.right;z++,r++,w++,u++){var G=g[r],L=(G>>8)*l[r]*h/65025|0;0<L&&(L=255-L,e[u]=65280|(255&G)+(p[w]*L-(255&G)*L)/255)}}},{key:"_accumulatePaintFromImage",value:function(b,f,k,l){var h=this._brushBuffer.data,e=b.data,g=k.getWidth(),p=k.getHeight();f=f.left+f.top*this._brushBuffer.width;k=b.offsetOfPixel(k.left,k.top);var m=this._brushBuffer.width-g;b=(b.width-g)*I.BYTES_PER_PIXEL;for(var n=0;n<p;n++,f+=m,k+=b)for(var r=
0;r<g;r++,f++,k+=I.BYTES_PER_PIXEL){var u=e[k+I.ALPHA_BYTE_OFFSET]*l/255|0;if(0<u){var w=h[f],z=w>>>24;z=u+z-u*z/255|0;u=255-(255*u/z|0);var G=e[k+I.RED_BYTE_OFFSET],L=e[k+I.GREEN_BYTE_OFFSET],N=e[k+I.BLUE_BYTE_OFFSET];h[f]=z<<24|G+((w>>16&255)*u-G*u)/255<<16|L+((w>>8&255)*u-L*u)/255<<8|N+((255&w)*u-N*u)/255}}}},{key:"_resaturateBrushWithColor",value:function(b,f,k){if(!(0>=f)){var l=this._brushBuffer.data,h=b.getWidth(),e=b.getHeight();b=b.left+b.top*this._brushBuffer.width;for(var g=this._brushBuffer.width-
h,p=0;p<e;p++,b+=g)for(var m=0;m<h;m++,b++){var n=l[b],r=n>>>24;r=f+r-f*r/255|0;var u=255-(255*f/r|0);l[b]=r<<24|(k>>>16&255)+((n>>>16&255)*u-(k>>>16&255)*u)/255<<16|(k>>>8&255)+((n>>>8&255)*u-(k>>>8&255)*u)/255<<8|(255&k)+((255&n)*u-(255&k)*u)/255}}}},{key:"_paintToColorStrokeBuffer",value:function(b,f,k,l,h){var e=this._strokeBuffer.data,g=this._brushBuffer.data,p=b.data;this._strokedRegion.union(k);for(var m=k.top,n=f.top;m<k.bottom;m++,n++)for(var r=this._brushBuffer.offsetOfPixel(f.left,n),u=
this._strokeBuffer.offsetOfPixel(k.left,m),w=b.offsetOfPixel(k.left,m),z=k.left;z<k.right;z++,r++,w+=I.BYTES_PER_PIXEL,u++){var G=g[r],L=(G>>>24)*l[r]*h/65025|0;if(0<L){var N=p[w+I.ALPHA_BYTE_OFFSET];N=L+N-L*N/255|0;L=255-(255*L/N|0);e[u]=N<<24|(G>>16&255)+(p[w+I.RED_BYTE_OFFSET]*L-(G>>16&255)*L)/255<<16|(G>>8&255)+(p[w+I.GREEN_BYTE_OFFSET]*L-(G>>8&255)*L)/255<<8|(255&G)+(p[w+I.BLUE_BYTE_OFFSET]*L-(255&G)*L)/255}}}},{key:"paintDab",value:function(b,f,k,l,h,e,g){b instanceof I?null==this._brushBuffer?
(this._brushBuffer=new ob(e.width,e.height,32),this._accumulatePaintFromImage(k,h,f,255)):(this._resaturateBrushWithColor(h,~~(0>=l.resat?0:Math.max(1,l.resat*l.resat*255)),16777215&g),this._paintToColorStrokeBuffer(b,h,f,e.brush,e.alpha),this._accumulatePaintFromImage(k,h,f,~~(255*l.bleed))):null==this._brushBuffer?(this._brushBuffer=new ob(e.width,e.height,16),this._accumulatePaintFromMask(k,h,f,255)):(this._resaturateBrushWithGrey(h,~~(0>=l.resat?0:Math.max(1,l.resat*l.resat*255)),255&g),this._paintToGreyscaleStrokeBuffer(b,
h,f,e.brush,e.alpha),this._accumulatePaintFromMask(k,h,f,~~(255*l.bleed)))}},{key:"endStroke",value:function(){this._brushBuffer=null}}]),c}(al),rp=function(a){function c(b,f){var k;return Gb(this,c),(k=d.call(this,b,f))._brushBuffer=null,k.wantsOutputAsInput=!0,k.noMergePhase=!0,k}dc(c,a);var d=ec(c);return Hb(c,[{key:"_sampleFromMask",value:function(b,f,k,l){var h=this._brushBuffer.data,e=f.getWidth(),g=f.getHeight(),p=this._brushBuffer.offsetOfPixel(f.left,f.top);k=b.offsetOfPixel(k.left,k.top);
var m=this._brushBuffer.width-e,n=b.width-e,r=255-l;if(255!=l){for(var u=0;u<g;u++,p+=m,k+=n)for(var w=0;w<e;w++,p++,k++){var z=b.data[k],G=h[p],L=(z*r+(255&G)*l)/255,N=(255*r+(G>>8)*l)/255<<8|L;N==G&&(z>L?N++:z<L&&N--);h[p]=N}ol(this._brushBuffer,f)}}},{key:"_paintToMask",value:function(b,f,k,l){var h=f.getWidth(),e=f.getHeight();f=this._brushBuffer.offsetOfPixel(f.left,f.top);k=b.offsetOfPixel(k.left,k.top);var g=this._brushBuffer.width-h,p=b.width-h;b=b.data;for(var m=this._brushBuffer.data,n=
0;n<e;n++,k+=p,f+=g)for(var r=0;r<h;r++,f++,k++){var u=m[f],w=255&u;0<((u>>8)*l[f]/255|0)&&(b[k]=w)}}},{key:"_sampleFromImage",value:function(b,f,k,l){var h=this._brushBuffer.data,e=f.getWidth(),g=f.getHeight(),p=this._brushBuffer.offsetOfPixel(f.left,f.top);k=b.offsetOfPixel(k.left,k.top);var m=this._brushBuffer.width-e,n=(b.width-e)*I.BYTES_PER_PIXEL,r=255-l;if(255!=l){for(var u=0;u<g;u++,p+=m,k+=n)for(var w=0;w<e;w++,p++,k+=I.BYTES_PER_PIXEL){var z=b.data[k+I.RED_BYTE_OFFSET],G=b.data[k+I.GREEN_BYTE_OFFSET],
L=b.data[k+I.BLUE_BYTE_OFFSET],N=h[p],M=(b.data[k+I.ALPHA_BYTE_OFFSET]*r+(N>>24&255)*l)/255<<24&4278190080|(z*r+(N>>16&255)*l)/255<<16&16711680|(G*r+(N>>8&255)*l)/255<<8&65280|(L*r+(255&N)*l)/255&255;if(M==N){N=(16711680&M)>>16;var ca=(65280&M)>>8,W=255&M;z>N?M+=65536:z<N&&(M-=65536);G>ca?M+=256:G<ca&&(M-=256);L>W?M+=1:L<W&&--M}h[p]=M}ol(this._brushBuffer,f)}}},{key:"_paintToImage",value:function(b,f,k,l){var h=f.getWidth(),e=f.getHeight();f=this._brushBuffer.offsetOfPixel(f.left,f.top);k=b.offsetOfPixel(k.left,
k.top);var g=this._brushBuffer.width-h,p=(b.width-h)*I.BYTES_PER_PIXEL;b=b.data;for(var m=this._brushBuffer.data,n=0;n<e;n++,k+=p,f+=g)for(var r=0;r<h;r++,f++,k+=I.BYTES_PER_PIXEL){var u=m[f];0<((u>>>24)*l[f]/255|0)&&(b[k+I.RED_BYTE_OFFSET]=u>>16&255,b[k+I.GREEN_BYTE_OFFSET]=u>>8&255,b[k+I.BLUE_BYTE_OFFSET]=255&u,b[k+I.ALPHA_BYTE_OFFSET]=u>>24&255)}}},{key:"paintDab",value:function(b,f,k,l,h,e,g){b instanceof I?null==this._brushBuffer?(this._brushBuffer=new ob(e.width,e.height,32),this._sampleFromImage(k,
h,f,0)):(this._sampleFromImage(k,h,f,e.alpha),this._paintToImage(b,h,f,e.brush)):null==this._brushBuffer?(this._brushBuffer=new ob(e.width,e.height,16),this._sampleFromMask(k,h,f,0)):(this._sampleFromMask(k,h,f,e.alpha),this._paintToMask(b,h,f,e.brush))}},{key:"mergeOntoImage",value:function(b,f,k){}},{key:"mergeOntoMask",value:function(b,f,k){}},{key:"beginStroke",value:function(){this._brushBuffer=null}},{key:"endStroke",value:function(){this._brushBuffer=null}}]),c}(al);ud.prototype=Object.create(da(Pc).prototype);
ud.prototype.constructor=ud;ud.prototype.getBounds=function(){return new Sa(0,0,this.width,this.height)};ud.prototype.isPointWithin=function(a,c){return 0<=a&&0<=c&&a<this.width&&c<this.height};ud.EDITING_MODE_IMAGE=0;ud.EDITING_MODE_MASK=1;Qb.prototype.readChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos++]):(this.eof=!0,-1)};Qb.prototype.readByte=function(){return this.pos<this.end?this.data[this.pos++]:(this.eof=!0,-1)};Qb.prototype.readU8=Qb.prototype.readByte;Qb.prototype.readS8=
function(){var a;return 128&(a=this.readByte())?4294967040|a:a};Qb.prototype.unreadChar=function(a){this.pos--};Qb.prototype.peekChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos]):(this.eof=!0,-1)};Qb.prototype.readString=function(a){var c,d=Array(a);for(c=0;c<a;c++)d[c]=this.readChar();return d.join("")};Qb.prototype.readS16=function(){var a;return 32768&(a=this.readByte()<<8|this.readByte())?4294901760|a:a};Qb.prototype.readU16BE=function(){return this.readByte()<<
8|this.readByte()};Qb.prototype.readU16LE=function(){var a=this.readByte();return this.readByte()<<8|a};Qb.prototype.readU32BE=function(){return(this.readByte()<<24|this.readByte()<<16|this.readByte()<<8|this.readByte())>>>0};Qb.prototype.readU32LE=function(){var a=this.readByte(),c=this.readByte(),d=this.readByte();return(this.readByte()<<24|d<<16|c<<8|a)>>>0};Qb.prototype.readBytes=function(a){var c=this.data.subarray(this.pos,this.pos+a);return this.pos+=a,this.pos>this.end&&(this.eof=!0),c};Qb.prototype.skip=
function(a){this.pos+=a;this.pos>this.end&&(this.eof=!0)};Qb.prototype.seek=function(a){this.pos=a};Qb.prototype.writeBytes=function(a){for(var c=0;c<a.length;c++)this.data[this.pos++]=a[c]};Qb.prototype.writeByte=function(a){this.data[this.pos++]=a};Qb.prototype.writeU8=Qb.prototype.writeByte;Qb.prototype.writeU16LE=function(a){this.data[this.pos++]=a;this.data[this.pos++]=a>>8};Qb.prototype.writeU16BE=function(a){this.data[this.pos++]=a>>8;this.data[this.pos++]=a};Qb.prototype.writeU32BE=function(a){this.data[this.pos++]=
a>>24;this.data[this.pos++]=a>>16;this.data[this.pos++]=a>>8;this.data[this.pos++]=a};Qb.prototype.writeU32LE=function(a){this.data[this.pos++]=a;this.data[this.pos++]=a>>8;this.data[this.pos++]=a>>16;this.data[this.pos++]=a>>24};Qb.prototype.writeDoubleBE=function(a){a=new Uint8Array((new Float64Array([a])).buffer);for(var c=a.length-1;0<=c;c--)this.writeByte(a[c])};Qb.prototype.writeFloatBE=function(a){a=new Uint8Array((new Float32Array([a])).buffer);for(var c=a.length-1;0<=c;c--)this.writeByte(a[c])};
Qb.prototype.writeString=function(a){for(var c=0;c<a.length;c++)this.data[this.pos++]=a.charCodeAt(c)};Qb.prototype.writeUnsignedIntBE=function(a,c){switch(void 0===c&&(c=this.measureUnsignedInt(a)),c){case 5:this.writeU8(Math.floor(a/4294967296));case 4:this.writeU8(a>>24);case 3:this.writeU8(a>>16);case 2:this.writeU8(a>>8);case 1:this.writeU8(a);break;default:throw"Bad UINT size "+c;}};Qb.prototype.measureUnsignedInt=function(a){return 256>a?1:65536>a?2:16777216>a?3:4294967296>a?4:5};Qb.prototype.getAsDataArray=
function(){if(this.pos<this.data.byteLength)return this.data.subarray(0,this.pos);if(this.pos==this.data.byteLength)return this.data;throw"ArrayDataStream's pos lies beyond end of buffer";};Qb.prototype.EOF=-1;var Ti={},ib={},Ps="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;ib.assign=function(a){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if("object"!=typeof d)throw TypeError(d+"must be non-object");for(var b in d)Object.prototype.hasOwnProperty.call(d,
b)&&(a[b]=d[b])}}return a};ib.shrinkBuf=function(a,c){return a.length===c?a:a.subarray?a.subarray(0,c):(a.length=c,a)};var Qs={arraySet:function(a,c,d,b,f){if(c.subarray&&a.subarray)a.set(c.subarray(d,d+b),f);else for(var k=0;k<b;k++)a[f+k]=c[d+k]},flattenChunks:function(a){var c,d;var b=c=0;for(d=a.length;c<d;c++)b+=a[c].length;c=0;var f=new Uint8Array(b);b=0;for(d=a.length;c<d;c++){var k=a[c];f.set(k,b);b+=k.length}return f}},Rs={arraySet:function(a,c,d,b,f){for(var k=0;k<b;k++)a[f+k]=c[d+k]},flattenChunks:function(a){return[].concat.apply([],
a)}};ib.setTyped=function(a){a?(ib.Buf8=Uint8Array,ib.Buf16=Uint16Array,ib.Buf32=Int32Array,ib.assign(ib,Qs)):(ib.Buf8=Array,ib.Buf16=Array,ib.Buf32=Array,ib.assign(ib,Rs))};ib.setTyped(Ps);var Ss=ib.assign,Zg={};Ke(Zg,"Deflate",function(){return Ro},function(a){return Ro=a});Ke(Zg,"deflate",function(){return So},function(a){return So=a});Ke(Zg,"deflateRaw",function(){return To},function(a){return To=a});Ke(Zg,"gzip",function(){return Uo},function(a){return Uo=a});var Ji=[0,0,0,0,0,0,0,0,1,1,1,1,
2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],eh=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ts=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Vo=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ie=Array(576);Jf(Ie);var $g=Array(60);Jf($g);var pg=Array(512);Jf(pg);var rg=Array(256);Jf(rg);var Ki=Array(29);Jf(Ki);var fh=Array(30);Jf(fh);var Wo=!1;var vp=function(a){if(!Wo){var c,d,b=Array(16);for(c=d=0;28>d;d++){var f=0;for(Ki[d]=c;f<1<<Ji[d];f++)rg[c++]=d}rg[c-1]=d;for(d=c=0;16>d;d++)for(f=
0,fh[d]=c;f<1<<eh[d];f++)pg[c++]=d;for(c>>=7;30>d;d++)for(f=0,fh[d]=c<<7;f<1<<eh[d]-7;f++)pg[256+c++]=d;for(f=0;15>=f;f++)b[f]=0;for(f=0;143>=f;)Ie[2*f+1]=8,f++,b[8]++;for(;255>=f;)Ie[2*f+1]=9,f++,b[9]++;for(;279>=f;)Ie[2*f+1]=7,f++,b[7]++;for(;287>=f;)Ie[2*f+1]=8,f++,b[8]++;sl(Ie,287,b);for(f=0;30>f;f++)$g[2*f+1]=5,$g[2*f]=rl(f,5);bm=new Gi(Ie,Ji,257,286,15);cm=new Gi($g,eh,0,30,15);dm=new Gi([],Ts,0,19,7);Wo=!0}a.l_desc=new Hi(a.dyn_ltree,bm);a.d_desc=new Hi(a.dyn_dtree,cm);a.bl_desc=new Hi(a.bl_tree,
dm);a.bi_buf=0;a.bi_valid=0;tl(a)};var tp=function(a,c,d,b){var f,k,l=0;0<a.level?(2===a.strm.data_type&&(a.strm.data_type=function(h){var e,g=4093624447;for(e=0;31>=e;e++,g>>>=1)if(1&g&&0!==h.dyn_ltree[2*e])return 0;if(0!==h.dyn_ltree[18]||0!==h.dyn_ltree[20]||0!==h.dyn_ltree[26])return 1;for(e=32;256>e;e++)if(0!==h.dyn_ltree[2*e])return 1;return 0}(a)),Li(a,a.l_desc),Li(a,a.d_desc),l=function(h){var e;xl(h,h.dyn_ltree,h.l_desc.max_code);xl(h,h.dyn_dtree,h.d_desc.max_code);Li(h,h.bl_desc);for(e=
18;3<=e&&0===h.bl_tree[2*Vo[e]+1];e--);return h.opt_len+=3*(e+1)+14,e}(a),f=a.opt_len+3+7>>>3,(k=a.static_len+3+7>>>3)<=f&&(f=k)):f=k=d+5;d+4<=f&&-1!==c?zl(a,c,d,b):4===a.strategy||k===f?(vd(a,2+(b?1:0),3),wl(a,Ie,$g)):(vd(a,4+(b?1:0),3),function(h,e,g,p){var m;vd(h,e-257,5);vd(h,g-1,5);vd(h,p-4,4);for(m=0;m<p;m++)vd(h,h.bl_tree[2*Vo[m]+1],3);yl(h,h.dyn_ltree,e-1);yl(h,h.dyn_dtree,g-1)}(a,a.l_desc.max_code+1,a.d_desc.max_code+1,l+1),wl(a,a.dyn_ltree,a.dyn_dtree));tl(a);b&&ul(a)};var Pe=function(a,
c,d){return a.pending_buf[a.d_buf+2*a.last_lit]=c>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&c,a.pending_buf[a.l_buf+a.last_lit]=255&d,a.last_lit++,0===c?a.dyn_ltree[2*d]++:(a.matches++,c--,a.dyn_ltree[2*(rg[d]+256+1)]++,a.dyn_dtree[2*ql(c)]++),a.last_lit===a.lit_bufsize-1};var Us=function(a){vd(a,2,3);ge(a,256,Ie);16===a.bi_valid?(qg(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)};var Kf={};Kf=function(a,c,d,b){var f=
65535&a|0;a=a>>>16&65535|0;for(var k;0!==d;){k=2E3<d?2E3:d;d-=k;do a=a+(f=f+c[b++]|0)|0;while(--k);f%=65521;a%=65521}return f|a<<16|0};var Tc={},Vs=function(){for(var a,c=[],d=0;256>d;d++){a=d;for(var b=0;8>b;b++)a=1&a?3988292384^a>>>1:a>>>1;c[d]=a}return c}();Tc=function(a,c,d,b){d=b+d;for(a^=-1;b<d;b++)a=a>>>8^Vs[(a^c[b])&255];return-1^a};var jf={};jf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};
var tg=[new he(0,0,0,0,function(a,c){var d=65535;for(65535>a.pending_buf_size-5&&(d=a.pending_buf_size-5);;){if(1>=a.lookahead){if(kf(a),0===a.lookahead&&0===c)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead;a.lookahead=0;var b=a.block_start+d;if((0===a.strstart||a.strstart>=b)&&(a.lookahead=a.strstart-b,a.strstart=b,cd(a,!1),0===a.strm.avail_out)||a.strstart-a.block_start>=a.w_size-262&&(cd(a,!1),0===a.strm.avail_out))return 1}return(a.insert=0,4===c)?(cd(a,!0),0===a.strm.avail_out)?3:
4:(a.strstart>a.block_start&&(cd(a,!1),a.strm.avail_out),1)}),new he(4,4,8,4,Mi),new he(4,5,16,8,Mi),new he(4,6,32,32,Mi),new he(4,4,16,16,Lf),new he(8,16,32,32,Lf),new he(8,16,128,128,Lf),new he(8,32,128,256,Lf),new he(32,128,258,1024,Lf),new he(32,258,258,4096,Lf)];var wp=function(a,c){return a&&a.state&&2===a.state.wrap?(a.state.gzhead=c,0):-2};var Ws=function(a,c){if(!a||!a.state||5<c||0>c)return a?Me(a,-2):-2;if(b=a.state,!a.output||!a.input&&0!==a.avail_in||666===b.status&&4!==c)return Me(a,
0===a.avail_out?-5:-2);if(b.strm=a,d=b.last_flush,b.last_flush=c,42===b.status)if(2===b.wrap)a.adler=0,gc(b,31),gc(b,139),gc(b,8),b.gzhead?(gc(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),gc(b,255&b.gzhead.time),gc(b,b.gzhead.time>>8&255),gc(b,b.gzhead.time>>16&255),gc(b,b.gzhead.time>>24&255),gc(b,9===b.level?2:2<=b.strategy||2>b.level?4:0),gc(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(gc(b,255&b.gzhead.extra.length),
gc(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(a.adler=Tc(a.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(gc(b,0),gc(b,0),gc(b,0),gc(b,0),gc(b,0),gc(b,9===b.level?2:2<=b.strategy||2>b.level?4:0),gc(b,3),b.status=113);else{var d,b;var f=8+(b.w_bits-8<<4)<<8;f|=(2<=b.strategy||2>b.level?0:6>b.level?1:6===b.level?2:3)<<6;0!==b.strstart&&(f|=32);b.status=113;sg(b,f+(31-f%31));0!==b.strstart&&(sg(b,a.adler>>>16),sg(b,65535&a.adler));a.adler=1}if(69===b.status)if(b.gzhead.extra){for(f=
b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>f&&(a.adler=Tc(a.adler,b.pending_buf,b.pending-f,f)),Oe(a),f=b.pending,b.pending!==b.pending_buf_size));)gc(b,255&b.gzhead.extra[b.gzindex]),b.gzindex++;b.gzhead.hcrc&&b.pending>f&&(a.adler=Tc(a.adler,b.pending_buf,b.pending-f,f));b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(73===b.status)if(b.gzhead.name){f=b.pending;do{if(b.pending===b.pending_buf_size&&
(b.gzhead.hcrc&&b.pending>f&&(a.adler=Tc(a.adler,b.pending_buf,b.pending-f,f)),Oe(a),f=b.pending,b.pending===b.pending_buf_size)){var k=1;break}k=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0;gc(b,k)}while(0!==k);b.gzhead.hcrc&&b.pending>f&&(a.adler=Tc(a.adler,b.pending_buf,b.pending-f,f));0===k&&(b.gzindex=0,b.status=91)}else b.status=91;if(91===b.status)if(b.gzhead.comment){f=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>f&&(a.adler=Tc(a.adler,
b.pending_buf,b.pending-f,f)),Oe(a),f=b.pending,b.pending===b.pending_buf_size)){k=1;break}k=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0;gc(b,k)}while(0!==k);b.gzhead.hcrc&&b.pending>f&&(a.adler=Tc(a.adler,b.pending_buf,b.pending-f,f));0===k&&(b.status=103)}else b.status=103;if(103===b.status&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&Oe(a),b.pending+2<=b.pending_buf_size&&(gc(b,255&a.adler),gc(b,a.adler>>8&255),a.adler=0,b.status=113)):b.status=113),0!==
b.pending){if(Oe(a),0===a.avail_out)return b.last_flush=-1,0}else if(0===a.avail_in&&(c<<1)-(4<c?9:0)<=(d<<1)-(4<d?9:0)&&4!==c)return Me(a,-5);if(666===b.status&&0!==a.avail_in)return Me(a,-5);if(0!==a.avail_in||0!==b.lookahead||0!==c&&666!==b.status){d=2===b.strategy?function(l,h){for(var e;;){if(0===l.lookahead&&(kf(l),0===l.lookahead)){if(0===h)return 1;break}if(l.match_length=0,e=Pe(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++,e&&(cd(l,!1),0===l.strm.avail_out))return 1}return(l.insert=
0,4===h)?(cd(l,!0),0===l.strm.avail_out)?3:4:l.last_lit&&(cd(l,!1),0===l.strm.avail_out)?1:2}(b,c):3===b.strategy?function(l,h){for(var e,g,p,m,n=l.window;;){if(258>=l.lookahead){if(kf(l),258>=l.lookahead&&0===h)return 1;if(0===l.lookahead)break}if(l.match_length=0,3<=l.lookahead&&0<l.strstart&&(g=n[p=l.strstart-1])===n[++p]&&g===n[++p]&&g===n[++p]){for(m=l.strstart+258;g===n[++p]&&g===n[++p]&&g===n[++p]&&g===n[++p]&&g===n[++p]&&g===n[++p]&&g===n[++p]&&g===n[++p]&&p<m;);l.match_length=258-(m-p);l.match_length>
l.lookahead&&(l.match_length=l.lookahead)}if(3<=l.match_length?(e=Pe(l,1,l.match_length-3),l.lookahead-=l.match_length,l.strstart+=l.match_length,l.match_length=0):(e=Pe(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++),e&&(cd(l,!1),0===l.strm.avail_out))return 1}return(l.insert=0,4===h)?(cd(l,!0),0===l.strm.avail_out)?3:4:l.last_lit&&(cd(l,!1),0===l.strm.avail_out)?1:2}(b,c):tg[b.level].func(b,c);if((3===d||4===d)&&(b.status=666),1===d||3===d)return 0===a.avail_out&&(b.last_flush=-1),0;if(2===
d&&(1===c?Us(b):5!==c&&(zl(b,0,0,!1),3===c&&(Ne(b.head),0===b.lookahead&&(b.strstart=0,b.block_start=0,b.insert=0))),Oe(a),0===a.avail_out))return b.last_flush=-1,0}return 4!==c?0:0>=b.wrap?1:(2===b.wrap?(gc(b,255&a.adler),gc(b,a.adler>>8&255),gc(b,a.adler>>16&255),gc(b,a.adler>>24&255),gc(b,255&a.total_in),gc(b,a.total_in>>8&255),gc(b,a.total_in>>16&255),gc(b,a.total_in>>24&255)):(sg(b,a.adler>>>16),sg(b,65535&a.adler)),Oe(a),0<b.wrap&&(b.wrap=-b.wrap),0!==b.pending?0:1)};var Xs=function(a){var c;
return a&&a.state?42!==(c=a.state.status)&&69!==c&&73!==c&&91!==c&&103!==c&&113!==c&&666!==c?Me(a,-2):(a.state=null,113===c?Me(a,-3):0):-2};var xp=function(a,c){var d,b,f;var k=c.length;if(!a||!a.state||2===(b=(d=a.state).wrap)||1===b&&42!==d.status||d.lookahead)return-2;1===b&&(a.adler=Kf(a.adler,c,k,0));d.wrap=0;k>=d.w_size&&(0===b&&(Ne(d.head),d.strstart=0,d.block_start=0,d.insert=0),f=new ib.Buf8(d.w_size),ib.arraySet(f,c,k-d.w_size,d.w_size,0),c=f,k=d.w_size);f=a.avail_in;var l=a.next_in;var h=
a.input;a.avail_in=k;a.next_in=0;a.input=c;for(kf(d);3<=d.lookahead;){c=d.strstart;k=d.lookahead-2;do d.ins_h=(d.ins_h<<d.hash_shift^d.window[c+3-1])&d.hash_mask,d.prev[c&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=c,c++;while(--k);d.strstart=c;d.lookahead=2;kf(d)}return d.strstart+=d.lookahead,d.block_start=d.strstart,d.insert=d.lookahead,d.lookahead=0,d.match_length=d.prev_length=2,d.match_available=0,a.next_in=l,a.input=h,a.avail_in=f,d.wrap=b,0};var Dl=!0,Cl=!0;try{String.fromCharCode.apply(null,
[0])}catch(a){Dl=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){Cl=!1}for(var ah=new ib.Buf8(256),gf=0;256>gf;gf++)ah[gf]=252<=gf?6:248<=gf?5:240<=gf?4:224<=gf?3:192<=gf?2:1;ah[254]=ah[254]=1;var Oi=function(a){var c,d,b,f=a.length,k=0;for(b=0;b<f;b++)55296==(64512&(c=a.charCodeAt(b)))&&b+1<f&&56320==(64512&(d=a.charCodeAt(b+1)))&&(c=65536+(c-55296<<10)+(d-56320),b++),k+=128>c?1:2048>c?2:65536>c?3:4;var l=0;var h=new ib.Buf8(k);for(b=0;l<k;b++)55296==(64512&(c=a.charCodeAt(b)))&&
b+1<f&&56320==(64512&(d=a.charCodeAt(b+1)))&&(c=65536+(c-55296<<10)+(d-56320),b++),128>c?h[l++]=c:(2048>c?h[l++]=192|c>>>6:(65536>c?h[l++]=224|c>>>12:(h[l++]=240|c>>>18,h[l++]=128|c>>>12&63),h[l++]=128|c>>>6&63),h[l++]=128|63&c);return h};var Ys=function(a){return Bl(a,a.length)};var Zs=function(a){for(var c=new ib.Buf8(a.length),d=0,b=c.length;d<b;d++)c[d]=a.charCodeAt(d);return c};var $s=function(a,c){var d,b,f,k=c||a.length,l=Array(2*k);for(c=d=0;c<k;)if(128>(b=a[c++]))l[d++]=b;else if(4<(f=ah[b]))l[d++]=
65533,c+=f-1;else{for(b&=2===f?31:3===f?15:7;1<f&&c<k;)b=b<<6|63&a[c++],f--;1<f?l[d++]=65533:65536>b?l[d++]=b:(b-=65536,l[d++]=55296|b>>10&1023,l[d++]=56320|1023&b)}return Bl(l,d)};var at=function(a,c){var d;(c=c||a.length)>a.length&&(c=a.length);for(d=c-1;0<=d&&128==(192&a[d]);)d--;return 0>d||0===d?c:d+ah[a[d]]>c?d:c};var Ni={};Ni=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=
2;this.adler=0};var El=Object.prototype.toString;lf.prototype.push=function(a,c){var d,b=this.strm,f=this.options.chunkSize;if(this.ended)return!1;c=c===~~c?c:!0===c?4:0;"string"==typeof a?b.input=Oi(a):"[object ArrayBuffer]"===El.call(a)?b.input=new Uint8Array(a):b.input=a;b.next_in=0;b.avail_in=b.input.length;do{if(0===b.avail_out&&(b.output=new ib.Buf8(f),b.next_out=0,b.avail_out=f),1!==(d=Ws(b,c))&&0!==d)return this.onEnd(d),this.ended=!0,!1;(0===b.avail_out||0===b.avail_in&&(4===c||2===c))&&
("string"===this.options.to?this.onData(Ys(ib.shrinkBuf(b.output,b.next_out))):this.onData(ib.shrinkBuf(b.output,b.next_out)))}while((0<b.avail_in||0===b.avail_out)&&1!==d);return 4===c?(d=Xs(this.strm),this.onEnd(d),this.ended=!0,0===d):(2===c&&(this.onEnd(0),b.avail_out=0),!0)};lf.prototype.onData=function(a){this.chunks.push(a)};lf.prototype.onEnd=function(a){0===a&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ib.flattenChunks(this.chunks));this.chunks=[];this.err=a;
this.msg=this.strm.msg};var Ro=lf;var So=Pi;var To=function(a,c){return(c=c||{}).raw=!0,Pi(a,c)};var Uo=function(a,c){return(c=c||{}).gzip=!0,Pi(a,c)};var bh={};Ke(bh,"Inflate",function(){return Xo},function(a){return Xo=a});Ke(bh,"inflate",function(){return Yo},function(a){return Yo=a});Ke(bh,"inflateRaw",function(){return Zo},function(a){return Zo=a});Ke(bh,"ungzip",function(){return $o},function(a){return $o=a});var ap={};ap=function(a,c){var d,b,f,k;var l=a.state;var h=a.next_in;var e=a.input;
var g=h+(a.avail_in-5);var p=a.next_out;var m=a.output;c=p-(c-a.avail_out);var n=p+(a.avail_out-257);var r=l.dmax;var u=l.wsize;var w=l.whave;var z=l.wnext;var G=l.window;var L=l.hold;var N=l.bits;var M=l.lencode;var ca=l.distcode;var W=(1<<l.lenbits)-1;var ka=(1<<l.distbits)-1;a:do for(15>N&&(L+=e[h++]<<N,N+=8,L+=e[h++]<<N,N+=8),d=M[L&W];;){if(L>>>=b=d>>>24,N-=b,0==(b=d>>>16&255))m[p++]=65535&d;else if(16&b){var ea=65535&d;(b&=15)&&(N<b&&(L+=e[h++]<<N,N+=8),ea+=L&(1<<b)-1,L>>>=b,N-=b);15>N&&(L+=
e[h++]<<N,N+=8,L+=e[h++]<<N,N+=8);for(d=ca[L&ka];;){if(L>>>=b=d>>>24,N-=b,16&(b=d>>>16&255)){if(f=65535&d,N<(b&=15)&&(L+=e[h++]<<N,(N+=8)<b&&(L+=e[h++]<<N,N+=8)),(f+=L&(1<<b)-1)>r){a.msg="invalid distance too far back";l.mode=30;break a}if(L>>>=b,N-=b,f>(b=p-c)){if((b=f-b)>w&&l.sane){a.msg="invalid distance too far back";l.mode=30;break a}if(d=0,k=G,0===z){if(d+=u-b,b<ea){ea-=b;do m[p++]=G[d++];while(--b);d=p-f;k=m}}else if(z<b){if(d+=u+z-b,(b-=z)<ea){ea-=b;do m[p++]=G[d++];while(--b);if(d=0,z<ea){ea-=
b=z;do m[p++]=G[d++];while(--b);d=p-f;k=m}}}else if(d+=z-b,b<ea){ea-=b;do m[p++]=G[d++];while(--b);d=p-f;k=m}for(;2<ea;)m[p++]=k[d++],m[p++]=k[d++],m[p++]=k[d++],ea-=3;ea&&(m[p++]=k[d++],1<ea&&(m[p++]=k[d++]))}else{d=p-f;do m[p++]=m[d++],m[p++]=m[d++],m[p++]=m[d++],ea-=3;while(2<ea);ea&&(m[p++]=m[d++],1<ea&&(m[p++]=m[d++]))}}else if(0==(64&b)){d=ca[(65535&d)+(L&(1<<b)-1)];continue}else{a.msg="invalid distance code";l.mode=30;break a}break}}else if(0==(64&b)){d=M[(65535&d)+(L&(1<<b)-1)];continue}else{32&
b?l.mode=12:(a.msg="invalid literal/length code",l.mode=30);break a}break}while(h<g&&p<n);h-=ea=N>>3;N-=ea<<3;a.next_in=h;a.next_out=p;a.avail_in=h<g?5+(g-h):5-(h-g);a.avail_out=p<n?257+(n-p):257-(p-n);l.hold=L&(1<<N)-1;l.bits=N};var ng={},bt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ct=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,
1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],et=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];ng=function(a,c,d,b,f,k,l,h){var e,g,p,m,n,r,u=h.bits,w,z,G,L,N,M=0,ca,W=null,ka=0,ea=new ib.Buf16(16);var ma=new ib.Buf16(16);var Ca=null,Ja=0;for(w=0;15>=w;w++)ea[w]=0;for(z=0;z<b;z++)ea[c[d+z]]++;var Ha=15;for(G=u;1<=Ha&&0===ea[Ha];Ha--);if(G>Ha&&(G=Ha),0===Ha)return f[k++]=20971520,f[k++]=20971520,h.bits=1,0;for(u=1;u<Ha&&0===ea[u];u++);G<u&&
(G=u);for(w=e=1;15>=w;w++)if(e<<=1,0>(e-=ea[w]))return-1;if(0<e&&(0===a||1!==Ha))return-1;w=1;for(ma[1]=0;15>w;w++)ma[w+1]=ma[w]+ea[w];for(z=0;z<b;z++)0!==c[d+z]&&(l[ma[c[d+z]]++]=z);if(0===a?(W=Ca=l,m=19):1===a?(W=bt,ka-=257,Ca=ct,Ja-=257,m=256):(W=dt,Ca=et,m=-1),ca=0,z=0,w=u,ma=k,L=G,N=0,p=-1,b=(M=1<<G)-1,1===a&&852<M||2===a&&592<M)return 1;for(;;){var V=w-N;l[z]<m?(n=0,r=l[z]):l[z]>m?(n=Ca[Ja+l[z]],r=W[ka+l[z]]):(n=96,r=0);e=1<<w-N;u=g=1<<L;do f[ma+(ca>>N)+(g-=e)]=V<<24|n<<16|r|0;while(0!==g);
for(e=1<<w-1;ca&e;)e>>=1;if(0!==e?(ca&=e-1,ca+=e):ca=0,z++,0==--ea[w]){if(w===Ha)break;w=c[d+l[z]]}if(w>G&&(ca&b)!==p){0===N&&(N=G);ma+=u;for(e=1<<(L=w-N);L+N<Ha&&!(0>=(e-=ea[L+N]));)L++,e<<=1;if(M+=1<<L,1===a&&852<M||2===a&&592<M)return 1;f[p=ca&b]=G<<24|L<<16|ma-k|0}}return 0!==ca&&(f[ma+ca]=w-N<<24|4194304),h.bits=G,0};var bp=!0;var ft=function(a,c){var d,b,f,k,l,h,e,g,p=0,m=new ib.Buf8(4),n=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;
12===(d=a.state).mode&&(d.mode=13);var r=a.next_out;var u=a.output;var w=a.avail_out;var z=a.next_in;var G=a.input;var L=a.avail_in;var N=d.hold;var M=d.bits;var ca=L;var W=w;var ka=0;a:for(;;)switch(d.mode){case 1:if(0===d.wrap){d.mode=13;break}for(;16>M;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}if(2&d.wrap&&35615===N){d.check=0;m[0]=255&N;m[1]=N>>>8&255;d.check=Tc(d.check,m,2,0);M=N=0;d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&N)<<8)+(N>>8))%31){a.msg="incorrect header check";
d.mode=30;break}if(8!=(15&N)){a.msg="unknown compression method";d.mode=30;break}if(N>>>=4,M-=4,e=(15&N)+8,0===d.wbits)d.wbits=e;else if(e>d.wbits){a.msg="invalid window size";d.mode=30;break}d.dmax=1<<e;a.adler=d.check=1;d.mode=512&N?10:12;M=N=0;break;case 2:for(;16>M;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}if(d.flags=N,8!=(255&d.flags)){a.msg="unknown compression method";d.mode=30;break}if(57344&d.flags){a.msg="unknown header flags set";d.mode=30;break}d.head&&(d.head.text=N>>8&1);512&d.flags&&
(m[0]=255&N,m[1]=N>>>8&255,d.check=Tc(d.check,m,2,0));M=N=0;d.mode=3;case 3:for(;32>M;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}d.head&&(d.head.time=N);512&d.flags&&(m[0]=255&N,m[1]=N>>>8&255,m[2]=N>>>16&255,m[3]=N>>>24&255,d.check=Tc(d.check,m,4,0));M=N=0;d.mode=4;case 4:for(;16>M;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}d.head&&(d.head.xflags=255&N,d.head.os=N>>8);512&d.flags&&(m[0]=255&N,m[1]=N>>>8&255,d.check=Tc(d.check,m,2,0));M=N=0;d.mode=5;case 5:if(1024&d.flags){for(;16>M;){if(0===L)break a;
L--;N+=G[z++]<<M;M+=8}d.length=N;d.head&&(d.head.extra_len=N);512&d.flags&&(m[0]=255&N,m[1]=N>>>8&255,d.check=Tc(d.check,m,2,0));M=N=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&((b=d.length)>L&&(b=L),b&&(d.head&&(e=d.head.extra_len-d.length,d.head.extra||(d.head.extra=Array(d.head.extra_len)),ib.arraySet(d.head.extra,G,z,b,e)),512&d.flags&&(d.check=Tc(d.check,G,b,z)),L-=b,z+=b,d.length-=b),d.length))break a;d.length=0;d.mode=7;case 7:if(2048&d.flags){if(0===L)break a;b=0;do e=
G[z+b++],d.head&&e&&65536>d.length&&(d.head.name+=String.fromCharCode(e));while(e&&b<L);if(512&d.flags&&(d.check=Tc(d.check,G,b,z)),L-=b,z+=b,e)break a}else d.head&&(d.head.name=null);d.length=0;d.mode=8;case 8:if(4096&d.flags){if(0===L)break a;b=0;do e=G[z+b++],d.head&&e&&65536>d.length&&(d.head.comment+=String.fromCharCode(e));while(e&&b<L);if(512&d.flags&&(d.check=Tc(d.check,G,b,z)),L-=b,z+=b,e)break a}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;16>M;){if(0===L)break a;
L--;N+=G[z++]<<M;M+=8}if(N!==(65535&d.check)){a.msg="header crc mismatch";d.mode=30;break}M=N=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0);a.adler=d.check=0;d.mode=12;break;case 10:for(;32>M;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}a.adler=d.check=Fl(N);M=N=0;d.mode=11;case 11:if(0===d.havedict)return a.next_out=r,a.avail_out=w,a.next_in=z,a.avail_in=L,d.hold=N,d.bits=M,2;a.adler=d.check=1;d.mode=12;case 12:if(5===c||6===c)break a;case 13:if(d.last){N>>>=7&M;M-=7&M;d.mode=27;break}for(;3>M;){if(0===
L)break a;L--;N+=G[z++]<<M;M+=8}switch(d.last=1&N,--M,3&(N>>>=1)){case 0:d.mode=14;break;case 1:var ea=d;if(bp){dj=new ib.Buf32(512);ej=new ib.Buf32(32);for(k=0;144>k;)ea.lens[k++]=8;for(;256>k;)ea.lens[k++]=9;for(;280>k;)ea.lens[k++]=7;for(;288>k;)ea.lens[k++]=8;ng(1,ea.lens,0,288,dj,0,ea.work,{bits:9});for(k=0;32>k;)ea.lens[k++]=5;ng(2,ea.lens,0,32,ej,0,ea.work,{bits:5});bp=!1}ea.lencode=dj;ea.lenbits=9;ea.distcode=ej;ea.distbits=5;if(d.mode=20,6===c){N>>>=2;M-=2;break a}break;case 2:d.mode=17;
break;case 3:a.msg="invalid block type",d.mode=30}N>>>=2;M-=2;break;case 14:N>>>=7&M;for(M-=7&M;32>M;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}if((65535&N)!=(N>>>16^65535)){a.msg="invalid stored block lengths";d.mode=30;break}if(d.length=65535&N,N=0,M=0,d.mode=15,6===c)break a;case 15:d.mode=16;case 16:if(b=d.length){if(b>L&&(b=L),b>w&&(b=w),0===b)break a;ib.arraySet(u,G,z,b,r);L-=b;z+=b;w-=b;r+=b;d.length-=b;break}d.mode=12;break;case 17:for(;14>M;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}if(d.nlen=
(31&N)+257,N>>>=5,M-=5,d.ndist=(31&N)+1,N>>>=5,M-=5,d.ncode=(15&N)+4,N>>>=4,M-=4,286<d.nlen||30<d.ndist){a.msg="too many length or distance symbols";d.mode=30;break}d.have=0;d.mode=18;case 18:for(;d.have<d.ncode;){for(;3>M;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}d.lens[n[d.have++]]=7&N;N>>>=3;M-=3}for(;19>d.have;)d.lens[n[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,g={bits:d.lenbits},ka=ng(0,d.lens,0,19,d.lencode,0,d.work,g),d.lenbits=g.bits,ka){a.msg="invalid code lengths set";d.mode=30;break}d.have=
0;d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;l=(p=d.lencode[N&(1<<d.lenbits)-1])>>>24,ea=65535&p,!(l<=M);){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}if(16>ea)N>>>=l,M-=l,d.lens[d.have++]=ea;else{if(16===ea){for(k=l+2;M<k;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}if(N>>>=l,M-=l,0===d.have){a.msg="invalid bit length repeat";d.mode=30;break}e=d.lens[d.have-1];b=3+(3&N);N>>>=2;M-=2}else if(17===ea){for(k=l+3;M<k;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}N>>>=l;M-=l;e=0;b=3+(7&N);N>>>=3;M-=3}else{for(k=
l+7;M<k;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}N>>>=l;M-=l;e=0;b=11+(127&N);N>>>=7;M-=7}if(d.have+b>d.nlen+d.ndist){a.msg="invalid bit length repeat";d.mode=30;break}for(;b--;)d.lens[d.have++]=e}}if(30===d.mode)break;if(0===d.lens[256]){a.msg="invalid code -- missing end-of-block";d.mode=30;break}if(d.lenbits=9,g={bits:d.lenbits},ka=ng(1,d.lens,0,d.nlen,d.lencode,0,d.work,g),d.lenbits=g.bits,ka){a.msg="invalid literal/lengths set";d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,g={bits:d.distbits},
ka=ng(2,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,g),d.distbits=g.bits,ka){a.msg="invalid distances set";d.mode=30;break}if(d.mode=20,6===c)break a;case 20:d.mode=21;case 21:if(6<=L&&258<=w){a.next_out=r;a.avail_out=w;a.next_in=z;a.avail_in=L;d.hold=N;d.bits=M;ap(a,W);r=a.next_out;u=a.output;w=a.avail_out;z=a.next_in;G=a.input;L=a.avail_in;N=d.hold;M=d.bits;12===d.mode&&(d.back=-1);break}for(d.back=0;l=(p=d.lencode[N&(1<<d.lenbits)-1])>>>24,k=p>>>16&255,ea=65535&p,!(l<=M);){if(0===L)break a;L--;N+=
G[z++]<<M;M+=8}if(k&&0==(240&k)){var ma=l;var Ca=k;for(h=ea;l=(p=d.lencode[h+((N&(1<<ma+Ca)-1)>>ma)])>>>24,k=p>>>16&255,ea=65535&p,!(ma+l<=M);){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}N>>>=ma;M-=ma;d.back+=ma}if(N>>>=l,M-=l,d.back+=l,d.length=ea,0===k){d.mode=26;break}if(32&k){d.back=-1;d.mode=12;break}if(64&k){a.msg="invalid literal/length code";d.mode=30;break}d.extra=15&k;d.mode=22;case 22:if(d.extra){for(k=d.extra;M<k;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}d.length+=N&(1<<d.extra)-1;N>>>=d.extra;
M-=d.extra;d.back+=d.extra}d.was=d.length;d.mode=23;case 23:for(;l=(p=d.distcode[N&(1<<d.distbits)-1])>>>24,k=p>>>16&255,ea=65535&p,!(l<=M);){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}if(0==(240&k)){ma=l;Ca=k;for(h=ea;l=(p=d.distcode[h+((N&(1<<ma+Ca)-1)>>ma)])>>>24,k=p>>>16&255,ea=65535&p,!(ma+l<=M);){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}N>>>=ma;M-=ma;d.back+=ma}if(N>>>=l,M-=l,d.back+=l,64&k){a.msg="invalid distance code";d.mode=30;break}d.offset=ea;d.extra=15&k;d.mode=24;case 24:if(d.extra){for(k=
d.extra;M<k;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}d.offset+=N&(1<<d.extra)-1;N>>>=d.extra;M-=d.extra;d.back+=d.extra}if(d.offset>d.dmax){a.msg="invalid distance too far back";d.mode=30;break}d.mode=25;case 25:if(0===w)break a;if(b=W-w,d.offset>b){if((b=d.offset-b)>d.whave&&d.sane){a.msg="invalid distance too far back";d.mode=30;break}b>d.wnext?(b-=d.wnext,f=d.wsize-b):f=d.wnext-b;b>d.length&&(b=d.length);k=d.window}else k=u,f=r-d.offset,b=d.length;b>w&&(b=w);w-=b;d.length-=b;do u[r++]=k[f++];while(--b);
0===d.length&&(d.mode=21);break;case 26:if(0===w)break a;u[r++]=d.length;w--;d.mode=21;break;case 27:if(d.wrap){for(;32>M;){if(0===L)break a;L--;N|=G[z++]<<M;M+=8}if(W-=w,a.total_out+=W,d.total+=W,W&&(a.adler=d.check=d.flags?Tc(d.check,u,W,r-W):Kf(d.check,u,W,r-W)),W=w,(d.flags?N:Fl(N))!==d.check){a.msg="incorrect data check";d.mode=30;break}M=N=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;32>M;){if(0===L)break a;L--;N+=G[z++]<<M;M+=8}if(N!==(4294967295&d.total)){a.msg="incorrect length check";d.mode=
30;break}M=N=0}d.mode=29;case 29:ka=1;break a;case 30:ka=-3;break a;case 31:return-4;default:return-2}return(a.next_out=r,a.avail_out=w,a.next_in=z,a.avail_in=L,d.hold=N,d.bits=M,(d.wsize||W!==a.avail_out&&30>d.mode&&(27>d.mode||4!==c))&&Gl(a,a.output,a.next_out,W-a.avail_out))?(d.mode=31,-4):(ca-=a.avail_in,W-=a.avail_out,a.total_in+=ca,a.total_out+=W,d.total+=W,d.wrap&&W&&(a.adler=d.check=d.flags?Tc(d.check,u,W,a.next_out-W):Kf(d.check,u,W,a.next_out-W)),a.data_type=d.bits+(d.last?64:0)+(12===d.mode?
128:0)+(20===d.mode||15===d.mode?256:0),(0===ca&&0===W||4===c)&&0===ka&&(ka=-5),ka)};var gt=function(a){if(!a||!a.state)return-2;var c=a.state;return c.window&&(c.window=null),a.state=null,0};var zp=function(a,c){var d;return a&&a.state&&0!=(2&(d=a.state).wrap)?(d.head=c,c.done=!1,0):-2};var Jl=function(a,c){var d,b=c.length;return a&&a.state&&(0===(d=a.state).wrap||11===d.mode)?11===d.mode&&Kf(1,c,b,0)!==d.check?-3:Gl(a,c,b,b)?(d.mode=31,-4):(d.havedict=1,0):-2};var Fc={};Fc={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,
Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var Hl={};Hl=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1};
var Il=Object.prototype.toString;mf.prototype.push=function(a,c){var d,b,f,k,l=this.strm,h=this.options.chunkSize,e=this.options.dictionary,g=!1;if(this.ended)return!1;c=c===~~c?c:!0===c?Fc.Z_FINISH:Fc.Z_NO_FLUSH;"string"==typeof a?l.input=Zs(a):"[object ArrayBuffer]"===Il.call(a)?l.input=new Uint8Array(a):l.input=a;l.next_in=0;l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new ib.Buf8(h),l.next_out=0,l.avail_out=h),(d=ft(l,Fc.Z_NO_FLUSH))===Fc.Z_NEED_DICT&&e&&(d=Jl(this.strm,e)),d===
Fc.Z_BUF_ERROR&&!0===g&&(d=Fc.Z_OK,g=!1),d!==Fc.Z_STREAM_END&&d!==Fc.Z_OK)return this.onEnd(d),this.ended=!0,!1;l.next_out&&(0===l.avail_out||d===Fc.Z_STREAM_END||0===l.avail_in&&(c===Fc.Z_FINISH||c===Fc.Z_SYNC_FLUSH))&&("string"===this.options.to?(b=at(l.output,l.next_out),f=l.next_out-b,k=$s(l.output,b),l.next_out=f,l.avail_out=h-f,f&&ib.arraySet(l.output,l.output,b,f,0),this.onData(k)):this.onData(ib.shrinkBuf(l.output,l.next_out)));0===l.avail_in&&0===l.avail_out&&(g=!0)}while((0<l.avail_in||
0===l.avail_out)&&d!==Fc.Z_STREAM_END);return(d===Fc.Z_STREAM_END&&(c=Fc.Z_FINISH),c===Fc.Z_FINISH)?(d=gt(this.strm),this.onEnd(d),this.ended=!0,d===Fc.Z_OK):(c===Fc.Z_SYNC_FLUSH&&(this.onEnd(Fc.Z_OK),l.avail_out=0),!0)};mf.prototype.onData=function(a){this.chunks.push(a)};mf.prototype.onEnd=function(a){a===Fc.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ib.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var Xo=mf;var Yo=Qi;var Zo=function(a,
c){return(c=c||{}).raw=!0,Qi(a,c)};var $o=Qi;var cp={};Ss(cp,Zg,bh,Fc);Ti=cp;Ri.FIXED_HEADER_LENGTH=16;gh.HEADER_LENGTH=8;var dp=function(){function a(c,d,b){Gb(this,a);this.chunkHeader=c;this.width=d;this.height=b;this.nameLength=this.skipBytes=this.payloadOffset=this.state=0;this.done=!1;this.maskDecoder=this.colorDecoder=null}return Hb(a,[{key:"readFixedHeader",value:function(c){this.payloadOffset=c.readU32BE();this.blendMode=c.readU32BE();this.alpha=c.readU32BE();var d=c.readU32BE();this.visible=
0!=(1&d);this.clip=0!=(2&d);this.hasMask=0!=(4&d);this.maskLinked=0!=(8&d);this.maskVisible=0!=(16&d);this.expanded=0!=(32&d);this.lockAlpha=0!=(64&d);this.blendMode===T.LM_MULTIPLY&&0!=(128&d)&&(this.blendMode=T.LM_MULTIPLY2);this.nameLength=c.readU32BE()}},{key:"getFixedHeaderLen",value:function(){return 20}},{key:"getVariableHeaderLen",value:function(){return this.nameLength}},{key:"readVariableSizeHeader",value:function(c){this.name=c.readString(this.nameLength)}},{key:"decode",value:function(c){for(var d;;){if(0<
this.skipBytes){if(this.skipBytes>=c.length)return this.skipBytes-=c.length,null;c=c.subarray(this.skipBytes);this.skipBytes=0}switch(this.state){case 0:if(c.length<this.getFixedHeaderLen())break;d=new Qb(c);this.readFixedHeader(d);c=c.subarray(d.pos);this.state=1;continue;case 1:if(c.length<this.getVariableHeaderLen())break;d=new Qb(c);this.readVariableSizeHeader(d);this.layer=this.createLayer();this.hasMask&&(this.layer.setMask(new ob(this.width,this.height,8)),this.maskDecoder=new ht(this.layer.mask));
this.layer instanceof Wa&&(this.colorDecoder=new it(this.layer.image));this.skipBytes=this.payloadOffset-this.getFixedHeaderLen();this.colorDecoder?this.state=3:this.maskDecoder?this.state=4:this.state=5;continue;case 3:if(c=this.colorDecoder.decode(c),this.colorDecoder.done){this.maskDecoder?this.state=4:this.state=5;continue}break;case 4:if(c=this.maskDecoder.decode(c),this.maskDecoder.done){this.state=5;continue}break;case 5:d=this.payloadOffset;this.colorDecoder&&(d+=this.colorDecoder.bytesTotal);
this.maskDecoder&&(d+=this.maskDecoder.bytesTotal);this.state=6;this.skipBytes=this.chunkHeader.chunkSize-d;continue;case 6:this.done=!0}break}return c}}]),a}(),Ap=function(a){function c(){return Gb(this,c),d.apply(this,arguments)}dc(c,a);var d=ec(c);return Hb(c,[{key:"createLayer",value:function(){var b=new Wa(this.width,this.height,this.name);return b.setBlendMode(this.blendMode),b.setAlpha(this.alpha),b.setVisible(this.visible),b.setClip(this.clip),b.setMaskLinked(this.maskLinked),b.setMaskVisible(this.maskVisible),
b.setLockAlpha(this.lockAlpha),b}}]),c}(dp),Bp=function(a){function c(b,f,k){var l;return Gb(this,c),(l=d.call(this,b,f,k)).childLayers=0,l}dc(c,a);var d=ec(c);return Hb(c,[{key:"readFixedHeader",value:function(b){hd(Sc(c.prototype),"readFixedHeader",this).call(this,b);this.childLayers=b.readU32BE()}},{key:"getFixedHeaderLen",value:function(){return hd(Sc(c.prototype),"getFixedHeaderLen",this).call(this)+4}},{key:"createLayer",value:function(){var b=new Ib(this.name,this.blendMode);return b.setAlpha(this.alpha),
b.setVisible(this.visible),b.setExpanded(this.expanded),b.setMaskLinked(this.maskLinked),b.setMaskVisible(this.maskVisible),b}}]),c}(dp),it=function(){function a(c){Gb(this,a);this.bytesRead=0;this.bytesTotal=c.width*c.height*I.BYTES_PER_PIXEL;this.output=c.data;this.done=!1}return Hb(a,[{key:"decode",value:function(c){if(null==c)return null;for(var d=this.bytesRead%I.BYTES_PER_PIXEL,b=this.bytesRead-d,f=0,k=[I.ALPHA_BYTE_OFFSET,I.RED_BYTE_OFFSET,I.GREEN_BYTE_OFFSET,I.BLUE_BYTE_OFFSET];d<I.BYTES_PER_PIXEL&&
f<c.length;d++)this.output[b+k[d]]=c[f],f++;this.bytesRead+=f;var l=0|Math.min(c.length-f,this.bytesTotal-this.bytesRead);d=l/I.BYTES_PER_PIXEL|0;l%=I.BYTES_PER_PIXEL;for(b=0;b<d;b++)this.output[this.bytesRead+I.ALPHA_BYTE_OFFSET]=c[f],this.output[this.bytesRead+I.RED_BYTE_OFFSET]=c[f+1],this.output[this.bytesRead+I.GREEN_BYTE_OFFSET]=c[f+2],this.output[this.bytesRead+I.BLUE_BYTE_OFFSET]=c[f+3],this.bytesRead+=I.BYTES_PER_PIXEL,f+=I.BYTES_PER_PIXEL;d=0;for(b=this.bytesRead;d<l;d++)this.output[b+k[d]]=
c[f],f++;return(this.bytesRead+=l,this.bytesRead>=this.bytesTotal&&(this.done=!0),f<c.length)?c.subarray(f):null}}]),a}(),ht=function(){function a(c){Gb(this,a);this.bytesRead=0;this.bytesTotal=c.width*c.height;this.output=c.data;this.done=!1}return Hb(a,[{key:"decode",value:function(c){if(null==c)return null;var d,b=0|Math.min(c.length,this.bytesTotal-this.bytesRead),f=this.bytesRead;for(d=0;d<b;d++,f++)this.output[f]=c[d];return(this.bytesRead=f,this.bytesRead>=this.bytesTotal&&(this.done=!0),d<
c.length)?c.subarray(d):null}}]),a}();Mf.prototype.read=function(a){if(null==a)return null;var c=new Qb(new Uint8Array(a)),d=[];if(1!=c.readU16BE())return null;a=c.readU16BE();for(var b=0;b<a;b++)if(0==c.readU16BE()){var f=255*c.readU16BE()/65535,k=255*c.readU16BE()/65535,l=255*c.readU16BE()/65535;c.readU16BE();d.push(f<<16|k<<8|l)}return d};Mf.prototype.write=function(a){var c=new Qb(new Uint8Array(4+10*a.length));c.writeU16BE(1);c.writeU16BE(a.length);for(var d=0;d<a.length;d++){var b=a[d];c.writeU16BE(0);
c.writeU16BE(257*(b>>16&255));c.writeU16BE(257*(b>>8&255));c.writeU16BE(257*(255&b));c.writeU16BE(0)}return c.getAsDataArray()};hh.prototype=Object.create(da(Pc).prototype);hh.prototype.constructor=hh;var vg={};var ep=function(){function a(l,h,e){var g=new XMLHttpRequest;g.open("GET",l);g.responseType="blob";g.onload=function(){k(g.response,h,e)};g.onerror=function(){console.error("could not download file")};g.send()}function c(l){var h=new XMLHttpRequest;h.open("HEAD",l,!1);try{h.send()}catch(e){}return 200<=
h.status&&299>=h.status}function d(l){try{l.dispatchEvent(new MouseEvent("click"))}catch(e){var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null);l.dispatchEvent(h)}}var b="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof Tf&&Tf.global===Tf?Tf:void 0,f=b.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),
k=b.saveAs||("object"!=typeof window||window!==b?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(l,h,e){var g=b.URL||b.webkitURL,p=document.createElement("a");h=h||l.name||"download";p.download=h;p.rel="noopener";"string"==typeof l?(p.href=l,p.origin===location.origin?d(p):c(p.href)?a(l,h,e):d(p,p.target="_blank")):(p.href=g.createObjectURL(l),setTimeout(function(){g.revokeObjectURL(p.href)},4E4),setTimeout(function(){d(p)},0))}:"msSaveOrOpenBlob"in navigator?function(l,h,e){if(h=
h||l.name||"download","string"!=typeof l){var g;navigator.msSaveOrOpenBlob((void 0===(g=e)?g={autoBom:!1}:"object"!=typeof g&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\ufeff",l],{type:l.type}):l),h)}else if(c(l))a(l,h,e);else{var p=document.createElement("a");p.href=l;p.target="_blank";setTimeout(function(){d(p)})}}:function(l,h,e,g){if((g=g||open("",
"_blank"))&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof l)return a(l,h,e);h="application/octet-stream"===l.type;e=/constructor/i.test(b.HTMLElement)||b.safari;var p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||h&&e||f)&&"undefined"!=typeof FileReader){var m=new FileReader;m.onloadend=function(){var u=m.result;u=p?u:u.replace(/^data:[^;]*;/,"data:attachment/file;");g?g.location.href=u:location=u;g=null};m.readAsDataURL(l)}else{var n=b.URL||b.webkitURL,r=n.createObjectURL(l);
g?g.location=r:location.href=r;g=null;setTimeout(function(){n.revokeObjectURL(r)},4E4)}});vg=b.saveAs=k.saveAs=k};"function"==typeof define&&define.amd?define([],ep):ep();var jh={};jh=JSON.parse('{"Dodge (tool)":"Dodge","Burn (tool)":"Burn","Color (picker)":"Color","Color swatches (shorter)":"Swatches"}');var Vi={ja:JSON.parse('{"File":"\u30d5\u30a1\u30a4\u30eb","Save to my computer":"PC\u306b\u4fdd\u5b58","Post Oekaki":"\u304a\u7d75\u304b\u304d\u3092\u6295\u7a3f","Edit":"\u7de8\u96c6","Undo":"\u53d6\u308a\u6d88\u3057","Redo":"\u3084\u308a\u76f4\u3057","Cut":"\u5207\u308a\u53d6\u308a","Copy":"\u30b3\u30d4\u30fc","Clear history":"\u5c65\u6b74\u6d88\u53bb","Copy merged":"\u7d50\u5408\u30b3\u30d4\u30fc","Paste":"\u8cbc\u308a\u4ed8\u3051","Select all":"\u3059\u3079\u3066\u9078\u629e","Deselect":"\u9078\u629e\u89e3\u9664","Transform":"\u5909\u5f62","Layers":"\u30ec\u30a4\u30e4\u30fc","Duplicate":"\u8907\u88fd","Merge down":"\u4e0b\u306e\u30ec\u30a4\u30e4\u30fc\u3068\u7d50\u5408","Merge group":"\u30b0\u30eb\u30fc\u30d7\u7d50\u5408","Merge all layers":"\u5168\u30ec\u30a4\u30e4\u30fc\u7d50\u5408","Add layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u8ffd\u52a0","Delete mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u524a\u9664","Delete layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u524a\u9664","Apply mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u9069\u7528","Apply layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u9069\u7528","Disable mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u7121\u52b9\u5316","Enable mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u6709\u52b9\u5316","Clip to the layer below":"\u4e0b\u306e\u30ec\u30a4\u30e4\u30fc\u3067\u30af\u30ea\u30c3\u30d4\u30f3\u30b0","Unclip from the layer below":"\u30af\u30ea\u30c3\u30d4\u30f3\u30b0\u89e3\u9664","Effects":"\u52b9\u679c","Clear":"\u6d88\u53bb","Fill":"\u5857\u308a\u6f70\u3057","Flip horizontal":"\u5de6\u53f3\u53cd\u8ee2","Flip vertical":"\u4e0a\u4e0b\u53cd\u8ee2","Invert":"\u30cd\u30ac\u30dd\u30b8\u53cd\u8ee2","Box blur...":"\u307c\u304b\u3057","Box blur":"\u307c\u304b\u3057","Blur amount (pixels)":"\u307c\u304b\u3057\u91cf(\u30d4\u30af\u30bb\u30eb\u5358\u4f4d)","Iterations (1-8, larger gives smoother blur)":"\u53cd\u5fa9(1-8,\u5927\u304d\u3044\u307b\u3069\u307c\u304b\u3057\u304c\u6ed1\u3089\u304b)","Monochromatic noise":"\u5358\u8272\u30ce\u30a4\u30ba","Color noise":"\u30ab\u30e9\u30fc\u30ce\u30a4\u30ba","View":"\u8868\u793a","Full-screen mode":"\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3\u30e2\u30fc\u30c9","Zoom in":"\u62e1\u5927","Zoom out":"\u7e2e\u5c0f","Zoom 100%":"100%","Smooth-out zoomed canvas":"\u30ba\u30fc\u30e0\u3092\u306a\u3081\u3089\u304b\u306b\u8868\u793a\u3059\u308b","Show grid":"\u30b0\u30ea\u30c3\u30c9\u3092\u8868\u793a","Grid options...":"\u30b0\u30ea\u30c3\u30c9\u306e\u8a2d\u5b9a","Palettes":"\u30d1\u30ec\u30c3\u30c8","Rearrange":"\u521d\u671f\u5316","Toggle palettes":"\u8868\u793a\u975e\u8868\u793a\u5207\u308a\u66ff\u3048","Use old icons":"\u53e4\u3044\u30a2\u30a4\u30b3\u30f3","Show tool options":"\u30c4\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3","Show color":"\u30ab\u30e9\u30fc","Show layers":"\u30ec\u30a4\u30e4\u30fc","Show misc":"\u64cd\u4f5c","Show stroke":"\u30b9\u30c8\u30ed\u30fc\u30af","Show swatches":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Show textures":"\u30c6\u30af\u30b9\u30c1\u30e3","Show tools":"\u30c4\u30fc\u30eb","Help":"\u30d8\u30eb\u30d7","Tablet support":"\u30bf\u30d6\u30ec\u30c3\u30c8\u30b5\u30dd\u30fc\u30c8","Shortcuts":"\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8","About":"ChickenPaint Be\u306b\u3064\u3044\u3066","Removes all undo/redo information to regain memory":"\u5c65\u6b74\u3092\u30af\u30ea\u30a2\u3057\u3066\u30e1\u30e2\u30ea\u3092\u958b\u653e\u3057\u307e\u3059","Clears the selected area":"\u6d88\u53bb","Invert the image colors":"\u30cd\u30ac\u30dd\u30b8\u53cd\u8ee2","Blur effect":"\u307c\u304b\u3057\u30d5\u30a3\u30eb\u30bf","Fills the selection with noise":"\u5358\u8272\u30ce\u30a4\u30ba\u3067\u5857\u308a\u6f70\u3057","Fills the selection with colored noise":"\u30ab\u30e9\u30fc\u30ce\u30a4\u30ba\u3067\u5857\u308a\u6f70\u3057","Linear interpolation is used to give a smoothed looked to the picture when zoomed in":"\u753b\u50cf\u306e\u62e1\u5927\u6642\u306b\u88dc\u5b8c\u3057\u3066\u6ed1\u3089\u304b\u306b\u8868\u793a\u3057\u307e\u3059","Rearrange the palette windows":"\u30d1\u30ec\u30c3\u30c8\u3092\u518d\u914d\u7f6e","Hides or shows all palettes":"\u30d1\u30ec\u30c3\u30c8\u306e\u8868\u793a/\u975e\u8868\u793a","You\'re about to clear the current Undo/Redo history.\\nThis operation cannot be undone, are you sure you want to do that?":"\u30a2\u30f3\u30c9\u30a5\u30fb\u30ea\u30c9\u30a5\u306e\u5c65\u6b74\u3092\u6d88\u53bb\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002\\n\u3053\u306e\u64cd\u4f5c\u306f\u5143\u306b\u623b\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u672c\u5f53\u306b\u5b9f\u884c\u3057\u307e\u3059\u304b?","Misc":"\u64cd\u4f5c","Round Pixelated":"\u5186\u30d4\u30af\u30bb\u30eb","Round Hard Edge":"\u5186\u30cf\u30fc\u30c9\u30a8\u30c3\u30b8","Round Soft":"\u5186\u30bd\u30d5\u30c8","Square Pixelated":"\u89d2\u30d4\u30af\u30bb\u30eb","Square Hard Edge":"\u89d2\u30cf\u30fc\u30c9\u30a8\u30c3\u30b8","Color (picker)":"\u30ab\u30e9\u30fc","Tool options":"\u30c4\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3","Brush size":"\u30d6\u30e9\u30b7\u30b5\u30a4\u30ba","Opacity":"\u4e0d\u900f\u660e\u5ea6","Color":"\u8272\u88dc\u5145","Blend":"\u6df7\u8272","Spacing":"\u9593\u9694","Scattering":"\u6563\u4e71","Smoothing":"\u624b\u3076\u308c\u88dc\u6b63","Color swatches":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Color swatches (shorter)":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Remove":"\u524a\u9664","Replace with current color":"\u9078\u629e\u4e2d\u306e\u8272\u306b\u7f6e\u304d\u63db\u3048","Save swatches to your computer...":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8\u3092PC\u306b\u4fdd\u5b58","Load swatches from your computer...":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8\u3092PC\u304b\u3089\u8aad\u307f\u8fbc\u307f","Add the current brush color as a new swatch":"\u9078\u629e\u4e2d\u306e\u8272\u3092\u8ffd\u52a0","Sample all layers":"\u5168\u30ec\u30a4\u30e4\u30fc\u6df7\u5408","Lock transparency":"\u900f\u660e\u90e8\u5206\u3092\u4fdd\u8b77","Textures":"\u30c6\u30af\u30b9\u30c1\u30e3","Customize":"\u30ab\u30b9\u30bf\u30de\u30a4\u30ba","Inverse":"\u30cd\u30ac\u30dd\u30b8\u53cd\u8ee2","Mirror":"\u5de6\u53f3\u53cd\u8ee2","Brightness":"\u8f1d\u5ea6","Contrast":"\u30b3\u30f3\u30c8\u30e9\u30b9\u30c8","Reset":"\u30ea\u30bb\u30c3\u30c8","Layer blending mode":"\u5408\u6210\u30e2\u30fc\u30c9","Normal":"\u901a\u5e38","Multiply":"\u4e57\u7b97","Add":"\u52a0\u7b97","Screen":"\u30b9\u30af\u30ea\u30fc\u30f3","Lighten":"\u6bd4\u8f03(\u660e)","Darken":"\u6bd4\u8f03(\u6697)","Subtract":"\u6e1b\u7b97","Dodge":"\u8986\u3044\u713c\u304d","Burn":"\u713c\u304d\u8fbc\u307f","Overlay":"\u30aa\u30fc\u30d0\u30fc\u30ec\u30a4","Hard Light":"\u30cf\u30fc\u30c9\u30e9\u30a4\u30c8","Soft Light":"\u30bd\u30d5\u30c8\u30e9\u30a4\u30c8","Vivid Light":"\u30d3\u30d3\u30c3\u30c9\u30e9\u30a4\u30c8","Linear Light":"\u30ea\u30cb\u30a2\u30e9\u30a4\u30c8","Pin Light":"\u30d4\u30f3\u30e9\u30a4\u30c8","Passthrough":"\u901a\u904e","Stroke":"\u30b9\u30c8\u30ed\u30fc\u30af","Free-hand":"\u30d5\u30ea\u30fc\u30cf\u30f3\u30c9","Straight line":"\u76f4\u7dda","Bezier curve":"Bz\uff08\u30d9\u30b8\u30a7\uff09\u66f2\u7dda","Tools":"\u30c4\u30fc\u30eb","Marquee":"\u9078\u629e\u7bc4\u56f2","Move tool":"\u79fb\u52d5","Flood fill":"\u5857\u308a\u6f70\u3057","Gradient fill":"\u30b0\u30e9\u30c7\u30fc\u30b7\u30e7\u30f3","Color picker":"\u30b9\u30dd\u30a4\u30c8","Rotate canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u56de\u8ee2","Grab canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u4f4d\u7f6e","Pencil":"\u925b\u7b46","Pen":"\u30da\u30f3","Airbrush":"\u30a8\u30a2\u30d6\u30e9\u30b7","Waterpaint":"\u6c34\u5f69","Eraser":"\u6d88\u3057\u30b4\u30e0","Soft eraser":"\u8584\u6d88\u3057","Smudge":"\u6307\u5148","Blender":"\u6df7\u8272","Dodge (tool)":"\u8986\u3044\u713c\u304d","Burn (tool)":"\u713c\u304d\u8fbc\u307f","Blur":"\u307c\u304b\u3057","Grid options":"\u30b0\u30ea\u30c3\u30c9\u306e\u8a2d\u5b9a","Grid size":"\u30b0\u30ea\u30c3\u30c9\u30b5\u30a4\u30ba","Rename...":"\u540d\u524d\u3092\u5909\u66f4","Add layer":"\u65b0\u898f\u30ec\u30a4\u30e4\u30fc","Delete layer":"\u30ec\u30a4\u30e4\u30fc\u524a\u9664","Add group":"\u65b0\u898f\u30b0\u30eb\u30fc\u30d7","Delete group":"\u30b0\u30eb\u30fc\u30d7\u524a\u9664","Add mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u8ffd\u52a0","Gradient":"\u30b0\u30e9\u30c7\u30fc\u30b7\u30e7\u30f3\u4f5c\u6210","Transform style":"\u5909\u5f62\u30b9\u30bf\u30a4\u30eb","Apply transform":"\u5909\u5f62\u78ba\u5b9a","Complete transform":"\u5909\u5f62\u3092\u5b8c\u4e86","Undo transform":"\u53d6\u308a\u6d88\u3057","You need to finish transforming this layer before you can do that. What would you like to do with the transform?":"\u7d9a\u884c\u3059\u308b\u305f\u3081\u306b\u5909\u5f62\u3092\u5b8c\u4e86\u3057\u307e\u3059\u3002","Smooth":"\u30b9\u30e0\u30fc\u30ba","Sharp":"\u30b7\u30e3\u30fc\u30d7","Opacity: ":"\u4e0d\u900f\u660e\u5ea6:","Please enter a color in hex format":"16\u9032\u5f62\u5f0f\u3067\u8272\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\uff08#xxxxxx\u306e\u5f62\uff09","Cancel":"\u30ad\u30e3\u30f3\u30bb\u30eb","Ok":"OK","Okay":"OK","OK":"OK","Whoops! This layer is currently hidden":"\u975e\u8868\u793a\u30ec\u30a4\u30e4\u30fc\u3067\u3059\u3002","Whoops! This layer\'s opacity is currently 0%":"\u30ec\u30a4\u30e4\u30fc\u306e\u4e0d\u900f\u660e\u5ea6\u304c0%\u3067\u3059","Whoops! You can\'t draw on a group":"\u30b0\u30eb\u30fc\u30d7\u30d5\u30a9\u30eb\u30c0\u306b\u306f\u63cf\u3051\u307e\u305b\u3093","Whoops! All of the selected pixels are transparent!":"\u30ec\u30a4\u30e4\u30fc\u304c\u7a7a\u3067\u3059","Image":"\u753b\u50cf","Layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af","Sorry, you can\'t remove the last remaining layer in the drawing.":"\u6700\u5f8c\u306e1\u3064\u306a\u306e\u3067\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3002","Are you sure you want to send your drawing to the server and finish drawing now?":"\u304a\u7d75\u304b\u304d\u3092\u30b5\u30fc\u30d0\u30fc\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\u7d42\u4e86\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","Your drawing has unsaved changes! Are you sure to want to navigate away?":"\u304a\u7d75\u304b\u304d\u306b\u672a\u4fdd\u5b58\u306e\u5909\u66f4\u304c\u3042\u308a\u307e\u3059\u3002\u7d42\u4e86\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","Many of the menu options and painting tools have keyboard shortcuts which are written next to them or appear when you hover.":"\u5229\u7528\u53ef\u80fd\u306a\u30ad\u30fc\u30dc\u30fc\u30c9\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u306e\u3044\u304f\u3064\u304b\u306f\u30e1\u30cb\u30e5\u30fc\u306e\u6a2a\u3084\u30c4\u30fc\u30eb\u30c1\u30c3\u30d7\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002","Here are some other shortcuts which are not as obvious!":"\u3053\u306e\u4e00\u89a7\u306f\u305d\u308c\u4ee5\u5916\u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3067\u3059\u3002","Right":"\u53f3","Left":"\u5de6","Middle":"\u4e2d","or":"\u307e\u305f\u306f","Double click":"\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af","Color swatches palette":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Use as the drawing color":"\u30d1\u30ec\u30c3\u30c8\u306e\u8272\u3092\u53d6\u5f97","Remove or replace a color swatch":"\u30d1\u30ec\u30c3\u30c8\u306e\u5909\u66f4\uff65\u524a\u9664","Line drawing mode":"\u76f4\u7dda\u30e2\u30fc\u30c9","Snap line to nearest 45 degrees":"45\u00b0\u5358\u4f4d\u3067\u30b9\u30ca\u30c3\u30d7","Painting tools":"\u30c4\u30fc\u30eb","Change brush opacity":"\u30d6\u30e9\u30b7\u306e\u4e0d\u900f\u660e\u5ea6","Change brush size":"\u30d6\u30e9\u30b7\u30b5\u30a4\u30ba","Brush palette":"\u30d6\u30e9\u30b7\u30d1\u30ec\u30c3\u30c8","Adjust brush sliders more precisely":"\u30d6\u30e9\u30b7\u30b9\u30e9\u30a4\u30c0\u30fc\u3092\u3088\u308a\u7d30\u304b\u304f\u8abf\u6574","Drawing canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9","Move the canvas around":"\u30ad\u30e3\u30f3\u30d0\u30b9\u3092\u79fb\u52d5","Rotate the canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u56de\u8ee2","Sample the color under the cursor":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u8272\u3092\u30b9\u30dd\u30a4\u30c8","Layers palette":"\u30ec\u30a4\u30e4\u30fc\u30d1\u30ec\u30c3\u30c8","Rename layer":"\u30ec\u30a4\u30e4\u30fc\u540d\u5909\u66f4","Toggle mask enable/disable":"\u30de\u30b9\u30af\u306e\u6709\u52b9/\u7121\u52b9\u5207\u308a\u66ff\u3048","Toggle mask View":"\u30de\u30b9\u30af\u306e\u8868\u793a/\u975e\u8868\u793a\u5207\u308a\u66ff\u3048","Save Oekaki":"\u4fdd\u5b58","Saving drawing...":"\u304a\u7d75\u304b\u304d\u3092\u4fdd\u5b58\u4e2d\u2026","Preparing your drawing to be saved, please wait...":"\u304a\u7d75\u304b\u304d\u3092\u4fdd\u5b58\u3059\u308b\u6e96\u5099\u3092\u3057\u3066\u3044\u307e\u3059\u3002\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u2026","Drawing saved!":"\u304a\u7d75\u304b\u304d\u3092\u4fdd\u5b58\u3057\u307e\u3057\u305f\uff01","Your drawing has been saved, would you like to post it to the forum now?":"\u304a\u7d75\u304b\u304d\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\u3002\u30d5\u30a9\u30fc\u30e9\u30e0\u3078\u6295\u7a3f\u3057\u307e\u3059\u304b\uff1f","Yes, post it now":"\u306f\u3044\u3001\u6295\u7a3f\u3057\u307e\u3059","No, keep drawing":"\u307e\u3060\u63cf\u304d\u307e\u3059","No, quit and I\'ll finish it later":"\u30a2\u30d7\u30ea\u3092\u7d42\u4e86\u3057\u3066\u7d9a\u304d\u3092\u5f8c\u3067\u63cf\u304f","Your drawing has been saved, would you like to view it on the forum now?":"\u304a\u7d75\u304b\u304d\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\u3002\u30d5\u30a9\u30fc\u30e9\u30e0\u3078\u6295\u7a3f\u3057\u307e\u3059\u304b\uff1f","Yes, view the post":"\u306f\u3044\u3001\u6295\u7a3f\u3057\u307e\u3059\u3002","Your drawing has been saved, redirecting you to view your new post now...":"\u304a\u7d75\u304b\u304d\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\u3002\u6295\u7a3f\u5148\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002","Sorry, your drawing could not be saved, please try again later.":"\u304a\u7d75\u304b\u304d\u304c\u4fdd\u5b58\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u518d\u5ea6\u6295\u7a3f\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002","The error returned from the server was":"\u30b5\u30fc\u30d0\u304b\u3089\u8fd4\u3063\u3066\u6765\u305f\u30a8\u30e9\u30fc"}'),
en:jh},ih=jh,Wi="en";ug.prototype=Object.create(da(Pc).prototype);ug.prototype.constructor=ug;var Cc={};!function(a){function c(G,L){for(var N=G.length;N--;)if(G[N]===L)return N;return-1}function d(G,L,N){var M=f(G);void 0===N&&(N=L,L="all");for(var ca=0;ca<M.length;ca++){var W=[];1<(G=M[ca].split("+")).length&&(W=k(G),G=[G[G.length-1]]);(G=r(G=G[0]))in e||(e[G]=[]);e[G].push({shortcut:M[ca],scope:L,method:N,key:M[ca],mods:W})}}function b(){return p||"all"}function f(G){var L;return""==(L=G.replace(/\s/g,
"").split(","))[L.length-1]&&(L[L.length-2]+=","),L}function k(G){G=G.slice(0,G.length-1);for(var L=0;L<G.length;L++)G[L]=m[G[L]];return G}function l(G,L,N){G.addEventListener&&G.addEventListener(L,N,!1)}var h,e={},g={16:!1,18:!1,17:!1,91:!1},p="all",m={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},n={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,
pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},r=function(G){G=n[G]||G.toUpperCase().charCodeAt(0);return"function"==typeof G?G():G},u=[];for(h=1;20>h;h++)n["f"+h]=111+h;var w={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(h in m)d[h]=!1;l(document,"keydown",function(G){!function(L){var N,M,ca,W,ka;if(-1==c(u,N=Ll(L.key))&&u.push(N),N in g)for(ca in g[N]=!0,m)m[ca]==N&&(d[ca]=!0);else{for(h in g)g[h]=L[w[h]];if(d.filter.call(this,L)&&
N in e){var ea=0;for(ka=b();ea<e[N].length;ea++)if((M=e[N][ea]).scope==ka||"all"==M.scope){for(ca in W=0<M.mods.length,g)(!g[ca]&&-1<c(M.mods,+ca)||g[ca]&&-1==c(M.mods,+ca))&&(W=!1);(0!=M.mods.length||g[16]||g[18]||g[17]||g[91])&&!W||!1!==M.method(L,M)||(L.preventDefault?L.preventDefault():L.returnValue=!1,L.stopPropagation&&L.stopPropagation(),L.cancelBubble&&(L.cancelBubble=!0))}}}}(G)});l(document,"keyup",function(G){var L;G=Ll(G.key);var N=c(u,G);if(0<=N&&u.splice(N,1),G in g)for(L in g[G]=!1,
m)m[L]==G&&(d[L]=!1)});l(window,"focus",function(){for(h in g)g[h]=!1;for(h in m)d[h]=!1});var z=a.key;a.key=d;a.key.setScope=function(G){p=G||"all"};a.key.getScope=b;a.key.deleteScope=function(G){var L,N;for(L in e){var M=0;for(N=e[L];M<N.length;)N[M].scope===G?N.splice(M,1):M++}};a.key.filter=function(G){G=(G.target||G.srcElement).tagName;return!("INPUT"==G||"SELECT"==G||"TEXTAREA"==G)};a.key.isPressed=function(G){return"string"==typeof G&&(G=r(G)),-1!=c(u,G)};a.key.getPressedKeyCodes=function(){return u.slice(0)};
a.key.noConflict=function(){var G=a.key;return a.key=z,G};a.key.unbind=function(G,L){var N,M,ca,W,ka=[];var ea=0;for(N=f(G);ea<N.length&&(1<(M=N[ea].split("+")).length&&(ka=k(M)),G=r(G=M[M.length-1]),void 0===L&&(L=b()),e[G]);ea++)for(ca=0;ca<e[G].length;ca++){var ma;if(ma=(W=e[G][ca]).scope===L)a:if(W=W.mods,W.length!=ka.length)ma=!1;else{for(ma=0;ma<W.length;ma++)if(W[ma]!==ka[ma]){ma=!1;break a}ma=!0}ma&&(e[G][ca]={})}};Cc=d}(Cc||{});ve.getRef=function(){return null==ve.instance&&(ve.instance=
new ve),ve.instance};window.onWacomPluginLoaded=function(){ve.getRef().pluginLoaded()};nf.prototype.clone=function(){for(var a=new nf(Array(this.points.length)),c=0;c<this.points.length;c++)a.points[c]={x:this.points[c].x,y:this.points[c].y};return a};nf.prototype.getTransformed=function(a){for(var c=new nf(Array(this.points.length)),d=0;d<this.points.length;d++)c.points[d]=a.getTransformedPoint(this.points[d]);return c};nf.prototype.getCenter=function(){for(var a=this.points[0].x,c=this.points[0].y,
d=1;d<this.points.length;d++)a+=this.points[d].x,c+=this.points[d].y;return{x:a/this.points.length,y:c/this.points.length}};nf.prototype.containsPoint=function(a){var c,d=!1;var b=0;for(c=this.points.length-1;b<this.points.length;c=b++)this.points[b].y>a.y!=this.points[c].y>a.y&&a.x<(this.points[c].x-this.points[b].x)*(a.y-this.points[b].y)/(this.points[c].y-this.points[b].y)+this.points[b].x&&(d=!d);return d};sc.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};sc.prototype.normalize=
function(){var a=this.getLength();return this.x/=a,this.y/=a,this};sc.prototype.getDotProduct=function(a){return this.x*a.x+this.y*a.y};sc.prototype.scale=function(a){return this.x*=a,this.y*=a,this};sc.prototype.getScaled=function(a){var c=new sc(this.x,this.y);return c.scale(a),c};sc.prototype.getRounded=function(){return new sc(Math.round(this.x),Math.round(this.y))};sc.prototype.getTruncated=function(){return new sc(~~this.x,~~this.y)};sc.prototype.getPerpendicular=function(){return new sc(-this.y,
this.x)};sc.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this};sc.prototype.subtract=function(a){return this.x-=a.x,this.y-=a.y,this};sc.prototype.getSum=function(a){return new sc(this.x+a.x,this.y+a.y)};sc.subtractPoints=function(a,c){return new sc(a.x-c.x,a.y-c.y)};wg.prototype=Object.create(da(Pc).prototype);wg.prototype.constructor=wg;dd.MODE_INDEX_DEFAULT=0;dd.MODE_INDEX_USER=1;dd.prototype.setMode=function(a,c){var d=this.modes[a];d!=c&&(d&&d.leave(),this.modes[a]=c,c.enter())};
dd.prototype.setDefaultMode=function(a){a.transient=!1;a.capture=!1;this.setMode(dd.MODE_INDEX_DEFAULT,a)};dd.prototype.setUserMode=function(a){for(var c=this.modes.length-1;c>dd.MODE_INDEX_USER;c--)this.modes[c].leave(),this.modes.splice(c,1);a.transient=!1;a.capture=!1;this.setMode(dd.MODE_INDEX_USER,a)};dd.prototype.deliverEvent=function(a,c){for(var d=this.modes.length-1;0<=d;d--){var b=this.modes[d];if(b[a].apply(b,c)||b.capture&&"paint"!=a)return!0}return!1};for(var bl=0,fp=["mouseDown","mouseUp"];bl<
fp.length;bl++)!function(a,c){var d=c[a];dd.prototype[d]=function(b,f,k){this.deliverEvent(d,[b,f,k])}}(bl,fp);for(var cl=0,gp=["mouseDrag","mouseMove"];cl<gp.length;cl++)!function(a,c){var d=c[a];dd.prototype[d]=function(b,f){this.deliverEvent(d,[b,f])}}(cl,gp);for(var dl=0,hp=["keyDown","keyUp"];dl<hp.length;dl++)!function(a,c){var d=c[a];dd.prototype[d]=function(b){this.deliverEvent(d,[b])&&b.preventDefault()}}(dl,hp);dd.prototype.paint=function(a){this.deliverEvent("paint",[a])};dd.prototype.push=
function(a,c){var d=this.peek();d&&d.suspend();a.transient=c;a.capture=!1;a.enter();this.modes.push(a)};dd.prototype.peek=function(){return 0<this.modes.length?this.modes[this.modes.length-1]:null};dd.prototype.pop=function(){var a=this.modes.pop(),c=this.peek();return a&&a.leave(),c&&c.resume(),c};lh.prototype=Object.create(da(Pc).prototype);lh.prototype.constructor=lh;ad.prototype=Object.create(da(Pc).prototype);ad.prototype.constructor=da(Pc);mh.prototype=Object.create(ad.prototype);mh.prototype.constructor=
mh;nh.prototype=Object.create(ad.prototype);nh.prototype.constructor=nh;oh.prototype=Object.create(ad.prototype);oh.prototype.constructor=oh;var yi=window.devicePixelRatio||1,Gf=Math.round(128*yi),Hf=Math.round(128*yi),Pl=function(){function a(c,d){var b=this;Gb(this,a);id(this,"_controller",void 0);id(this,"_canvas",void 0);id(this,"_canvasContext",void 0);id(this,"_imageData",void 0);id(this,"_bitmapInvalid",!0);id(this,"_capturedMouse",!1);id(this,"_greyscale",!1);id(this,"color",new ac(0));this._controller=
c;var f=document.createElement("canvas");this._canvas=f;f.className="chickenpaint-colorpicker-select";f.setAttribute("touch-action","none");f.width=Gf;f.height=Hf;f.style.width="128px";f.style.height="128px";this._canvasContext=f.getContext("2d");this._imageData=this._canvasContext.createImageData(Gf,Hf);this._canvasContext.getImageData(0,0,1,1);this._handleEndDrag=this._endDrag.bind(this);this._handleMousePickColor=this._mousePickColor.bind(this);f.addEventListener("pointerdown",function(k){return b._startDrag(k)});
d&&this.color.copyFrom(d);c.on("colorChange",function(k){b.color.copyFrom(k);b._bitmapInvalid=!0;b.paint()});c.on("colorModeChange",function(k){b._greyscale="greyscale"==k;b._bitmapInvalid=!0;b.paint()});this.paint()}return Hb(a,[{key:"_makeBitmap",value:function(){if(this._bitmapInvalid){var c=0,d=this._imageData.data;if(this._greyscale)for(var b=0;b<Hf;b++)for(var f=255-Math.round(b/(Hf-1)*255),k=0;k<Gf;k++)d[c+I.RED_BYTE_OFFSET]=f,d[c+I.GREEN_BYTE_OFFSET]=f,d[c+I.BLUE_BYTE_OFFSET]=f,d[c+I.ALPHA_BYTE_OFFSET]=
255,c+=I.BYTES_PER_PIXEL;else for(b=this.color.clone(),f=0;f<Hf;f++)for(b.setValue(255-~~(f/(Hf-1)*255)),k=0;k<Gf;k++)b.setSaturation(Math.round(k/(Gf-1)*255)),d[c+I.RED_BYTE_OFFSET]=b.rgb>>16&255,d[c+I.GREEN_BYTE_OFFSET]=b.rgb>>8&255,d[c+I.BLUE_BYTE_OFFSET]=255&b.rgb,d[c+I.ALPHA_BYTE_OFFSET]=255,c+=I.BYTES_PER_PIXEL;this._bitmapInvalid=!1}}},{key:"paint",value:function(){this._makeBitmap();this._canvasContext.putImageData(this._imageData,0,0);var c=this.color.getSaturation()/255*(Gf-1),d=(255-this.color.getValue())/
255*(Hf-1);kh(this._canvasContext,"stroke");this._canvasContext.lineWidth=1.5*yi;this._canvasContext.beginPath();this._greyscale?(this._canvasContext.moveTo(0,d),this._canvasContext.lineTo(Gf,d)):this._canvasContext.arc(c,d,5*yi,0,2*Math.PI);this._canvasContext.stroke();this._canvasContext.globalCompositeOperation="source-over"}},{key:"_mousePickColor",value:function(c){var d=c.pageX-da(pa)(this._canvas).offset().left;c=Math.max(Math.min(255-~~(255*(c.pageY-da(pa)(this._canvas).offset().top)/127),
255),0);this._greyscale?this.color.setGreyscale(c):(d=Math.max(Math.min(~~(255*d/127),255),0),this.color.setHsv(this.color.getHue(),d,c));this.paint();this._controller.setCurColor(this.color)}},{key:"_endDrag",value:function(c){this._canvas.releasePointerCapture(c.pointerId);this._capturedMouse=!1;this._canvas.removeEventListener("pointerup",this._handleEndDrag);this._canvas.removeEventListener("pointermove",this._handleMousePickColor)}},{key:"_startDrag",value:function(c){this._capturedMouse||(this._capturedMouse=
!0,this._canvas.setPointerCapture(c.pointerId),this._canvas.addEventListener("pointerup",this._handleEndDrag),this._canvas.addEventListener("pointermove",this._handleMousePickColor));this._handleMousePickColor(c)}},{key:"setHue",value:function(c){this.color.getHue()!=c&&(this.color.setHue(c),this._controller.setCurColor(this.color))}},{key:"getElement",value:function(){return this._canvas}}]),a}(),Ql=function(){function a(c,d,b){var f=this;Gb(this,a);id(this,"hue",void 0);id(this,"selecter",void 0);
id(this,"_canvas",void 0);id(this,"_canvasContext",void 0);id(this,"_imageData",void 0);id(this,"_capturedMouse",!1);this.selecter=d;this.hue=b||0;var k=document.createElement("canvas");this._canvas=k;c.on("colorChange",function(l){f.setHue(l.getHue())});c.on("colorModeChange",function(l){k.style.display="greyscale"==l?"none":"block"});k.setAttribute("touch-action","none");k.addEventListener("pointerdown",function(l){return f._startDrag(l)});k.width=24;k.height=128;k.className="chickenpaint-colorpicker-slider";
this._canvasContext=k.getContext("2d");this._imageData=this._canvasContext.createImageData(24,128);this._canvasContext.getImageData(0,0,1,1);this._handleEndDrag=this._endDrag.bind(this);this._handleMousePickColor=this._mousePickColor.bind(this);(function(l){for(var h=new ac(65535),e=0,g=l.data,p=0;p<l.height;p++){h.setHue(359*p/l.height);for(var m=0;m<l.width;m++)g[e+I.RED_BYTE_OFFSET]=h.rgb>>16&255,g[e+I.GREEN_BYTE_OFFSET]=h.rgb>>8&255,g[e+I.BLUE_BYTE_OFFSET]=255&h.rgb,g[e+I.ALPHA_BYTE_OFFSET]=255,
e+=I.BYTES_PER_PIXEL}})(this._imageData);this.paint()}return Hb(a,[{key:"paint",value:function(){this._canvasContext.putImageData(this._imageData,0,0);var c=128*this.hue/360;kh(this._canvasContext,"stroke");this._canvasContext.lineWidth=1.5;this._canvasContext.beginPath();this._canvasContext.moveTo(0,c);this._canvasContext.lineTo(24,c);this._canvasContext.stroke();this._canvasContext.globalCompositeOperation="source-over"}},{key:"_mousePickColor",value:function(c){c=c.pageY-da(pa)(this._canvas).offset().top;
this.hue=Math.max(0,Math.min(359,~~(360*c/128)));this.paint();this.selecter&&this.selecter.setHue(this.hue)}},{key:"_endDrag",value:function(c){this._canvas.releasePointerCapture(c.pointerId);this._capturedMouse=!1;this._canvas.removeEventListener("pointerup",this._handleEndDrag);this._canvas.removeEventListener("pointermove",this._handleMousePickColor)}},{key:"_startDrag",value:function(c){this._capturedMouse||(this._capturedMouse=!0,this._canvas.setPointerCapture(c.pointerId),this._canvas.addEventListener("pointerup",
this._handleEndDrag),this._canvas.addEventListener("pointermove",this._handleMousePickColor));this._handleMousePickColor(c)}},{key:"getElement",value:function(){return this._canvas}},{key:"setHue",value:function(c){this.hue=c;this.paint()}}]),a}();ph.prototype=Object.create(ad.prototype);ph.prototype.constructor=ph;Nf.prototype=Object.create(da(Pc).prototype);Nf.prototype.constructor=Nf;xd.prototype=Object.create(da(Pc).prototype);xd.prototype.constructor=xd;xg.prototype=Object.create(da(Pc).prototype);
xg.prototype.constructor=xg;Of.prototype=Object.create(ad.prototype);Of.prototype.constructor=Of;Of.CPBrushPreview=function(a){function c(){l.clearRect(0,0,k.width,k.height);l.beginPath();l.arc(k.width/2,k.height/2,f/2*window.devicePixelRatio,0,2*Math.PI);l.stroke()}function d(e){var g=da(pa)(k).offset(),p=e.pageY-g.top;e=e.pageX-g.left-da(pa)(k).width()/2;p-=da(pa)(k).height()/2;f=Math.max(1,Math.min(200,Math.round(2*Math.sqrt(e*e+p*p))));c();a.setBrushSize(f)}function b(e){h&&(h=!1,window.removeEventListener("mouseup",
b),window.removeEventListener("mousemove",d))}var f=16,k=document.createElement("canvas"),l=k.getContext("2d"),h=!1;this.getElement=function(){return k};k.addEventListener("mousedown",function(e){h||(h=!0,window.addEventListener("mouseup",b),window.addEventListener("mousemove",d),d(e))});a.on("toolChange",function(e,g){g.size!=f&&(f=g.size,c())});k.width=64;k.height=64;1<window.devicePixelRatio&&(k.style.width=k.width+"px",k.style.height=k.height+"px",k.width*=window.devicePixelRatio,k.height*=window.devicePixelRatio);
k.className="chickenpaint-brush-preview";l.strokeStyle="black";l.lineWidth=1*window.devicePixelRatio;c()};qh.prototype=Object.create(ad.prototype);qh.prototype.constructor=qh;rh.prototype=Object.create(ad.prototype);rh.prototype.constructor=rh;sh.prototype=Object.create(ad.prototype);sh.prototype.constructor=sh;th.prototype=Object.create(da(Pc).prototype);th.prototype.constructor=th;var Ul=[{name:"File",mnemonic:"F",children:[{name:"Save to my computer",action:"CPSave",mnemonic:"S",shortcut:"ctrl+s"},
{name:"Save Oekaki",action:"CPSend",mnemonic:"S",shortcut:"ctrl+s"}]},{name:"Edit",mnemonic:"E",children:[{name:"Undo",action:"CPUndo",mnemonic:"U",shortcut:"ctrl+z"},{name:"Redo",action:"CPRedo",mnemonic:"R",shortcut:"ctrl+y"},{name:"Clear history",action:"CPClearHistory",mnemonic:"H",title:sa("Removes all undo/redo information to regain memory")},{name:"-"},{name:"Cut",action:"CPCut",mnemonic:"T",shortcut:"ctrl+x"},{name:"Copy",action:"CPCopy",mnemonic:"C",shortcut:"ctrl+c"},{name:"Copy merged",
action:"CPCopyMerged",mnemonic:"Y",shortcut:"shift+ctrl+c"},{name:"Paste",action:"CPPaste",mnemonic:"P",shortcut:"ctrl+v"},{name:"-"},{name:"Select all",action:"CPSelectAll",mnemonic:"A",shortcut:"ctrl+a"},{name:"Deselect",action:"CPDeselectAll",mnemonic:"D",shortcut:"ctrl+d"},{name:"-"},{name:"Transform",action:"CPTransform",mnemonic:"T",shortcut:"ctrl+h"}]},{name:"Layers",mnemonic:"L",children:[{name:"Duplicate",action:"CPLayerDuplicate",mnemonic:"D",shortcut:"shift+ctrl+d"},{name:"-"},{name:"Merge down",
action:"CPLayerMergeDown",mnemonic:"E",shortcut:"ctrl+e"},{name:"Merge group",action:"CPGroupMerge",mnemonic:"G",shortcut:"shift+ctrl+g"},{name:"Merge all layers",action:"CPLayerMergeAll",shortcut:"shift+ctrl+e",mnemonic:"A"},{name:"-"},{hideIfNotAvailable:!0,name:"Add layer mask",action:"CPAddLayerMask"},{hideIfNotAvailable:!0,name:"Delete layer mask",action:"CPRemoveLayerMask",shortcut:"shift+m"},{hideIfNotAvailable:!0,name:"Apply layer mask",action:"CPApplyLayerMask",shortcut:"ctrl+m"},{name:"-"},
{hideIfNotAvailable:!0,name:"Clip to the layer below",action:"CPCreateClippingMask"},{hideIfNotAvailable:!0,name:"Unclip from the layer below",action:"CPReleaseClippingMask"}]},{name:"Effects",mnemonic:"E",children:[{name:"Clear",action:"CPClear",mnemonic:"D",shortcut:"del,backspace"},{name:"Fill",action:"CPFill",mnemonic:"F",shortcut:"ctrl+f"},{name:"Flip horizontal",action:"CPHFlip",mnemonic:"H",shortcut:"h"},{name:"Flip vertical",action:"CPVFlip",mnemonic:"V"},{name:"Invert",action:"CPFXInvert",
mnemonic:"I",shortcut:"ctrl+i",title:sa("Invert the image colors")},{name:"-"},{name:"Box blur...",action:"CPFXBoxBlur",mnemonic:"B"},{name:"-"},{name:"Monochromatic noise",action:"CPMNoise",mnemonic:"M",title:sa("Fills the selection with noise")},{name:"Color noise",action:"CPCNoise",mnemonic:"C",title:sa("Fills the selection with colored noise")}]},{name:"View",mnemonic:"V",children:[{name:"Full-screen mode",action:"CPFullScreen",mnemonic:"F",checkbox:!0,checked:!1},{name:"-"},{name:"Zoom in",action:"CPZoomIn",
mnemonic:"I",shortcut:"ctrl+="},{name:"Zoom out",action:"CPZoomOut",mnemonic:"O",shortcut:"ctrl+-"},{name:"Zoom 100%",action:"CPZoom100",mnemonic:"1",shortcut:"ctrl+0"},{action:"CPLinearInterpolation",name:"-"},{name:"Smooth-out zoomed canvas",action:"CPLinearInterpolation",mnemonic:"L",title:sa("Linear interpolation is used to give a smoothed looked to the picture when zoomed in"),checkbox:!0,checked:!0},{name:"-"},{name:"Show grid",action:"CPToggleGrid",mnemonic:"G",shortcut:"ctrl+g",checkbox:!0,
checked:!1},{name:"Grid options...",action:"CPGridOptions",mnemonic:"D"}]},{name:"Palettes",mnemonic:"P",children:[{name:"Rearrange",action:"CPArrangePalettes",title:sa("Rearrange the palette windows")},{name:"Toggle palettes",action:"CPTogglePalettes",mnemonic:"P",shortcut:"tab",title:sa("Hides or shows all palettes")},{name:"-"},{name:"Show tools",action:"CPPalTool",mnemonic:"T",checkbox:!0,checked:!0},{name:"Show color",action:"CPPalColor",mnemonic:"C",checkbox:!0,checked:!0},{name:"Show stroke",
action:"CPPalStroke",mnemonic:"S",checkbox:!0,checked:!0},{name:"Show misc",action:"CPPalMisc",mnemonic:"M",checkbox:!0,checked:!0},{name:"Show swatches",action:"CPPalSwatches",mnemonic:"W",checkbox:!0,checked:!0},{name:"Show textures",action:"CPPalTextures",mnemonic:"X",checkbox:!0,checked:!0},{name:"Show tool options",action:"CPPalBrush",mnemonic:"B",checkbox:!0,checked:!0},{name:"Show layers",action:"CPPalLayers",mnemonic:"L",checkbox:!0,checked:!0}]},{name:"Help",mnemonic:"H",children:[{name:"Tablet support",
mnemonic:"T",action:"CPTabletSupport"},{name:"Shortcuts",mnemonic:"S",action:"CPShortcuts"},{name:"-"},{name:"About",mnemonic:"A",action:"CPAbout"}]}];uh.prototype=Object.create(da(Pc).prototype);uh.prototype.constructor=uh;vh.prototype=Object.create(da(Pc).prototype);vh.prototype.constructor=vh;var Vl=navigator.userAgent.toLowerCase().includes("mac os")?"\u2318":"Ctrl";wh.prototype=Object.create(da(Pc).prototype);wh.prototype.constructor=wh;var Je={toolbarStyle:"new"},Qp=function(a){function c(){var b;
return Gb(this,c),id(zi(b=d.call(this)),"toolbarStyle",void 0),b.setDefaults(),b}dc(c,a);var d=ec(c);return Hb(c,[{key:"setDefaults",value:function(){for(var b in Je)Je.hasOwnProperty(b)&&this.set(b,Je[b])}},{key:"load",value:function(){var b={};try{b=JSON.parse(localStorage.getItem("chickenpaint-prefs"))}catch(k){console.error(k)}for(var f in b&&"object"==typeof b||(b={}),Je)if(Je.hasOwnProperty(f))try{this.set(f,b.hasOwnProperty(f)?b[f]:Je[f])}catch(k){console.error(k)}}},{key:"save",value:function(){try{var b=
!1,f;for(f in Je)if(Je.hasOwnProperty(f)&&this[f]!=Je[f]){b=!0;break}b?localStorage.setItem("chickenpaint-prefs",JSON.stringify({toolbarStyle:this.toolbarStyle})):localStorage.removeItem("chickenpaint-prefs")}catch(k){console.error(k)}}},{key:"set",value:function(b,f){this[b]=f;this.emitEvent(b,[f])}},{key:"get",value:function(b){return this[b]}}]),c}(da(Pc));window.PointerEvent&&(window.hasNativePointerEvents=!0);ya.prototype=Object.create(da(Pc).prototype);ya.prototype.constructor=ya;ya.UnsupportedBrowserException=
function(a){this.message=a};ya.UnsupportedBrowserException.prototype.toString=function(){var a="Sorry, your web browser does not support ChickenPaint.";return this.message?a+=" "+this.message:a+=" Please try a modern browser like Chrome, Safari, Firefox, or Edge.",a};ya.M_DRAW=0;ya.M_FLOODFILL=1;ya.M_RECT_SELECTION=2;ya.M_MOVE_TOOL=3;ya.M_ROTATE_CANVAS=4;ya.M_COLOR_PICKER=5;ya.M_GRADIENTFILL=6;ya.M_TRANSFORM=7;ya.M_PAN_CANVAS=8;ya.T_PENCIL=0;ya.T_ERASER=1;ya.T_PEN=2;ya.T_SOFTERASER=3;ya.T_AIRBRUSH=
4;ya.T_DODGE=5;ya.T_BURN=6;ya.T_WATER=7;ya.T_BLUR=8;ya.T_SMUDGE=9;ya.T_BLENDER=10;ya.T_MAX=11;ya.COLOR_MODE_RGB=0;ya.COLOR_MODE_GREYSCALE=1;window.ChickenPaint=ya;window.bootstrap=Jo}();
