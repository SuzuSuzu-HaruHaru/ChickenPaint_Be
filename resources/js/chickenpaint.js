/*
    ChickenPaint Be
    https://github.com/satopian/ChickenPaint_Be
    by satopian
    Customized from ChickenPaint by Nicholas Sherlock.
    GNU GENERAL PUBLIC LICENSE
    Version 3, 29 June 2007
    <http://www.gnu.org/licenses/>
*/
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/
/*
    jQuery JavaScript Library
    (c) OpenJS Foundation and other contributors | https://jquery.com/license/
    PEP v0.4.3 | https://github.com/jquery/PEP
    (c) OpenJS Foundation and other contributors | https://jquery.com/license/
    EventEmitter v5.2.9 - git.io/ee
    Unlicense - http://unlicense.org/
    Oliver Caldwell - https://oli.me.uk/
*/

!function(){function t(t){return t&&t.__esModule?t.default:t}var e,n,a,i,r,o,s,l,c,u,d,h,f,p,v,m,g,y,b,w,_,E,k,T,x,O,P,S,L,A,C,M,R,B,I,F,D,N,H,W,Y,U,j,z,q,X,G,V,K,Z,$,Q,J,tt,te,tn,ta,ti,tr,to,ts,tl,tc,tu,td,th,tf,tp,tv,tm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function tg(t,e,n,a){Object.defineProperty(t,e,{get:n,set:a,enumerable:!0,configurable:!0})}function ty(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var tb={},tw={},t_=function(t){return t&&t.Math===Math&&t};tw=t_("object"==typeof globalThis&&globalThis)||t_("object"==typeof window&&window)||t_("object"==typeof self&&self)||t_("object"==typeof tm&&tm)||function(){return this}()||tw||Function("return this")();var tE={},tk={};tE=!(tk=function(t){try{return!!t()}catch(t){return!0}})(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]});var tT={},tx={};tx=!tk(function(){var t=(function(){}).bind();return"function"!=typeof t||t.hasOwnProperty("prototype")});var tO=Function.prototype.call;tT=tx?tO.bind(tO):function(){return tO.apply(tO,arguments)};var tP={}.propertyIsEnumerable,tS=Object.getOwnPropertyDescriptor;o=tS&&!tP.call({1:2},1)?function(t){var e=tS(this,t);return!!e&&e.enumerable}:tP;var tL={};tL=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}};var tA={},tC={},tM={},tR=Function.prototype,tB=tR.call,tI=tx&&tR.bind.bind(tB,tB),tF={},tD=(tM=tx?tI:function(t){return function(){return tB.apply(t,arguments)}})({}.toString),tN=tM("".slice);tF=function(t){return tN(tD(t),8,-1)};var tH=Object,tW=tM("".split);tC=tk(function(){return!tH("z").propertyIsEnumerable(0)})?function(t){return"String"===tF(t)?tW(t,""):tH(t)}:tH;var tY={},tU={};tU=function(t){return null==t};var tj=TypeError;tY=function(t){if(tU(t))throw new tj("Can't call method on "+t);return t},tA=function(t){return tC(tY(t))};var tz={},tq={},tX={},tG={},tV={},tK="object"==typeof document&&document.all,tZ=(tV={all:tK,IS_HTMLDDA:void 0===tK&&void 0!==tK}).all;tG=tV.IS_HTMLDDA?function(t){return"function"==typeof t||t===tZ}:function(t){return"function"==typeof t};var t$=tV.all;tX=tV.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:tG(t)||t===t$}:function(t){return"object"==typeof t?null!==t:tG(t)};var tQ={},tJ={};tJ=function(t,e){var n;return arguments.length<2?(n=tw[t],tG(n)?n:void 0):tw[t]&&tw[t][e]};var t0={};t0=tM({}.isPrototypeOf);var t5={},t2={},t1={},t3={};t3="undefined"!=typeof navigator&&String(navigator.userAgent)||"";var t4=tw.process,t6=tw.Deno,t8=t4&&t4.versions||t6&&t6.version,t7=t8&&t8.v8;t7&&(l=(s=t7.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!l&&t3&&(!(s=t3.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=t3.match(/Chrome\/(\d+)/))&&(l=+s[1]),t1=l;var t9=tw.String;t5=(t2=!!Object.getOwnPropertySymbols&&!tk(function(){var t=Symbol("symbol detection");return!t9(t)||!(Object(t) instanceof Symbol)||!Symbol.sham&&t1&&t1<41}))&&!Symbol.sham&&"symbol"==ty(Symbol.iterator);var et=Object;tQ=t5?function(t){return(void 0===t?"undefined":ty(t))=="symbol"}:function(t){var e=tJ("Symbol");return tG(e)&&t0(e.prototype,et(t))};var ee={},en={},ea={},ei=String;ea=function(t){try{return ei(t)}catch(t){return"Object"}};var er=TypeError;en=function(t){if(tG(t))return t;throw new er(ea(t)+" is not a function")},ee=function(t,e){var n=t[e];return tU(n)?void 0:en(n)};var eo={},es=TypeError;eo=function(t,e){var n,a;if("string"===e&&tG(n=t.toString)&&!tX(a=tT(n,t))||tG(n=t.valueOf)&&!tX(a=tT(n,t))||"string"!==e&&tG(n=t.toString)&&!tX(a=tT(n,t)))return a;throw new es("Can't convert object to primitive value")};var el={},ec={},eu={};eu=!1;var ed={},eh={},ef=Object.defineProperty;eh=function(t,e){try{ef(tw,t,{value:e,configurable:!0,writable:!0})}catch(n){tw[t]=e}return e};var ep="__core-js_shared__";ed=tw[ep]||eh(ep,{}),(ec=function(t,e){return ed[t]||(ed[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.2",mode:eu?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.2/LICENSE",source:"https://github.com/zloirock/core-js"});var ev={},em={},eg=Object;em=function(t){return eg(tY(t))};var ey=tM({}.hasOwnProperty);ev=Object.hasOwn||function(t,e){return ey(em(t),e)};var eb={},ew=0,e_=Math.random(),eE=tM(1..toString);eb=function(t){return"Symbol("+(void 0===t?"":t)+")_"+eE(++ew+e_,36)};var ek=tw.Symbol,eT=ec("wks"),ex=t5?ek.for||ek:ek&&ek.withoutSetter||eb,eO=TypeError,eP=(el=function(t){return ev(eT,t)||(eT[t]=t2&&ev(ek,t)?ek[t]:ex("Symbol."+t)),eT[t]})("toPrimitive");tq=function(t,e){if(!tX(t)||tQ(t))return t;var n,a=ee(t,eP);if(a){if(void 0===e&&(e="default"),n=tT(a,t,e),!tX(n)||tQ(n))return n;throw new eO("Can't convert object to primitive value")}return void 0===e&&(e="number"),eo(t,e)},tz=function(t){var e=tq(t,"string");return tQ(e)?e:e+""};var eS={},eL={},eA=tw.document,eC=tX(eA)&&tX(eA.createElement);eL=function(t){return eC?eA.createElement(t):{}},eS=!tE&&!tk(function(){return 7!==Object.defineProperty(eL("div"),"a",{get:function(){return 7}}).a});var eM=Object.getOwnPropertyDescriptor,eR=r=tE?eM:function(t,e){if(t=tA(t),e=tz(e),eS)try{return eM(t,e)}catch(t){}if(ev(t,e))return tL(!tT(o,t,e),t[e])},eB={},eI={};eI=tE&&tk(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype});var eF={},eD=String,eN=TypeError;eF=function(t){if(tX(t))return t;throw new eN(eD(t)+" is not an object")};var eH=TypeError,eW=Object.defineProperty,eY=Object.getOwnPropertyDescriptor,eU="enumerable",ej="configurable",ez="writable";c=tE?eI?function(t,e,n){if(eF(t),e=tz(e),eF(n),"function"==typeof t&&"prototype"===e&&"value"in n&&ez in n&&!n[ez]){var a=eY(t,e);a&&a[ez]&&(t[e]=n.value,n={configurable:ej in n?n[ej]:a[ej],enumerable:eU in n?n[eU]:a[eU],writable:!1})}return eW(t,e,n)}:eW:function(t,e,n){if(eF(t),e=tz(e),eF(n),eS)try{return eW(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new eH("Accessors not supported");return"value"in n&&(t[e]=n.value),t},eB=tE?function(t,e,n){return c(t,e,tL(1,n))}:function(t,e,n){return t[e]=n,t};var eq={},eX={},eG={},eV=Function.prototype,eK=tE&&Object.getOwnPropertyDescriptor,eZ=ev(eV,"name"),e$=eZ&&(!tE||tE&&eK(eV,"name").configurable),eQ=(eG={EXISTS:eZ,PROPER:eZ&&"something"===(function(){}).name,CONFIGURABLE:e$}).CONFIGURABLE,eJ={},e0=tM(Function.toString);tG(ed.inspectSource)||(ed.inspectSource=function(t){return e0(t)}),eJ=ed.inspectSource;var e5={},e2={},e1=tw.WeakMap;e2=tG(e1)&&/native code/.test(String(e1));var e3={},e4=ec("keys");e3=function(t){return e4[t]||(e4[t]=eb(t))};var e6={};e6={};var e8="Object already initialized",e7=tw.TypeError,e9=tw.WeakMap;if(e2||ed.state){var nt=ed.state||(ed.state=new e9);nt.get=nt.get,nt.has=nt.has,nt.set=nt.set,u=function(t,e){if(nt.has(t))throw new e7(e8);return e.facade=t,nt.set(t,e),e},d=function(t){return nt.get(t)||{}},h=function(t){return nt.has(t)}}else{var ne=e3("state");e6[ne]=!0,u=function(t,e){if(ev(t,ne))throw new e7(e8);return e.facade=t,eB(t,ne,e),e},d=function(t){return ev(t,ne)?t[ne]:{}},h=function(t){return ev(t,ne)}}var nn=(e5={set:u,get:d,has:h,enforce:function(t){return h(t)?d(t):u(t,{})},getterFor:function(t){return function(e){var n;if(!tX(e)||(n=d(e)).type!==t)throw new e7("Incompatible receiver, "+t+" required");return n}}}).enforce,na=e5.get,ni=String,nr=Object.defineProperty,no=tM("".slice),ns=tM("".replace),nl=tM([].join),nc=tE&&!tk(function(){return 8!==nr(function(){},"length",{value:8}).length}),nu=String(String).split("String"),nd=eX=function(t,e,n){"Symbol("===no(ni(e),0,7)&&(e="["+ns(ni(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!ev(t,"name")||eQ&&t.name!==e)&&(tE?nr(t,"name",{value:e,configurable:!0}):t.name=e),nc&&n&&ev(n,"arity")&&t.length!==n.arity&&nr(t,"length",{value:n.arity});try{n&&ev(n,"constructor")&&n.constructor?tE&&nr(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var a=nn(t);return ev(a,"source")||(a.source=nl(nu,"string"==typeof e?e:"")),t};Function.prototype.toString=nd(function(){return tG(this)&&na(this).source||eJ(this)},"toString"),eq=function(t,e,n,a){a||(a={});var i=a.enumerable,r=void 0!==a.name?a.name:e;if(tG(n)&&eX(n,r,a),a.global)i?t[e]=n:eh(e,n);else{try{a.unsafe?t[e]&&(i=!0):delete t[e]}catch(t){}i?t[e]=n:c(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t};var nh={},nf={},np={},nv={},nm={},ng={},ny=Math.ceil,nb=Math.floor;ng=Math.trunc||function(t){var e=+t;return(e>0?nb:ny)(e)},nm=function(t){var e=+t;return e!=e||0===e?0:ng(e)};var nw=Math.max,n_=Math.min;nv=function(t,e){var n=nm(t);return n<0?nw(n+e,0):n_(n,e)};var nE={},nk={},nT=Math.min;nk=function(t){return t>0?nT(nm(t),0x1fffffffffffff):0},nE=function(t){return nk(t.length)};var nx=function(t){return function(e,n,a){var i,r=tA(e),o=nE(r),s=nv(a,o);if(t&&n!=n){for(;o>s;)if((i=r[s++])!=i)return!0}else for(;o>s;s++)if((t||s in r)&&r[s]===n)return t||s||0;return!t&&-1}},nO={includes:nx(!0),indexOf:nx(!1)}.indexOf,nP=tM([].push);np=function(t,e){var n,a=tA(t),i=0,r=[];for(n in a)!ev(e6,n)&&ev(a,n)&&nP(r,n);for(;e.length>i;)ev(a,n=e[i++])&&(~nO(r,n)||nP(r,n));return r};var nS={},nL=(nS=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]).concat("length","prototype");f=Object.getOwnPropertyNames||function(t){return np(t,nL)},p=Object.getOwnPropertySymbols;var nA=tM([].concat);nf=tJ("Reflect","ownKeys")||function(t){var e=f(eF(t)),n=p;return n?nA(e,n(t)):e},nh=function(t,e,n){for(var a=nf(e),i=c,o=r,s=0;s<a.length;s++){var l=a[s];ev(t,l)||n&&ev(n,l)||i(t,l,o(e,l))}};var nC={},nM=/#|\.prototype\./,nR=function(t,e){var n=nI[nB(t)];return n===nD||n!==nF&&(tG(e)?tk(e):!!e)},nB=nR.normalize=function(t){return String(t).replace(nM,".").toLowerCase()},nI=nR.data={},nF=nR.NATIVE="N",nD=nR.POLYFILL="P";nC=nR,tb=function(t,e){var n,a,i,r,o,s=t.target,l=t.global,c=t.stat;if(n=l?tw:c?tw[s]||eh(s,{}):(tw[s]||{}).prototype)for(a in e){if(r=e[a],i=t.dontCallGetSet?(o=eR(n,a))&&o.value:n[a],!nC(l?a:s+(c?".":"#")+a,t.forced)&&void 0!==i){if((void 0===r?"undefined":ty(r))==(void 0===i?"undefined":ty(i)))continue;nh(r,i)}(t.sham||i&&i.sham)&&eB(r,"sham",!0),eq(n,a,r,t)}};var nN={};nN=Array.isArray||function(t){return"Array"===tF(t)};var nH={},nW=TypeError;nH=function(t){if(t>0x1fffffffffffff)throw nW("Maximum allowed index exceeded");return t};var nY={};nY=function(t,e,n){var a=tz(e);a in t?c(t,a,tL(0,n)):t[a]=n};var nU={},nj={},nz={},nq={},nX={},nG=el("toStringTag"),nV={};nV[nG]="z",nX="[object z]"===String(nV);var nK=el("toStringTag"),nZ=Object,n$="Arguments"===tF(function(){return arguments}()),nQ=function(t,e){try{return t[e]}catch(t){}};nq=nX?tF:function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=nQ(e=nZ(t),nK))?n:n$?tF(e):"Object"===(a=tF(e))&&tG(e.callee)?"Arguments":a};var nJ=function(){},n0=[],n5=tJ("Reflect","construct"),n2=/^\s*(?:class|function)\b/,n1=tM(n2.exec),n3=!n2.test(nJ),n4=function(t){if(!tG(t))return!1;try{return n5(nJ,n0,t),!0}catch(t){return!1}},n6=function(t){if(!tG(t))return!1;switch(nq(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return n3||!!n1(n2,eJ(t))}catch(t){return!0}};n6.sham=!0,nz=!n5||tk(function(){var t;return n4(n4.call)||!n4(Object)||!n4(function(){t=!0})||t})?n6:n4;var n8=el("species"),n7=Array;nj=function(t){var e;return nN(t)&&(e=t.constructor,nz(e)&&(e===n7||nN(e.prototype))?e=void 0:tX(e)&&null===(e=e[n8])&&(e=void 0)),void 0===e?n7:e},nU=function(t,e){return new(nj(t))(0===e?0:e)};var n9={},at=el("species");n9=function(t){return t1>=51||!tk(function(){var e=[];return(e.constructor={})[at]=function(){return{foo:1}},1!==e[t](Boolean).foo})};var ae=el("isConcatSpreadable"),an=t1>=51||!tk(function(){var t=[];return t[ae]=!1,t.concat()[0]!==t}),aa=function(t){if(!tX(t))return!1;var e=t[ae];return void 0!==e?!!e:nN(t)},ai=!an||!n9("concat");tb({target:"Array",proto:!0,arity:1,forced:ai},{concat:function(t){var e,n,a,i,r,o=em(this),s=nU(o,0),l=0;for(e=-1,a=arguments.length;e<a;e++)if(r=-1===e?o:arguments[e],aa(r))for(i=nE(r),nH(l+i),n=0;n<i;n++,l++)n in r&&nY(s,l,r[n]);else nH(l+1),nY(s,l++,r);return s.length=l,s}});var ar={};ar=nX?({}).toString:function(){return"[object "+nq(this)+"]"},nX||eq(Object.prototype,"toString",ar,{unsafe:!0});var ao={},as=String;ao=function(t){if("Symbol"===nq(t))throw TypeError("Cannot convert a Symbol value to a string");return as(t)};var al={},ac={};ac=Object.keys||function(t){return np(t,nS)},v=tE&&!eI?Object.defineProperties:function(t,e){eF(t);for(var n,a=tA(e),i=ac(e),r=i.length,o=0;r>o;)c(t,n=i[o++],a[n]);return t};var au={};au=tJ("document","documentElement");var ad="prototype",ah="script",af=e3("IE_PROTO"),ap=function(){},av=function(t){return"<"+ah+">"+t+"</"+ah+">"},am=function(t){t.write(av("")),t.close();var e=t.parentWindow.Object;return t=null,e},ag=function(){var t,e=eL("iframe");return e.style.display="none",au.appendChild(e),e.src=String("java"+ah+":"),(t=e.contentWindow.document).open(),t.write(av("document.F=Object")),t.close(),t.F},ay=function(){try{m=new ActiveXObject("htmlfile")}catch(t){}ay="undefined"!=typeof document?document.domain&&m?am(m):ag():am(m);for(var t=nS.length;t--;)delete ay[ad][nS[t]];return ay()};e6[af]=!0,al=Object.create||function(t,e){var n;return null!==t?(ap[ad]=eF(t),n=new ap,ap[ad]=null,n[af]=t):n=ay(),void 0===e?n:v(n,e)};var ab=f,aw={},a_=Array,aE=Math.max;aw=function(t,e,n){for(var a=nE(t),i=nv(e,a),r=nv(void 0===n?a:n,a),o=a_(aE(r-i,0)),s=0;i<r;i++,s++)nY(o,s,t[i]);return o.length=s,o};var ak="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],aT=function(t){try{return ab(t)}catch(t){return aw(ak)}};g=function(t){return ak&&"Window"===tF(t)?aT(t):ab(tA(t))};var ax={};ax=function(t,e,n){return n.get&&eX(n.get,e,{getter:!0}),n.set&&eX(n.set,e,{setter:!0}),c(t,e,n)},y=el;var aO={},aP={};aP=tw;var aS=c;aO=function(t){var e=aP.Symbol||(aP.Symbol={});ev(e,t)||aS(e,t,{value:y(t)})};var aL={};aL=function(){var t=tJ("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,a=el("toPrimitive");e&&!e[a]&&eq(e,a,function(t){return tT(n,this)},{arity:1})};var aA={},aC=c,aM=el("toStringTag");aA=function(t,e,n){t&&!n&&(t=t.prototype),t&&!ev(t,aM)&&aC(t,aM,{configurable:!0,value:e})};var aR={},aB={},aI=(aB=function(t){if("Function"===tF(t))return tM(t)})(aB.bind);aR=function(t,e){return en(t),void 0===e?t:tx?aI(t,e):function(){return t.apply(e,arguments)}};var aF=tM([].push),aD=function(t){var e=1===t,n=2===t,a=3===t,i=4===t,r=6===t,o=7===t,s=5===t||r;return function(l,c,u,d){for(var h,f,p=em(l),v=tC(p),m=aR(c,u),g=nE(v),y=0,b=d||nU,w=e?b(l,g):n||o?b(l,0):void 0;g>y;y++)if((s||y in v)&&(f=m(h=v[y],y,p),t)){if(e)w[y]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return y;case 2:aF(w,h)}else switch(t){case 4:return!1;case 7:aF(w,h)}}return r?-1:a||i?i:w}},aN={forEach:aD(0),map:aD(1),filter:aD(2),some:aD(3),every:aD(4),find:aD(5),findIndex:aD(6),filterReject:aD(7)}.forEach,aH=e3("hidden"),aW="Symbol",aY="prototype",aU=e5.set,aj=e5.getterFor(aW),az=Object[aY],aq=tw.Symbol,aX=aq&&aq[aY],aG=tw.RangeError,aV=tw.TypeError,aK=tw.QObject,aZ=r,a$=c,aQ=g,aJ=o,a0=tM([].push),a5=ec("symbols"),a2=ec("op-symbols"),a1=ec("wks"),a3=!aK||!aK[aY]||!aK[aY].findChild,a4=function(t,e,n){var a=aZ(az,e);a&&delete az[e],a$(t,e,n),a&&t!==az&&a$(az,e,a)},a6=tE&&tk(function(){return 7!==al(a$({},"a",{get:function(){return a$(this,"a",{value:7}).a}})).a})?a4:a$,a8=function(t,e){var n=a5[t]=al(aX);return aU(n,{type:aW,tag:t,description:e}),tE||(n.description=e),n},a7=function(t,e,n){t===az&&a7(a2,e,n),eF(t);var a=tz(e);return(eF(n),ev(a5,a))?(n.enumerable?(ev(t,aH)&&t[aH][a]&&(t[aH][a]=!1),n=al(n,{enumerable:tL(0,!1)})):(ev(t,aH)||a$(t,aH,tL(1,{})),t[aH][a]=!0),a6(t,a,n)):a$(t,a,n)},a9=function(t,e){eF(t);var n=tA(e);return aN(ac(n).concat(ii(n)),function(e){(!tE||tT(it,n,e))&&a7(t,e,n[e])}),t},it=function(t){var e=tz(t),n=tT(aJ,this,e);return(!(this===az&&ev(a5,e))||!!ev(a2,e))&&(!(n||!ev(this,e)||!ev(a5,e)||ev(this,aH)&&this[aH][e])||n)},ie=function(t,e){var n=tA(t),a=tz(e);if(!(n===az&&ev(a5,a))||ev(a2,a)){var i=aZ(n,a);return i&&ev(a5,a)&&!(ev(n,aH)&&n[aH][a])&&(i.enumerable=!0),i}},ia=function(t){var e=aQ(tA(t)),n=[];return aN(e,function(t){ev(a5,t)||ev(e6,t)||a0(n,t)}),n},ii=function(t){var e=t===az,n=aQ(e?a2:tA(t)),a=[];return aN(n,function(t){ev(a5,t)&&(!e||ev(az,t))&&a0(a,a5[t])}),a};t2||(aX=(aq=function(){if(t0(aX,this))throw new aV("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?ao(arguments[0]):void 0,e=eb(t),n=function(t){var a=void 0===this?tw:this;a===az&&tT(n,a2,t),ev(a,aH)&&ev(a[aH],e)&&(a[aH][e]=!1);var i=tL(1,t);try{a6(a,e,i)}catch(t){if(!(t instanceof aG))throw t;a4(a,e,i)}};return tE&&a3&&a6(az,e,{configurable:!0,set:n}),a8(e,t)})[aY],eq(aX,"toString",function(){return aj(this).tag}),eq(aq,"withoutSetter",function(t){return a8(eb(t),t)}),o=it,c=a7,v=a9,r=ie,f=g=ia,p=ii,y=function(t){return a8(el(t),t)},tE&&(ax(aX,"description",{configurable:!0,get:function(){return aj(this).description}}),eu||eq(az,"propertyIsEnumerable",it,{unsafe:!0}))),tb({global:!0,constructor:!0,wrap:!0,forced:!t2,sham:!t2},{Symbol:aq}),aN(ac(a1),function(t){aO(t)}),tb({target:aW,stat:!0,forced:!t2},{useSetter:function(){a3=!0},useSimple:function(){a3=!1}}),tb({target:"Object",stat:!0,forced:!t2,sham:!tE},{create:function(t,e){return void 0===e?al(t):a9(al(t),e)},defineProperty:a7,defineProperties:a9,getOwnPropertyDescriptor:ie}),tb({target:"Object",stat:!0,forced:!t2},{getOwnPropertyNames:ia}),aL(),aA(aq,aW),e6[aH]=!0;var ir={};ir=t2&&!!Symbol.for&&!!Symbol.keyFor;var io=ec("string-to-symbol-registry"),is=ec("symbol-to-string-registry");tb({target:"Symbol",stat:!0,forced:!ir},{for:function(t){var e=ao(t);if(ev(io,e))return io[e];var n=tJ("Symbol")(e);return io[e]=n,is[n]=e,n}});var il=ec("symbol-to-string-registry");tb({target:"Symbol",stat:!0,forced:!ir},{keyFor:function(t){if(!tQ(t))throw TypeError(ea(t)+" is not a symbol");if(ev(il,t))return il[t]}});var ic={},iu=Function.prototype,id=iu.apply,ih=iu.call;ic="object"==typeof Reflect&&Reflect.apply||(tx?ih.bind(id):function(){return ih.apply(id,arguments)});var ip={};ip=tM([].slice);var iv={},im=tM([].push);iv=function(t){if(tG(t))return t;if(nN(t)){for(var e=t.length,n=[],a=0;a<e;a++){var i=t[a];"string"==typeof i?im(n,i):("number"==typeof i||"Number"===tF(i)||"String"===tF(i))&&im(n,ao(i))}var r=n.length,o=!0;return function(t,e){if(o)return o=!1,e;if(nN(this))return e;for(var a=0;a<r;a++)if(n[a]===t)return e}}};var ig=String,iy=tJ("JSON","stringify"),ib=tM(/./.exec),iw=tM("".charAt),i_=tM("".charCodeAt),iE=tM("".replace),ik=tM(1..toString),iT=/[\uD800-\uDFFF]/g,ix=/^[\uD800-\uDBFF]$/,iO=/^[\uDC00-\uDFFF]$/,iP=!t2||tk(function(){var t=tJ("Symbol")("stringify detection");return"[null]"!==iy([t])||"{}"!==iy({a:t})||"{}"!==iy(Object(t))}),iS=tk(function(){return'"\udf06\ud834"'!==iy("\uDF06\uD834")||'"\udead"'!==iy("\uDEAD")}),iL=function(t,e){var n=ip(arguments),a=iv(e);if(!(!tG(a)&&(void 0===t||tQ(t))))return n[1]=function(t,e){if(tG(a)&&(e=tT(a,this,ig(t),e)),!tQ(e))return e},ic(iy,null,n)},iA=function(t,e,n){var a=iw(n,e-1),i=iw(n,e+1);return ib(ix,t)&&!ib(iO,i)||ib(iO,t)&&!ib(ix,a)?"\\u"+ik(i_(t,0),16):t};iy&&tb({target:"JSON",stat:!0,arity:3,forced:iP||iS},{stringify:function(t,e,n){var a=ip(arguments),i=ic(iP?iL:iy,null,a);return iS&&"string"==typeof i?iE(i,iT,iA):i}});var iC=!t2||tk(function(){p(1)});tb({target:"Object",stat:!0,forced:iC},{getOwnPropertySymbols:function(t){var e=p;return e?e(em(t)):[]}}),aO("asyncIterator");var iM=tw.Symbol,iR=iM&&iM.prototype;if(tE&&tG(iM)&&(!("description"in iR)||void 0!==iM().description)){var iB={},iI=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:ao(arguments[0]),e=t0(iR,this)?new iM(t):void 0===t?iM():iM(t);return""===t&&(iB[e]=!0),e};nh(iI,iM),iI.prototype=iR,iR.constructor=iI;var iF="Symbol(description detection)"===String(iM("description detection")),iD=tM(iR.valueOf),iN=tM(iR.toString),iH=/^Symbol\((.*)\)[^)]+$/,iW=tM("".replace),iY=tM("".slice);ax(iR,"description",{configurable:!0,get:function(){var t=iD(this);if(ev(iB,t))return"";var e=iN(t),n=iF?iY(e,7,-1):iW(e,iH,"$1");return""===n?void 0:n}}),tb({global:!0,constructor:!0,forced:!0},{Symbol:iI})}aO("hasInstance"),aO("isConcatSpreadable"),aO("iterator"),aO("match"),aO("matchAll"),aO("replace"),aO("search"),aO("species"),aO("split"),aO("toPrimitive"),aL(),aO("toStringTag"),aA(tJ("Symbol"),"Symbol"),aO("unscopables"),aA(tw.JSON,"JSON",!0),aA(Math,"Math",!0),tb({global:!0},{Reflect:{}}),aA(tw.Reflect,"Reflect",!0),aP.Symbol;var iU={};iU={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};var ij={},iz=eL("span").classList,iq=iz&&iz.constructor&&iz.constructor.prototype;ij=iq===Object.prototype?void 0:iq;var iX={},iG={},iV=c,iK=el("unscopables"),iZ=Array.prototype;void 0===iZ[iK]&&iV(iZ,iK,{configurable:!0,value:al(null)}),iG=function(t){iZ[iK][t]=!0};var i$={};i$={};var iQ=c,iJ={},i0={},i5={},i2={},i1={};i1=!tk(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype});var i3=e3("IE_PROTO"),i4=Object,i6=i4.prototype;i2=i1?i4.getPrototypeOf:function(t){var e=em(t);if(ev(e,i3))return e[i3];var n=e.constructor;return tG(n)&&e instanceof n?n.prototype:e instanceof i4?i6:null};var i8=el("iterator"),i7=!1;[].keys&&("next"in(_=[].keys())?(w=i2(i2(_)))!==Object.prototype&&(b=w):i7=!0),!tX(b)||tk(function(){var t={};return b[i8].call(t)!==t})?b={}:eu&&(b=al(b)),tG(b[i8])||eq(b,i8,function(){return this});var i9=(i5={IteratorPrototype:b,BUGGY_SAFARI_ITERATORS:i7}).IteratorPrototype,rt=function(){return this};i0=function(t,e,n,a){var i=e+" Iterator";return t.prototype=al(i9,{next:tL(+!a,n)}),aA(t,i,!1,!0),i$[i]=rt,t};var re={},rn={};rn=function(t,e,n){try{return tM(en(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}};var ra={},ri=String,rr=TypeError;ra=function(t){if("object"==typeof t||tG(t))return t;throw new rr("Can't set "+ri(t)+" as a prototype")},re=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=rn(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,a){return eF(n),ra(a),e?t(n,a):n.__proto__=a,n}}():void 0);var ro=eG.PROPER,rs=eG.CONFIGURABLE,rl=i5.IteratorPrototype,rc=i5.BUGGY_SAFARI_ITERATORS,ru=el("iterator"),rd="keys",rh="values",rf="entries",rp=function(){return this};iJ=function(t,e,n,a,i,r,o){i0(n,e,a);var s,l,c,u=function(t){if(t===i&&v)return v;if(!rc&&t&&t in f)return f[t];switch(t){case rd:case rh:case rf:return function(){return new n(this,t)}}return function(){return new n(this)}},d=e+" Iterator",h=!1,f=t.prototype,p=f[ru]||f["@@iterator"]||i&&f[i],v=!rc&&p||u(i),m="Array"===e&&f.entries||p;if(m&&(s=i2(m.call(new t)))!==Object.prototype&&s.next&&(eu||i2(s)===rl||(re?re(s,rl):tG(s[ru])||eq(s,ru,rp)),aA(s,d,!0,!0),eu&&(i$[d]=rp)),ro&&i===rh&&p&&p.name!==rh&&(!eu&&rs?eB(f,"name",rh):(h=!0,v=function(){return tT(p,this)})),i){if(l={values:u(rh),keys:r?v:u(rd),entries:u(rf)},o)for(c in l)!rc&&!h&&c in f||eq(f,c,l[c]);else tb({target:e,proto:!0,forced:rc||h},l)}return(!eu||o)&&f[ru]!==v&&eq(f,ru,v,{name:i}),i$[e]=v,l};var rv={};rv=function(t,e){return{value:t,done:e}};var rm="Array Iterator",rg=e5.set,ry=e5.getterFor(rm);iX=iJ(Array,"Array",function(t,e){rg(this,{type:rm,target:tA(t),index:0,kind:e})},function(){var t=ry(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,rv(void 0,!0);switch(t.kind){case"keys":return rv(n,!1);case"values":return rv(e[n],!1)}return rv([n,e[n]],!1)},"values");var rb=i$.Arguments=i$.Array;if(iG("keys"),iG("values"),iG("entries"),!eu&&tE&&"values"!==rb.name)try{iQ(rb,"name",{value:"values"})}catch(t){}var rw=el("iterator"),r_=el("toStringTag"),rE=iX.values,rk=function(t,e){if(t){if(t[rw]!==rE)try{eB(t,rw,rE)}catch(e){t[rw]=rE}if(t[r_]||eB(t,r_,e),iU[e]){for(var n in iX)if(t[n]!==iX[n])try{eB(t,n,iX[n])}catch(e){t[n]=iX[n]}}}};for(var rT in iU)rk(tw[rT]&&tw[rT].prototype,rT);rk(ij,"DOMTokenList");var rx={};rx=function(t,e){tX(e)&&"cause"in e&&eB(t,"cause",e.cause)};var rO={},rP={},rS=Error,rL=tM("".replace),rA=String(new rS("zxcasd").stack),rC=/\n\s*at [^:]*:[^\n]*/,rM=rC.test(rA);rP=function(t,e){if(rM&&"string"==typeof t&&!rS.prepareStackTrace)for(;e--;)t=rL(t,rC,"");return t};var rR={};rR=!tk(function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",tL(1,7)),7!==t.stack)});var rB=Error.captureStackTrace;rO=function(t,e,n,a){rR&&(rB?rB(t,e):eB(t,"stack",rP(n,a)))};var rI={},rF={},rD=el("iterator"),rN=Array.prototype;rF=function(t){return void 0!==t&&(i$.Array===t||rN[rD]===t)};var rH={},rW={},rY=el("iterator");rW=function(t){if(!tU(t))return ee(t,rY)||ee(t,"@@iterator")||i$[nq(t)]};var rU=TypeError;rH=function(t,e){var n=arguments.length<2?rW(t):e;if(en(n))return eF(tT(n,t));throw new rU(ea(t)+" is not iterable")};var rj={};rj=function(t,e,n){var a,i;eF(t);try{if(!(a=ee(t,"return"))){if("throw"===e)throw n;return n}a=tT(a,t)}catch(t){i=!0,a=t}if("throw"===e)throw n;if(i)throw a;return eF(a),n};var rz=TypeError,rq=function(t,e){this.stopped=t,this.result=e},rX=rq.prototype;rI=function(t,e,n){var a,i,r,o,s,l,c,u=n&&n.that,d=!!(n&&n.AS_ENTRIES),h=!!(n&&n.IS_RECORD),f=!!(n&&n.IS_ITERATOR),p=!!(n&&n.INTERRUPTED),v=aR(e,u),m=function(t){return a&&rj(a,"normal",t),new rq(!0,t)},g=function(t){return d?(eF(t),p?v(t[0],t[1],m):v(t[0],t[1])):p?v(t,m):v(t)};if(h)a=t.iterator;else if(f)a=t;else{if(!(i=rW(t)))throw new rz(ea(t)+" is not iterable");if(rF(i)){for(r=0,o=nE(t);o>r;r++)if((s=g(t[r]))&&t0(rX,s))return s;return new rq(!1)}a=rH(t,i)}for(l=h?t.next:a.next;!(c=tT(l,a)).done;){try{s=g(c.value)}catch(t){rj(a,"throw",t)}if("object"==typeof s&&s&&t0(rX,s))return s}return new rq(!1)};var rG={};rG=function(t,e){return void 0===t?arguments.length<2?"":e:ao(t)};var rV=el("toStringTag"),rK=Error,rZ=[].push,r$=function(t,e){var n,a=t0(rQ,this);re?n=re(new rK,a?i2(this):rQ):(n=a?this:al(rQ),eB(n,rV,"Error")),void 0!==e&&eB(n,"message",rG(e)),rO(n,r$,n.stack,1),arguments.length>2&&rx(n,arguments[2]);var i=[];return rI(t,rZ,{that:i}),eB(n,"errors",i),n};re?re(r$,rK):nh(r$,rK,{name:!0});var rQ=r$.prototype=al(rK.prototype,{constructor:tL(1,r$),message:tL(1,""),name:tL(1,"AggregateError")});tb({global:!0,constructor:!0,arity:2},{AggregateError:r$});var rJ={};rJ="process"===tF(tw.process);var r0={},r5=el("species");r0=function(t){var e=tJ(t);tE&&e&&!e[r5]&&ax(e,r5,{configurable:!0,get:function(){return this}})};var r2={},r1=TypeError;r2=function(t,e){if(t0(e,t))return t;throw new r1("Incorrect invocation")};var r3={},r4={},r6=TypeError;r4=function(t){if(nz(t))return t;throw new r6(ea(t)+" is not a constructor")};var r8=el("species");r3=function(t,e){var n,a=eF(t).constructor;return void 0===a||tU(n=eF(a)[r8])?e:r4(n)};var r7={},r9={},ot=TypeError;r9=function(t,e){if(t<e)throw new ot("Not enough arguments");return t};var oe={};oe=/(?:ipad|iphone|ipod).*applewebkit/i.test(t3);var on=tw.setImmediate,oa=tw.clearImmediate,oi=tw.process,or=tw.Dispatch,oo=tw.Function,os=tw.MessageChannel,ol=tw.String,oc=0,ou={},od="onreadystatechange";tk(function(){E=tw.location});var oh=function(t){if(ev(ou,t)){var e=ou[t];delete ou[t],e()}},of=function(t){return function(){oh(t)}},op=function(t){oh(t.data)},ov=function(t){tw.postMessage(ol(t),E.protocol+"//"+E.host)};on&&oa||(on=function(t){r9(arguments.length,1);var e=tG(t)?t:oo(t),n=ip(arguments,1);return ou[++oc]=function(){ic(e,void 0,n)},k(oc),oc},oa=function(t){delete ou[t]},rJ?k=function(t){oi.nextTick(of(t))}:or&&or.now?k=function(t){or.now(of(t))}:os&&!oe?(x=(T=new os).port2,T.port1.onmessage=op,k=aR(x.postMessage,x)):tw.addEventListener&&tG(tw.postMessage)&&!tw.importScripts&&E&&"file:"!==E.protocol&&!tk(ov)?(k=ov,tw.addEventListener("message",op,!1)):k=od in eL("script")?function(t){au.appendChild(eL("script"))[od]=function(){au.removeChild(this),oh(t)}}:function(t){setTimeout(of(t),0)});var om=(r7={set:on,clear:oa}).set,og={},oy=r,ob=r7.set,ow={},o_=function(){this.head=null,this.tail=null};o_.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},ow=o_;var oE={};oE=/ipad|iphone|ipod/i.test(t3)&&"undefined"!=typeof Pebble;var ok={};ok=/web0s(?!.*chrome)/i.test(t3);var oT=tw.MutationObserver||tw.WebKitMutationObserver,ox=tw.document,oO=tw.process,oP=tw.Promise,oS=oy(tw,"queueMicrotask"),oL=oS&&oS.value;if(!oL){var oA=new ow,oC=function(){var t,e;for(rJ&&(t=oO.domain)&&t.exit();e=oA.get();)try{e()}catch(t){throw oA.head&&O(),t}t&&t.enter()};oe||rJ||ok||!oT||!ox?!oE&&oP&&oP.resolve?((L=oP.resolve(void 0)).constructor=oP,A=aR(L.then,L),O=function(){A(oC)}):rJ?O=function(){oO.nextTick(oC)}:(ob=aR(ob,tw),O=function(){ob(oC)}):(P=!0,S=ox.createTextNode(""),new oT(oC).observe(S,{characterData:!0}),O=function(){S.data=P=!P}),oL=function(t){oA.head||O(),oA.add(t)}}og=oL;var oM={};oM=function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(t){}};var oR={};oR=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}};var oB={};oB=tw.Promise;var oI={},oF={},oD={};oF=!(oD="object"==typeof Deno&&Deno&&"object"==typeof Deno.version)&&!rJ&&"object"==typeof window&&"object"==typeof document;var oN=oB&&oB.prototype,oH=el("species"),oW=!1,oY=tG(tw.PromiseRejectionEvent);oI={CONSTRUCTOR:nC("Promise",function(){var t=eJ(oB),e=t!==String(oB);if(!e&&66===t1||eu&&!(oN.catch&&oN.finally))return!0;if(!t1||t1<51||!/native code/.test(t)){var n=new oB(function(t){t(1)}),a=function(t){t(function(){},function(){})};if((n.constructor={})[oH]=a,!(oW=n.then(function(){}) instanceof a))return!0}return!e&&(oF||oD)&&!oY}),REJECTION_EVENT:oY,SUBCLASSING:oW};var oU=TypeError,oj=function(t){var e,n;this.promise=new t(function(t,a){if(void 0!==e||void 0!==n)throw new oU("Bad Promise constructor");e=t,n=a}),this.resolve=en(e),this.reject=en(n)};C=function(t){return new oj(t)};var oz="Promise",oq=oI.CONSTRUCTOR,oX=oI.REJECTION_EVENT,oG=oI.SUBCLASSING,oV=e5.getterFor(oz),oK=e5.set,oZ=oB&&oB.prototype,o$=oB,oQ=oZ,oJ=tw.TypeError,o0=tw.document,o5=tw.process,o2=C,o1=o2,o3=!!(o0&&o0.createEvent&&tw.dispatchEvent),o4="unhandledrejection",o6=function(t){var e;return!!(tX(t)&&tG(e=t.then))&&e},o8=function(t,e){var n,a,i,r=e.value,o=1===e.state,s=o?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{s?(o||(2===e.rejection&&sn(e),e.rejection=1),!0===s?n=r:(u&&u.enter(),n=s(r),u&&(u.exit(),i=!0)),n===t.promise?c(new oJ("Promise-chain cycle")):(a=o6(n))?tT(a,n,l,c):l(n)):c(r)}catch(t){u&&!i&&u.exit(),c(t)}},o7=function(t,e){t.notified||(t.notified=!0,og(function(){for(var n,a=t.reactions;n=a.get();)o8(n,t);t.notified=!1,e&&!t.rejection&&st(t)}))},o9=function(t,e,n){var a,i;o3?((a=o0.createEvent("Event")).promise=e,a.reason=n,a.initEvent(t,!1,!0),tw.dispatchEvent(a)):a={promise:e,reason:n},!oX&&(i=tw["on"+t])?i(a):t===o4&&oM("Unhandled promise rejection",n)},st=function(t){tT(om,tw,function(){var e,n=t.facade,a=t.value;if(se(t)&&(e=oR(function(){rJ?o5.emit("unhandledRejection",a,n):o9(o4,n,a)}),t.rejection=rJ||se(t)?2:1,e.error))throw e.value})},se=function(t){return 1!==t.rejection&&!t.parent},sn=function(t){tT(om,tw,function(){var e=t.facade;rJ?o5.emit("rejectionHandled",e):o9("rejectionhandled",e,t.value)})},sa=function(t,e,n){return function(a){t(e,a,n)}},si=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,o7(t,!0))},sr=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw new oJ("Promise can't be resolved itself");var a=o6(e);a?og(function(){var n={done:!1};try{tT(a,e,sa(sr,n,t),sa(si,n,t))}catch(e){si(n,e,t)}}):(t.value=e,t.state=1,o7(t,!1))}catch(e){si({done:!1},e,t)}}};if(oq&&(oQ=(o$=function(t){r2(this,oQ),en(t),tT(M,this);var e=oV(this);try{t(sa(sr,e),sa(si,e))}catch(t){si(e,t)}}).prototype,(M=function(t){oK(this,{type:oz,done:!1,notified:!1,parent:!1,reactions:new ow,rejection:!1,state:0,value:void 0})}).prototype=eq(oQ,"then",function(t,e){var n=oV(this),a=o2(r3(this,o$));return n.parent=!0,a.ok=!tG(t)||t,a.fail=tG(e)&&e,a.domain=rJ?o5.domain:void 0,0===n.state?n.reactions.add(a):og(function(){o8(a,n)}),a.promise}),R=function(){var t=new M,e=oV(t);this.promise=t,this.resolve=sa(sr,e),this.reject=sa(si,e)},C=o2=function(t){return t===o$||t===B?new R(t):o1(t)},!eu&&tG(oB)&&oZ!==Object.prototype)){I=oZ.then,oG||eq(oZ,"then",function(t,e){var n=this;return new o$(function(t,e){tT(I,n,t,e)}).then(t,e)},{unsafe:!0});try{delete oZ.constructor}catch(t){}re&&re(oZ,oQ)}tb({global:!0,constructor:!0,wrap:!0,forced:oq},{Promise:o$}),aA(o$,oz,!1,!0),r0(oz);var so={},ss={},sl=el("iterator"),sc=!1;try{var su=0,sd={next:function(){return{done:!!su++}},return:function(){sc=!0}};sd[sl]=function(){return this},Array.from(sd,function(){throw 2})}catch(t){}ss=function(t,e){try{if(!e&&!sc)return!1}catch(t){return!1}var n=!1;try{var a={};a[sl]=function(){return{next:function(){return{done:n=!0}}}},t(a)}catch(t){}return n},so=oI.CONSTRUCTOR||!ss(function(t){oB.all(t).then(void 0,function(){})}),tb({target:"Promise",stat:!0,forced:so},{all:function(t){var e=this,n=C(e),a=n.resolve,i=n.reject,r=oR(function(){var n=en(e.resolve),r=[],o=0,s=1;rI(t,function(t){var l=o++,c=!1;s++,tT(n,e,t).then(function(t){!c&&(c=!0,r[l]=t,--s||a(r))},i)}),--s||a(r)});return r.error&&i(r.value),n.promise}});var sh=oI.CONSTRUCTOR,sf=oB&&oB.prototype;if(tb({target:"Promise",proto:!0,forced:sh,real:!0},{catch:function(t){return this.then(void 0,t)}}),!eu&&tG(oB)){var sp=tJ("Promise").prototype.catch;sf.catch!==sp&&eq(sf,"catch",sp,{unsafe:!0})}tb({target:"Promise",stat:!0,forced:so},{race:function(t){var e=this,n=C(e),a=n.reject,i=oR(function(){var i=en(e.resolve);rI(t,function(t){tT(i,e,t).then(n.resolve,a)})});return i.error&&a(i.value),n.promise}});var sv=oI.CONSTRUCTOR;tb({target:"Promise",stat:!0,forced:sv},{reject:function(t){var e=C(this);return tT(e.reject,void 0,t),e.promise}});var sm=oI.CONSTRUCTOR,sg={};sg=function(t,e){if(eF(t),tX(e)&&e.constructor===t)return e;var n=C(t);return(0,n.resolve)(e),n.promise};var sy=tJ("Promise"),sb=eu&&!sm;tb({target:"Promise",stat:!0,forced:eu||sm},{resolve:function(t){return sg(sb&&this===sy?oB:this,t)}}),tb({target:"Promise",stat:!0,forced:so},{allSettled:function(t){var e=this,n=C(e),a=n.resolve,i=n.reject,r=oR(function(){var n=en(e.resolve),i=[],r=0,o=1;rI(t,function(t){var s=r++,l=!1;o++,tT(n,e,t).then(function(t){!l&&(l=!0,i[s]={status:"fulfilled",value:t},--o||a(i))},function(t){!l&&(l=!0,i[s]={status:"rejected",reason:t},--o||a(i))})}),--o||a(i)});return r.error&&i(r.value),n.promise}});var sw="No one promise resolved";tb({target:"Promise",stat:!0,forced:so},{any:function(t){var e=this,n=tJ("AggregateError"),a=C(e),i=a.resolve,r=a.reject,o=oR(function(){var a=en(e.resolve),o=[],s=0,l=1,c=!1;rI(t,function(t){var u=s++,d=!1;l++,tT(a,e,t).then(function(t){d||c||(c=!0,i(t))},function(t){!d&&!c&&(d=!0,o[u]=t,--l||r(new n(o,sw)))})}),--l||r(new n(o,sw))});return o.error&&r(o.value),a.promise}});var s_=oB&&oB.prototype,sE=!!oB&&tk(function(){s_.finally.call({then:function(){}},function(){})});if(tb({target:"Promise",proto:!0,real:!0,forced:sE},{finally:function(t){var e=r3(this,tJ("Promise")),n=tG(t);return this.then(n?function(n){return sg(e,t()).then(function(){return n})}:t,n?function(n){return sg(e,t()).then(function(){throw n})}:t)}}),!eu&&tG(oB)){var sk=tJ("Promise").prototype.finally;s_.finally!==sk&&eq(s_,"finally",sk,{unsafe:!0})}var sT=tM("".charAt),sx=tM("".charCodeAt),sO=tM("".slice),sP=function(t){return function(e,n){var a,i,r=ao(tY(e)),o=nm(n),s=r.length;return o<0||o>=s?t?"":void 0:(a=sx(r,o))<55296||a>56319||o+1===s||(i=sx(r,o+1))<56320||i>57343?t?sT(r,o):a:t?sO(r,o,o+2):(a-55296<<10)+(i-56320)+65536}},sS={codeAt:sP(!1),charAt:sP(!0)}.charAt,sL="String Iterator",sA=e5.set,sC=e5.getterFor(sL);iJ(String,"String",function(t){sA(this,{type:sL,string:ao(t),index:0})},function(){var t,e=sC(this),n=e.string,a=e.index;return a>=n.length?rv(void 0,!0):(t=sS(n,a),e.index+=t.length,rv(t,!1))}),aP.Promise;var sM={},sR={},sB=c,sI={},sF={};sF=tk(function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}});var sD=Object.isExtensible;sI=tk(function(){sD(1)})||sF?function(t){return!!tX(t)&&(!sF||"ArrayBuffer"!==tF(t))&&(!sD||sD(t))}:sD;var sN={};sN=!tk(function(){return Object.isExtensible(Object.preventExtensions({}))});var sH=!1,sW=eb("meta"),sY=0,sU=function(t){sB(t,sW,{value:{objectID:"O"+sY++,weakData:{}}})},sj=sR={enable:function(){sj.enable=function(){},sH=!0;var t=f,e=tM([].splice),n={};n[sW]=1,t(n).length&&(f=function(n){for(var a=t(n),i=0,r=a.length;i<r;i++)if(a[i]===sW){e(a,i,1);break}return a},tb({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:g}))},fastKey:function(t,e){if(!tX(t))return(void 0===t?"undefined":ty(t))=="symbol"?t:("string"==typeof t?"S":"P")+t;if(!ev(t,sW)){if(!sI(t))return"F";if(!e)return"E";sU(t)}return t[sW].objectID},getWeakData:function(t,e){if(!ev(t,sW)){if(!sI(t))return!0;if(!e)return!1;sU(t)}return t[sW].weakData},onFreeze:function(t){return sN&&sH&&sI(t)&&!ev(t,sW)&&sU(t),t}};e6[sW]=!0;var sz={};sz=function(t,e,n){var a,i;return re&&tG(a=e.constructor)&&a!==n&&tX(i=a.prototype)&&i!==n.prototype&&re(t,i),t},sM=function(t,e,n){var a=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),r=a?"set":"add",o=tw[t],s=o&&o.prototype,l=o,c={},u=function(t){var e=tM(s[t]);eq(s,t,"add"===t?function(t){return e(this,0===t?0:t),this}:"delete"===t?function(t){return(!i||!!tX(t))&&e(this,0===t?0:t)}:"get"===t?function(t){return i&&!tX(t)?void 0:e(this,0===t?0:t)}:"has"===t?function(t){return(!i||!!tX(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(nC(t,!tG(o)||!(i||s.forEach&&!tk(function(){new o().entries().next()}))))l=n.getConstructor(e,t,a,r),sR.enable();else if(nC(t,!0)){var d=new l,h=d[r](i?{}:-0,1)!==d,f=tk(function(){d.has(1)}),p=ss(function(t){new o(t)}),v=!i&&tk(function(){for(var t=new o,e=5;e--;)t[r](e,e);return!t.has(-0)});p||((l=e(function(t,e){r2(t,s);var n=sz(new o,t,l);return tU(e)||rI(e,n[r],{that:n,AS_ENTRIES:a}),n})).prototype=s,s.constructor=l),(f||v)&&(u("delete"),u("has"),a&&u("get")),(v||h)&&u(r),i&&s.clear&&delete s.clear}return c[t]=l,tb({global:!0,constructor:!0,forced:l!==o},c),aA(l,t),i||n.setStrong(l,t,a),l};var sq={},sX={};sX=function(t,e,n){for(var a in e)eq(t,a,e[a],n);return t};var sG=sR.fastKey,sV=e5.set,sK=e5.getterFor;sM("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},sq={getConstructor:function(t,e,n,a){var i=t(function(t,i){r2(t,r),sV(t,{type:e,index:al(null),first:void 0,last:void 0,size:0}),tE||(t.size=0),tU(i)||rI(i,t[a],{that:t,AS_ENTRIES:n})}),r=i.prototype,o=sK(e),s=function(t,e,n){var a,i,r=o(t),s=l(t,e);return s?s.value=n:(r.last=s={index:i=sG(e,!0),key:e,value:n,previous:a=r.last,next:void 0,removed:!1},r.first||(r.first=s),a&&(a.next=s),tE?r.size++:t.size++,"F"!==i&&(r.index[i]=s)),t},l=function(t,e){var n,a=o(t),i=sG(e);if("F"!==i)return a.index[i];for(n=a.first;n;n=n.next)if(n.key===e)return n};return sX(r,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,tE?t.size=0:this.size=0},delete:function(t){var e=o(this),n=l(this,t);if(n){var a=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=a),a&&(a.previous=i),e.first===n&&(e.first=a),e.last===n&&(e.last=i),tE?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=o(this),a=aR(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(a(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),sX(r,n?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),tE&&ax(r,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var a=e+" Iterator",i=sK(e),r=sK(a);iJ(t,e,function(t,e){sV(this,{type:a,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=r(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"===e?rv(n.key,!1):"values"===e?rv(n.value,!1):rv([n.key,n.value],!1):(t.target=void 0,rv(void 0,!0))},n?"entries":"values",!n,!0),r0(e)}}),aP.Map,sM("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},sq),aP.Set;var sZ={},s$={};s$="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView;var sQ=e5.enforce,sJ=e5.get,s0=tw.Int8Array,s5=s0&&s0.prototype,s2=tw.Uint8ClampedArray,s1=s2&&s2.prototype,s3=s0&&i2(s0),s4=s5&&i2(s5),s6=Object.prototype,s8=tw.TypeError,s7=el("toStringTag"),s9=eb("TYPED_ARRAY_TAG"),lt="TypedArrayConstructor",le=s$&&!!re&&"Opera"!==nq(tw.opera),ln=!1,la={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},li={BigInt64Array:8,BigUint64Array:8},lr=function(t){var e=i2(t);if(tX(e)){var n=sJ(e);return n&&ev(n,lt)?n[lt]:lr(e)}},lo=function(t){if(!tX(t))return!1;var e=nq(t);return ev(la,e)||ev(li,e)};for(F in la)(N=(D=tw[F])&&D.prototype)?sQ(N)[lt]=D:le=!1;for(F in li)(N=(D=tw[F])&&D.prototype)&&(sQ(N)[lt]=D);if((!le||!tG(s3)||s3===Function.prototype)&&(s3=function(){throw new s8("Incorrect invocation")},le))for(F in la)tw[F]&&re(tw[F],s3);if((!le||!s4||s4===s6)&&(s4=s3.prototype,le))for(F in la)tw[F]&&re(tw[F].prototype,s4);if(le&&i2(s1)!==s4&&re(s1,s4),tE&&!ev(s4,s7))for(F in ln=!0,ax(s4,s7,{configurable:!0,get:function(){return tX(this)?this[s9]:void 0}}),la)tw[F]&&eB(tw[F],s9,F);var ls={},ll=(sZ={NATIVE_ARRAY_BUFFER_VIEWS:le,TYPED_ARRAY_TAG:ln&&s9,aTypedArray:function(t){if(lo(t))return t;throw new s8("Target is not a typed array")},aTypedArrayConstructor:function(t){if(tG(t)&&(!re||t0(s3,t)))return t;throw new s8(ea(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,a){if(tE){if(n)for(var i in la){var r=tw[i];if(r&&ev(r.prototype,t))try{delete r.prototype[t]}catch(n){try{r.prototype[t]=e}catch(t){}}}(!s4[t]||n)&&eq(s4,t,n?e:le&&s5[t]||e,a)}},exportTypedArrayStaticMethod:function(t,e,n){var a,i;if(tE){if(re){if(n){for(a in la)if((i=tw[a])&&ev(i,t))try{delete i[t]}catch(t){}}if(s3[t]&&!n)return;try{return eq(s3,t,n?e:le&&s3[t]||e)}catch(t){}}for(a in la)(i=tw[a])&&(!i[t]||n)&&eq(i,t,e)}},getTypedArrayConstructor:lr,isView:function(t){if(!tX(t))return!1;var e=nq(t);return"DataView"===e||ev(la,e)||ev(li,e)},isTypedArray:lo,TypedArray:s3,TypedArrayPrototype:s4}).aTypedArrayConstructor,lc=sZ.getTypedArrayConstructor;ls=function(t){return ll(r3(t,lc(t)))};var lu=sZ.aTypedArray;(0,sZ.exportTypedArrayMethod)("slice",function(t,e){for(var n=ip(lu(this),t,e),a=ls(this),i=0,r=n.length,o=new a(r);r>i;)o[i]=n[i++];return o},tk(function(){new Int8Array(1).slice()}));var ld={};ld=function(t){for(var e=em(this),n=nE(e),a=arguments.length,i=nv(a>1?arguments[1]:void 0,n),r=a>2?arguments[2]:void 0,o=void 0===r?n:nv(r,n);o>i;)e[i++]=t;return e};var lh={},lf=TypeError;lh=function(t){var e=tq(t,"number");if("number"==typeof e)throw new lf("Can't convert number to bigint");return BigInt(e)};var lp=sZ.aTypedArray,lv=sZ.exportTypedArrayMethod,lm=tM("".slice);lv("fill",function(t){var e=arguments.length;lp(this);var n="Big"===lm(nq(this),0,3)?lh(t):+t;return tT(ld,this,n,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)},tk(function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t}));var lg={};(lg=function(t,e){return tM(tw[t].prototype[e])})("Array","values"),tb({target:"Array",proto:!0},{fill:ld}),iG("fill"),lg("Array","fill");var ly=r,lb={},lw={},l_=el("match");lw=function(t){var e;return tX(t)&&(void 0!==(e=t[l_])?!!e:"RegExp"===tF(t))};var lE=TypeError;lb=function(t){if(lw(t))throw new lE("The method doesn't accept regular expressions");return t};var lk={},lT=el("match");lk=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[lT]=!1,"/./"[t](e)}catch(t){}}return!1};var lx=aB("".endsWith),lO=aB("".slice),lP=Math.min,lS=lk("endsWith"),lL=!eu&&!lS&&!!((e=ly(String.prototype,"endsWith"))&&!e.writable);tb({target:"String",proto:!0,forced:!lL&&!lS},{endsWith:function(t){var e=ao(tY(this));lb(t);var n=arguments.length>1?arguments[1]:void 0,a=e.length,i=void 0===n?a:lP(nk(n),a),r=ao(t);return lx?lx(e,r,i):lO(e,i-r.length,i)===r}}),lg("String","endsWith");var lA={};n="undefined"!=typeof window?window:void 0,a=function(t,e){var n,a=[],i=Object.getPrototypeOf,r=a.slice,o=a.flat?function(t){return a.flat.call(t)}:function(t){return a.concat.apply([],t)},s=a.push,l=a.indexOf,c={},u=c.toString,d=c.hasOwnProperty,h=d.toString,f=h.call(Object),p={},v=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},m=function(t){return null!=t&&t===t.window},g=t.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var a,i,r=(n=n||g).createElement("script");if(r.text=t,e)for(a in y)(i=e[a]||e.getAttribute&&e.getAttribute(a))&&r.setAttribute(a,i);n.head.appendChild(r).parentNode.removeChild(r)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[u.call(t)]||"object":void 0===t?"undefined":ty(t)}var _="3.7.1",E=/HTML$/i,k=function(t,e){return new k.fn.init(t,e)};function T(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!(v(t)||m(t))&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function x(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}k.fn=k.prototype={jquery:_,constructor:k,length:0,toArray:function(){return r.call(this)},get:function(t){return null==t?r.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=k.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return k.each(this,t)},map:function(t){return this.pushStack(k.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(k.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(k.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:a.sort,splice:a.splice},k.extend=k.fn.extend=function(){var t,e,n,a,i,r,o=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"==typeof o||v(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)a=t[e],"__proto__"!==e&&o!==a&&(c&&a&&(k.isPlainObject(a)||(i=Array.isArray(a)))?(n=o[e],r=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,o[e]=k.extend(c,r,a)):void 0!==a&&(o[e]=a));return o},k.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!!t&&"[object Object]"===u.call(t)&&(!(e=i(t))||"function"==typeof(n=d.call(e,"constructor")&&e.constructor)&&h.call(n)===f)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){b(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,a=0;if(T(t))for(n=t.length;a<n&&!1!==e.call(t[a],a,t[a]);a++);else for(a in t)if(!1===e.call(t[a],a,t[a]))break;return t},text:function(t){var e,n="",a=0,i=t.nodeType;if(!i)for(;e=t[a++];)n+=k.text(e);return 1===i||11===i?t.textContent:9===i?t.documentElement.textContent:3===i||4===i?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(T(Object(t))?k.merge(n,"string"==typeof t?[t]:t):s.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:l.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!E.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,a=0,i=t.length;a<n;a++)t[i++]=e[a];return t.length=i,t},grep:function(t,e,n){for(var a=[],i=0,r=t.length,o=!n;i<r;i++)!e(t[i],i)!==o&&a.push(t[i]);return a},map:function(t,e,n){var a,i,r=0,s=[];if(T(t))for(a=t.length;r<a;r++)null!=(i=e(t[r],r,n))&&s.push(i);else for(r in t)null!=(i=e(t[r],r,n))&&s.push(i);return o(s)},guid:1,support:p}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=a[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){c["[object "+e+"]"]=e.toLowerCase()});var O=a.pop,P=a.sort,S=a.splice,L="[\\x20\\t\\r\\n\\f]",A=RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g");k.contains=function(t,e){var n=e&&e.parentNode;return t===n||!!(n&&1===n.nodeType&&(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var C=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function M(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}k.escapeSelector=function(t){return(t+"").replace(C,M)},function(){var e,n,i,o,c,u,h,f,v,m,y=s,b=k.expando,w=0,_=0,E=tt(),T=tt(),C=tt(),M=tt(),R=function(t,e){return t===e&&(c=!0),0},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="(?:\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+L+"*("+I+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+L+"*\\]",D=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",N=RegExp(L+"+","g"),H=RegExp("^"+L+"*,"+L+"*"),W=RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),Y=RegExp(L+"|>"),U=new RegExp(D),j=RegExp("^"+I+"$"),z={ID:RegExp("^#("+I+")"),CLASS:RegExp("^\\.("+I+")"),TAG:RegExp("^("+I+"|[*])"),ATTR:RegExp("^"+F),PSEUDO:RegExp("^"+D),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:RegExp("^(?:"+B+")$","i"),needsContext:RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},q=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,V=/[+~]/,K=RegExp("\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\([^\\r\\n\\f])","g"),Z=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},$=function(){to()},Q=tu(function(t){return!0===t.disabled&&x(t,"fieldset")},{dir:"parentNode",next:"legend"});try{y.apply(a=r.call(g.childNodes),g.childNodes),a[g.childNodes.length].nodeType}catch(t){y={apply:function(t,e){s.apply(t,r.call(e))},call:function(t){s.apply(t,r.call(arguments,1))}}}function J(t,e,n,a){var i,r,o,s,l,c,d,h=e&&e.ownerDocument,m=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==m&&9!==m&&11!==m)return n;if(!a&&(to(e),e=e||u,f)){if(11!==m&&(l=G.exec(t))){if(i=l[1]){if(9===m){if(!(o=e.getElementById(i)))return n;if(o.id===i)return y.call(n,o),n}else if(h&&(o=h.getElementById(i))&&J.contains(e,o)&&o.id===i)return y.call(n,o),n}else if(l[2])return y.apply(n,e.getElementsByTagName(t)),n;else if((i=l[3])&&e.getElementsByClassName)return y.apply(n,e.getElementsByClassName(i)),n}if(!M[t+" "]&&(!v||!v.test(t))){if(d=t,h=e,1===m&&(Y.test(t)||W.test(t))){for((h=V.test(t)&&tr(e.parentNode)||e)==e&&p.scope||((s=e.getAttribute("id"))?s=k.escapeSelector(s):e.setAttribute("id",s=b)),r=(c=tl(t)).length;r--;)c[r]=(s?"#"+s:":scope")+" "+tc(c[r]);d=c.join(",")}try{return y.apply(n,h.querySelectorAll(d)),n}catch(e){M(t,!0)}finally{s===b&&e.removeAttribute("id")}}}return tp(t.replace(A,"$1"),e,n,a)}function tt(){var t=[];return function e(a,i){return t.push(a+" ")>n.cacheLength&&delete e[t.shift()],e[a+" "]=i}}function te(t){return t[b]=!0,t}function tn(t){var e=u.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ta(t){return function(e){if("form"in e)return e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||!t!==e.isDisabled&&Q(e)===t:e.disabled===t;return"label"in e&&e.disabled===t}}function ti(t){return te(function(e){return e=+e,te(function(n,a){for(var i,r=t([],n.length,e),o=r.length;o--;)n[i=r[o]]&&(n[i]=!(a[i]=n[i]))})})}function tr(t){return t&&void 0!==t.getElementsByTagName&&t}function to(t){var e,a=t?t.ownerDocument||t:g;return a!=u&&9===a.nodeType&&a.documentElement&&(h=(u=a).documentElement,f=!k.isXMLDoc(u),m=h.matches||h.webkitMatchesSelector||h.msMatchesSelector,h.msMatchesSelector&&g!=u&&(e=u.defaultView)&&e.top!==e&&e.addEventListener("unload",$),p.getById=tn(function(t){return h.appendChild(t).id=k.expando,!u.getElementsByName||!u.getElementsByName(k.expando).length}),p.disconnectedMatch=tn(function(t){return m.call(t,"*")}),p.scope=tn(function(){return u.querySelectorAll(":scope")}),p.cssHas=tn(function(){try{return u.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}}),p.getById?(n.filter.ID=function(t){var e=t.replace(K,Z);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var n=e.getElementById(t);return n?[n]:[]}}):(n.filter.ID=function(t){var e=t.replace(K,Z);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var n,a,i,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(i=e.getElementsByName(t),a=0;r=i[a++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),n.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},n.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&f)return e.getElementsByClassName(t)},v=[],tn(function(t){var e;h.appendChild(t).innerHTML="<a id='"+b+"' href='' disabled='disabled'></a><select id='"+b+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||v.push("\\["+L+"*(?:value|"+B+")"),t.querySelectorAll("[id~="+b+"-]").length||v.push("~="),t.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]"),t.querySelectorAll(":checked").length||v.push(":checked"),(e=u.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),h.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),(e=u.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||v.push("\\["+L+"*name"+L+"*="+L+"*(?:''|\"\")")}),p.cssHas||v.push(":has"),v=v.length&&new RegExp(v.join("|")),R=function(t,e){if(t===e)return c=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!p.sortDetached&&e.compareDocumentPosition(t)===n?t===u||t.ownerDocument==g&&J.contains(g,t)?-1:e===u||e.ownerDocument==g&&J.contains(g,e)?1:o?l.call(o,t)-l.call(o,e):0:4&n?-1:1)}),u}for(e in J.matches=function(t,e){return J(t,null,null,e)},J.matchesSelector=function(t,e){if(to(t),f&&!M[e+" "]&&(!v||!v.test(e)))try{var n=m.call(t,e);if(n||p.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){M(e,!0)}return J(e,u,null,[t]).length>0},J.contains=function(t,e){return(t.ownerDocument||t)!=u&&to(t),k.contains(t,e)},J.attr=function(t,e){(t.ownerDocument||t)!=u&&to(t);var a=n.attrHandle[e.toLowerCase()],i=a&&d.call(n.attrHandle,e.toLowerCase())?a(t,e,!f):void 0;return void 0!==i?i:t.getAttribute(e)},J.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},k.uniqueSort=function(t){var e,n=[],a=0,i=0;if(c=!p.sortStable,o=!p.sortStable&&r.call(t,0),P.call(t,R),c){for(;e=t[i++];)e===t[i]&&(a=n.push(i));for(;a--;)S.call(t,n[a],1)}return o=null,t},k.fn.uniqueSort=function(){return this.pushStack(k.uniqueSort(r.apply(this)))},(n=k.expr={cacheLength:50,createPseudo:te,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(K,Z),t[3]=(t[3]||t[4]||t[5]||"").replace(K,Z),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||J.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&J.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return z.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&U.test(n)&&(e=tl(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(K,Z).toLowerCase();return"*"===t?function(){return!0}:function(t){return x(t,e)}},CLASS:function(t){var e=E[t+" "];return e||(e=RegExp("(^|"+L+")"+t+"("+L+"|$)"),E(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(a){var i=J.attr(a,t);return null==i?"!="===e:!e||((i+="","="===e)?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(N," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,a,i){var r="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===a&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var c,u,d,h,f,p=r!==o?"nextSibling":"previousSibling",v=e.parentNode,m=s&&e.nodeName.toLowerCase(),g=!l&&!s,y=!1;if(v){if(r){for(;p;){for(d=e;d=d[p];)if(s?x(d,m):1===d.nodeType)return!1;f=p="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?v.firstChild:v.lastChild],o&&g){for(y=(h=(c=(u=v[b]||(v[b]={}))[t]||[])[0]===w&&c[1])&&c[2],d=h&&v.childNodes[h];d=++h&&d&&d[p]||(y=h=0)||f.pop();)if(1===d.nodeType&&++y&&d===e){u[t]=[w,h,y];break}}else if(g&&(y=h=(c=(u=e[b]||(e[b]={}))[t]||[])[0]===w&&c[1]),!1===y)for(;(d=++h&&d&&d[p]||(y=h=0)||f.pop())&&(!((s?x(d,m):1===d.nodeType)&&++y)||(g&&((u=d[b]||(d[b]={}))[t]=[w,y]),d!==e)););return(y-=i)===a||y%a==0&&y/a>=0}}},PSEUDO:function(t,e){var a,i=n.pseudos[t]||n.setFilters[t.toLowerCase()]||J.error("unsupported pseudo: "+t);return i[b]?i(e):i.length>1?(a=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?te(function(t,n){for(var a,r=i(t,e),o=r.length;o--;)a=l.call(t,r[o]),t[a]=!(n[a]=r[o])}):function(t){return i(t,0,a)}):i}},pseudos:{not:te(function(t){var e=[],n=[],a=tf(t.replace(A,"$1"));return a[b]?te(function(t,e,n,i){for(var r,o=a(t,null,i,[]),s=t.length;s--;)(r=o[s])&&(t[s]=!(e[s]=r))}):function(t,i,r){return e[0]=t,a(e,null,r,n),e[0]=null,!n.pop()}}),has:te(function(t){return function(e){return J(t,e).length>0}}),contains:te(function(t){return t=t.replace(K,Z),function(e){return(e.textContent||k.text(e)).indexOf(t)>-1}}),lang:te(function(t){return j.test(t||"")||J.error("unsupported lang: "+t),t=t.replace(K,Z).toLowerCase(),function(e){var n;do if(n=f?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType)return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===h},focus:function(t){return t===function(){try{return u.activeElement}catch(t){}}()&&u.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ta(!1),disabled:ta(!0),checked:function(t){return x(t,"input")&&!!t.checked||x(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return X.test(t.nodeName)},input:function(t){return q.test(t.nodeName)},button:function(t){return x(t,"input")&&"button"===t.type||x(t,"button")},text:function(t){var e;return x(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ti(function(){return[0]}),last:ti(function(t,e){return[e-1]}),eq:ti(function(t,e,n){return[n<0?n+e:n]}),even:ti(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:ti(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:ti(function(t,e,n){var a;for(a=n<0?n+e:n>e?e:n;--a>=0;)t.push(a);return t}),gt:ti(function(t,e,n){for(var a=n<0?n+e:n;++a<e;)t.push(a);return t})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=function(t){return function(e){return x(e,"input")&&e.type===t}}(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=function(t){return function(e){return(x(e,"input")||x(e,"button"))&&e.type===t}}(e);function ts(){}function tl(t,e){var a,i,r,o,s,l,c,u=T[t+" "];if(u)return e?0:u.slice(0);for(s=t,l=[],c=n.preFilter;s;){for(o in(!a||(i=H.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(r=[])),a=!1,(i=W.exec(s))&&(a=i.shift(),r.push({value:a,type:i[0].replace(A," ")}),s=s.slice(a.length)),n.filter)(i=z[o].exec(s))&&(!c[o]||(i=c[o](i)))&&(a=i.shift(),r.push({value:a,type:o,matches:i}),s=s.slice(a.length));if(!a)break}return e?s.length:s?J.error(t):T(t,l).slice(0)}function tc(t){for(var e=0,n=t.length,a="";e<n;e++)a+=t[e].value;return a}function tu(t,e,n){var a=e.dir,i=e.next,r=i||a,o=n&&"parentNode"===r,s=_++;return e.first?function(e,n,i){for(;e=e[a];)if(1===e.nodeType||o)return t(e,n,i);return!1}:function(e,n,l){var c,u,d=[w,s];if(l){for(;e=e[a];)if((1===e.nodeType||o)&&t(e,n,l))return!0}else for(;e=e[a];)if(1===e.nodeType||o){if(u=e[b]||(e[b]={}),i&&x(e,i))e=e[a]||e;else{if((c=u[r])&&c[0]===w&&c[1]===s)return d[2]=c[2];if(u[r]=d,d[2]=t(e,n,l))return!0}}return!1}}function td(t){return t.length>1?function(e,n,a){for(var i=t.length;i--;)if(!t[i](e,n,a))return!1;return!0}:t[0]}function th(t,e,n,a,i){for(var r,o=[],s=0,l=t.length,c=null!=e;s<l;s++)(r=t[s])&&(!n||n(r,a,i))&&(o.push(r),c&&e.push(s));return o}function tf(t,e){var a,r,o,s,c=[],d=[],h=C[t+" "];if(!h){for(e||(e=tl(t)),s=e.length;s--;)(h=function t(e){for(var a,r,o,s=e.length,c=n.relative[e[0].type],u=c||n.relative[" "],d=c?1:0,h=tu(function(t){return t===a},u,!0),f=tu(function(t){return l.call(a,t)>-1},u,!0),p=[function(t,e,n){var r=!c&&(n||e!=i)||((a=e).nodeType?h(t,e,n):f(t,e,n));return a=null,r}];d<s;d++)if(r=n.relative[e[d].type])p=[tu(td(p),r)];else{if((r=n.filter[e[d].type].apply(null,e[d].matches))[b]){for(o=++d;o<s&&!n.relative[e[o].type];o++);return function t(e,n,a,i,r,o){return i&&!i[b]&&(i=t(i)),r&&!r[b]&&(r=t(r,o)),te(function(t,o,s,c){var u,d,h,f,p=[],v=[],m=o.length,g=t||function(t,e,n){for(var a=0,i=e.length;a<i;a++)J(t,e[a],n);return n}(n||"*",s.nodeType?[s]:s,[]),b=e&&(t||!n)?th(g,p,e,s,c):g;if(a?a(b,f=r||(t?e:m||i)?[]:o,s,c):f=b,i)for(u=th(f,v),i(u,[],s,c),d=u.length;d--;)(h=u[d])&&(f[v[d]]=!(b[v[d]]=h));if(t){if(r||e){if(r){for(u=[],d=f.length;d--;)(h=f[d])&&u.push(b[d]=h);r(null,f=[],u,c)}for(d=f.length;d--;)(h=f[d])&&(u=r?l.call(t,h):p[d])>-1&&(t[u]=!(o[u]=h))}}else f=th(f===o?f.splice(m,f.length):f),r?r(null,o,f,c):y.apply(o,f)})}(d>1&&td(p),d>1&&tc(e.slice(0,d-1).concat({value:" "===e[d-2].type?"*":""})).replace(A,"$1"),r,d<o&&t(e.slice(d,o)),o<s&&t(e=e.slice(o)),o<s&&tc(e))}p.push(r)}return td(p)}(e[s]))[b]?c.push(h):d.push(h);(h=C(t,(a=c.length>0,r=d.length>0,o=function(t,e,o,s,l){var h,p,v,m=0,g="0",b=t&&[],_=[],E=i,T=t||r&&n.find.TAG("*",l),x=w+=null==E?1:Math.random()||.1,P=T.length;for(l&&(i=e==u||e||l);g!==P&&null!=(h=T[g]);g++){if(r&&h){for(p=0,e||h.ownerDocument==u||(to(h),o=!f);v=d[p++];)if(v(h,e||u,o)){y.call(s,h);break}l&&(w=x)}a&&((h=!v&&h)&&m--,t&&b.push(h))}if(m+=g,a&&g!==m){for(p=0;v=c[p++];)v(b,_,e,o);if(t){if(m>0)for(;g--;)b[g]||_[g]||(_[g]=O.call(s));_=th(_)}y.apply(s,_),l&&!t&&_.length>0&&m+c.length>1&&k.uniqueSort(s)}return l&&(w=x,i=E),b},a?te(o):o))).selector=t}return h}function tp(t,e,a,i){var r,o,s,l,c,u="function"==typeof t&&t,d=!i&&tl(t=u.selector||t);if(a=a||[],1===d.length){if((o=d[0]=d[0].slice(0)).length>2&&"ID"===(s=o[0]).type&&9===e.nodeType&&f&&n.relative[o[1].type]){if(!(e=(n.find.ID(s.matches[0].replace(K,Z),e)||[])[0]))return a;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=z.needsContext.test(t)?0:o.length;r--&&(s=o[r],!n.relative[l=s.type]);)if((c=n.find[l])&&(i=c(s.matches[0].replace(K,Z),V.test(o[0].type)&&tr(e.parentNode)||e))){if(o.splice(r,1),!(t=i.length&&tc(o)))return y.apply(a,i),a;break}}return(u||tf(t,d))(i,e,!f,a,!e||V.test(t)&&tr(e.parentNode)||e),a}ts.prototype=n.filters=n.pseudos,n.setFilters=new ts,p.sortStable=b.split("").sort(R).join("")===b,to(),p.sortDetached=tn(function(t){return 1&t.compareDocumentPosition(u.createElement("fieldset"))}),k.find=J,k.expr[":"]=k.expr.pseudos,k.unique=k.uniqueSort,J.compile=tf,J.select=tp,J.setDocument=to,J.tokenize=tl,J.escape=k.escapeSelector,J.getText=k.text,J.isXML=k.isXMLDoc,J.selectors=k.expr,J.support=k.support,J.uniqueSort=k.uniqueSort}();var R=function(t,e,n){for(var a=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&k(t).is(n))break;a.push(t)}return a},B=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},I=k.expr.match.needsContext,F=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(t,e,n){return v(e)?k.grep(t,function(t,a){return!!e.call(t,a,t)!==n}):e.nodeType?k.grep(t,function(t){return t===e!==n}):"string"!=typeof e?k.grep(t,function(t){return l.call(e,t)>-1!==n}):k.filter(e,t,n)}k.filter=function(t,e,n){var a=e[0];return(n&&(t=":not("+t+")"),1===e.length&&1===a.nodeType)?k.find.matchesSelector(a,t)?[a]:[]:k.find.matches(t,k.grep(e,function(t){return 1===t.nodeType}))},k.fn.extend({find:function(t){var e,n,a=this.length,i=this;if("string"!=typeof t)return this.pushStack(k(t).filter(function(){for(e=0;e<a;e++)if(k.contains(i[e],this))return!0}));for(e=0,n=this.pushStack([]);e<a;e++)k.find(t,i[e],n);return a>1?k.uniqueSort(n):n},filter:function(t){return this.pushStack(D(this,t||[],!1))},not:function(t){return this.pushStack(D(this,t||[],!0))},is:function(t){return!!D(this,"string"==typeof t&&I.test(t)?k(t):t||[],!1).length}});var N,H=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(t,e,n){var a,i;if(!t)return this;if(n=n||N,"string"==typeof t){if((a="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:H.exec(t))&&(a[1]||!e)){if(!a[1])return(i=g.getElementById(a[2]))&&(this[0]=i,this.length=1),this;if(e=e instanceof k?e[0]:e,k.merge(this,k.parseHTML(a[1],e&&e.nodeType?e.ownerDocument||e:g,!0)),F.test(a[1])&&k.isPlainObject(e))for(a in e)v(this[a])?this[a](e[a]):this.attr(a,e[a]);return this}return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t)}return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==n.ready?n.ready(t):t(k):k.makeArray(t,this)}).prototype=k.fn,N=k(g);var W=/^(?:parents|prev(?:Until|All))/,Y={children:!0,contents:!0,next:!0,prev:!0};function U(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}k.fn.extend({has:function(t){var e=k(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(k.contains(this,e[t]))return!0})},closest:function(t,e){var n,a=0,i=this.length,r=[],o="string"!=typeof t&&k(t);if(!I.test(t)){for(;a<i;a++)for(n=this[a];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&k.find.matchesSelector(n,t))){r.push(n);break}}return this.pushStack(r.length>1?k.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?l.call(k(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),k.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return R(t,"parentNode")},parentsUntil:function(t,e,n){return R(t,"parentNode",n)},next:function(t){return U(t,"nextSibling")},prev:function(t){return U(t,"previousSibling")},nextAll:function(t){return R(t,"nextSibling")},prevAll:function(t){return R(t,"previousSibling")},nextUntil:function(t,e,n){return R(t,"nextSibling",n)},prevUntil:function(t,e,n){return R(t,"previousSibling",n)},siblings:function(t){return B((t.parentNode||{}).firstChild,t)},children:function(t){return B(t.firstChild)},contents:function(t){return null!=t.contentDocument&&i(t.contentDocument)?t.contentDocument:(x(t,"template")&&(t=t.content||t),k.merge([],t.childNodes))}},function(t,e){k.fn[t]=function(n,a){var i=k.map(this,e,n);return"Until"!==t.slice(-5)&&(a=n),a&&"string"==typeof a&&(i=k.filter(a,i)),this.length>1&&(Y[t]||k.uniqueSort(i),W.test(t)&&i.reverse()),this.pushStack(i)}});var j=/[^\x20\t\r\n\f]+/g;function z(t){return t}function q(t){throw t}function X(t,e,n,a){var i;try{t&&v(i=t.promise)?i.call(t).done(e).fail(n):t&&v(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(a))}catch(t){n.apply(void 0,[t])}}k.Callbacks=function(t){t="string"==typeof t?(e=t,n={},k.each(e.match(j)||[],function(t,e){n[e]=!0}),n):k.extend({},t);var e,n,a,i,r,o,s=[],l=[],c=-1,u=function(){for(o=o||t.once,r=a=!0;l.length;c=-1)for(i=l.shift();++c<s.length;)!1===s[c].apply(i[0],i[1])&&t.stopOnFalse&&(c=s.length,i=!1);t.memory||(i=!1),a=!1,o&&(s=i?[]:"")},d={add:function(){return s&&(i&&!a&&(c=s.length-1,l.push(i)),function e(n){k.each(n,function(n,a){v(a)?t.unique&&d.has(a)||s.push(a):a&&a.length&&"string"!==w(a)&&e(a)})}(arguments),i&&!a&&u()),this},remove:function(){return k.each(arguments,function(t,e){for(var n;(n=k.inArray(e,s,n))>-1;)s.splice(n,1),n<=c&&c--}),this},has:function(t){return t?k.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return o=l=[],s=i="",this},disabled:function(){return!s},lock:function(){return o=l=[],i||a||(s=i=""),this},locked:function(){return!!o},fireWith:function(t,e){return o||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),a||u()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},k.extend({Deferred:function(e){var n=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],a="pending",i={state:function(){return a},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return k.Deferred(function(e){k.each(n,function(n,a){var i=v(t[a[4]])&&t[a[4]];r[a[1]](function(){var t=i&&i.apply(this,arguments);t&&v(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[a[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(e,a,i){var r=0;function o(e,n,a,i){return function(){var s=this,l=arguments,c=function(){var t,c;if(!(e<r)){if((t=a.apply(s,l))===n.promise())throw TypeError("Thenable self-resolution");v(c=t&&("object"==typeof t||"function"==typeof t)&&t.then)?i?c.call(t,o(r,n,z,i),o(r,n,q,i)):(r++,c.call(t,o(r,n,z,i),o(r,n,q,i),o(r,n,z,n.notifyWith))):(a!==z&&(s=void 0,l=[t]),(i||n.resolveWith)(s,l))}},u=i?c:function(){try{c()}catch(t){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(t,u.error),e+1>=r&&(a!==q&&(s=void 0,l=[t]),n.rejectWith(s,l))}};e?u():(k.Deferred.getErrorHook?u.error=k.Deferred.getErrorHook():k.Deferred.getStackHook&&(u.error=k.Deferred.getStackHook()),t.setTimeout(u))}}return k.Deferred(function(t){n[0][3].add(o(0,t,v(i)?i:z,t.notifyWith)),n[1][3].add(o(0,t,v(e)?e:z)),n[2][3].add(o(0,t,v(a)?a:q))}).promise()},promise:function(t){return null!=t?k.extend(t,i):i}},r={};return k.each(n,function(t,e){var o=e[2],s=e[5];i[e[1]]=o.add,s&&o.add(function(){a=s},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),o.add(e[3].fire),r[e[0]]=function(){return r[e[0]+"With"](this===r?void 0:this,arguments),this},r[e[0]+"With"]=o.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(t){var e=arguments.length,n=e,a=Array(n),i=r.call(arguments),o=k.Deferred(),s=function(t){return function(n){a[t]=this,i[t]=arguments.length>1?r.call(arguments):n,--e||o.resolveWith(a,i)}};if(e<=1&&(X(t,o.done(s(n)).resolve,o.reject,!e),"pending"===o.state()||v(i[n]&&i[n].then)))return o.then();for(;n--;)X(i[n],s(n),o.reject);return o.promise()}});var G=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&G.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},k.readyException=function(e){t.setTimeout(function(){throw e})};var V=k.Deferred();function K(){g.removeEventListener("DOMContentLoaded",K),t.removeEventListener("load",K),k.ready()}k.fn.ready=function(t){return V.then(t).catch(function(t){k.readyException(t)}),this},k.extend({isReady:!1,readyWait:1,ready:function(t){!(!0===t?--k.readyWait:k.isReady)&&(k.isReady=!0,!0!==t&&--k.readyWait>0||V.resolveWith(g,[k]))}}),k.ready.then=V.then,"complete"!==g.readyState&&("loading"===g.readyState||g.documentElement.doScroll)?(g.addEventListener("DOMContentLoaded",K),t.addEventListener("load",K)):t.setTimeout(k.ready);var Z=function(t,e,n,a,i,r,o){var s=0,l=t.length,c=null==n;if("object"===w(n))for(s in i=!0,n)Z(t,e,s,n[s],!0,r,o);else if(void 0!==a&&(i=!0,v(a)||(o=!0),c&&(o?(e.call(t,a),e=null):(c=e,e=function(t,e,n){return c.call(k(t),n)})),e))for(;s<l;s++)e(t[s],n,o?a:a.call(t[s],s,e(t[s],n)));return i?t:c?e.call(t):l?e(t[0],n):r},$=/^-ms-/,Q=/-([a-z])/g;function J(t,e){return e.toUpperCase()}function tt(t){return t.replace($,"ms-").replace(Q,J)}var te=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function tn(){this.expando=k.expando+tn.uid++}tn.uid=1,tn.prototype={cache:function(t){var e=t[this.expando];return!e&&(e={},te(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var a,i=this.cache(t);if("string"==typeof e)i[tt(e)]=n;else for(a in e)i[tt(a)]=e[a];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][tt(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,a=t[this.expando];if(void 0!==a){if(void 0!==e)for(n=(e=Array.isArray(e)?e.map(tt):((e=tt(e))in a)?[e]:e.match(j)||[]).length;n--;)delete a[e[n]];(void 0===e||k.isEmptyObject(a))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!k.isEmptyObject(e)}};var ta=new tn,ti=new tn,tr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,to=/[A-Z]/g;function ts(t,e,n){var a,i;if(void 0===n&&1===t.nodeType){if(a="data-"+e.replace(to,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(a))){try{i=n,n="true"===i||"false"!==i&&("null"===i?null:i===+i+""?+i:tr.test(i)?JSON.parse(i):i)}catch(t){}ti.set(t,e,n)}else n=void 0}return n}k.extend({hasData:function(t){return ti.hasData(t)||ta.hasData(t)},data:function(t,e,n){return ti.access(t,e,n)},removeData:function(t,e){ti.remove(t,e)},_data:function(t,e,n){return ta.access(t,e,n)},_removeData:function(t,e){ta.remove(t,e)}}),k.fn.extend({data:function(t,e){var n,a,i,r=this[0],o=r&&r.attributes;if(void 0===t){if(this.length&&(i=ti.get(r),1===r.nodeType&&!ta.get(r,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(a=o[n].name).indexOf("data-")&&ts(r,a=tt(a.slice(5)),i[a]);ta.set(r,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){ti.set(this,t)}):Z(this,function(e){var n;if(r&&void 0===e)return void 0!==(n=ti.get(r,t))||void 0!==(n=ts(r,t))?n:void 0;this.each(function(){ti.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ti.remove(this,t)})}}),k.extend({queue:function(t,e,n){var a;if(t)return e=(e||"fx")+"queue",a=ta.get(t,e),n&&(!a||Array.isArray(n)?a=ta.access(t,e,k.makeArray(n)):a.push(n)),a||[]},dequeue:function(t,e){e=e||"fx";var n=k.queue(t,e),a=n.length,i=n.shift(),r=k._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),a--),i&&("fx"===e&&n.unshift("inprogress"),delete r.stop,i.call(t,function(){k.dequeue(t,e)},r)),!a&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ta.get(t,n)||ta.access(t,n,{empty:k.Callbacks("once memory").add(function(){ta.remove(t,[e+"queue",n])})})}}),k.fn.extend({queue:function(t,e){var n=2;return("string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n)?k.queue(this[0],t):void 0===e?this:this.each(function(){var n=k.queue(this,t,e);k._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&k.dequeue(this,t)})},dequeue:function(t){return this.each(function(){k.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,a=1,i=k.Deferred(),r=this,o=this.length,s=function(){--a||i.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=ta.get(r[o],t+"queueHooks"))&&n.empty&&(a++,n.empty.add(s));return s(),i.promise(e)}});var tl=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,tc=RegExp("^(?:([+-])=|)("+tl+")([a-z%]*)$","i"),tu=["Top","Right","Bottom","Left"],td=g.documentElement,th=function(t){return k.contains(t.ownerDocument,t)},tf={composed:!0};td.getRootNode&&(th=function(t){return k.contains(t.ownerDocument,t)||t.getRootNode(tf)===t.ownerDocument});var tp=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&th(t)&&"none"===k.css(t,"display")};function tv(t,e,n,a){var i,r,o=20,s=a?function(){return a.cur()}:function(){return k.css(t,e,"")},l=s(),c=n&&n[3]||(k.cssNumber[e]?"":"px"),u=t.nodeType&&(k.cssNumber[e]||"px"!==c&&+l)&&tc.exec(k.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;o--;)k.style(t,e,u+c),(1-r)*(1-(r=s()/l||.5))<=0&&(o=0),u/=r;u*=2,k.style(t,e,u+c),n=n||[]}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],a&&(a.unit=c,a.start=u,a.end=i)),i}var tm={};function tg(t,e){for(var n,a,i=[],r=0,o=t.length;r<o;r++)(a=t[r]).style&&(n=a.style.display,e?("none"!==n||(i[r]=ta.get(a,"display")||null,i[r]||(a.style.display="")),""===a.style.display&&tp(a)&&(i[r]=function(t){var e,n=t.ownerDocument,a=t.nodeName,i=tm[a];return i||(e=n.body.appendChild(n.createElement(a)),i=k.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),tm[a]=i),i}(a))):"none"!==n&&(i[r]="none",ta.set(a,"display",n)));for(r=0;r<o;r++)null!=i[r]&&(t[r].style.display=i[r]);return t}k.fn.extend({show:function(){return tg(this,!0)},hide:function(){return tg(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){tp(this)?k(this).show():k(this).hide()})}});var tb=/^(?:checkbox|radio)$/i,tw=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,t_=/^$|^module$|\/(?:java|ecma)script/i;t4=g.createDocumentFragment().appendChild(g.createElement("div")),(t6=g.createElement("input")).setAttribute("type","radio"),t6.setAttribute("checked","checked"),t6.setAttribute("name","t"),t4.appendChild(t6),p.checkClone=t4.cloneNode(!0).cloneNode(!0).lastChild.checked,t4.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!t4.cloneNode(!0).lastChild.defaultValue,t4.innerHTML="<option></option>",p.option=!!t4.lastChild;var tE={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function tk(t,e){var n;return(n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&x(t,e))?k.merge([t],n):n}function tT(t,e){for(var n=0,a=t.length;n<a;n++)ta.set(t[n],"globalEval",!e||ta.get(e[n],"globalEval"))}tE.tbody=tE.tfoot=tE.colgroup=tE.caption=tE.thead,tE.th=tE.td,p.option||(tE.optgroup=tE.option=[1,"<select multiple='multiple'>","</select>"]);var tx=/<|&#?\w+;/;function tO(t,e,n,a,i){for(var r,o,s,l,c,u=e.createDocumentFragment(),d=[],h=0,f=t.length;h<f;h++)if((r=t[h])||0===r){if("object"===w(r))k.merge(d,r.nodeType?[r]:r);else if(tx.test(r)){for(o=o||u.appendChild(e.createElement("div")),s=tE[(tw.exec(r)||["",""])[1].toLowerCase()]||tE._default,o.innerHTML=s[1]+k.htmlPrefilter(r)+s[2],c=s[0];c--;)o=o.lastChild;k.merge(d,o.childNodes),(o=u.firstChild).textContent=""}else d.push(e.createTextNode(r))}for(u.textContent="",h=0;r=d[h++];){if(a&&k.inArray(r,a)>-1){i&&i.push(r);continue}if(l=th(r),o=tk(u.appendChild(r),"script"),l&&tT(o),n)for(c=0;r=o[c++];)t_.test(r.type||"")&&n.push(r)}return u}var tP=/^([^.]*)(?:\.(.+)|)/;function tS(){return!0}function tL(){return!1}function tA(t,e,n,a,i,r){var o,s;if("object"==typeof e){for(s in"string"!=typeof n&&(a=a||n,n=void 0),e)tA(t,s,n,a,e[s],r);return t}if(null==a&&null==i?(i=n,a=n=void 0):null==i&&("string"==typeof n?(i=a,a=void 0):(i=a,a=n,n=void 0)),!1===i)i=tL;else if(!i)return t;return 1===r&&(o=i,(i=function(t){return k().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=k.guid++)),t.each(function(){k.event.add(this,e,i,a,n)})}function tC(t,e,n){if(!n){void 0===ta.get(t,e)&&k.event.add(t,e,tS);return}ta.set(t,e,!1),k.event.add(t,e,{namespace:!1,handler:function(t){var n,a=ta.get(this,e);if(1&t.isTrigger&&this[e]){if(a)(k.event.special[e]||{}).delegateType&&t.stopPropagation();else if(a=r.call(arguments),ta.set(this,e,a),this[e](),n=ta.get(this,e),ta.set(this,e,!1),a!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else a&&(ta.set(this,e,k.event.trigger(a[0],a.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=tS)}})}k.event={global:{},add:function(t,e,n,a,i){var r,o,s,l,c,u,d,h,f,p,v,m=ta.get(t);if(te(t))for(n.handler&&(n=(r=n).handler,i=r.selector),i&&k.find.matchesSelector(td,i),n.guid||(n.guid=k.guid++),(l=m.events)||(l=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(e){return k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(j)||[""]).length;c--;)f=v=(s=tP.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f&&(d=k.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,d=k.event.special[f]||{},u=k.extend({type:f,origType:v,data:a,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:p.join(".")},r),(h=l[f])||((h=l[f]=[]).delegateCount=0,(!d.setup||!1===d.setup.call(t,a,p,o))&&t.addEventListener&&t.addEventListener(f,o)),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,u):h.push(u),k.event.global[f]=!0)},remove:function(t,e,n,a,i){var r,o,s,l,c,u,d,h,f,p,v,m=ta.hasData(t)&&ta.get(t);if(m&&(l=m.events)){for(c=(e=(e||"").match(j)||[""]).length;c--;){if(f=v=(s=tP.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),!f){for(f in l)k.event.remove(t,f+e[c],n,a,!0);continue}for(d=k.event.special[f]||{},h=l[f=(a?d.delegateType:d.bindType)||f]||[],s=s[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=h.length;r--;)u=h[r],(i||v===u.origType)&&(!n||n.guid===u.guid)&&(!s||s.test(u.namespace))&&(!a||a===u.selector||"**"===a&&u.selector)&&(h.splice(r,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(t,u));o&&!h.length&&(d.teardown&&!1!==d.teardown.call(t,p,m.handle)||k.removeEvent(t,f,m.handle),delete l[f])}k.isEmptyObject(l)&&ta.remove(t,"handle events")}},dispatch:function(t){var e,n,a,i,r,o,s=Array(arguments.length),l=k.event.fix(t),c=(ta.get(this,"events")||Object.create(null))[l.type]||[],u=k.event.special[l.type]||{};for(e=1,s[0]=l;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(o=k.event.handlers.call(this,l,c),e=0;(i=o[e++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(r=i.handlers[n++])&&!l.isImmediatePropagationStopped();)(!l.rnamespace||!1===r.namespace||l.rnamespace.test(r.namespace))&&(l.handleObj=r,l.data=r.data,void 0!==(a=((k.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,s))&&!1===(l.result=a)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,a,i,r,o,s=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1)){for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&!("click"===t.type&&!0===c.disabled)){for(n=0,r=[],o={};n<l;n++)void 0===o[i=(a=e[n]).selector+" "]&&(o[i]=a.needsContext?k(i,this).index(c)>-1:k.find(i,this,null,[c]).length),o[i]&&r.push(a);r.length&&s.push({elem:c,handlers:r})}}return c=this,l<e.length&&s.push({elem:c,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[k.expando]?t:new k.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return tb.test(e.type)&&e.click&&x(e,"input")&&tC(e,"click",!0),!1},trigger:function(t){var e=this||t;return tb.test(e.type)&&e.click&&x(e,"input")&&tC(e,"click"),!0},_default:function(t){var e=t.target;return tb.test(e.type)&&e.click&&x(e,"input")&&ta.get(e,"click")||x(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},k.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},k.Event=function(t,e){if(!(this instanceof k.Event))return new k.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?tS:tL,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&k.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:tL,isPropagationStopped:tL,isImmediatePropagationStopped:tL,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=tS,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=tS,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=tS,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(t,e){function n(t){if(g.documentMode){var n=ta.get(this,"handle"),a=k.event.fix(t);a.type="focusin"===t.type?"focus":"blur",a.isSimulated=!0,n(t),a.target===a.currentTarget&&n(a)}else k.event.simulate(e,t.target,k.event.fix(t))}k.event.special[t]={setup:function(){var a;if(tC(this,t,!0),!g.documentMode)return!1;(a=ta.get(this,e))||this.addEventListener(e,n),ta.set(this,e,(a||0)+1)},trigger:function(){return tC(this,t),!0},teardown:function(){var t;if(!g.documentMode)return!1;(t=ta.get(this,e)-1)?ta.set(this,e,t):(this.removeEventListener(e,n),ta.remove(this,e))},_default:function(e){return ta.get(e.target,t)},delegateType:e},k.event.special[e]={setup:function(){var a=this.ownerDocument||this.document||this,i=g.documentMode?this:a,r=ta.get(i,e);r||(g.documentMode?this.addEventListener(e,n):a.addEventListener(t,n,!0)),ta.set(i,e,(r||0)+1)},teardown:function(){var a=this.ownerDocument||this.document||this,i=g.documentMode?this:a,r=ta.get(i,e)-1;r?ta.set(i,e,r):(g.documentMode?this.removeEventListener(e,n):a.removeEventListener(t,n,!0),ta.remove(i,e))}}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){k.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,a=t.relatedTarget,i=t.handleObj;return a&&(a===this||k.contains(this,a))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),k.fn.extend({on:function(t,e,n,a){return tA(this,t,e,n,a)},one:function(t,e,n,a){return tA(this,t,e,n,a,1)},off:function(t,e,n){var a,i;if(t&&t.preventDefault&&t.handleObj)return a=t.handleObj,k(t.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(!1===e||"function"==typeof e)&&(n=e,e=void 0),!1===n&&(n=tL),this.each(function(){k.event.remove(this,t,n,e)})}});var tM=/<script|<style|<link/i,tR=/checked\s*(?:[^=]|=\s*.checked.)/i,tB=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function tI(t,e){return x(t,"table")&&x(11!==e.nodeType?e:e.firstChild,"tr")&&k(t).children("tbody")[0]||t}function tF(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function tD(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function tN(t,e){var n,a,i,r,o,s;if(1===e.nodeType){if(ta.hasData(t)&&(s=ta.get(t).events))for(i in ta.remove(e,"handle events"),s)for(n=0,a=s[i].length;n<a;n++)k.event.add(e,i,s[i][n]);ti.hasData(t)&&(r=ti.access(t),o=k.extend({},r),ti.set(e,o))}}function tH(t,e,n,a){e=o(e);var i,r,s,l,c,u,d=0,h=t.length,f=h-1,m=e[0],g=v(m);if(g||h>1&&"string"==typeof m&&!p.checkClone&&tR.test(m))return t.each(function(i){var r=t.eq(i);g&&(e[0]=m.call(this,i,r.html())),tH(r,e,n,a)});if(h&&(r=(i=tO(e,t[0].ownerDocument,!1,t,a)).firstChild,1===i.childNodes.length&&(i=r),r||a)){for(l=(s=k.map(tk(i,"script"),tF)).length;d<h;d++)c=i,d!==f&&(c=k.clone(c,!0,!0),l&&k.merge(s,tk(c,"script"))),n.call(t[d],c,d);if(l)for(u=s[s.length-1].ownerDocument,k.map(s,tD),d=0;d<l;d++)c=s[d],t_.test(c.type||"")&&!ta.access(c,"globalEval")&&k.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?k._evalUrl&&!c.noModule&&k._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):b(c.textContent.replace(tB,""),c,u))}return t}function tW(t,e,n){for(var a,i=e?k.filter(e,t):t,r=0;null!=(a=i[r]);r++)n||1!==a.nodeType||k.cleanData(tk(a)),a.parentNode&&(n&&th(a)&&tT(tk(a,"script")),a.parentNode.removeChild(a));return t}k.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var a,i,r,o,s=t.cloneNode(!0),l=th(t);if(!p.noCloneChecked&&(1===t.nodeType||11===t.nodeType)&&!k.isXMLDoc(t))for(a=0,o=tk(s),i=(r=tk(t)).length;a<i;a++)!function(t,e){var n=e.nodeName.toLowerCase();"input"===n&&tb.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}(r[a],o[a]);if(e){if(n)for(a=0,r=r||tk(t),o=o||tk(s),i=r.length;a<i;a++)tN(r[a],o[a]);else tN(t,s)}return(o=tk(s,"script")).length>0&&tT(o,!l&&tk(t,"script")),s},cleanData:function(t){for(var e,n,a,i=k.event.special,r=0;void 0!==(n=t[r]);r++)if(te(n)){if(e=n[ta.expando]){if(e.events)for(a in e.events)i[a]?k.event.remove(n,a):k.removeEvent(n,a,e.handle);n[ta.expando]=void 0}n[ti.expando]&&(n[ti.expando]=void 0)}}}),k.fn.extend({detach:function(t){return tW(this,t,!0)},remove:function(t){return tW(this,t)},text:function(t){return Z(this,function(t){return void 0===t?k.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return tH(this,arguments,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&tI(this,t).appendChild(t)})},prepend:function(){return tH(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=tI(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return tH(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return tH(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(k.cleanData(tk(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return k.clone(this,t,e)})},html:function(t){return Z(this,function(t){var e=this[0]||{},n=0,a=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!tM.test(t)&&!tE[(tw.exec(t)||["",""])[1].toLowerCase()]){t=k.htmlPrefilter(t);try{for(;n<a;n++)e=this[n]||{},1===e.nodeType&&(k.cleanData(tk(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return tH(this,arguments,function(e){var n=this.parentNode;0>k.inArray(this,t)&&(k.cleanData(tk(this)),n&&n.replaceChild(e,this))},t)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){k.fn[t]=function(t){for(var n,a=[],i=k(t),r=i.length-1,o=0;o<=r;o++)n=o===r?this:this.clone(!0),k(i[o])[e](n),s.apply(a,n.get());return this.pushStack(a)}});var tY=RegExp("^("+tl+")(?!px)[a-z%]+$","i"),tU=/^--/,tj=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},tz=function(t,e,n){var a,i,r={};for(i in e)r[i]=t.style[i],t.style[i]=e[i];for(i in a=n.call(t),e)t.style[i]=r[i];return a},tq=RegExp(tu.join("|"),"i");function tX(t,e,n){var a,i,r,o,s=tU.test(e),l=t.style;return(n=n||tj(t))&&(o=n.getPropertyValue(e)||n[e],s&&o&&(o=o.replace(A,"$1")||void 0),""!==o||th(t)||(o=k.style(t,e)),!p.pixelBoxStyles()&&tY.test(o)&&tq.test(e)&&(a=l.width,i=l.minWidth,r=l.maxWidth,l.minWidth=l.maxWidth=l.width=o,o=n.width,l.width=a,l.minWidth=i,l.maxWidth=r)),void 0!==o?o+"":o}function tG(t,e){return{get:function(){if(t()){delete this.get;return}return(this.get=e).apply(this,arguments)}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",td.appendChild(c).appendChild(u);var e=t.getComputedStyle(u);a="1%"!==e.top,l=12===n(e.marginLeft),u.style.right="60%",o=36===n(e.right),i=36===n(e.width),u.style.position="absolute",r=12===n(u.offsetWidth/3),td.removeChild(c),u=null}}function n(t){return Math.round(parseFloat(t))}var a,i,r,o,s,l,c=g.createElement("div"),u=g.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(p,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),a},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),r},reliableTrDimensions:function(){var e,n,a,i;return null==s&&(e=g.createElement("table"),n=g.createElement("tr"),a=g.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="box-sizing:content-box;border:1px solid",n.style.height="1px",a.style.height="9px",a.style.display="block",td.appendChild(e).appendChild(n).appendChild(a),s=parseInt((i=t.getComputedStyle(n)).height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===n.offsetHeight,td.removeChild(e)),s}}))}();var tV=["Webkit","Moz","ms"],tK=g.createElement("div").style,tZ={};function t$(t){return k.cssProps[t]||tZ[t]||(t in tK?t:tZ[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=tV.length;n--;)if((t=tV[n]+e)in tK)return t}(t)||t)}var tQ=/^(none|table(?!-c[ea]).+)/,tJ={position:"absolute",visibility:"hidden",display:"block"},t0={letterSpacing:"0",fontWeight:"400"};function t5(t,e,n){var a=tc.exec(e);return a?Math.max(0,a[2]-(n||0))+(a[3]||"px"):e}function t2(t,e,n,a,i,r){var o="width"===e?1:0,s=0,l=0,c=0;if(n===(a?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=k.css(t,n+tu[o],!0,i)),a?("content"===n&&(l-=k.css(t,"padding"+tu[o],!0,i)),"margin"!==n&&(l-=k.css(t,"border"+tu[o]+"Width",!0,i))):(l+=k.css(t,"padding"+tu[o],!0,i),"padding"!==n?l+=k.css(t,"border"+tu[o]+"Width",!0,i):s+=k.css(t,"border"+tu[o]+"Width",!0,i));return!a&&r>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-s-.5))||0),l+c}function t1(t,e,n){var a=tj(t),i=(!p.boxSizingReliable()||n)&&"border-box"===k.css(t,"boxSizing",!1,a),r=i,o=tX(t,e,a),s="offset"+e[0].toUpperCase()+e.slice(1);if(tY.test(o)){if(!n)return o;o="auto"}return(!p.boxSizingReliable()&&i||!p.reliableTrDimensions()&&x(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===k.css(t,"display",!1,a))&&t.getClientRects().length&&(i="border-box"===k.css(t,"boxSizing",!1,a),(r=s in t)&&(o=t[s])),(o=parseFloat(o)||0)+t2(t,e,n||(i?"border":"content"),r,a,o)+"px"}function t3(t,e,n,a,i){return new t3.prototype.init(t,e,n,a,i)}k.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=tX(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,a){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,r,o,s=tt(e),l=tU.test(e),c=t.style;if(l||(e=t$(s)),o=k.cssHooks[e]||k.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(t,!1,a))?i:c[e];"string"===(r=void 0===n?"undefined":ty(n))&&(i=tc.exec(n))&&i[1]&&(n=tv(t,e,i),r="number"),null!=n&&n==n&&("number"!==r||l||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,a))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,a){var i,r,o,s=tt(e);return(tU.test(e)||(e=t$(s)),(o=k.cssHooks[e]||k.cssHooks[s])&&"get"in o&&(i=o.get(t,!0,n)),void 0===i&&(i=tX(t,e,a)),"normal"===i&&e in t0&&(i=t0[e]),""===n||n)?(r=parseFloat(i),!0===n||isFinite(r)?r||0:i):i}}),k.each(["height","width"],function(t,e){k.cssHooks[e]={get:function(t,n,a){if(n)return!tQ.test(k.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?t1(t,e,a):tz(t,tJ,function(){return t1(t,e,a)})},set:function(t,n,a){var i,r=tj(t),o=!p.scrollboxSize()&&"absolute"===r.position,s=(o||a)&&"border-box"===k.css(t,"boxSizing",!1,r),l=a?t2(t,e,a,s,r):0;return s&&o&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-t2(t,e,"border",!1,r)-.5)),l&&(i=tc.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=k.css(t,e)),t5(t,n,l)}}}),k.cssHooks.marginLeft=tG(p.reliableMarginLeft,function(t,e){if(e)return(parseFloat(tX(t,"marginLeft"))||t.getBoundingClientRect().left-tz(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(t,e){k.cssHooks[t+e]={expand:function(n){for(var a=0,i={},r="string"==typeof n?n.split(" "):[n];a<4;a++)i[t+tu[a]+e]=r[a]||r[a-2]||r[0];return i}},"margin"!==t&&(k.cssHooks[t+e].set=t5)}),k.fn.extend({css:function(t,e){return Z(this,function(t,e,n){var a,i,r={},o=0;if(Array.isArray(e)){for(a=tj(t),i=e.length;o<i;o++)r[e[o]]=k.css(t,e[o],!1,a);return r}return void 0!==n?k.style(t,e,n):k.css(t,e)},t,e,arguments.length>1)}}),k.Tween=t3,t3.prototype={constructor:t3,init:function(t,e,n,a,i,r){this.elem=t,this.prop=n,this.easing=i||k.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=a,this.unit=r||(k.cssNumber[n]?"":"px")},cur:function(){var t=t3.propHooks[this.prop];return t&&t.get?t.get(this):t3.propHooks._default.get(this)},run:function(t){var e,n=t3.propHooks[this.prop];return this.options.duration?this.pos=e=k.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):t3.propHooks._default.set(this),this}},t3.prototype.init.prototype=t3.prototype,t3.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=k.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){k.fx.step[t.prop]?k.fx.step[t.prop](t):1===t.elem.nodeType&&(k.cssHooks[t.prop]||null!=t.elem.style[t$(t.prop)])?k.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},t3.propHooks.scrollTop=t3.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},k.easing={linear:function(t){return t},swing:function(t){return .5-Math.cos(t*Math.PI)/2},_default:"swing"},k.fx=t3.prototype.init,k.fx.step={};var t4,t6,t8,t7,t9=/^(?:toggle|show|hide)$/,et=/queueHooks$/;function ee(){return t.setTimeout(function(){t8=void 0}),t8=Date.now()}function en(t,e){var n,a=0,i={height:t};for(e=e?1:0;a<4;a+=2-e)i["margin"+(n=tu[a])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ea(t,e,n){for(var a,i=(ei.tweeners[e]||[]).concat(ei.tweeners["*"]),r=0,o=i.length;r<o;r++)if(a=i[r].call(n,e,t))return a}function ei(t,e,n){var a,i,r=0,o=ei.prefilters.length,s=k.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=t8||ee(),n=Math.max(0,c.startTime+c.duration-e),a=1-(n/c.duration||0),r=0,o=c.tweens.length;r<o;r++)c.tweens[r].run(a);return(s.notifyWith(t,[c,a,n]),a<1&&o)?n:(o||s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},n),originalProperties:e,originalOptions:n,startTime:t8||ee(),duration:n.duration,tweens:[],createTween:function(e,n){var a=k.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(a),a},stop:function(e){var n=0,a=e?c.tweens.length:0;if(i)return this;for(i=!0;n<a;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),u=c.props;for(function(t,e){var n,a,i,r,o;for(n in t)if(i=e[a=tt(n)],Array.isArray(r=t[n])&&(i=r[1],r=t[n]=r[0]),n!==a&&(t[a]=r,delete t[n]),(o=k.cssHooks[a])&&"expand"in o)for(n in r=o.expand(r),delete t[a],r)n in t||(t[n]=r[n],e[n]=i);else e[a]=i}(u,c.opts.specialEasing);r<o;r++)if(a=ei.prefilters[r].call(c,t,u,c.opts))return v(a.stop)&&(k._queueHooks(c.elem,c.opts.queue).stop=a.stop.bind(a)),a;return k.map(u,ea,c),v(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),k.fx.timer(k.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}k.Animation=k.extend(ei,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return tv(n.elem,t,tc.exec(e),n),n}]},tweener:function(t,e){v(t)?(e=t,t=["*"]):t=t.match(j);for(var n,a=0,i=t.length;a<i;a++)n=t[a],ei.tweeners[n]=ei.tweeners[n]||[],ei.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var a,i,r,o,s,l,c,u,d="width"in e||"height"in e,h=this,f={},p=t.style,v=t.nodeType&&tp(t),m=ta.get(t,"fxshow");for(a in n.queue||(null==(o=k._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,h.always(function(){h.always(function(){o.unqueued--,k.queue(t,"fx").length||o.empty.fire()})})),e)if(i=e[a],t9.test(i)){if(delete e[a],r=r||"toggle"===i,i===(v?"hide":"show")){if("show"!==i||!m||void 0===m[a])continue;v=!0}f[a]=m&&m[a]||k.style(t,a)}if(!(!(l=!k.isEmptyObject(e))&&k.isEmptyObject(f)))for(a in d&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=ta.get(t,"display")),"none"===(u=k.css(t,"display"))&&(c?u=c:(tg([t],!0),c=t.style.display||c,u=k.css(t,"display"),tg([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===k.css(t,"float")&&(l||(h.done(function(){p.display=c}),null!=c||(c="none"===(u=p.display)?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(m?"hidden"in m&&(v=m.hidden):m=ta.access(t,"fxshow",{display:c}),r&&(m.hidden=!v),v&&tg([t],!0),h.done(function(){for(a in v||tg([t]),ta.remove(t,"fxshow"),f)k.style(t,a,f[a])})),l=ea(v?m[a]:0,a,h),a in m||(m[a]=l.start,v&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ei.prefilters.unshift(t):ei.prefilters.push(t)}}),k.speed=function(t,e,n){var a=t&&"object"==typeof t?k.extend({},t):{complete:n||!n&&e||v(t)&&t,duration:t,easing:n&&e||e&&!v(e)&&e};return k.fx.off?a.duration=0:"number"!=typeof a.duration&&(a.duration in k.fx.speeds?a.duration=k.fx.speeds[a.duration]:a.duration=k.fx.speeds._default),(null==a.queue||!0===a.queue)&&(a.queue="fx"),a.old=a.complete,a.complete=function(){v(a.old)&&a.old.call(this),a.queue&&k.dequeue(this,a.queue)},a},k.fn.extend({fadeTo:function(t,e,n,a){return this.filter(tp).css("opacity",0).show().end().animate({opacity:e},t,n,a)},animate:function(t,e,n,a){var i=k.isEmptyObject(t),r=k.speed(e,n,a),o=function(){var e=ei(this,k.extend({},t),r);(i||ta.get(this,"finish"))&&e.stop(!0)};return o.finish=o,i||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(t,e,n){var a=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",r=k.timers,o=ta.get(this);if(i)o[i]&&o[i].stop&&a(o[i]);else for(i in o)o[i]&&o[i].stop&&et.test(i)&&a(o[i]);for(i=r.length;i--;)r[i].elem===this&&(null==t||r[i].queue===t)&&(r[i].anim.stop(n),e=!1,r.splice(i,1));(e||!n)&&k.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=ta.get(this),a=n[t+"queue"],i=n[t+"queueHooks"],r=k.timers,o=a?a.length:0;for(n.finish=!0,k.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)a[e]&&a[e].finish&&a[e].finish.call(this);delete n.finish})}}),k.each(["toggle","show","hide"],function(t,e){var n=k.fn[e];k.fn[e]=function(t,a,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(en(e,!0),t,a,i)}}),k.each({slideDown:en("show"),slideUp:en("hide"),slideToggle:en("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){k.fn[t]=function(t,n,a){return this.animate(e,t,n,a)}}),k.timers=[],k.fx.tick=function(){var t,e=0,n=k.timers;for(t8=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||k.fx.stop(),t8=void 0},k.fx.timer=function(t){k.timers.push(t),k.fx.start()},k.fx.interval=13,k.fx.start=function(){t7||(t7=!0,function e(){t7&&(!1===g.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(e):t.setTimeout(e,k.fx.interval),k.fx.tick())}())},k.fx.stop=function(){t7=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(e,n){return e=k.fx&&k.fx.speeds[e]||e,n=n||"fx",this.queue(n,function(n,a){var i=t.setTimeout(n,e);a.stop=function(){t.clearTimeout(i)}})},er=g.createElement("input"),eo=g.createElement("select").appendChild(g.createElement("option")),er.type="checkbox",p.checkOn=""!==er.value,p.optSelected=eo.selected,(er=g.createElement("input")).value="t",er.type="radio",p.radioValue="t"===er.value;var er,eo,es,el=k.expr.attrHandle;k.fn.extend({attr:function(t,e){return Z(this,k.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){k.removeAttr(this,t)})}}),k.extend({attr:function(t,e,n){var a,i,r=t.nodeType;if(3!==r&&8!==r&&2!==r){if(void 0===t.getAttribute)return k.prop(t,e,n);if(1===r&&k.isXMLDoc(t)||(i=k.attrHooks[e.toLowerCase()]||(k.expr.match.bool.test(e)?es:void 0)),void 0!==n){if(null===n){k.removeAttr(t,e);return}return i&&"set"in i&&void 0!==(a=i.set(t,n,e))?a:(t.setAttribute(e,n+""),n)}return i&&"get"in i&&null!==(a=i.get(t,e))?a:null==(a=k.find.attr(t,e))?void 0:a}},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&x(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,a=0,i=e&&e.match(j);if(i&&1===t.nodeType)for(;n=i[a++];)t.removeAttribute(n)}}),es={set:function(t,e,n){return!1===e?k.removeAttr(t,n):t.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(t,e){var n=el[e]||k.find.attr;el[e]=function(t,e,a){var i,r,o=e.toLowerCase();return a||(r=el[o],el[o]=i,i=null!=n(t,e,a)?o:null,el[o]=r),i}});var ec=/^(?:input|select|textarea|button)$/i,eu=/^(?:a|area)$/i;function ed(t){return(t.match(j)||[]).join(" ")}function eh(t){return t.getAttribute&&t.getAttribute("class")||""}function ef(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(j)||[]}k.fn.extend({prop:function(t,e){return Z(this,k.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[k.propFix[t]||t]})}}),k.extend({prop:function(t,e,n){var a,i,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return(1===r&&k.isXMLDoc(t)||(e=k.propFix[e]||e,i=k.propHooks[e]),void 0!==n)?i&&"set"in i&&void 0!==(a=i.set(t,n,e))?a:t[e]=n:i&&"get"in i&&null!==(a=i.get(t,e))?a:t[e]},propHooks:{tabIndex:{get:function(t){var e=k.find.attr(t,"tabindex");return e?parseInt(e,10):ec.test(t.nodeName)||eu.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(k.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,n,a,i,r,o;return v(t)?this.each(function(e){k(this).addClass(t.call(this,e,eh(this)))}):(e=ef(t)).length?this.each(function(){if(a=eh(this),n=1===this.nodeType&&" "+ed(a)+" "){for(r=0;r<e.length;r++)i=e[r],0>n.indexOf(" "+i+" ")&&(n+=i+" ");a!==(o=ed(n))&&this.setAttribute("class",o)}}):this},removeClass:function(t){var e,n,a,i,r,o;return v(t)?this.each(function(e){k(this).removeClass(t.call(this,e,eh(this)))}):arguments.length?(e=ef(t)).length?this.each(function(){if(a=eh(this),n=1===this.nodeType&&" "+ed(a)+" "){for(r=0;r<e.length;r++)for(i=e[r];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");a!==(o=ed(n))&&this.setAttribute("class",o)}}):this:this.attr("class","")},toggleClass:function(t,e){var n,a,i,r,o=void 0===t?"undefined":ty(t),s="string"===o||Array.isArray(t);return v(t)?this.each(function(n){k(this).toggleClass(t.call(this,n,eh(this),e),e)}):"boolean"==typeof e&&s?e?this.addClass(t):this.removeClass(t):(n=ef(t),this.each(function(){if(s)for(i=0,r=k(this);i<n.length;i++)a=n[i],r.hasClass(a)?r.removeClass(a):r.addClass(a);else(void 0===t||"boolean"===o)&&((a=eh(this))&&ta.set(this,"__className__",a),this.setAttribute&&this.setAttribute("class",a||!1===t?"":ta.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,a=0;for(e=" "+t+" ";n=this[a++];)if(1===n.nodeType&&(" "+ed(eh(n))+" ").indexOf(e)>-1)return!0;return!1}});var ep=/\r/g;k.fn.extend({val:function(t){var e,n,a,i=this[0];return arguments.length?(a=v(t),this.each(function(n){var i;1!==this.nodeType||(null==(i=a?t.call(this,n,k(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=k.map(i,function(t){return null==t?"":t+""})),(e=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=k.valHooks[i.type]||k.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(ep,""):null==n?"":n:void 0}}),k.extend({valHooks:{option:{get:function(t){var e=k.find.attr(t,"value");return null!=e?e:ed(k.text(t))}},select:{get:function(t){var e,n,a,i=t.options,r=t.selectedIndex,o="select-one"===t.type,s=o?null:[],l=o?r+1:i.length;for(a=r<0?l:o?r:0;a<l;a++)if(((n=i[a]).selected||a===r)&&!n.disabled&&(!n.parentNode.disabled||!x(n.parentNode,"optgroup"))){if(e=k(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,a,i=t.options,r=k.makeArray(e),o=i.length;o--;)((a=i[o]).selected=k.inArray(k.valHooks.option.get(a),r)>-1)&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=k.inArray(k(t).val(),e)>-1}},p.checkOn||(k.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ev=t.location,em={guid:Date.now()},eg=/\?/;k.parseXML=function(e){var n,a;if(!e||"string"!=typeof e)return null;try{n=new t.DOMParser().parseFromString(e,"text/xml")}catch(t){}return a=n&&n.getElementsByTagName("parsererror")[0],(!n||a)&&k.error("Invalid XML: "+(a?k.map(a.childNodes,function(t){return t.textContent}).join("\n"):e)),n};var ey=/^(?:focusinfocus|focusoutblur)$/,eb=function(t){t.stopPropagation()};k.extend(k.event,{trigger:function(e,n,a,i){var r,o,s,l,c,u,h,f,p=[a||g],y=d.call(e,"type")?e.type:e,b=d.call(e,"namespace")?e.namespace.split("."):[];if(o=f=s=a=a||g,!(3===a.nodeType||8===a.nodeType||ey.test(y+k.event.triggered))&&(y.indexOf(".")>-1&&(y=(b=y.split(".")).shift(),b.sort()),c=0>y.indexOf(":")&&"on"+y,(e=e[k.expando]?e:new k.Event(y,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=b.join("."),e.rnamespace=e.namespace?RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=a),n=null==n?[e]:k.makeArray(n,[e]),h=k.event.special[y]||{},i||!h.trigger||!1!==h.trigger.apply(a,n))){if(!i&&!h.noBubble&&!m(a)){for(l=h.delegateType||y,ey.test(l+y)||(o=o.parentNode);o;o=o.parentNode)p.push(o),s=o;s===(a.ownerDocument||g)&&p.push(s.defaultView||s.parentWindow||t)}for(r=0;(o=p[r++])&&!e.isPropagationStopped();)f=o,e.type=r>1?l:h.bindType||y,(u=(ta.get(o,"events")||Object.create(null))[e.type]&&ta.get(o,"handle"))&&u.apply(o,n),(u=c&&o[c])&&u.apply&&te(o)&&(e.result=u.apply(o,n),!1===e.result&&e.preventDefault());return e.type=y,!i&&!e.isDefaultPrevented()&&(!h._default||!1===h._default.apply(p.pop(),n))&&te(a)&&c&&v(a[y])&&!m(a)&&((s=a[c])&&(a[c]=null),k.event.triggered=y,e.isPropagationStopped()&&f.addEventListener(y,eb),a[y](),e.isPropagationStopped()&&f.removeEventListener(y,eb),k.event.triggered=void 0,s&&(a[c]=s)),e.result}},simulate:function(t,e,n){var a=k.extend(new k.Event,n,{type:t,isSimulated:!0});k.event.trigger(a,null,e)}}),k.fn.extend({trigger:function(t,e){return this.each(function(){k.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return k.event.trigger(t,e,n,!0)}});var ew=/\[\]$/,e_=/\r?\n/g,eE=/^(?:submit|button|image|reset|file)$/i,ek=/^(?:input|select|textarea|keygen)/i;k.param=function(t,e){var n,a=[],i=function(t,e){var n=v(e)?e():e;a[a.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!k.isPlainObject(t))k.each(t,function(){i(this.name,this.value)});else for(n in t)!function t(e,n,a,i){var r;if(Array.isArray(n))k.each(n,function(n,r){a||ew.test(e)?i(e,r):t(e+"["+("object"==typeof r&&null!=r?n:"")+"]",r,a,i)});else if(a||"object"!==w(n))i(e,n);else for(r in n)t(e+"["+r+"]",n[r],a,i)}(n,t[n],e,i);return a.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=k.prop(this,"elements");return t?k.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!k(this).is(":disabled")&&ek.test(this.nodeName)&&!eE.test(t)&&(this.checked||!tb.test(t))}).map(function(t,e){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(t){return{name:e.name,value:t.replace(e_,"\r\n")}}):{name:e.name,value:n.replace(e_,"\r\n")}}).get()}});var eT=/%20/g,ex=/#.*$/,eO=/([?&])_=[^&]*/,eP=/^(.*?):[ \t]*([^\r\n]*)$/mg,eS=/^(?:GET|HEAD)$/,eL=/^\/\//,eA={},eC={},eM="*/".concat("*"),eR=g.createElement("a");function eB(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var a,i=0,r=e.toLowerCase().match(j)||[];if(v(n))for(;a=r[i++];)"+"===a[0]?(t[a=a.slice(1)||"*"]=t[a]||[]).unshift(n):(t[a]=t[a]||[]).push(n)}}function eI(t,e,n,a){var i={},r=t===eC;function o(s){var l;return i[s]=!0,k.each(t[s]||[],function(t,s){var c=s(e,n,a);return"string"!=typeof c||r||i[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}return o(e.dataTypes[0])||!i["*"]&&o("*")}function eF(t,e){var n,a,i=k.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:a||(a={}))[n]=e[n]);return a&&k.extend(!0,t,a),t}eR.href=ev.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ev.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ev.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":eM,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?eF(eF(t,k.ajaxSettings),e):eF(k.ajaxSettings,t)},ajaxPrefilter:eB(eA),ajaxTransport:eB(eC),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0),n=n||{};var a,i,r,o,s,l,c,u,d,h,f=k.ajaxSetup({},n),p=f.context||f,v=f.context&&(p.nodeType||p.jquery)?k(p):k.event,m=k.Deferred(),y=k.Callbacks("once memory"),b=f.statusCode||{},w={},_={},E="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(c){if(!o)for(o={};e=eP.exec(r);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?r:null},setRequestHeader:function(t,e){return null==c&&(w[t=_[t.toLowerCase()]=_[t.toLowerCase()]||t]=e),this},overrideMimeType:function(t){return null==c&&(f.mimeType=t),this},statusCode:function(t){var e;if(t){if(c)T.always(t[T.status]);else for(e in t)b[e]=[b[e],t[e]]}return this},abort:function(t){var e=t||E;return a&&a.abort(e),x(0,e),this}};if(m.promise(T),f.url=((e||f.url||ev.href)+"").replace(eL,ev.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(j)||[""],null==f.crossDomain){l=g.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=eR.protocol+"//"+eR.host!=l.protocol+"//"+l.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=k.param(f.data,f.traditional)),eI(eA,f,n,T),c)return T;for(d in(u=k.event&&f.global)&&0==k.active++&&k.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!eS.test(f.type),i=f.url.replace(ex,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(eT,"+")):(h=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(eg.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(eO,"$1"),h=(eg.test(i)?"&":"?")+"_="+em.guid+++h),f.url=i+h),f.ifModified&&(k.lastModified[i]&&T.setRequestHeader("If-Modified-Since",k.lastModified[i]),k.etag[i]&&T.setRequestHeader("If-None-Match",k.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+eM+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(p,T,f)||c))return T.abort();if(E="abort",y.add(f.complete),T.done(f.success),T.fail(f.error),a=eI(eC,f,n,T)){if(T.readyState=1,u&&v.trigger("ajaxSend",[T,f]),c)return T;f.async&&f.timeout>0&&(s=t.setTimeout(function(){T.abort("timeout")},f.timeout));try{c=!1,a.send(w,x)}catch(t){if(c)throw t;x(-1,t)}}else x(-1,"No Transport");function x(e,n,o,l){var d,h,g,w,_,E=n;c||(c=!0,s&&t.clearTimeout(s),a=void 0,r=l||"",T.readyState=e>0?4:0,d=e>=200&&e<300||304===e,o&&(w=function(t,e,n){for(var a,i,r,o,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===a&&(a=t.mimeType||e.getResponseHeader("Content-Type"));if(a){for(i in s)if(s[i]&&s[i].test(a)){l.unshift(i);break}}if(l[0]in n)r=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){r=i;break}o||(o=i)}r=r||o}if(r)return r!==l[0]&&l.unshift(r),n[r]}(f,T,o)),!d&&k.inArray("script",f.dataTypes)>-1&&0>k.inArray("json",f.dataTypes)&&(f.converters["text script"]=function(){}),w=function(t,e,n,a){var i,r,o,s,l,c={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&a&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift()){if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(o=c[l+" "+r]||c["* "+r])){for(i in c)if((s=i.split(" "))[1]===r&&(o=c[l+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[i]:!0!==c[i]&&(r=s[0],u.unshift(s[1]));break}}if(!0!==o){if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+r}}}}}return{state:"success",data:e}}(f,w,T,d),d?(f.ifModified&&((_=T.getResponseHeader("Last-Modified"))&&(k.lastModified[i]=_),(_=T.getResponseHeader("etag"))&&(k.etag[i]=_)),204===e||"HEAD"===f.type?E="nocontent":304===e?E="notmodified":(E=w.state,h=w.data,d=!(g=w.error))):(g=E,(e||!E)&&(E="error",e<0&&(e=0))),T.status=e,T.statusText=(n||E)+"",d?m.resolveWith(p,[h,E,T]):m.rejectWith(p,[T,E,g]),T.statusCode(b),b=void 0,u&&v.trigger(d?"ajaxSuccess":"ajaxError",[T,f,d?h:g]),y.fireWith(p,[T,E]),!u||(v.trigger("ajaxComplete",[T,f]),--k.active||k.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,n){return k.get(t,e,n,"json")},getScript:function(t,e){return k.get(t,void 0,e,"script")}}),k.each(["get","post"],function(t,e){k[e]=function(t,n,a,i){return v(n)&&(i=i||a,a=n,n=void 0),k.ajax(k.extend({url:t,type:e,dataType:i,data:n,success:a},k.isPlainObject(t)&&t))}}),k.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),k._evalUrl=function(t,e,n){return k.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){k.globalEval(t,e,n)}})},k.fn.extend({wrapAll:function(t){var e;return this[0]&&(v(t)&&(t=t.call(this[0])),e=k(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return v(t)?this.each(function(e){k(this).wrapInner(t.call(this,e))}):this.each(function(){var e=k(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=v(t);return this.each(function(n){k(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(t){return!k.expr.pseudos.visible(t)},k.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var eD={0:200,1223:204},eN=k.ajaxSettings.xhr();p.cors=!!eN&&"withCredentials"in eN,p.ajax=eN=!!eN,k.ajaxTransport(function(e){var n,a;if(p.cors||eN&&!e.crossDomain)return{send:function(i,r){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(o,i[o]);n=function(t){return function(){n&&(n=a=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(eD[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),a=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=a:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&a()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),k.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return k.globalEval(t),t}}}),k.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),k.ajaxTransport("script",function(t){if(t.crossDomain||t.scriptAttrs){var e,n;return{send:function(a,i){e=k("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),g.head.appendChild(e[0])},abort:function(){n&&n()}}}});var eH=[],eW=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=eH.pop()||k.expando+"_"+em.guid++;return this[t]=!0,t}}),k.ajaxPrefilter("json jsonp",function(e,n,a){var i,r,o,s=!1!==e.jsonp&&(eW.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&eW.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(eW,"$1"+i):!1!==e.jsonp&&(e.url+=(eg.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||k.error(i+" was not called"),o[0]},e.dataTypes[0]="json",r=t[i],t[i]=function(){o=arguments},a.always(function(){void 0===r?k(t).removeProp(i):t[i]=r,e[i]&&(e.jsonpCallback=n.jsonpCallback,eH.push(i)),o&&v(r)&&r(o[0]),o=r=void 0}),"script"}),p.createHTMLDocument=((n=g.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===n.childNodes.length),k.parseHTML=function(t,e,n){var a,i,r;return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(p.createHTMLDocument?((a=(e=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,e.head.appendChild(a)):e=g),i=F.exec(t),r=!n&&[],i)?[e.createElement(i[1])]:(i=tO([t],e,r),r&&r.length&&k(r).remove(),k.merge([],i.childNodes))},k.fn.load=function(t,e,n){var a,i,r,o=this,s=t.indexOf(" ");return s>-1&&(a=ed(t.slice(s)),t=t.slice(0,s)),v(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),o.length>0&&k.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){r=arguments,o.html(a?k("<div>").append(k.parseHTML(t)).find(a):t)}).always(n&&function(t,e){o.each(function(){n.apply(this,r||[t.responseText,e,t])})}),this},k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(t,e,n){var a,i,r,o,s,l,c=k.css(t,"position"),u=k(t),d={};"static"===c&&(t.style.position="relative"),s=u.offset(),r=k.css(t,"top"),l=k.css(t,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(o=(a=u.position()).top,i=a.left):(o=parseFloat(r)||0,i=parseFloat(l)||0),v(e)&&(e=e.call(t,n,k.extend({},s))),null!=e.top&&(d.top=e.top-s.top+o),null!=e.left&&(d.left=e.left-s.left+i),"using"in e?e.using.call(t,d):u.css(d)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,a=this[0];if(a)return a.getClientRects().length?(e=a.getBoundingClientRect(),n=a.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,e,n,a=this[0],i={top:0,left:0};if("fixed"===k.css(a,"position"))e=a.getBoundingClientRect();else{for(e=this.offset(),n=a.ownerDocument,t=a.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===k.css(t,"position");)t=t.parentNode;t&&t!==a&&1===t.nodeType&&(i=k(t).offset(),i.top+=k.css(t,"borderTopWidth",!0),i.left+=k.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-k.css(a,"marginTop",!0),left:e.left-i.left-k.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===k.css(t,"position");)t=t.offsetParent;return t||td})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;k.fn[t]=function(a){return Z(this,function(t,a,i){var r;if(m(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===i)return r?r[e]:t[a];r?r.scrollTo(n?r.pageXOffset:i,n?i:r.pageYOffset):t[a]=i},t,a,arguments.length)}}),k.each(["top","left"],function(t,e){k.cssHooks[e]=tG(p.pixelPosition,function(t,n){if(n)return n=tX(t,e),tY.test(n)?k(t).position()[e]+"px":n})}),k.each({Height:"height",Width:"width"},function(t,e){k.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,a){k.fn[a]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===r?"margin":"border");return Z(this,function(e,n,i){var r;return m(e)?0===a.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?k.css(e,n,s):k.style(e,n,i,s)},e,o?i:void 0,o)}})}),k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){k.fn[e]=function(t){return this.on(e,t)}}),k.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,a){return this.on(e,t,n,a)},undelegate:function(t,e,n){return 1==arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){k.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}});var eY=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;k.proxy=function(t,e){var n,a,i;if("string"==typeof e&&(n=t[e],e=t,t=n),v(t))return a=r.call(arguments,2),(i=function(){return t.apply(e||this,a.concat(r.call(arguments)))}).guid=t.guid=t.guid||k.guid++,i},k.holdReady=function(t){t?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=x,k.isFunction=v,k.isWindow=m,k.camelCase=tt,k.type=w,k.now=Date.now,k.isNumeric=function(t){var e=k.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},k.trim=function(t){return null==t?"":(t+"").replace(eY,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var eU=t.jQuery,ej=t.$;return k.noConflict=function(e){return t.$===k&&(t.$=ej),e&&t.jQuery===k&&(t.jQuery=eU),k},void 0===e&&(t.jQuery=t.$=k),k},"object"==typeof lA?lA=n.document?a(n,!0):function(t){if(!t.document)throw Error("jQuery requires a window with a document");return a(t)}:a(n);var lC={};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */function lM(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lR(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function lB(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function lI(t,e,n){return e&&lB(t.prototype,e),n&&lB(t,n),t}function lF(t){return(lF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lD(t,e,n){return(lD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lF(t)););return t}(t,e);if(a){var i=Object.getOwnPropertyDescriptor(a,e);return i.get?i.get.call(n||t):i.value}})(t,e,n||t)}function lN(t,e){return(lN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lH(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lN(t,e)}function lW(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lY(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){lW(t,e,n[e])})}return t}function lU(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n.push.apply(n,a)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function lj(t,e){return e&&("object"===ty(e)||"function"==typeof e)?e:lM(t)}function lz(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function lq(t,e){if(t){if("string"==typeof t)return lz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lz(t,e)}}function lX(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,a,i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r=[],o=!0,s=!1;try{for(i=i.call(t);!(o=(n=i.next()).done)&&(r.push(n.value),!e||r.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==i.return||i.return()}finally{if(s)throw a}}return r}}(t,e)||lq(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lG(t){return function(t){if(Array.isArray(t))return lz(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||lq(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(lV=function(){return!!t})()}function lK(t){var e=lV();return function(){var n,a=lF(t);return n=e?Reflect.construct(a,arguments,lF(this).constructor):a.apply(this,arguments),lj(this,n)}}function lZ(t){var e;for(e in lZ.DEFAULTS)lZ.DEFAULTS.hasOwnProperty(e)&&(this[e]=lZ.DEFAULTS[e]);for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}function l$(t,e,n,a){this.left=t,this.top=e,this.right=n,this.bottom=a}function lQ(t,e){this.width=0|t,this.height=0|e}function lJ(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n}function l0(t,e){return document.createElement("canvas").getContext("2d").createImageData(t,e)}function l5(t,e){"number"==typeof t?(lQ.call(this,t,e),this.imageData=l0(this.width,this.height)):(lQ.call(this,t.width,t.height),this.imageData=t),this.data=this.imageData.data}function l2(t,e,n,a){var i,r,o=0,s=[0,0,0,0];i=0;for(var l=0;l<a&&l<n;l++){for(var c=0;c<l5.BYTES_PER_PIXEL;c++)s[c]+=t[i++];o++}r=0;for(var u=0;u<n;u++){if(u+a<n){i=(u+a)*l5.BYTES_PER_PIXEL;for(var d=0;d<l5.BYTES_PER_PIXEL;d++)s[d]+=t[i++];o++}for(var h=0;h<l5.BYTES_PER_PIXEL;h++)e[r++]=Math.round(s[h]/o);if(u-a>=0){i=(u-a)*l5.BYTES_PER_PIXEL;for(var f=0;f<l5.BYTES_PER_PIXEL;f++)s[f]-=t[i++];o--}}}function l1(t,e){if(0==(e%=4))return t;var n=lJ(0,0),a=n.getContext("2d");switch(e%2==0?(n.width=t.width,n.height=t.height):(n.width=t.height,n.height=t.width),e){case 1:a.rotate(Math.PI/2),a.drawImage(t,0,-t.height);break;case 2:a.rotate(Math.PI),a.drawImage(t,-t.width,-t.height);break;case 3:a.rotate(-Math.PI/2),a.drawImage(t,-t.width,0);break;default:return t}return n}function l3(t,e){ce.call(this,t),this.layers=[],this.expanded=!0,this.blendMode=e}function l4(t,e){return t+e}function l6(t,e,n){lQ.call(this,t,e),this.createBitmap(t,e,n)}function l8(t,e,n,a){for(var i,r=0,o=0,s=0;s<a&&s<n;s++)o+=t[s],r++;i=0;for(var l=0;l<n;l++)l+a<n&&(o+=t[l+a],r++),e[i++]=Math.round(o/r),l-a>=0&&(o-=t[l-a],r--)}function l7(){}lC=function(){var t,e,n=new Map,a={set:function(t,e,a){n.has(t)||n.set(t,new Map);var i=n.get(t);i.has(e)||0===i.size?i.set(e,a):console.error("Bootstrap doesn't allow more than one instance per element. Bound instance: ".concat(Array.from(i.keys())[0],"."))},get:function(t,e){return n.has(t)&&n.get(t).get(e)||null},remove:function(t,e){if(n.has(t)){var a=n.get(t);a.delete(e),0===a.size&&n.delete(t)}}},i="transitionend",r=function(t){return t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,function(t,e){return"#".concat(CSS.escape(e))})),t},o=function(t){t.dispatchEvent(new Event(i))},s=function(t){return!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType)},l=function(t){return s(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(r(t)):null},c=function(t){if(!s(t)||0===t.getClientRects().length)return!1;var e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){var a=t.closest("summary");if(a&&a.parentNode!==n||null===a)return!1}return e},u=function(t){return!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))},d=function(t){if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){var e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?d(t.parentNode):null},h=function(){},f=function(t){t.offsetHeight},p=function(){return window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null},v=[],m=function(){return"rtl"===document.documentElement.dir},g=function(t){var e;e=function(){var e=p();if(e){var n=t.NAME,a=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=function(){return e.fn[n]=a,t.jQueryInterface}}},"loading"===document.readyState?(v.length||document.addEventListener("DOMContentLoaded",function(){var t=!0,e=!1,n=void 0;try{for(var a,i=v[Symbol.iterator]();!(t=(a=i.next()).done);t=!0)(0,a.value)()}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}),v.push(e)):e()},y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return"function"==typeof t?t.apply(void 0,lG(e)):n},b=function(t,e){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!n)return void y(t);var a=function(t){if(!t)return 0;var e=window.getComputedStyle(t),n=e.transitionDuration,a=e.transitionDelay,i=Number.parseFloat(n),r=Number.parseFloat(a);return i||r?(n=n.split(",")[0],a=a.split(",")[0],1e3*(Number.parseFloat(n)+Number.parseFloat(a))):0}(e)+5,r=!1,s=function(n){n.target===e&&(r=!0,e.removeEventListener(i,s),y(t))};e.addEventListener(i,s),setTimeout(function(){r||o(e)},a)},w=function(t,e,n,a){var i=t.length,r=t.indexOf(e);return -1===r?!n&&a?t[i-1]:t[0]:(r+=n?1:-1,a&&(r=(r+i)%i),t[Math.max(0,Math.min(r,i-1))])},_=/[^.]*(?=\..*)\.|.*/,E=/\..*/,k=/::\d+$/,T={},x=1,O={mouseenter:"mouseover",mouseleave:"mouseout"},P=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function S(t,e){return e&&"".concat(e,"::").concat(x++)||t.uidEvent||x++}function L(t){var e=S(t);return t.uidEvent=e,T[e]=T[e]||{},T[e]}function A(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.values(t).find(function(t){return t.callable===e&&t.delegationSelector===n})}function C(t,e,n){var a="string"==typeof e,i=B(t);return P.has(i)||(i=t),[a,a?n:e||n,i]}function M(t,e,n,a,i){if("string"==typeof e&&t){var r,o,s,l=lX(C(e,n,a),3),c=l[0],u=l[1],d=l[2];e in O&&(r=u,u=function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return r.call(this,t)});var h=L(t),f=h[d]||(h[d]={}),p=A(f,u,c?n:null);if(p)return void(p.oneOff=p.oneOff&&i);var v=S(u,e.replace(_,"")),m=c?(o=u,function e(a){for(var i=t.querySelectorAll(n),r=!0,s=!1,l=void 0,c=a.target;c&&c!==this;c=c.parentNode)try{for(var u,d=i[Symbol.iterator]();!(r=(u=d.next()).done);r=!0)if(u.value===c)return F(a,{delegateTarget:c}),e.oneOff&&I.off(t,a.type,n,o),o.apply(c,[a])}catch(t){s=!0,l=t}finally{try{r||null==d.return||d.return()}finally{if(s)throw l}}}):(s=u,function e(n){return F(n,{delegateTarget:t}),e.oneOff&&I.off(t,n.type,s),s.apply(t,[n])});m.delegationSelector=c?n:null,m.callable=u,m.oneOff=i,m.uidEvent=v,f[v]=m,t.addEventListener(d,m,c)}}function R(t,e,n,a,i){var r=A(e[n],a,i);r&&(t.removeEventListener(n,r,!!i),delete e[n][r.uidEvent])}function B(t){return O[t=t.replace(E,"")]||t}var I={on:function(t,e,n,a){M(t,e,n,a,!1)},one:function(t,e,n,a){M(t,e,n,a,!0)},off:function(t,e,n,a){if("string"==typeof e&&t){var i=lX(C(e,n,a),3),r=i[0],o=i[1],s=i[2],l=s!==e,c=L(t),u=c[s]||{},d=e.startsWith(".");if(void 0===o){var h=!0,f=!1,p=void 0;if(d)try{for(var v,m=Object.keys(c)[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var g=v.value;!function(t,e,n,a){var i=e[n]||{},r=!0,o=!1,s=void 0;try{for(var l,c=Object.entries(i)[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=lX(l.value,2),d=u[0],h=u[1];d.includes(a)&&R(t,e,n,h.callable,h.delegationSelector)}}catch(t){o=!0,s=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw s}}}(t,c,g,e.slice(1))}}catch(t){f=!0,p=t}finally{try{h||null==m.return||m.return()}finally{if(f)throw p}}var y=!0,b=!1,w=void 0;try{for(var _,E=Object.entries(u)[Symbol.iterator]();!(y=(_=E.next()).done);y=!0){var T=lX(_.value,2),x=T[0],O=T[1],P=x.replace(k,"");l&&!e.includes(P)||R(t,c,s,O.callable,O.delegationSelector)}}catch(t){b=!0,w=t}finally{try{y||null==E.return||E.return()}finally{if(b)throw w}}}else{if(!Object.keys(u).length)return;R(t,c,s,o,r?n:null)}}},trigger:function(t,e,n){if("string"!=typeof e||!t)return null;var a=p(),i=null,r=!0,o=!0,s=!1;e!==B(e)&&a&&(i=a.Event(e,n),a(t).trigger(i),r=!i.isPropagationStopped(),o=!i.isImmediatePropagationStopped(),s=i.isDefaultPrevented());var l=F(new Event(e,{bubbles:r,cancelable:!0}),n);return s&&l.preventDefault(),o&&t.dispatchEvent(l),l.defaultPrevented&&i&&i.preventDefault(),l}};function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!0,a=!1,i=void 0;try{for(var r,o=Object.entries(e)[Symbol.iterator]();!(n=(r=o.next()).done);n=!0)!function(){var e=lX(r.value,2),n=e[0],a=e[1];try{t[n]=a}catch(e){Object.defineProperty(t,n,{configurable:!0,get:function(){return a}})}}()}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return t}function D(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function N(t){return t.replace(/[A-Z]/g,function(t){return"-".concat(t.toLowerCase())})}var H={setDataAttribute:function(t,e,n){t.setAttribute("data-bs-".concat(N(e)),n)},removeDataAttribute:function(t,e){t.removeAttribute("data-bs-".concat(N(e)))},getDataAttributes:function(t){if(!t)return{};var e={},n=Object.keys(t.dataset).filter(function(t){return t.startsWith("bs")&&!t.startsWith("bsConfig")}),a=!0,i=!1,r=void 0;try{for(var o,s=n[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value,c=l.replace(/^bs/,"");e[c=c.charAt(0).toLowerCase()+c.slice(1,c.length)]=D(t.dataset[l])}}catch(t){i=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return e},getDataAttribute:function(t,e){return D(t.getAttribute("data-bs-".concat(N(e))))}},W=/*#__PURE__*/function(){function t(){lR(this,t)}return lI(t,[{key:"_getConfig",value:function(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}},{key:"_configAfterMerge",value:function(t){return t}},{key:"_mergeConfigObj",value:function(t,e){var n=s(e)?H.getDataAttribute(e,"config"):{};return lY({},this.constructor.Default,"object"==typeof n?n:{},s(e)?H.getDataAttributes(e):{},"object"==typeof t?t:{})}},{key:"_typeCheckConfig",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.DefaultType,n=!0,a=!1,i=void 0;try{for(var r,o=Object.entries(e)[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var l=lX(r.value,2),c=l[0],u=l[1],d=t[c],h=s(d)?"element":null==d?"".concat(d):Object.prototype.toString.call(d).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(u).test(h))throw TypeError("".concat(this.constructor.NAME.toUpperCase(),': Option "').concat(c,'" provided type "').concat(h,'" but expected type "').concat(u,'".'))}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}}],[{key:"Default",get:function(){return{}}},{key:"DefaultType",get:function(){return{}}},{key:"NAME",get:function(){throw Error('You have to implement the static method "NAME", for each component!')}}]),t}(),Y=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,i){var r;return lR(this,n),r=e.call(this),(t=l(t))&&(r._element=t,r._config=r._getConfig(i),a.set(r._element,r.constructor.DATA_KEY,lM(r))),lj(r)}return lI(n,[{key:"dispose",value:function(){a.remove(this._element,this.constructor.DATA_KEY),I.off(this._element,this.constructor.EVENT_KEY);var t=!0,e=!1,n=void 0;try{for(var i,r=Object.getOwnPropertyNames(this)[Symbol.iterator]();!(t=(i=r.next()).done);t=!0)this[i.value]=null}catch(t){e=!0,n=t}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}}},{key:"_queueCallback",value:function(t,e){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];b(t,e,n)}},{key:"_getConfig",value:function(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}}],[{key:"getInstance",value:function(t){return a.get(l(t),this.DATA_KEY)}},{key:"getOrCreateInstance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}},{key:"VERSION",get:function(){return"5.3.3"}},{key:"DATA_KEY",get:function(){return"bs.".concat(this.NAME)}},{key:"EVENT_KEY",get:function(){return".".concat(this.DATA_KEY)}},{key:"eventName",value:function(t){return"".concat(t).concat(this.EVENT_KEY)}}]),n}(W),U=function(t){var e=t.getAttribute("data-bs-target");if(!e||"#"===e){var n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n="#".concat(n.split("#")[1])),e=n&&"#"!==n?n.trim():null}return e?e.split(",").map(function(t){return r(t)}).join(","):null},j={find:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return(t=[]).concat.apply(t,lG(Element.prototype.querySelectorAll.call(n,e)))},findOne:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(e,t)},children:function(t,n){return(e=[]).concat.apply(e,lG(t.children)).filter(function(t){return t.matches(n)})},parents:function(t,e){for(var n=[],a=t.parentNode.closest(e);a;)n.push(a),a=a.parentNode.closest(e);return n},prev:function(t,e){for(var n=t.previousElementSibling;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next:function(t,e){for(var n=t.nextElementSibling;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren:function(t){var e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(function(t){return"".concat(t,':not([tabindex^="-"])')}).join(",");return this.find(e,t).filter(function(t){return!u(t)&&c(t)})},getSelectorFromElement:function(t){var e=U(t);return e&&j.findOne(e)?e:null},getElementFromSelector:function(t){var e=U(t);return e?j.findOne(e):null},getMultipleElementsFromSelector:function(t){var e=U(t);return e?j.find(e):[]}},z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide",n="click.dismiss".concat(t.EVENT_KEY),a=t.NAME;I.on(document,n,'[data-bs-dismiss="'.concat(a,'"]'),function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),!u(this)){var i=j.getElementFromSelector(this)||this.closest(".".concat(a));t.getOrCreateInstance(i)[e]()}})},q=".bs.alert",X="close".concat(q),G="closed".concat(q),V=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(){return lR(this,n),e.apply(this,arguments)}return lI(n,[{key:"close",value:function(){var t=this;if(!I.trigger(this._element,X).defaultPrevented){this._element.classList.remove("show");var e=this._element.classList.contains("fade");this._queueCallback(function(){return t._destroyElement()},this._element,e)}}},{key:"_destroyElement",value:function(){this._element.remove(),I.trigger(this._element,G),this.dispose()}}],[{key:"NAME",get:function(){return"alert"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var e=n.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));e[t](this)}})}}]),n}(Y);z(V,"close"),g(V);var K='[data-bs-toggle="button"]',Z=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(){return lR(this,n),e.apply(this,arguments)}return lI(n,[{key:"toggle",value:function(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}}],[{key:"NAME",get:function(){return"button"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var e=n.getOrCreateInstance(this);"toggle"===t&&e[t]()})}}]),n}(Y);I.on(document,"click.bs.button.data-api",K,function(t){t.preventDefault();var e=t.target.closest(K);Z.getOrCreateInstance(e).toggle()}),g(Z);var $=".bs.swipe",Q="touchstart".concat($),J="touchmove".concat($),tt="touchend".concat($),te="pointerdown".concat($),tn="pointerup".concat($),ta={endCallback:null,leftCallback:null,rightCallback:null},ti={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},tr=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;return lR(this,n),(i=e.call(this))._element=t,t&&n.isSupported()&&(i._config=i._getConfig(a),i._deltaX=0,i._supportPointerEvents=!!window.PointerEvent,i._initEvents()),lj(i)}return lI(n,[{key:"dispose",value:function(){I.off(this._element,$)}},{key:"_start",value:function(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}},{key:"_end",value:function(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),y(this._config.endCallback)}},{key:"_move",value:function(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}},{key:"_handleSwipe",value:function(){var t=Math.abs(this._deltaX);if(!(t<=40)){var e=t/this._deltaX;this._deltaX=0,e&&y(e>0?this._config.rightCallback:this._config.leftCallback)}}},{key:"_initEvents",value:function(){var t=this;this._supportPointerEvents?(I.on(this._element,te,function(e){return t._start(e)}),I.on(this._element,tn,function(e){return t._end(e)}),this._element.classList.add("pointer-event")):(I.on(this._element,Q,function(e){return t._start(e)}),I.on(this._element,J,function(e){return t._move(e)}),I.on(this._element,tt,function(e){return t._end(e)}))}},{key:"_eventIsPointerPenTouch",value:function(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}}],[{key:"Default",get:function(){return ta}},{key:"DefaultType",get:function(){return ti}},{key:"NAME",get:function(){return"swipe"}},{key:"isSupported",value:function(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}]),n}(W),to=".bs.carousel",ts=".data-api",tl="next",tc="prev",tu="left",td="right",th="slide".concat(to),tf="slid".concat(to),tp="keydown".concat(to),tv="mouseenter".concat(to),tm="mouseleave".concat(to),tg="dragstart".concat(to),ty="load".concat(to).concat(ts),tb="click".concat(to).concat(ts),tw="carousel",t_="active",tE=".active",tk=".carousel-item",tT=tE+tk,tx={ArrowLeft:td,ArrowRight:tu},tO={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},tP={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},tS=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;return lR(this,n),(i=e.call(this,t,a))._interval=null,i._activeElement=null,i._isSliding=!1,i.touchTimeout=null,i._swipeHelper=null,i._indicatorsElement=j.findOne(".carousel-indicators",i._element),i._addEventListeners(),i._config.ride===tw&&i.cycle(),lj(i)}return lI(n,[{key:"next",value:function(){this._slide(tl)}},{key:"nextWhenVisible",value:function(){!document.hidden&&c(this._element)&&this.next()}},{key:"prev",value:function(){this._slide(tc)}},{key:"pause",value:function(){this._isSliding&&o(this._element),this._clearInterval()}},{key:"cycle",value:function(){var t=this;this._clearInterval(),this._updateInterval(),this._interval=setInterval(function(){return t.nextWhenVisible()},this._config.interval)}},{key:"_maybeEnableCycle",value:function(){var t=this;this._config.ride&&(this._isSliding?I.one(this._element,tf,function(){return t.cycle()}):this.cycle())}},{key:"to",value:function(t){var e=this,n=this._getItems();if(!(t>n.length-1)&&!(t<0)){if(this._isSliding)return void I.one(this._element,tf,function(){return e.to(t)});var a=this._getItemIndex(this._getActive());a!==t&&this._slide(t>a?tl:tc,n[t])}}},{key:"dispose",value:function(){this._swipeHelper&&this._swipeHelper.dispose(),lD(lF(n.prototype),"dispose",this).call(this)}},{key:"_configAfterMerge",value:function(t){return t.defaultInterval=t.interval,t}},{key:"_addEventListeners",value:function(){var t=this;this._config.keyboard&&I.on(this._element,tp,function(e){return t._keydown(e)}),"hover"===this._config.pause&&(I.on(this._element,tv,function(){return t.pause()}),I.on(this._element,tm,function(){return t._maybeEnableCycle()})),this._config.touch&&tr.isSupported()&&this._addTouchEventListeners()}},{key:"_addTouchEventListeners",value:function(){var t=this,e=!0,n=!1,a=void 0;try{for(var i,r=j.find(".carousel-item img",this._element)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;I.on(o,tg,function(t){return t.preventDefault()})}}catch(t){n=!0,a=t}finally{try{e||null==r.return||r.return()}finally{if(n)throw a}}this._swipeHelper=new tr(this._element,{leftCallback:function(){return t._slide(t._directionToOrder(tu))},rightCallback:function(){return t._slide(t._directionToOrder(td))},endCallback:function(){"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(){return t._maybeEnableCycle()},500+t._config.interval))}})}},{key:"_keydown",value:function(t){if(!/input|textarea/i.test(t.target.tagName)){var e=tx[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}}},{key:"_getItemIndex",value:function(t){return this._getItems().indexOf(t)}},{key:"_setActiveIndicatorElement",value:function(t){if(this._indicatorsElement){var e=j.findOne(tE,this._indicatorsElement);e.classList.remove(t_),e.removeAttribute("aria-current");var n=j.findOne('[data-bs-slide-to="'.concat(t,'"]'),this._indicatorsElement);n&&(n.classList.add(t_),n.setAttribute("aria-current","true"))}}},{key:"_updateInterval",value:function(){var t=this._activeElement||this._getActive();if(t){var e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}}},{key:"_slide",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this._isSliding){var a=this._getActive(),i=t===tl,r=n||w(this._getItems(),a,i,this._config.wrap);if(r!==a){var o=this._getItemIndex(r),s=function(n){return I.trigger(e._element,n,{relatedTarget:r,direction:e._orderToDirection(t),from:e._getItemIndex(a),to:o})};if(!s(th).defaultPrevented&&a&&r){var l=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;var c=i?"carousel-item-start":"carousel-item-end",u=i?"carousel-item-next":"carousel-item-prev";r.classList.add(u),f(r),a.classList.add(c),r.classList.add(c),this._queueCallback(function(){r.classList.remove(c,u),r.classList.add(t_),a.classList.remove(t_,u,c),e._isSliding=!1,s(tf)},a,this._isAnimated()),l&&this.cycle()}}}}},{key:"_isAnimated",value:function(){return this._element.classList.contains("slide")}},{key:"_getActive",value:function(){return j.findOne(tT,this._element)}},{key:"_getItems",value:function(){return j.find(tk,this._element)}},{key:"_clearInterval",value:function(){this._interval&&(clearInterval(this._interval),this._interval=null)}},{key:"_directionToOrder",value:function(t){return m()?t===tu?tc:tl:t===tu?tl:tc}},{key:"_orderToDirection",value:function(t){return m()?t===tc?tu:td:t===tc?td:tu}}],[{key:"Default",get:function(){return tO}},{key:"DefaultType",get:function(){return tP}},{key:"NAME",get:function(){return"carousel"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var e=n.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));e[t]()}}else e.to(t)})}}]),n}(Y);I.on(document,tb,"[data-bs-slide], [data-bs-slide-to]",function(t){var e=j.getElementFromSelector(this);if(e&&e.classList.contains(tw)){t.preventDefault();var n=tS.getOrCreateInstance(e),a=this.getAttribute("data-bs-slide-to");return a?n.to(a):"next"===H.getDataAttribute(this,"slide")?n.next():n.prev(),void n._maybeEnableCycle()}}),I.on(window,ty,function(){var t=j.find('[data-bs-ride="carousel"]'),e=!0,n=!1,a=void 0;try{for(var i,r=t[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;tS.getOrCreateInstance(o)}}catch(t){n=!0,a=t}finally{try{e||null==r.return||r.return()}finally{if(n)throw a}}}),g(tS);var tL=".bs.collapse",tA="show".concat(tL),tC="shown".concat(tL),tM="hide".concat(tL),tR="hidden".concat(tL),tB="show",tI="collapse",tF="collapsing",tD=":scope .".concat(tI," .").concat(tI),tN='[data-bs-toggle="collapse"]',tH={parent:null,toggle:!0},tW={parent:"(null|element)",toggle:"boolean"},tY=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){lR(this,n),(l=e.call(this,t,a))._isTransitioning=!1,l._triggerArray=[];var i=j.find(tN),r=!0,o=!1,s=void 0;try{for(var l,c,u=i[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value,h=j.getSelectorFromElement(d),f=j.find(h).filter(function(t){return t===l._element});null!==h&&f.length&&l._triggerArray.push(d)}}catch(t){o=!0,s=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw s}}return l._initializeChildren(),l._config.parent||l._addAriaAndCollapsedClass(l._triggerArray,l._isShown()),l._config.toggle&&l.toggle(),lj(l)}return lI(n,[{key:"toggle",value:function(){this._isShown()?this.hide():this.show()}},{key:"show",value:function(){var t=this;if(!(this._isTransitioning||this._isShown())){var e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(function(e){return e!==t._element}).map(function(t){return n.getOrCreateInstance(t,{toggle:!1})})),(!e.length||!e[0]._isTransitioning)&&!I.trigger(this._element,tA).defaultPrevented){var a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0)o.value.hide()}catch(t){i=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}var l=this._getDimension();this._element.classList.remove(tI),this._element.classList.add(tF),this._element.style[l]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;var c="scroll".concat(l[0].toUpperCase()+l.slice(1));this._queueCallback(function(){t._isTransitioning=!1,t._element.classList.remove(tF),t._element.classList.add(tI,tB),t._element.style[l]="",I.trigger(t._element,tC)},this._element,!0),this._element.style[l]="".concat(this._element[c],"px")}}}},{key:"hide",value:function(){var t=this;if(!this._isTransitioning&&this._isShown()&&!I.trigger(this._element,tM).defaultPrevented){var e=this._getDimension();this._element.style[e]="".concat(this._element.getBoundingClientRect()[e],"px"),f(this._element),this._element.classList.add(tF),this._element.classList.remove(tI,tB);var n=!0,a=!1,i=void 0;try{for(var r,o=this._triggerArray[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value,l=j.getElementFromSelector(s);l&&!this._isShown(l)&&this._addAriaAndCollapsedClass([s],!1)}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(function(){t._isTransitioning=!1,t._element.classList.remove(tF),t._element.classList.add(tI),I.trigger(t._element,tR)},this._element,!0)}}},{key:"_isShown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._element;return t.classList.contains(tB)}},{key:"_configAfterMerge",value:function(t){return t.toggle=!!t.toggle,t.parent=l(t.parent),t}},{key:"_getDimension",value:function(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}},{key:"_initializeChildren",value:function(){if(this._config.parent){var t=this._getFirstLevelChildren(tN),e=!0,n=!1,a=void 0;try{for(var i,r=t[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value,s=j.getElementFromSelector(o);s&&this._addAriaAndCollapsedClass([o],this._isShown(s))}}catch(t){n=!0,a=t}finally{try{e||null==r.return||r.return()}finally{if(n)throw a}}}}},{key:"_getFirstLevelChildren",value:function(t){var e=j.find(tD,this._config.parent);return j.find(t,this._config.parent).filter(function(t){return!e.includes(t)})}},{key:"_addAriaAndCollapsedClass",value:function(t,e){var n=!0,a=!1,i=void 0;if(t.length)try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;s.classList.toggle("collapsed",!e),s.setAttribute("aria-expanded",e)}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}}],[{key:"Default",get:function(){return tH}},{key:"DefaultType",get:function(){return tW}},{key:"NAME",get:function(){return"collapse"}},{key:"jQueryInterface",value:function(t){var e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){var a=n.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===a[t])throw TypeError('No method named "'.concat(t,'"'));a[t]()}})}}]),n}(Y);I.on(document,"click".concat(tL,".data-api"),tN,function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();var e=!0,n=!1,a=void 0;try{for(var i,r=j.getMultipleElementsFromSelector(this)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;tY.getOrCreateInstance(o,{toggle:!1}).toggle()}}catch(t){n=!0,a=t}finally{try{e||null==r.return||r.return()}finally{if(n)throw a}}}),g(tY);var tU="bottom",tj="right",tz="left",tq="auto",tX=["top",tU,tj,tz],tG="start",tV="clippingParents",tK="viewport",tZ="popper",t$="reference",tQ=tX.reduce(function(t,e){return t.concat([e+"-"+tG,e+"-end"])},[]),tJ=[].concat(tX,[tq]).reduce(function(t,e){return t.concat([e,e+"-"+tG,e+"-end"])},[]),t0="beforeRead",t5="read",t2="afterRead",t1="beforeMain",t3="main",t4="afterMain",t6="beforeWrite",t8="write",t7="afterWrite",t9=[t0,t5,t2,t1,t3,t4,t6,t8,t7];function et(t){return t?(t.nodeName||"").toLowerCase():null}function ee(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function en(t){return t instanceof ee(t).Element||t instanceof Element}function ea(t){return t instanceof ee(t).HTMLElement||t instanceof HTMLElement}function ei(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ee(t).ShadowRoot||t instanceof ShadowRoot)}var er={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},a=e.attributes[t]||{},i=e.elements[t];ea(i)&&et(i)&&(Object.assign(i.style,n),Object.keys(a).forEach(function(t){var e=a[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)}))})},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(t){var a=e.elements[t],i=e.attributes[t]||{},r=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce(function(t,e){return t[e]="",t},{});ea(a)&&et(a)&&(Object.assign(a.style,r),Object.keys(i).forEach(function(t){a.removeAttribute(t)}))})}},requires:["computeStyles"]};function eo(t){return t.split("-")[0]}var es=Math.max,el=Math.min,ec=Math.round;function eu(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ed(){return!/^((?!chrome|android).)*safari/i.test(eu())}function eh(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var a=t.getBoundingClientRect(),i=1,r=1;e&&ea(t)&&(i=t.offsetWidth>0&&ec(a.width)/t.offsetWidth||1,r=t.offsetHeight>0&&ec(a.height)/t.offsetHeight||1);var o=(en(t)?ee(t):window).visualViewport,s=!ed()&&n,l=(a.left+(s&&o?o.offsetLeft:0))/i,c=(a.top+(s&&o?o.offsetTop:0))/r,u=a.width/i,d=a.height/r;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function ef(t){var e=eh(t),n=t.offsetWidth,a=t.offsetHeight;return 1>=Math.abs(e.width-n)&&(n=e.width),1>=Math.abs(e.height-a)&&(a=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:a}}function ep(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ei(n)){var a=e;do{if(a&&t.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function ev(t){return ee(t).getComputedStyle(t)}function em(t){return((en(t)?t.ownerDocument:t.document)||window.document).documentElement}function eg(t){return"html"===et(t)?t:t.assignedSlot||t.parentNode||(ei(t)?t.host:null)||em(t)}function ey(t){return ea(t)&&"fixed"!==ev(t).position?t.offsetParent:null}function eb(t){for(var e=ee(t),n=ey(t);n&&["table","td","th"].indexOf(et(n))>=0&&"static"===ev(n).position;)n=ey(n);return n&&("html"===et(n)||"body"===et(n)&&"static"===ev(n).position)?e:n||function(t){var e=/firefox/i.test(eu());if(/Trident/i.test(eu())&&ea(t)&&"fixed"===ev(t).position)return null;var n=eg(t);for(ei(n)&&(n=n.host);ea(n)&&0>["html","body"].indexOf(et(n));){var a=ev(n);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||e&&"filter"===a.willChange||e&&a.filter&&"none"!==a.filter)return n;n=n.parentNode}return null}(t)||e}function ew(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function e_(t,e,n){return es(t,el(e,n))}function eE(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function ek(t,e){return e.reduce(function(e,n){return e[n]=t,e},{})}var eT={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,a=t.name,i=t.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,s=eo(n.placement),l=ew(s),c=[tz,tj].indexOf(s)>=0?"height":"width";if(r&&o){var u,d=eE("number"!=typeof(u="function"==typeof(u=i.padding)?u(Object.assign({},n.rects,{placement:n.placement})):u)?u:ek(u,tX)),h=ef(r),f="y"===l?"top":tz,p="y"===l?tU:tj,v=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],m=o[l]-n.rects.reference[l],g=eb(r),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,b=d[f],w=y-h[c]-d[p],_=y/2-h[c]/2+(v/2-m/2),E=e_(b,_,w);n.modifiersData[a]=((e={})[l]=E,e.centerOffset=E-_,e)}},effect:function(t){var e=t.state,n=t.options.element,a=void 0===n?"[data-popper-arrow]":n;null!=a&&("string"!=typeof a||(a=e.elements.popper.querySelector(a)))&&ep(e.elements.popper,a)&&(e.elements.arrow=a)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ex(t){return t.split("-")[1]}var eO={top:"auto",right:"auto",bottom:"auto",left:"auto"};function eP(t){var e,n=t.popper,a=t.popperRect,i=t.placement,r=t.variation,o=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=o.x,f=void 0===h?0:h,p=o.y,v=void 0===p?0:p,m="function"==typeof u?u({x:f,y:v}):{x:f,y:v};f=m.x,v=m.y;var g=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),b=tz,w="top",_=window;if(c){var E=eb(n),k="clientHeight",T="clientWidth";E===ee(n)&&"static"!==ev(E=em(n)).position&&"absolute"===s&&(k="scrollHeight",T="scrollWidth"),("top"===i||(i===tz||i===tj)&&"end"===r)&&(w=tU,v-=(d&&E===_&&_.visualViewport?_.visualViewport.height:E[k])-a.height,v*=l?1:-1),i!==tz&&("top"!==i&&i!==tU||"end"!==r)||(b=tj,f-=(d&&E===_&&_.visualViewport?_.visualViewport.width:E[T])-a.width,f*=l?1:-1)}var x,O,P,S,L,A,C=Object.assign({position:s},c&&eO),M=!0===u?(x={x:f,y:v},O=ee(n),P=x.x,S=x.y,{x:ec(P*(L=O.devicePixelRatio||1))/L||0,y:ec(S*L)/L||0}):{x:f,y:v};return f=M.x,v=M.y,l?Object.assign({},C,((A={})[w]=y?"0":"",A[b]=g?"0":"",A.transform=1>=(_.devicePixelRatio||1)?"translate("+f+"px, "+v+"px)":"translate3d("+f+"px, "+v+"px, 0)",A)):Object.assign({},C,((e={})[w]=y?v+"px":"",e[b]=g?f+"px":"",e.transform="",e))}var eS={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,a=n.gpuAcceleration,i=n.adaptive,r=n.roundOffsets,o=void 0===r||r,s={placement:eo(e.placement),variation:ex(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:void 0===a||a,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,eP(Object.assign({},s,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:void 0===i||i,roundOffsets:o})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,eP(Object.assign({},s,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},eL={passive:!0},eA={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,a=t.options,i=a.scroll,r=void 0===i||i,o=a.resize,s=void 0===o||o,l=ee(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(t){t.addEventListener("scroll",n.update,eL)}),s&&l.addEventListener("resize",n.update,eL),function(){r&&c.forEach(function(t){t.removeEventListener("scroll",n.update,eL)}),s&&l.removeEventListener("resize",n.update,eL)}},data:{}},eC={left:"right",right:"left",bottom:"top",top:"bottom"};function eM(t){return t.replace(/left|right|bottom|top/g,function(t){return eC[t]})}var eR={start:"end",end:"start"};function eB(t){return t.replace(/start|end/g,function(t){return eR[t]})}function eI(t){var e=ee(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function eF(t){return eh(em(t)).left+eI(t).scrollLeft}function eD(t){var e=ev(t),n=e.overflow,a=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+a)}function eN(t,e){void 0===e&&(e=[]);var n,a=function t(e){return["html","body","#document"].indexOf(et(e))>=0?e.ownerDocument.body:ea(e)&&eD(e)?e:t(eg(e))}(t),i=a===(null==(n=t.ownerDocument)?void 0:n.body),r=ee(a),o=i?[r].concat(r.visualViewport||[],eD(a)?a:[]):a,s=e.concat(o);return i?s:s.concat(eN(eg(o)))}function eH(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function eW(t,e,n){var a,i,r,o,s,l,c,u,d,h;return e===tK?eH(function(t,e){var n=ee(t),a=em(t),i=n.visualViewport,r=a.clientWidth,o=a.clientHeight,s=0,l=0;if(i){r=i.width,o=i.height;var c=ed();(c||!c&&"fixed"===e)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:r,height:o,x:s+eF(t),y:l}}(t,n)):en(e)?((a=eh(e,!1,"fixed"===n)).top=a.top+e.clientTop,a.left=a.left+e.clientLeft,a.bottom=a.top+e.clientHeight,a.right=a.left+e.clientWidth,a.width=e.clientWidth,a.height=e.clientHeight,a.x=a.left,a.y=a.top,a):eH((i=em(t),o=em(i),s=eI(i),l=null==(r=i.ownerDocument)?void 0:r.body,c=es(o.scrollWidth,o.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),u=es(o.scrollHeight,o.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),d=-s.scrollLeft+eF(i),h=-s.scrollTop,"rtl"===ev(l||o).direction&&(d+=es(o.clientWidth,l?l.clientWidth:0)-c),{width:c,height:u,x:d,y:h}))}function eY(t){var e,n=t.reference,a=t.element,i=t.placement,r=i?eo(i):null,o=i?ex(i):null,s=n.x+n.width/2-a.width/2,l=n.y+n.height/2-a.height/2;switch(r){case"top":e={x:s,y:n.y-a.height};break;case tU:e={x:s,y:n.y+n.height};break;case tj:e={x:n.x+n.width,y:l};break;case tz:e={x:n.x-a.width,y:l};break;default:e={x:n.x,y:n.y}}var c=r?ew(r):null;if(null!=c){var u="y"===c?"height":"width";switch(o){case tG:e[c]=e[c]-(n[u]/2-a[u]/2);break;case"end":e[c]=e[c]+(n[u]/2-a[u]/2)}}return e}function eU(t,e){void 0===e&&(e={});var n,a,i,r,o,s,l=e,c=l.placement,u=void 0===c?t.placement:c,d=l.strategy,h=void 0===d?t.strategy:d,f=l.boundary,p=void 0===f?tV:f,v=l.rootBoundary,m=l.elementContext,g=void 0===m?tZ:m,y=l.altBoundary,b=l.padding,w=void 0===b?0:b,_=eE("number"!=typeof w?w:ek(w,tX)),E=g===tZ?t$:tZ,k=t.rects.popper,T=t.elements[void 0!==y&&y?E:g],x=(n=en(T)?T:T.contextElement||em(t.elements.popper),o=(r=[].concat("clippingParents"===p?(a=eN(eg(n)),en(i=["absolute","fixed"].indexOf(ev(n).position)>=0&&ea(n)?eb(n):n)?a.filter(function(t){return en(t)&&ep(t,i)&&"body"!==et(t)}):[]):[].concat(p),[void 0===v?tK:v]))[0],(s=r.reduce(function(t,e){var a=eW(n,e,h);return t.top=es(a.top,t.top),t.right=el(a.right,t.right),t.bottom=el(a.bottom,t.bottom),t.left=es(a.left,t.left),t},eW(n,o,h))).width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s),O=eh(t.elements.reference),P=eY({reference:O,element:k,strategy:"absolute",placement:u}),S=eH(Object.assign({},k,P)),L=g===tZ?S:O,A={top:x.top-L.top+_.top,bottom:L.bottom-x.bottom+_.bottom,left:x.left-L.left+_.left,right:L.right-x.right+_.right},C=t.modifiersData.offset;if(g===tZ&&C){var M=C[u];Object.keys(A).forEach(function(t){var e=[tj,tU].indexOf(t)>=0?1:-1,n=["top",tU].indexOf(t)>=0?"y":"x";A[t]+=M[n]*e})}return A}var ej={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,a=t.name;if(!e.modifiersData[a]._skip){for(var i=n.mainAxis,r=void 0===i||i,o=n.altAxis,s=void 0===o||o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=void 0===f||f,v=n.allowedAutoPlacements,m=e.options.placement,g=eo(m),y=l||(g!==m&&p?function(t){if(eo(t)===tq)return[];var e=eM(t);return[eB(t),e,eB(e)]}(m):[eM(m)]),b=[m].concat(y).reduce(function(t,n){var a,i,r,o,s,l,h,f,m,g,y,b;return t.concat(eo(n)===tq?(i=(a={placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:v}).placement,r=a.boundary,o=a.rootBoundary,s=a.padding,l=a.flipVariations,f=void 0===(h=a.allowedAutoPlacements)?tJ:h,0===(y=(g=(m=ex(i))?l?tQ:tQ.filter(function(t){return ex(t)===m}):tX).filter(function(t){return f.indexOf(t)>=0})).length&&(y=g),Object.keys(b=y.reduce(function(t,n){return t[n]=eU(e,{placement:n,boundary:r,rootBoundary:o,padding:s})[eo(n)],t},{})).sort(function(t,e){return b[t]-b[e]})):n)},[]),w=e.rects.reference,_=e.rects.popper,E=new Map,k=!0,T=b[0],x=0;x<b.length;x++){var O=b[x],P=eo(O),S=ex(O)===tG,L=["top",tU].indexOf(P)>=0,A=L?"width":"height",C=eU(e,{placement:O,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),M=L?S?tj:tz:S?tU:"top";w[A]>_[A]&&(M=eM(M));var R=eM(M),B=[];if(r&&B.push(C[P]<=0),s&&B.push(C[M]<=0,C[R]<=0),B.every(function(t){return t})){T=O,k=!1;break}E.set(O,B)}if(k)for(var I=function(t){var e=b.find(function(e){var n=E.get(e);if(n)return n.slice(0,t).every(function(t){return t})});if(e)return T=e,"break"},F=p?3:1;F>0&&"break"!==I(F);F--);e.placement!==T&&(e.modifiersData[a]._skip=!0,e.placement=T,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ez(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function eq(t){return["top",tj,tU,tz].some(function(e){return t[e]>=0})}var eX={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,a=e.rects.reference,i=e.rects.popper,r=e.modifiersData.preventOverflow,o=eU(e,{elementContext:"reference"}),s=eU(e,{altBoundary:!0}),l=ez(o,a),c=ez(s,i,r),u=eq(l),d=eq(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}},eG={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,a=t.name,i=n.offset,r=void 0===i?[0,0]:i,o=tJ.reduce(function(t,n){var a,i,o,s,l,c;return t[n]=(a=e.rects,o=[tz,"top"].indexOf(i=eo(n))>=0?-1:1,l=(s="function"==typeof r?r(Object.assign({},a,{placement:n})):r)[0],c=s[1],l=l||0,c=(c||0)*o,[tz,tj].indexOf(i)>=0?{x:c,y:l}:{x:l,y:c}),t},{}),s=o[e.placement],l=s.x,c=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[a]=o}},eV={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=eY({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},eK={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,a=t.name,i=n.mainAxis,r=n.altAxis,o=n.boundary,s=n.rootBoundary,l=n.altBoundary,c=n.padding,u=n.tether,d=void 0===u||u,h=n.tetherOffset,f=void 0===h?0:h,p=eU(e,{boundary:o,rootBoundary:s,padding:c,altBoundary:l}),v=eo(e.placement),m=ex(e.placement),g=!m,y=ew(v),b="x"===y?"y":"x",w=e.modifiersData.popperOffsets,_=e.rects.reference,E=e.rects.popper,k="function"==typeof f?f(Object.assign({},e.rects,{placement:e.placement})):f,T="number"==typeof k?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),x=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,O={x:0,y:0};if(w){if(void 0===i||i){var P,S="y"===y?"top":tz,L="y"===y?tU:tj,A="y"===y?"height":"width",C=w[y],M=C+p[S],R=C-p[L],B=d?-E[A]/2:0,I=m===tG?_[A]:E[A],F=m===tG?-E[A]:-_[A],D=e.elements.arrow,N=d&&D?ef(D):{width:0,height:0},H=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},W=H[S],Y=H[L],U=e_(0,_[A],N[A]),j=g?_[A]/2-B-U-W-T.mainAxis:I-U-W-T.mainAxis,z=g?-_[A]/2+B+U+Y+T.mainAxis:F+U+Y+T.mainAxis,q=e.elements.arrow&&eb(e.elements.arrow),X=q?"y"===y?q.clientTop||0:q.clientLeft||0:0,G=null!=(P=null==x?void 0:x[y])?P:0,V=e_(d?el(M,C+j-G-X):M,C,d?es(R,C+z-G):R);w[y]=V,O[y]=V-C}if(void 0!==r&&r){var K,Z,$="x"===y?"top":tz,Q="x"===y?tU:tj,J=w[b],tt="y"===b?"height":"width",te=J+p[$],tn=J-p[Q],ta=-1!==["top",tz].indexOf(v),ti=null!=(Z=null==x?void 0:x[b])?Z:0,tr=ta?te:J-_[tt]-E[tt]-ti+T.altAxis,to=ta?J+_[tt]+E[tt]-ti-T.altAxis:tn,ts=d&&ta?(K=e_(tr,J,to))>to?to:K:e_(d?tr:te,J,d?to:tn);w[b]=ts,O[b]=ts-J}e.modifiersData[a]=O}},requiresIfExists:["offset"]},eZ={placement:"bottom",modifiers:[],strategy:"absolute"};function e$(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(t){return!(t&&"function"==typeof t.getBoundingClientRect)})}function eQ(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,a=void 0===n?[]:n,i=e.defaultOptions,r=void 0===i?eZ:i;return function(t,e,n){void 0===n&&(n=r);var i,o,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},eZ,r),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,u={state:s,setOptions:function(n){var i="function"==typeof n?n(s.options):n;d(),s.options=Object.assign({},r,s.options,i),s.scrollParents={reference:en(t)?eN(t):t.contextElement?eN(t.contextElement):[],popper:eN(e)};var o,c,h,f,p,v=(o=Object.keys(p=[].concat(a,s.options.modifiers).reduce(function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t},{})).map(function(t){return p[t]}),c=new Map,h=new Set,f=[],o.forEach(function(t){c.set(t.name,t)}),o.forEach(function(t){h.has(t.name)||function t(e){h.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!h.has(e)){var n=c.get(e);n&&t(n)}}),f.push(e)}(t)}),t9.reduce(function(t,e){return t.concat(f.filter(function(t){return t.phase===e}))},[]));return s.orderedModifiers=v.filter(function(t){return t.enabled}),s.orderedModifiers.forEach(function(t){var e=t.name,n=t.options,a=t.effect;if("function"==typeof a){var i=a({state:s,name:e,instance:u,options:void 0===n?{}:n});l.push(i||function(){})}}),u.update()},forceUpdate:function(){if(!c){var t=s.elements,e=t.reference,n=t.popper;if(e$(e,n)){s.rects={reference:(a=eb(n),i="fixed"===s.options.strategy,d=ea(a),h=ea(a)&&(o=ec((r=a.getBoundingClientRect()).width)/a.offsetWidth||1,l=ec(r.height)/a.offsetHeight||1,1!==o||1!==l),f=em(a),p=eh(e,h,i),v={scrollLeft:0,scrollTop:0},m={x:0,y:0},(d||!d&&!i)&&(("body"!==et(a)||eD(f))&&(v=a!==ee(a)&&ea(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:eI(a)),ea(a)?((m=eh(a,!0)).x+=a.clientLeft,m.y+=a.clientTop):f&&(m.x=eF(f))),{x:p.left+v.scrollLeft-m.x,y:p.top+v.scrollTop-m.y,width:p.width,height:p.height}),popper:ef(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach(function(t){return s.modifiersData[t.name]=Object.assign({},t.data)});for(var a,i,r,o,l,d,h,f,p,v,m,g=0;g<s.orderedModifiers.length;g++)if(!0!==s.reset){var y=s.orderedModifiers[g],b=y.fn,w=y.options,_=void 0===w?{}:w,E=y.name;"function"==typeof b&&(s=b({state:s,options:_,name:E,instance:u})||s)}else s.reset=!1,g=-1}}},update:(i=function(){return new Promise(function(t){u.forceUpdate(),t(s)})},function(){return o||(o=new Promise(function(t){Promise.resolve().then(function(){o=void 0,t(i())})})),o}),destroy:function(){d(),c=!0}};if(!e$(t,e))return u;function d(){l.forEach(function(t){return t()}),l=[]}return u.setOptions(n).then(function(t){!c&&n.onFirstUpdate&&n.onFirstUpdate(t)}),u}}var eJ=eQ(),e0=eQ({defaultModifiers:[eA,eV,eS,er]}),e5=eQ({defaultModifiers:[eA,eV,eS,er,eG,ej,eK,eT,eX]}),e2=Object.freeze(Object.defineProperty({__proto__:null,afterMain:t4,afterRead:t2,afterWrite:t7,applyStyles:er,arrow:eT,auto:tq,basePlacements:tX,beforeMain:t1,beforeRead:t0,beforeWrite:t6,bottom:tU,clippingParents:tV,computeStyles:eS,createPopper:e5,createPopperBase:eJ,createPopperLite:e0,detectOverflow:eU,end:"end",eventListeners:eA,flip:ej,hide:eX,left:tz,main:t3,modifierPhases:t9,offset:eG,placements:tJ,popper:tZ,popperGenerator:eQ,popperOffsets:eV,preventOverflow:eK,read:t5,reference:t$,right:tj,start:tG,top:"top",variationPlacements:tQ,viewport:tK,write:t8},Symbol.toStringTag,{value:"Module"})),e1="dropdown",e3=".bs.dropdown",e4=".data-api",e6="ArrowDown",e8="hide".concat(e3),e7="hidden".concat(e3),e9="show".concat(e3),nt="shown".concat(e3),ne="click".concat(e3).concat(e4),nn="keydown".concat(e3).concat(e4),na="keyup".concat(e3).concat(e4),ni="show",nr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',no="".concat(nr,".").concat(ni),ns=".dropdown-menu",nl=m()?"top-end":"top-start",nc=m()?"top-start":"top-end",nu=m()?"bottom-end":"bottom-start",nd=m()?"bottom-start":"bottom-end",nh=m()?"left-start":"right-start",nf=m()?"right-start":"left-start",np={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},nv={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},nm=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;return lR(this,n),(i=e.call(this,t,a))._popper=null,i._parent=i._element.parentNode,i._menu=j.next(i._element,ns)[0]||j.prev(i._element,ns)[0]||j.findOne(ns,i._parent),i._inNavbar=i._detectNavbar(),lj(i)}return lI(n,[{key:"toggle",value:function(){return this._isShown()?this.hide():this.show()}},{key:"show",value:function(){if(!(u(this._element)||this._isShown())){var t={relatedTarget:this._element};if(!I.trigger(this._element,e9,t).defaultPrevented){var e=!0,n=!1,a=void 0;if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))try{for(var i,r,o=(i=[]).concat.apply(i,lG(document.body.children))[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;I.on(s,"mouseover",h)}}catch(t){n=!0,a=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw a}}this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ni),this._element.classList.add(ni),I.trigger(this._element,nt,t)}}}},{key:"hide",value:function(){if(!u(this._element)&&this._isShown()){var t={relatedTarget:this._element};this._completeHide(t)}}},{key:"dispose",value:function(){this._popper&&this._popper.destroy(),lD(lF(n.prototype),"dispose",this).call(this)}},{key:"update",value:function(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}},{key:"_completeHide",value:function(t){if(!I.trigger(this._element,e8,t).defaultPrevented){var e=!0,n=!1,a=void 0;if("ontouchstart"in document.documentElement)try{for(var i,r,o=(i=[]).concat.apply(i,lG(document.body.children))[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;I.off(s,"mouseover",h)}}catch(t){n=!0,a=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw a}}this._popper&&this._popper.destroy(),this._menu.classList.remove(ni),this._element.classList.remove(ni),this._element.setAttribute("aria-expanded","false"),H.removeDataAttribute(this._menu,"popper"),I.trigger(this._element,e7,t)}}},{key:"_getConfig",value:function(t){if("object"==typeof(t=lD(lF(n.prototype),"_getConfig",this).call(this,t)).reference&&!s(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw TypeError("".concat(e1.toUpperCase(),': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'));return t}},{key:"_createPopper",value:function(){if(void 0===e2)throw TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var t=this._element;"parent"===this._config.reference?t=this._parent:s(this._config.reference)?t=l(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);var e=this._getPopperConfig();this._popper=e5(t,this._menu,e)}},{key:"_isShown",value:function(){return this._menu.classList.contains(ni)}},{key:"_getPlacement",value:function(){var t=this._parent;if(t.classList.contains("dropend"))return nh;if(t.classList.contains("dropstart"))return nf;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";var e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?nc:nl:e?nd:nu}},{key:"_detectNavbar",value:function(){return null!==this._element.closest(".navbar")}},{key:"_getOffset",value:function(){var t=this,e=this._config.offset;return"string"==typeof e?e.split(",").map(function(t){return Number.parseInt(t,10)}):"function"==typeof e?function(n){return e(n,t._element)}:e}},{key:"_getPopperConfig",value:function(){var t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(H.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),lY({},t,y(this._config.popperConfig,[t]))}},{key:"_selectMenuItem",value:function(t){var e=t.key,n=t.target,a=j.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(function(t){return c(t)});a.length&&w(a,n,e===e6,!a.includes(n)).focus()}}],[{key:"Default",get:function(){return np}},{key:"DefaultType",get:function(){return nv}},{key:"NAME",get:function(){return e1}},{key:"jQueryInterface",value:function(t){return this.each(function(){var e=n.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw TypeError('No method named "'.concat(t,'"'));e[t]()}})}},{key:"clearMenus",value:function(t){if(2!==t.button&&("keyup"!==t.type||"Tab"===t.key)){var e=j.find(no),a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value,c=n.getInstance(l);if(c&&!1!==c._config.autoClose){var u=t.composedPath(),d=u.includes(c._menu);if(!u.includes(c._element)&&("inside"!==c._config.autoClose||d)&&("outside"!==c._config.autoClose||!d)&&!(c._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))){var h={relatedTarget:c._element};"click"===t.type&&(h.clickEvent=t),c._completeHide(h)}}}}catch(t){i=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}}}},{key:"dataApiKeydownHandler",value:function(t){var e=/input|textarea/i.test(t.target.tagName),a="Escape"===t.key,i=["ArrowUp",e6].includes(t.key);if((i||a)&&(!e||a)){t.preventDefault();var r=this.matches(nr)?this:j.prev(this,nr)[0]||j.next(this,nr)[0]||j.findOne(nr,t.delegateTarget.parentNode),o=n.getOrCreateInstance(r);if(i)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}}]),n}(Y);I.on(document,nn,nr,nm.dataApiKeydownHandler),I.on(document,nn,ns,nm.dataApiKeydownHandler),I.on(document,ne,nm.clearMenus),I.on(document,na,nm.clearMenus),I.on(document,ne,nr,function(t){t.preventDefault(),nm.getOrCreateInstance(this).toggle()}),g(nm);var ng="backdrop",ny="show",nb="mousedown.bs.".concat(ng),nw={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},n_={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},nE=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t){var a;return lR(this,n),(a=e.call(this))._config=a._getConfig(t),a._isAppended=!1,a._element=null,lj(a)}return lI(n,[{key:"show",value:function(t){if(!this._config.isVisible)return void y(t);this._append();var e=this._getElement();this._config.isAnimated&&f(e),e.classList.add(ny),this._emulateAnimation(function(){y(t)})}},{key:"hide",value:function(t){var e=this;this._config.isVisible?(this._getElement().classList.remove(ny),this._emulateAnimation(function(){e.dispose(),y(t)})):y(t)}},{key:"dispose",value:function(){this._isAppended&&(I.off(this._element,nb),this._element.remove(),this._isAppended=!1)}},{key:"_getElement",value:function(){if(!this._element){var t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}},{key:"_configAfterMerge",value:function(t){return t.rootElement=l(t.rootElement),t}},{key:"_append",value:function(){var t=this;if(!this._isAppended){var e=this._getElement();this._config.rootElement.append(e),I.on(e,nb,function(){y(t._config.clickCallback)}),this._isAppended=!0}}},{key:"_emulateAnimation",value:function(t){b(t,this._getElement(),this._config.isAnimated)}}],[{key:"Default",get:function(){return nw}},{key:"DefaultType",get:function(){return n_}},{key:"NAME",get:function(){return ng}}]),n}(W),nk=".bs.focustrap",nT="focusin".concat(nk),nx="keydown.tab".concat(nk),nO="backward",nP={autofocus:!0,trapElement:null},nS={autofocus:"boolean",trapElement:"element"},nL=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t){var a;return lR(this,n),(a=e.call(this))._config=a._getConfig(t),a._isActive=!1,a._lastTabNavDirection=null,lj(a)}return lI(n,[{key:"activate",value:function(){var t=this;this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),I.off(document,nk),I.on(document,nT,function(e){return t._handleFocusin(e)}),I.on(document,nx,function(e){return t._handleKeydown(e)}),this._isActive=!0)}},{key:"deactivate",value:function(){this._isActive&&(this._isActive=!1,I.off(document,nk))}},{key:"_handleFocusin",value:function(t){var e=this._config.trapElement;if(!(t.target===document||t.target===e||e.contains(t.target))){var n=j.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===nO?n[n.length-1].focus():n[0].focus()}}},{key:"_handleKeydown",value:function(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?nO:"forward")}}],[{key:"Default",get:function(){return nP}},{key:"DefaultType",get:function(){return nS}},{key:"NAME",get:function(){return"focustrap"}}]),n}(W),nA=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",nC=".sticky-top",nM="padding-right",nR="margin-right",nB=/*#__PURE__*/function(){function t(){lR(this,t),this._element=document.body}return lI(t,[{key:"getWidth",value:function(){var t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}},{key:"hide",value:function(){var t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,nM,function(e){return e+t}),this._setElementAttributes(nA,nM,function(e){return e+t}),this._setElementAttributes(nC,nR,function(e){return e-t})}},{key:"reset",value:function(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,nM),this._resetElementAttributes(nA,nM),this._resetElementAttributes(nC,nR)}},{key:"isOverflowing",value:function(){return this.getWidth()>0}},{key:"_disableOverFlow",value:function(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}},{key:"_setElementAttributes",value:function(t,e,n){var a=this,i=this.getWidth();this._applyManipulationCallback(t,function(t){if(t===a._element||!(window.innerWidth>t.clientWidth+i)){a._saveInitialAttribute(t,e);var r=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,"".concat(n(Number.parseFloat(r)),"px"))}})}},{key:"_saveInitialAttribute",value:function(t,e){var n=t.style.getPropertyValue(e);n&&H.setDataAttribute(t,e,n)}},{key:"_resetElementAttributes",value:function(t,e){this._applyManipulationCallback(t,function(t){var n=H.getDataAttribute(t,e);null!==n?(H.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)})}},{key:"_applyManipulationCallback",value:function(t,e){var n=!0,a=!1,i=void 0;if(s(t))e(t);else try{for(var r,o=j.find(t,this._element)[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var l=r.value;e(l)}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}}]),t}(),nI=".bs.modal",nF="hide".concat(nI),nD="hidePrevented".concat(nI),nN="hidden".concat(nI),nH="show".concat(nI),nW="shown".concat(nI),nY="resize".concat(nI),nU="click.dismiss".concat(nI),nj="mousedown.dismiss".concat(nI),nz="keydown.dismiss".concat(nI),nq="click".concat(nI,".data-api"),nX="modal-open",nG="show",nV="modal-static",nK={backdrop:!0,focus:!0,keyboard:!0},nZ={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},n$=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;return lR(this,n),(i=e.call(this,t,a))._dialog=j.findOne(".modal-dialog",i._element),i._backdrop=i._initializeBackDrop(),i._focustrap=i._initializeFocusTrap(),i._isShown=!1,i._isTransitioning=!1,i._scrollBar=new nB,i._addEventListeners(),lj(i)}return lI(n,[{key:"toggle",value:function(t){return this._isShown?this.hide():this.show(t)}},{key:"show",value:function(t){var e=this;this._isShown||this._isTransitioning||I.trigger(this._element,nH,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(nX),this._adjustDialog(),this._backdrop.show(function(){return e._showElement(t)}))}},{key:"hide",value:function(){var t=this;this._isShown&&!this._isTransitioning&&(I.trigger(this._element,nF).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(nG),this._queueCallback(function(){return t._hideModal()},this._element,this._isAnimated())))}},{key:"dispose",value:function(){I.off(window,nI),I.off(this._dialog,nI),this._backdrop.dispose(),this._focustrap.deactivate(),lD(lF(n.prototype),"dispose",this).call(this)}},{key:"handleUpdate",value:function(){this._adjustDialog()}},{key:"_initializeBackDrop",value:function(){return new nE({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}},{key:"_initializeFocusTrap",value:function(){return new nL({trapElement:this._element})}},{key:"_showElement",value:function(t){var e=this;document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;var n=j.findOne(".modal-body",this._dialog);n&&(n.scrollTop=0),f(this._element),this._element.classList.add(nG),this._queueCallback(function(){e._config.focus&&e._focustrap.activate(),e._isTransitioning=!1,I.trigger(e._element,nW,{relatedTarget:t})},this._dialog,this._isAnimated())}},{key:"_addEventListeners",value:function(){var t=this;I.on(this._element,nz,function(e){"Escape"===e.key&&(t._config.keyboard?t.hide():t._triggerBackdropTransition())}),I.on(window,nY,function(){t._isShown&&!t._isTransitioning&&t._adjustDialog()}),I.on(this._element,nj,function(e){I.one(t._element,nU,function(n){t._element===e.target&&t._element===n.target&&("static"!==t._config.backdrop?t._config.backdrop&&t.hide():t._triggerBackdropTransition())})})}},{key:"_hideModal",value:function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(function(){document.body.classList.remove(nX),t._resetAdjustments(),t._scrollBar.reset(),I.trigger(t._element,nN)})}},{key:"_isAnimated",value:function(){return this._element.classList.contains("fade")}},{key:"_triggerBackdropTransition",value:function(){var t=this;if(!I.trigger(this._element,nD).defaultPrevented){var e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;"hidden"===n||this._element.classList.contains(nV)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(nV),this._queueCallback(function(){t._element.classList.remove(nV),t._queueCallback(function(){t._element.style.overflowY=n},t._dialog)},this._dialog),this._element.focus())}}},{key:"_adjustDialog",value:function(){var t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){var a=m()?"paddingLeft":"paddingRight";this._element.style[a]="".concat(e,"px")}if(!n&&t){var i=m()?"paddingRight":"paddingLeft";this._element.style[i]="".concat(e,"px")}}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}}],[{key:"Default",get:function(){return nK}},{key:"DefaultType",get:function(){return nZ}},{key:"NAME",get:function(){return"modal"}},{key:"jQueryInterface",value:function(t,e){return this.each(function(){var a=n.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===a[t])throw TypeError('No method named "'.concat(t,'"'));a[t](e)}})}}]),n}(Y);I.on(document,nq,'[data-bs-toggle="modal"]',function(t){var e=this,n=j.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),I.one(n,nH,function(t){t.defaultPrevented||I.one(n,nN,function(){c(e)&&e.focus()})});var a=j.findOne(".modal.show");a&&n$.getInstance(a).hide(),n$.getOrCreateInstance(n).toggle(this)}),z(n$),g(n$);var nQ=".bs.offcanvas",nJ=".data-api",n0="load".concat(nQ).concat(nJ),n5="show",n2="showing",n1="hiding",n3=".offcanvas.show",n4="show".concat(nQ),n6="shown".concat(nQ),n8="hide".concat(nQ),n7="hidePrevented".concat(nQ),n9="hidden".concat(nQ),at="click".concat(nQ).concat(nJ),ae="keydown.dismiss".concat(nQ),an={backdrop:!0,keyboard:!0,scroll:!1},aa={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},ai=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;return lR(this,n),(i=e.call(this,t,a))._isShown=!1,i._backdrop=i._initializeBackDrop(),i._focustrap=i._initializeFocusTrap(),i._addEventListeners(),lj(i)}return lI(n,[{key:"toggle",value:function(t){return this._isShown?this.hide():this.show(t)}},{key:"show",value:function(t){var e=this;this._isShown||I.trigger(this._element,n4,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new nB).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(n2),this._queueCallback(function(){e._config.scroll&&!e._config.backdrop||e._focustrap.activate(),e._element.classList.add(n5),e._element.classList.remove(n2),I.trigger(e._element,n6,{relatedTarget:t})},this._element,!0))}},{key:"hide",value:function(){var t=this;this._isShown&&(I.trigger(this._element,n8).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(n1),this._backdrop.hide(),this._queueCallback(function(){t._element.classList.remove(n5,n1),t._element.removeAttribute("aria-modal"),t._element.removeAttribute("role"),t._config.scroll||(new nB).reset(),I.trigger(t._element,n9)},this._element,!0)))}},{key:"dispose",value:function(){this._backdrop.dispose(),this._focustrap.deactivate(),lD(lF(n.prototype),"dispose",this).call(this)}},{key:"_initializeBackDrop",value:function(){var t=this,e=!!this._config.backdrop;return new nE({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?function(){"static"!==t._config.backdrop?t.hide():I.trigger(t._element,n7)}:null})}},{key:"_initializeFocusTrap",value:function(){return new nL({trapElement:this._element})}},{key:"_addEventListeners",value:function(){var t=this;I.on(this._element,ae,function(e){"Escape"===e.key&&(t._config.keyboard?t.hide():I.trigger(t._element,n7))})}}],[{key:"Default",get:function(){return an}},{key:"DefaultType",get:function(){return aa}},{key:"NAME",get:function(){return"offcanvas"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var e=n.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));e[t](this)}})}}]),n}(Y);I.on(document,at,'[data-bs-toggle="offcanvas"]',function(t){var e=this,n=j.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),!u(this)){I.one(n,n9,function(){c(e)&&e.focus()});var a=j.findOne(n3);a&&a!==n&&ai.getInstance(a).hide(),ai.getOrCreateInstance(n).toggle(this)}}),I.on(window,n0,function(){var t=!0,e=!1,n=void 0;try{for(var a,i=j.find(n3)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var r=a.value;ai.getOrCreateInstance(r).show()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}),I.on(window,"resize".concat(nQ),function(){var t=!0,e=!1,n=void 0;try{for(var a,i=j.find("[aria-modal][class*=show][class*=offcanvas-]")[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var r=a.value;"fixed"!==getComputedStyle(r).position&&ai.getOrCreateInstance(r).hide()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}),z(ai),g(ai);var ar={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ao=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),as=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,al=function(t,e){var n=t.nodeName.toLowerCase();return e.includes(n)?!ao.has(n)||!!as.test(t.nodeValue):e.filter(function(t){return t instanceof RegExp}).some(function(t){return t.test(n)})},ac={allowList:ar,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},au={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ad={entry:"(string|element|function|null)",selector:"(string|element)"},ah=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t){var a;return lR(this,n),(a=e.call(this))._config=a._getConfig(t),lj(a)}return lI(n,[{key:"getContent",value:function(){var t=this;return Object.values(this._config.content).map(function(e){return t._resolvePossibleFunction(e)}).filter(Boolean)}},{key:"hasContent",value:function(){return this.getContent().length>0}},{key:"changeContent",value:function(t){return this._checkContent(t),this._config.content=lY({},this._config.content,t),this}},{key:"toHtml",value:function(){var t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);var e=!0,n=!1,a=void 0;try{for(var i,r,o=Object.entries(this._config.content)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=lX(r.value,2),l=s[0],c=s[1];this._setContent(t,c,l)}}catch(t){n=!0,a=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw a}}var u=t.children[0],d=this._resolvePossibleFunction(this._config.extraClass);return d&&(i=u.classList).add.apply(i,lG(d.split(" "))),u}},{key:"_typeCheckConfig",value:function(t){lD(lF(n.prototype),"_typeCheckConfig",this).call(this,t),this._checkContent(t.content)}},{key:"_checkContent",value:function(t){var e=!0,a=!1,i=void 0;try{for(var r,o=Object.entries(t)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=lX(r.value,2),l=s[0],c=s[1];lD(lF(n.prototype),"_typeCheckConfig",this).call(this,{selector:l,entry:c},ad)}}catch(t){a=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(a)throw i}}}},{key:"_setContent",value:function(t,e,n){var a=j.findOne(n,t);a&&((e=this._resolvePossibleFunction(e))?s(e)?this._putElementInTemplate(l(e),a):this._config.html?a.innerHTML=this._maybeSanitize(e):a.textContent=e:a.remove())}},{key:"_maybeSanitize",value:function(t){return this._config.sanitize?function(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);var a=(new window.DOMParser).parseFromString(t,"text/html"),i=(l=[]).concat.apply(l,lG(a.body.querySelectorAll("*"))),r=!0,o=!1,s=void 0;try{for(var l,c,u=i[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value,h=d.nodeName.toLowerCase();if(!Object.keys(e).includes(h)){d.remove();continue}var f=(y=[]).concat.apply(y,lG(d.attributes)),p=[].concat(e["*"]||[],e[h]||[]),v=!0,m=!1,g=void 0;try{for(var y,b,w=f[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var _=b.value;al(_,p)||d.removeAttribute(_.nodeName)}}catch(t){m=!0,g=t}finally{try{v||null==w.return||w.return()}finally{if(m)throw g}}}}catch(t){o=!0,s=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw s}}return a.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}},{key:"_resolvePossibleFunction",value:function(t){return y(t,[this])}},{key:"_putElementInTemplate",value:function(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}],[{key:"Default",get:function(){return ac}},{key:"DefaultType",get:function(){return au}},{key:"NAME",get:function(){return"TemplateFactory"}}]),n}(W),af=new Set(["sanitize","allowList","sanitizeFn"]),ap="fade",av="show",am=".modal",ag="hide.bs.modal",ay="hover",ab="focus",aw={AUTO:"auto",TOP:"top",RIGHT:m()?"left":"right",BOTTOM:"bottom",LEFT:m()?"right":"left"},a_={allowList:ar,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},aE={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},ak=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;if(lR(this,n),void 0===e2)throw TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");return(i=e.call(this,t,a))._isEnabled=!0,i._timeout=0,i._isHovered=null,i._activeTrigger={},i._popper=null,i._templateFactory=null,i._newContent=null,i.tip=null,i._setListeners(),i._config.selector||i._fixTitle(),lj(i)}return lI(n,[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}},{key:"dispose",value:function(){clearTimeout(this._timeout),I.off(this._element.closest(am),ag,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),lD(lF(n.prototype),"dispose",this).call(this)}},{key:"show",value:function(){var t=this;if("none"===this._element.style.display)throw Error("Please use show on visible elements");if(this._isWithContent()&&this._isEnabled){var e=I.trigger(this._element,this.constructor.eventName("show")),n=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(!e.defaultPrevented&&n){this._disposePopper();var a=this._getTipElement();this._element.setAttribute("aria-describedby",a.getAttribute("id"));var i=this._config.container,r=!0,o=!1,s=void 0;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(a),I.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(a),a.classList.add(av),"ontouchstart"in document.documentElement)try{for(var l,c,u=(l=[]).concat.apply(l,lG(document.body.children))[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var f=c.value;I.on(f,"mouseover",h)}}catch(t){o=!0,s=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw s}}this._queueCallback(function(){I.trigger(t._element,t.constructor.eventName("shown")),!1===t._isHovered&&t._leave(),t._isHovered=!1},this.tip,this._isAnimated())}}}},{key:"hide",value:function(){var t=this;if(this._isShown()&&!I.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){var e=!0,n=!1,a=void 0;if(this._getTipElement().classList.remove(av),"ontouchstart"in document.documentElement)try{for(var i,r,o=(i=[]).concat.apply(i,lG(document.body.children))[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;I.off(s,"mouseover",h)}}catch(t){n=!0,a=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw a}}this._activeTrigger.click=!1,this._activeTrigger[ab]=!1,this._activeTrigger[ay]=!1,this._isHovered=null,this._queueCallback(function(){t._isWithActiveTrigger()||(t._isHovered||t._disposePopper(),t._element.removeAttribute("aria-describedby"),I.trigger(t._element,t.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}},{key:"update",value:function(){this._popper&&this._popper.update()}},{key:"_isWithContent",value:function(){return!!this._getTitle()}},{key:"_getTipElement",value:function(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}},{key:"_createTipElement",value:function(t){var e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(ap,av),e.classList.add("bs-".concat(this.constructor.NAME,"-auto"));var n=(function(t){do t+=Math.floor(1e6*Math.random());while(document.getElementById(t))return t})(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(ap),e}},{key:"setContent",value:function(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}},{key:"_getTemplateFactory",value:function(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new ah(lU(lY({},this._config),{content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)})),this._templateFactory}},{key:"_getContentForTemplate",value:function(){return{".tooltip-inner":this._getTitle()}}},{key:"_getTitle",value:function(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}},{key:"_initializeOnDelegatedTarget",value:function(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}},{key:"_isAnimated",value:function(){return this._config.animation||this.tip&&this.tip.classList.contains(ap)}},{key:"_isShown",value:function(){return this.tip&&this.tip.classList.contains(av)}},{key:"_createPopper",value:function(t){var e=aw[y(this._config.placement,[this,t,this._element]).toUpperCase()];return e5(this._element,t,this._getPopperConfig(e))}},{key:"_getOffset",value:function(){var t=this,e=this._config.offset;return"string"==typeof e?e.split(",").map(function(t){return Number.parseInt(t,10)}):"function"==typeof e?function(n){return e(n,t._element)}:e}},{key:"_resolvePossibleFunction",value:function(t){return y(t,[this._element])}},{key:"_getPopperConfig",value:function(t){var e=this,n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:function(t){e._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return lY({},n,y(this._config.popperConfig,[n]))}},{key:"_setListeners",value:function(){var t=this,e=this._config.trigger.split(" "),n=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;if("click"===s)I.on(this._element,this.constructor.eventName("click"),this._config.selector,function(e){t._initializeOnDelegatedTarget(e).toggle()});else if("manual"!==s){var l=s===ay?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),c=s===ay?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");I.on(this._element,l,this._config.selector,function(e){var n=t._initializeOnDelegatedTarget(e);n._activeTrigger["focusin"===e.type?ab:ay]=!0,n._enter()}),I.on(this._element,c,this._config.selector,function(e){var n=t._initializeOnDelegatedTarget(e);n._activeTrigger["focusout"===e.type?ab:ay]=n._element.contains(e.relatedTarget),n._leave()})}}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}this._hideModalHandler=function(){t._element&&t.hide()},I.on(this._element.closest(am),ag,this._hideModalHandler)}},{key:"_fixTitle",value:function(){var t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}},{key:"_enter",value:function(){var t=this;this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(function(){t._isHovered&&t.show()},this._config.delay.show))}},{key:"_leave",value:function(){var t=this;this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(function(){t._isHovered||t.hide()},this._config.delay.hide))}},{key:"_setTimeout",value:function(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}},{key:"_isWithActiveTrigger",value:function(){return Object.values(this._activeTrigger).includes(!0)}},{key:"_getConfig",value:function(t){var e=H.getDataAttributes(this._element),n=!0,a=!1,i=void 0;try{for(var r,o=Object.keys(e)[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;af.has(s)&&delete e[s]}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return t=lY({},e,"object"==typeof t&&t?t:{}),t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}},{key:"_configAfterMerge",value:function(t){return t.container=!1===t.container?document.body:l(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}},{key:"_getDelegateConfig",value:function(){var t={},e=!0,n=!1,a=void 0;try{for(var i,r=Object.entries(this._config)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=lX(i.value,2),s=o[0],l=o[1];this.constructor.Default[s]!==l&&(t[s]=l)}}catch(t){n=!0,a=t}finally{try{e||null==r.return||r.return()}finally{if(n)throw a}}return t.selector=!1,t.trigger="manual",t}},{key:"_disposePopper",value:function(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}}],[{key:"Default",get:function(){return a_}},{key:"DefaultType",get:function(){return aE}},{key:"NAME",get:function(){return"tooltip"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var e=n.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw TypeError('No method named "'.concat(t,'"'));e[t]()}})}}]),n}(Y);g(ak);var aT=lU(lY({},ak.Default),{content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"}),ax=lU(lY({},ak.DefaultType),{content:"(null|string|element|function)"}),aO=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(){return lR(this,n),e.apply(this,arguments)}return lI(n,[{key:"_isWithContent",value:function(){return this._getTitle()||this._getContent()}},{key:"_getContentForTemplate",value:function(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}},{key:"_getContent",value:function(){return this._resolvePossibleFunction(this._config.content)}}],[{key:"Default",get:function(){return aT}},{key:"DefaultType",get:function(){return ax}},{key:"NAME",get:function(){return"popover"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var e=n.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw TypeError('No method named "'.concat(t,'"'));e[t]()}})}}]),n}(ak);g(aO);var aP=".bs.scrollspy",aS="activate".concat(aP),aL="click".concat(aP),aA="active",aC="[href]",aM=".nav-link",aR="".concat(aM,", .nav-item > ").concat(aM,", .list-group-item"),aB={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},aI={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},aF=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;return lR(this,n),(i=e.call(this,t,a))._targetLinks=new Map,i._observableSections=new Map,i._rootElement="visible"===getComputedStyle(i._element).overflowY?null:i._element,i._activeTarget=null,i._observer=null,i._previousScrollData={visibleEntryTop:0,parentScrollTop:0},i.refresh(),lj(i)}return lI(n,[{key:"refresh",value:function(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();var t=!0,e=!1,n=void 0;try{for(var a,i=this._observableSections.values()[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var r=a.value;this._observer.observe(r)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"dispose",value:function(){this._observer.disconnect(),lD(lF(n.prototype),"dispose",this).call(this)}},{key:"_configAfterMerge",value:function(t){return t.target=l(t.target)||document.body,t.rootMargin=t.offset?"".concat(t.offset,"px 0px -30%"):t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map(function(t){return Number.parseFloat(t)})),t}},{key:"_maybeEnableSmoothScroll",value:function(){var t=this;this._config.smoothScroll&&(I.off(this._config.target,aL),I.on(this._config.target,aL,aC,function(e){var n=t._observableSections.get(e.target.hash);if(n){e.preventDefault();var a=t._rootElement||window,i=n.offsetTop-t._element.offsetTop;if(a.scrollTo)return void a.scrollTo({top:i,behavior:"smooth"});a.scrollTop=i}}))}},{key:"_getNewObserver",value:function(){var t=this;return new IntersectionObserver(function(e){return t._observerCallback(e)},{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}},{key:"_observerCallback",value:function(t){var e=this,n=function(t){return e._targetLinks.get("#".concat(t.target.id))},a=function(t){e._previousScrollData.visibleEntryTop=t.target.offsetTop,e._process(n(t))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;var o=!0,s=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;if(!d.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(d));continue}var h=d.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&h){if(a(d),!i)return}else r||h||a(d)}}catch(t){s=!0,l=t}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}}},{key:"_initializeTargetsAndObservables",value:function(){this._targetLinks=new Map,this._observableSections=new Map;var t=j.find(aC,this._config.target),e=!0,n=!1,a=void 0;try{for(var i,r=t[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;if(!(!o.hash||u(o))){var s=j.findOne(decodeURI(o.hash),this._element);c(s)&&(this._targetLinks.set(decodeURI(o.hash),o),this._observableSections.set(o.hash,s))}}}catch(t){n=!0,a=t}finally{try{e||null==r.return||r.return()}finally{if(n)throw a}}}},{key:"_process",value:function(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(aA),this._activateParents(t),I.trigger(this._element,aS,{relatedTarget:t}))}},{key:"_activateParents",value:function(t){var e=!0,n=!1,a=void 0,i=!0,r=!1,o=void 0;if(t.classList.contains("dropdown-item"))j.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(aA);else try{for(var s,l=j.parents(t,".nav, .list-group")[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;try{for(var u,d=j.prev(c,aR)[Symbol.iterator]();!(e=(u=d.next()).done);e=!0)u.value.classList.add(aA)}catch(t){n=!0,a=t}finally{try{e||null==d.return||d.return()}finally{if(n)throw a}}}}catch(t){r=!0,o=t}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}}},{key:"_clearActiveClass",value:function(t){t.classList.remove(aA);var e=j.find("".concat(aC,".").concat(aA),t),n=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done);n=!0)r.value.classList.remove(aA)}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}}],[{key:"Default",get:function(){return aB}},{key:"DefaultType",get:function(){return aI}},{key:"NAME",get:function(){return"scrollspy"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var e=n.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));e[t]()}})}}]),n}(Y);I.on(window,"load".concat(aP,".data-api"),function(){var t=!0,e=!1,n=void 0;try{for(var a,i=j.find('[data-bs-spy="scroll"]')[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var r=a.value;aF.getOrCreateInstance(r)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}),g(aF);var aD=".bs.tab",aN="hide".concat(aD),aH="hidden".concat(aD),aW="show".concat(aD),aY="shown".concat(aD),aU="click".concat(aD),aj="keydown".concat(aD),az="load".concat(aD),aq="ArrowRight",aX="ArrowDown",aG="Home",aV="active",aK="fade",aZ="show",a$=".dropdown-toggle",aQ=":not(".concat(a$,")"),aJ='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',a0=".nav-link".concat(aQ,", .list-group-item").concat(aQ,', [role="tab"]').concat(aQ,", ").concat(aJ),a5=".".concat(aV,'[data-bs-toggle="tab"], .').concat(aV,'[data-bs-toggle="pill"], .').concat(aV,'[data-bs-toggle="list"]'),a2=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t){var a;return lR(this,n),(a=e.call(this,t))._parent=a._element.closest('.list-group, .nav, [role="tablist"]'),a._parent&&(a._setInitialAttributes(a._parent,a._getChildren()),I.on(a._element,aj,function(t){return a._keydown(t)})),lj(a)}return lI(n,[{key:"show",value:function(){var t=this._element;if(!this._elemIsActive(t)){var e=this._getActiveElem(),n=e?I.trigger(e,aN,{relatedTarget:t}):null;I.trigger(t,aW,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}}},{key:"_activate",value:function(t,e){var n=this;t&&(t.classList.add(aV),this._activate(j.getElementFromSelector(t)),this._queueCallback(function(){"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),n._toggleDropDown(t,!0),I.trigger(t,aY,{relatedTarget:e})):t.classList.add(aZ)},t,t.classList.contains(aK)))}},{key:"_deactivate",value:function(t,e){var n=this;t&&(t.classList.remove(aV),t.blur(),this._deactivate(j.getElementFromSelector(t)),this._queueCallback(function(){"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),n._toggleDropDown(t,!1),I.trigger(t,aH,{relatedTarget:e})):t.classList.remove(aZ)},t,t.classList.contains(aK)))}},{key:"_keydown",value:function(t){if(["ArrowLeft",aq,"ArrowUp",aX,aG,"End"].includes(t.key)){t.stopPropagation(),t.preventDefault();var e,a=this._getChildren().filter(function(t){return!u(t)});if([aG,"End"].includes(t.key))e=a[t.key===aG?0:a.length-1];else{var i=[aq,aX].includes(t.key);e=w(a,t.target,i,!0)}e&&(e.focus({preventScroll:!0}),n.getOrCreateInstance(e).show())}}},{key:"_getChildren",value:function(){return j.find(a0,this._parent)}},{key:"_getActiveElem",value:function(){var t=this;return this._getChildren().find(function(e){return t._elemIsActive(e)})||null}},{key:"_setInitialAttributes",value:function(t,e){this._setAttributeIfNotExists(t,"role","tablist");var n=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;this._setInitialAttributesOnChild(s)}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}},{key:"_setInitialAttributesOnChild",value:function(t){t=this._getInnerElement(t);var e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}},{key:"_setInitialAttributesOnTargetPanel",value:function(t){var e=j.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby","".concat(t.id)))}},{key:"_toggleDropDown",value:function(t,e){var n=this._getOuterElement(t);if(n.classList.contains("dropdown")){var a=function(t,a){var i=j.findOne(t,n);i&&i.classList.toggle(a,e)};a(a$,aV),a(".dropdown-menu",aZ),n.setAttribute("aria-expanded",e)}}},{key:"_setAttributeIfNotExists",value:function(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}},{key:"_elemIsActive",value:function(t){return t.classList.contains(aV)}},{key:"_getInnerElement",value:function(t){return t.matches(a0)?t:j.findOne(a0,t)}},{key:"_getOuterElement",value:function(t){return t.closest(".nav-item, .list-group-item")||t}}],[{key:"NAME",get:function(){return"tab"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var e=n.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));e[t]()}})}}]),n}(Y);I.on(document,aU,aJ,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),u(this)||a2.getOrCreateInstance(this).show()}),I.on(window,az,function(){var t=!0,e=!1,n=void 0;try{for(var a,i=j.find(a5)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var r=a.value;a2.getOrCreateInstance(r)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}),g(a2);var a1=".bs.toast",a3="mouseover".concat(a1),a4="mouseout".concat(a1),a6="focusin".concat(a1),a8="focusout".concat(a1),a7="hide".concat(a1),a9="hidden".concat(a1),it="show".concat(a1),ie="shown".concat(a1),ia="hide",ii="show",ir="showing",io={animation:"boolean",autohide:"boolean",delay:"number"},is={animation:!0,autohide:!0,delay:5e3},il=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;return lR(this,n),(i=e.call(this,t,a))._timeout=null,i._hasMouseInteraction=!1,i._hasKeyboardInteraction=!1,i._setListeners(),lj(i)}return lI(n,[{key:"show",value:function(){var t=this;I.trigger(this._element,it).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ia),f(this._element),this._element.classList.add(ii,ir),this._queueCallback(function(){t._element.classList.remove(ir),I.trigger(t._element,ie),t._maybeScheduleHide()},this._element,this._config.animation))}},{key:"hide",value:function(){var t=this;this.isShown()&&(I.trigger(this._element,a7).defaultPrevented||(this._element.classList.add(ir),this._queueCallback(function(){t._element.classList.add(ia),t._element.classList.remove(ir,ii),I.trigger(t._element,a9)},this._element,this._config.animation)))}},{key:"dispose",value:function(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ii),lD(lF(n.prototype),"dispose",this).call(this)}},{key:"isShown",value:function(){return this._element.classList.contains(ii)}},{key:"_maybeScheduleHide",value:function(){var t=this;this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(function(){t.hide()},this._config.delay)))}},{key:"_onInteraction",value:function(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();var n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}},{key:"_setListeners",value:function(){var t=this;I.on(this._element,a3,function(e){return t._onInteraction(e,!0)}),I.on(this._element,a4,function(e){return t._onInteraction(e,!1)}),I.on(this._element,a6,function(e){return t._onInteraction(e,!0)}),I.on(this._element,a8,function(e){return t._onInteraction(e,!1)})}},{key:"_clearTimeout",value:function(){clearTimeout(this._timeout),this._timeout=null}}],[{key:"Default",get:function(){return is}},{key:"DefaultType",get:function(){return io}},{key:"NAME",get:function(){return"toast"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var e=n.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw TypeError('No method named "'.concat(t,'"'));e[t](this)}})}}]),n}(Y);return z(il),g(il),{Alert:V,Button:Z,Carousel:tS,Collapse:tY,Dropdown:nm,Modal:n$,Offcanvas:ai,Popover:aO,ScrollSpy:aF,Tab:a2,Toast:il,Tooltip:ak}}(),function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var a=new Date().getTime(),i=Math.max(0,16-(a-t)),r=window.setTimeout(function(){e(a+i)},i);return t=a+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),lZ.STROKE_MODE_FREEHAND=0,lZ.STROKE_MODE_LINE=1,lZ.STROKE_MODE_BEZIER=2,lZ.TIP_ROUND_PIXEL=0,lZ.TIP_ROUND_AA=1,lZ.TIP_ROUND_AIRBRUSH=2,lZ.TIP_SQUARE_PIXEL=3,lZ.TIP_SQUARE_AA=4,lZ.BRUSH_MODE_PAINT=0,lZ.BRUSH_MODE_ERASE=1,lZ.BRUSH_MODE_DODGE=2,lZ.BRUSH_MODE_BURN=3,lZ.BRUSH_MODE_WATER=4,lZ.BRUSH_MODE_BLUR=5,lZ.BRUSH_MODE_SMUDGE=6,lZ.BRUSH_MODE_OIL=7,lZ.PAINT_MODE_OPACITY=0,lZ.PAINT_MODE_FLOW=1,lZ.DEFAULTS={isAA:!1,minSpacing:0,spacing:0,pressureSize:!0,pressureAlpha:!1,pressureScattering:!1,alphaScale:1,tip:lZ.TIP_ROUND_PIXEL,brushMode:lZ.BRUSH_MODE_PAINT,paintMode:lZ.PAINT_MODE_OPACITY,strokeMode:lZ.STROKE_MODE_FREEHAND,resat:1,bleed:0,texture:1,size:0,curSize:0,alpha:0,curAlpha:0,scattering:0,curScattering:0,squeeze:0,curSqueeze:0,angle:Math.PI,curAngle:0,smoothing:0},lZ.prototype.applyPressure=function(t){this.pressureSize&&this.brushMode!=lZ.BRUSH_MODE_SMUDGE&&this.brushMode!=lZ.BRUSH_MODE_OIL?this.curSize=Math.max(.1,this.size*t):this.curSize=Math.max(.1,this.size),this.curSize>16&&(this.curSize=Math.floor(this.curSize)),this.curSize=Math.min(this.curSize,400),this.curAlpha=this.pressureAlpha?Math.floor(this.alpha*Math.min(t,1)):this.alpha,this.curSqueeze=this.squeeze,this.curAngle=this.angle,this.curScattering=this.scattering*this.curSize*(this.pressureScattering?t:1)},lZ.prototype.clone=function(){return new lZ(this)},l$.prototype.makeEmpty=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},l$.prototype.union=function(t){this.isEmpty()?this.set(t):t.isEmpty()||(this.left=Math.min(this.left,t.left),this.top=Math.min(this.top,t.top),this.right=Math.max(this.right,t.right),this.bottom=Math.max(this.bottom,t.bottom))},l$.prototype.getUnion=function(t){var e=this.clone();return e.union(t),e},l$.prototype.getIntersection=function(t){return new l$(Math.max(this.left,t.left),Math.max(this.top,t.top),Math.min(this.right,t.right),Math.min(this.bottom,t.bottom))},l$.prototype.clipTo=function(t){return this.isEmpty()||(t.isEmpty()?this.makeEmpty():(this.left=Math.min(Math.max(this.left,t.left),t.right),this.top=Math.min(Math.max(this.top,t.top),t.bottom),this.right=Math.max(Math.min(this.right,t.right),t.left),this.bottom=Math.max(Math.min(this.bottom,t.bottom),t.top))),this},l$.prototype.containsPoint=function(t){return!(t.x<this.left||t.y<this.top||t.x>=this.right||t.y>=this.bottom)},l$.prototype.isInside=function(t){return this.left>=t.left&&this.top>=t.top&&this.right<=t.right&&this.bottom<=t.bottom},l$.prototype.clipSourceDest=function(t,e){e.right=e.left+t.getWidth(),e.bottom=e.top+t.getHeight(),this.isEmpty()||e.left>=this.right||e.top>=this.bottom||e.right<=this.left||e.bottom<=this.top?(t.makeEmpty(),e.makeEmpty()):(e.right>this.right&&(t.right-=e.right-this.right,e.right=this.right),e.bottom>this.bottom&&(t.bottom-=e.bottom-this.bottom,e.bottom=this.bottom),e.left<this.left&&(t.left+=this.left-e.left,e.left=this.left),e.top<this.top&&(t.top+=this.top-e.top,e.top=this.top))},l$.prototype.getWidth=function(){return this.right-this.left},l$.prototype.getHeight=function(){return this.bottom-this.top},l$.prototype.getArea=function(){return this.getWidth()*this.getHeight()},l$.prototype.isEmpty=function(){return this.right<=this.left||this.bottom<=this.top},l$.prototype.set=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},l$.prototype.clone=function(){return new l$(this.left,this.top,this.right,this.bottom)},l$.prototype.translate=function(t,e){return this.left+=t,this.right+=t,this.top+=e,this.bottom+=e,this},l$.prototype.getTranslated=function(t,e){var n=this.clone();return n.translate(t,e),n},l$.prototype.moveTo=function(t,e){this.translate(t-this.left,e-this.top)},l$.prototype.equals=function(t){return this.left==t.left&&this.right==t.right&&this.top==t.top&&this.bottom==t.bottom},l$.prototype.grow=function(t,e){this.left-=t,this.right+=t,this.top-=e,this.bottom+=e},l$.prototype.toString=function(){return"("+this.left+","+this.top+","+this.right+","+this.bottom+")"},l$.prototype.toPoints=function(){return[{x:this.left,y:this.top},{x:this.right,y:this.top},{x:this.right,y:this.bottom},{x:this.left,y:this.bottom}]},l$.prototype.roundNearest=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this},l$.prototype.roundContain=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this},l$.createBoundingBox=function(t){if(0===t.length)return new l$(0,0,0,0);for(var e=new l$(t[0].x,t[0].y,t[0].x,t[0].y),n=1;n<t.length;n++)e.left=Math.min(e.left,t[n].x),e.top=Math.min(e.top,t[n].y),e.right=Math.max(e.right,t[n].x),e.bottom=Math.max(e.bottom,t[n].y);return e},l$.prototype.subtract=function(t){return l$.subtract(this,t)},l$.subtract=function(t,e){t instanceof l$&&(t=[t]),e instanceof l$&&(e=[e]);for(var n=t.slice(0),a=0;a<e.length;a++)!function(t){for(var a=e[t],i=n.length,r=0;r<i;r++)!function(t){var e=n[t];if(e){var i=e.getIntersection(a);if(!i.isEmpty()){var r=[];if(e.top<a.top&&r.push(new l$(e.left,e.top,e.right,i.top)),e.bottom>a.bottom&&r.push(new l$(e.left,i.bottom,e.right,e.bottom)),e.left<a.left&&r.push(new l$(e.left,i.top,i.left,i.bottom)),e.right>a.right&&r.push(new l$(i.right,i.top,e.right,i.bottom)),(r=r.filter(function(t){return!t.isEmpty()})).length>0){n[t]=r[0];for(var o=1;o<r.length;o++)n.push(r[o])}else n[t]=null}}}(r)}(a);return n.filter(function(t){return null!=t})},l$.union=function(t){var e;if(t instanceof l$)e=[t];else{e=t.slice(0);for(var n=0;n<e.length;n++){var a=e[n],i=e.length;if(a)for(var r=n+1;r<i;r++){var o=e[r];if(o&&!a.getIntersection(o).isEmpty()){var s=l$.subtract(o,a);e[r]=s[0];for(var l=1;l<s.length;l++)e.push(s[l])}}}}return e.filter(function(t){return t&&!t.isEmpty()})},"object"==typeof window&&(window.cpRectGarbage=new l$(1.5,2.5,3.5,4.5)),lQ.prototype.getBounds=function(){return new l$(0,0,this.width,this.height)},lQ.prototype.isInside=function(t,e){return t>=0&&e>=0&&t<this.width&&e<this.height},l5.prototype=Object.create(lQ.prototype),l5.prototype.constructor=l5,l5.BYTES_PER_PIXEL=4,l5.RED_BYTE_OFFSET=0,l5.GREEN_BYTE_OFFSET=1,l5.BLUE_BYTE_OFFSET=2,l5.ALPHA_BYTE_OFFSET=3,l5.prototype.clone=function(){return this.cloneRect(this.getBounds())},l5.prototype.cloneRect=function(t){var e=new l5(t.getWidth(),t.getHeight());return e.copyBitmapRect(this,0,0,t),e},l5.prototype.getPixel=function(t,e){t=Math.max(0,Math.min(this.width-1,t)),e=Math.max(0,Math.min(this.height-1,e));var n=this.offsetOfPixel(t,e);return this.data[n+l5.ALPHA_BYTE_OFFSET]<<24|this.data[n+l5.RED_BYTE_OFFSET]<<16|this.data[n+l5.GREEN_BYTE_OFFSET]<<8|this.data[n+l5.BLUE_BYTE_OFFSET]},l5.prototype.copyRectXOR=function(t,e){for(var n=(e=this.getBounds().clipTo(e)).getWidth(),a=new Uint8Array(n*e.getHeight()*l5.BYTES_PER_PIXEL),i=0,r=this.offsetOfPixel(e.left,e.top),o=t.offsetOfPixel(e.left,e.top),s=(this.width-n)*l5.BYTES_PER_PIXEL,l=(t.width-n)*l5.BYTES_PER_PIXEL,c=n*l5.BYTES_PER_PIXEL,u=e.top;u<e.bottom;u++,r+=s,o+=l)for(var d=0;d<c;d++,i++,r++,o++)a[i]=this.data[r]^t.data[o];return a},l5.prototype.setRectXOR=function(t,e){for(var n=(e=this.getBounds().clipTo(e)).getWidth(),a=e.getHeight(),i=this.offsetOfPixel(e.left,e.top),r=0,o=(this.width-n)*l5.BYTES_PER_PIXEL,s=n*l5.BYTES_PER_PIXEL,l=0;l<a;l++){for(var c=0;c<s;c++)this.data[i++]^=t[r++];i+=o}},l5.prototype.copyBitmapRect=function(t,e,n,a){var i=new l$(e,n,0,0);a=a.clone(),this.getBounds().clipSourceDest(a,i);var r=0|i.getWidth(),o=0|i.getHeight();if(0==i.left&&0==i.top&&r==this.width&&o==this.height&&r==t.width&&o==t.height)this.copyPixelsFrom(t);else for(var s=this.offsetOfPixel(i.left,i.top),l=(this.width-r)*l5.BYTES_PER_PIXEL,c=t.offsetOfPixel(a.left,a.top),u=(t.width-r)*l5.BYTES_PER_PIXEL,d=0;d<o;d++,c+=u,s+=l)for(var h=0;h<r;h++,c+=l5.BYTES_PER_PIXEL,s+=l5.BYTES_PER_PIXEL)this.data[s]=t.data[c],this.data[s+1]=t.data[c+1],this.data[s+2]=t.data[c+2],this.data[s+3]=t.data[c+3]},l5.prototype.copyAlphaFrom=function(t,e){for(var n=0|(e=this.getBounds().clipTo(e)).getWidth(),a=0|e.getHeight(),i=this.offsetOfPixel(e.left,e.top)+l5.ALPHA_BYTE_OFFSET|0,r=(this.width-n)*l5.BYTES_PER_PIXEL|0,o=0;o<a;o++,i+=r)for(var s=0;s<n;s++,i+=l5.BYTES_PER_PIXEL)this.data[i]=t.data[i]},l5.prototype.setToSize=function(t){(t.width!=this.width||t.height!=this.height)&&(this.width=t.width,this.height=t.height,this.imageData=l0(this.width,this.height),this.data=this.imageData.data)},l5.prototype.copyPixelsFrom=function(t){if(this.setToSize(t),"set"in this.data)this.data.set(t.data);else for(var e=0;e<this.data.length;e++)this.data[e]=t.data[e]},l5.prototype.copyPixelsFromGreyscale=function(t){var e,n=0,a=t.width*t.height;for(this.setToSize(t),e=0;e<a;e++,n+=l5.BYTES_PER_PIXEL)this.data[n+l5.RED_BYTE_OFFSET]=t.data[e],this.data[n+l5.GREEN_BYTE_OFFSET]=t.data[e],this.data[n+l5.BLUE_BYTE_OFFSET]=t.data[e],this.data[n+l5.ALPHA_BYTE_OFFSET]=255},l5.prototype.copyScaledNearestNeighbor=function(t){for(var e,n=0,a=t.width/this.width,i=t.height/this.height,r=0,o=0;r<this.height;r++,o+=i){e=t.offsetOfPixel(0,Math.round(o));for(var s=0,l=0;s<this.width;s++,n+=l5.BYTES_PER_PIXEL,l+=a){var c=e+Math.round(l)*l5.BYTES_PER_PIXEL;this.data[n]=t.data[c],this.data[n+1]=t.data[c+1],this.data[n+2]=t.data[c+2],this.data[n+l5.ALPHA_BYTE_OFFSET]=t.data[c+l5.ALPHA_BYTE_OFFSET]}}},l5.prototype.createThumbnailFrom=function(t){var e=Math.min(Math.floor(t.width/this.width),3);if(e<2){this.copyScaledNearestNeighbor(t);return}for(var n=new Uint16Array(5*this.width),a=t.width*l5.BYTES_PER_PIXEL,i=Math.floor(t.width/this.width)*l5.BYTES_PER_PIXEL,r=Math.floor(t.width/this.width/e)*l5.BYTES_PER_PIXEL,o=i-r*e,s=Math.floor(t.height/this.height),l=Math.floor(t.height/this.height/e),c=l*a-i*this.width,u=(s-l*e)*a,d=0,h=0,f=0;f<this.height;f++,d+=u){var p=0;n.fill(0);for(var v=0;v<e;v++,d+=c){p=0;for(var m=0;m<this.width;m++,p+=5,d+=o)for(var g=0;g<e;g++,d+=r){var y=t.data[d+l5.ALPHA_BYTE_OFFSET],b=y/255;n[p]+=t.data[d]*b,n[p+1]+=t.data[d+1]*b,n[p+2]+=t.data[d+2]*b,n[p+l5.ALPHA_BYTE_OFFSET]+=y,n[p+4]=Math.max(n[p+4],y)}}p=0;for(var w=0;w<this.width;w++,p+=5,h+=l5.BYTES_PER_PIXEL){var _=n[p+4];if(0==_)this.data[h+l5.ALPHA_BYTE_OFFSET]=0;else{var E=_/n[p+l5.ALPHA_BYTE_OFFSET];this.data[h]=n[p]*E,this.data[h+1]=n[p+1]*E,this.data[h+2]=n[p+2]*E,this.data[h+l5.ALPHA_BYTE_OFFSET]=_}}}},l5.prototype.floodFill=function(t,e,n){if(this.isInside(t,e)){var a=this.getPixel(t,e),i=a>>24&255,r=a>>16&255,o=a>>8&255,s=255&a,l=n>>24&255,c=n>>16&255,u=n>>8&255,d=255&n,h=[],f=this.getBounds(),p=this.data;if(f.left*=l5.BYTES_PER_PIXEL,f.right*=l5.BYTES_PER_PIXEL,h.push({x1:t*l5.BYTES_PER_PIXEL,x2:t*l5.BYTES_PER_PIXEL,y:e,dy:-1}),h.push({x1:t*l5.BYTES_PER_PIXEL,x2:t*l5.BYTES_PER_PIXEL,y:e+1,dy:1}),0==i){if(0==l)return;for(;h.length>0;){var v=h.pop();if(!(v.y<f.top)&&!(v.y>=f.bottom)){for(var m=this.offsetOfPixel(0,v.y),g=v.x1,y=void 0;g>=f.left&&0==p[g+m+l5.ALPHA_BYTE_OFFSET];)p[g+m+l5.RED_BYTE_OFFSET]=c,p[g+m+l5.GREEN_BYTE_OFFSET]=u,p[g+m+l5.BLUE_BYTE_OFFSET]=d,p[g+m+l5.ALPHA_BYTE_OFFSET]=l,g-=l5.BYTES_PER_PIXEL;if(g>=v.x1){for(;g<=v.x2&&p[g+m+l5.ALPHA_BYTE_OFFSET]!=i;)g+=l5.BYTES_PER_PIXEL;if(y=g+l5.BYTES_PER_PIXEL,g>v.x2)continue}else(g+=l5.BYTES_PER_PIXEL)<v.x1&&h.push({x1:g,x2:v.x1-l5.BYTES_PER_PIXEL,y:v.y-v.dy,dy:-v.dy}),y=v.x1+l5.BYTES_PER_PIXEL;do{for(p[g+m+l5.RED_BYTE_OFFSET]=c,p[g+m+l5.GREEN_BYTE_OFFSET]=u,p[g+m+l5.BLUE_BYTE_OFFSET]=d,p[g+m+l5.ALPHA_BYTE_OFFSET]=l;y<f.right&&p[y+m+l5.ALPHA_BYTE_OFFSET]==i;)p[y+m+l5.RED_BYTE_OFFSET]=c,p[y+m+l5.GREEN_BYTE_OFFSET]=u,p[y+m+l5.BLUE_BYTE_OFFSET]=d,p[y+m+l5.ALPHA_BYTE_OFFSET]=l,y+=l5.BYTES_PER_PIXEL;for(h.push({x1:g,x2:y-l5.BYTES_PER_PIXEL,y:v.y+v.dy,dy:v.dy}),y-l5.BYTES_PER_PIXEL>v.x2&&h.push({x1:v.x2+l5.BYTES_PER_PIXEL,x2:y-l5.BYTES_PER_PIXEL,y:v.y-v.dy,dy:-v.dy}),g=y+l5.BYTES_PER_PIXEL;g<=v.x2&&p[g+m+l5.ALPHA_BYTE_OFFSET]!=i;)g+=l5.BYTES_PER_PIXEL;y=g+l5.BYTES_PER_PIXEL}while(g<=v.x2)}}}else{if(n==a)return;for(;h.length>0;){var b=h.pop();if(!(b.y<f.top)&&!(b.y>=f.bottom)){for(var w=this.offsetOfPixel(0,b.y),_=b.x1,E=void 0;_>=f.left&&p[_+w+l5.RED_BYTE_OFFSET]==r&&p[_+w+l5.GREEN_BYTE_OFFSET]==o&&p[_+w+l5.BLUE_BYTE_OFFSET]==s&&p[_+w+l5.ALPHA_BYTE_OFFSET]==i;)p[_+w+l5.RED_BYTE_OFFSET]=c,p[_+w+l5.GREEN_BYTE_OFFSET]=u,p[_+w+l5.BLUE_BYTE_OFFSET]=d,p[_+w+l5.ALPHA_BYTE_OFFSET]=l,_-=l5.BYTES_PER_PIXEL;if(_>=b.x1){for(;_<=b.x2&&!(p[_+w+l5.RED_BYTE_OFFSET]==r&&p[_+w+l5.GREEN_BYTE_OFFSET]==o&&p[_+w+l5.BLUE_BYTE_OFFSET]==s&&p[_+w+l5.ALPHA_BYTE_OFFSET]==i);)_+=l5.BYTES_PER_PIXEL;if(E=_+l5.BYTES_PER_PIXEL,_>b.x2)continue}else(_+=l5.BYTES_PER_PIXEL)<b.x1&&h.push({x1:_,x2:b.x1-l5.BYTES_PER_PIXEL,y:b.y-b.dy,dy:-b.dy}),E=b.x1+l5.BYTES_PER_PIXEL;do{for(p[_+w+l5.RED_BYTE_OFFSET]=c,p[_+w+l5.GREEN_BYTE_OFFSET]=u,p[_+w+l5.BLUE_BYTE_OFFSET]=d,p[_+w+l5.ALPHA_BYTE_OFFSET]=l;E<f.right&&p[E+w+l5.RED_BYTE_OFFSET]==r&&p[E+w+l5.GREEN_BYTE_OFFSET]==o&&p[E+w+l5.BLUE_BYTE_OFFSET]==s&&p[E+w+l5.ALPHA_BYTE_OFFSET]==i;)p[E+w+l5.RED_BYTE_OFFSET]=c,p[E+w+l5.GREEN_BYTE_OFFSET]=u,p[E+w+l5.BLUE_BYTE_OFFSET]=d,p[E+w+l5.ALPHA_BYTE_OFFSET]=l,E+=l5.BYTES_PER_PIXEL;for(h.push({x1:_,x2:E-l5.BYTES_PER_PIXEL,y:b.y+b.dy,dy:b.dy}),E-l5.BYTES_PER_PIXEL>b.x2&&h.push({x1:b.x2+l5.BYTES_PER_PIXEL,x2:E-l5.BYTES_PER_PIXEL,y:b.y-b.dy,dy:-b.dy}),_=E+l5.BYTES_PER_PIXEL;_<=b.x2&&!(p[_+w+l5.RED_BYTE_OFFSET]==r&&p[_+w+l5.GREEN_BYTE_OFFSET]==o&&p[_+w+l5.BLUE_BYTE_OFFSET]==s&&p[_+w+l5.ALPHA_BYTE_OFFSET]==i);)_+=l5.BYTES_PER_PIXEL;E=_+l5.BYTES_PER_PIXEL}while(_<=b.x2)}}}}},l5.prototype.copyPixelColumnToArray=function(t,e,n,a){for(var i=(this.width-1)*l5.BYTES_PER_PIXEL,r=0,o=this.offsetOfPixel(t,e),s=0;s<n;s++){for(var l=0;l<l5.BYTES_PER_PIXEL;l++)a[r++]=this.data[o++];o+=i}},l5.prototype.copyArrayToPixelColumn=function(t,e,n,a){for(var i=(this.width-1)*l5.BYTES_PER_PIXEL,r=0,o=this.offsetOfPixel(t,e),s=0;s<n;s++){for(var l=0;l<l5.BYTES_PER_PIXEL;l++)this.data[o++]=a[r++];o+=i}},l5.prototype.boxBlur=function(t,e,n){for(var a=(t=this.getBounds().clipTo(t)).getWidth(),i=a*l5.BYTES_PER_PIXEL,r=t.getHeight(),o=Math.max(a,r),s=new Uint8Array(o*l5.BYTES_PER_PIXEL),l=new Uint8Array(o*l5.BYTES_PER_PIXEL),c=t.top;c<t.bottom;c++){for(var u=this.offsetOfPixel(t.left,c),d=0;d<i;d++)s[d]=this.data[u++];(function(t,e){for(var n=0,a=0;a<e;a++){for(var i=t[n+l5.ALPHA_BYTE_OFFSET],r=0;r<3;r++,n++)t[n]=Math.round(t[n]*i/255);n++}})(s,a),l2(s,l,a,e),u=this.offsetOfPixel(t.left,c);for(var h=0;h<i;h++)this.data[u++]=l[h]}for(var f=t.left;f<t.right;f++)this.copyPixelColumnToArray(f,t.top,r,s),l2(s,l,r,n),function(t,e){for(var n=0,a=0;a<e;a++){var i=t[n+l5.ALPHA_BYTE_OFFSET];if(0!=i){for(var r=255/i,o=0;o<3;o++,n++)t[n]=Math.min(Math.round(t[n]*r),255);n++}else n+=l5.BYTES_PER_PIXEL}}(l,r),this.copyArrayToPixelColumn(f,t.top,r,l)},l5.prototype.offsetOfPixel=function(t,e){return(e*this.width+t)*4|0},l5.prototype.getMemorySize=function(){return this.data.length},l5.prototype.getImageData=function(){return this.imageData},l5.prototype.setImageData=function(t){this.width=t.width,this.height=t.height,this.imageData=t,this.data=t.data},l5.prototype.clearAll=function(t){if(0==t&&"fill"in this.data)this.data.fill(0);else for(var e=t>>24&255,n=t>>16&255,a=t>>8&255,i=255&t,r=0;r<this.width*this.height*l5.BYTES_PER_PIXEL;)this.data[r++]=n,this.data[r++]=a,this.data[r++]=i,this.data[r++]=e},l5.prototype.clearRect=function(t,e){t=this.getBounds().clipTo(t);for(var n=e>>24&255,a=e>>16&255,i=e>>8&255,r=255&e,o=(this.width-t.getWidth())*l5.BYTES_PER_PIXEL,s=this.offsetOfPixel(t.left,t.top),l=t.top;l<t.bottom;l++,s+=o)for(var c=t.left;c<t.right;c++)this.data[s++]=a,this.data[s++]=i,this.data[s++]=r,this.data[s++]=n},l5.prototype.copyRegionHFlip=function(t,e){t=this.getBounds().clipTo(t);for(var n=t.top;n<t.bottom;n++)for(var a=this.offsetOfPixel(t.left,n),i=e.offsetOfPixel(t.right-1,n),r=t.left;r<t.right;r++,i-=2*l5.BYTES_PER_PIXEL)for(var o=0;o<l5.BYTES_PER_PIXEL;o++)this.data[a++]=e.data[i++]},l5.prototype.copyRegionVFlip=function(t,e){for(var n=(t=this.getBounds().clipTo(t)).getWidth()*l5.BYTES_PER_PIXEL,a=t.top;a<t.bottom;a++)for(var i=this.offsetOfPixel(t.left,a),r=e.offsetOfPixel(t.left,t.bottom-1-(a-t.top)),o=0;o<n;o++)this.data[i++]=e.data[r++]},l5.prototype.fillWithNoise=function(t){t=this.getBounds().clipTo(t);for(var e,n=(this.width-t.getWidth())*l5.BYTES_PER_PIXEL,a=this.offsetOfPixel(t.left,t.top),i=t.top;i<t.bottom;i++,a+=n)for(var r=t.left;r<t.right;r++,a+=l5.BYTES_PER_PIXEL)e=256*Math.random()|0,this.data[a+l5.RED_BYTE_OFFSET]=e,this.data[a+l5.GREEN_BYTE_OFFSET]=e,this.data[a+l5.BLUE_BYTE_OFFSET]=e,this.data[a+l5.ALPHA_BYTE_OFFSET]=255},l5.prototype.gradientHorzReplace=function(t,e,n,a){var i={r:a[0]>>16&255,g:a[0]>>8&255,b:255&a[0],a:a[0]>>24&255},r={r:a[1]>>16&255,g:a[1]>>8&255,b:255&a[1],a:a[1]>>24&255},o=(this.width-t.getWidth())*l5.BYTES_PER_PIXEL,s=0|this.offsetOfPixel(t.left,t.top),l=t.bottom-t.top|0;if(n<e){var c=n;n=e,e=c,c=i,i=r,r=c}for(var u=n-e|0,d=(r.r-i.r)/u,h=(r.g-i.g)/u,f=(r.b-i.b)/u,p=(r.a-i.a)/u,v=Math.max(t.left-e,0),m=0;m<l;m++,s+=o){for(var g=t.left,y=0|Math.min(e,t.right);g<y;g++,s+=l5.BYTES_PER_PIXEL)this.data[s+l5.RED_BYTE_OFFSET]=i.r,this.data[s+l5.GREEN_BYTE_OFFSET]=i.g,this.data[s+l5.BLUE_BYTE_OFFSET]=i.b,this.data[s+l5.ALPHA_BYTE_OFFSET]=i.a;var b=i.r+d*v,w=i.g+h*v,_=i.b+f*v,E=i.a+p*v;for(y=0|Math.min(n,t.right);g<y;g++,s+=l5.BYTES_PER_PIXEL)this.data[s+l5.RED_BYTE_OFFSET]=b,this.data[s+l5.GREEN_BYTE_OFFSET]=w,this.data[s+l5.BLUE_BYTE_OFFSET]=_,this.data[s+l5.ALPHA_BYTE_OFFSET]=E,b+=d,w+=h,_+=f,E+=p;for(;g<t.right;g++,s+=l5.BYTES_PER_PIXEL)this.data[s+l5.RED_BYTE_OFFSET]=r.r,this.data[s+l5.GREEN_BYTE_OFFSET]=r.g,this.data[s+l5.BLUE_BYTE_OFFSET]=r.b,this.data[s+l5.ALPHA_BYTE_OFFSET]=r.a}},l5.prototype.gradientVertReplace=function(t,e,n,a){var i={r:a[0]>>16&255,g:a[0]>>8&255,b:255&a[0],a:a[0]>>24&255},r={r:a[1]>>16&255,g:a[1]>>8&255,b:255&a[1],a:a[1]>>24&255},o=(this.width-t.getWidth())*l5.BYTES_PER_PIXEL,s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0;if(n<e){var c=n;n=e,e=c,c=i,i=r,r=c}for(var u=t.top,d=0|Math.min(t.bottom,e);u<d;u++,s+=o)for(var h=0;h<l;h++,s+=l5.BYTES_PER_PIXEL)this.data[s+l5.RED_BYTE_OFFSET]=i.r,this.data[s+l5.GREEN_BYTE_OFFSET]=i.g,this.data[s+l5.BLUE_BYTE_OFFSET]=i.b,this.data[s+l5.ALPHA_BYTE_OFFSET]=i.a;for(var f=n-e|0,p=(r.r-i.r)/f,v=(r.g-i.g)/f,m=(r.b-i.b)/f,g=(r.a-i.a)/f,y=Math.max(u-e,0),b=i.r+p*y,w=i.g+v*y,_=i.b+m*y,E=i.a+g*y,k=0|Math.min(t.bottom,n);u<k;u++,s+=o){for(var T=0;T<l;T++,s+=l5.BYTES_PER_PIXEL)this.data[s+l5.RED_BYTE_OFFSET]=b,this.data[s+l5.GREEN_BYTE_OFFSET]=w,this.data[s+l5.BLUE_BYTE_OFFSET]=_,this.data[s+l5.ALPHA_BYTE_OFFSET]=E;b+=p,w+=v,_+=m,E+=g}for(;u<t.bottom;u++,s+=o)for(var x=0;x<l;x++,s+=l5.BYTES_PER_PIXEL)this.data[s+l5.RED_BYTE_OFFSET]=r.r,this.data[s+l5.GREEN_BYTE_OFFSET]=r.g,this.data[s+l5.BLUE_BYTE_OFFSET]=r.b,this.data[s+l5.ALPHA_BYTE_OFFSET]=r.a},l5.prototype.gradientReplace=function(t,e,n,a,i,r){for(var o=(this.width-t.getWidth())*l5.BYTES_PER_PIXEL,s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0,c={r:r[0]>>16&255,g:r[0]>>8&255,b:255&r[0],a:r[0]>>24&255},u={r:r[1]>>16&255,g:r[1]>>8&255,b:255&r[1],a:r[1]>>24&255},d=i-n+(a-e)*(a-e)/(i-n),h=a-e+(i-n)*(i-n)/(a-e),f=1/h,p=t.top;p<t.bottom;p++,s+=o)for(var v=(t.left-e)/h+(p-n)/d,m=0;m<l;m++,s+=l5.BYTES_PER_PIXEL){var g=Math.min(Math.max(v,0),1),y=1-g;this.data[s+l5.RED_BYTE_OFFSET]=c.r*y+u.r*g,this.data[s+l5.GREEN_BYTE_OFFSET]=c.g*y+u.g*g,this.data[s+l5.BLUE_BYTE_OFFSET]=c.b*y+u.b*g,this.data[s+l5.ALPHA_BYTE_OFFSET]=c.a*y+u.a*g,v+=f}},l5.prototype.gradientAlpha=function(t,e,n,a,i,r){for(var o=(this.width-t.getWidth())*l5.BYTES_PER_PIXEL,s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0,c={r:r[0]>>16&255,g:r[0]>>8&255,b:255&r[0],a:r[0]>>24&255},u={r:r[1]>>16&255,g:r[1]>>8&255,b:255&r[1],a:r[1]>>24&255},d=i-n+(a-e)*(a-e)/(i-n),h=a-e+(i-n)*(i-n)/(a-e),f=1/h,p=t.top;p<t.bottom;p++,s+=o)for(var v=(t.left-e)/h+(p-n)/d,m=0;m<l;m++,s+=l5.BYTES_PER_PIXEL){var g=Math.min(Math.max(v,0),1),y=1-g,b=c.r*y+u.r*g,w=c.g*y+u.g*g,_=c.b*y+u.b*g,E=c.a*y+u.a*g,k=this.data[s+l5.ALPHA_BYTE_OFFSET],T=E+k-E*k/255|0;if(T>0){var x=255*E/T|0,O=255-x;this.data[s+l5.RED_BYTE_OFFSET]=(b*x+this.data[s+l5.RED_BYTE_OFFSET]*O)/255|0,this.data[s+l5.GREEN_BYTE_OFFSET]=(w*x+this.data[s+l5.GREEN_BYTE_OFFSET]*O)/255|0,this.data[s+l5.BLUE_BYTE_OFFSET]=(_*x+this.data[s+l5.BLUE_BYTE_OFFSET]*O)/255|0,this.data[s+l5.ALPHA_BYTE_OFFSET]=T}v+=f}},l5.prototype.gradient=function(t,e,n,a,i,r,o){t=this.getBounds().clipTo(t),(e!=a||n!=i)&&(o||r[0]>>>24==255&&r[1]>>>24==255?e==a?this.gradientVertReplace(t,n,i,r):n==i?this.gradientHorzReplace(t,e,a,r):this.gradientReplace(t,e,n,a,i,r):this.gradientAlpha(t,e,n,a,i,r))},l5.prototype.fillWithColorNoise=function(t){t=this.getBounds().clipTo(t);for(var e,n=(this.width-t.getWidth())*l5.BYTES_PER_PIXEL,a=this.offsetOfPixel(t.left,t.top),i=t.top;i<t.bottom;i++,a+=n)for(var r=t.left;r<t.right;r++,a+=l5.BYTES_PER_PIXEL)e=0x1000000*Math.random()|0,this.data[a+l5.RED_BYTE_OFFSET]=e>>16&255,this.data[a+l5.GREEN_BYTE_OFFSET]=e>>8&255,this.data[a+l5.BLUE_BYTE_OFFSET]=255&e,this.data[a+l5.ALPHA_BYTE_OFFSET]=255},l5.prototype.invert=function(t){t=this.getBounds().clipTo(t);for(var e=(this.width-t.getWidth())*l5.BYTES_PER_PIXEL,n=this.offsetOfPixel(t.left,t.top),a=t.top;a<t.bottom;a++,n+=e)for(var i=t.left;i<t.right;i++,n+=l5.BYTES_PER_PIXEL)this.data[n+l5.RED_BYTE_OFFSET]^=255,this.data[n+l5.GREEN_BYTE_OFFSET]^=255,this.data[n+l5.BLUE_BYTE_OFFSET]^=255},l5.prototype.getNonTransparentBounds=function(t){var e,n,a,i,r,o=t.clone();for(r=(this.width-o.getWidth())*l5.BYTES_PER_PIXEL,e=this.offsetOfPixel(o.left,o.top)+l5.ALPHA_BYTE_OFFSET,a=o.top;a<o.bottom;a++,e+=r){for(i=0,n=o.left;n<o.right;n++,e+=l5.BYTES_PER_PIXEL)i|=this.data[e];if(0!=i)break}if(o.top=a,o.top==o.bottom)return o;for(e=this.offsetOfPixel(o.right-1,o.bottom-1)+l5.ALPHA_BYTE_OFFSET,a=o.bottom-1;a>=o.top;a--,e-=r){for(i=0,n=o.right-1;n>=o.left;n--,e-=l5.BYTES_PER_PIXEL)i|=this.data[e];if(0!=i)break}for(o.bottom=a+1,r=l5.BYTES_PER_PIXEL*this.width,n=o.left;n<o.right;n++){for(e=this.offsetOfPixel(n,o.top)+l5.ALPHA_BYTE_OFFSET,i=0,a=o.top;a<o.bottom;a++,e+=r)i|=this.data[e];if(0!=i)break}for(o.left=n,n=o.right-1;n>=o.left;n--){for(e=this.offsetOfPixel(n,o.top)+l5.ALPHA_BYTE_OFFSET,i=0,a=o.top;a<o.bottom;a++,e+=r)i|=this.data[e];if(0!=i)break}return o.right=n+1,o},l5.prototype.getAsCanvas=function(t){var e=lJ(this.imageData.width,this.imageData.height);return e.getContext("2d").putImageData(this.imageData,0,0),l1(e,t||0)},l5.prototype.getAsPNG=function(t){var e;return!!("string"==typeof(e=this.getAsCanvas(t).toDataURL("image/png"))&&e.match(/^data:image\/png;base64,/i))&&window.atob(e.substring(22))},l5.prototype.getAsPNGBuffer=function(t){return this.getAsCanvas(t).toBuffer("image/png")},l5.prototype.hasAlphaInRect=function(t){t=this.getBounds().clipTo(t);for(var e=(this.width-t.getWidth())*l5.BYTES_PER_PIXEL,n=this.offsetOfPixel(t.left,t.top)+l5.ALPHA_BYTE_OFFSET,a=t.top;a<t.bottom;a++,n+=e){for(var i=255,r=t.left;r<t.right;r++,n+=l5.BYTES_PER_PIXEL)i&=this.data[n];if(255!=i)return!0}return!1},l5.prototype.hasAlpha=function(){return this.hasAlphaInRect(this.getBounds())},l5.createFromImage=function(t){var e=lJ(t.width,t.height).getContext("2d");return e.globalCompositeOperation="copy",e.drawImage(t,0,0),new l5(e.getImageData(0,0,t.width,t.height))},l5.prototype.equals=function(t){if(this.width!=t.width||this.height!=t.height)return!1;for(var e=0;e<this.data.length;e+=l5.BYTES_PER_PIXEL)if((0!=this.data[e+l5.ALPHA_BYTE_OFFSET]||0!=t.data[e+l5.ALPHA_BYTE_OFFSET])&&(this.data[e]!=t.data[e]||this.data[e+1]!=t.data[e+1]||this.data[e+2]!=t.data[e+2]||this.data[e+3]!=t.data[e+3]))return!1;return!0},l3.prototype=Object.create(ce.prototype),l3.prototype.constructor=l3,l3.prototype.getLinearizedLayerList=function(t,e){e=e||[];var n=!0,a=!1,i=void 0;try{for(var r,o=this.layers[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;s instanceof l3&&(s.expanded||!t)&&s.getLinearizedLayerList(t,e),e.push(s)}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return e},l3.prototype.clearLayers=function(){this.layers=[]},l3.prototype.addLayer=function(t){t.parent=this,this.layers.push(t)},l3.prototype.insertLayer=function(t,e){e.parent=this,this.layers.splice(t,0,e)},l3.prototype.removeLayer=function(t){var e=this.layers.indexOf(t);e>-1&&this.layers.splice(e,1)},l3.prototype.removeLayerAtIndex=function(t){var e=this.layers[t];return e&&this.layers.splice(t,1),e},l3.prototype.setLayerAtIndex=function(t,e){var n=this.layers[t];return e.parent=this,this.layers[t]=e,n},l3.prototype.setExpanded=function(t){this.expanded=t},l3.prototype.getExpanded=function(){return this.expanded},l3.prototype.indexOf=function(t){return this.layers.indexOf(t)},l3.prototype.getMemoryUsed=function(){return this.layers.map(function(t){return t.getMemoryUsed()}).reduce(l4,0)},l3.prototype.clone=function(){var t=new l3(this.name,this.blendMode);return ce.prototype.copyFrom.call(t,this),t.expanded=this.expanded,t.layers=this.layers.map(function(t){return t.clone()}),t.layers.forEach(function(e){return e.parent=t}),t},l3.prototype.getNonTransparentBounds=function(t){var e=new l$(0,0,0,0);return this.layers.forEach(function(n){return e.union(n.getNonTransparentBounds(t))}),e},l6.prototype=Object.create(lQ.prototype),l6.prototype.constructor=l6,l6.prototype.createBitmap=function(t,e,n){switch(this.bitDepth=n,n){case 32:this.data=new Uint32Array(t*e);break;case 16:this.data=new Uint16Array(t*e);break;default:this.data=new Uint8Array(t*e)}},l6.prototype.clone=function(){var t=new l6(this.width,this.height,this.bitDepth);return t.copyPixelsFrom(this),t},l6.prototype.cloneRect=function(t){var e=new l6(t.getWidth(),t.getHeight(),this.bitDepth);return e.copyBitmapRect(this,0,0,t),e},l6.prototype.getPixel=function(t,e){return t=Math.max(0,Math.min(this.width-1,t)),e=Math.max(0,Math.min(this.height-1,e)),this.data[this.offsetOfPixel(t,e)]},l6.prototype.clearAll=function(t){this.data.fill(t)},l6.prototype.clearRect=function(t,e){if((t=this.getBounds().clipTo(t)).equals(this.getBounds()))this.clearAll(e);else for(var n=this.width,a=t.right-t.left,i=this.offsetOfPixel(t.left,t.top),r=t.top;r<t.bottom;r++,i+=n)this.data.fill(e,i,i+a)},l6.prototype.copyScaledNearestNeighbor=function(t){for(var e,n=0,a=t.width/this.width,i=t.height/this.height,r=0,o=0;r<this.height;r++,o+=i){e=t.offsetOfPixel(0,Math.round(o));for(var s=0,l=0;s<this.width;s++,n++,l+=a){var c=e+Math.round(l);this.data[n]=t.data[c]}}},l6.prototype.floodFill=function(t,e,n){if(this.isInside(t,e)){n&=255;var a=this.getPixel(t,e),i=[],r=this.getBounds(),o=this.data;if(i.push({x1:t,x2:t,y:e,dy:-1}),i.push({x1:t,x2:t,y:e+1,dy:1}),n!=a)for(;i.length>0;){var s=i.pop();if(!(s.y<r.top)&&!(s.y>=r.bottom)){for(var l=this.offsetOfPixel(0,s.y),c=s.x1,u=void 0;c>=r.left&&o[c+l]==a;)o[c+l]=n,c--;if(c>=s.x1){for(;c<=s.x2&&o[c+l]!=a;)c++;if(u=c+1,c>s.x2)continue}else++c<s.x1&&i.push({x1:c,x2:s.x1-1,y:s.y-s.dy,dy:-s.dy}),u=s.x1+1;do{for(o[c+l]=n;u<r.right&&o[u+l]==a;)o[u+l]=n,u++;for(i.push({x1:c,x2:u-1,y:s.y+s.dy,dy:s.dy}),u-1>s.x2&&i.push({x1:s.x2+1,x2:u-1,y:s.y-s.dy,dy:-s.dy}),c=u+1;c<=s.x2&&o[c+l]!=a;)c++;u=c+1}while(c<=s.x2)}}}},l6.prototype.createThumbnailFrom=function(t){var e=Math.min(Math.floor(t.width/this.width),3);if(e<2){this.copyScaledNearestNeighbor(t);return}for(var n=new Uint16Array(this.width),a=t.width,i=Math.floor(t.width/this.width),r=Math.floor(t.width/this.width/e),o=i-r*e,s=Math.floor(t.height/this.height),l=Math.floor(t.height/this.height/e),c=l*a-i*this.width,u=(s-l*e)*a,d=0,h=0,f=0;f<this.height;f++,d+=u){var p=0;n.fill(0);for(var v=0;v<e;v++,d+=c){p=0;for(var m=0;m<this.width;m++,p++,d+=o)for(var g=0;g<e;g++,d+=r)n[p]+=t.data[d]}p=0;for(var y=0;y<this.width;y++,p++,h++)this.data[h]=n[p]/(e*e)}},l6.prototype.mirrorHorizontally=function(){for(var t=this.width,e=this.height,n=new Uint8Array(t*e),a=0,i=t,r=0;r<e;r++,i+=t+t)for(var o=0;o<t;o++)n[a++]=this.data[--i];this.data=n},l6.prototype.applyLUT=function(t){for(var e=0;e<this.data.length;e++)this.data[e]=t.table[this.data[e]]},l6.prototype.getAsCanvas=function(t){var e=this.getImageData(0,0,this.width,this.height),n=lJ(this.width,this.height);return n.getContext("2d").putImageData(e,0,0),l1(n,t||0)},l6.prototype.getImageData=function(t,e,n,a){for(var i=l0(n,a),r=this.offsetOfPixel(t,e),o=0,s=this.width-n,l=0;l<a;l++,r+=s)for(var c=0;c<n;c++,r++)i.data[o++]=this.data[r],i.data[o++]=this.data[r],i.data[o++]=this.data[r],i.data[o++]=255;return i},l6.prototype.pasteImageData=function(t,e,n){for(var a=0,i=this.offsetOfPixel(e,n),r=this.width-t.width,o=0;o<t.height;o++,i+=r)for(var s=0;s<t.width;s++,a+=4,i++)this.data[i]=t.data[a];return t},l6.prototype.copyPixelsFrom=function(t){t.width!=this.width||t.height!=this.height||t.bitDepth!=this.bitDepth?(this.data=t.data.slice(0),this.width=t.width,this.height=t.height,this.bitDepth=t.bitDepth):this.data.set(t.data)},l6.prototype.copyRectXOR=function(t,e){for(var n=(e=this.getBounds().clipTo(e)).getWidth(),a=new Uint8Array(n*e.getHeight()),i=0,r=this.offsetOfPixel(e.left,e.top),o=t.offsetOfPixel(e.left,e.top),s=this.width-n,l=t.width-n,c=e.top;c<e.bottom;c++,r+=s,o+=l)for(var u=0;u<n;u++,i++,r++,o++)a[i]=this.data[r]^t.data[o];return a},l6.prototype.setRectXOR=function(t,e){for(var n=(e=this.getBounds().clipTo(e)).getWidth(),a=e.getHeight(),i=this.offsetOfPixel(e.left,e.top),r=0,o=this.width-n,s=0;s<a;s++){for(var l=0;l<n;l++)this.data[i++]^=t[r++];i+=o}},l6.prototype.copyBitmapRect=function(t,e,n,a){var i=new l$(e,n,0,0);a=a.clone(),this.getBounds().clipSourceDest(a,i);var r=0|i.getWidth(),o=0|i.getHeight();if(0==i.left&&0==i.top&&r==this.width&&o==this.height&&r==t.width&&o==t.height)this.copyPixelsFrom(t);else for(var s=this.offsetOfPixel(i.left,i.top),l=this.width-r,c=t.offsetOfPixel(a.left,a.top),u=t.width-r,d=0;d<o;d++,c+=u,s+=l)for(var h=0;h<r;h++,c++,s++)this.data[s]=t.data[c]},l6.prototype.copyRegionHFlip=function(t,e){t=this.getBounds().clipTo(t);for(var n=t.top;n<t.bottom;n++)for(var a=this.offsetOfPixel(t.left,n),i=e.offsetOfPixel(t.right-1,n),r=t.left;r<t.right;r++,i-=2)this.data[a++]=e.data[i++]},l6.prototype.copyRegionVFlip=function(t,e){for(var n=(t=this.getBounds().clipTo(t)).getWidth(),a=t.top;a<t.bottom;a++)for(var i=this.offsetOfPixel(t.left,a),r=e.offsetOfPixel(t.left,t.bottom-1-(a-t.top)),o=0;o<n;o++)this.data[i++]=e.data[r++]},l6.prototype.copyPixelColumnToArray=function(t,e,n,a){for(var i=this.width,r=0,o=this.offsetOfPixel(t,e),s=0;s<n;s++)a[r]=this.data[o],o+=i,r++},l6.prototype.copyArrayToPixelColumn=function(t,e,n,a){for(var i=this.width,r=0,o=this.offsetOfPixel(t,e),s=0;s<n;s++)this.data[o]=a[r],o+=i,r++},l6.prototype.boxBlur=function(t,e,n){for(var a=(t=this.getBounds().clipTo(t)).getWidth(),i=t.getHeight(),r=Math.max(a,i),o=new this.data.constructor(r),s=new this.data.constructor(r),l=t.top;l<t.bottom;l++){for(var c=this.offsetOfPixel(t.left,l),u=0;u<a;u++)o[u]=this.data[c++];l8(o,s,a,e),c=this.offsetOfPixel(t.left,l);for(var d=0;d<a;d++)this.data[c++]=s[d]}for(var h=t.left;h<t.right;h++)this.copyPixelColumnToArray(h,t.top,i,o),l8(o,s,i,n),this.copyArrayToPixelColumn(h,t.top,i,s)},l6.prototype.offsetOfPixel=function(t,e){return e*this.width+t},l6.prototype.fillWithNoise=function(t){t=this.getBounds().clipTo(t);for(var e=this.width-t.getWidth(),n=this.offsetOfPixel(t.left,t.top),a=t.top;a<t.bottom;a++,n+=e)for(var i=t.left;i<t.right;i++,n++)this.data[n]=256*Math.random()|0},l6.prototype.invert=function(t){t=this.getBounds().clipTo(t);for(var e=this.width-t.getWidth(),n=this.offsetOfPixel(t.left,t.top),a=t.top;a<t.bottom;a++,n+=e)for(var i=t.left;i<t.right;i++,n++)this.data[n]=~this.data[n]},l6.prototype.getValueBounds=function(t,e){var n,a,i,r,o,s=t.clone();for(r=this.width-s.getWidth(),n=this.offsetOfPixel(s.left,s.top),i=s.top;i<s.bottom;i++,n+=r){for(o=!1,a=s.left;a<s.right;a++,n++)if(this.data[n]!=e){o=!0;break}if(o)break}if(s.top=i,s.top==s.bottom)return s;for(n=this.offsetOfPixel(s.right-1,s.bottom-1),i=s.bottom-1;i>=s.top;i--,n-=r){for(o=!1,a=s.right-1;a>=s.left;a--,n--)if(this.data[n]!=e){o=!0;break}if(o)break}for(s.bottom=i+1,r=this.width,a=s.left;a<s.right;a++){for(n=this.offsetOfPixel(a,s.top),o=!1,i=s.top;i<s.bottom;i++,n+=r)if(this.data[n]!=e){o=!0;break}if(o)break}for(s.left=a,a=s.right-1;a>=s.left;a--){for(n=this.offsetOfPixel(a,s.top),o=!1,i=s.top;i<s.bottom;i++,n+=r)if(this.data[n]!=e){o=!0;break}if(o)break}return s.right=a+1,s},l6.prototype.gradientHorzReplace=function(t,e,n,a){var i=255&a[0],r=255&a[1],o=this.width-t.getWidth(),s=0|this.offsetOfPixel(t.left,t.top),l=t.bottom-t.top|0;if(n<e){var c=n;n=e,e=c,c=i,i=r,r=c}for(var u=(r-i)/(n-e|0),d=Math.max(t.left-e,0),h=0;h<l;h++,s+=o){for(var f=t.left,p=0|Math.min(e,t.right);f<p;f++,s++)this.data[s]=i;var v=i+u*d;for(p=0|Math.min(n,t.right);f<p;f++,s++)this.data[s]=v,v+=u;for(;f<t.right;f++,s++)this.data[s]=r}},l6.prototype.gradientVertReplace=function(t,e,n,a){var i=255&a[0],r=255&a[1],o=this.width-t.getWidth(),s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0;if(n<e){var c=n;n=e,e=c,c=i,i=r,r=c}for(var u=t.top,d=0|Math.min(t.bottom,e);u<d;u++,s+=o)for(var h=0;h<l;h++,s++)this.data[s]=i;for(var f=(r-i)/(n-e|0),p=i+f*Math.max(u-e,0),v=0|Math.min(t.bottom,n);u<v;u++,s+=o){for(var m=0;m<l;m++,s++)this.data[s]=p;p+=f}for(;u<t.bottom;u++,s+=o)for(var g=0;g<l;g++,s++)this.data[s]=r},l6.prototype.gradientReplace=function(t,e,n,a,i,r){for(var o=this.width-t.getWidth(),s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0,c=255&r[0],u=255&r[1],d=i-n+(a-e)*(a-e)/(i-n),h=a-e+(i-n)*(i-n)/(a-e),f=1/h,p=t.top;p<t.bottom;p++,s+=o)for(var v=(t.left-e)/h+(p-n)/d,m=0;m<l;m++,s++){var g=Math.min(Math.max(v,0),1),y=1-g;this.data[s]=c*y+u*g,v+=f}},l6.prototype.gradientAlpha=function(t,e,n,a,i,r){for(var o=this.width-t.getWidth(),s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0,c={c:255&r[0],a:r[0]>>24&255},u={c:255&r[1],a:r[1]>>24&255},d=i-n+(a-e)*(a-e)/(i-n),h=a-e+(i-n)*(i-n)/(a-e),f=1/h,p=t.top;p<t.bottom;p++,s+=o)for(var v=(t.left-e)/h+(p-n)/d,m=0;m<l;m++,s++){var g=Math.min(Math.max(v,0),1),y=1-g,b=c.c*y+u.c*g,w=c.a*y+u.a*g,_=255-w;this.data[s]=(b*w+this.data[s]*_)/255|0,v+=f}},l6.prototype.gradient=function(t,e,n,a,i,r,o){t=this.getBounds().clipTo(t),(e!=a||n!=i)&&(o||r[0]>>>24==255&&r[1]>>>24==255?e==a?this.gradientVertReplace(t,n,i,r):n==i?this.gradientHorzReplace(t,e,a,r):this.gradientReplace(t,e,n,a,i,r):this.gradientAlpha(t,e,n,a,i,r))},l6.prototype.equals=function(t){if(this.width!=t.width||this.height!=t.height)return!1;for(var e=0;e<this.data.length;e++)if(this.data[e]!=t.data[e])return!1;return!0};var l9=Array(256),ct=Array(256);function ce(t){this.name=t||"",this.parent=null,this.lockAlpha=!1,this.alpha=100,this.visible=!0,this.blendMode=l7.LM_NORMAL,this.mask=null,this.maskLinked=!0,this.maskVisible=!0,this.maskThumbnail=null,this.useLegacyMultiply=!1}function cn(t,e,n){ce.call(this,n),t>0&&e>0?this.image=new l5(t,e):this.image=null,this.clip=!1,this.imageThumbnail=null}function ca(t,e,n){n?(this.isGroup=n instanceof l3,this.image=n.image,this.mask=n.getEffectiveMask(),this.layer=n,this.blendMode=n.blendMode,this.alpha=n.alpha,this.visible=n.visible):(this.isGroup=!0,this.image=null,this.mask=null,this.layer=null,this.blendMode=l7.LM_PASSTHROUGH,this.alpha=100,this.visible=!0),this.dirtyRect=new l$(0,0,t,e),this.layers=[],this.parent=null,this.clip=!1}function ci(t,e,n,a){var i,r=[],o=new Map;function s(){return r.length>0?r.pop():new l5(e,n)}function l(t){if(0==t.layers.length)return null;if(1==t.layers.length&&(null==t.mask||null==t.layers[0].mask)){var e=t.layers[0];return e.alpha=Math.round(t.alpha*e.alpha/100),t.blendMode!=l7.LM_PASSTHROUGH&&(e.blendMode=t.blendMode),e.mask=t.mask||e.mask,t.layer&&o.set(t.layer,e),e}return t.blendMode==l7.LM_PASSTHROUGH&&100==t.alpha&&null==t.mask?t.layers:(t.image=s(),t)}function c(t){var a=new ca(e,n,t);return o.set(t,a),a}function u(t,e){t&&(t.dirtyRect.union(e),u(t.parent,e))}this.invalidateLayerRect=function(t,e){u(o.get(t),e)},this.buildTree=function(){if(!i){if(i=function t(a){if(0==a.getEffectiveAlpha())return null;for(var i=c(a),r=0;r<a.layers.length;r++){var o=a.layers[r],s=a.layers[r+1];if(o instanceof cn&&s&&s.clip){var u=new ca(e,n,null),d=void 0;for(u.blendMode=o.blendMode,u.alpha=100,u.clip=!0,u.addChildren(c(o)),d=r+1;d<a.layers.length&&a.layers[d].clip;d++)a.layers[d].getEffectiveAlpha()>0&&u.addChildren(c(a.layers[d]));o.getEffectiveAlpha()>0&&i.addChildren(l(u)),r=d-1}else o instanceof l3?i.addChildren(t(o)):o.getEffectiveAlpha()>0&&i.addChildren(c(o))}return l(i)}(t)){if(Array.isArray(i)||a&&(i.alpha<100||i.mask)){var o=i;(i=new ca(e,n)).blendMode=Array.isArray(o)?l7.LM_NORMAL:o.blendMode,i.alpha=100,i.image=s(),i.addChildren(o)}}else(i=new ca(e,n,{image:s(),blendMode:l7.LM_NORMAL,alpha:100,getEffectiveMask:function(){return null},visible:!0})).image.clearAll(0);r=[]}},this.resetTree=function(){i&&(function t(e){if(e.isGroup){e.image&&r.push(e.image);var n=!0,a=!1,i=void 0;try{for(var o,s=e.layers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;t(l)}}catch(t){a=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}}}(i),i=null,o.clear())},this.layerPropertyChanged=function(t,a){var i=o.get(t);i&&i.visible==t.visible&&i.alpha==t.alpha&&null==i.mask==(null==t.getEffectiveMask())&&i.blendMode==l7.LM_PASSTHROUGH==(t.blendMode==l7.LM_PASSTHROUGH)&&"clip"!==a?(i.blendMode=t.blendMode,u(i,new l$(0,0,e,n))):this.resetTree()},this.blendTree=function(){return function t(e){if(!e||!e.isGroup)return e;var n,a,i=e.dirtyRect,r=!0,o=!0;if(e.blendMode==l7.LM_PASSTHROUGH&&e.parent&&i.union(e.parent.dirtyRect),i.isEmpty())return e;e.blendMode==l7.LM_PASSTHROUGH&&e.parent&&(r=!1,n=e.image,a=e.parent.image,i.getWidth()==n.width&&i.getHeight()==n.height?n.copyPixelsFrom(a):l7.replaceOntoFusionWithOpaqueLayer(n,a,100,i));for(var s=0;s<e.layers.length;s++){var l=t(e.layers[s]);r?(function(t,e,n,a,i){if(100!=n||i||a.getWidth()!=t.width||a.getHeight()!=t.height){var r="replaceOntoFusionWith";100==n?r+="OpaqueLayer":r+="TransparentLayer",i&&(r+="Masked"),l7[r](t,e,n,a,i)}else t.copyPixelsFrom(e)}(e.image,l.image,l.alpha,i,l.mask),r=!1):(o=o&&e.image.hasAlphaInRect(i),l7.fuseImageOntoImage(e.image,o,l.image,l.alpha,l.blendMode,i,l.mask))}if(e.clip){var c=e.layers[0];c.alpha<100?c.mask?l7.replaceAlphaOntoFusionWithTransparentLayerMasked(e.image,c.image,c.alpha,i,c.mask):l7.replaceAlphaOntoFusionWithTransparentLayer(e.image,c.image,c.alpha,i):c.mask?l7.replaceAlphaOntoFusionWithOpaqueLayerMasked(e.image,c.image,100,i,c.mask):l7.replaceAlphaOntoFusionWithOpaqueLayer(e.image,c.image,100,i)}return e.dirtyRect.makeEmpty(),e}(i)}}l7.multiplyOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0;u&&(d=t.data[s],t.data[s]=d-((255^e.data[s])*d*u/65025|0),d=t.data[s+1],t.data[s+1]=d-((255^e.data[s+1])*d*u/65025|0),d=t.data[s+2],t.data[s+2]=d-((255^e.data[s+2])*d*u/65025|0))}},l7.multiplyOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0;u&&(d=t.data[s],t.data[s]=d-((255^e.data[s])*d*u/65025|0),d=t.data[s+1],t.data[s+1]=d-((255^e.data[s+1])*d*u/65025|0),d=t.data[s+2],t.data[s+2]=d-((255^e.data[s+2])*d*u/65025|0))}},l7.multiplyOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(h*m+f*g+(h*f*v/255|0))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*m+f*g+(h*f*v/255|0))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*m+f*g+(h*f*v/255|0))/p|0,t.data[s+3]=p}}},l7.multiplyOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(h*m+f*g+(h*f*v/255|0))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*m+f*g+(h*f*v/255|0))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*m+f*g+(h*f*v/255|0))/p|0,t.data[s+3]=p}}},l7.multiplyOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0;f&&(p=t.data[l],t.data[l]=p-((255^e.data[l])*p*f/65025|0),p=t.data[l+1],t.data[l+1]=p-((255^e.data[l+1])*p*f/65025|0),p=t.data[l+2],t.data[l+2]=p-((255^e.data[l+2])*p*f/65025|0))}},l7.multiplyOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0;f&&(p=t.data[l],t.data[l]=p-((255^e.data[l])*p*f/65025|0),p=t.data[l+1],t.data[l+1]=p-((255^e.data[l+1])*p*f/65025|0),p=t.data[l+2],t.data[l+2]=p-((255^e.data[l+2])*p*f/65025|0))}},l7.multiplyOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(v*b+m*w+(v*m*y/255|0))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(v*b+m*w+(v*m*y/255|0))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(v*b+m*w+(v*m*y/255|0))/g|0,t.data[l+3]=g}}},l7.multiplyOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(v*b+m*w+(v*m*y/255|0))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(v*b+m*w+(v*m*y/255|0))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(v*b+m*w+(v*m*y/255|0))/g|0,t.data[l+3]=g}}},l7.multiply2OntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0;u&&(d=t.data[s],t.data[s]=d-Math.ceil((255^e.data[s])*d*u/65025),d=t.data[s+1],t.data[s+1]=d-Math.ceil((255^e.data[s+1])*d*u/65025),d=t.data[s+2],t.data[s+2]=d-Math.ceil((255^e.data[s+2])*d*u/65025))}},l7.multiply2OntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0;u&&(d=t.data[s],t.data[s]=d-Math.ceil((255^e.data[s])*d*u/65025),d=t.data[s+1],t.data[s+1]=d-Math.ceil((255^e.data[s+1])*d*u/65025),d=t.data[s+2],t.data[s+2]=d-Math.ceil((255^e.data[s+2])*d*u/65025))}},l7.multiply2OntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(h*m+f*g+(h*f*v/255|0))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*m+f*g+(h*f*v/255|0))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*m+f*g+(h*f*v/255|0))/p|0,t.data[s+3]=p}}},l7.multiply2OntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(h*m+f*g+(h*f*v/255|0))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*m+f*g+(h*f*v/255|0))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*m+f*g+(h*f*v/255|0))/p|0,t.data[s+3]=p}}},l7.multiply2OntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0;f&&(p=t.data[l],t.data[l]=p-Math.ceil((255^e.data[l])*p*f/65025),p=t.data[l+1],t.data[l+1]=p-Math.ceil((255^e.data[l+1])*p*f/65025),p=t.data[l+2],t.data[l+2]=p-Math.ceil((255^e.data[l+2])*p*f/65025))}},l7.multiply2OntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0;f&&(p=t.data[l],t.data[l]=p-Math.ceil((255^e.data[l])*p*f/65025),p=t.data[l+1],t.data[l+1]=p-Math.ceil((255^e.data[l+1])*p*f/65025),p=t.data[l+2],t.data[l+2]=p-Math.ceil((255^e.data[l+2])*p*f/65025))}},l7.multiply2OntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(v*b+m*w+(v*m*y/255|0))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(v*b+m*w+(v*m*y/255|0))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(v*b+m*w+(v*m*y/255|0))/g|0,t.data[l+3]=g}}},l7.multiply2OntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(v*b+m*w+(v*m*y/255|0))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(v*b+m*w+(v*m*y/255|0))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(v*b+m*w+(v*m*y/255|0))/g|0,t.data[l+3]=g}}},l7.normalOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0;if(u){if(255==u)t.data[s]=e.data[s],t.data[s+1]=e.data[s+1],t.data[s+2]=e.data[s+2];else{var h=255-u;d=e.data[s],t.data[s]=(d*u+t.data[s]*h)/255|0,d=e.data[s+1],t.data[s+1]=(d*u+t.data[s+1]*h)/255|0,d=e.data[s+2],t.data[s+2]=(d*u+t.data[s+2]*h)/255|0}}}},l7.normalOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0;if(u){var h=255-u;d=e.data[s],t.data[s]=(d*u+t.data[s]*h)/255|0,d=e.data[s+1],t.data[s+1]=(d*u+t.data[s+1]*h)/255|0,d=e.data[s+2],t.data[s+2]=(d*u+t.data[s+2]*h)/255|0}}},l7.normalOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0;if(u){var h=u+(d=t.data[s+3])-(u*d/255|0)|0,f=255*u/h|0,p=255-f;t.data[s]=(e.data[s]*f+t.data[s]*p)/255|0,t.data[s+1]=(e.data[s+1]*f+t.data[s+1]*p)/255|0,t.data[s+2]=(e.data[s+2]*f+t.data[s+2]*p)/255|0,t.data[s+3]=h}}},l7.normalOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0;if(u){var h=u+(d=t.data[s+3])-(u*d/255|0)|0,f=255*u/h|0,p=255-f;t.data[s]=(e.data[s]*f+t.data[s]*p)/255|0,t.data[s+1]=(e.data[s+1]*f+t.data[s+1]*p)/255|0,t.data[s+2]=(e.data[s+2]*f+t.data[s+2]*p)/255|0,t.data[s+3]=h}}},l7.normalOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0;if(f){if(255==f)t.data[l]=e.data[l],t.data[l+1]=e.data[l+1],t.data[l+2]=e.data[l+2];else{var v=255-f;p=e.data[l],t.data[l]=(p*f+t.data[l]*v)/255|0,p=e.data[l+1],t.data[l+1]=(p*f+t.data[l+1]*v)/255|0,p=e.data[l+2],t.data[l+2]=(p*f+t.data[l+2]*v)/255|0}}}},l7.normalOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0;if(f){var v=255-f;p=e.data[l],t.data[l]=(p*f+t.data[l]*v)/255|0,p=e.data[l+1],t.data[l+1]=(p*f+t.data[l+1]*v)/255|0,p=e.data[l+2],t.data[l+2]=(p*f+t.data[l+2]*v)/255|0}}},l7.normalOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0;if(f){var v=f+(p=t.data[l+3])-(f*p/255|0)|0,m=255*f/v|0,g=255-m;t.data[l]=(e.data[l]*m+t.data[l]*g)/255|0,t.data[l+1]=(e.data[l+1]*m+t.data[l+1]*g)/255|0,t.data[l+2]=(e.data[l+2]*m+t.data[l+2]*g)/255|0,t.data[l+3]=v}}},l7.normalOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0;if(f){var v=f+(p=t.data[l+3])-(f*p/255|0)|0,m=255*f/v|0,g=255-m;t.data[l]=(e.data[l]*m+t.data[l]*g)/255|0,t.data[l+1]=(e.data[l+1]*m+t.data[l+1]*g)/255|0,t.data[l+2]=(e.data[l+2]*m+t.data[l+2]*g)/255|0,t.data[l+3]=v}}},l7.addOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3];u&&(t.data[s]=t.data[s]+u*e.data[s]/255|0,t.data[s+1]=t.data[s+1]+u*e.data[s+1]/255|0,t.data[s+2]=t.data[s+2]+u*e.data[s+2]/255|0)}},l7.addOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0;u&&(t.data[s]=t.data[s]+u*e.data[s]/255|0,t.data[s+1]=t.data[s+1]+u*e.data[s+1]/255|0,t.data[s+2]=t.data[s+2]+u*e.data[s+2]/255|0)}},l7.addOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0;if(u){var h=u+(d=t.data[s+3])-(u*d/255|0)|0;t.data[s]=(d*t.data[s]+u*e.data[s])/h|0,t.data[s+1]=(d*t.data[s+1]+u*e.data[s+1])/h|0,t.data[s+2]=(d*t.data[s+2]+u*e.data[s+2])/h|0,t.data[s+3]=h}}},l7.addOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0;if(u){var h=u+(d=t.data[s+3])-(u*d/255|0)|0;t.data[s]=(d*t.data[s]+u*e.data[s])/h|0,t.data[s+1]=(d*t.data[s+1]+u*e.data[s+1])/h|0,t.data[s+2]=(d*t.data[s+2]+u*e.data[s+2])/h|0,t.data[s+3]=h}}},l7.addOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0;f&&(t.data[l]=t.data[l]+f*e.data[l]/255|0,t.data[l+1]=t.data[l+1]+f*e.data[l+1]/255|0,t.data[l+2]=t.data[l+2]+f*e.data[l+2]/255|0)}},l7.addOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0;f&&(t.data[l]=t.data[l]+f*e.data[l]/255|0,t.data[l+1]=t.data[l+1]+f*e.data[l+1]/255|0,t.data[l+2]=t.data[l+2]+f*e.data[l+2]/255|0)}},l7.addOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0;if(f){var v=f+(p=t.data[l+3])-(f*p/255|0)|0;t.data[l]=(p*t.data[l]+f*e.data[l])/v|0,t.data[l+1]=(p*t.data[l+1]+f*e.data[l+1])/v|0,t.data[l+2]=(p*t.data[l+2]+f*e.data[l+2])/v|0,t.data[l+3]=v}}},l7.addOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0;if(f){var v=f+(p=t.data[l+3])-(f*p/255|0)|0;t.data[l]=(p*t.data[l]+f*e.data[l])/v|0,t.data[l+1]=(p*t.data[l+1]+f*e.data[l+1])/v|0,t.data[l+2]=(p*t.data[l+2]+f*e.data[l+2])/v|0,t.data[l+3]=v}}},l7.subtractOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3];u&&(t.data[s]=t.data[s]+u*e.data[s]/255-u|0,t.data[s+1]=t.data[s+1]+u*e.data[s+1]/255-u|0,t.data[s+2]=t.data[s+2]+u*e.data[s+2]/255-u|0)}},l7.subtractOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0;u&&(t.data[s]=t.data[s]+u*e.data[s]/255-u|0,t.data[s+1]=t.data[s+1]+u*e.data[s+1]/255-u|0,t.data[s+2]=t.data[s+2]+u*e.data[s+2]/255-u|0)}},l7.subtractOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0;if(u){var h=u+(d=t.data[s+3])-(u*d/255|0)|0,f=u*d;t.data[s]=(d*t.data[s]+u*e.data[s]-f)/h|0,t.data[s+1]=(d*t.data[s+1]+u*e.data[s+1]-f)/h|0,t.data[s+2]=(d*t.data[s+2]+u*e.data[s+2]-f)/h|0,t.data[s+3]=h}}},l7.subtractOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0;if(u){var h=u+(d=t.data[s+3])-(u*d/255|0)|0,f=u*d;t.data[s]=(d*t.data[s]+u*e.data[s]-f)/h|0,t.data[s+1]=(d*t.data[s+1]+u*e.data[s+1]-f)/h|0,t.data[s+2]=(d*t.data[s+2]+u*e.data[s+2]-f)/h|0,t.data[s+3]=h}}},l7.subtractOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0;f&&(t.data[l]=t.data[l]+f*e.data[l]/255-f|0,t.data[l+1]=t.data[l+1]+f*e.data[l+1]/255-f|0,t.data[l+2]=t.data[l+2]+f*e.data[l+2]/255-f|0)}},l7.subtractOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0;f&&(t.data[l]=t.data[l]+f*e.data[l]/255-f|0,t.data[l+1]=t.data[l+1]+f*e.data[l+1]/255-f|0,t.data[l+2]=t.data[l+2]+f*e.data[l+2]/255-f|0)}},l7.subtractOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0;if(f){var v=f+(p=t.data[l+3])-(f*p/255|0)|0,m=f*p;t.data[l]=(p*t.data[l]+f*e.data[l]-m)/v|0,t.data[l+1]=(p*t.data[l+1]+f*e.data[l+1]-m)/v|0,t.data[l+2]=(p*t.data[l+2]+f*e.data[l+2]-m)/v|0,t.data[l+3]=v}}},l7.subtractOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0;if(f){var v=f+(p=t.data[l+3])-(f*p/255|0)|0,m=f*p;t.data[l]=(p*t.data[l]+f*e.data[l]-m)/v|0,t.data[l+1]=(p*t.data[l+1]+f*e.data[l+1]-m)/v|0,t.data[l+2]=(p*t.data[l+2]+f*e.data[l+2]-m)/v|0,t.data[l+3]=v}}},l7.screenOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0;if(u){var h=255^u;d=t.data[s],t.data[s]=255^((255^d)*h+(255^e.data[s])*(255^d)*u/255)/255,d=t.data[s+1],t.data[s+1]=255^((255^d)*h+(255^e.data[s+1])*(255^d)*u/255)/255,d=t.data[s+2],t.data[s+2]=255^((255^d)*h+(255^e.data[s+2])*(255^d)*u/255)/255}}},l7.screenOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0;if(u){var h=255^u;d=t.data[s],t.data[s]=255^((255^d)*h+(255^e.data[s])*(255^d)*u/255)/255,d=t.data[s+1],t.data[s+1]=255^((255^d)*h+(255^e.data[s+1])*(255^d)*u/255)/255,d=t.data[s+2],t.data[s+2]=255^((255^d)*h+(255^e.data[s+2])*(255^d)*u/255)/255}}},l7.screenOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=255^((255^h)*m+(255^f)*g+(255^h)*(255^f)*v/255)/p,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=255^((255^h)*m+(255^f)*g+(255^h)*(255^f)*v/255)/p,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=255^((255^h)*m+(255^f)*g+(255^h)*(255^f)*v/255)/p,t.data[s+3]=p}}},l7.screenOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=255^((255^h)*m+(255^f)*g+(255^h)*(255^f)*v/255)/p,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=255^((255^h)*m+(255^f)*g+(255^h)*(255^f)*v/255)/p,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=255^((255^h)*m+(255^f)*g+(255^h)*(255^f)*v/255)/p,t.data[s+3]=p}}},l7.screenOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0;if(f){var v=255^f;p=t.data[l],t.data[l]=255^((255^p)*v+(255^e.data[l])*(255^p)*f/255)/255,p=t.data[l+1],t.data[l+1]=255^((255^p)*v+(255^e.data[l+1])*(255^p)*f/255)/255,p=t.data[l+2],t.data[l+2]=255^((255^p)*v+(255^e.data[l+2])*(255^p)*f/255)/255}}},l7.screenOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0;if(f){var v=255^f;p=t.data[l],t.data[l]=255^((255^p)*v+(255^e.data[l])*(255^p)*f/255)/255,p=t.data[l+1],t.data[l+1]=255^((255^p)*v+(255^e.data[l+1])*(255^p)*f/255)/255,p=t.data[l+2],t.data[l+2]=255^((255^p)*v+(255^e.data[l+2])*(255^p)*f/255)/255}}},l7.screenOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=255^((255^v)*b+(255^m)*w+(255^v)*(255^m)*y/255)/g,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=255^((255^v)*b+(255^m)*w+(255^v)*(255^m)*y/255)/g,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=255^((255^v)*b+(255^m)*w+(255^v)*(255^m)*y/255)/g,t.data[l+3]=g}}},l7.screenOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=255^((255^v)*b+(255^m)*w+(255^v)*(255^m)*y/255)/g,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=255^((255^v)*b+(255^m)*w+(255^v)*(255^m)*y/255)/g,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=255^((255^v)*b+(255^m)*w+(255^v)*(255^m)*y/255)/g,t.data[l+3]=g}}},l7.lightenOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=h>=d?h:(h*f+d*u)/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=h>=d?h:(h*f+d*u)/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=h>=d?h:(h*f+d*u)/255|0}}},l7.lightenOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=h>=d?h:(h*f+d*u)/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=h>=d?h:(h*f+d*u)/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=h>=d?h:(h*f+d*u)/255|0}}},l7.lightenOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=d*(255^u)/p|0,m=255^v,g=u*(255^d)/p|0,y=255^g;h=e.data[s],f=t.data[s],t.data[s]=(f>=h?h*g+f*y:f*v+h*m)/255|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(f>=h?h*g+f*y:f*v+h*m)/255|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(f>=h?h*g+f*y:f*v+h*m)/255|0,t.data[s+3]=p}}},l7.lightenOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=d*(255^u)/p|0,m=255^v,g=u*(255^d)/p|0,y=255^g;h=e.data[s],f=t.data[s],t.data[s]=(f>=h?h*g+f*y:f*v+h*m)/255|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(f>=h?h*g+f*y:f*v+h*m)/255|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(f>=h?h*g+f*y:f*v+h*m)/255|0,t.data[s+3]=p}}},l7.lightenOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=v>=p?v:(v*m+p*f)/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=v>=p?v:(v*m+p*f)/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=v>=p?v:(v*m+p*f)/255|0}}},l7.lightenOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=v>=p?v:(v*m+p*f)/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=v>=p?v:(v*m+p*f)/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=v>=p?v:(v*m+p*f)/255|0}}},l7.lightenOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=p*(255^f)/g|0,b=255^y,w=f*(255^p)/g|0,_=255^w;v=e.data[l],m=t.data[l],t.data[l]=(m>=v?v*w+m*_:m*y+v*b)/255|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(m>=v?v*w+m*_:m*y+v*b)/255|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(m>=v?v*w+m*_:m*y+v*b)/255|0,t.data[l+3]=g}}},l7.lightenOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=p*(255^f)/g|0,b=255^y,w=f*(255^p)/g|0,_=255^w;v=e.data[l],m=t.data[l],t.data[l]=(m>=v?v*w+m*_:m*y+v*b)/255|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(m>=v?v*w+m*_:m*y+v*b)/255|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(m>=v?v*w+m*_:m*y+v*b)/255|0,t.data[l+3]=g}}},l7.darkenOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=h>=d?(h*f+d*u)/255|0:h,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=h>=d?(h*f+d*u)/255|0:h,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=h>=d?(h*f+d*u)/255|0:h}}},l7.darkenOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=h>=d?(h*f+d*u)/255|0:h,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=h>=d?(h*f+d*u)/255|0:h,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=h>=d?(h*f+d*u)/255|0:h}}},l7.darkenOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*(255^d)/p|0,m=255^v,g=d*(255^u)/p|0,y=255^g;h=e.data[s],f=t.data[s],t.data[s]=(f>=h?f*g+h*y:h*v+f*m)/255|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(f>=h?f*g+h*y:h*v+f*m)/255|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(f>=h?f*g+h*y:h*v+f*m)/255|0,t.data[s+3]=p}}},l7.darkenOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*(255^d)/p|0,m=255^v,g=d*(255^u)/p|0,y=255^g;h=e.data[s],f=t.data[s],t.data[s]=(f>=h?f*g+h*y:h*v+f*m)/255|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(f>=h?f*g+h*y:h*v+f*m)/255|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(f>=h?f*g+h*y:h*v+f*m)/255|0,t.data[s+3]=p}}},l7.darkenOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=v>=p?(v*m+p*f)/255|0:v,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=v>=p?(v*m+p*f)/255|0:v,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=v>=p?(v*m+p*f)/255|0:v}}},l7.darkenOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=v>=p?(v*m+p*f)/255|0:v,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=v>=p?(v*m+p*f)/255|0:v,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=v>=p?(v*m+p*f)/255|0:v}}},l7.darkenOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*(255^p)/g|0,b=255^y,w=p*(255^f)/g|0,_=255^w;v=e.data[l],m=t.data[l],t.data[l]=(m>=v?m*w+v*_:v*y+m*b)/255|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(m>=v?m*w+v*_:v*y+m*b)/255|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(m>=v?m*w+v*_:v*y+m*b)/255|0,t.data[l+3]=g}}},l7.darkenOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*(255^p)/g|0,b=255^y,w=p*(255^f)/g|0,_=255^w;v=e.data[l],m=t.data[l],t.data[l]=(m>=v?m*w+v*_:v*y+m*b)/255|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(m>=v?m*w+v*_:v*y+m*b)/255|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(m>=v?m*w+v*_:v*y+m*b)/255|0,t.data[l+3]=g}}},l7.dodgeOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(h*f+u*(255==d?255:Math.min(255,255*h/(255^d)|0)))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(h*f+u*(255==d?255:Math.min(255,255*h/(255^d)|0)))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(h*f+u*(255==d?255:Math.min(255,255*h/(255^d)|0)))/255|0}}},l7.dodgeOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(h*f+u*(255==d?255:Math.min(255,255*h/(255^d)|0)))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(h*f+u*(255==d?255:Math.min(255,255*h/(255^d)|0)))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(h*f+u*(255==d?255:Math.min(255,255*h/(255^d)|0)))/255|0}}},l7.dodgeOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(h*m+f*g+v*(255==h?255:Math.min(255,255*f/(255^h)|0)))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*m+f*g+v*(255==h?255:Math.min(255,255*f/(255^h)|0)))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*m+f*g+v*(255==h?255:Math.min(255,255*f/(255^h)|0)))/p|0,t.data[s+3]=p}}},l7.dodgeOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(h*m+f*g+v*(255==h?255:Math.min(255,255*f/(255^h)|0)))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*m+f*g+v*(255==h?255:Math.min(255,255*f/(255^h)|0)))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*m+f*g+v*(255==h?255:Math.min(255,255*f/(255^h)|0)))/p|0,t.data[s+3]=p}}},l7.dodgeOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(v*m+f*(255==p?255:Math.min(255,255*v/(255^p)|0)))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(v*m+f*(255==p?255:Math.min(255,255*v/(255^p)|0)))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(v*m+f*(255==p?255:Math.min(255,255*v/(255^p)|0)))/255|0}}},l7.dodgeOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(v*m+f*(255==p?255:Math.min(255,255*v/(255^p)|0)))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(v*m+f*(255==p?255:Math.min(255,255*v/(255^p)|0)))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(v*m+f*(255==p?255:Math.min(255,255*v/(255^p)|0)))/255|0}}},l7.dodgeOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(v*b+m*w+y*(255==v?255:Math.min(255,255*m/(255^v)|0)))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(v*b+m*w+y*(255==v?255:Math.min(255,255*m/(255^v)|0)))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(v*b+m*w+y*(255==v?255:Math.min(255,255*m/(255^v)|0)))/g|0,t.data[l+3]=g}}},l7.dodgeOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(v*b+m*w+y*(255==v?255:Math.min(255,255*m/(255^v)|0)))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(v*b+m*w+y*(255==v?255:Math.min(255,255*m/(255^v)|0)))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(v*b+m*w+y*(255==v?255:Math.min(255,255*m/(255^v)|0)))/g|0,t.data[l+3]=g}}},l7.burnOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(h*f+u*(0==d?0:255^Math.min(255,255*(255^h)/d)))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(h*f+u*(0==d?0:255^Math.min(255,255*(255^h)/d)))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(h*f+u*(0==d?0:255^Math.min(255,255*(255^h)/d)))/255|0}}},l7.burnOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(h*f+u*(0==d?0:255^Math.min(255,255*(255^h)/d)))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(h*f+u*(0==d?0:255^Math.min(255,255*(255^h)/d)))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(h*f+u*(0==d?0:255^Math.min(255,255*(255^h)/d)))/255|0}}},l7.burnOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(h*m+f*g+v*(0==h?0:255^Math.min(255,255*(255^f)/h)))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*m+f*g+v*(0==h?0:255^Math.min(255,255*(255^f)/h)))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*m+f*g+v*(0==h?0:255^Math.min(255,255*(255^f)/h)))/p|0,t.data[s+3]=p}}},l7.burnOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(h*m+f*g+v*(0==h?0:255^Math.min(255,255*(255^f)/h)))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*m+f*g+v*(0==h?0:255^Math.min(255,255*(255^f)/h)))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*m+f*g+v*(0==h?0:255^Math.min(255,255*(255^f)/h)))/p|0,t.data[s+3]=p}}},l7.burnOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(v*m+f*(0==p?0:255^Math.min(255,255*(255^v)/p)))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(v*m+f*(0==p?0:255^Math.min(255,255*(255^v)/p)))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(v*m+f*(0==p?0:255^Math.min(255,255*(255^v)/p)))/255|0}}},l7.burnOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(v*m+f*(0==p?0:255^Math.min(255,255*(255^v)/p)))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(v*m+f*(0==p?0:255^Math.min(255,255*(255^v)/p)))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(v*m+f*(0==p?0:255^Math.min(255,255*(255^v)/p)))/255|0}}},l7.burnOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(v*b+m*w+y*(0==v?0:255^Math.min(255,255*(255^m)/v)))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(v*b+m*w+y*(0==v?0:255^Math.min(255,255*(255^m)/v)))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(v*b+m*w+y*(0==v?0:255^Math.min(255,255*(255^m)/v)))/g|0,t.data[l+3]=g}}},l7.burnOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(v*b+m*w+y*(0==v?0:255^Math.min(255,255*(255^m)/v)))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(v*b+m*w+y*(0==v?0:255^Math.min(255,255*(255^m)/v)))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(v*b+m*w+y*(0==v?0:255^Math.min(255,255*(255^m)/v)))/g|0,t.data[l+3]=g}}},l7.overlayOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(f*h+(h<=127?2*u*d*h/255:u*(2*(255^d)*(255^h)/255^255)))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*h+(h<=127?2*u*d*h/255:u*(2*(255^d)*(255^h)/255^255)))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*h+(h<=127?2*u*d*h/255:u*(2*(255^d)*(255^h)/255^255)))/255|0}}},l7.overlayOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(f*h+(h<=127?2*u*d*h/255:u*(2*(255^d)*(255^h)/255^255)))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*h+(h<=127?2*u*d*h/255:u*(2*(255^d)*(255^h)/255^255)))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*h+(h<=127?2*u*d*h/255:u*(2*(255^d)*(255^h)/255^255)))/255|0}}},l7.overlayOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(m*h+g*f+(f<=127?2*v*h*f/255:v*(2*(255^h)*(255^f)/255^255)))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(m*h+g*f+(f<=127?2*v*h*f/255:v*(2*(255^h)*(255^f)/255^255)))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(m*h+g*f+(f<=127?2*v*h*f/255:v*(2*(255^h)*(255^f)/255^255)))/p|0,t.data[s+3]=p}}},l7.overlayOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(m*h+g*f+(f<=127?2*v*h*f/255:v*(2*(255^h)*(255^f)/255^255)))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(m*h+g*f+(f<=127?2*v*h*f/255:v*(2*(255^h)*(255^f)/255^255)))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(m*h+g*f+(f<=127?2*v*h*f/255:v*(2*(255^h)*(255^f)/255^255)))/p|0,t.data[s+3]=p}}},l7.overlayOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(m*v+(v<=127?2*f*p*v/255:f*(2*(255^p)*(255^v)/255^255)))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(m*v+(v<=127?2*f*p*v/255:f*(2*(255^p)*(255^v)/255^255)))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(m*v+(v<=127?2*f*p*v/255:f*(2*(255^p)*(255^v)/255^255)))/255|0}}},l7.overlayOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(m*v+(v<=127?2*f*p*v/255:f*(2*(255^p)*(255^v)/255^255)))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(m*v+(v<=127?2*f*p*v/255:f*(2*(255^p)*(255^v)/255^255)))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(m*v+(v<=127?2*f*p*v/255:f*(2*(255^p)*(255^v)/255^255)))/255|0}}},l7.overlayOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(b*v+w*m+(m<=127?2*y*v*m/255:y*(2*(255^v)*(255^m)/255^255)))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(b*v+w*m+(m<=127?2*y*v*m/255:y*(2*(255^v)*(255^m)/255^255)))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(b*v+w*m+(m<=127?2*y*v*m/255:y*(2*(255^v)*(255^m)/255^255)))/g|0,t.data[l+3]=g}}},l7.overlayOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(b*v+w*m+(m<=127?2*y*v*m/255:y*(2*(255^v)*(255^m)/255^255)))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(b*v+w*m+(m<=127?2*y*v*m/255:y*(2*(255^v)*(255^m)/255^255)))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(b*v+w*m+(m<=127?2*y*v*m/255:y*(2*(255^v)*(255^m)/255^255)))/g|0,t.data[l+3]=g}}},l7.hardLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(f*h+(d<=127?2*u*d*h/255:u*(2*(255^d)*(255^h)/255^255)))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*h+(d<=127?2*u*d*h/255:u*(2*(255^d)*(255^h)/255^255)))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*h+(d<=127?2*u*d*h/255:u*(2*(255^d)*(255^h)/255^255)))/255|0}}},l7.hardLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(f*h+(d<=127?2*u*d*h/255:u*(2*(255^d)*(255^h)/255^255)))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*h+(d<=127?2*u*d*h/255:u*(2*(255^d)*(255^h)/255^255)))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*h+(d<=127?2*u*d*h/255:u*(2*(255^d)*(255^h)/255^255)))/255|0}}},l7.hardLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(m*h+g*f+(h<=127?2*v*h*f/255:v*(2*(255^h)*(255^f)/255^255)))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(m*h+g*f+(h<=127?2*v*h*f/255:v*(2*(255^h)*(255^f)/255^255)))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(m*h+g*f+(h<=127?2*v*h*f/255:v*(2*(255^h)*(255^f)/255^255)))/p|0,t.data[s+3]=p}}},l7.hardLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(m*h+g*f+(h<=127?2*v*h*f/255:v*(2*(255^h)*(255^f)/255^255)))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(m*h+g*f+(h<=127?2*v*h*f/255:v*(2*(255^h)*(255^f)/255^255)))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(m*h+g*f+(h<=127?2*v*h*f/255:v*(2*(255^h)*(255^f)/255^255)))/p|0,t.data[s+3]=p}}},l7.hardLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(m*v+(p<=127?2*f*p*v/255:f*(2*(255^p)*(255^v)/255^255)))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(m*v+(p<=127?2*f*p*v/255:f*(2*(255^p)*(255^v)/255^255)))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(m*v+(p<=127?2*f*p*v/255:f*(2*(255^p)*(255^v)/255^255)))/255|0}}},l7.hardLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(m*v+(p<=127?2*f*p*v/255:f*(2*(255^p)*(255^v)/255^255)))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(m*v+(p<=127?2*f*p*v/255:f*(2*(255^p)*(255^v)/255^255)))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(m*v+(p<=127?2*f*p*v/255:f*(2*(255^p)*(255^v)/255^255)))/255|0}}},l7.hardLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(b*v+w*m+(v<=127?2*y*v*m/255:y*(2*(255^v)*(255^m)/255^255)))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(b*v+w*m+(v<=127?2*y*v*m/255:y*(2*(255^v)*(255^m)/255^255)))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(b*v+w*m+(v<=127?2*y*v*m/255:y*(2*(255^v)*(255^m)/255^255)))/g|0,t.data[l+3]=g}}},l7.hardLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(b*v+w*m+(v<=127?2*y*v*m/255:y*(2*(255^v)*(255^m)/255^255)))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(b*v+w*m+(v<=127?2*y*v*m/255:y*(2*(255^v)*(255^m)/255^255)))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(b*v+w*m+(v<=127?2*y*v*m/255:y*(2*(255^v)*(255^m)/255^255)))/g|0,t.data[l+3]=g}}},l7.softLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(f*h+u*(d<=127?((2*d-255)*l9[h]/255|0)+h:((2*d-255)*ct[h]/255|0)+h))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*h+u*(d<=127?((2*d-255)*l9[h]/255|0)+h:((2*d-255)*ct[h]/255|0)+h))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*h+u*(d<=127?((2*d-255)*l9[h]/255|0)+h:((2*d-255)*ct[h]/255|0)+h))/255|0}}},l7.softLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(f*h+u*(d<=127?((2*d-255)*l9[h]/255|0)+h:((2*d-255)*ct[h]/255|0)+h))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*h+u*(d<=127?((2*d-255)*l9[h]/255|0)+h:((2*d-255)*ct[h]/255|0)+h))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*h+u*(d<=127?((2*d-255)*l9[h]/255|0)+h:((2*d-255)*ct[h]/255|0)+h))/255|0}}},l7.softLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(m*h+g*f+(h<=127?v*(((2*h-255)*l9[f]/255|0)+f):v*(((2*h-255)*ct[f]/255|0)+f)))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(m*h+g*f+(h<=127?v*(((2*h-255)*l9[f]/255|0)+f):v*(((2*h-255)*ct[f]/255|0)+f)))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(m*h+g*f+(h<=127?v*(((2*h-255)*l9[f]/255|0)+f):v*(((2*h-255)*ct[f]/255|0)+f)))/p|0,t.data[s+3]=p}}},l7.softLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(m*h+g*f+(h<=127?v*(((2*h-255)*l9[f]/255|0)+f):v*(((2*h-255)*ct[f]/255|0)+f)))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(m*h+g*f+(h<=127?v*(((2*h-255)*l9[f]/255|0)+f):v*(((2*h-255)*ct[f]/255|0)+f)))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(m*h+g*f+(h<=127?v*(((2*h-255)*l9[f]/255|0)+f):v*(((2*h-255)*ct[f]/255|0)+f)))/p|0,t.data[s+3]=p}}},l7.softLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(m*v+f*(p<=127?((2*p-255)*l9[v]/255|0)+v:((2*p-255)*ct[v]/255|0)+v))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(m*v+f*(p<=127?((2*p-255)*l9[v]/255|0)+v:((2*p-255)*ct[v]/255|0)+v))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(m*v+f*(p<=127?((2*p-255)*l9[v]/255|0)+v:((2*p-255)*ct[v]/255|0)+v))/255|0}}},l7.softLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(m*v+f*(p<=127?((2*p-255)*l9[v]/255|0)+v:((2*p-255)*ct[v]/255|0)+v))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(m*v+f*(p<=127?((2*p-255)*l9[v]/255|0)+v:((2*p-255)*ct[v]/255|0)+v))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(m*v+f*(p<=127?((2*p-255)*l9[v]/255|0)+v:((2*p-255)*ct[v]/255|0)+v))/255|0}}},l7.softLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(b*v+w*m+(v<=127?y*(((2*v-255)*l9[m]/255|0)+m):y*(((2*v-255)*ct[m]/255|0)+m)))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(b*v+w*m+(v<=127?y*(((2*v-255)*l9[m]/255|0)+m):y*(((2*v-255)*ct[m]/255|0)+m)))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(b*v+w*m+(v<=127?y*(((2*v-255)*l9[m]/255|0)+m):y*(((2*v-255)*ct[m]/255|0)+m)))/g|0,t.data[l+3]=g}}},l7.softLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(b*v+w*m+(v<=127?y*(((2*v-255)*l9[m]/255|0)+m):y*(((2*v-255)*ct[m]/255|0)+m)))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(b*v+w*m+(v<=127?y*(((2*v-255)*l9[m]/255|0)+m):y*(((2*v-255)*ct[m]/255|0)+m)))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(b*v+w*m+(v<=127?y*(((2*v-255)*l9[m]/255|0)+m):y*(((2*v-255)*ct[m]/255|0)+m)))/g|0,t.data[l+3]=g}}},l7.vividLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(f*h+(d<=127?u*(0==d?0:255-Math.min(255,(255-h)*255/(2*d)|0)):u*(255==d?255:Math.min(255,255*h/(2*(255-d))|0))))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*h+(d<=127?u*(0==d?0:255-Math.min(255,(255-h)*255/(2*d)|0)):u*(255==d?255:Math.min(255,255*h/(2*(255-d))|0))))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*h+(d<=127?u*(0==d?0:255-Math.min(255,(255-h)*255/(2*d)|0)):u*(255==d?255:Math.min(255,255*h/(2*(255-d))|0))))/255|0}}},l7.vividLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(f*h+(d<=127?u*(0==d?0:255-Math.min(255,(255-h)*255/(2*d)|0)):u*(255==d?255:Math.min(255,255*h/(2*(255-d))|0))))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*h+(d<=127?u*(0==d?0:255-Math.min(255,(255-h)*255/(2*d)|0)):u*(255==d?255:Math.min(255,255*h/(2*(255-d))|0))))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*h+(d<=127?u*(0==d?0:255-Math.min(255,(255-h)*255/(2*d)|0)):u*(255==d?255:Math.min(255,255*h/(2*(255-d))|0))))/255|0}}},l7.vividLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(m*h+g*f+(h<=127?v*(0==h?0:255-Math.min(255,(255-f)*255/(2*h)|0)):v*(255==h?255:Math.min(255,255*f/(2*(255-h))|0))))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(m*h+g*f+(h<=127?v*(0==h?0:255-Math.min(255,(255-f)*255/(2*h)|0)):v*(255==h?255:Math.min(255,255*f/(2*(255-h))|0))))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(m*h+g*f+(h<=127?v*(0==h?0:255-Math.min(255,(255-f)*255/(2*h)|0)):v*(255==h?255:Math.min(255,255*f/(2*(255-h))|0))))/p|0,t.data[s+3]=p}}},l7.vividLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(m*h+g*f+(h<=127?v*(0==h?0:255-Math.min(255,(255-f)*255/(2*h)|0)):v*(255==h?255:Math.min(255,255*f/(2*(255-h))|0))))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(m*h+g*f+(h<=127?v*(0==h?0:255-Math.min(255,(255-f)*255/(2*h)|0)):v*(255==h?255:Math.min(255,255*f/(2*(255-h))|0))))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(m*h+g*f+(h<=127?v*(0==h?0:255-Math.min(255,(255-f)*255/(2*h)|0)):v*(255==h?255:Math.min(255,255*f/(2*(255-h))|0))))/p|0,t.data[s+3]=p}}},l7.vividLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(m*v+(p<=127?f*(0==p?0:255-Math.min(255,(255-v)*255/(2*p)|0)):f*(255==p?255:Math.min(255,255*v/(2*(255-p))|0))))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(m*v+(p<=127?f*(0==p?0:255-Math.min(255,(255-v)*255/(2*p)|0)):f*(255==p?255:Math.min(255,255*v/(2*(255-p))|0))))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(m*v+(p<=127?f*(0==p?0:255-Math.min(255,(255-v)*255/(2*p)|0)):f*(255==p?255:Math.min(255,255*v/(2*(255-p))|0))))/255|0}}},l7.vividLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(m*v+(p<=127?f*(0==p?0:255-Math.min(255,(255-v)*255/(2*p)|0)):f*(255==p?255:Math.min(255,255*v/(2*(255-p))|0))))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(m*v+(p<=127?f*(0==p?0:255-Math.min(255,(255-v)*255/(2*p)|0)):f*(255==p?255:Math.min(255,255*v/(2*(255-p))|0))))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(m*v+(p<=127?f*(0==p?0:255-Math.min(255,(255-v)*255/(2*p)|0)):f*(255==p?255:Math.min(255,255*v/(2*(255-p))|0))))/255|0}}},l7.vividLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(b*v+w*m+(v<=127?y*(0==v?0:255-Math.min(255,(255-m)*255/(2*v)|0)):y*(255==v?255:Math.min(255,255*m/(2*(255-v))|0))))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(b*v+w*m+(v<=127?y*(0==v?0:255-Math.min(255,(255-m)*255/(2*v)|0)):y*(255==v?255:Math.min(255,255*m/(2*(255-v))|0))))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(b*v+w*m+(v<=127?y*(0==v?0:255-Math.min(255,(255-m)*255/(2*v)|0)):y*(255==v?255:Math.min(255,255*m/(2*(255-v))|0))))/g|0,t.data[l+3]=g}}},l7.vividLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(b*v+w*m+(v<=127?y*(0==v?0:255-Math.min(255,(255-m)*255/(2*v)|0)):y*(255==v?255:Math.min(255,255*m/(2*(255-v))|0))))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(b*v+w*m+(v<=127?y*(0==v?0:255-Math.min(255,(255-m)*255/(2*v)|0)):y*(255==v?255:Math.min(255,255*m/(2*(255-v))|0))))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(b*v+w*m+(v<=127?y*(0==v?0:255-Math.min(255,(255-m)*255/(2*v)|0)):y*(255==v?255:Math.min(255,255*m/(2*(255-v))|0))))/g|0,t.data[l+3]=g}}},l7.linearLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0;if(u){var h=255^u;d=t.data[s],t.data[s]=(h*d+u*Math.min(255,Math.max(0,d+2*e.data[s]-255)))/255|0,d=t.data[s+1],t.data[s+1]=(h*d+u*Math.min(255,Math.max(0,d+2*e.data[s+1]-255)))/255|0,d=t.data[s+2],t.data[s+2]=(h*d+u*Math.min(255,Math.max(0,d+2*e.data[s+2]-255)))/255|0}}},l7.linearLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0;if(u){var h=255^u;d=t.data[s],t.data[s]=(h*d+u*Math.min(255,Math.max(0,d+2*e.data[s]-255)))/255|0,d=t.data[s+1],t.data[s+1]=(h*d+u*Math.min(255,Math.max(0,d+2*e.data[s+1]-255)))/255|0,d=t.data[s+2],t.data[s+2]=(h*d+u*Math.min(255,Math.max(0,d+2*e.data[s+2]-255)))/255|0}}},l7.linearLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(m*h+g*f+v*Math.min(255,Math.max(0,f+2*h-255)))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(m*h+g*f+v*Math.min(255,Math.max(0,f+2*h-255)))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(m*h+g*f+v*Math.min(255,Math.max(0,f+2*h-255)))/p|0,t.data[s+3]=p}}},l7.linearLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(m*h+g*f+v*Math.min(255,Math.max(0,f+2*h-255)))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(m*h+g*f+v*Math.min(255,Math.max(0,f+2*h-255)))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(m*h+g*f+v*Math.min(255,Math.max(0,f+2*h-255)))/p|0,t.data[s+3]=p}}},l7.linearLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0;if(f){var v=255^f;p=t.data[l],t.data[l]=(v*p+f*Math.min(255,Math.max(0,p+2*e.data[l]-255)))/255|0,p=t.data[l+1],t.data[l+1]=(v*p+f*Math.min(255,Math.max(0,p+2*e.data[l+1]-255)))/255|0,p=t.data[l+2],t.data[l+2]=(v*p+f*Math.min(255,Math.max(0,p+2*e.data[l+2]-255)))/255|0}}},l7.linearLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0;if(f){var v=255^f;p=t.data[l],t.data[l]=(v*p+f*Math.min(255,Math.max(0,p+2*e.data[l]-255)))/255|0,p=t.data[l+1],t.data[l+1]=(v*p+f*Math.min(255,Math.max(0,p+2*e.data[l+1]-255)))/255|0,p=t.data[l+2],t.data[l+2]=(v*p+f*Math.min(255,Math.max(0,p+2*e.data[l+2]-255)))/255|0}}},l7.linearLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(b*v+w*m+y*Math.min(255,Math.max(0,m+2*v-255)))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(b*v+w*m+y*Math.min(255,Math.max(0,m+2*v-255)))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(b*v+w*m+y*Math.min(255,Math.max(0,m+2*v-255)))/g|0,t.data[l+3]=g}}},l7.linearLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(b*v+w*m+y*Math.min(255,Math.max(0,m+2*v-255)))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(b*v+w*m+y*Math.min(255,Math.max(0,m+2*v-255)))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(b*v+w*m+y*Math.min(255,Math.max(0,m+2*v-255)))/g|0,t.data[l+3]=g}}},l7.pinLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(f*h+u*(h>=2*d?2*d:h<=2*d-255?2*d-255:h))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*h+u*(h>=2*d?2*d:h<=2*d-255?2*d-255:h))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*h+u*(h>=2*d?2*d:h<=2*d-255?2*d-255:h))/255|0}}},l7.pinLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0;if(u){var f=255^u;d=e.data[s],h=t.data[s],t.data[s]=(f*h+u*(h>=2*d?2*d:h<=2*d-255?2*d-255:h))/255|0,d=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*h+u*(h>=2*d?2*d:h<=2*d-255?2*d-255:h))/255|0,d=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*h+u*(h>=2*d?2*d:h<=2*d-255?2*d-255:h))/255|0}}},l7.pinLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(m*h+g*f+v*(f>=2*h?2*h:f<=2*h-255?2*h-255:f))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(m*h+g*f+v*(f>=2*h?2*h:f<=2*h-255?2*h-255:f))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(m*h+g*f+v*(f>=2*h?2*h:f<=2*h-255?2*h-255:f))/p|0,t.data[s+3]=p}}},l7.pinLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0,f=void 0;if(u){var p=u+(d=t.data[s+3])-(u*d/255|0)|0,v=u*d/255|0,m=u*(255^d)/255|0,g=(255^u)*d/255|0;h=e.data[s],f=t.data[s],t.data[s]=(m*h+g*f+v*(f>=2*h?2*h:f<=2*h-255?2*h-255:f))/p|0,h=e.data[s+1],f=t.data[s+1],t.data[s+1]=(m*h+g*f+v*(f>=2*h?2*h:f<=2*h-255?2*h-255:f))/p|0,h=e.data[s+2],f=t.data[s+2],t.data[s+2]=(m*h+g*f+v*(f>=2*h?2*h:f<=2*h-255?2*h-255:f))/p|0,t.data[s+3]=p}}},l7.pinLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(m*v+f*(v>=2*p?2*p:v<=2*p-255?2*p-255:v))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(m*v+f*(v>=2*p?2*p:v<=2*p-255?2*p-255:v))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(m*v+f*(v>=2*p?2*p:v<=2*p-255?2*p-255:v))/255|0}}},l7.pinLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0;if(f){var m=255^f;p=e.data[l],v=t.data[l],t.data[l]=(m*v+f*(v>=2*p?2*p:v<=2*p-255?2*p-255:v))/255|0,p=e.data[l+1],v=t.data[l+1],t.data[l+1]=(m*v+f*(v>=2*p?2*p:v<=2*p-255?2*p-255:v))/255|0,p=e.data[l+2],v=t.data[l+2],t.data[l+2]=(m*v+f*(v>=2*p?2*p:v<=2*p-255?2*p-255:v))/255|0}}},l7.pinLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(b*v+w*m+y*(m>=2*v?2*v:m<=2*v-255?2*v-255:m))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(b*v+w*m+y*(m>=2*v?2*v:m<=2*v-255?2*v-255:m))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(b*v+w*m+y*(m>=2*v?2*v:m<=2*v-255?2*v-255:m))/g|0,t.data[l+3]=g}}},l7.pinLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0,p=void 0,v=void 0,m=void 0;if(f){var g=f+(p=t.data[l+3])-(f*p/255|0)|0,y=f*p/255|0,b=f*(255^p)/255|0,w=(255^f)*p/255|0;v=e.data[l],m=t.data[l],t.data[l]=(b*v+w*m+y*(m>=2*v?2*v:m<=2*v-255?2*v-255:m))/g|0,v=e.data[l+1],m=t.data[l+1],t.data[l+1]=(b*v+w*m+y*(m>=2*v?2*v:m<=2*v-255?2*v-255:m))/g|0,v=e.data[l+2],m=t.data[l+2],t.data[l+2]=(b*v+w*m+y*(m>=2*v?2*v:m<=2*v-255?2*v-255:m))/g|0,t.data[l+3]=g}}},l7.passthroughOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=n/100,h=1-d,f=u*d+255*h;t.data[s]=(e.data[s]*u*d+255*t.data[s]*h)/f|0,t.data[s+1]=(e.data[s+1]*u*d+255*t.data[s+1]*h)/f|0,t.data[s+2]=(e.data[s+2]*u*d+255*t.data[s+2]*h)/f|0,t.data[s+3]=f}},l7.passthroughOntoOpaqueFusionWithOpaqueLayer=l7.passthroughOntoOpaqueFusionWithTransparentLayer,l7.passthroughOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=t.data[s+3],h=n/100,f=1-h,p=u*h+d*f;t.data[s]=(e.data[s]*u*h+t.data[s]*d*f)/p|0,t.data[s+1]=(e.data[s+1]*u*h+t.data[s+1]*d*f)/p|0,t.data[s+2]=(e.data[s+2]*u*h+t.data[s+2]*d*f)/p|0,t.data[s+3]=p}},l7.passthroughOntoTransparentFusionWithOpaqueLayer=l7.passthroughOntoTransparentFusionWithTransparentLayer,l7.passthroughOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3],p=i.data[u]*n/25500,v=1-p,m=f*p+255*v;t.data[l]=(e.data[l]*f*p+255*t.data[l]*v)/m|0,t.data[l+1]=(e.data[l+1]*f*p+255*t.data[l+1]*v)/m|0,t.data[l+2]=(e.data[l+2]*f*p+255*t.data[l+2]*v)/m|0,t.data[l+3]=m}},l7.passthroughOntoOpaqueFusionWithOpaqueLayerMasked=l7.passthroughOntoOpaqueFusionWithTransparentLayerMasked,l7.passthroughOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3],p=t.data[l+3],v=i.data[u]*n/25500,m=1-v,g=f*v+p*m;t.data[l]=(e.data[l]*f*v+t.data[l]*p*m)/g|0,t.data[l+1]=(e.data[l+1]*f*v+t.data[l+1]*p*m)/g|0,t.data[l+2]=(e.data[l+2]*f*v+t.data[l+2]*p*m)/g|0,t.data[l+3]=g}},l7.passthroughOntoTransparentFusionWithOpaqueLayerMasked=l7.passthroughOntoTransparentFusionWithTransparentLayerMasked,l7.replaceOntoFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0;t.data[s]=e.data[s],t.data[s+1]=e.data[s+1],t.data[s+2]=e.data[s+2],t.data[s+3]=u}},l7.replaceOntoFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3];t.data[s]=e.data[s],t.data[s+1]=e.data[s+1],t.data[s+2]=e.data[s+2],t.data[s+3]=u}},l7.replaceOntoFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0;t.data[l]=e.data[l],t.data[l+1]=e.data[l+1],t.data[l+2]=e.data[l+2],t.data[l+3]=f}},l7.replaceOntoFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0;t.data[l]=e.data[l],t.data[l+1]=e.data[l+1],t.data[l+2]=e.data[l+2],t.data[l+3]=f}},l7.replaceAlphaOntoFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0;t.data[s+3]=u}},l7.replaceAlphaOntoFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]*n/25500|0;t.data[l+3]=f}},l7.replaceAlphaOntoFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3];t.data[s+3]=u}},l7.replaceAlphaOntoFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=(e.width-o)*4|0,l=0|e.offsetOfPixel(a.left,a.top),c=i.width-o|0,u=0|i.offsetOfPixel(a.left,a.top),d=0;d<r;d++,l+=s,u+=c)for(var h=0;h<o;h++,l+=4,u++){var f=e.data[l+3]*i.data[u]/255|0;t.data[l+3]=f}},l7.upgradeMultiplyOfOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3],d=void 0,h=void 0;u&&(d=e.data[s],h=t.data[s],e.data[s]=d+Math.ceil((255-d)*h*u%65025/(h*u)),d=e.data[s+1],h=t.data[s+1],e.data[s+1]=d+Math.ceil((255-d)*h*u%65025/(h*u)),d=e.data[s+2],h=t.data[s+2],e.data[s+2]=d+Math.ceil((255-d)*h*u%65025/(h*u)))}},l7.upgradeMultiplyOfTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=(e.width-r)*4|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var c=0;c<r;c++,s+=4){var u=e.data[s+3]*n/100|0,d=void 0,h=void 0;u&&(d=e.data[s],h=t.data[s],e.data[s]=d+Math.ceil((255-d)*h*u%65025/(h*u)),d=e.data[s+1],h=t.data[s+1],e.data[s+1]=d+Math.ceil((255-d)*h*u%65025/(h*u)),d=e.data[s+2],h=t.data[s+2],e.data[s+2]=d+Math.ceil((255-d)*h*u%65025/(h*u)))}},l7._normalFuseImageOntoImageAtPosition=function(t,e,n,a,i,r){for(var o=0|a.getHeight(),s=0|a.getWidth(),l=(e.width-s)*4|0,c=0|e.offsetOfPixel(a.left,a.top),u=(t.width-s)*4|0,d=0|t.offsetOfPixel(i,r),h=0;h<o;h++,c+=l,d+=u)for(var f=0;f<s;f++,c+=4,d+=4){var p=e.data[c+3],v=void 0;if(p){var m=p+(v=t.data[d+3])-(p*v/255|0)|0,g=255*p/m|0,y=255-g;t.data[d]=(e.data[c]*g+t.data[d]*y)/255|0,t.data[d+1]=(e.data[c+1]*g+t.data[d+1]*y)/255|0,t.data[d+2]=(e.data[c+2]*g+t.data[d+2]*y)/255|0,t.data[d+3]=m}}},l7.LM_NORMAL=0,l7.LM_MULTIPLY=1,l7.LM_ADD=2,l7.LM_SCREEN=3,l7.LM_LIGHTEN=4,l7.LM_DARKEN=5,l7.LM_SUBTRACT=6,l7.LM_DODGE=7,l7.LM_BURN=8,l7.LM_OVERLAY=9,l7.LM_HARDLIGHT=10,l7.LM_SOFTLIGHT=11,l7.LM_VIVIDLIGHT=12,l7.LM_LINEARLIGHT=13,l7.LM_PINLIGHT=14,l7.LM_PASSTHROUGH=15,l7.LM_MULTIPLY2=16,l7.LM_FIRST=0,l7.LM_LAST=16,l7.LM_LAST_CHIBIPAINT=l7.LM_PINLIGHT,l7.BLEND_MODE_CODENAMES=["normal","multiply","add","screen","lighten","darken","subtract","dodge","burn","overlay","hardLight","softLight","vividLight","linearLight","pinLight","passthrough","multiply2"],l7.BLEND_MODE_DISPLAY_NAMES=["Normal","Multiply","Add","Screen","Lighten","Darken","Subtract","Dodge","Burn","Overlay","Hard Light","Soft Light","Vivid Light","Linear Light","Pin Light","Passthrough","Multiply"],function(){for(var t=0;t<256;t++){var e=t/255;l9[t]=(e-e*e)*255|0}for(var n=0;n<256;n++){var a=n/255;ct[n]=(Math.sqrt(a)-a)*255|0}}(),ce.prototype.copyFrom=function(t){this.name=t.name,this.blendMode=t.blendMode,this.useLegacyMultiply=t.useLegacyMultiply,this.alpha=t.alpha,this.visible=t.visible,this.parent=t.parent,this.lockAlpha=t.lockAlpha,t.mask?this.mask?this.mask.copyPixelsFrom(t.mask):this.mask=t.mask.clone():this.mask=null,this.maskLinked=t.maskLinked,this.maskVisible=t.maskVisible,t.maskThumbnail?this.maskThumbnail?this.maskThumbnail.copyPixelsFrom(t.maskThumbnail):this.maskThumbnail=t.maskThumbnail.clone():this.maskThumbnail=null},ce.prototype.setMask=function(t){this.mask=t,t||(this.maskThumbnail=null)},ce.prototype.setAlpha=function(t){this.alpha=t},ce.prototype.getAlpha=function(){return this.alpha},ce.prototype.getEffectiveAlpha=function(){return this.visible?this.alpha:0},ce.prototype.getEffectiveMask=function(){return this.maskVisible?this.mask:null},ce.prototype.setName=function(t){this.name=t},ce.prototype.getName=function(){return this.name},ce.prototype.setBlendMode=function(t){this.blendMode=t,t===l7.LM_MULTIPLY?this.useLegacyMultiply=!0:t===l7.LM_MULTIPLY2&&(this.useLegacyMultiply=!1)},ce.prototype.getBlendMode=function(){return this.blendMode},ce.prototype.getLockAlpha=function(){return this.lockAlpha},ce.prototype.setLockAlpha=function(t){this.lockAlpha=t},ce.prototype.setVisible=function(t){this.visible=t},ce.prototype.getVisible=function(){return this.visible},ce.prototype.isVisible=ce.prototype.getVisible,ce.prototype.setMaskLinked=function(t){this.maskLinked=t},ce.prototype.getMaskLinked=function(){return this.maskLinked},ce.prototype.setMaskVisible=function(t){this.maskVisible=t},ce.prototype.getMaskVisible=function(){return this.maskVisible},ce.prototype.getMemoryUsed=function(){return 0},ce.prototype.getDepth=function(){return null==this.parent?0:this.parent.getDepth()+1},ce.prototype.ancestorsAreVisible=function(){return null==this.parent||this.parent.visible&&this.parent.ancestorsAreVisible()},ce.prototype.hasAncestor=function(t){return this.parent==t||this.parent&&this.parent.hasAncestor(t)},ce.prototype.clone=function(){throw"Pure virtual CPLayer.clone() call"},ce.prototype.getNonTransparentBounds=function(t){return new l$(0,0,0,0)},ce.prototype.rebuildMaskThumbnail=function(){if(this.mask){if(!this.maskThumbnail){var t=Math.ceil(Math.max(this.mask.width/ce.LAYER_THUMBNAIL_WIDTH,this.mask.height/ce.LAYER_THUMBNAIL_HEIGHT));this.maskThumbnail=new l6(Math.floor(this.mask.width/t),Math.floor(this.mask.height/t),8)}this.maskThumbnail.createThumbnailFrom(this.mask)}else this.maskThumbnail=null},ce.prototype.getMaskThumbnail=function(){return!this.maskThumbnail&&this.mask&&this.rebuildMaskThumbnail(),this.maskThumbnail},ce.LAYER_THUMBNAIL_WIDTH=80,ce.LAYER_THUMBNAIL_HEIGHT=50,cn.prototype=Object.create(ce.prototype),cn.prototype.constructor=cn,cn.createFromImage=function(t,e){var n=new cn(0,0,e);return n.image=t,n},cn.prototype.clone=function(){var t=new cn(0,0,this.name);return t.copyFrom(this),t},cn.prototype.copyFrom=function(t){ce.prototype.copyFrom.call(this,t),this.clip=t.clip,this.image?this.image.copyPixelsFrom(t.image):this.image=t.image.clone()},cn.prototype.hasAlpha=function(){return 100!=this.alpha||this.image.hasAlpha()},cn.prototype.hasAlphaInRect=function(t){return 100!=this.alpha||this.image.hasAlphaInRect(t)},cn.prototype.copyImageFrom=function(t){this.image.copyPixelsFrom(t)},cn.prototype.getClippingBase=function(){if(this.clip&&this.parent){for(var t=this.parent.indexOf(this)-1;t>=0&&this.parent.layers[t]instanceof cn;t--)if(!this.parent.layers[t].clip)return this.parent.layers[t]}return null},cn.prototype.getClip=function(){return this.clip},cn.prototype.setClip=function(t){this.clip=t},cn.prototype.getNonTransparentBounds=function(t){return this.image.getNonTransparentBounds(t)},cn.prototype.getBounds=function(){return new l$(0,0,this.image.width,this.image.height)},cn.prototype.getMemoryUsed=function(){return this.image?this.image.getMemorySize():0},cn.prototype.rebuildImageThumbnail=function(){if(!this.imageThumbnail){var t=Math.ceil(Math.max(this.image.width/ce.LAYER_THUMBNAIL_WIDTH,this.image.height/ce.LAYER_THUMBNAIL_HEIGHT));this.imageThumbnail=new l5(Math.floor(this.image.width/t),Math.floor(this.image.height/t))}this.imageThumbnail.createThumbnailFrom(this.image)},cn.prototype.getImageThumbnail=function(){return this.imageThumbnail||this.rebuildImageThumbnail(),this.imageThumbnail},l7.blendFunctionNameForParameters=function(t,e,n,a){var i=l7.BLEND_MODE_CODENAMES[n]+"Onto";return t?i+="TransparentFusion":i+="OpaqueFusion",100==e?i+="WithOpaqueLayer":i+="WithTransparentLayer",a&&(i+="Masked"),i},l7.fuseImageOntoImage=function(t,e,n,a,i,r,o){if(!(a<=0)){var s=l7.blendFunctionNameForParameters(e,a,i,null!=o);r=t.getBounds().clipTo(r),this[s](t,n,a,r,o)}},l7.normalFuseImageOntoImageAtPosition=function(t,e,n,a,i){var r=i.clone(),o=new l$(n,a,0,0);t.getBounds().clipSourceDest(r,o),this._normalFuseImageOntoImageAtPosition(t,e,100,r,o.left,o.top)},l7.multiplyAlphaBy=function(t,e){if(e<100){if(0==e)t.clearAll(0);else for(var n=t.data,a=3;a<n.length;a+=4)n[a]=Math.round(n[a]*e/100)}},l7.multiplyAlphaByMask=function(t,e,n){for(var a=e/25500,i=l5.ALPHA_BYTE_OFFSET,r=0;i<t.data.length;i+=l5.BYTES_PER_PIXEL,r++)t.data[i]=Math.round(t.data[i]*n.data[r]*a)},l7.copyAndMultiplyAlphaBy=function(t,e,n,a){if(100==n)t.copyBitmapRect(e,a.left,a.top,a);else if(0==n)t.clearRect(a,0);else for(var i=e.data,r=0;r<i.length;r+=4)i[r]=i[r],i[r+1]=i[r+1],i[r+2]=i[r+2],i[r+3]=Math.round(i[r+3]*n/100)},ca.prototype.addChildren=function(t){var e=this;null!=t&&(Array.isArray(t)?(t.forEach(function(t){return t.parent=e}),this.layers=this.layers.concat(t)):(t.parent=this,this.layers.push(t)))};var cr={};!function(t){function e(){}var n=e.prototype,a=t.EventEmitter;function i(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return -1}function r(t){return function(){return this[t].apply(this,arguments)}}n.getListeners=function(t){var e,n,a=this._getEvents();if(t instanceof RegExp)for(n in e={},a)a.hasOwnProperty(n)&&t.test(n)&&(e[n]=a[n]);else e=a[t]||(a[t]=[]);return e},n.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},n.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},n.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!!e&&"object"==typeof e&&t(e.listener)}(e))throw TypeError("listener must be a function");var n,a=this.getListenersAsObject(t),r="object"==typeof e;for(n in a)a.hasOwnProperty(n)&&-1===i(a[n],e)&&a[n].push(r?e:{listener:e,once:!1});return this},n.on=r("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=r("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,e){var n,a,r=this.getListenersAsObject(t);for(a in r)r.hasOwnProperty(a)&&-1!==(n=i(r[a],e))&&r[a].splice(n,1);return this},n.off=r("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,n){var a,i,r=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(a=n.length;a--;)r.call(this,e,n[a]);else for(a in e)e.hasOwnProperty(a)&&(i=e[a])&&("function"==typeof i?r.call(this,a,i):o.call(this,a,i));return this},n.removeEvent=function(t){var e,n=void 0===t?"undefined":ty(t),a=this._getEvents();if("string"===n)delete a[t];else if(t instanceof RegExp)for(e in a)a.hasOwnProperty(e)&&t.test(e)&&delete a[e];else delete this._events;return this},n.removeAllListeners=r("removeEvent"),n.emitEvent=function(t,e){var n,a,i,r,o=this.getListenersAsObject(t);for(r in o)if(o.hasOwnProperty(r))for(i=0,n=o[r].slice(0);i<n.length;i++)!0===(a=n[i]).once&&this.removeListener(t,a.listener),a.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,a.listener);return this},n.trigger=r("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return t.EventEmitter=a,e},"function"==typeof define&&define.amd?define(function(){return e}):cr?cr=e:t.EventEmitter=e}("undefined"!=typeof window?window:{});var co=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;return lR(this,n),(i=e.call(this)).layer=t,i.buffer=t.mask.getImageData(0,0,t.mask.width,t.mask.height),i.invalidRect=new l$(0,0,0,0),i.prepareMask=a,i}return lI(n,[{key:"close",value:function(){this.buffer=null,this.layer=null,this.emitEvent("changeLayer")}},{key:"setLayer",value:function(t){this.layer=t,this.invalidRect=t.getBounds(),this.emitEvent("changeLayer")}},{key:"isOpen",value:function(){return null!=this.layer}},{key:"invalidateRect",value:function(t){this.invalidRect.union(t)}},{key:"getImageData",value:function(){return this.prepareMask(),!this.invalidRect.isEmpty()&&this.layer&&this.layer.mask&&(function(t,e,n){for(var a=n.top*e.width+n.left,i=a*l5.BYTES_PER_PIXEL,r=n.getWidth(),o=n.getHeight(),s=e.width-r,l=s*l5.BYTES_PER_PIXEL,c=0;c<o;c++,a+=s,i+=l)for(var u=0;u<r;u++,a++,i+=l5.BYTES_PER_PIXEL)t.data[i+l5.RED_BYTE_OFFSET]=e.data[a],t.data[i+l5.GREEN_BYTE_OFFSET]=e.data[a],t.data[i+l5.BLUE_BYTE_OFFSET]=e.data[a],t.data[i+l5.ALPHA_BYTE_OFFSET]=255}(this.buffer,this.layer.mask,this.invalidRect),this.invalidRect.makeEmpty()),this.buffer}}]),n}(/*@__PURE__*/t(cr));function cs(){var t,e,n,a,i=new Uint8Array(160801),r=new Uint8Array(161604),o=[new Float32Array(402),new Float32Array(402)],s=null,l=this;function c(r){if(null!=s&&r.curSize==t&&r.curSqueeze==e&&r.curAngle==n&&r.tip==a)return s;switch(r.tip){case lZ.TIP_ROUND_AIRBRUSH:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize/2*(e.curSize/2),r=1+10*e.curSqueeze,o=Math.cos(e.curAngle),s=Math.sin(e.curAngle),l=0,c=0;c<n;c++)for(var u=0;u<n;u++){var d=u+.5-a,h=c+.5-a,f=(d*o-h*s)*r,p=h*o+d*s,v=f*f+p*p;v<=i?t[l++]=~~(255*(1-v/i)):t[l++]=0}}(i,r);break;case lZ.TIP_ROUND_AA:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize/2*(e.curSize/2),r=(e.curSize-2)/2*((e.curSize-2)/2),o=(e.curSize+2)/2*((e.curSize+2)/2),s=1+10*e.curSqueeze,l=Math.cos(e.curAngle),c=Math.sin(e.curAngle),u=0,d=0;d<n;d++)for(var h=0;h<n;h++){var f=h+.5-a,p=d+.5-a,v=(f*l-p*c)*s,m=p*l+f*c,g=v*v+m*m;if(g<=r)t[u++]=255;else if(g>o)t[u++]=0;else{for(var y=0,b=0;b<4;b++)for(var w=0;w<4;w++)(g=(v=((f=h+.25*w-a)*l-(p=d+.25*b-a)*c)*s)*v+(m=p*l+f*c)*m)<=i&&(y+=1);t[u++]=Math.min(16*y,255)}}}(i,r);break;case lZ.TIP_ROUND_PIXEL:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize/2*(e.curSize/2),r=1+10*e.curSqueeze,o=Math.cos(e.curAngle),s=Math.sin(e.curAngle),l=0,c=0;c<n;c++)for(var u=0;u<n;u++){var d=u+.5-a,h=c+.5-a,f=(d*o-h*s)*r,p=h*o+d*s;f*f+p*p<=i?t[l++]=255:t[l++]=0}}(i,r);break;case lZ.TIP_SQUARE_AA:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize*Math.sin(Math.PI/4),r=i/2/(1+10*e.curSqueeze),o=i/2,s=r-1,l=o-1,c=r+1,u=o+1,d=Math.cos(e.curAngle),h=Math.sin(e.curAngle),f=0,p=0;p<n;p++)for(var v=0;v<n;v++){var m=v+.5-a,g=p+.5-a,y=Math.abs(m*d-g*h),b=Math.abs(g*d+m*h);if(y<=s&&b<=l)t[f++]=255;else if(y>c||b>u)t[f++]=0;else{for(var w=0,_=0;_<4;_++)for(var E=0;E<4;E++)y=Math.abs((m=v+.25*E-a)*d-(g=p+.25*_-a)*h),b=Math.abs(g*d+m*h),y<=r&&b<=o&&w++;t[f++]=Math.min(16*w,255)}}}(i,r);break;case lZ.TIP_SQUARE_PIXEL:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize*Math.sin(Math.PI/4),r=i/2/(1+10*e.curSqueeze),o=i/2,s=Math.cos(e.curAngle),l=Math.sin(e.curAngle),c=0,u=0;u<n;u++)for(var d=0;d<n;d++){var h=d+.5-a,f=u+.5-a,p=Math.abs(h*s-f*l),v=Math.abs(f*s+h*l);p<=r&&v<=o?t[c++]=255:t[c++]=0}}(i,r)}return s=i,t=r.curSize,a=r.tip,e=r.curSqueeze,n=r.curAngle,i}this.getDab=function(t,e,n){var a={alpha:n.curAlpha,width:Math.ceil(n.curSize),height:Math.ceil(n.curSize)},s=n.isAA&&n.tip!=lZ.TIP_ROUND_PIXEL;s&&(a.width++,a.height++);var u=t-a.width/2+.5,d=e-a.height/2+.5,h=Math.floor(u),f=Math.floor(d);return s?a.brush=function(t,e,n){var a,i=c(t),s=Math.ceil(t.curSize),l=Math.ceil(t.curSize)+1,u=(1-e)*(1-n),d=e*(1-n),h=e*n,f=(1-e)*n,p=0,v=0,m=o[0],g=o[1];m.fill(0);for(var y=0;y<s;y++){var b=void 0;for(b=0,g[0]=0;b<s;b++,p++,v++){var w=i[p];r[v]=m[b]+w*u+.5|0,m[b+1]+=w*d,g[b]+=w*f,g[b+1]=w*h}r[v++]=m[b]+.5|0,a=m,m=g,g=a}for(var _=0;_<l;_++,v++)r[v]=m[_]+.5|0;return r}(n,u-h,d-f):a.brush=c(n),a.x=h,a.y=f,n.texture>0&&null!=this.texture&&(a.brush==i&&(r.set(i),a.brush=r),function(t,e){var n,a,i=Math.floor(255*e),r=l.texture,o=t.x%r.width,s=t.y%r.height,c=0;o<0&&(o+=r.width),s<0&&(s+=r.height);for(var u=0;u<t.height;u++){n=s*r.width+o,a=s*r.width+r.width;for(var d=0;d<t.width;d++){var h=t.brush[c],f=r.data[n];t.brush[c]=~~(h*(f*i/255^255)/255),c++,++n==a&&(n-=r.width)}++s==r.height&&(s=0)}}(a,n.texture)),a},this.setTexture=function(t){this.texture=t}}var cl=/*#__PURE__*/function(){function t(){lR(this,t)}return lI(t,[{key:"merge",value:function(t){return!1}},{key:"noChange",value:function(){return!1}},{key:"getMemoryUsed",value:function(t,e){return 0}},{key:"compact",value:function(){}}]),t}();function cc(t,e,n){this.bmp=t,this.x=e,this.y=n}function cu(t){if(0==t.saturation)return t.value<<16|t.value<<8|t.value;var e=t.hue/60;e-=Math.floor(e);var n=t.saturation/255,a=~~(t.value*(1-n)),i=~~(t.value*(1-n*e)),r=~~(t.value*(1-n*(1-e)));switch(~~(t.hue/60)){case 0:return t.value<<16|r<<8|a;case 1:return i<<16|t.value<<8|a;case 2:return a<<16|t.value<<8|r;case 3:return a<<16|i<<8|t.value;case 4:return r<<16|a<<8|t.value;case 5:return t.value<<16|a<<8|i;default:return 0}}function cd(t){this.rgb=0,this.hue=0,this.saturation=0,this.value=0,this.setRgb(t||0)}function ch(){var t,e=!1;this.nextGaussian=function(){if(e)return e=!1,t;do i=(n=2*Math.random()-1)*n+(a=2*Math.random()-1)*a;while(i>=1||0==i)var n,a,i,r=Math.sqrt(-2*Math.log(i)/i);return t=a*r,e=!0,n*r}}function cf(){this.setToIdentity()}function cp(t){for(var e=["imageSmoothingEnabled","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled"],n=0;n<e.length;n++)if(e[n]in t)return e[n];return null}function cv(){return!!cp(lJ(0,0).getContext("2d"))}function cm(t,e){var n=cp(t);n&&(t[n]=e)}function cg(t,e,n){this.r=t,this.g=e,this.b=n}function cy(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length}function cb(t){for(var e=new cg(0,0,0),n=0;n<t.length;n++){var a=t[n];e.r+=a.r,e.g+=a.g,e.b+=a.b}return e.r/=t.length,e.g/=t.length,e.b/=t.length,e}cd.prototype.getRgb=function(){return this.rgb},cd.prototype.getSaturation=function(){return this.saturation},cd.prototype.getHue=function(){return this.hue},cd.prototype.getValue=function(){return this.value},cd.prototype.setRgbComponents=function(t,e,n){this.setRgb(t<<16|e<<8|n)},cd.prototype.setRgb=function(t){this.rgb=t,function(t,e){var n=t>>16&255,a=t>>8&255,i=255&t;e.value=Math.max(n,Math.max(a,i));var r=Math.min(n,Math.min(a,i));if(0==e.value?e.saturation=0:e.saturation=~~((e.value-r)/e.value*255),0==e.saturation)e.hue=0;else{var o=(e.value-n)/(e.value-r),s=(e.value-a)/(e.value-r),l=(e.value-i)/(e.value-r),c=0;e.value==n&&(c=l-s),e.value==a&&(c=2+o-l),e.value==i&&(c=4+s-o),(c*=60)<0&&(c+=360),e.hue=~~c}}(t,this)},cd.prototype.setHsv=function(t,e,n){this.hue=t,this.saturation=e,this.value=n,this.rgb=cu(this)},cd.prototype.setHue=function(t){this.hue=t,this.rgb=cu(this)},cd.prototype.setSaturation=function(t){this.saturation=t,this.rgb=cu(this)},cd.prototype.setValue=function(t){this.value=t,this.rgb=cu(this)},cd.prototype.setGreyscale=function(t){this.rgb=cd.greyToRGB(t),this.hue=0,this.saturation=0,this.value=t},cd.prototype.clone=function(){var t=new cd(0);return t.copyFrom(this),t},cd.prototype.copyFrom=function(t){this.rgb=t.rgb,this.hue=t.hue,this.saturation=t.saturation,this.value=t.value},cd.prototype.isEqual=function(t){return this.rgb==t.rgb&&this.hue==t.hue&&this.saturation==t.saturation&&this.value==t.value},cd.greyToRGB=function(t){return t|t<<8|t<<16},cf.prototype.setToIdentity=function(){this.m=[1,0,0,1,0,0]},cf.prototype.multiply=function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],a=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];this.m[0]=e,this.m[1]=n,this.m[2]=a,this.m[3]=i,this.m[4]=r,this.m[5]=o},cf.prototype.preMultiply=function(t){var e=t.m[0]*this.m[0]+t.m[2]*this.m[1],n=t.m[1]*this.m[0]+t.m[3]*this.m[1],a=t.m[0]*this.m[2]+t.m[2]*this.m[3],i=t.m[1]*this.m[2]+t.m[3]*this.m[3],r=t.m[0]*this.m[4]+t.m[2]*this.m[5]+t.m[4],o=t.m[1]*this.m[4]+t.m[3]*this.m[5]+t.m[5];this.m[0]=e,this.m[1]=n,this.m[2]=a,this.m[3]=i,this.m[4]=r,this.m[5]=o},cf.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,a=-this.m[2]*t,i=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=e,this.m[1]=n,this.m[2]=a,this.m[3]=i,this.m[4]=r,this.m[5]=o},cf.prototype.getInverted=function(){var t=new cf;return t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5],t.invert(),t},cf.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),a=this.m[0]*e+this.m[2]*n,i=this.m[1]*e+this.m[3]*n,r=-(this.m[0]*n)+this.m[2]*e,o=-(this.m[1]*n)+this.m[3]*e;this.m[0]=a,this.m[1]=i,this.m[2]=r,this.m[3]=o},cf.prototype.rotateAroundPoint=function(t,e,n){this.translate(e,n),this.rotate(t),this.translate(-e,-n)},cf.prototype.translate=function(t,e){this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e},cf.prototype.scale=function(t,e){this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e},cf.prototype.scaleAroundPoint=function(t,e,n,a){this.translate(n,a),this.scale(t,e),this.translate(-n,-a)},cf.prototype.shear=function(t,e){var n=this.m[0]+this.m[2]*e,a=this.m[1]+this.m[3]*e,i=this.m[2]+this.m[0]*t,r=this.m[3]+this.m[1]*t;this.m[0]=n,this.m[1]=a,this.m[2]=i,this.m[3]=r},cf.prototype.getTransformedPoint=function(t){return{x:t.x*this.m[0]+t.y*this.m[2]+this.m[4],y:t.x*this.m[1]+t.y*this.m[3]+this.m[5]}},cf.prototype.transformPoints=function(t){for(var e=0;e<t.length;e++)t[e]=this.getTransformedPoint(t[e])},cf.prototype.getTranslateX=function(){return this.m[4]},cf.prototype.getTranslateY=function(){return this.m[5]},cf.prototype.clone=function(){var t=new cf;return t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5],t},cf.prototype.getDeterminant=function(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]},cf.prototype.decompose=function(){var t=this.getDeterminant(),e=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return{translate:{x:this.m[4],y:this.m[5]},rotate:Math.sign(this.m[1])*Math.acos(this.m[0]/e),scale:{x:e,y:t/e},shear:{x:Math.atan((this.m[0]*this.m[2]+this.m[1]*this.m[3])/(e*e)),y:0}}},cf.prototype.toString=function(){return"["+this.m[0].toFixed(2)+" "+this.m[2].toFixed(2)+" "+this.m[4].toFixed(2)+"]\n["+this.m[1].toFixed(2)+" "+this.m[3].toFixed(2)+" "+this.m[5].toFixed(2)+"]\n[0.00 0.00 1.00]"},Math.sign=Math.sign||function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},cg.prototype.toInt=function(){return Math.max(0,Math.min(255,Math.round(255*this.r)))<<16|Math.max(0,Math.min(255,Math.round(255*this.g)))<<8|Math.max(0,Math.min(255,Math.round(255*this.b)))},cg.prototype.mixWith=function(t,e){this.r=this.r*(1-e)+t.r*e,this.g=this.g*(1-e)+t.g*e,this.b=this.b*(1-e)+t.b*e},cg.prototype.clone=function(){return new cg(this.r,this.g,this.b)},cg.createFromInt=function(t){return new cg((t>>>16&255)/255,(t>>>8&255)/255,(255&t)/255)};var cw=/*#__PURE__*/function(){function t(e,n){lR(this,t),this._strokeBuffer=e,this._strokedRegion=n,this.wantsOutputAsInput=!0}return lI(t,[{key:"paintDab",value:function(t,e,n,a,i,r,o){var s=Math.max(1,Math.ceil(r.alpha*a.alphaScale));switch(a.paintMode){case lZ.PAINT_MODE_FLOW:this._paintFlow(i,e,r.brush,r.width,s);break;case lZ.PAINT_MODE_OPACITY:this._paintOpacity(i,e,r.brush,r.width,s)}}},{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=e.data,o=t.data,s=n>>16&255,l=n>>8&255,c=255&n,u=0|i.getWidth(),d=0|i.getHeight(),h=this._strokeBuffer.offsetOfPixel(i.left,i.top),f=t.offsetOfPixel(i.left,i.top),p=this._strokeBuffer.width-u|0,v=(t.width-u)*l5.BYTES_PER_PIXEL|0,m=0;m<d;m++,h+=p,f+=v)for(var g=0;g<u;g++,h++,f+=l5.BYTES_PER_PIXEL){var y=a[h]/255+.5|0;if(y>0){var b=y+r[f+l5.ALPHA_BYTE_OFFSET]*(255-y)/255|0,w=255*y/b|0,_=255-w;o[f]=(s*w+r[f]*_)/255&255,o[f+1]=(l*w+r[f+1]*_)/255&255,o[f+2]=(c*w+r[f+2]*_)/255&255,o[f+3]=b}}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=e.data,o=t.data,s=0|i.getWidth(),l=0|i.getHeight(),c=t.offsetOfPixel(i.left,i.top),u=this._strokeBuffer.offsetOfPixel(i.left,i.top),d=this._strokeBuffer.width-s|0,h=t.width-s|0,f=0;f<l;f++,u+=d,c+=h)for(var p=0;p<s;p++,u++,c++){var v=a[u]/255|0;if(v>0){var m=255-v;o[c]=(n*v+r[c]*m)/255}}}},{key:"_paintFlow",value:function(t,e,n,a,i){var r=this._strokeBuffer.data,o=t.left+t.top*a,s=this._strokeBuffer.offsetOfPixel(e.left,e.top),l=e.getHeight(),c=e.getWidth(),u=a-c,d=this._strokeBuffer.width-c;this._strokedRegion.union(e);for(var h=0;h<l;h++,o+=u,s+=d)for(var f=0;f<c;f++,o++,s++){var p=n[o]*i;0!=p&&(r[s]=Math.min(65025,r[s]+(255-r[s]/255)*p/255))}}},{key:"_paintOpacity",value:function(t,e,n,a,i){var r=this._strokeBuffer.data,o=t.left+t.top*a,s=this._strokeBuffer.offsetOfPixel(e.left,e.top),l=e.getWidth(),c=a-l,u=this._strokeBuffer.width-l;i=Math.min(255,i),this._strokedRegion.union(e);for(var d=e.top;d<e.bottom;d++,o+=c,s+=u)for(var h=0;h<l;h++,o++,s++)r[s]=Math.max(n[o]*i,r[s])}},{key:"beginStroke",value:function(){}},{key:"endStroke",value:function(){}}]),t}(),c_=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(){return lR(this,n),e.apply(this,arguments)}return lI(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=e.data,o=t.data,s=i.top;s<i.bottom;s++)for(var l=t.offsetOfPixel(i.left,s)+l5.ALPHA_BYTE_OFFSET,c=this._strokeBuffer.offsetOfPixel(i.left,s),u=i.left;u<i.right;u++,l+=l5.BYTES_PER_PIXEL){var d=a[c++]/255|0;if(d>0){var h=r[l];o[l]=h*(255-d)/255}}}}]),n}(cw),cE=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(){return lR(this,n),e.apply(this,arguments)}return lI(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=i.getWidth(),o=i.getHeight(),s=t.offsetOfPixel(i.left,i.top),l=this._strokeBuffer.offsetOfPixel(i.left,i.top),c=(t.width-r)*l5.BYTES_PER_PIXEL,u=this._strokeBuffer.width-r,d=e.data,h=t.data,f=0;f<o;f++,l+=u,s+=c)for(var p=0;p<r;p++,l++,s+=l5.BYTES_PER_PIXEL){var v=a[l]/255|0;if(v>0&&0!=d[s+l5.ALPHA_BYTE_OFFSET]){var m=(v+255)/255;h[s+l5.RED_BYTE_OFFSET]=d[s+l5.RED_BYTE_OFFSET]*m,h[s+l5.GREEN_BYTE_OFFSET]=d[s+l5.GREEN_BYTE_OFFSET]*m,h[s+l5.BLUE_BYTE_OFFSET]=d[s+l5.BLUE_BYTE_OFFSET]*m}}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=i.getWidth(),o=i.getHeight(),s=t.offsetOfPixel(i.left,i.top),l=this._strokeBuffer.offsetOfPixel(i.left,i.top),c=t.width-r,u=this._strokeBuffer.width-r,d=e.data,h=t.data,f=0;f<o;f++,l+=u,s+=c)for(var p=0;p<r;p++,l++,s++){var v=a[l]/255|0;if(v>0){var m=(v+255)/255;h[s]=Math.min(d[s]*m,255)}}}}]),n}(cw),ck=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(){return lR(this,n),e.apply(this,arguments)}return lI(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=i.getWidth(),o=i.getHeight(),s=t.offsetOfPixel(i.left,i.top),l=this._strokeBuffer.offsetOfPixel(i.left,i.top),c=(t.width-r)*l5.BYTES_PER_PIXEL,u=this._strokeBuffer.width-r,d=e.data,h=t.data,f=0;f<o;f++,l+=u,s+=c)for(var p=0;p<r;p++,l++,s+=l5.BYTES_PER_PIXEL){var v=a[l]/255|0;v>0&&0!=d[s+l5.ALPHA_BYTE_OFFSET]&&(h[s+l5.RED_BYTE_OFFSET]=d[s+l5.RED_BYTE_OFFSET]-(260-d[s+l5.RED_BYTE_OFFSET])*v/255|0,h[s+l5.GREEN_BYTE_OFFSET]=d[s+l5.GREEN_BYTE_OFFSET]-(260-d[s+l5.GREEN_BYTE_OFFSET])*v/255|0,h[s+l5.BLUE_BYTE_OFFSET]=d[s+l5.BLUE_BYTE_OFFSET]-(260-d[s+l5.BLUE_BYTE_OFFSET])*v/255|0)}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=i.getWidth(),o=i.getHeight(),s=t.offsetOfPixel(i.left,i.top),l=this._strokeBuffer.offsetOfPixel(i.left,i.top),c=t.width-r,u=this._strokeBuffer.width-r,d=e.data,h=t.data,f=0;f<o;f++,l+=u,s+=c)for(var p=0;p<r;p++,l++,s++){var v=a[l]/255|0;v>0&&(h[s]=Math.max(d[s]-(260-d[s])*v/255,0))}}}]),n}(cw),cT=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(){return lR(this,n),e.apply(this,arguments)}return lI(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a,i,r,o,s=this._strokeBuffer.data,l=this._strokedRegion,c=e.data,u=t.data,d=l.getWidth(),h=e.width*l5.BYTES_PER_PIXEL,f=e.offsetOfPixel(l.left,l.top),p=this._strokeBuffer.offsetOfPixel(l.left,l.top),v=(e.width-d)*l5.BYTES_PER_PIXEL,m=this._strokeBuffer.width-d,g=function(t){a+=c[t+l5.RED_BYTE_OFFSET],i+=c[t+l5.GREEN_BYTE_OFFSET],r+=c[t+l5.BLUE_BYTE_OFFSET],o+=c[t+l5.ALPHA_BYTE_OFFSET]},y=l.top;y<l.bottom;y++,f+=v,p+=m)for(var b=l.left;b<l.right;b++,f+=l5.BYTES_PER_PIXEL,p++){var w=s[p]/255|0;if(w>0){var _=64+-63*w/255|0,E=_+4;a=_*c[f+l5.RED_BYTE_OFFSET],i=_*c[f+l5.GREEN_BYTE_OFFSET],r=_*c[f+l5.BLUE_BYTE_OFFSET],o=_*c[f+l5.ALPHA_BYTE_OFFSET],g(y>0?f-h:f),g(y<e.height-1?f+h:f),g(b>0?f-l5.BYTES_PER_PIXEL:f),g(b<e.width-1?f+l5.BYTES_PER_PIXEL:f),o/=E,a/=E,i/=E,r/=E,u[f+l5.RED_BYTE_OFFSET]=0|a,u[f+l5.GREEN_BYTE_OFFSET]=0|i,u[f+l5.BLUE_BYTE_OFFSET]=0|r,u[f+l5.ALPHA_BYTE_OFFSET]=0|o}}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a,i=this._strokeBuffer.data,r=this._strokedRegion,o=e.data,s=t.data,l=r.getWidth(),c=e.width,u=e.offsetOfPixel(r.left,r.top),d=this._strokeBuffer.offsetOfPixel(r.left,r.top),h=e.width-l,f=this._strokeBuffer.width-l,p=r.top;p<r.bottom;p++,u+=h,d+=f)for(var v=r.left;v<r.right;v++,u++,d++){var m=i[d]/255|0;if(m>0){var g=64+-63*m/255|0,y=g+4;a=g*o[u]+o[p>0?u-c:u]+o[p<e.height-1?u+c:u]+o[v>0?u-1:u]+o[v<e.width-1?u+1:u],s[u]=a/y|0}}}}]),n}(cw),cx=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(){return lR(this,n),e.apply(this,arguments)}return lI(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=e.data,o=t.data,s=this._strokeBuffer.offsetOfPixel(i.left,i.top),l=t.offsetOfPixel(i.left,i.top),c=0|i.getWidth(),u=0|i.getHeight(),d=this._strokeBuffer.width-c|0,h=(t.width-c)*l5.BYTES_PER_PIXEL|0,f=0;f<u;f++,s+=d,l+=h)for(var p=0;p<c;p++,s++,l+=l5.BYTES_PER_PIXEL){var v=a[s],m=v>>>24;if(m>0){var g=r[l+l5.ALPHA_BYTE_OFFSET],y=m+g-m*g/255|0,b=255*m/y|0,w=255-b;o[l]=((v>>16&255)*b+r[l]*w)/255|0,o[l+1]=((v>>8&255)*b+r[l+1]*w)/255|0,o[l+2]=((255&v)*b+r[l+2]*w)/255|0,o[l+3]=y}}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=e.data,o=t.data,s=this._strokeBuffer.offsetOfPixel(i.left,i.top),l=t.offsetOfPixel(i.left,i.top),c=0|i.getWidth(),u=0|i.getHeight(),d=this._strokeBuffer.width-c|0,h=t.width-c|0,f=0;f<u;f++,s+=d,l+=h)for(var p=0;p<c;p++,s++,l++){var v=a[s],m=v>>8;if(m>0){var g=255-m;o[l]=((255&v)*m+r[l]*g)/255|0}}}}]),n}(cw),cO=2/6,cP=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;return lR(this,n),(i=e.call(this,t,a)).wantsOutputAsInput=!0,i}return lI(n,[{key:"_paintToColorStrokeBuffer",value:function(t,e,n,a,i,r){var o=this._strokeBuffer.data,s=e.getWidth(),l=e.getHeight(),c=this._strokeBuffer.width-s,u=a-s,d=t.left+t.top*a,h=this._strokeBuffer.offsetOfPixel(e.left,e.top);this._strokedRegion.union(e);for(var f=0;f<l;f++,d+=u,h+=c)for(var p=0;p<s;p++,d++,h++){var v=n[d]*i/255|0;if(v>0){var m=o[h],g=m>>>24,y=v+g-v*g/255|0,b=255-(255*v/y|0);o[h]=y<<24|(r>>16&255)+((m>>16&255)*b-(r>>16&255)*b)/255<<16|(r>>8&255)+((m>>8&255)*b-(r>>8&255)*b)/255<<8|(255&r)+((255&m)*b-(255&r)*b)/255}}}},{key:"_paintToGreyscaleStrokeBuffer",value:function(t,e,n,a,i,r){var o=this._strokeBuffer.data;this._strokedRegion.union(e);for(var s=e.top,l=t.top;s<e.bottom;s++,l++)for(var c=t.left+l*a,u=this._strokeBuffer.offsetOfPixel(e.left,s),d=e.left;d<e.right;d++,c++,u++){var h=n[c]*i/255|0;if(!(h<=0)){var f=o[u],p=f>>8,v=h+p-h*p/255|0;if(v>0){var m=255-(255*h/v|0);o[u]=v<<8|r+((255&f)*m-r*m)/255}}}}},{key:"beginStroke",value:function(){this._previousSamples=null}},{key:"paintDab",value:function(t,e,a,i,r,o,s){var l=Math.max(1,o.alpha/4),c=(e.left+e.right)/2,u=(e.top+e.bottom)/2,d=Math.max(1,Math.min(64,e.getWidth()*cO)),h=Math.max(1,Math.min(64,e.getHeight()*cO));if(a instanceof l6){null==this._previousSamples&&(this._previousSamples=Array(50),this._previousSamples.fill(n._sampleGrey(a,c,u,d,h)));var f,p,v,m,g,y,b,w=cy(this._previousSamples);f=w,p=255&s,b=w=f*(1-(v=i.resat*i.resat))+p*v,m=w,g=n._sampleGrey(a,c,u,d,h),w=m*(1-(y=i.bleed))+g*y,this._previousSamples.push(w),this._previousSamples.shift(),this._paintToGreyscaleStrokeBuffer(r,e,o.brush,o.width,l,Math.round(b))}else{null==this._previousSamples&&(this._previousSamples=Array(50),this._previousSamples.fill(n._sampleRGB(a,c,u,d,h)));var _=cb(this._previousSamples);_.mixWith(cg.createFromInt(s),i.resat*i.resat);var E=_.toInt();_.mixWith(n._sampleRGB(a,c,u,d,h),i.bleed),this._previousSamples.push(_),this._previousSamples.shift(),this._paintToColorStrokeBuffer(r,e,o.brush,o.width,l,E)}}}],[{key:"_sampleGrey",value:function(t,e,n,a,i){for(var r=[{x:e|=0,y:n|=0}],o=.25;o<1.001;o+=.25)Array.prototype.push.apply(r,[{x:~~(e+o*a),y:n},{x:~~(e-o*a),y:n},{x:e,y:~~(n+o*i)},{x:e,y:~~(n-o*i)},{x:~~(e+.7*o*a),y:~~(n+.7*o*i)},{x:~~(e+.7*o*a),y:~~(n-.7*o*i)},{x:~~(e-.7*o*a),y:~~(n+.7*o*i)},{x:~~(e-.7*o*a),y:~~(n-.7*o*i)}]);return cy(r.map(function(e){return t.getPixel(e.x,e.y)}))}},{key:"_sampleRGB",value:function(t,e,n,a,i){for(var r=[{x:e|=0,y:n|=0}],o=.25;o<1.001;o+=.25)Array.prototype.push.apply(r,[{x:~~(e+o*a),y:n},{x:~~(e-o*a),y:n},{x:e,y:~~(n+o*i)},{x:e,y:~~(n-o*i)},{x:~~(e+.7*o*a),y:~~(n+.7*o*i)},{x:~~(e+.7*o*a),y:~~(n-.7*o*i)},{x:~~(e-.7*o*a),y:~~(n+.7*o*i)},{x:~~(e-.7*o*a),y:~~(n-.7*o*i)}]);return cb(r.map(function(e){return cg.createFromInt(t.getPixel(e.x,e.y))}))}}]),n}(cx),cS=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;return lR(this,n),(i=e.call(this,t,a)).wantsOutputAsInput=!0,i}return lI(n,[{key:"_accumulatePaintFromMask",value:function(t,e,n,a){var i=this._brushBuffer.data,r=t.data,o=n.getWidth(),s=n.getHeight(),l=e.left+e.top*this._brushBuffer.width,c=t.offsetOfPixel(n.left,n.top),u=this._brushBuffer.width-o,d=t.width-o;if(!(a<=0))for(var h=0;h<s;h++,l+=u,c+=d)for(var f=0;f<o;f++,l++,c++){var p=r[c],v=i[l],m=v>>8,g=a+m-a*m/255|0,y=255-(255*a/g|0);i[l]=g<<8|p+((255&v)*y-p*y)/255}}},{key:"_resaturateBrushWithGrey",value:function(t,e,n){if(!(e<=0))for(var a=this._brushBuffer.data,i=t.getWidth(),r=t.getHeight(),o=t.left+t.top*this._brushBuffer.width,s=this._brushBuffer.width-i,l=0;l<r;l++,o+=s)for(var c=0;c<i;c++,o++){var u=a[o],d=u>>8,h=e+d-e*d/255|0,f=255-(255*e/h|0);a[o]=h<<8|n+((255&u)*f-n*f)/255}}},{key:"_paintToGreyscaleStrokeBuffer",value:function(t,e,n,a,i){var r=this._strokeBuffer.data,o=this._brushBuffer.data,s=t.data;this._strokedRegion.union(n);for(var l=n.top,c=e.top;l<n.bottom;l++,c++)for(var u=this._brushBuffer.offsetOfPixel(e.left,c),d=this._strokeBuffer.offsetOfPixel(n.left,l),h=t.offsetOfPixel(n.left,l),f=n.left;f<n.right;f++,u++,h++,d++){var p=o[u],v=(p>>8)*a[u]*i/65025|0;if(v>0){var m=s[h],g=255-v;r[d]=65280|(255&p)+(m*g-(255&p)*g)/255}}}},{key:"_accumulatePaintFromImage",value:function(t,e,n,a){for(var i=this._brushBuffer.data,r=t.data,o=n.getWidth(),s=n.getHeight(),l=e.left+e.top*this._brushBuffer.width,c=t.offsetOfPixel(n.left,n.top),u=this._brushBuffer.width-o,d=(t.width-o)*l5.BYTES_PER_PIXEL,h=0;h<s;h++,l+=u,c+=d)for(var f=0;f<o;f++,l++,c+=l5.BYTES_PER_PIXEL){var p=r[c+l5.ALPHA_BYTE_OFFSET]*a/255|0;if(p>0){var v=i[l],m=v>>>24,g=p+m-p*m/255|0,y=255-(255*p/g|0),b=r[c+l5.RED_BYTE_OFFSET],w=r[c+l5.GREEN_BYTE_OFFSET],_=r[c+l5.BLUE_BYTE_OFFSET];i[l]=g<<24|b+((v>>16&255)*y-b*y)/255<<16|w+((v>>8&255)*y-w*y)/255<<8|_+((255&v)*y-_*y)/255}}}},{key:"_resaturateBrushWithColor",value:function(t,e,n){if(!(e<=0))for(var a=this._brushBuffer.data,i=t.getWidth(),r=t.getHeight(),o=t.left+t.top*this._brushBuffer.width,s=this._brushBuffer.width-i,l=0;l<r;l++,o+=s)for(var c=0;c<i;c++,o++){var u=a[o],d=u>>>24,h=e+d-e*d/255|0,f=255-(255*e/h|0);a[o]=h<<24|(n>>>16&255)+((u>>>16&255)*f-(n>>>16&255)*f)/255<<16|(n>>>8&255)+((u>>>8&255)*f-(n>>>8&255)*f)/255<<8|(255&n)+((255&u)*f-(255&n)*f)/255}}},{key:"_paintToColorStrokeBuffer",value:function(t,e,n,a,i){var r=this._strokeBuffer.data,o=this._brushBuffer.data,s=t.data;this._strokedRegion.union(n);for(var l=n.top,c=e.top;l<n.bottom;l++,c++)for(var u=this._brushBuffer.offsetOfPixel(e.left,c),d=this._strokeBuffer.offsetOfPixel(n.left,l),h=t.offsetOfPixel(n.left,l),f=n.left;f<n.right;f++,u++,h+=l5.BYTES_PER_PIXEL,d++){var p=o[u],v=(p>>>24)*a[u]*i/65025|0;if(v>0){var m=s[h+l5.ALPHA_BYTE_OFFSET],g=v+m-v*m/255|0,y=s[h+l5.RED_BYTE_OFFSET],b=s[h+l5.GREEN_BYTE_OFFSET],w=s[h+l5.BLUE_BYTE_OFFSET],_=255-(255*v/g|0);r[d]=g<<24|(p>>16&255)+(y*_-(p>>16&255)*_)/255<<16|(p>>8&255)+(b*_-(p>>8&255)*_)/255<<8|(255&p)+(w*_-(255&p)*_)/255}}}},{key:"paintDab",value:function(t,e,n,a,i,r,o){t instanceof l5?null==this._brushBuffer?(this._brushBuffer=new l6(r.width,r.height,32),this._accumulatePaintFromImage(n,i,e,255)):(this._resaturateBrushWithColor(i,~~(a.resat<=0?0:Math.max(1,a.resat*a.resat*255)),0xffffff&o),this._paintToColorStrokeBuffer(t,i,e,r.brush,r.alpha),this._accumulatePaintFromImage(n,i,e,~~(255*a.bleed))):null==this._brushBuffer?(this._brushBuffer=new l6(r.width,r.height,16),this._accumulatePaintFromMask(n,i,e,255)):(this._resaturateBrushWithGrey(i,~~(a.resat<=0?0:Math.max(1,a.resat*a.resat*255)),255&o),this._paintToGreyscaleStrokeBuffer(t,i,e,r.brush,r.alpha),this._accumulatePaintFromMask(n,i,e,~~(255*a.bleed)))}},{key:"endStroke",value:function(){this._brushBuffer=null}}]),n}(cx);function cL(t,e){var n=t.data;if(e.left>0)for(var a=e.top;a<e.bottom;a++)for(var i=a*t.width,r=i,o=n[i+e.left],s=0;s<e.left;s++,r++)n[r]=o;if(e.right<t.width)for(var l=e.top;l<e.bottom;l++)for(var c=l*t.width+e.right,u=n[c-1],d=e.right;d<t.width;d++,c++)n[c]=u;for(var h=0,f=0;f<e.top;f++)for(var p=e.top*t.width,v=0;v<t.width;v++,p++,h++)n[h]=n[p];h=e.bottom*t.width;for(var m=e.bottom;m<t.width;m++)for(var g=(e.bottom-1)*t.width,y=0;y<t.width;y++,g++,h++)n[h]=n[g]}var cA=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;return lR(this,n),(i=e.call(this,t,a))._brushBuffer=null,i.wantsOutputAsInput=!0,i.noMergePhase=!0,i}return lI(n,[{key:"_sampleFromMask",value:function(t,e,n,a){var i=this._brushBuffer.data,r=e.getWidth(),o=e.getHeight(),s=this._brushBuffer.offsetOfPixel(e.left,e.top),l=t.offsetOfPixel(n.left,n.top),c=this._brushBuffer.width-r,u=t.width-r,d=255-a;if(255!=a){for(var h=0;h<o;h++,s+=c,l+=u)for(var f=0;f<r;f++,s++,l++){var p=t.data[l],v=i[s],m=(p*d+(255&v)*a)/255,g=(255*d+(v>>8)*a)/255<<8|m;g==v&&(p>m?g++:p<m&&g--),i[s]=g}cL(this._brushBuffer,e)}}},{key:"_paintToMask",value:function(t,e,n,a){for(var i=e.getWidth(),r=e.getHeight(),o=this._brushBuffer.offsetOfPixel(e.left,e.top),s=t.offsetOfPixel(n.left,n.top),l=this._brushBuffer.width-i,c=t.width-i,u=t.data,d=this._brushBuffer.data,h=0;h<r;h++,s+=c,o+=l)for(var f=0;f<i;f++,o++,s++){var p=d[o],v=(p>>8)*a[o]/255|0,m=255&p;v>0&&(u[s]=m)}}},{key:"_sampleFromImage",value:function(t,e,n,a){var i=this._brushBuffer.data,r=e.getWidth(),o=e.getHeight(),s=this._brushBuffer.offsetOfPixel(e.left,e.top),l=t.offsetOfPixel(n.left,n.top),c=this._brushBuffer.width-r,u=(t.width-r)*l5.BYTES_PER_PIXEL,d=255-a;if(255!=a){for(var h=0;h<o;h++,s+=c,l+=u)for(var f=0;f<r;f++,s++,l+=l5.BYTES_PER_PIXEL){var p=t.data[l+l5.RED_BYTE_OFFSET],v=t.data[l+l5.GREEN_BYTE_OFFSET],m=t.data[l+l5.BLUE_BYTE_OFFSET],g=t.data[l+l5.ALPHA_BYTE_OFFSET],y=i[s],b=(g*d+(y>>24&255)*a)/255<<24&0xff000000|(p*d+(y>>16&255)*a)/255<<16&0xff0000|(v*d+(y>>8&255)*a)/255<<8&65280|(m*d+(255&y)*a)/255&255;if(b==y){var w=(0xff0000&b)>>16,_=(65280&b)>>8,E=255&b;p>w?b+=65536:p<w&&(b-=65536),v>_?b+=256:v<_&&(b-=256),m>E?b+=1:m<E&&(b-=1)}i[s]=b}cL(this._brushBuffer,e)}}},{key:"_paintToImage",value:function(t,e,n,a){for(var i=e.getWidth(),r=e.getHeight(),o=this._brushBuffer.offsetOfPixel(e.left,e.top),s=t.offsetOfPixel(n.left,n.top),l=this._brushBuffer.width-i,c=(t.width-i)*l5.BYTES_PER_PIXEL,u=t.data,d=this._brushBuffer.data,h=0;h<r;h++,s+=c,o+=l)for(var f=0;f<i;f++,o++,s+=l5.BYTES_PER_PIXEL){var p=d[o];((p>>>24)*a[o]/255|0)>0&&(u[s+l5.RED_BYTE_OFFSET]=p>>16&255,u[s+l5.GREEN_BYTE_OFFSET]=p>>8&255,u[s+l5.BLUE_BYTE_OFFSET]=255&p,u[s+l5.ALPHA_BYTE_OFFSET]=p>>24&255)}}},{key:"paintDab",value:function(t,e,n,a,i,r,o){t instanceof l5?null==this._brushBuffer?(this._brushBuffer=new l6(r.width,r.height,32),this._sampleFromImage(n,i,e,0)):(this._sampleFromImage(n,i,e,r.alpha),this._paintToImage(t,i,e,r.brush)):null==this._brushBuffer?(this._brushBuffer=new l6(r.width,r.height,16),this._sampleFromMask(n,i,e,0)):(this._sampleFromMask(n,i,e,r.alpha),this._paintToMask(t,i,e,r.brush))}},{key:"mergeOntoImage",value:function(t,e,n){}},{key:"mergeOntoMask",value:function(t,e,n){}},{key:"beginStroke",value:function(){this._brushBuffer=null}},{key:"endStroke",value:function(){this._brushBuffer=null}}]),n}(cx);function cC(t,e){return t+e}function cM(t){return t?t.width*t.height*4:0}function cR(t,e){t|=0,e|=0;var n=new l3("Root",l7.LM_NORMAL),a=new ci(n,t,e,!0),i=new l5(t,e),r=new l$(0,0,t,e),o=new l6(t,e,8),s=new l$(0,0,t,e),l=new l6(t,e,32),c=new l$(0,0,0,0),u=new cs,d=this,h=[],f=n,p=!1,v=null,m=new l$(0,0,0,0),g=!1,y=new l$(0,0,0,0),b=null,w=new ch,_=null,E=null,k=[],T=[],x=null,O=0,P=0,S=0,L=!1,A=!1,C=new Set,M=new Set,R=null,B=0,I="smooth";function F(t){A=!1,(M.size>0||C.size>0)&&(t?Y():R||setTimeout(Y,1e3))}function D(){d.emitEvent("changeSelection",[])}function N(t){d.emitEvent("updateRegion",[t])}function H(){d.emitEvent("changeStructure"),a.resetTree(),$(),N(d.getBounds())}function W(t,e,n){d.emitEvent("changeLayer",[t]),n||(a.layerPropertyChanged(t,e),N(d.getBounds()))}function Y(){var t=!0,e=!1,n=void 0;try{for(var a,i=M[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var r=a.value;r.rebuildImageThumbnail(),d.emitEvent("changeLayerImageThumb",[r])}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}var o=!0,s=!1,l=void 0;try{for(var c,u=C[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value;h.rebuildMaskThumbnail(),d.emitEvent("changeLayerMaskThumb",[h])}}catch(t){s=!0,l=t}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}M.clear(),R&&(clearTimeout(R),R=null)}function U(t,e,n,i){Array.isArray(t)||(t=[t]),t.forEach(function(t){return a.invalidateLayerRect(t,e)});var o=!1;if(n){r.union(e);var l=!0,c=!1,u=void 0;try{for(var d,h=t[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;f instanceof cn&&(M.add(f),o=!0)}}catch(t){c=!0,u=t}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}}i&&(s.union(e),t.forEach(function(t){C.add(t),v&&v.layer==t&&v.invalidateRect(e)}),o=!0),o&&(R&&(clearTimeout(R),R=null),A||(R=setTimeout(Y,1e3))),N(e)}function j(t,e){U(t,e,!p,p)}function z(){return p?f.mask:f.image}function q(t,e){t.copyAlphaFrom(i,e)}function X(){if(!c.isEmpty()){if(p){var t=f.mask;x.brushMode==lZ.BRUSH_MODE_ERASE?h[lZ.BRUSH_MODE_PAINT].mergeOntoMask(t,o,0xff000000):h[x.brushMode].mergeOntoMask(t,o,255&B)}else{var e=f.image,n=f.getLockAlpha();x.brushMode==lZ.BRUSH_MODE_ERASE&&n?h[lZ.BRUSH_MODE_PAINT].mergeOntoImage(e,i,0xffffff):h[x.brushMode].mergeOntoImage(e,i,B),n&&q(e,c)}c.makeEmpty()}}function G(){X(),a.buildTree()}function V(){f instanceof cn&&!r.isEmpty()&&(i.copyBitmapRect(f.image,r.left,r.top,r),r.makeEmpty())}function K(){f.mask&&!s.isEmpty()&&(o.copyBitmapRect(f.mask,s.left,s.top,s),s.makeEmpty())}function Z(){p?K():V()}function $(){var t=d.getBounds();r.set(t),s.set(t)}function Q(t){d.setHasUnsavedChanges(!0),T.length>0&&(T=[]),0!==k.length&&k[k.length-1].merge(t)?k[k.length-1].noChange()&&k.pop():(k.length>=30&&k.shift(),d.compactUndo(),k.push(t))}function J(t,e){t||e||(t=!p,e=p);var n=m.clone(),a=t?i.copyRectXOR(f.image,n):null,r=e?o.copyRectXOR(f.mask,n):null;this.layer=f,m.makeEmpty(),this.undo=function(){a&&this.layer.image.setRectXOR(a,n),r&&this.layer.mask.setRectXOR(r,n),U(this.layer,n,null!=a,null!=r)},this.redo=this.undo,this.getMemoryUsed=function(t,e){return(a?a.length:0)+(r?r.length:0)}}function tt(t){var e=t.maskLinked,n=t.maskVisible;this.undo=function(){t.setMask(null),t.maskLinked=e,t.maskVisible=n,H(),d.setActiveLayer(t,!1)},this.redo=function(){var e=new l6(d.width,d.height,8);e.clearAll(255),t.maskLinked=!0,t.maskVisible=!0,t.setMask(e),H(),d.setActiveLayer(t,!0)},this.redo()}function te(t,e){var n,a=t.mask,i=!1;n=e&&t instanceof cn?t.image.clone():null,i=f==t&&p,this.undo=function(){t.setMask(a),n&&(t.image.copyPixelsFrom(n),U(t,t.image.getBounds(),!0,!1)),i&&d.setActiveLayer(t,!0),H()},this.redo=function(){n&&(l7.multiplyAlphaByMask(t.image,100,t.mask),U(t,d.getBounds(),!0,!1)),i&&d.setActiveLayer(t,!1),t.setMask(null),H()},this.redo()}function tn(t,e,n){var a=n instanceof cn&&n.clip,i=t.layers[e],r=i instanceof cn&&i.clip,o=p;this.undo=function(){t.removeLayer(n);var s=t.layers[e-1]||t.layers[0]||t;i instanceof cn&&(i.clip=r),n instanceof cn&&(n.clip=a),H(),d.setActiveLayer(s,o)},this.redo=function(){t.insertLayer(e,n),r&&(n instanceof cn?n.clip=!0:i.clip=!1),H(),d.setActiveLayer(n,!1)},this.redo()}function ta(t){var e=t.clone(),n=p;this.undo=function(){e.parent.removeLayer(e),H(),d.setActiveLayer(t,n)},this.redo=function(){var n=" Copy",a=t.name;a.endsWith(n)||(a+=n),e.name=a,t.parent.insertLayer(t.parent.indexOf(t)+1,e),H(),d.setActiveLayer(e,!1)},this.redo()}function ti(t){var e=t.parent,n=e.indexOf(t),a=p,i=0;if(t instanceof cn&&!t.clip)for(var r=n+1;r<e.layers.length&&e.layers[r]instanceof cn&&e.layers[r].clip;r++)i++;this.undo=function(){e.insertLayer(n,t);for(var r=0;r<i;r++)e.layers[r+n+1].clip=!0;H(),d.setActiveLayer(t,a)},this.redo=function(){for(var a,r=0;r<i;r++)e.layers[r+n+1].clip=!1;e.removeLayerAtIndex(n),a=0==e.layers.length?t.parent:e.layers[Math.max(n-1,0)],H(),d.setActiveLayer(a,!1)},this.getMemoryUsed=function(e,n){return e?0:t.getMemoryUsed()},this.redo()}function tr(t){var e=t.parent.indexOf(t),n=p,a=new cn(d.width,d.height,"");this.undo=function(){t.parent.setLayerAtIndex(e,t),H(),d.setActiveLayer(t,n)},this.redo=function(){t.parent.setLayerAtIndex(e,a),H(),d.setActiveLayer(a,!1)},this.getMemoryUsed=function(e,n){return e?0:t.getMemoryUsed()};var i,r=new ci(t,d.width,d.height,!1);r.buildTree(),i=r.blendTree(),a.name=t.name,a.alpha=i.alpha,a.image=i.image,a.blendMode=i.blendMode,a.mask=i.mask,a.blendMode==l7.LM_PASSTHROUGH&&(a.blendMode=l7.LM_NORMAL),this.redo()}function to(t){var e=t.parent,n=e.layers[e.indexOf(t)-1],a=new cn(d.width,d.height,""),i=p;this.undo=function(){var r=e.indexOf(a);e.removeLayerAtIndex(r),e.insertLayer(r,t),e.insertLayer(r,n),H(),d.setActiveLayer(t,i)},this.redo=function(){a.copyFrom(n),t.getEffectiveAlpha()>0&&(a.mask?(l7.multiplyAlphaByMask(a.image,a.alpha,a.mask),a.mask=null):l7.multiplyAlphaBy(a.image,a.alpha),a.alpha=100,l7.fuseImageOntoImage(a.image,!0,t.image,t.alpha,t.blendMode,t.getBounds(),t.mask));var i=e.indexOf(n);e.removeLayerAtIndex(i),e.removeLayerAtIndex(i),e.insertLayer(i,a),H(),d.setActiveLayer(a,!1)},this.getMemoryUsed=function(e,n){return e?0:t.getMemoryUsed()+a.getMemoryUsed()},this.redo()}function ts(){var t=d.getActiveLayer(),e=n.layers.slice(0),a=new cn(d.width,d.height,"");this.undo=function(){n.layers=e.slice(0),H(),d.setActiveLayer(t,!1)},this.redo=function(){var t=d.fusionLayers();a.copyImageFrom(t),n.clearLayers(),a.setName(d.getDefaultLayerName(!1)),n.addLayer(a),H(),d.setActiveLayer(a,!1)},this.getMemoryUsed=function(t,n){return e.map(function(t){return t.getMemoryUsed()}).reduce(cC,0)},this.redo()}function tl(t,e,n){var a=t.parent,i=t.parent.indexOf(t),r=p,o=a.layers[a.indexOf(t)+1],s=e.layers[n],l=t instanceof cn&&t.clip,c=!!l&&t.getClippingBase(),u=0,h=0;if(t instanceof cn&&!t.clip)for(var f=i+1;f<a.layers.length&&a.layers[f]instanceof cn&&a.layers[f].clip;f++)u++;else if(t instanceof l3)for(var v=n;v<e.layers.length&&e.layers[v]instanceof cn&&e.layers[v].clip;v++)h++;this.undo=function(){t.parent.removeLayer(t);var s=o?a.indexOf(o):a.layers.length;a.insertLayer(s,t),t instanceof cn&&(t.clip=l);for(var c=0;c<u;c++)a.layers[c+i+1].clip=!0;for(var f=0;f<h;f++)e.layers[f+n].clip=!0;H(),d.setActiveLayer(t,r)},this.redo=function(){for(var n=0;n<u;n++)a.layers[n+i+1].clip=!1;t.parent.removeLayer(t);var r=s?e.indexOf(s):e.layers.length;e.insertLayer(r,t);for(var o=0;o<h;o++)e.layers[o+r+1].clip=!1;t instanceof cn&&(t.clip&&t.getClippingBase()!=c&&(t.clip=!1),s instanceof cn&&s.clip&&(t.clip=!0));for(var l=0;l<h;l++)e.layers[l+r+1].clip=!1;H(),d.setActiveLayer(t,!1)},this.redo()}function tc(t,e){var n=t.substring(0,1).toUpperCase()+t.substring(1),a=function(t,e){Array.isArray(t)||(t=[t]),this.layers=t,this.from=this.layers.map(function(t){return t["get"+n]()}),this.to=e,this.redo()};return a.prototype=Object.create(cl.prototype),a.prototype.constructor=a,a.prototype.undo=function(){var a=this;this.layers.forEach(function(t,e){return t["set"+n](a.from[e])}),this.layers.forEach(function(n){return W(n,t,!e)})},a.prototype.redo=function(){var a=this;this.layers.forEach(function(t){return t["set"+n](a.to)}),this.layers.forEach(function(n){return W(n,t,!e)})},a.prototype.merge=function(t){return!!(t instanceof a&&function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}(this.layers,t.layers))&&(this.to=t.to,!0)},a.prototype.noChange=function(){for(var t=0;t<this.from.length;t++)if(this.from[t]!=this.to)return!1;return!0},a}this.getLayersRoot=function(){return n},this.getSelectionAutoSelect=function(){return y.isEmpty()?this.getBounds():this.getSelection()},this.getSelection=function(){return y.clone()},this.setHasUnsavedChanges=function(t){t!=g&&(g=t,this.emitEvent("unsavedChanges",[t]))},this.getHasUnsavedChanges=function(){return g},this.isAddLayerMaskAllowed=function(){return!f.mask},this.addLayerMask=function(){this.isAddLayerMaskAllowed()&&Q(new tt(f))},this.isRemoveLayerMaskAllowed=function(){return null!==f.mask},this.removeLayerMask=function(){this.isRemoveLayerMaskAllowed()&&Q(new te(f,!1))},this.isApplyLayerMaskAllowed=function(){return null!==f.mask&&f instanceof cn},this.applyLayerMask=function(t){this.isApplyLayerMaskAllowed()&&Q(new te(f,!0))},this.addLayer=function(t){var e,n,a;if(f instanceof l3&&f.expanded?(e=f,n=f.layers.length):n=(e=f.parent).layers.indexOf(f)+1,"group"===t){for(;e.layers[n]instanceof cn&&e.layers[n].clip;)n++;a=new l3(this.getDefaultLayerName(!0),l7.LM_PASSTHROUGH)}else(a=new cn(this.width,this.height,this.getDefaultLayerName(!1))).image.clearAll(0xffffff);return Q(new tn(e,n,a)),a},this.addLayerObject=function(t,e){t.addLayer(e),t==n&&1==n.layers.length&&(f=e),H()},this.addLayerGroupObject=function(t,e,n){for(var a=[],i=0;i<n;i++)a.unshift(t.layers.pop());a.forEach(function(t){return e.addLayer(t)}),this.addLayerObject(t,e)},this.isRemoveLayerAllowed=function(){return f instanceof cn?n.getLinearizedLayerList(!1).some(function(t){return t instanceof cn&&t!=f}):f instanceof l3&&n.getLinearizedLayerList(!1).some(function(t){return t instanceof cn&&!t.hasAncestor(f)})},this.removeLayer=function(){return!!this.isRemoveLayerAllowed()&&(Q(new ti(f)),!0)},this.duplicateLayer=function(){Q(new ta(f))},this.isMergeDownAllowed=function(){var t=f.parent.indexOf(f);return t>0&&f instanceof cn&&f.parent.layers[t-1]instanceof cn},this.mergeDown=function(){this.isMergeDownAllowed()&&Q(new to(f))},this.isMergeGroupAllowed=function(){return f instanceof l3&&f.getEffectiveAlpha()>0},this.mergeGroup=function(){this.isMergeGroupAllowed()&&Q(new tr(f))},this.isMergeAllLayersAllowed=function(){return n.getLinearizedLayerList(!1).length>1},this.mergeAllLayers=function(){this.isMergeAllLayersAllowed()&&Q(new ts)},this.relocateLayer=function(t,e,n){t&&e&&t!=e&&!e.hasAncestor(t)&&Q(new tl(t,e,n))},this.setLayerVisibility=function(t,e){var n=[];if(t.ancestorsAreVisible())t.visible!=e&&Q(new th(t,e));else{for(var a=t;null!=a;a=a.parent)a.visible||n.push(a);Q(new th(n,!0))}},this.expandLayerGroup=function(t,e){t.expanded!=e&&(t.expanded=e,!e&&f.hasAncestor(t)&&this.setActiveLayer(t,!1),W(t,"expanded",!0))},this.setLayerAlpha=function(t){f.getAlpha()!=t&&Q(new tu(f,t))},this.setLayerMaskLinked=function(t){f.maskLinked!=t&&Q(new tg(f,t))},this.setLayerMaskVisible=function(t,e){t.maskVisible!=e&&Q(new tp(t,e))},this.setLayerBlendMode=function(t){f.getBlendMode()!=t&&(t!=l7.LM_PASSTHROUGH||f instanceof l3)&&Q(new td(f,t))},this.setLayerName=function(t,e){t.getName()!=e&&Q(new tv(t,e))},this.paintDab=function(t,e,n){x.applyPressure(n),x.scattering>0&&(t+=w.nextGaussian()*x.curScattering/4,e+=w.nextGaussian()*x.curScattering/4);var a=h[x.brushMode],i=u.getDab(t,e,x),r=new l$(0,0,i.width,i.height),o=new l$(0,0,i.width,i.height);if(o.translate(i.x,i.y),d.getBounds().clipSourceDest(r,o),!o.isEmpty()){m.union(o);var s=p?f.mask:f.image,l=L&&!p?b:s;a.paintDab(s,o,l,x,r,i,B),!p&&a.noMergePhase&&f.getLockAlpha()&&q(s,o),a.wantsOutputAsInput&&(X(),L&&!p&&d.fusionLayers()),j(f,o)}},this.getDefaultLayerName=function(t){for(var e=t?"Group ":"Layer ",a=t?/^Group [0-9]+$/:/^Layer [0-9]+$/,i=0,r=n.getLinearizedLayerList(!1),o=0;o<r.length;o++){var s=r[o];a.test(s.name)&&(i=Math.max(i,parseInt(s.name.substring(e.length),10)))}return e+(i+1)},this.addBackgroundLayer=function(){var t=new cn(d.width,d.height,this.getDefaultLayerName(!1));t.image.clearAll(0xffffffff),this.addLayerObject(this.getLayersRoot(),t)},this.addDefaultLayer=function(){var t=new cn(d.width,d.height,this.getDefaultLayerName(!1));t.image.clearAll(0xffffff),this.addLayerObject(this.getLayersRoot(),t),this.setActiveLayer(t,!1)},this.fusionLayers=function(){return G(),b=a.blendTree().image},this.upgradeMultiplyLayers=function(t){for(var e=this.getLayersRoot().getLinearizedLayerList(!1,[]),n=-1,a=0;a<e.length;a++){var i=e[a];if(!(i instanceof cn)||i.mask||i.blendMode>l7.LM_LAST_CHIBIPAINT)throw Error("Bad layer type during multiply upgrade");i.blendMode===l7.LM_MULTIPLY&&(n=a)}if(-1!==n){var r=new l5(this.width,this.height),o=!0,s=!0,l=this.getBounds();r.clearAll(l,0xffffff);for(var c=0;c<=n;c++){var u=e[c];s||(o=o&&r.hasAlphaInRect(l)),u.blendMode===l7.LM_MULTIPLY&&("bake"===t?!o&&u.getEffectiveAlpha()>0&&(100===u.alpha?l7.upgradeMultiplyOfOpaqueLayer(r,u.image,100,l):l7.upgradeMultiplyOfTransparentLayer(r,u.image,u.alpha,l),u.setBlendMode(l7.LM_MULTIPLY2)):o&&u.setBlendMode(l7.LM_MULTIPLY2)),u.getEffectiveAlpha()>0&&(s=!1,l7.fuseImageOntoImage(r,o,u.image,u.alpha,u.blendMode,l,null))}}},this.isCreateClippingMaskAllowed=function(){var t=f.parent.indexOf(f),e=f.parent.layers[t-1];return f instanceof cn&&!f.clip&&e instanceof cn},this.createClippingMask=function(){this.isCreateClippingMaskAllowed()&&Q(new tf(f,!0))},this.isReleaseClippingMaskAllowed=function(){return f instanceof cn&&f.clip},this.releaseClippingMask=function(){this.isReleaseClippingMaskAllowed()&&Q(new tf(f,!1))},this.setActiveLayer=function(t,e){if(t){var n=(e=t.mask&&e)!=p;if(f!=t||n){var a=f;f=t,p=e,$(),this.emitEvent("changeActiveLayer",[a,t,p]),n&&this.emitEvent("editModeChanged",[p?cR.EDITING_MODE_MASK:cR.EDITING_MODE_IMAGE]),v&&v.layer==a&&(e?v.setLayer(t):this.closeMaskView())}}},this.closeMaskView=function(){v.close(),v=null},this.toggleMaskView=function(){return null!=v&&v.isOpen()?this.closeMaskView():v=f.mask?new co(f,X):null,v},this.selectTopmostVisibleLayer=function(){for(var t=n.getLinearizedLayerList(!1),e=t.length-1;e>=0;e--)if(t[e]instanceof cn&&t[e].getEffectiveAlpha()>0){this.setActiveLayer(t[e],!1);return}for(var a=t.length-1;a>=0;a--)if(t[a]instanceof cn){this.setActiveLayer(t[a],!1);return}this.setActiveLayer(t[t.length-1],!1)},this.getActiveLayer=function(){return f},this.isEditingMask=function(){return p},this.isActiveLayerDrawable=function(){return p&&f.mask||!p&&f instanceof cn},this.getUndoMemoryUsed=function(){var t=0,e=!0,n=!1,a=void 0;try{for(var i,r=T[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;t+=o.getMemoryUsed(!0,null)}}catch(t){n=!0,a=t}finally{try{e||null==r.return||r.return()}finally{if(n)throw a}}var s=!0,l=!1,c=void 0;try{for(var u,d=k[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var h=u.value;t+=h.getMemoryUsed(!1,null)}}catch(t){l=!0,c=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}return t},this.isUndoAllowed=function(){return k.length>0},this.isRedoAllowed=function(){return T.length>0},this.undo=function(){if(this.isUndoAllowed()){this.setHasUnsavedChanges(!0);var t=k.pop();t.undo(),T.push(t)}},this.redo=function(){if(this.isRedoAllowed()){this.setHasUnsavedChanges(!0);var t=T.pop();t.redo(),k.push(t)}},this.performIdleTasks=function(){Z(),G()},this.compactUndo=function(){k.length>0&&k[k.length-1].compact()},this.clearHistory=function(){k=[],T=[]},this.colorPicker=function(t,e){return p&&f.mask?cd.greyToRGB(f.mask.getPixel(~~t,~~e)):0xffffff&b.getPixel(~~t,~~e)},this.setSelection=function(t){y.set(t),y.roundNearest(),y.clipTo(this.getBounds())},this.emptySelection=function(){y.makeEmpty()},this.floodFill=function(t,e){var n=z();n&&(Z(),m=this.getBounds(),n.floodFill(~~t,~~e,0xff000000|B),Q(new J),j(f,this.getBounds()))},this.gradientFill=function(t,e,n,a,i){var r=this.getSelectionAutoSelect(),o=z();o&&(Z(),m=r.clone(),o.gradient(r,t,e,n,a,i,!1),this.getLayerLockAlpha()&&o instanceof l5&&q(o,r),Q(new J),j(f,r))},this.fill=function(t){var e=this.getSelectionAutoSelect(),n=z();n&&(Z(),m=e.clone(),n.clearRect(e,t),Q(new J),j(f,e))},this.clear=function(){p?this.fill(0):this.fill(0xffffff)},this.flip=function(t){var e=this.getSelection(),n=e.isEmpty(),a=n&&f instanceof cn&&f.mask&&f.maskLinked,r=(!p||a)&&f instanceof cn,s=(p||a)&&f.mask,l=t?"copyRegionHFlip":"copyRegionVFlip";(r||s)&&(n&&(e=this.getBounds()),m=e.clone(),r&&(V(),f.image[l](e,i)),s&&(K(),f.mask[l](e,o)),Q(new J(r,s)),U(f,e,r,s))},this.hFlip=function(){this.flip(!0)},this.vFlip=function(){this.flip(!1)},this.monochromaticNoise=function(){var t=this.getSelectionAutoSelect(),e=z();e&&(Z(),m=t.clone(),e.fillWithNoise(t),Q(new J),j(f,t))},this.isColorNoiseAllowed=function(){return!this.isEditingMask()&&this.isActiveLayerDrawable()},this.colorNoise=function(){if(this.isColorNoiseAllowed()){var t=this.getSelectionAutoSelect();Z(),m=t.clone(),f.image.fillWithColorNoise(t),Q(new J(!0,!1)),U(f,t,!0,!1)}},this.invert=function(){var t=this.getSelectionAutoSelect(),e=z();e&&(Z(),m=t.clone(),e.invert(t),Q(new J),j(f,t))},this.boxBlur=function(t,e,n){var a=this.getSelectionAutoSelect(),i=z();if(i){Z(),m=a.clone();for(var r=0;r<n;r++)i.boxBlur(a,t,e);Q(new J),j(f,a)}},this.rectangleSelection=function(t){var e=t.clone();e.clipTo(this.getBounds()),Q(new ty(this.getSelection(),e)),this.setSelection(e)},this.move=function(t,e,n){if(e|=0,0!=(t|=0)||0!=e){var a=k.length>0?k[k.length-1]:null;if(!n&&a instanceof t_&&a.layer==this.getActiveLayer())a.amend(t,e),T=[],this.setHasUnsavedChanges(!0);else{var i=new t_(t,e,n);Q(i),i.redo()}}},this.setTransformInterpolation=function(t){I=t,_ instanceof tw&&_.setInterpolation(t)},this.transformAffineAbort=function(){_ instanceof tw&&(_.undo(),_=null,F(!0))},this.transformAffineBegin=function(){if(_ instanceof tw)return{transform:_.getTransform(),rect:_.getInitialTransformRect(),selection:_.getInitialSelectionRect()};var t,e=new cf;return(t=new tw(e,I)).getInitialTransformRect().isEmpty()?null:(_=t,A=!0,{transform:e,rect:t.getInitialTransformRect(),selection:t.getInitialSelectionRect()})},this.transformAffineFinish=function(){_ instanceof tw&&(Q(_),_=null,F(!0))},this.transformAffineAmend=function(t){_ instanceof tw&&_.amend(t)},this.isCutSelectionAllowed=function(){return!this.getSelection().isEmpty()&&null!==z()},this.isCopySelectionAllowed=this.isCutSelectionAllowed,this.cutSelection=function(){this.isCutSelectionAllowed()&&Q(new tE(f,p,this.getSelection()))},this.copySelection=function(){if(this.isCopySelectionAllowed()){var t=d.getSelection();E=new cc(z().cloneRect(t),t.left,t.top)}},this.isCopySelectionMergedAllowed=function(){return!this.getSelection().isEmpty()},this.copySelectionMerged=function(){if(this.isCopySelectionMergedAllowed()){var t=d.getSelection();E=new cc(this.fusionLayers().cloneRect(t),t.left,t.top)}},this.isPasteClipboardAllowed=function(){return!this.isClipboardEmpty()},this.pasteClipboard=function(){this.isPasteClipboardAllowed()&&Q(new tk(E))},this.getClipboard=function(){return E},this.setClipboard=function(t){E=t},this.isClipboardEmpty=function(){return null==E},this.setSampleAllLayers=function(t){L=t},this.getLayerLockAlpha=function(){return this.getActiveLayer().getLockAlpha()},this.setLayerLockAlpha=function(t){f.getLockAlpha()!=t&&Q(new tm(f,t))},this.setForegroundColor=function(t){B=t},this.setBrush=function(t){x=t},this.setBrushTexture=function(t){u.setTexture(t)},this.beginStroke=function(t,e,n){return!!(null!==x&&this.isActiveLayerDrawable())&&(Z(),m.makeEmpty(),l.clearAll(0),c.makeEmpty(),O=t,P=e,S=n,A=!0,h[x.brushMode].beginStroke(),this.paintDab(t,e,n),!0)},this.continueStroke=function(t,e,n){if(null!=x){var a=Math.sqrt((O-t)*(O-t)+(P-e)*(P-e)),i=Math.max(x.minSpacing,x.curSize*x.spacing);if(a>i){for(var r=O,o=P,s=S,l=(i-.001)/a,c=l;c<=1;c+=l)r=c*t+(1-c)*O,o=c*e+(1-c)*P,s=c*n+(1-c)*S,this.paintDab(r,o,s);O=r,P=o,S=s}}},this.endStroke=function(){null!=x&&(X(),h[x.brushMode].endStroke(),m.clipTo(this.getBounds()),m.isEmpty()||(Q(new J),Z()),F(!1))},this.hasAlpha=function(){return b.hasAlpha()},this.getFlatPNG=function(t){return this.fusionLayers(),b.getAsPNG(t)},this.getFlatPNGBuffer=function(t){return this.fusionLayers(),b.getAsPNGBuffer(t)},this.isSimpleDrawing=function(){return 1==n.layers.length&&n.layers[0]instanceof cn&&!n.layers[0].mask&&100==n.layers[0].getEffectiveAlpha()},J.prototype=Object.create(cl.prototype),J.prototype.constructor=J,tt.prototype=Object.create(cl.prototype),tt.prototype.constructor=tt,te.prototype=Object.create(cl.prototype),te.prototype.constructor=te,tn.prototype=Object.create(cl.prototype),tn.prototype.constructor=tn,ta.prototype=Object.create(cl.prototype),ta.prototype.constructor=ta,ti.prototype=Object.create(cl.prototype),ti.prototype.constructor=ti,tr.prototype=Object.create(cl.prototype),tr.prototype.constructor=tr,to.prototype=Object.create(cl.prototype),to.prototype.constructor=to,ts.prototype=Object.create(cl.prototype),ts.prototype.constructor=ts,tl.prototype=Object.create(cl.prototype),tl.prototype.constructor=tl;var tu=tc("alpha",!0),td=tc("blendMode",!0),th=tc("visible",!0),tf=tc("clip",!0),tp=tc("maskVisible",!0),tv=tc("name",!1),tm=tc("lockAlpha",!1),tg=tc("maskLinked",!1);function ty(t,e){t=t.clone(),e=e.clone(),this.undo=function(){d.setSelection(t),N(d.getBounds())},this.redo=function(){d.setSelection(e),N(d.getBounds())},this.noChange=function(){return t.equals(e)}}ty.prototype=Object.create(cl.prototype),ty.prototype.constructor=ty;var tb=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(){lR(this,n),(t=e.call(this)).layer=f,t.fromSelection=d.getSelection(),t.fromMaskMode=p,t.movingWholeLayer=t.fromSelection.isEmpty(),t.movingImage=!p||t.movingWholeLayer&&t.layer.maskLinked,t.movingMask=p||t.movingWholeLayer&&t.layer.maskLinked,t.hasFullUndo=!1,t.erasesSourceRect=!1,t.dstRect=new l$(0,0,0,0),t.movingLayers=[{layer:t.layer,moveImage:t.layer instanceof cn&&t.movingImage,moveMask:null!==t.layer.mask&&t.movingMask,imageRect:new Map,maskRect:new Map}],t.layer instanceof l3&&t.movingImage&&t.movingWholeLayer&&(t.movingLayers=t.movingLayers.concat(t.layer.getLinearizedLayerList(!1).map(function(t){return{layer:t,moveImage:t instanceof cn,moveMask:null!==t.mask&&t.maskLinked,imageRect:new Map,maskRect:new Map}})));var t,a=new l$(0,0,0,0);if(t.movingWholeLayer){t.srcRect=d.getBounds();for(var i=0;i<t.movingLayers.length&&!a.equals(t.srcRect);i++){var r=t.movingLayers[i];r.moveMask&&a.union(r.layer.mask.getValueBounds(t.srcRect,255)),r.moveImage&&a.union(r.layer.image.getNonTransparentBounds(t.srcRect))}}else{t.srcRect=t.fromSelection.clone();for(var o=0;o<t.movingLayers.length&&!a.equals(t.srcRect);o++){var s=t.movingLayers[o];s.moveMask&&a.union(s.layer.mask.getValueBounds(t.srcRect,0)),s.moveImage&&a.union(s.layer.image.getNonTransparentBounds(t.srcRect))}}return t.srcRect=a,t}return lI(n,[{key:"undo",value:function(){var t=this,e=[];this.dstRect.isEmpty()||e.push(this.dstRect),this.erasesSourceRect&&(e.push(this.srcRect),e=l$.union(e)),this.movingLayers.forEach(function(n){t.hasFullUndo?e.forEach(function(t){n.moveImage&&n.layer.image.copyBitmapRect(n.imageUndo,t.left,t.top,t),n.moveMask&&n.layer.mask.copyBitmapRect(n.maskUndo,t.left,t.top,t)}):(n.moveImage&&n.imageRect.forEach(function(t,e){n.layer.image.copyBitmapRect(t,e.left,e.top,t.getBounds())}),n.moveMask&&n.maskRect.forEach(function(t,e){n.layer.mask.copyBitmapRect(t,e.left,e.top,t.getBounds())}))}),U(this.movingLayers.map(function(t){return t.layer}),e.reduce(function(t,e){return t.getUnion(e)},new l$(0,0,0,0)),!0,!0),this.dstRect.makeEmpty(),d.setSelection(this.fromSelection),d.setActiveLayer(this.layer,this.fromMaskMode),D()}},{key:"getMemoryUsed",value:function(t,e){return this.movingLayers.map(function(t){return[t.imageUndo,t.maskUndo,t.imageRect,t.maskRect].map(function(t){return t?t.getMemorySize():0}).reduce(cC,0)}).reduce(cC,0)}},{key:"buildFullUndo",value:function(){this.hasFullUndo||(this.movingLayers.forEach(function(t){t.moveImage&&(t.imageUndo=t.layer.image.clone()),t.moveMask&&(t.maskUndo=t.layer.mask.clone()),t.imageRect.clear(),t.maskRect.clear()}),this.hasFullUndo=!0)}},{key:"compact",value:function(){if(this.hasFullUndo){var t=[];this.dstRect.isEmpty()||t.push(this.dstRect),this.erasesSourceRect&&(t.push(this.srcRect),t=l$.union(t)),this.movingLayers.forEach(function(e){e.imageRect.clear(),e.maskRect.clear(),t.forEach(function(t){e.moveImage&&e.imageRect.set(t,e.imageUndo.cloneRect(t)),e.moveMask&&e.maskRect.set(t,e.maskUndo.cloneRect(t))}),e.imageUndo=null,e.maskUndo=null}),this.hasFullUndo=!1}}}]),n}(cl),tw=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a){var i;return lR(this,n),(i=e.call(this)).erasesSourceRect=!0,i.affineTransform=t.clone(),i.interpolation=a||"smooth",i.composeCanvas=null,i.composeCanvasContext=null,i}return lI(n,[{key:"buildFullUndo",value:function(){var t=this;this.hasFullUndo||(lD(lF(n.prototype),"buildFullUndo",this).call(this),this.movingLayers.forEach(function(e){if(e.moveImage){var n=lJ(t.srcRect.getWidth(),t.srcRect.getHeight());n.getContext("2d").putImageData(e.layer.image.getImageData(),-t.srcRect.left,-t.srcRect.top,t.srcRect.left,t.srcRect.top,t.srcRect.getWidth(),t.srcRect.getHeight()),e.imageSourceCanvas=n}if(e.moveMask){var a=lJ(t.srcRect.getWidth(),t.srcRect.getHeight());a.getContext("2d").putImageData(e.layer.mask.getImageData(t.srcRect.left,t.srcRect.top,t.srcRect.getWidth(),t.srcRect.getHeight()),0,0),e.maskSourceCanvas=a}}),this.composeCanvas=lJ(d.width,d.height),this.composeCanvasContext=this.composeCanvas.getContext("2d",{willReadFrequently:!0}),cm(this.composeCanvasContext,"smooth"==this.interpolation),this.junk=this.composeCanvasContext.getImageData(0,0,1,1))}},{key:"redo",value:function(){var t=this;this.buildFullUndo();var e=this.dstRect.clone(),n=this.srcRect.toPoints();this.affineTransform.transformPoints(n),this.dstRect.set(l$.createBoundingBox(n).roundContain().clipTo(d.getBounds()));var a=l$.subtract(this.dstRect,this.srcRect),i=l$.subtract(e.isEmpty()?this.srcRect:this.srcRect.getIntersection(e),this.dstRect),r=this.srcRect.getIntersection(this.dstRect),o=l$.subtract(e,[this.dstRect,this.srcRect]),s=this.srcRect.getUnion(this.dstRect).getUnion(e);if(this.movingLayers.forEach(function(e){if(i.forEach(function(n){e.moveImage&&e.layer.image.clearRect(n,0xffffff),e.moveMask&&(t.movingWholeLayer?e.layer.mask.clearRect(n,255):e.layer.mask.clearRect(n,0))}),!t.dstRect.isEmpty()){if(e.moveImage){var n=e.imageUndo.getImageData();a.forEach(function(e){t.composeCanvasContext.putImageData(n,0,0,e.left,e.top,e.getWidth(),e.getHeight())}),t.composeCanvasContext.clearRect(r.left,r.top,r.getWidth(),r.getHeight()),t.composeCanvasContext.save(),t.composeCanvasContext.setTransform(t.affineTransform.m[0],t.affineTransform.m[1],t.affineTransform.m[2],t.affineTransform.m[3],t.affineTransform.m[4],t.affineTransform.m[5]),t.composeCanvasContext.drawImage(e.imageSourceCanvas,t.srcRect.left,t.srcRect.top),t.composeCanvasContext.restore(),e.layer.image.copyBitmapRect(new l5(t.composeCanvasContext.getImageData(t.dstRect.left,t.dstRect.top,t.dstRect.getWidth(),t.dstRect.getHeight())),t.dstRect.left,t.dstRect.top,new l$(0,0,t.dstRect.getWidth(),t.dstRect.getHeight()))}e.moveMask&&(a.forEach(function(n){t.composeCanvasContext.putImageData(e.layer.mask.getImageData(n.left,n.top,n.getWidth(),n.getHeight()),n.left,n.top)}),t.movingWholeLayer?t.composeCanvasContext.fillStyle="#FFF":t.composeCanvasContext.fillStyle="#000",t.composeCanvasContext.fillRect(r.left,r.top,r.getWidth(),r.getHeight()),t.composeCanvasContext.save(),t.composeCanvasContext.setTransform(t.affineTransform.m[0],t.affineTransform.m[1],t.affineTransform.m[2],t.affineTransform.m[3],t.affineTransform.m[4],t.affineTransform.m[5]),t.composeCanvasContext.drawImage(e.maskSourceCanvas,t.srcRect.left,t.srcRect.top),t.composeCanvasContext.restore(),e.layer.mask.pasteImageData(t.composeCanvasContext.getImageData(t.dstRect.left,t.dstRect.top,t.dstRect.getWidth(),t.dstRect.getHeight()),t.dstRect.left,t.dstRect.top))}o.forEach(function(t){e.moveImage&&e.layer.image.copyBitmapRect(e.imageUndo,t.left,t.top,t),e.moveMask&&e.layer.mask.copyBitmapRect(e.maskUndo,t.left,t.top,t)})}),U(this.movingLayers.map(function(t){return t.layer}),s,!0,!0),!this.fromSelection.isEmpty()){var l,c=this.fromSelection.toPoints();this.affineTransform.transformPoints(c),(l=l$.createBoundingBox(c)).roundNearest(),d.setSelection(l),D()}d.setActiveLayer(this.layer,this.fromMaskMode)}},{key:"amend",value:function(t){this.hasFullUndo||this.undo(),this.affineTransform=t.clone(),this.redo()}},{key:"setInterpolation",value:function(t){t!=this.interpolation&&(this.interpolation=t,this.composeCanvasContext&&cm(this.composeCanvasContext,"smooth"==this.interpolation),this.undo(),this.redo())}},{key:"compact",value:function(){lD(lF(n.prototype),"compact",this).call(this),this.composeCanvas=null,this.composeCanvasContext=null,this.movingLayers.forEach(function(t){return t.imageSourceCanvas=null})}},{key:"getMemoryUsed",value:function(t,e){var a=lD(lF(n.prototype),"getMemoryUsed",this).call(this,t,e);return a+=cM(this.composeCanvas),a+=this.movingLayers.map(function(t){return cM(t.imageSourceCanvas)}).reduce(cC,0)}},{key:"getTransform",value:function(){return this.affineTransform.clone()}},{key:"getInitialTransformRect",value:function(){return this.srcRect.clone()}},{key:"getInitialSelectionRect",value:function(){return this.fromSelection.clone()}}]),n}(tb),t_=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a,i){var r;return lR(this,n),(r=e.call(this)).offsetX=t,r.offsetY=a,r.erasesSourceRect=!i,r}return lI(n,[{key:"redo",value:function(){var t,e,n=this,a=this.dstRect.clone(),i=a.clone(),r=null;if(this.buildFullUndo(),this.dstRect.set(this.srcRect),this.dstRect.translate(this.offsetX,this.offsetY),t=this.dstRect.clone(),this.dstRect.clipTo(d.getBounds()),this.erasesSourceRect?(r=a.isEmpty()?this.srcRect:this.srcRect.getIntersection(a),i.union(r),e=a.subtract(this.srcRect)):e=[a],this.movingLayers.forEach(function(a){r&&(a.moveImage&&a.layer.image.clearRect(r,0xffffff),a.moveMask&&a.layer.mask.clearRect(r,n.movingWholeLayer?255:0)),e.forEach(function(t){a.moveImage&&a.layer.image.copyBitmapRect(a.imageUndo,t.left,t.top,t),a.moveMask&&a.layer.mask.copyBitmapRect(a.maskUndo,t.left,t.top,t)}),a.moveImage&&l7.normalFuseImageOntoImageAtPosition(a.layer.image,a.imageUndo,t.left,t.top,n.srcRect),a.moveMask&&a.layer.mask.copyBitmapRect(a.maskUndo,t.left,t.top,n.srcRect)}),i.union(this.dstRect),U(this.movingLayers.map(function(t){return t.layer}),i,!0,!0),!this.fromSelection.isEmpty()){var o=this.fromSelection.clone();o.translate(this.offsetX,this.offsetY),d.setSelection(o),D()}}},{key:"amend",value:function(t,e){this.hasFullUndo||this.undo(),this.offsetX+=t,this.offsetY+=e,this.redo()}}]),n}(tb);function tE(t,e,n){var a=e?t.mask:t.image,i=a.cloneRect(n);n=n.clone(),this.undo=function(){a.copyBitmapRect(i,n.left,n.top,i.getBounds()),d.setActiveLayer(t,e),d.setSelection(n),U(t,n,!e,e)},this.redo=function(){e?a.clearRect(n,0):a.clearRect(n,0xffffff),E=new cc(i,n.left,n.top),d.setActiveLayer(t,e),d.emptySelection(),U(t,n,!e,e)},this.getMemoryUsed=function(t,e){return i==e?0:i.getMemorySize()},this.redo()}function tk(t){var e=d.getSelection(),n=p,a=new cn(d.width,d.height,d.getDefaultLayerName(!1)),i=f,r=i.parent;this.undo=function(){r.removeLayer(a),d.setSelection(e),H(),d.setActiveLayer(i,n)},this.redo=function(){var e,n,o=r.indexOf(i),s=t.bmp.getBounds();if(r.insertLayer(o+1,a),s.isInside(d.getBounds())?(e=t.x,n=t.y):(e=(d.width-t.bmp.width)/2|0,n=(d.height-t.bmp.height)/2|0),t.bmp instanceof l6){var l=new l5(t.bmp.width,t.bmp.height);l.copyPixelsFromGreyscale(t.bmp),a.image.copyBitmapRect(l,e,n,s)}else a.image.copyBitmapRect(t.bmp,e,n,s);d.emptySelection(),H(),d.setActiveLayer(a,!1)},this.getMemoryUsed=function(e,n){return t.bmp==n?0:t.bmp.getMemorySize()},this.redo()}tE.prototype=Object.create(cl.prototype),tE.prototype.constructor=tE,tk.prototype=Object.create(cl.prototype),tk.prototype.constructor=tk,h=[cw,c_,cE,ck,cP,cT,cA,cS].map(function(t){return new t(l,c)}),this.width=t,this.height=e}function cB(t,e,n){this.data=t,this.eof=!1,this.start=void 0===e?0:e,this.end=void 0===n?t.length:n,this.pos=this.start}cR.prototype=Object.create(/*@__PURE__*/t(cr).prototype),cR.prototype.constructor=cR,cR.prototype.getBounds=function(){return new l$(0,0,this.width,this.height)},cR.prototype.isPointWithin=function(t,e){return t>=0&&e>=0&&t<this.width&&e<this.height},cR.EDITING_MODE_IMAGE=0,cR.EDITING_MODE_MASK=1,cB.prototype.readChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos++]):(this.eof=!0,-1)},cB.prototype.readByte=function(){return this.pos<this.end?this.data[this.pos++]:(this.eof=!0,-1)},cB.prototype.readU8=cB.prototype.readByte,cB.prototype.readS8=function(){var t;return 128&(t=this.readByte())?0xffffff00|t:t},cB.prototype.unreadChar=function(t){this.pos--},cB.prototype.peekChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos]):(this.eof=!0,-1)},cB.prototype.readString=function(t){var e,n=Array(t);for(e=0;e<t;e++)n[e]=this.readChar();return n.join("")},cB.prototype.readS16=function(){var t;return 32768&(t=this.readByte()<<8|this.readByte())?0xffff0000|t:t},cB.prototype.readU16BE=function(){return this.readByte()<<8|this.readByte()},cB.prototype.readU16LE=function(){var t=this.readByte();return this.readByte()<<8|t},cB.prototype.readU32BE=function(){return(this.readByte()<<24|this.readByte()<<16|this.readByte()<<8|this.readByte())>>>0},cB.prototype.readU32LE=function(){var t=this.readByte(),e=this.readByte(),n=this.readByte();return(this.readByte()<<24|n<<16|e<<8|t)>>>0},cB.prototype.readBytes=function(t){var e=this.data.subarray(this.pos,this.pos+t);return this.pos+=t,this.pos>this.end&&(this.eof=!0),e},cB.prototype.skip=function(t){this.pos+=t,this.pos>this.end&&(this.eof=!0)},cB.prototype.seek=function(t){this.pos=t},cB.prototype.writeBytes=function(t){for(var e=0;e<t.length;e++)this.data[this.pos++]=t[e]},cB.prototype.writeByte=function(t){this.data[this.pos++]=t},cB.prototype.writeU8=cB.prototype.writeByte,cB.prototype.writeU16LE=function(t){this.data[this.pos++]=t,this.data[this.pos++]=t>>8},cB.prototype.writeU16BE=function(t){this.data[this.pos++]=t>>8,this.data[this.pos++]=t},cB.prototype.writeU32BE=function(t){this.data[this.pos++]=t>>24,this.data[this.pos++]=t>>16,this.data[this.pos++]=t>>8,this.data[this.pos++]=t},cB.prototype.writeU32LE=function(t){this.data[this.pos++]=t,this.data[this.pos++]=t>>8,this.data[this.pos++]=t>>16,this.data[this.pos++]=t>>24},cB.prototype.writeDoubleBE=function(t){for(var e=new Uint8Array(new Float64Array([t]).buffer),n=e.length-1;n>=0;n--)this.writeByte(e[n])},cB.prototype.writeFloatBE=function(t){for(var e=new Uint8Array(new Float32Array([t]).buffer),n=e.length-1;n>=0;n--)this.writeByte(e[n])},cB.prototype.writeString=function(t){for(var e=0;e<t.length;e++)this.data[this.pos++]=t.charCodeAt(e)},cB.prototype.writeUnsignedIntBE=function(t,e){switch(void 0===e&&(e=this.measureUnsignedInt(t)),e){case 5:this.writeU8(Math.floor(t/0x100000000));case 4:this.writeU8(t>>24);case 3:this.writeU8(t>>16);case 2:this.writeU8(t>>8);case 1:this.writeU8(t);break;default:throw"Bad UINT size "+e}},cB.prototype.measureUnsignedInt=function(t){return t<256?1:t<65536?2:t<0x1000000?3:t<0x100000000?4:5},cB.prototype.getAsDataArray=function(){if(this.pos<this.data.byteLength)return this.data.subarray(0,this.pos);if(this.pos==this.data.byteLength)return this.data;throw"ArrayDataStream's pos lies beyond end of buffer"},cB.prototype.EOF=-1;var cI={},cF={},cD="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;cF.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}}return t},cF.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var cN={arraySet:function(t,e,n,a,i){if(e.subarray&&t.subarray){t.set(e.subarray(n,n+a),i);return}for(var r=0;r<a;r++)t[i+r]=e[n+r]},flattenChunks:function(t){var e,n,a,i,r,o;for(e=0,a=0,n=t.length;e<n;e++)a+=t[e].length;for(e=0,o=new Uint8Array(a),i=0,n=t.length;e<n;e++)r=t[e],o.set(r,i),i+=r.length;return o}},cH={arraySet:function(t,e,n,a,i){for(var r=0;r<a;r++)t[i+r]=e[n+r]},flattenChunks:function(t){return[].concat.apply([],t)}};cF.setTyped=function(t){t?(cF.Buf8=Uint8Array,cF.Buf16=Uint16Array,cF.Buf32=Int32Array,cF.assign(cF,cN)):(cF.Buf8=Array,cF.Buf16=Array,cF.Buf32=Array,cF.assign(cF,cH))},cF.setTyped(cD);var cW=cF.assign,cY={};function cU(t){for(var e=t.length;--e>=0;)t[e]=0}tg(cY,"Deflate",function(){return H},function(t){return H=t}),tg(cY,"deflate",function(){return W},function(t){return W=t}),tg(cY,"deflateRaw",function(){return Y},function(t){return Y=t}),tg(cY,"gzip",function(){return U},function(t){return U=t});var cj=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],cz=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],cq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],cX=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],cG=Array(576);cU(cG);var cV=Array(60);cU(cV);var cK=Array(512);cU(cK);var cZ=Array(256);cU(cZ);var c$=Array(29);cU(c$);var cQ=Array(30);function cJ(t,e,n,a,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=a,this.max_length=i,this.has_stree=t&&t.length}function c0(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function c5(t){return t<256?cK[t]:cK[256+(t>>>7)]}function c2(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function c1(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,c2(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function c3(t,e,n){c1(t,n[2*e],n[2*e+1])}function c4(t,e){var n=0;do n|=1&t,t>>>=1,n<<=1;while(--e>0)return n>>>1}function c6(t,e,n){var a,i,r=Array(16),o=0;for(a=1;a<=15;a++)r[a]=o=o+n[a-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=c4(r[s]++,s))}}function c8(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function c7(t){t.bi_valid>8?c2(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function c9(t,e,n,a){var i=2*e,r=2*n;return t[i]<t[r]||t[i]===t[r]&&a[e]<=a[n]}function ut(t,e,n){for(var a=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&c9(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!c9(e,a,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=a}function ue(t,e,n){var a,i,r,o,s=0;if(0!==t.last_lit)do a=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===a?c3(t,i,e):(c3(t,(r=cZ[i])+256+1,e),0!==(o=cj[r])&&c1(t,i-=c$[r],o),c3(t,r=c5(--a),n),0!==(o=cz[r])&&c1(t,a-=cQ[r],o));while(s<t.last_lit)c3(t,256,e)}function un(t,e){var n,a,i,r=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(n=0,t.heap_len=0,t.heap_max=573;n<l;n++)0!==r[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):r[2*n+1]=0;for(;t.heap_len<2;)r[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=o[2*i+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)ut(t,r,n);i=l;do n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],ut(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=a,r[2*i]=r[2*n]+r[2*a],t.depth[i]=(t.depth[n]>=t.depth[a]?t.depth[n]:t.depth[a])+1,r[2*n+1]=r[2*a+1]=i,t.heap[1]=i++,ut(t,r,1);while(t.heap_len>=2)t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,a,i,r,o,s,l=e.dyn_tree,c=e.max_code,u=e.stat_desc.static_tree,d=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,v=0;for(r=0;r<=15;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(r=l[2*l[2*(a=t.heap[n])+1]+1]+1)>p&&(r=p,v++),l[2*a+1]=r,!(a>c)&&(t.bl_count[r]++,o=0,a>=f&&(o=h[a-f]),s=l[2*a],t.opt_len+=s*(r+o),d&&(t.static_len+=s*(u[2*a+1]+o)));if(0!==v){do{for(r=p-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[p]--,v-=2}while(v>0)for(r=p;0!==r;r--)for(a=t.bl_count[r];0!==a;)!((i=t.heap[--n])>c)&&(l[2*i+1]!==r&&(t.opt_len+=(r-l[2*i+1])*l[2*i],l[2*i+1]=r),a--)}}(t,e),c6(r,c,t.bl_count)}function ua(t,e,n){var a,i,r=-1,o=e[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),e[(n+1)*2+1]=65535,a=0;a<=n;a++)i=o,o=e[(a+1)*2+1],++s<l&&i===o||(s<c?t.bl_tree[2*i]+=s:0!==i?(i!==r&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,r=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))}function ui(t,e,n){var a,i,r=-1,o=e[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),a=0;a<=n;a++)if(i=o,o=e[(a+1)*2+1],!(++s<l)||i!==o){if(s<c)do c3(t,i,t.bl_tree);while(0!=--s)else 0!==i?(i!==r&&(c3(t,i,t.bl_tree),s--),c3(t,16,t.bl_tree),c1(t,s-3,2)):s<=10?(c3(t,17,t.bl_tree),c1(t,s-3,3)):(c3(t,18,t.bl_tree),c1(t,s-11,7));s=0,r=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}}cU(cQ);var ur=!1;function uo(t,e,n,a){c1(t,0+(a?1:0),3),c7(t),c2(t,n),c2(t,~n),cF.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}G=function(t){ur||(function(){var t,e,n,a,i,r=Array(16);for(a=0,n=0;a<28;a++)for(t=0,c$[a]=n;t<1<<cj[a];t++)cZ[n++]=a;for(cZ[n-1]=a,i=0,a=0;a<16;a++)for(t=0,cQ[a]=i;t<1<<cz[a];t++)cK[i++]=a;for(i>>=7;a<30;a++)for(t=0,cQ[a]=i<<7;t<1<<cz[a]-7;t++)cK[256+i++]=a;for(e=0;e<=15;e++)r[e]=0;for(t=0;t<=143;)cG[2*t+1]=8,t++,r[8]++;for(;t<=255;)cG[2*t+1]=9,t++,r[9]++;for(;t<=279;)cG[2*t+1]=7,t++,r[7]++;for(;t<=287;)cG[2*t+1]=8,t++,r[8]++;for(c6(cG,287,r),t=0;t<30;t++)cV[2*t+1]=5,cV[2*t]=c4(t,5);$=new cJ(cG,cj,257,286,15),Q=new cJ(cV,cz,0,30,15),J=new cJ([],cq,0,19,7)}(),ur=!0),t.l_desc=new c0(t.dyn_ltree,$),t.d_desc=new c0(t.dyn_dtree,Q),t.bl_desc=new c0(t.bl_tree,J),t.bi_buf=0,t.bi_valid=0,c8(t)},V=function(t,e,n,a){var i,r,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=0xf3ffc07f;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),un(t,t.l_desc),un(t,t.d_desc),o=function(t){var e;for(ua(t,t.dyn_ltree,t.l_desc.max_code),ua(t,t.dyn_dtree,t.d_desc.max_code),un(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*cX[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=i&&(i=r)):i=r=n+5,n+4<=i&&-1!==e?uo(t,e,n,a):4===t.strategy||r===i?(c1(t,2+(a?1:0),3),ue(t,cG,cV)):(c1(t,4+(a?1:0),3),function(t,e,n,a){var i;for(c1(t,e-257,5),c1(t,n-1,5),c1(t,a-4,4),i=0;i<a;i++)c1(t,t.bl_tree[2*cX[i]+1],3);ui(t,t.dyn_ltree,e-1),ui(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),ue(t,t.dyn_ltree,t.dyn_dtree)),c8(t),a&&c7(t)},K=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[(cZ[n]+256+1)*2]++,t.dyn_dtree[2*c5(e)]++),t.last_lit===t.lit_bufsize-1},Z=function(t){c1(t,2,3),c3(t,256,cG),16===t.bi_valid?(c2(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)};var us={};us=function(t,e,n,a){for(var i=65535&t|0,r=t>>>16&65535|0,o=0;0!==n;){o=n>2e3?2e3:n,n-=o;do r=r+(i=i+e[a++]|0)|0;while(--o)i%=65521,r%=65521}return i|r<<16|0};var ul={},uc=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var a=0;a<8;a++)t=1&t?0xedb88320^t>>>1:t>>>1;e[n]=t}return e}();ul=function(t,e,n,a){var i=a+n;t^=-1;for(var r=a;r<i;r++)t=t>>>8^uc[(t^e[r])&255];return -1^t};var uu={};uu={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function ud(t,e){return t.msg=uu[e],e}function uh(t){return(t<<1)-(t>4?9:0)}function uf(t){for(var e=t.length;--e>=0;)t[e]=0}function up(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(cF.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function uv(t,e){V(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,up(t.strm)}function um(t,e){t.pending_buf[t.pending++]=e}function ug(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function uy(t,e){var n,a,i=t.max_chain_length,r=t.strstart,o=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,c=t.window,u=t.w_mask,d=t.prev,h=t.strstart+258,f=c[r+o-1],p=c[r+o];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(n=e)+o]!==p||c[n+o-1]!==f||c[n]!==c[r]||c[++n]!==c[r+1])continue;r+=2,n++;do;while(c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&r<h)if(a=258-(h-r),r=h-258,a>o){if(t.match_start=e,o=a,a>=s)break;f=c[r+o-1],p=c[r+o]}}while((e=d[e&u])>l&&0!=--i)return o<=t.lookahead?o:t.lookahead}function ub(t){var e,n,a,i,r,o=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-262)){cF.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,e=n=t.hash_size;do a=t.head[--e],t.head[e]=a>=o?a-o:0;while(--n)e=n=o;do a=t.prev[--e],t.prev[e]=a>=o?a-o:0;while(--n)i+=o}if(0===t.strm.avail_in)break;if(n=function(t,e,n,a){var i=t.avail_in;return(i>a&&(i=a),0===i)?0:(t.avail_in-=i,cF.arraySet(e,t.input,t.next_in,i,n),1===t.state.wrap?t.adler=us(t.adler,e,i,n):2===t.state.wrap&&(t.adler=ul(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)}(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=n,t.lookahead+t.insert>=3)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+3-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function uw(t,e){for(var n,a;;){if(t.lookahead<262){if(ub(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-262&&(t.match_length=uy(t,n)),t.match_length>=3){if(a=K(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!=--t.match_length)t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask}else a=K(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(uv(t,!1),0===t.strm.avail_out))return 1}return(t.insert=t.strstart<2?t.strstart:2,4===e)?(uv(t,!0),0===t.strm.avail_out)?3:4:t.last_lit&&(uv(t,!1),0===t.strm.avail_out)?1:2}function u_(t,e){for(var n,a,i;;){if(t.lookahead<262){if(ub(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-262&&(t.match_length=uy(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,a=K(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!=--t.prev_length)if(t.match_available=0,t.match_length=2,t.strstart++,a&&(uv(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((a=K(t,0,t.window[t.strstart-1]))&&uv(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return(t.match_available&&(a=K(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e)?(uv(t,!0),0===t.strm.avail_out)?3:4:t.last_lit&&(uv(t,!1),0===t.strm.avail_out)?1:2}function uE(t,e,n,a,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=a,this.func=i}function uk(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new cF.Buf16(1146),this.dyn_dtree=new cF.Buf16(122),this.bl_tree=new cF.Buf16(78),uf(this.dyn_ltree),uf(this.dyn_dtree),uf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new cF.Buf16(16),this.heap=new cF.Buf16(573),uf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new cF.Buf16(573),uf(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}tt=[new uE(0,0,0,0,function(t,e){var n=65535;for(65535>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ub(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var a=t.block_start+n;if((0===t.strstart||t.strstart>=a)&&(t.lookahead=t.strstart-a,t.strstart=a,uv(t,!1),0===t.strm.avail_out)||t.strstart-t.block_start>=t.w_size-262&&(uv(t,!1),0===t.strm.avail_out))return 1}return(t.insert=0,4===e)?(uv(t,!0),0===t.strm.avail_out)?3:4:(t.strstart>t.block_start&&(uv(t,!1),t.strm.avail_out),1)}),new uE(4,4,8,4,uw),new uE(4,5,16,8,uw),new uE(4,6,32,32,uw),new uE(4,4,16,16,u_),new uE(8,16,32,32,u_),new uE(8,16,128,128,u_),new uE(8,32,128,256,u_),new uE(32,128,258,1024,u_),new uE(32,258,258,4096,u_)],j=function(t,e){return t&&t.state&&2===t.state.wrap?(t.state.gzhead=e,0):-2},z=function(t,e){if(!t||!t.state||e>5||e<0)return t?ud(t,-2):-2;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||666===a.status&&4!==e)return ud(t,0===t.avail_out?-5:-2);if(a.strm=t,n=a.last_flush,a.last_flush=e,42===a.status){if(2===a.wrap)t.adler=0,um(a,31),um(a,139),um(a,8),a.gzhead?(um(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),um(a,255&a.gzhead.time),um(a,a.gzhead.time>>8&255),um(a,a.gzhead.time>>16&255),um(a,a.gzhead.time>>24&255),um(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),um(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(um(a,255&a.gzhead.extra.length),um(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=ul(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(um(a,0),um(a,0),um(a,0),um(a,0),um(a,0),um(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),um(a,3),a.status=113);else{var n,a,i,r,o=8+(a.w_bits-8<<4)<<8;o|=(a.strategy>=2||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(o|=32),o+=31-o%31,a.status=113,ug(a,o),0!==a.strstart&&(ug(a,t.adler>>>16),ug(a,65535&t.adler)),t.adler=1}}if(69===a.status){if(a.gzhead.extra){for(i=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>i&&(t.adler=ul(t.adler,a.pending_buf,a.pending-i,i)),up(t),i=a.pending,a.pending!==a.pending_buf_size));)um(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>i&&(t.adler=ul(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73}if(73===a.status){if(a.gzhead.name){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(t.adler=ul(t.adler,a.pending_buf,a.pending-i,i)),up(t),i=a.pending,a.pending===a.pending_buf_size)){r=1;break}r=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,um(a,r)}while(0!==r)a.gzhead.hcrc&&a.pending>i&&(t.adler=ul(t.adler,a.pending_buf,a.pending-i,i)),0===r&&(a.gzindex=0,a.status=91)}else a.status=91}if(91===a.status){if(a.gzhead.comment){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(t.adler=ul(t.adler,a.pending_buf,a.pending-i,i)),up(t),i=a.pending,a.pending===a.pending_buf_size)){r=1;break}r=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,um(a,r)}while(0!==r)a.gzhead.hcrc&&a.pending>i&&(t.adler=ul(t.adler,a.pending_buf,a.pending-i,i)),0===r&&(a.status=103)}else a.status=103}if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&up(t),a.pending+2<=a.pending_buf_size&&(um(a,255&t.adler),um(a,t.adler>>8&255),t.adler=0,a.status=113)):a.status=113),0!==a.pending){if(up(t),0===t.avail_out)return a.last_flush=-1,0}else if(0===t.avail_in&&uh(e)<=uh(n)&&4!==e)return ud(t,-5);if(666===a.status&&0!==t.avail_in)return ud(t,-5);if(0!==t.avail_in||0!==a.lookahead||0!==e&&666!==a.status){var s=2===a.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(ub(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=K(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(uv(t,!1),0===t.strm.avail_out))return 1}return(t.insert=0,4===e)?(uv(t,!0),0===t.strm.avail_out)?3:4:t.last_lit&&(uv(t,!1),0===t.strm.avail_out)?1:2}(a,e):3===a.strategy?function(t,e){for(var n,a,i,r,o=t.window;;){if(t.lookahead<=258){if(ub(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(a=o[i=t.strstart-1])===o[++i]&&a===o[++i]&&a===o[++i]){r=t.strstart+258;do;while(a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&i<r)t.match_length=258-(r-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=K(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=K(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(uv(t,!1),0===t.strm.avail_out))return 1}return(t.insert=0,4===e)?(uv(t,!0),0===t.strm.avail_out)?3:4:t.last_lit&&(uv(t,!1),0===t.strm.avail_out)?1:2}(a,e):tt[a.level].func(a,e);if((3===s||4===s)&&(a.status=666),1===s||3===s)return 0===t.avail_out&&(a.last_flush=-1),0;if(2===s&&(1===e?Z(a):5!==e&&(uo(a,0,0,!1),3===e&&(uf(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),up(t),0===t.avail_out))return a.last_flush=-1,0}return 4!==e?0:a.wrap<=0?1:(2===a.wrap?(um(a,255&t.adler),um(a,t.adler>>8&255),um(a,t.adler>>16&255),um(a,t.adler>>24&255),um(a,255&t.total_in),um(a,t.total_in>>8&255),um(a,t.total_in>>16&255),um(a,t.total_in>>24&255)):(ug(a,t.adler>>>16),ug(a,65535&t.adler)),up(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?0:1)},q=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?ud(t,-2):(t.state=null,113===e?ud(t,-3):0):-2},X=function(t,e){var n,a,i,r,o,s,l,c,u=e.length;if(!t||!t.state||2===(r=(n=t.state).wrap)||1===r&&42!==n.status||n.lookahead)return -2;for(1===r&&(t.adler=us(t.adler,e,u,0)),n.wrap=0,u>=n.w_size&&(0===r&&(uf(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new cF.Buf8(n.w_size),cF.arraySet(c,e,u-n.w_size,n.w_size,0),e=c,u=n.w_size),o=t.avail_in,s=t.next_in,l=t.input,t.avail_in=u,t.next_in=0,t.input=e,ub(n);n.lookahead>=3;){a=n.strstart,i=n.lookahead-2;do n.ins_h=(n.ins_h<<n.hash_shift^n.window[a+3-1])&n.hash_mask,n.prev[a&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=a,a++;while(--i)n.strstart=a,n.lookahead=2,ub(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=s,t.input=l,t.avail_in=o,n.wrap=r,0};var uT=!0,ux=!0;try{String.fromCharCode.apply(null,[0])}catch(t){uT=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){ux=!1}for(var uO=new cF.Buf8(256),uP=0;uP<256;uP++)uO[uP]=uP>=252?6:uP>=248?5:uP>=240?4:uP>=224?3:uP>=192?2:1;function uS(t,e){if(e<65534&&(t.subarray&&ux||!t.subarray&&uT))return String.fromCharCode.apply(null,cF.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}uO[254]=uO[254]=1,te=function(t){var e,n,a,i,r,o=t.length,s=0;for(i=0;i<o;i++)(64512&(n=t.charCodeAt(i)))==55296&&i+1<o&&(64512&(a=t.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(a-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(r=0,e=new cF.Buf8(s),i=0;r<s;i++)(64512&(n=t.charCodeAt(i)))==55296&&i+1<o&&(64512&(a=t.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(a-56320),i++),n<128?e[r++]=n:(n<2048?e[r++]=192|n>>>6:(n<65536?e[r++]=224|n>>>12:(e[r++]=240|n>>>18,e[r++]=128|n>>>12&63),e[r++]=128|n>>>6&63),e[r++]=128|63&n);return e},tn=function(t){return uS(t,t.length)},ta=function(t){for(var e=new cF.Buf8(t.length),n=0,a=e.length;n<a;n++)e[n]=t.charCodeAt(n);return e},ti=function(t,e){var n,a,i,r,o=e||t.length,s=Array(2*o);for(a=0,n=0;n<o;){if((i=t[n++])<128){s[a++]=i;continue}if((r=uO[i])>4){s[a++]=65533,n+=r-1;continue}for(i&=2===r?31:3===r?15:7;r>1&&n<o;)i=i<<6|63&t[n++],r--;if(r>1){s[a++]=65533;continue}i<65536?s[a++]=i:(i-=65536,s[a++]=55296|i>>10&1023,s[a++]=56320|1023&i)}return uS(s,a)},tr=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&(192&t[n])==128;)n--;return n<0||0===n?e:n+uO[t[n]]>e?n:e};var uL={};uL=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};var uA=Object.prototype.toString;function uC(t){if(!(this instanceof uC))return new uC(t);this.options=cF.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e,n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new uL,this.strm.avail_out=0;var a=function(t,e,n,a,i,r){if(!t)return -2;var o,s,l,c,u=1;if(-1===e&&(e=6),a<0?(u=0,a=-a):a>15&&(u=2,a-=16),i<1||i>9||8!==n||a<8||a>15||e<0||e>9||r<0||r>4)return ud(t,-2);8===a&&(a=9);var d=new uk;return t.state=d,d.strm=t,d.wrap=u,d.gzhead=null,d.w_bits=a,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=i+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+3-1)/3),d.window=new cF.Buf8(2*d.w_size),d.head=new cF.Buf16(d.hash_size),d.prev=new cF.Buf16(d.w_size),d.lit_bufsize=1<<i+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new cF.Buf8(d.pending_buf_size),d.d_buf=1*d.lit_bufsize,d.l_buf=3*d.lit_bufsize,d.level=e,d.strategy=r,d.method=n,0===(c=(o=t)&&o.state?(o.total_in=o.total_out=0,o.data_type=2,(s=o.state).pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap?42:113,o.adler=2===s.wrap?0:1,s.last_flush=0,G(s),0):ud(o,-2))&&((l=o.state).window_size=2*l.w_size,uf(l.head),l.max_lazy_match=tt[l.level].max_lazy,l.good_match=tt[l.level].good_length,l.nice_match=tt[l.level].nice_length,l.max_chain_length=tt[l.level].max_chain,l.strstart=0,l.block_start=0,l.lookahead=0,l.insert=0,l.match_length=l.prev_length=2,l.match_available=0,l.ins_h=0),c}(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(0!==a)throw Error(uu[a]);if(n.header&&j(this.strm,n.header),n.dictionary){if(e="string"==typeof n.dictionary?te(n.dictionary):"[object ArrayBuffer]"===uA.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,0!==(a=X(this.strm,e)))throw Error(uu[a]);this._dict_set=!0}}function uM(t,e){var n=new uC(e);if(n.push(t,!0),n.err)throw n.msg||uu[n.err];return n.result}uC.prototype.push=function(t,e){var n,a,i=this.strm,r=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=te(t):"[object ArrayBuffer]"===uA.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new cF.Buf8(r),i.next_out=0,i.avail_out=r),1!==(n=z(i,a))&&0!==n)return this.onEnd(n),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&(4===a||2===a))&&("string"===this.options.to?this.onData(tn(cF.shrinkBuf(i.output,i.next_out))):this.onData(cF.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n)return 4===a?(n=q(this.strm),this.onEnd(n),this.ended=!0,0===n):(2===a&&(this.onEnd(0),i.avail_out=0),!0)},uC.prototype.onData=function(t){this.chunks.push(t)},uC.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=cF.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},H=uC,W=uM,Y=function(t,e){return(e=e||{}).raw=!0,uM(t,e)},U=function(t,e){return(e=e||{}).gzip=!0,uM(t,e)};var uR={};tg(uR,"Inflate",function(){return to},function(t){return to=t}),tg(uR,"inflate",function(){return ts},function(t){return ts=t}),tg(uR,"inflateRaw",function(){return tl},function(t){return tl=t}),tg(uR,"ungzip",function(){return tc},function(t){return tc=t});var uB={};uB=function(t,e){var n,a,i,r,o,s,l,c,u,d,h,f,p,v,m,g,y,b,w,_,E,k,T,x,O;n=t.state,a=t.next_in,x=t.input,i=a+(t.avail_in-5),r=t.next_out,O=t.output,o=r-(e-t.avail_out),s=r+(t.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,h=n.window,f=n.hold,p=n.bits,v=n.lencode,m=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do for(p<15&&(f+=x[a++]<<p,p+=8,f+=x[a++]<<p,p+=8),b=v[f&g];;){if(f>>>=w=b>>>24,p-=w,0==(w=b>>>16&255))O[r++]=65535&b;else if(16&w)for(_=65535&b,(w&=15)&&(p<w&&(f+=x[a++]<<p,p+=8),_+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=x[a++]<<p,p+=8,f+=x[a++]<<p,p+=8),b=m[f&y];;){if(f>>>=w=b>>>24,p-=w,16&(w=b>>>16&255)){if(E=65535&b,p<(w&=15)&&(f+=x[a++]<<p,(p+=8)<w&&(f+=x[a++]<<p,p+=8)),(E+=f&(1<<w)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=w,p-=w,E>(w=r-o)){if((w=E-w)>u&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(k=0,T=h,0===d){if(k+=c-w,w<_){_-=w;do O[r++]=h[k++];while(--w)k=r-E,T=O}}else if(d<w){if(k+=c+d-w,(w-=d)<_){_-=w;do O[r++]=h[k++];while(--w)if(k=0,d<_){_-=w=d;do O[r++]=h[k++];while(--w)k=r-E,T=O}}}else if(k+=d-w,w<_){_-=w;do O[r++]=h[k++];while(--w)k=r-E,T=O}for(;_>2;)O[r++]=T[k++],O[r++]=T[k++],O[r++]=T[k++],_-=3;_&&(O[r++]=T[k++],_>1&&(O[r++]=T[k++]))}else{k=r-E;do O[r++]=O[k++],O[r++]=O[k++],O[r++]=O[k++],_-=3;while(_>2)_&&(O[r++]=O[k++],_>1&&(O[r++]=O[k++]))}}else if((64&w)==0){b=m[(65535&b)+(f&(1<<w)-1)];continue}else{t.msg="invalid distance code",n.mode=30;break t}break}else if((64&w)==0){b=v[(65535&b)+(f&(1<<w)-1)];continue}else if(32&w){n.mode=12;break t}else{t.msg="invalid literal/length code",n.mode=30;break t}break}while(a<i&&r<s)a-=_=p>>3,p-=_<<3,f&=(1<<p)-1,t.next_in=a,t.next_out=r,t.avail_in=a<i?5+(i-a):5-(a-i),t.avail_out=r<s?257+(s-r):257-(r-s),n.hold=f,n.bits=p};var uI={},uF=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],uD=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],uN=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],uH=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function uW(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function uY(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new cF.Buf16(320),this.work=new cF.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}uI=function(t,e,n,a,i,r,o,s){var l,c,u,d,h,f,p,v,m,g=s.bits,y=0,b=0,w=0,_=0,E=0,k=0,T=0,x=0,O=0,P=0,S=null,L=0,A=new cF.Buf16(16),C=new cF.Buf16(16),M=null,R=0;for(y=0;y<=15;y++)A[y]=0;for(b=0;b<a;b++)A[e[n+b]]++;for(_=15,E=g;_>=1&&0===A[_];_--);if(E>_&&(E=_),0===_)return i[r++]=0x1400000,i[r++]=0x1400000,s.bits=1,0;for(w=1;w<_&&0===A[w];w++);for(E<w&&(E=w),x=1,y=1;y<=15;y++)if(x<<=1,(x-=A[y])<0)return -1;if(x>0&&(0===t||1!==_))return -1;for(y=1,C[1]=0;y<15;y++)C[y+1]=C[y]+A[y];for(b=0;b<a;b++)0!==e[n+b]&&(o[C[e[n+b]]++]=b);if(0===t?(S=M=o,f=19):1===t?(S=uF,L-=257,M=uD,R-=257,f=256):(S=uN,M=uH,f=-1),P=0,b=0,y=w,h=r,k=E,T=0,u=-1,d=(O=1<<E)-1,1===t&&O>852||2===t&&O>592)return 1;for(;;){p=y-T,o[b]<f?(v=0,m=o[b]):o[b]>f?(v=M[R+o[b]],m=S[L+o[b]]):(v=96,m=0),l=1<<y-T,w=c=1<<k;do i[h+(P>>T)+(c-=l)]=p<<24|v<<16|m|0;while(0!==c)for(l=1<<y-1;P&l;)l>>=1;if(0!==l?(P&=l-1,P+=l):P=0,b++,0==--A[y]){if(y===_)break;y=e[n+o[b]]}if(y>E&&(P&d)!==u){for(0===T&&(T=E),h+=w,x=1<<(k=y-T);k+T<_&&!((x-=A[k+T])<=0);)k++,x<<=1;if(O+=1<<k,1===t&&O>852||2===t&&O>592)return 1;i[u=P&d]=E<<24|k<<16|h-r|0}}return 0!==P&&(i[h+P]=y-T<<24|4194304),s.bits=E,0};var uU=!0;function uj(t,e,n,a){var i,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new cF.Buf8(r.wsize)),a>=r.wsize?(cF.arraySet(r.window,e,n-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((i=r.wsize-r.wnext)>a&&(i=a),cF.arraySet(r.window,e,n-a,i,r.wnext),(a-=i)?(cF.arraySet(r.window,e,n-a,a,0),r.wnext=a,r.whave=r.wsize):(r.wnext+=i,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=i))),0}tu=function(t,e){var n,a,i,r,o,s,l,c,u,d,h,f,p,v,m,g,y,b,w,_,E,k,T,x,O=0,P=new cF.Buf8(4),S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return -2;12===(n=t.state).mode&&(n.mode=13),o=t.next_out,i=t.output,l=t.avail_out,r=t.next_in,a=t.input,s=t.avail_in,c=n.hold,u=n.bits,d=s,h=l,k=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;u<16;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}if(2&n.wrap&&35615===c){n.check=0,P[0]=255&c,P[1]=c>>>8&255,n.check=ul(n.check,P,2,0),c=0,u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=30;break}if((15&c)!=8){t.msg="unknown compression method",n.mode=30;break}if(c>>>=4,u-=4,E=(15&c)+8,0===n.wbits)n.wbits=E;else if(E>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<E,t.adler=n.check=1,n.mode=512&c?10:12,c=0,u=0;break;case 2:for(;u<16;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}if(n.flags=c,(255&n.flags)!=8){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(P[0]=255&c,P[1]=c>>>8&255,n.check=ul(n.check,P,2,0)),c=0,u=0,n.mode=3;case 3:for(;u<32;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&(P[0]=255&c,P[1]=c>>>8&255,P[2]=c>>>16&255,P[3]=c>>>24&255,n.check=ul(n.check,P,4,0)),c=0,u=0,n.mode=4;case 4:for(;u<16;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(P[0]=255&c,P[1]=c>>>8&255,n.check=ul(n.check,P,2,0)),c=0,u=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(P[0]=255&c,P[1]=c>>>8&255,n.check=ul(n.check,P,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((f=n.length)>s&&(f=s),f&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=Array(n.head.extra_len)),cF.arraySet(n.head.extra,a,r,f,E)),512&n.flags&&(n.check=ul(n.check,a,f,r)),s-=f,r+=f,n.length-=f),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break e;f=0;do E=a[r+f++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E));while(E&&f<s)if(512&n.flags&&(n.check=ul(n.check,a,f,r)),s-=f,r+=f,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break e;f=0;do E=a[r+f++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E));while(E&&f<s)if(512&n.flags&&(n.check=ul(n.check,a,f,r)),s-=f,r+=f,E)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}if(c!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;u<32;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}t.adler=n.check=uW(c),c=0,u=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=s,n.hold=c,n.bits=u,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break e;case 13:if(n.last){c>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}switch(n.last=1&c,u-=1,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(function(t){if(uU){var e;for(tp=new cF.Buf32(512),tv=new cF.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(uI(1,t.lens,0,288,tp,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;uI(2,t.lens,0,32,tv,0,t.work,{bits:5}),uU=!1}t.lencode=tp,t.lenbits=9,t.distcode=tv,t.distbits=5}(n),n.mode=20,6===e){c>>>=2,u-=2;break e}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}c>>>=2,u-=2;break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&c,c=0,u=0,n.mode=15,6===e)break e;case 15:n.mode=16;case 16:if(f=n.length){if(f>s&&(f=s),f>l&&(f=l),0===f)break e;cF.arraySet(i,a,r,f,o),s-=f,r+=f,l-=f,o+=f,n.length-=f;break}n.mode=12;break;case 17:for(;u<14;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}if(n.nlen=(31&c)+257,c>>>=5,u-=5,n.ndist=(31&c)+1,c>>>=5,u-=5,n.ncode=(15&c)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}n.lens[S[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},k=uI(0,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,k){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(O=n.lencode[c&(1<<n.lenbits)-1])>>>24,g=O>>>16&255,y=65535&O,!(m<=u);){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}if(y<16)c>>>=m,u-=m,n.lens[n.have++]=y;else{if(16===y){for(x=m+2;u<x;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}if(c>>>=m,u-=m,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}E=n.lens[n.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===y){for(x=m+3;u<x;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}c>>>=m,u-=m,E=0,f=3+(7&c),c>>>=3,u-=3}else{for(x=m+7;u<x;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}c>>>=m,u-=m,E=0,f=11+(127&c),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;f--;)n.lens[n.have++]=E}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,T={bits:n.lenbits},k=uI(1,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,k){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},k=uI(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,k){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break e;case 20:n.mode=21;case 21:if(s>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=s,n.hold=c,n.bits=u,uB(t,h),o=t.next_out,i=t.output,l=t.avail_out,r=t.next_in,a=t.input,s=t.avail_in,c=n.hold,u=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;m=(O=n.lencode[c&(1<<n.lenbits)-1])>>>24,g=O>>>16&255,y=65535&O,!(m<=u);){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}if(g&&(240&g)==0){for(b=m,w=g,_=y;m=(O=n.lencode[_+((c&(1<<b+w)-1)>>b)])>>>24,g=O>>>16&255,y=65535&O,!(b+m<=u);){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=m,u-=m,n.back+=m,n.length=y,0===g){n.mode=26;break}if(32&g){n.back=-1,n.mode=12;break}if(64&g){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&g,n.mode=22;case 22:if(n.extra){for(x=n.extra;u<x;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(O=n.distcode[c&(1<<n.distbits)-1])>>>24,g=O>>>16&255,y=65535&O,!(m<=u);){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}if((240&g)==0){for(b=m,w=g,_=y;m=(O=n.distcode[_+((c&(1<<b+w)-1)>>b)])>>>24,g=O>>>16&255,y=65535&O,!(b+m<=u);){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=m,u-=m,n.back+=m,64&g){t.msg="invalid distance code",n.mode=30;break}n.offset=y,n.extra=15&g,n.mode=24;case 24:if(n.extra){for(x=n.extra;u<x;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break e;if(f=h-l,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),v=n.window}else v=i,p=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do i[o++]=v[p++];while(--f)0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;i[o++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===s)break e;s--,c|=a[r++]<<u,u+=8}if(h-=l,t.total_out+=h,n.total+=h,h&&(t.adler=n.check=n.flags?ul(n.check,i,h,o-h):us(n.check,i,h,o-h)),h=l,(n.flags?c:uW(c))!==n.check){t.msg="incorrect data check",n.mode=30;break}c=0,u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break e;s--,c+=a[r++]<<u,u+=8}if(c!==(0xffffffff&n.total)){t.msg="incorrect length check",n.mode=30;break}c=0,u=0}n.mode=29;case 29:k=1;break e;case 30:k=-3;break e;case 31:return -4;default:return -2}return(t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=s,n.hold=c,n.bits=u,(n.wsize||h!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&uj(t,t.output,t.next_out,h-t.avail_out))?(n.mode=31,-4):(d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,n.total+=h,n.wrap&&h&&(t.adler=n.check=n.flags?ul(n.check,i,h,t.next_out-h):us(n.check,i,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===h||4===e)&&0===k&&(k=-5),k)},td=function(t){if(!t||!t.state)return -2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},th=function(t,e){var n;return t&&t.state&&(2&(n=t.state).wrap)!=0?(n.head=e,e.done=!1,0):-2},tf=function(t,e){var n,a=e.length;return t&&t.state&&(0===(n=t.state).wrap||11===n.mode)?11===n.mode&&us(1,e,a,0)!==n.check?-3:uj(t,e,a,a)?(n.mode=31,-4):(n.havedict=1,0):-2};var uz={};uz={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var uq={};uq=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};var uX=Object.prototype.toString;function uG(t){if(!(this instanceof uG))return new uG(t);this.options=cF.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e,n,a,i,r,o,s,l,c,u,d=this.options;d.raw&&d.windowBits>=0&&d.windowBits<16&&(d.windowBits=-d.windowBits,0===d.windowBits&&(d.windowBits=-15)),d.windowBits>=0&&d.windowBits<16&&!(t&&t.windowBits)&&(d.windowBits+=32),d.windowBits>15&&d.windowBits<48&&(15&d.windowBits)==0&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new uL,this.strm.avail_out=0;var h=(i=this.strm,r=d.windowBits,i?(s=new uY,i.state=s,s.window=null,l=r,0!=(o=i&&i.state?(u=i.state,l<0?(c=0,l=-l):(c=(l>>4)+1,l<48&&(l&=15)),l&&(l<8||l>15))?-2:(null!==u.window&&u.wbits!==l&&(u.window=null),u.wrap=c,u.wbits=l,(e=i)&&e.state?((n=e.state).wsize=0,n.whave=0,n.wnext=0,e&&e.state?(a=e.state,e.total_in=e.total_out=a.total=0,e.msg="",a.wrap&&(e.adler=1&a.wrap),a.mode=1,a.last=0,a.havedict=0,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,a.lencode=a.lendyn=new cF.Buf32(852),a.distcode=a.distdyn=new cF.Buf32(592),a.sane=1,a.back=-1,0):-2):-2):-2)&&(i.state=null),o):-2);if(h!==uz.Z_OK||(this.header=new uq,th(this.strm,this.header),d.dictionary&&("string"==typeof d.dictionary?d.dictionary=te(d.dictionary):"[object ArrayBuffer]"===uX.call(d.dictionary)&&(d.dictionary=new Uint8Array(d.dictionary)),d.raw&&(h=tf(this.strm,d.dictionary))!==uz.Z_OK)))throw Error(uu[h])}function uV(t,e){var n=new uG(e);if(n.push(t,!0),n.err)throw n.msg||uu[n.err];return n.result}uG.prototype.push=function(t,e){var n,a,i,r,o,s=this.strm,l=this.options.chunkSize,c=this.options.dictionary,u=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?uz.Z_FINISH:uz.Z_NO_FLUSH,"string"==typeof t?s.input=ta(t):"[object ArrayBuffer]"===uX.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new cF.Buf8(l),s.next_out=0,s.avail_out=l),(n=tu(s,uz.Z_NO_FLUSH))===uz.Z_NEED_DICT&&c&&(n=tf(this.strm,c)),n===uz.Z_BUF_ERROR&&!0===u&&(n=uz.Z_OK,u=!1),n!==uz.Z_STREAM_END&&n!==uz.Z_OK)return this.onEnd(n),this.ended=!0,!1;s.next_out&&(0===s.avail_out||n===uz.Z_STREAM_END||0===s.avail_in&&(a===uz.Z_FINISH||a===uz.Z_SYNC_FLUSH))&&("string"===this.options.to?(i=tr(s.output,s.next_out),r=s.next_out-i,o=ti(s.output,i),s.next_out=r,s.avail_out=l-r,r&&cF.arraySet(s.output,s.output,i,r,0),this.onData(o)):this.onData(cF.shrinkBuf(s.output,s.next_out))),0===s.avail_in&&0===s.avail_out&&(u=!0)}while((s.avail_in>0||0===s.avail_out)&&n!==uz.Z_STREAM_END)return(n===uz.Z_STREAM_END&&(a=uz.Z_FINISH),a===uz.Z_FINISH)?(n=td(this.strm),this.onEnd(n),this.ended=!0,n===uz.Z_OK):(a===uz.Z_SYNC_FLUSH&&(this.onEnd(uz.Z_OK),s.avail_out=0),!0)},uG.prototype.onData=function(t){this.chunks.push(t)},uG.prototype.onEnd=function(t){t===uz.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=cF.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},to=uG,ts=uV,tl=function(t,e){return(e=e||{}).raw=!0,uV(t,e)},tc=uV;var uK={};cW(uK,cY,uR,uz),cI=uK;var uZ="CHIBIOEK",u$="HEAD",uQ="LAYR",uJ="GRUP",u0="ZEND";function u5(t){this.version=t.readU32BE(),this.width=t.readU32BE(),this.height=t.readU32BE(),this.layersNb=t.readU32BE()}function u2(t){for(var e=[,,,,],n=0;n<e.length;n++)e[n]=String.fromCharCode(t.readByte());if(this.chunkType=e.join(""),this.chunkSize=t.readU32BE(),t.eof)throw"Truncated chunk"}u5.FIXED_HEADER_LENGTH=16,u2.HEADER_LENGTH=8;var u1=/*#__PURE__*/function(){function t(e,n,a){lR(this,t),this.chunkHeader=e,this.width=n,this.height=a,this.state=0,this.payloadOffset=0,this.skipBytes=0,this.nameLength=0,this.done=!1,this.colorDecoder=null,this.maskDecoder=null}return lI(t,[{key:"readFixedHeader",value:function(t){this.payloadOffset=t.readU32BE(),this.blendMode=t.readU32BE(),this.alpha=t.readU32BE();var e=t.readU32BE();this.visible=(1&e)!=0,this.clip=(2&e)!=0,this.hasMask=(4&e)!=0,this.maskLinked=(8&e)!=0,this.maskVisible=(16&e)!=0,this.expanded=(32&e)!=0,this.lockAlpha=(64&e)!=0,this.blendMode===l7.LM_MULTIPLY&&(128&e)!=0&&(this.blendMode=l7.LM_MULTIPLY2),this.nameLength=t.readU32BE()}},{key:"getFixedHeaderLen",value:function(){return 20}},{key:"getVariableHeaderLen",value:function(){return this.nameLength}},{key:"readVariableSizeHeader",value:function(t){this.name=t.readString(this.nameLength)}},{key:"decode",value:function(t){for(var e;;){if(this.skipBytes>0){if(this.skipBytes>=t.length)return this.skipBytes-=t.length,null;t=t.subarray(this.skipBytes),this.skipBytes=0}switch(this.state){case 0:if(t.length<this.getFixedHeaderLen())break;e=new cB(t),this.readFixedHeader(e),t=t.subarray(e.pos),this.state=1;continue;case 1:if(t.length<this.getVariableHeaderLen())break;e=new cB(t),this.readVariableSizeHeader(e),this.layer=this.createLayer(),this.hasMask&&(this.layer.setMask(new l6(this.width,this.height,8)),this.maskDecoder=new u8(this.layer.mask)),this.layer instanceof cn&&(this.colorDecoder=new u6(this.layer.image)),this.skipBytes=this.payloadOffset-this.getFixedHeaderLen(),this.colorDecoder?this.state=3:this.maskDecoder?this.state=4:this.state=5;continue;case 3:if(t=this.colorDecoder.decode(t),this.colorDecoder.done){this.maskDecoder?this.state=4:this.state=5;continue}break;case 4:if(t=this.maskDecoder.decode(t),this.maskDecoder.done){this.state=5;continue}break;case 5:var n=this.payloadOffset;this.colorDecoder&&(n+=this.colorDecoder.bytesTotal),this.maskDecoder&&(n+=this.maskDecoder.bytesTotal),this.state=6,this.skipBytes=this.chunkHeader.chunkSize-n;continue;case 6:this.done=!0}break}return t}}]),t}(),u3=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(){return lR(this,n),e.apply(this,arguments)}return lI(n,[{key:"createLayer",value:function(){var t=new cn(this.width,this.height,this.name);return t.setBlendMode(this.blendMode),t.setAlpha(this.alpha),t.setVisible(this.visible),t.setClip(this.clip),t.setMaskLinked(this.maskLinked),t.setMaskVisible(this.maskVisible),t.setLockAlpha(this.lockAlpha),t}}]),n}(u1),u4=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(t,a,i){var r;return lR(this,n),(r=e.call(this,t,a,i)).childLayers=0,r}return lI(n,[{key:"readFixedHeader",value:function(t){lD(lF(n.prototype),"readFixedHeader",this).call(this,t),this.childLayers=t.readU32BE()}},{key:"getFixedHeaderLen",value:function(){return lD(lF(n.prototype),"getFixedHeaderLen",this).call(this)+4}},{key:"createLayer",value:function(){var t=new l3(this.name,this.blendMode);return t.setAlpha(this.alpha),t.setVisible(this.visible),t.setExpanded(this.expanded),t.setMaskLinked(this.maskLinked),t.setMaskVisible(this.maskVisible),t}}]),n}(u1),u6=/*#__PURE__*/function(){function t(e){lR(this,t),this.bytesRead=0,this.bytesTotal=e.width*e.height*l5.BYTES_PER_PIXEL,this.output=e.data,this.done=!1}return lI(t,[{key:"decode",value:function(t){if(null==t)return null;for(var e=this.bytesRead%l5.BYTES_PER_PIXEL,n=this.bytesRead-e,a=0,i=[l5.ALPHA_BYTE_OFFSET,l5.RED_BYTE_OFFSET,l5.GREEN_BYTE_OFFSET,l5.BLUE_BYTE_OFFSET];e<l5.BYTES_PER_PIXEL&&a<t.length;e++)this.output[n+i[e]]=t[a],a++;this.bytesRead+=a;for(var r=0|Math.min(t.length-a,this.bytesTotal-this.bytesRead),o=r/l5.BYTES_PER_PIXEL|0,s=r%l5.BYTES_PER_PIXEL,l=0;l<o;l++)this.output[this.bytesRead+l5.ALPHA_BYTE_OFFSET]=t[a],this.output[this.bytesRead+l5.RED_BYTE_OFFSET]=t[a+1],this.output[this.bytesRead+l5.GREEN_BYTE_OFFSET]=t[a+2],this.output[this.bytesRead+l5.BLUE_BYTE_OFFSET]=t[a+3],this.bytesRead+=l5.BYTES_PER_PIXEL,a+=l5.BYTES_PER_PIXEL;for(e=0,n=this.bytesRead;e<s;e++)this.output[n+i[e]]=t[a],a++;return(this.bytesRead+=s,this.bytesRead>=this.bytesTotal&&(this.done=!0),a<t.length)?t.subarray(a):null}}]),t}(),u8=/*#__PURE__*/function(){function t(e){lR(this,t),this.bytesRead=0,this.bytesTotal=e.width*e.height,this.output=e.data,this.done=!1}return lI(t,[{key:"decode",value:function(t){if(null==t)return null;var e,n=0|Math.min(t.length,this.bytesTotal-this.bytesRead),a=this.bytesRead;for(e=0;e<n;e++,a++)this.output[a]=t[e];return(this.bytesRead=a,this.bytesRead>=this.bytesTotal&&(this.done=!0),e<t.length)?t.subarray(e):null}}]),t}();function u7(t){return{major:t>>16&65535,minor:65535&t}}function u9(t,e){var n=new cB(new Uint8Array(u2.HEADER_LENGTH+e));return n.writeString(t),n.writeU32BE(e),n}function dt(){}function de(e){var n=[],a={},i=this;function r(t,e){null===e?i.emitEvent("loadingProgress",[1,"Loading your "+t.friendly+"..."]):i.emitEvent("loadingProgress",[e,"Loading your "+t.friendly+" ("+Math.round(100*e)+"%)..."])}e.loadChibiFileUrl&&(""+e.loadChibiFileUrl).length>0?n.push({url:e.loadChibiFileUrl,friendly:"drawing layers",name:"layers",required:!0}):e.loadImageUrl&&(""+e.loadImageUrl).length>0&&n.push({url:e.loadImageUrl,friendly:"drawing",name:"flat",required:!0}),e.loadSwatchesUrl&&n.push({url:e.loadSwatchesUrl,friendly:"color swatches",name:"swatches",required:!1,noProgress:!0}),this.load=function(){if(0==n.length){i.emitEvent("loadingComplete",[a]);return}var e=n.shift(),o=new XMLHttpRequest;function s(){e.required?i.emitEvent("loadingFailure",["Failed to load your "+e.friendly+", please try again later."]):i.load()}o.addEventListener("progress",function(t){var n;n=t.lengthComputable&&!e.noProgress?t.loaded/t.total:null,r(e,n)},!1),o.addEventListener("load",function(n){if(200==this.status){var r=this.response;i.emitEvent("loadingProgress",[1,"Starting ChickenPaint..."]),setTimeout(function(){(function(e,n){switch(e.name){case"flat":return new Promise(function(t,e){var a=new Blob([n],{type:"image/png"}),i=window.URL.createObjectURL(a);if(i){var r=new Image;r.onload=function(){var e=new cR(this.width,this.height),n=new cn(0,0,"Layer 1");n.image=l5.createFromImage(r),e.addLayerObject(e.getLayersRoot(),n),r=null,window.URL.revokeObjectURL(i),t(e)},r.src=i}else e(null)});case"swatches":var a=new dt().read(n);if(a)return Promise.resolve(a);return Promise.reject(null);case"layers":return function(e,n){n=n||{};var a,i=new/*@__PURE__*/(t(cI)).Inflate({}),r=0,o=null,s=null,l=0,c=null,u=null,d=null;function h(t){var e;for(d=function(t,e){if(null===t||0===t.length)return e;if(null===e||0===e.length)return t;var n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}(d,t),t=null;d;){if(l<d.length)d=d.subarray(l),l=0;else{l-=d.length,d=null;break}switch(r){case 0:if(d.length<u2.HEADER_LENGTH)break;if(u=new u2(e=new cB(d)),d=d.subarray(e.pos),c){if(u.chunkType==u0)r=45;else if(u.chunkType==uQ){r=2,a=new u3(u,c.width,c.height);continue}else if(u.chunkType==uJ){r=3,a=new u4(u,c.width,c.height);continue}else{console.log("Unknown chunk type '"+u.chunkType+"', attempting to skip..."),l=u.chunkSize;continue}}else if(u.chunkType==u$){r=1;continue}else r=5;break;case 1:if(d.length<u.chunkSize)break;if(u7((c=new u5(e=new cB(d))).version).major>0){r=5;break}s=(o=new cR(c.width,c.height)).getLayersRoot(),l=u.chunkSize,r=0;continue;case 2:if(d=a.decode(d),a.done){o.addLayerObject(s,a.layer),r=0;continue}break;case 3:if(d=a.decode(d),a.done){o.addLayerGroupObject(s,a.layer,a.childLayers),r=0;continue}}break}}return new Promise(function(t){if(e instanceof ArrayBuffer)t(e);else{var n=new FileReader;n.onload=function(){t(this.result)},n.readAsArrayBuffer(e)}}).then(function(t){return new Promise(function(e,a){var s=new Uint8Array(t);if(!function(t){for(var e=0;e<uZ.length;e++)if(t[e]!=uZ.charCodeAt(e))return!1;return!0}(s)){a("This doesn't appear to be a ChibiPaint layers file, is it damaged?");return}s=s.subarray(uZ.length),i.onData=h,i.onEnd=function(t){0===t&&45==r?(!1!==n.upgradeMultiplyLayers&&c.version<10&&o.upgradeMultiplyLayers(n.upgradeMultiplyLayers),o.selectTopmostVisibleLayer(),e(o)):a("Fatal error decoding ChibiFile: "+t)},i.push(s,!0)})})}(n);default:return Promise.reject("Unexpected resource type '"+e.name+"'")}})(e,r).then(function(t){a[e.name]=t,i.load()},function(){i.emitEvent("loadingFailure",["Failed to read your "+e.friendly])})},0)}else s()},!1),o.addEventListener("error",s),r(e,e.noProgress?null:0),o.open("GET",e.url,!0),o.responseType="arraybuffer",o.send()}}dt.prototype.read=function(t){if(null==t)return null;var e,n=new cB(new Uint8Array(t)),a=[];if(1!=n.readU16BE())return null;e=n.readU16BE();for(var i=0;i<e;i++)if(0==n.readU16BE()){var r=255*n.readU16BE()/65535,o=255*n.readU16BE()/65535,s=255*n.readU16BE()/65535;n.readU16BE(),a.push(r<<16|o<<8|s)}return a},dt.prototype.write=function(t){var e=new cB(new Uint8Array(4+10*t.length));e.writeU16BE(1),e.writeU16BE(t.length);for(var n=0;n<t.length;n++){var a=t[n];e.writeU16BE(0),e.writeU16BE((a>>16&255)*257),e.writeU16BE((a>>8&255)*257),e.writeU16BE((255&a)*257),e.writeU16BE(0)}return e.getAsDataArray()},de.prototype=Object.create(/*@__PURE__*/t(cr).prototype),de.prototype.constructor=de;var dn={};i=function(){function t(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){r(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function e(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function n(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof tm&&tm.global===tm?tm:void 0,i=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(i,r,o){var s=a.URL||a.webkitURL,l=document.createElement("a");r=r||i.name||"download",l.download=r,l.rel="noopener","string"==typeof i?(l.href=i,l.origin===location.origin?n(l):e(l.href)?t(i,r,o):n(l,l.target="_blank")):(l.href=s.createObjectURL(i),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){n(l)},0))}:"msSaveOrOpenBlob"in navigator?function(a,i,r){if(i=i||a.name||"download","string"!=typeof a){var o;navigator.msSaveOrOpenBlob((void 0===(o=r)?o={autoBom:!1}:"object"!=typeof o&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a),i)}else if(e(a))t(a,i,r);else{var s=document.createElement("a");s.href=a,s.target="_blank",setTimeout(function(){n(s)})}}:function(e,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var s="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&l||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},u.readAsDataURL(e)}else{var d=a.URL||a.webkitURL,h=d.createObjectURL(e);o?o.location=h:location.href=h,o=null,setTimeout(function(){d.revokeObjectURL(h)},4e4)}});a.saveAs=r.saveAs=r,dn=r},"function"==typeof define&&define.amd?define([],i):i();var da={};da=JSON.parse('{"Dodge (tool)":"Dodge","Burn (tool)":"Burn","Color (picker)":"Color","Color swatches (shorter)":"Swatches"}');var di={ja:JSON.parse('{"File":"ãã¡ã¤ã«","Save to my computer":"PCã«ä¿å­","Post Oekaki":"ãçµµãããæç¨¿","Edit":"ç·¨é","Undo":"åãæ¶ã","Redo":"ããç´ã","Cut":"åãåã","Copy":"ã³ãã¼","Clear history":"å±¥æ­´æ¶å»","Copy merged":"çµåã³ãã¼","Paste":"è²¼ãä»ã","Select all":"ãã¹ã¦é¸æ","Deselect":"é¸æè§£é¤","Transform":"å¤å½¢","Layers":"ã¬ã¤ã¤ã¼","Duplicate":"è¤è£½","Merge down":"ä¸ã®ã¬ã¤ã¤ã¼ã¨çµå","Merge group":"ã°ã«ã¼ãçµå","Merge all layers":"å¨ã¬ã¤ã¤ã¼çµå","Add layer mask":"ã¬ã¤ã¤ã¼ãã¹ã¯è¿½å ","Delete mask":"ã¬ã¤ã¤ã¼ãã¹ã¯åé¤","Delete layer mask":"ã¬ã¤ã¤ã¼ãã¹ã¯åé¤","Apply mask":"ã¬ã¤ã¤ã¼ãã¹ã¯é©ç¨","Apply layer mask":"ã¬ã¤ã¤ã¼ãã¹ã¯é©ç¨","Disable mask":"ã¬ã¤ã¤ã¼ãã¹ã¯ç¡å¹å","Enable mask":"ã¬ã¤ã¤ã¼ãã¹ã¯æå¹å","Clip to the layer below":"ä¸ã®ã¬ã¤ã¤ã¼ã§ã¯ãªããã³ã°","Unclip from the layer below":"ã¯ãªããã³ã°è§£é¤","Effects":"å¹æ","Clear":"æ¶å»","Fill":"å¡ãæ½°ã","Flip horizontal":"å·¦å³åè»¢","Flip vertical":"ä¸ä¸åè»¢","Invert":"ãã¬ãã¸åè»¢","Box blur...":"ã¼ãã","Box blur":"ã¼ãã","Blur amount (pixels)":"ã¼ããé(ãã¯ã»ã«åä½)","Iterations (1-8, larger gives smoother blur)":"åå¾©(1-8,å¤§ããã»ã©ã¼ãããæ»ãã)","Monochromatic noise":"åè²ãã¤ãº","Color noise":"ã«ã©ã¼ãã¤ãº","View":"è¡¨ç¤º","Full-screen mode":"ãã«ã¹ã¯ãªã¼ã³ã¢ã¼ã","Zoom in":"æ¡å¤§","Zoom out":"ç¸®å°","Zoom 100%":"100%","Smooth-out zoomed canvas":"ãºã¼ã ããªãããã«è¡¨ç¤ºãã","Show grid":"ã°ãªãããè¡¨ç¤º","Grid options...":"ã°ãªããã®è¨­å®","Palettes":"ãã¬ãã","Rearrange":"åæå","Toggle palettes":"è¡¨ç¤ºéè¡¨ç¤ºåãæ¿ã","Use old icons":"å¤ãã¢ã¤ã³ã³","Show tool options":"ãã¼ã«ãªãã·ã§ã³","Show color":"ã«ã©ã¼","Show layers":"ã¬ã¤ã¤ã¼","Show misc":"æä½","Show stroke":"ã¹ãã­ã¼ã¯","Show swatches":"ã«ã©ã¼ã»ãã","Show textures":"ãã¯ã¹ãã£","Show tools":"ãã¼ã«","Help":"ãã«ã","Tablet support":"ã¿ãã¬ãããµãã¼ã","Shortcuts":"ã·ã§ã¼ãã«ãã","About":"ChickenPaint Beã«ã¤ãã¦","Removes all undo/redo information to regain memory":"å±¥æ­´ãã¯ãªã¢ãã¦ã¡ã¢ãªãéæ¾ãã¾ã","Clears the selected area":"æ¶å»","Invert the image colors":"ãã¬ãã¸åè»¢","Blur effect":"ã¼ãããã£ã«ã¿","Fills the selection with noise":"åè²ãã¤ãºã§å¡ãæ½°ã","Fills the selection with colored noise":"ã«ã©ã¼ãã¤ãºã§å¡ãæ½°ã","Linear interpolation is used to give a smoothed looked to the picture when zoomed in":"ç»åã®æ¡å¤§æã«è£å®ãã¦æ»ããã«è¡¨ç¤ºãã¾ã","Rearrange the palette windows":"ãã¬ãããåéç½®","Hides or shows all palettes":"ãã¬ããã®è¡¨ç¤º/éè¡¨ç¤º","You\'re about to clear the current Undo/Redo history.\\nThis operation cannot be undone, are you sure you want to do that?":"ã¢ã³ãã¥ã»ãªãã¥ã®å±¥æ­´ãæ¶å»ãããã¨ãã¦ãã¾ãã\\nãã®æä½ã¯åã«æ»ããã¨ãã§ãã¾ãããæ¬å½ã«å®è¡ãã¾ãã?","Misc":"æä½","Round Pixelated":"åãã¯ã»ã«","Round Hard Edge":"åãã¼ãã¨ãã¸","Round Soft":"åã½ãã","Square Pixelated":"è§ãã¯ã»ã«","Square Hard Edge":"è§ãã¼ãã¨ãã¸","Color (picker)":"ã«ã©ã¼","Tool options":"ãã¼ã«ãªãã·ã§ã³","Brush size":"ãã©ã·ãµã¤ãº","Opacity":"ä¸éæåº¦","Color":"è²è£å","Blend":"æ··è²","Spacing":"éé","Scattering":"æ£ä¹±","Smoothing":"æã¶ãè£æ­£","Color swatches":"ã«ã©ã¼ã»ãã","Color swatches (shorter)":"ã«ã©ã¼ã»ãã","Remove":"åé¤","Replace with current color":"é¸æä¸­ã®è²ã«ç½®ãæã","Save swatches to your computer...":"ã«ã©ã¼ã»ãããPCã«ä¿å­","Load swatches from your computer...":"ã«ã©ã¼ã»ãããPCããèª­ã¿è¾¼ã¿","Add the current brush color as a new swatch":"é¸æä¸­ã®è²ãè¿½å ","Sample all layers":"å¨ã¬ã¤ã¤ã¼æ··å","Lock transparency":"éæé¨åãä¿è­·","Textures":"ãã¯ã¹ãã£","Customize":"ã«ã¹ã¿ãã¤ãº","Inverse":"ãã¬ãã¸åè»¢","Mirror":"å·¦å³åè»¢","Brightness":"è¼åº¦","Contrast":"ã³ã³ãã©ã¹ã","Reset":"ãªã»ãã","Layer blending mode":"åæã¢ã¼ã","Normal":"éå¸¸","Multiply":"ä¹ç®","Add":"å ç®","Screen":"ã¹ã¯ãªã¼ã³","Lighten":"æ¯è¼(æ)","Darken":"æ¯è¼(æ)","Subtract":"æ¸ç®","Dodge":"è¦ãç¼ã","Burn":"ç¼ãè¾¼ã¿","Overlay":"ãªã¼ãã¼ã¬ã¤","Hard Light":"ãã¼ãã©ã¤ã","Soft Light":"ã½ããã©ã¤ã","Vivid Light":"ããããã©ã¤ã","Linear Light":"ãªãã¢ã©ã¤ã","Pin Light":"ãã³ã©ã¤ã","Passthrough":"éé","Stroke":"ã¹ãã­ã¼ã¯","Free-hand":"ããªã¼ãã³ã","Straight line":"ç´ç·","Bezier curve":"Bzï¼ãã¸ã§ï¼æ²ç·","Tools":"ãã¼ã«","Marquee":"é¸æç¯å²","Move tool":"ç§»å","Flood fill":"å¡ãæ½°ã","Gradient fill":"ã°ã©ãã¼ã·ã§ã³","Color picker":"ã¹ãã¤ã","Rotate canvas":"ã­ã£ã³ãã¹ã®åè»¢","Grab canvas":"ã­ã£ã³ãã¹ã®ä½ç½®","Pencil":"éç­","Pen":"ãã³","Airbrush":"ã¨ã¢ãã©ã·","Waterpaint":"æ°´å½©","Eraser":"æ¶ãã´ã ","Soft eraser":"èæ¶ã","Smudge":"æå","Blender":"æ··è²","Dodge (tool)":"è¦ãç¼ã","Burn (tool)":"ç¼ãè¾¼ã¿","Blur":"ã¼ãã","Grid options":"ã°ãªããã®è¨­å®","Grid size":"ã°ãªãããµã¤ãº","Rename...":"ååãå¤æ´","Add layer":"æ°è¦ã¬ã¤ã¤ã¼","Delete layer":"ã¬ã¤ã¤ã¼åé¤","Add group":"æ°è¦ã°ã«ã¼ã","Delete group":"ã°ã«ã¼ãåé¤","Add mask":"ã¬ã¤ã¤ã¼ãã¹ã¯è¿½å ","Gradient":"ã°ã©ãã¼ã·ã§ã³ä½æ","Transform style":"å¤å½¢ã¹ã¿ã¤ã«","Apply transform":"å¤å½¢ç¢ºå®","Complete transform":"å¤å½¢ãå®äº","Undo transform":"åãæ¶ã","You need to finish transforming this layer before you can do that. What would you like to do with the transform?":"ç¶è¡ããããã«å¤å½¢ãå®äºãã¾ãã","Smooth":"ã¹ã ã¼ãº","Sharp":"ã·ã£ã¼ã","Opacity: ":"ä¸éæåº¦:","Please enter a color in hex format":"16é²å½¢å¼ã§è²ãå¥åãã¦ãã ããï¼#xxxxxxã®å½¢ï¼","Cancel":"ã­ã£ã³ã»ã«","Ok":"OK","Okay":"OK","OK":"OK","Whoops! This layer is currently hidden":"éè¡¨ç¤ºã¬ã¤ã¤ã¼ã§ãã","Whoops! This layer\'s opacity is currently 0%":"ã¬ã¤ã¤ã¼ã®ä¸éæåº¦ã0%ã§ã","Whoops! You can\'t draw on a group":"ã°ã«ã¼ããã©ã«ãã«ã¯æãã¾ãã","Whoops! All of the selected pixels are transparent!":"ã¬ã¤ã¤ã¼ãç©ºã§ã","Image":"ç»å","Layer mask":"ã¬ã¤ã¤ã¼ãã¹ã¯","Sorry, you can\'t remove the last remaining layer in the drawing.":"æå¾ã®1ã¤ãªã®ã§åé¤ã§ãã¾ããã","Are you sure you want to send your drawing to the server and finish drawing now?":"ãçµµããããµã¼ãã¼ã«éä¿¡ãã¾ããçµäºãã¦ãããããã§ããï¼","Your drawing has unsaved changes! Are you sure to want to navigate away?":"ãçµµããã«æªä¿å­ã®å¤æ´ãããã¾ããçµäºãã¦ãããããã§ããï¼","Many of the menu options and painting tools have keyboard shortcuts which are written next to them or appear when you hover.":"å©ç¨å¯è½ãªã­ã¼ãã¼ãã·ã§ã¼ãã«ããã®ããã¤ãã¯ã¡ãã¥ã¼ã®æ¨ªããã¼ã«ãããã«è¡¨ç¤ºããã¦ãã¾ãã","Here are some other shortcuts which are not as obvious!":"ãã®ä¸è¦§ã¯ããä»¥å¤ã®ã·ã§ã¼ãã«ãããã¾ã¨ãããã®ã§ãã","Right":"å³","Left":"å·¦","Middle":"ä¸­","or":"ã¾ãã¯","Double click":"ããã«ã¯ãªãã¯","Color swatches palette":"ã«ã©ã¼ã»ãã","Use as the drawing color":"ãã¬ããã®è²ãåå¾","Remove or replace a color swatch":"ãã¬ããã®å¤æ´ï½¥åé¤","Line drawing mode":"ç´ç·ã¢ã¼ã","Snap line to nearest 45 degrees":"45Â°åä½ã§ã¹ããã","Painting tools":"ãã¼ã«","Change brush opacity":"ãã©ã·ã®ä¸éæåº¦","Change brush size":"ãã©ã·ãµã¤ãº","Brush palette":"ãã©ã·ãã¬ãã","Adjust brush sliders more precisely":"ãã©ã·ã¹ã©ã¤ãã¼ãããç´°ããèª¿æ´","Drawing canvas":"ã­ã£ã³ãã¹","Move the canvas around":"ã­ã£ã³ãã¹ãç§»å","Rotate the canvas":"ã­ã£ã³ãã¹ã®åè»¢","Sample the color under the cursor":"ã­ã£ã³ãã¹ã®è²ãã¹ãã¤ã","Layers palette":"ã¬ã¤ã¤ã¼ãã¬ãã","Rename layer":"ã¬ã¤ã¤ã¼åå¤æ´","Toggle mask enable/disable":"ãã¹ã¯ã®æå¹/ç¡å¹åãæ¿ã","Toggle mask View":"ãã¹ã¯ã®è¡¨ç¤º/éè¡¨ç¤ºåãæ¿ã","Save Oekaki":"ä¿å­","Saving drawing...":"ãçµµãããä¿å­ä¸­â¦","Preparing your drawing to be saved, please wait...":"ãçµµãããä¿å­ããæºåããã¦ãã¾ãããã°ãããå¾ã¡ãã ããâ¦","Drawing saved!":"ãçµµãããä¿å­ãã¾ããï¼","Your drawing has been saved, would you like to post it to the forum now?":"ãçµµãããä¿å­ããã¾ããããã©ã¼ã©ã ã¸æç¨¿ãã¾ããï¼","Yes, post it now":"ã¯ããæç¨¿ãã¾ã","No, keep drawing":"ã¾ã æãã¾ã","No, quit and I\'ll finish it later":"ã¢ããªãçµäºãã¦ç¶ããå¾ã§æã","Your drawing has been saved, would you like to view it on the forum now?":"ãçµµãããä¿å­ããã¾ããããã©ã¼ã©ã ã¸æç¨¿ãã¾ããï¼","Yes, view the post":"ã¯ããæç¨¿ãã¾ãã","Your drawing has been saved, redirecting you to view your new post now...":"ãçµµãããä¿å­ããã¾ãããæç¨¿åã«ç§»åãã¾ãã","Sorry, your drawing could not be saved, please try again later.":"ãçµµãããä¿å­ã§ãã¾ããã§ãããååº¦æç¨¿ãã¦ã¿ã¦ãã ããã","The error returned from the server was":"ãµã¼ãããè¿ã£ã¦æ¥ãã¨ã©ã¼"}'),en:da},dr=da,ds="en";function dl(t){(t=t.split(/[-_]/,1)[0].toLowerCase())in di?(dr=di[t],ds=t):(dr=da,ds="en")}function dc(t){return t in dr?dr[t]:t}function du(e){var n=this,a=!1;function i(t){null===t?n.emitEvent("savingProgress",[1,dc("Saving drawing...")]):n.emitEvent("savingProgress",[t,dc("Saving drawing...")+" ("+Math.round(100*t)+"%)"])}function r(t){n.emitEvent("savingFailure",[t])}e.rotation=e.rotation||0,this.save=function(){var o,s,l,c,u;(o=new Blob([function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(e.artwork.getFlatPNG(e.rotation))],{type:"image/png"}),e.artwork.isSimpleDrawing())?l=Promise.resolve(null):(c=e.artwork,u=u||{},l=Promise.resolve().then(function(){var e=new/*@__PURE__*/(t(cI)).Deflate({level:7}),n=[],a=new Uint8Array(uZ.length),i=c.getLayersRoot().getLinearizedLayerList(!1),r=u.forceOldVersion?0:function(t){var e=!0,n=!1,a=void 0;try{for(var i,r=t.getLayersRoot().getLinearizedLayerList(!1)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;if(o instanceof l3||o.mask||o.clip||o.blendMode>l7.LM_LAST_CHIBIPAINT||o.blendMode===l7.LM_MULTIPLY)return 10}}catch(t){n=!0,a=t}finally{try{e||null==r.return||r.return()}finally{if(n)throw a}}return 0}(c),o=0===(p=u7(r)).major&&0===p.minor?"ChibiPaint v0.0":"ChickenPaint v"+p.major+"."+p.minor,s=Promise.resolve();e.onData=function(t){n.push(t)};for(var l=0;l<uZ.length;l++)a[l]=uZ.charCodeAt(l);n.push(a),e.push((v=i.length,(m=u9(u$,u5.FIXED_HEADER_LENGTH)).writeU32BE(r),m.writeU32BE(c.width),m.writeU32BE(c.height),m.writeU32BE(v),m.getAsDataArray()),!1);var d=!0,h=!1,f=void 0;try{for(var p,v,m,g,y=i[Symbol.iterator]();!(d=(g=y.next()).done);d=!0)!function(){var t=g.value;s=s.then(function(){return new Promise(function(n){e.push(function(t){var e,n,a=t instanceof cn,i=4*(a?5:6),r=t.name.length,o=(a?t.image.data.length:0)+(t.mask?t.mask.data.length:0),s=u9(a?uQ:uJ,i+r+o),l=0;return t.visible&&(l|=1),a&&t.clip&&(l|=2),t.mask&&(l|=4),t.maskLinked&&(l|=8),t.maskVisible&&(l|=16),t.lockAlpha&&(l|=64),!a&&t.expanded&&(l|=32),t.blendMode===l7.LM_MULTIPLY2?(n=l7.LM_MULTIPLY,l|=128):n=t.blendMode,s.writeU32BE(i+r),s.writeU32BE(n),s.writeU32BE(t.alpha),s.writeU32BE(l),s.writeU32BE(t.name.length),a||s.writeU32BE(t.layers.length),s.writeString(t.name),a&&function(t,e){for(var n=t.pos,a=t.data,i=e.data,r=0;r<i.length;r+=l5.BYTES_PER_PIXEL)a[n++]=i[r+l5.ALPHA_BYTE_OFFSET],a[n++]=i[r+l5.RED_BYTE_OFFSET],a[n++]=i[r+l5.GREEN_BYTE_OFFSET],a[n++]=i[r+l5.BLUE_BYTE_OFFSET];t.pos=n}(s,t.image),t.mask&&(e=t.mask,s.data.set(e.data,s.pos),s.pos+=e.data.length),s.getAsDataArray()}(t),!1),setTimeout(n,10)})})}()}catch(t){h=!0,f=t}finally{try{d||null==y.return||y.return()}finally{if(h)throw f}}return s.then(function(){return new Promise(function(t,a){e.onEnd=function(e){if(0===e){if("undefined"!=typeof Blob)t({bytes:new Blob(n,{type:"application/octet-stream"}),version:o});else{var i=new Uint8Array(n.map(function(t){return t.byteLength}).reduce(function(t,e){return t+e},0)),r=0,s=!0,l=!1,c=void 0;try{for(var u,d=n[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var h=u.value;i.set(h,r),r+=h.byteLength}}catch(t){l=!0,c=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}t({bytes:i,version:o})}}else a(e)},e.push(u9(u0,0).getAsDataArray(),!0)})})})),l.then(function(l){if(a){n.emitEvent("savingFailure");return}if(s=e.swatches?new Blob([new dt().write(e.swatches)],{type:"application/octet-stream"}):null,e.url){var c="This marker ensures the upload wasn't truncated",u=new FormData;u.append("beginMarker",c),u.append("painter","ChickenPaint v2.0"),u.append("picture",o),o=null,l?(u.append("chibifileFormat",l.version),u.append("chibifile",l.bytes),l=null,u.append("rotation",""+e.rotation)):u.append("rotation","0"),s&&(u.append("swatches",s),s=null),u.append("endMarker",c),i(.5),fetch(e.url,{method:"POST",mode:"same-origin",headers:{"X-Requested-With":"chickenpaint"},body:u}).then(function(t){if(!t.ok)throw Error("Network response was not ok (".concat(t.status,")"));return t.text()}).then(function(t){/^CHIBIOK/.test(t)?(i(1),n.emitEvent("savingComplete")):r(t)}).catch(function(t){r(t.message)})}else{var d="oekaki_"+new Date().toISOString().split(".")[0].replace(/[^0-9]/g,"_");/*@__PURE__*/t(dn).saveAs(o,d+".png"),l&&/*@__PURE__*/t(dn).saveAs(l.bytes,d+".chi"),s&&/*@__PURE__*/t(dn).saveAs(s,d+".aco")}}).catch(function(t){n.emitEvent("savingFailure")})},this.cancel=function(){a=!0}}function dd(t,e,n){for(var a,i,r,o,s=document.createElement("canvas"),l=s.getContext("2d"),c=new Image,u=new Image,d=new Image,h=new Image,f=new Image,p=new Image,v=new Image,m=[c,u,d,h,f,p,v],g=0,y=0,b="",w=n+"splash/",_=0;_<m.length;_++)m[_].onload=function(){++g==m.length&&E()};function E(){var t=s.width/2,e=s.height/2;if(l.fillStyle="white",l.fillRect(0,0,s.width,s.height),g==m.length){var n,w=h.width,_=h.height,E=Math.round(t-w/2),k=Math.round(e-_/2);l.drawImage(h,E,k),n=y,a||((a=document.createElement("canvas")).width=w,a.height=_,r=a.getContext("2d")),r.globalCompositeOperation="copy",r.drawImage(c,0,0),i||((i=document.createElement("canvas")).width=w,i.height=_,o=i.getContext("2d")),o.globalCompositeOperation="copy",o.drawImage(v,0,0),o.globalCompositeOperation="source-in",o.drawImage(v,0,Math.round(170*n)),r.globalCompositeOperation="source-over",r.drawImage(i,0,0),r.drawImage(u,0,0),r.globalCompositeOperation="screen",r.drawImage(p,0,0),r.globalCompositeOperation="multiply",r.drawImage(f,0,0),l.globalAlpha=.88,l.drawImage(a,E,k),l.globalAlpha=1,l.drawImage(d,E,k),e=Math.round(e+_/2+2)}if(""!=b){l.fillStyle="black";for(var T=b.split("\n"),x=0;x<T.length;x++){var O=T[x],P=l.measureText(O).width;e+=28,l.fillText(O,t-P/2,e)}}}function k(){s.width=s.clientWidth,s.height=s.clientHeight,l.font="14pt sans-serif",E()}c.src=w+"cup.png",p.src=w+"highlights.png",u.src=w+"lid.png",d.src=w+"lines.png",f.src=w+"shading.png",v.src=w+"smoothie.png",h.src=w+"text.png",e.on("loadingProgress",function(t,e){y=t,b=e,E()}),e.on("loadingFailure",function(t){y=0,b=t,E()}),e.on("loadingComplete",function(){window.removeEventListener("resize",k),t.removeChild(s)}),window.addEventListener("resize",k),s.className="chickenpaint-splash-screen",t.appendChild(s),k()}du.prototype=Object.create(/*@__PURE__*/t(cr).prototype),du.prototype.constructor=du;var dh={};function df(t){for(var e={DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27," ":32,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,SHIFT:16,"[":219,"]":221,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,0:48,"-":189,"=":187,"+":187,";":187,META:91,LEFTMETA:91,RIGHTMETA:91,ALT:18,ALTGRAPH:18,OPTION:18,CONTROL:17},n=65;n<=90;n++)e[String.fromCharCode(n)]=n;if((t=t.toUpperCase())in e)return e[t]}function dp(){var t,e=null,n=this;this.isPen=function(){var t;return!!e&&(1==(t=e.pointerType)||3==t)},this.getPressure=function(){return e?e.pressure:1},this.pluginLoaded=function(){console.log("Wacom tablet support loaded!"),e=t.penAPI},this.isTabletPresent=function(){return!!e},this.detectTablet=function(){if(/Chrome/i.test(navigator.userAgent)&&!/OPR/.test(navigator.userAgent)){console.log("Not attempting to load Wacom tablet plugin, since this is Chrome");return}if(console.log("Attempting to load Wacom tablet support..."),"classid"in(t=document.createElement("object")))t.classid="CLSID:092dfa86-5807-5a94-bf3b-5a53ba9e5308";else{var e=document.createElement("param");e.name="onload",e.value="onWacomPluginLoaded",t.appendChild(e),t.type="application/x-wacomtabletplugin"}t.style.position="absolute",t.style.visibility="hidden",t.onload="onWacomPluginLoaded",document.body.appendChild(t),setTimeout(function(){n.isTabletPresent()||console.log("Looks like the Wacom plugin isn't installed, or failed to load.")},5e3)}}function dv(){var t,e,n,a,i,r,o,s,l=this;this.x0=this.y0=this.x1=this.y1=this.x2=this.y2=this.x3=this.y3=0;var c=function(c){var u=3*c,d=u*c,h=c*c*c,f=2*d,p=6*h,v=l.x0-2*l.x1+l.x2,m=l.y0-2*l.y1+l.y2,g=3*(l.x1-l.x2)-l.x0+l.x3,y=3*(l.y1-l.y2)-l.y0+l.y3;t=l.x0,i=l.y0,e=(l.x1-l.x0)*u+v*d+g*h,r=(l.y1-l.y0)*u+m*d+y*h,n=v*f+g*p,o=m*f+y*p,a=g*p,s=y*p};this.compute=function(l,u,d){c(1/d),l[0]=t,u[0]=i;for(var h=1;h<d;h++)t+=e,i+=r,e+=n,r+=o,n+=a,o+=s,l[h]=t,u[h]=i}}/*!
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */function dm(t,e,n,a){var i,r=0;return"boolean"!=typeof e&&(a=n,n=e,e=void 0),function(){var o=this,s=+new Date-r,l=arguments;function c(){r=+new Date,n.apply(o,l)}a&&!i&&c(),i&&clearTimeout(i),void 0===a&&s>t?c():!0!==e&&(i=setTimeout(a?function(){i=void 0}:c,void 0===a?t-s:t))}}function dg(t){this.points=t||[]}function dy(t,e){this.x=t,this.y=e}function db(t){for(var e=document.createElement("canvas"),n=e.getContext("2d"),a=n.createImageData(64,64),i=a.data,r=0,o=0;o<64;o++)for(var s=0;s<64;s++)(8&s)!=0^(8&o)!=0?(i[r++]=255,i[r++]=255,i[r++]=255):(i[r++]=204,i[r++]=204,i[r++]=204),i[r++]=255;return e.width=64,e.height=64,n.putImageData(a,0,0),t.createPattern(e,"repeat")}function dw(t,e){e+="Style",t.globalCompositeOperation="exclusion","exclusion"==t.globalCompositeOperation?t[e]="white":(t.globalCompositeOperation="difference",t[e]="#888","difference"!=t.globalCompositeOperation&&(t[e]="black"))}function d_(e){var n,a=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),o=0,s=1,l=0,c=1,u=10,d=!1,h=1,f=!1,p=this;function v(){var n=e?/*@__PURE__*/t(lA)(a).height():/*@__PURE__*/t(lA)(a).width();h=c/(s-o)*n;var u=(l-o)/(s-o)*(n-h);r.style[e?"height":"width"]=h+"px",i.style[e?"height":"width"]=h+"px",i.style[e?"top":"left"]=u+"px"}this.setValues=function(t,e,n,a){l=t,c=e,o=n,s=a,v()},this.setBlockIncrement=function(t){u=t},this.setUnitIncrement=function(t){},this.getElement=function(){return a},this.getValueIsAdjusting=function(){return d},a.className="chickenpaint-scrollbar "+(e?"chickenpaint-scrollbar-vertical":"chickenpaint-scrollbar-horizontal"),i.className="chickenpaint-scrollbar-handle",i.setAttribute("touch-action","none"),r.className="chickenpaint-scrollbar-handle-inner",i.appendChild(r),a.appendChild(i),i.addEventListener("pointerdown",function(r){r.stopPropagation(),n=e?r.pageY-/*@__PURE__*/t(lA)(a).offset().top:r.pageX-/*@__PURE__*/t(lA)(a).offset().left,i.setPointerCapture(r.pointerId),/*@__PURE__*/t(lA)(i).addClass("dragging"),f=!0}),i.addEventListener("pointermove",function(i){if(f){d=!0;var r=e?/*@__PURE__*/t(lA)(a).height():/*@__PURE__*/t(lA)(a).width(),c=e?i.pageY-/*@__PURE__*/t(lA)(a).offset().top:i.pageX-/*@__PURE__*/t(lA)(a).offset().left;l+=(c-n)*(s-o)/(r-h),l=Math.min(Math.max(l,o),s),n=c,p.emitEvent("valueChanged",[l]),v(),d=!1}}),i.addEventListener("pointerup",function(e){if(e.stopPropagation(),f){try{i.releasePointerCapture(e.pointerId)}catch(t){}/*@__PURE__*/t(lA)(i).removeClass("dragging"),f=!1}}),i.addEventListener("click",function(t){t.stopPropagation()}),a.addEventListener("click",function(n){this==a&&((e?n.pageY-/*@__PURE__*/t(lA)(a).offset().top:n.pageX-/*@__PURE__*/t(lA)(a).offset().left)<parseInt(i.style[e?"top":"left"],10)?l-=u:l+=u,p.emitEvent("valueChanged",[l]),v())})}function dE(){this.modes=[]}!function(t){var e,n={},a={16:!1,18:!1,17:!1,91:!1},i="all",r={"â§":16,shift:16,"â¥":18,alt:18,option:18,"â":17,ctrl:17,control:17,"â":91,command:91},o={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},s=function(t){var e=o[t]||t.toUpperCase().charCodeAt(0);return"function"==typeof e?e():e},l=[];for(e=1;e<20;e++)o["f"+e]=111+e;function c(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return -1}var u={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function d(t,e,a){var i,r;i=f(t),void 0===a&&(a=e,e="all");for(var o=0;o<i.length;o++)r=[],(t=i[o].split("+")).length>1&&(r=p(t),t=[t[t.length-1]]),(t=s(t=t[0]))in n||(n[t]=[]),n[t].push({shortcut:i[o],scope:e,method:a,key:i[o],mods:r})}for(e in r)d[e]=!1;function h(){return i||"all"}function f(t){var e;return""==(e=(t=t.replace(/\s/g,"")).split(","))[e.length-1]&&(e[e.length-2]+=","),e}function p(t){for(var e=t.slice(0,t.length-1),n=0;n<e.length;n++)e[n]=r[e[n]];return e}function v(t,e,n){t.addEventListener&&t.addEventListener(e,n,!1)}v(document,"keydown",function(t){!function(t){var i,o,s,f,p,v;if(-1==c(l,i=df(t.key))&&l.push(i),i in a){for(s in a[i]=!0,r)r[s]==i&&(d[s]=!0);return}if(function(t){for(e in a)a[e]=t[u[e]]}(t),d.filter.call(this,t)&&i in n){for(f=0,v=h();f<n[i].length;f++)if((o=n[i][f]).scope==v||"all"==o.scope){for(s in p=o.mods.length>0,a)(!a[s]&&c(o.mods,+s)>-1||a[s]&&-1==c(o.mods,+s))&&(p=!1);(0!=o.mods.length||a[16]||a[18]||a[17]||a[91])&&!p||!1!==o.method(t,o)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}}(t)}),v(document,"keyup",function(t){var e,n=df(t.key),i=c(l,n);if(i>=0&&l.splice(i,1),n in a)for(e in a[n]=!1,r)r[e]==n&&(d[e]=!1)}),v(window,"focus",function(){for(e in a)a[e]=!1;for(e in r)d[e]=!1});var m=t.key;t.key=d,t.key.setScope=function(t){i=t||"all"},t.key.getScope=h,t.key.deleteScope=function(t){var e,a,i;for(e in n)for(i=0,a=n[e];i<a.length;)a[i].scope===t?a.splice(i,1):i++},t.key.filter=function(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)},t.key.isPressed=function(t){return"string"==typeof t&&(t=s(t)),-1!=c(l,t)},t.key.getPressedKeyCodes=function(){return l.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=m,e},t.key.unbind=function(t,e){var a,i,r,o,l,c=[];for(o=0,a=f(t);o<a.length;o++){if((i=a[o].split("+")).length>1&&(c=p(i)),t=s(t=i[i.length-1]),void 0===e&&(e=h()),!n[t])return;for(r=0;r<n[t].length;r++)(l=n[t][r]).scope===e&&function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(l.mods,c)&&(n[t][r]={})}},dh=d}(dh||{}),dp.getRef=function(){return null==dp.instance&&(dp.instance=new dp),dp.instance},window.onWacomPluginLoaded=function(){dp.getRef().pluginLoaded()},dg.prototype.clone=function(){for(var t=new dg(Array(this.points.length)),e=0;e<this.points.length;e++)t.points[e]={x:this.points[e].x,y:this.points[e].y};return t},dg.prototype.getTransformed=function(t){for(var e=new dg(Array(this.points.length)),n=0;n<this.points.length;n++)e.points[n]=t.getTransformedPoint(this.points[n]);return e},dg.prototype.getCenter=function(){for(var t=this.points[0].x,e=this.points[0].y,n=1;n<this.points.length;n++)t+=this.points[n].x,e+=this.points[n].y;return{x:t/this.points.length,y:e/this.points.length}},dg.prototype.containsPoint=function(t){var e,n,a=!1;for(e=0,n=this.points.length-1;e<this.points.length;n=e++)this.points[e].y>t.y!=this.points[n].y>t.y&&t.x<(this.points[n].x-this.points[e].x)*(t.y-this.points[e].y)/(this.points[n].y-this.points[e].y)+this.points[e].x&&(a=!a);return a},dy.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},dy.prototype.normalize=function(){var t=this.getLength();return this.x/=t,this.y/=t,this},dy.prototype.getDotProduct=function(t){return this.x*t.x+this.y*t.y},dy.prototype.scale=function(t){return this.x*=t,this.y*=t,this},dy.prototype.getScaled=function(t){var e=new dy(this.x,this.y);return e.scale(t),e},dy.prototype.getRounded=function(){return new dy(Math.round(this.x),Math.round(this.y))},dy.prototype.getTruncated=function(){return new dy(~~this.x,~~this.y)},dy.prototype.getPerpendicular=function(){return new dy(-this.y,this.x)},dy.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},dy.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},dy.prototype.getSum=function(t){return new dy(this.x+t.x,this.y+t.y)},dy.subtractPoints=function(t,e){return new dy(t.x-e.x,t.y-e.y)},d_.prototype=Object.create(/*@__PURE__*/t(cr).prototype),d_.prototype.constructor=d_,dE.MODE_INDEX_DEFAULT=0,dE.MODE_INDEX_USER=1,dE.prototype.setMode=function(t,e){var n=this.modes[t];n!=e&&(n&&n.leave(),this.modes[t]=e,e.enter())},dE.prototype.setDefaultMode=function(t){t.transient=!1,t.capture=!1,this.setMode(dE.MODE_INDEX_DEFAULT,t)},dE.prototype.setUserMode=function(t){for(var e=this.modes.length-1;e>dE.MODE_INDEX_USER;e--)this.modes[e].leave(),this.modes.splice(e,1);t.transient=!1,t.capture=!1,this.setMode(dE.MODE_INDEX_USER,t)},dE.prototype.deliverEvent=function(t,e){for(var n=this.modes.length-1;n>=0;n--){var a=this.modes[n];if(a[t].apply(a,e)||a.capture&&"paint"!=t)return!0}return!1};for(var dk=0,dT=["mouseDown","mouseUp"];dk<dT.length;dk++)!function(t,e){var n=e[t];dE.prototype[n]=function(t,e,a){this.deliverEvent(n,[t,e,a])}}(dk,dT);for(var dx=0,dO=["mouseDrag","mouseMove"];dx<dO.length;dx++)!function(t,e){var n=e[t];dE.prototype[n]=function(t,e){this.deliverEvent(n,[t,e])}}(dx,dO);for(var dP=0,dS=["keyDown","keyUp"];dP<dS.length;dP++)!function(t,e){var n=e[t];dE.prototype[n]=function(t){this.deliverEvent(n,[t])&&t.preventDefault()}}(dP,dS);function dL(e){var n,a,i,r,o,s,l,c,u,d,h,f,p="default",v="grab",m="move",g=this,y=document.createElement("div"),b=document.createElement("div"),w=document.createElement("div"),_=document.createElement("canvas"),E=_.getContext("2d"),k=document.createElement("canvas"),T=k.getContext("2d"),x=db(E),O=e.getArtwork(),P=1,S=0,L=0,A=0,C=new cf,M=!1,R=!1,B=32,I=0,F=0,D=!1,N=[!1,!1,!1],H=!1,W=!1,Y=!1,U=O.getBounds(),j=new l$(0,0,0,0),z=!1,q=[],X=new dE,G=new d_(!1),V=new d_(!0),K=dp.getRef();function Z(){}function $(){}function Q(){this.shouldPaintBrushPreview=!1,this.oldPreviewRect=null}function J(){Q.call(this),this.smoothMouse={x:0,y:0}}function tt(){var e,n;this.mouseDown=function(a,i,r){if(!this.capture&&0==i&&!a.altKey&&!/*@__PURE__*/t(dh).isPressed("space")&&th())return this.capture=!0,e=n={x:I+.5,y:F+.5},this.eraseBrushPreview(),!0},this.mouseDrag=function(t){if(this.capture){var a=new l$(Math.min(e.x,n.x)-1-1,Math.min(e.y,n.y)-1-1,Math.max(e.x,n.x)+1+1+1,Math.max(e.y,n.y)+1+1+1);if(n={x:I+.5,y:F+.5},t.shiftKey){var i=Math.PI/4,r=Math.round(Math.atan2(n.y-e.y,n.x-e.x)/i);switch(r){case 0:case 4:n.y=e.y;break;case 2:case 6:n.x=e.x;break;default:r*=i;var o=Math.sqrt((n.y-e.y)*(n.y-e.y)+(n.x-e.x)*(n.x-e.x));n.x=e.x+o*Math.cos(r),n.y=e.y+o*Math.sin(r)}}return a.union(new l$(Math.min(e.x,n.x)-1-1,Math.min(e.y,n.y)-1-1,Math.max(e.x,n.x)+1+1+1,Math.max(e.y,n.y)+1+1+1)),tS(a),!0}this.mouseMove.call(this,t)},this.mouseUp=function(t,a,i){if(this.capture&&0==a){var r=tv(e),o=tv(n);return this.capture=!1,this.drawLine(r,o),tS(new l$(Math.min(e.x,n.x)-1-1,Math.min(e.y,n.y)-1-1,Math.max(e.x,n.x)+1+1+1,Math.max(e.y,n.y)+1+1+1)),!0}},this.paint=function(){this.capture?(E.lineWidth=1,E.beginPath(),E.moveTo(e.x,e.y),E.lineTo(n.x,n.y),E.stroke()):Q.prototype.paint.call(this)},Q.call(this)}function te(){var e,n,a,i,r=0;this.mouseDown=function(o,s,l){if(!this.capture&&0==s&&!o.altKey&&!/*@__PURE__*/t(dh).isPressed("space")&&th()){var c=tv({x:I,y:F});return r=0,e=n=a=i=c,this.capture=!0,this.eraseBrushPreview(),!0}},this.mouseDrag=function(t){if(this.capture&&0===r)return a=i=tv({x:I,y:F}),g.repaintAll(),!0;this.mouseMove.call(this,t)},this.mouseUp=function(t,o,s){if(this.capture&&0==o){switch(r){case 0:r=1;break;case 1:r=2;break;case 2:this.capture=!1;var l=e,c=n,u=a,d=i,h=new dv;h.x0=l.x,h.y0=l.y,h.x1=c.x,h.y1=c.y,h.x2=u.x,h.y2=u.y,h.x3=d.x,h.y3=d.y;var f=Array(500),p=Array(500);h.compute(f,p,500),O.beginStroke(f[0],p[0],1);for(var v=1;v<500;v++)O.continueStroke(f[v],p[v],1);O.endStroke(),g.repaintAll()}return!0}},this.mouseMove=function(t,e){if(this.capture){var i=tv({x:I,y:F});return 1==r?n=i:2==r&&(a=i),g.repaintAll(),!0}Q.prototype.mouseMove.call(this,t,e)},this.paint=function(){if(this.capture){var t=new dv,r=tg(e),o=tg(n),s=tg(a),l=tg(i);t.x0=r.x,t.y0=r.y,t.x1=o.x,t.y1=o.y,t.x2=s.x,t.y2=s.y,t.x3=l.x,t.y3=l.y;var c=Array(100),u=Array(100);t.compute(c,u,100),E.beginPath(),E.moveTo(c[0],u[0]);for(var d=1;d<100;d++)E.lineTo(c[d],u[d]);E.moveTo(~~r.x,~~r.y),E.lineTo(~~o.x,~~o.y),E.moveTo(~~s.x,~~s.y),E.lineTo(~~l.x,~~l.y),E.stroke()}else Q.prototype.paint.call(this)},Q.call(this)}function tn(){var n;this.mouseDown=function(e,a,i){return!!this.capture||(/*@__PURE__*/t(dh).isPressed("space")||(0!=a||this.transient&&!e.altKey)&&2!=a?void(this.transient&&X.pop()):(n=a,this.capture=!0,tu("crosshair"),this.mouseDrag(e),!0))},this.mouseDrag=function(t){if(this.capture){var n=tv({x:I,y:F});return O.isPointWithin(n.x,n.y)&&e.setCurColor(new cd(O.colorPicker(n.x,n.y))),!0}},this.mouseUp=function(t,e,a){if(this.capture&&e==n)return n=-1,this.capture=!1,tu(p),this.transient&&X.pop(),!0},this.enter=function(){Z.prototype.enter.call(this),n=-1}}function ta(){var e,n,a,i;this.keyDown=function(t){if(" "===t.key)return this.capture||tu(v),!0},this.keyUp=function(t){if(this.transient&&1!=i&&" "===t.key)return tu(p),X.pop(),!0},this.mouseDown=function(r,o,s){return!!this.capture||(1==o||/*@__PURE__*/t(dh).isPressed("space")&&0==o||!this.transient&&0==o?(this.capture=!0,i=o,e=r.pageX,n=r.pageY,a=g.getOffset(),tu("grabbing"),!0):void(this.transient&&X.pop()))},this.mouseDrag=function(t){if(this.capture)return g.setOffset(a.x+t.pageX-e,a.y+t.pageY-n),!0},this.mouseUp=function(e,n,a){if(this.capture&&n==i)return i=-1,this.capture=!1,this.transient&&!/*@__PURE__*/t(dh).isPressed("space")&&(tu(p),X.pop()),!0},this.enter=function(){tu(v)}}function ti(){}function tr(){var e,n=new l$(0,0,0,0),a=-1;this.mouseDown=function(i,r,o){if(!this.capture&&0==r&&!i.altKey&&!/*@__PURE__*/t(dh).isPressed("space")){var s=tm({x:I,y:F});return a=r,n.makeEmpty(),e=s,g.repaintAll(),this.capture=!0,!0}},this.mouseDrag=function(t){if(!this.capture)return!1;var a=tm({x:I,y:F}),i=t.shiftKey,r=~~Math.max(Math.abs(a.x-e.x),Math.abs(a.y-e.y));return a.x>=e.x?(n.left=e.x,n.right=(i?e.x+r:a.x)+1):(n.left=i?e.x-r:a.x,n.right=e.x+1),a.y>=e.y?(n.top=e.y,n.bottom=(i?e.y+r:a.y)+1):(n.top=i?e.y-r:a.y,n.bottom=e.y+1),g.repaintAll(),!0},this.mouseUp=function(t,e,i){if(this.capture&&e==a)return O.rectangleSelection(n),n.makeEmpty(),g.repaintAll(),this.capture=!1,a=-1,!0},this.paint=function(){n.isEmpty()||(E.lineWidth=1,tw(E,n))}}function to(){var e,n,a=!1;this.mouseDown=function(i,r,o){if(!this.capture&&0==r&&!/*@__PURE__*/t(dh).isPressed("space")&&td())return e=tv({x:I,y:F}),n=i.altKey,a=!0,this.capture=!0,!0},this.mouseDrag=dm(25,function(t){if(this.capture){var i=tv({x:I,y:F}),r={x:i.x-e.x,y:i.y-e.y},o={x:~~r.x,y:~~r.y};return(0!=o.x||0!=o.y)&&(O.move(o.x,o.y,n&&a),a=!1),e.x=i.x-(r.x-o.x),e.y=i.y-(r.y-o.y),!0}}),this.mouseUp=function(t,e,n){if(this.capture&&0==e)return this.capture=!1,this.transient&&X.pop(),!0}}function ts(){var n,a,i,r,o,s,l=-1;function c(){return i.getTransformed(C)}function u(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function d(t){return{x:Math.round(t.x),y:Math.round(t.y)}}function h(t,e){for(var n=0;n<t.points.length;n++)if((e.x-t.points[n].x)*(e.x-t.points[n].x)+(e.y-t.points[n].y)*(e.y-t.points[n].y)<=49)return 2*n;for(var a=0;a<t.points.length;a++){var i=t.points[a],r=t.points[(a+1)%t.points.length],o=new dy(r.x-i.x,r.y-i.y),s=new dy(e.x-i.x,e.y-i.y),l=o.getLength(),c=o.getScaled(1/l),u=s.getScaled(1/l),d=c.getDotProduct(u);if(d>=0&&d<=1&&(o.scale(d),(o.x-s.x)*(o.x-s.x)+(o.y-s.y)*(o.y-s.y)<=49))return 2*a+1}return t.containsPoint(e)?-3:-2}function f(){var t=c(),e=h(t,{x:I,y:F});switch(e){case 0:case 2:case 4:case 6:var n=~~(e/2),a=t.points[(n+3)%4],i=t.points[n],r=t.points[(n+1)%4];v(dy.subtractPoints(a,i).normalize().add(dy.subtractPoints(r,i).normalize()));break;case 1:case 3:case 5:case 7:var o=t.points[~~(e/2)],s=t.points[(~~(e/2)+1)%4];v(dy.subtractPoints(s,o).getPerpendicular());break;case -3:tu(m);break;default:tu(p)}}function v(t){var e,n=Math.floor(Math.atan2(-t.y,t.x)/(Math.PI/4)+.5);switch(n<0&&(n+=4),n){case 0:default:e="ew-resize";break;case 1:e="nesw-resize";break;case 2:e="ns-resize";break;case 3:e="nwse-resize"}tu(e)}this.mouseDown=function(e,n,a){if(!this.capture&&0==n&&!e.altKey&&!/*@__PURE__*/t(dh).isPressed("space"))return l=h(c(),{x:I,y:F}),o=tv(r={x:I,y:F}),this.capture=!0,f(),!0},this.mouseDrag=dm(40,function(t){if(this.capture){var e={x:I,y:F};switch(l){case -3:var c=d(tv(e)),h=dy.subtractPoints(c,o),f=h.getTruncated(),p=h.subtract(f),v=new cf;v.translate(f.x,f.y),n.preMultiply(v),o=dy.subtractPoints(c,p);break;case -2:var m,y=Math.PI/4,b=i.getCenter(),w=tg(b),_=Math.atan2(r.y-w.y,r.x-w.x),E=Math.atan2(e.y-w.y,e.x-w.x)-_,k=new cf;s+=E,m=t.shiftKey?-n.decompose().rotate+Math.round(s/y)*y:E,k.rotateAroundPoint(m,b.x,b.y),n.preMultiply(k),r=e;break;case 0:case 2:case 4:case 6:var T=~~(l/2),x=a.points[T],P=n.getInverted().getTransformedPoint(d(tv(e))),S=a.points[(T+2)%4],L=(P.x-S.x)/(x.x-S.x),A=(P.y-S.y)/(x.y-S.y);if(.001>Math.abs(L)||.001>Math.abs(A)||isNaN(L)||isNaN(A))return!0;if(t.shiftKey){var C=Math.max(L,A);L=C,A=C}n.scaleAroundPoint(L,A,S.x,S.y);break;case 1:case 5:case 3:case 7:var M,R,B=~~(l/2),D=u(a.points[B],a.points[(B+1)%4]),N=n.getInverted().getTransformedPoint(d(tv(e))),H=u(a.points[(B+2)%4],a.points[(B+3)%4]),W=dy.subtractPoints(D,H),Y=dy.subtractPoints(N,H),U=W.getLength(),j=W.getDotProduct(Y)/U/U;if(.001>Math.abs(j)||isNaN(j))return!0;1==l||5==l?(M=1,R=j):(M=j,R=1),n.scaleAroundPoint(M,R,H.x,H.y)}return i=a.getTransformed(n),O.transformAffineAmend(n),g.repaintAll(),!0}}),this.mouseUp=function(t,e,n){if(this.capture&&0==e)return this.capture=!1,l=-1,!0},this.mouseMove=function(){this.capture||f()},this.paint=function(){for(var t=c().points,e=Array(2*t.length),n=0;n<t.length;n++)e[n]=t[n];for(var a=0;a<t.length;a++){var i=t[a],r=t[(a+1)%t.length],o={x:(i.x+r.x)/2,y:(i.y+r.y)/2};e[a+t.length]=o}dw(E,"fill");for(var s=0;s<e.length;s++)E.fillRect(e[s].x-3,e[s].y-3,7,7);tb(E,t)},this.keyDown=function(t){return"Enter"===t.key?(e.actionPerformed({action:"CPTransformAccept"}),!0):"Escape"===t.key?(e.actionPerformed({action:"CPTransformReject"}),!0):void 0},this.enter=function(){Z.prototype.enter.call(this);var t,e=O.transformAffineBegin();n=e.transform,e.rect,(t=e.selection).isEmpty()&&(t=e.rect.clone()),i=(a=new dg(t.toPoints())).getTransformed(n),l=-1,s=0,g.repaintAll()},this.leave=function(){Z.prototype.leave.call(this),g.repaintAll()}}function tl(){var e,n,a=0,i=!1,r=-1;this.mouseDown=function(o,s,l){return!!this.capture||(!this.transient&&0==s&&!o.altKey&&!/*@__PURE__*/t(dh).isPressed("space")||0==s&&!o.altKey&&!/*@__PURE__*/t(dh).isPressed("space")&&/*@__PURE__*/t(dh).isPressed("r")?(e={x:I,y:F},a=g.getRotation(),n=C.clone(),i=!1,this.capture=!0,r=s,!0):void(this.transient&&X.pop()))},this.mouseDrag=function(r){if(this.capture){var o={x:I,y:F},s={x:/*@__PURE__*/t(lA)(_).width()/2,y:/*@__PURE__*/t(lA)(_).height()/2},l={x:_.width/2,y:_.height/2},c=Math.atan2(o.y-s.y,o.x-s.x)-Math.atan2(e.y-s.y,e.x-s.x),u=new cf;return u.rotateAroundPoint(c,l.x,l.y),u.multiply(n),g.setRotation(a+c),g.setOffset(~~u.getTranslateX(),~~u.getTranslateY()),i=!0,!0}},this.mouseUp=function(e,o,s){if(this.capture&&o==r)return i?function(){var t=Math.round(A/(Math.PI/2))*Math.PI/2;if(Math.abs(A-t)<5/180*Math.PI){var e=t-a,i={x:_.width/2,y:_.height/2},r=new cf;r.rotateAroundPoint(e,i.x,i.y),r.multiply(n),g.setRotation(a+e),g.setOffset(~~r.getTranslateX(),~~r.getTranslateY()),g.repaintAll()}g.emitEvent("canvasRotated90",[g.getRotation90()])}():g.resetRotation(),this.capture=!1,this.transient&&!/*@__PURE__*/t(dh).isPressed("r")&&X.pop(),!0},this.keyUp=function(t){if(this.transient&&1!=r&&" "===t.key)return tu(p),X.pop(),!0},this.keyDown=function(t){if("r"===t.key.toLowerCase())return!0}}function tc(){tt.call(this)}function tu(t){_.getAttribute("data-cursor")!=t&&_.setAttribute("data-cursor",t)}function td(){var t=O.getActiveLayer();return t.visible&&t.ancestorsAreVisible()?0!=t.alpha||(e.showLayerNotification(t,dc("Whoops! This layer's opacity is currently 0%"),"opacity"),!1):(e.showLayerNotification(t,dc("Whoops! This layer is currently hidden"),"layer"),!1)}function th(){var t=O.getActiveLayer();return t instanceof l3&&!O.isEditingMask()?(e.showLayerNotification(t,dc("Whoops! You can't draw on a group"),"layer"),!1):td()}function tf(t,e,n,a,i){t.setValues(-i,a,e-a-i+n/4,e+n-i-n/4),t.setBlockIncrement(Math.max(1,~~(.66*a))),t.setUnitIncrement(Math.max(1,~~(.05*a)))}function tp(){C.setToIdentity(),C.translate(S,L),C.scale(P,P),C.rotate(A),function(){if(!(null==G||null==V||G.getValueIsAdjusting()||V.getValueIsAdjusting())){var e=t_(new l$(0,0,k.width,k.height));tf(G,e.left,e.getWidth(),/*@__PURE__*/t(lA)(_).width(),g.getOffset().x),tf(V,e.top,e.getHeight(),/*@__PURE__*/t(lA)(_).height(),g.getOffset().y)}}(),g.repaintAll()}function tv(t){return C.getInverted().getTransformedPoint(t)}function tm(t){var e=tv(t);return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e}function tg(t){return C.getTransformedPoint(t)}function ty(t){var e=tg(t);return e.x=Math.round(e.x),e.y=Math.round(e.y),e}function tb(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.lineTo(e[0].x,e[0].y),t.stroke()}function tw(t,e){tb(t,function(t){for(var e=tg({x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}),n=t.toPoints(),a=0;a<n.length;a++)n[a]=ty(n[a]),n[a].x+=.5*Math.sign(e.x-n[a].x),n[a].y+=.5*Math.sign(e.y-n[a].y);return n}(e))}function t_(t){var e=ty({x:t.left-1,y:t.top-1}),n=ty({x:t.left-1,y:t.bottom}),a=ty({x:t.right,y:t.top-1}),i=ty({x:t.right,y:t.bottom}),r=new l$(Math.min(Math.min(e.x,n.x),Math.min(a.x,i.x)),Math.min(Math.min(e.y,n.y),Math.min(a.y,i.y)),Math.max(Math.max(e.x,n.x),Math.max(a.x,i.x))+1,Math.max(Math.max(e.y,n.y),Math.max(a.y,i.y))+1);return r.grow(2,2),r}function tE(){var t=_.width,e=_.height,n=tg({x:O.width/2,y:O.height/2});g.setOffset(Math.round(S+t/2-n.x),Math.round(L+e/2-n.y))}function tk(t,e,n){if(t=Math.max(.1,Math.min(16,t)),g.getZoom()!=t){var a=g.getOffset();g.setOffset(a.x+~~((e-a.x)*(1-t/g.getZoom())),a.y+~~((n-a.y)*(1-t/g.getZoom()))),g.setZoom(t),g.repaintAll()}}function tT(e){var n=/*@__PURE__*/t(lA)(_).width(),a=/*@__PURE__*/t(lA)(_).height(),i=parseFloat(e);.01>Math.abs(i-1)?e=1:.2>Math.abs(i-2)?e=2:.08>Math.abs(i-.5)&&(e=.5),tk(e,n/2,a/2)}function tx(t){return H?K.getPressure():"mouse"===t.pointerType&&0!==t.buttons&&0===t.pressure?1:"touch"===t.pointerType?(0!==t.pressure&&(Y=!0),Y)?2*t.pressure:1:2*t.pressure}Math.sign=Math.sign||function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},Z.prototype.transient=!1,Z.prototype.capture=!1,Z.prototype.enter=function(){tu(p)},Z.prototype.leave=function(){this.capture=!1},Z.prototype.mouseMove=Z.prototype.paint=Z.prototype.mouseDown=Z.prototype.mouseDrag=Z.prototype.mouseUp=Z.prototype.keyDown=Z.prototype.suspend=Z.prototype.resume=Z.prototype.keyUp=function(){},$.prototype=Object.create(Z.prototype),$.prototype.constructor=$,$.prototype.mouseDown=function(e,n,a){var i=/*@__PURE__*/t(dh).isPressed("space");!i&&(2==n||0==n&&e.altKey)?(X.push(r,!0),X.peek().mouseDown(e,n,a)):!i&&0==n&&!e.altKey&&/*@__PURE__*/t(dh).isPressed("r")?(X.push(s,!0),X.peek().mouseDown(e,n,a)):(1==n||!e.altKey&&i&&0==n)&&(X.push(o,!0),X.peek().mouseDown(e,n,a))},$.prototype.keyDown=function(t){if("r"===t.key.toLowerCase()&&" "!==t.key)X.push(s,!0),X.peek().keyDown(t);else if("r"!==t.key.toLowerCase()&&" "===t.key&&!t.altKey)return X.push(o,!0),X.peek().keyDown(t),!0},Q.prototype=Object.create(Z.prototype),Q.prototype.constructor=Q,Q.prototype.getBrushPreviewOval=function(){var t=e.getBrushSize()*P;return new l$(I-t/2,F-t/2,I+t/2,F+t/2)},Q.prototype.queueBrushPreview=function(){if(X.peek()==this){this.shouldPaintBrushPreview=!0;var t=this.getBrushPreviewOval();t.grow(2,2),null!=this.oldPreviewRect&&(t.union(this.oldPreviewRect),this.oldPreviewRect=null),tS(t)}},Q.prototype.eraseBrushPreview=function(){this.shouldPaintBrushPreview=!1,null!=this.oldPreviewRect&&(tS(this.oldPreviewRect),this.oldPreviewRect=null)},Q.prototype.mouseMove=function(t,e){this.queueBrushPreview()},Q.prototype.enter=function(){Z.prototype.enter.call(this),D&&this.queueBrushPreview()},Q.prototype.leave=function(){Z.prototype.leave.call(this),this.eraseBrushPreview()},Q.prototype.suspend=Q.prototype.leave,Q.prototype.resume=Q.prototype.enter,Q.prototype.paint=function(){if(this.shouldPaintBrushPreview){this.shouldPaintBrushPreview=!1;var t=this.getBrushPreviewOval();E.beginPath(),E.arc((t.left+t.right)/2,(t.top+t.bottom)/2,t.getWidth()/2,0,2*Math.PI),E.stroke(),t.grow(2,2),null==this.oldPreviewRect?this.oldPreviewRect=t:this.oldPreviewRect.union(t)}},J.prototype=Object.create(Q.prototype),J.prototype.constructor=J,J.prototype.mouseDown=function(e,n,a){if(!this.capture&&0==n&&!e.altKey&&!/*@__PURE__*/t(dh).isPressed("space")&&th()){var i=tv({x:I,y:F});if(this.eraseBrushPreview(),O.beginStroke(i.x,i.y,a))return this.capture=!0,this.smoothMouse=i,!0}},J.prototype.mouseDrag=function(t,n){if(("number"!=typeof navigator.maxTouchPoints||navigator.maxTouchPoints<3)&&Q.prototype.mouseMove.call(this,t,n),this.capture){var a=tv({x:I,y:F}),i=Math.min(.999,Math.pow(e.getBrushInfo().smoothing,.3));return this.smoothMouse.x=(1-i)*a.x+i*this.smoothMouse.x,this.smoothMouse.y=(1-i)*a.y+i*this.smoothMouse.y,O.continueStroke(this.smoothMouse.x,this.smoothMouse.y,n),!0}this.mouseMove(t)},J.prototype.mouseUp=function(t,e,n){if(this.capture)return 0==e&&(this.capture=!1,O.endStroke()),!0},tt.prototype=Object.create(Q.prototype),tt.prototype.constructor=tt,tt.prototype.drawLine=function(t,e){O.beginStroke(t.x,t.y,1),O.continueStroke(e.x,e.y,1),O.endStroke()},te.prototype=Object.create(Q.prototype),te.prototype.constructor=te,tn.prototype=Object.create(Z.prototype),tn.prototype.constructor=tn,ta.prototype=Object.create(Z.prototype),ta.prototype.constructor=ta,ti.prototype=Object.create(Z.prototype),ti.prototype.constructor=ti,ti.prototype.mouseDown=function(e,n,a){if(0==n&&!e.altKey&&!/*@__PURE__*/t(dh).isPressed("space")&&th()){var i=tv({x:I,y:F});return O.isPointWithin(i.x,i.y)&&(O.floodFill(i.x,i.y),g.repaintAll()),!0}},tr.prototype=Object.create(Z.prototype),tr.prototype.constructor=tr,to.prototype=Object.create(Z.prototype),to.prototype.constructor=to,to.prototype.mouseMove=function(e){if(!/*@__PURE__*/t(dh).isPressed("r"))return tu(m),!0},to.prototype.enter=function(){tu(m)},ts.prototype=Object.create(Z.prototype),ts.prototype.constructor=ts,tl.prototype=Object.create(Z.prototype),tl.prototype.constructor=tl,tc.prototype=Object.create(tt.prototype),tc.prototype.constructor=tc,tc.prototype.drawLine=function(t,n){O.gradientFill(Math.round(t.x),Math.round(t.y),Math.round(n.x),Math.round(n.y),e.getCurGradient())},tc.prototype.queueBrushPreview=function(){},this.setZoom=function(t){P=t,tp()},this.getZoom=function(){return P},this.setGridSize=function(t){B=Math.max(Math.round(t),1),this.repaintAll()},this.getGridSize=function(){return B},this.setOffset=function(t,e){isNaN(t)||isNaN(e)?console.log("Bad offset"):(S=t,L=e,tp())},this.getOffset=function(){return{x:S,y:L}},this.setInterpolation=function(t){M=t,cm(E,t),this.repaintAll()},this.setRotation=function(t){A=t%(2*Math.PI),tp()},this.getRotation=function(){return A},this.getRotation90=function(){var t=Math.round(this.getRotation()/Math.PI*2);return(t%=4)<0&&(t+=4),t},this.zoomIn=function(){tT(1.41*this.getZoom())},this.zoomOut=function(){tT(.7092*this.getZoom())},this.zoom100=function(){tT(1),tE()},this.resetRotation=function(){var t={x:_.width/2,y:_.height/2},e=new cf;e.rotateAroundPoint(-this.getRotation(),t.x,t.y),e.multiply(C),this.setOffset(~~e.getTranslateX(),~~e.getTranslateY()),this.setRotation(0),g.emitEvent("canvasRotated90",[0])};var tO=!1;function tP(){z||(z=!0,window.requestAnimationFrame(function(){g.paint()}))}function tS(t){j.union(t),tP()}function tL(){U=O.getBounds(),g.repaintAll()}this.getElement=function(){return y},this.repaintAll=function(){j.left=0,j.top=0,j.right=_.width,j.bottom=_.height,tP()},this.paint=function(){var t,e=!1;if(z=!1,j.isEmpty()||(E.save(),E.clipTo&&(E.beginPath(),j.left=0|j.left,j.top=0|j.top,E.rect(j.left,j.top,Math.ceil(j.getWidth()),Math.ceil(j.getHeight())),E.clip()),e=!0),U.isEmpty()||(t=a&&a.isOpen()?a.getImageData():O.fusionLayers().getImageData(),T.putImageData(t,0,0,U.left,U.top,U.getWidth(),U.getHeight()),U.makeEmpty()),E.fillStyle="#606060",E.fillRect(0,0,_.width,_.height),E.save(),E.setTransform(C.m[0],C.m[1],C.m[2],C.m[3],C.m[4],C.m[5]),E.fillStyle=x,E.fillRect(0,0,O.width,O.height),E.drawImage(k,0,0,k.width,k.height),E.restore(),dw(E,"stroke"),E.lineWidth=1,O.getSelection().isEmpty()||X.peek() instanceof tr&&X.peek().capture||(E.setLineDash([3,2]),tw(E,O.getSelection()),E.setLineDash([])),R){var n=O.getBounds();if(P*B>2){E.beginPath();for(var i=B-1;i<n.right;i+=B){var r=tg({x:i,y:n.top}),o=tg({x:i,y:n.bottom});E.moveTo(r.x+.5,r.y+.5),E.lineTo(o.x+.5,o.y+.5)}for(var s=B-1;s<n.bottom;s+=B){var l=tg({x:0,y:s}),c=tg({x:n.right,y:s});E.moveTo(l.x+.5,l.y+.5),E.lineTo(c.x+.5,c.y+.5)}E.stroke()}}X.paint(E),E.globalCompositeOperation="source-over",e&&(j.makeEmpty(),E.restore())},this.showGrid=function(t){R=t,this.repaintAll()},this.resize=function(e,a){e-=/*@__PURE__*/t(lA)(w).outerHeight(),/*@__PURE__*/t(lA)(_).css("height",e+"px"),_.width=/*@__PURE__*/t(lA)(_).width(),_.height=e,n=null,a||tE(),this.setInterpolation(M),this.repaintAll()},e.on("toolChange",function(t,e){for(var n=q[e.strokeMode],a=0;a<X.modes.length;a++)if(X.modes[a]instanceof Q){X.modes[a].leave(),X.modes[a]=n,X.modes[a].enter();break}f=n}),e.on("modeChange",function(t){var e;switch(t){case hd.M_DRAW:e=f;break;case hd.M_FLOODFILL:e=l;break;case hd.M_GRADIENTFILL:e=c;break;case hd.M_RECT_SELECTION:e=u;break;case hd.M_MOVE_TOOL:e=d;break;case hd.M_ROTATE_CANVAS:e=s;break;case hd.M_PAN_CANVAS:e=o;break;case hd.M_COLOR_PICKER:e=r;break;case hd.M_TRANSFORM:e=h}X.setUserMode(e)}),e.on("maskViewOpened",function(t){a&&a.off("changeLayer",tL),(a=t).on("changeLayer",tL),tL()}),i=new $,r=new tn,o=new ta,s=new tl,l=new ti,c=new tc,u=new tr,d=new to,h=new ts,f=(q=[new J,new tt,new te])[lZ.STROKE_MODE_FREEHAND],X.setDefaultMode(i),X.setUserMode(f),k.width=O.width,k.height=O.height,_.width=800,_.height=900,_.className="chickenpaint-canvas",_.setAttribute("touch-action","none"),E.setLineDash||(E.setLineDash=function(){}),_.addEventListener("contextmenu",function(t){t.preventDefault()}),_.addEventListener("mouseenter",function(){D=!0}),_.addEventListener("mouseleave",function(){D=!1,N[0]||N[2]||N[1]||g.repaintAll()}),_.addEventListener("pointerdown",function(t){W&&"touch"===t.pointerType||(_.setPointerCapture(t.pointerId),n=_.getBoundingClientRect(),I=t.clientX-n.left,F=t.clientY-n.top,H=K.isPen(),N[0]=!1,N[2]=!1,N[1]=!1,N[t.button]=!0,X.mouseDown(t,t.button,tx(t)))}),_.addEventListener("pointermove",function(t){if(n||(n=_.getBoundingClientRect()),!W||"touch"!==t.pointerType){I=t.clientX-n.left,F=t.clientY-n.top;var e=0!==t.buttons,a=e?tx(t):0;if((1&t.buttons)!=0!=N[0]){if(.5===t.mozPressure)return;N[0]=!N[0],N[0]?X.mouseDown(t,0,a):X.mouseUp(t,0,a)}(2&t.buttons)!=0!=N[2]&&(N[2]=!N[2],N[2]?X.mouseDown(t,2,a):X.mouseUp(t,2,a)),(4&t.buttons)!=0!=N[1]&&(N[1]=!N[1],N[1]?X.mouseDown(t,1,a):X.mouseUp(t,1,a)),e?X.mouseDrag(t,a):X.mouseMove(t,a),W||"pen"!==t.pointerType||(W=!0)}}),_.addEventListener("pointerup",function(t){N[0]=!1,N[2]=!1,N[1]=!1,H=!1,X.mouseUp(t,t.button,0),_.releasePointerCapture(t.pointerId)}),_.addEventListener("wheel",function(t){if(0!=t.deltaY){if(!tO||Math.abs(t.deltaY)>20){a=t.deltaY>0?1/1.15:1.15;var e,n,a,i=(e={x:t.pageX,y:t.pageY},n=_.getBoundingClientRect(),{x:e.x-n.left-window.pageXOffset,y:e.y-n.top-window.pageYOffset}),r=tv(i);O.isPointWithin(r.x,r.y)?tk(g.getZoom()*a,i.x,i.y):tk(g.getZoom()*a,S+~~(O.width*P/2),L+~~(O.height*P/2)),tO=tO||setTimeout(function(){tO=!1},50)}t.preventDefault()}},{passive:!1}),document.addEventListener("keydown",function(t){X.keyDown(t)}),document.addEventListener("keyup",function(t){"alt"===t.key.toLowerCase()&&t.preventDefault(),X.keyUp(t)}),document.addEventListener("visibilitychange",function(){var e=_.height+/*@__PURE__*/t(lA)(w).outerHeight();_.width=1,_.height=1,g.resize(e,!0)},!1),window.addEventListener("scroll",function(){n=null}),_.addEventListener("mousedown",function(t){1==t.button&&t.preventDefault()}),O.on("changeSelection",function(){g.repaintAll()}),O.on("updateRegion",function(t){U.union(t),tS(t_(U))}),G.on("valueChanged",function(t){var e=g.getOffset();g.setOffset(-t,e.y)}),V.on("valueChanged",function(t){var e=g.getOffset();g.setOffset(e.x,-t)}),this.setInterpolation(!0);var tA=document.createElement("div");tA.className="chickenpaint-canvas-container-wrapper",tA.appendChild(_),b.className="chickenpaint-canvas-container-top",b.appendChild(tA),b.appendChild(V.getElement()),w.className="chickenpaint-canvas-container-bottom",w.appendChild(G.getElement()),y.appendChild(b),y.appendChild(w),e.setCanvas(this)}function dA(e,n,a,i){e.getSmallScreenMode()&&dc(a+" (shorter)")!==a+" (shorter)"?this.title=dc(a+" (shorter)"):this.title=dc(a),i=i||{},this.name=n,this.resizeVert=i.resizeVert||!1,this.resizeHorz=i.resizeHorz||!1;var r,o,s,l=document.createElement("div"),c=document.createElement("div"),u=document.createElement("i"),d=document.createElement("button"),h=document.createElement("div"),f=null,p=null,v=this;this.getElement=function(){return l},this.getBodyElement=function(){return h},this.getWidth=function(){return /*@__PURE__*/t(lA)(l).outerWidth()},this.getHeight=function(){return /*@__PURE__*/t(lA)(l).outerHeight()},this.getX=function(){return parseInt(l.style.left,10)||0},this.getY=function(){return parseInt(l.style.top,10)||0},this.setLocation=function(t,e){l.style.left=t+"px",l.style.top=e+"px"},this.setWidth=function(t){l.style.width=t+"px"},this.setHeight=function(t){l.style.height=t+"px"},this.setSize=function(t,e){this.setWidth(t),this.setHeight(e)},this.setCollapseDownwards=function(t){i.collapseDownwards=t},this.toggleCollapse=function(e){var n=/*@__PURE__*/t(lA)(l);if(void 0===e)e=!n.hasClass("collapsed");else if(n.hasClass("collapsed")==e)return;var a=n.parents(".chickenpaint").find(".chickenpaint-canvas").height(),r=this.getHeight(),o=this.getY()+r;if(n.toggleClass("collapsed",e),/*@__PURE__*/t(lA)(u).toggleClass("icon-angle-down",!e).toggleClass("icon-angle-up",e),e)i.collapseDownwards&&this.setLocation(this.getX(),Math.min(o,a)-this.getHeight());else{var s=this.getHeight();i.collapseDownwards?this.setLocation(this.getX(),Math.max(o-s,0)):this.getY()+s>a&&this.setLocation(this.getX(),Math.max(a-s,0))}},this.userIsDoneWithUs=function(){e.getSmallScreenMode()&&this.toggleCollapse(!0)},u.className="collapse-icon fas icon-angle-down",d.type="button",d.className="btn btn-close",d.textContent="",d.tabIndex=-1,l.className="chickenpaint-palette chickenpaint-palette-"+n,c.className="chickenpaint-palette-head",c.setAttribute("touch-action","none");var m=document.createElement("div"),g=document.createElement("h5");m.className="modal-header",g.className="modal-title",g.appendChild(document.createTextNode(this.title)),g.appendChild(u),m.appendChild(g),m.appendChild(d),c.appendChild(m),h.className="chickenpaint-palette-body",l.appendChild(c),l.appendChild(h),this.resizeVert&&((f=document.createElement("div")).className="chickenpaint-resize-handle-vert",f.addEventListener("pointerdown",function(t){o="vertResize",f.setPointerCapture(t.pointerId)}),f.addEventListener("pointermove",function(e){"vertResize"==o&&v.setHeight(e.pageY-/*@__PURE__*/t(lA)(l).offset().top)}),f.addEventListener("pointerup",function(t){f.releasePointerCapture(t.pointerId),o=!1}),l.appendChild(f)),this.resizeHorz&&((p=document.createElement("div")).className="chickenpaint-resize-handle-horz",p.addEventListener("pointerdown",function(t){o="horzResize",p.setPointerCapture(t.pointerId)}),p.addEventListener("pointermove",function(e){"horzResize"==o&&v.setWidth(e.pageX-/*@__PURE__*/t(lA)(l).offset().left)}),p.addEventListener("pointerup",function(t){p.releasePointerCapture(t.pointerId),o=!1}),l.appendChild(p)),c.addEventListener("pointerdown",function(n){0==n.button&&(n.stopPropagation(),n.preventDefault(),"BUTTON"==n.target.nodeName?v.emitEvent("paletteVisChange",[v,!1]):(r={x:parseInt(l.style.left,10)||0,y:parseInt(l.style.top,10)||0},s={x:n.pageX-/*@__PURE__*/t(lA)(l).position().left,y:n.pageY-/*@__PURE__*/t(lA)(l).position().top},o=e.getSmallScreenMode()?"dragStart":"dragging",n.target.setPointerCapture(n.pointerId)))}),c.addEventListener("pointermove",function(t){if(("dragStart"===o||"dragging"===o)&&0!==t.buttons){var e,n,a=t.pageX-s.x,i=t.pageY-s.y;"dragStart"==o&&(e={x:a,y:i},n=r,(e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)>25&&(o="dragging")),"dragging"==o&&v.setLocation(a,i)}}),c.addEventListener("pointerup",function(t){if("dragging"===o||"dragStart"===o){"dragStart"===o&&(t.stopPropagation(),t.preventDefault(),setTimeout(function(){v.setLocation(r.x,r.y),v.toggleCollapse()},100)),o=!1;try{t.target.releasePointerCapture(t.pointerId)}catch(t){console.error(t)}}})}function dC(e){dA.call(this,e,"tool","Tools");var n=this,a=[{className:"chickenpaint-tool-rect-selection",command:"CPRectSelection",toolTip:"Marquee",shortcut:"m",mode:hd.M_RECT_SELECTION},{className:"chickenpaint-tool-move",command:"CPMoveTool",toolTip:"Move tool",shortcut:"v",mode:hd.M_MOVE_TOOL},{className:"chickenpaint-tool-flood-fill",command:"CPFloodFill",toolTip:"Flood fill",shortcut:"f",mode:hd.M_FLOODFILL},{className:"chickenpaint-tool-gradient-fill",command:"CPGradientFill",toolTip:"Gradient fill",shortcut:"g",mode:hd.M_GRADIENTFILL},{className:"chickenpaint-tool-color-picker",command:"CPColorPicker",toolTip:"Color picker",shortcut:"i",mode:hd.M_COLOR_PICKER},{className:"chickenpaint-tool-blur",command:"CPBlur",toolTip:"Blur",shortcut:"u",mode:hd.M_DRAW,tool:hd.T_BLUR},{className:"chickenpaint-tool-pencil",command:"CPPencil",toolTip:"Pencil",shortcut:"n",mode:hd.M_DRAW,tool:hd.T_PENCIL},{className:"chickenpaint-tool-pen",command:"CPPen",toolTip:"Pen",selected:!0,shortcut:"b",mode:hd.M_DRAW,tool:hd.T_PEN},{className:"chickenpaint-tool-airbrush",command:"CPAirbrush",toolTip:"Airbrush",shortcut:"a",mode:hd.M_DRAW,tool:hd.T_AIRBRUSH},{className:"chickenpaint-tool-water",command:"CPWater",toolTip:"Waterpaint",shortcut:"w",mode:hd.M_DRAW,tool:hd.T_WATER},{className:"chickenpaint-tool-eraser",command:"CPEraser",toolTip:"Eraser",shortcut:"e",mode:hd.M_DRAW,tool:hd.T_ERASER},{className:"chickenpaint-tool-soft-eraser",command:"CPSoftEraser",toolTip:"Soft eraser",shortcut:"s",mode:hd.M_DRAW,tool:hd.T_SOFTERASER},{className:"chickenpaint-tool-smudge",command:"CPSmudge",toolTip:"Smudge",shortcut:"d",mode:hd.M_DRAW,tool:hd.T_SMUDGE},{className:"chickenpaint-tool-blender",command:"CPBlender",toolTip:"Blender",shortcut:"c",mode:hd.M_DRAW,tool:hd.T_BLENDER},{className:"chickenpaint-tool-dodge",command:"CPDodge",toolTip:"Dodge (tool)",shortcut:"o",mode:hd.M_DRAW,tool:hd.T_DODGE},{className:"chickenpaint-tool-burn",command:"CPBurn",toolTip:"Burn (tool)",shortcut:"p",mode:hd.M_DRAW,tool:hd.T_BURN},{className:"chickenpaint-tool-rotate-canvas",command:"CPRotateCanvas",commandDoubleClick:"CPResetCanvasRotation",toolTip:"Rotate canvas",mode:hd.M_ROTATE_CANVAS},{className:"chickenpaint-tool-pan-canvas",command:"CPPanCanvas",toolTip:"Grab canvas",mode:hd.M_PAN_CANVAS}],i=document.createElement("ul");function r(t){if("LI"==this.nodeName){var n=a[parseInt(this.getAttribute("data-buttonIndex"),10)];e.actionPerformed({action:n.command})}}e.on("modeChange",function(a){var i=n.getBodyElement();/*@__PURE__*/t(lA)("li",i).removeClass("selected"),a==hd.M_DRAW?/*@__PURE__*/t(lA)("li[data-tool="+e.getCurTool()+"]",i).addClass("selected"):/*@__PURE__*/t(lA)("li[data-mode="+a+"]",i).addClass("selected")}),e.on("toolChange",function(a){var i=n.getBodyElement();e.getCurMode()==hd.M_DRAW&&(/*@__PURE__*/t(lA)("li",i).removeClass("selected"),/*@__PURE__*/t(lA)("li[data-tool="+a+"]",i).addClass("selected"))}),function(){var o=n.getBodyElement();for(var s in i.className="chickenpaint-tools list-unstyled",a)!function(e){var n=a[e],o=document.createElement("li"),s=document.createElement("div");o.className="chickenpaint-toolbar-button "+n.className,o.setAttribute("data-buttonIndex",e),o.setAttribute("data-mode",n.mode),void 0!==n.tool&&o.setAttribute("data-tool",n.tool),o.title=dc(n.toolTip),n.shortcut&&(o.title+=" ("+n.shortcut.toUpperCase()+")",/*@__PURE__*/t(dh)(n.shortcut,function(){return r.call(o),!1})),n.selected&&(o.className=o.className+" selected"),s.className="chickenpaint-toolbar-button-icon",o.appendChild(s),i.appendChild(o)}(s);/*@__PURE__*/t(lA)(i).on("click","li",r).on("dblclick","li",function(t){var n=a[parseInt(this.getAttribute("data-buttonIndex"),10)];n.commandDoubleClick&&e.actionPerformed({action:n.commandDoubleClick})}),o.appendChild(i)}()}function dM(e){dA.call(this,e,"misc","Misc");var n=this,a=[{className:"chickenpaint-tool-zoom-in",command:"CPZoomIn",toolTip:"Zoom in"},{className:"chickenpaint-tool-zoom-out",command:"CPZoomOut",toolTip:"Zoom out"},{className:"chickenpaint-tool-zoom-100",command:"CPZoom100",toolTip:"Zoom 100%"},{className:"chickenpaint-tool-flip-horizontal",command:"CPHFlip",toolTip:"Flip horizontal"},{className:"chickenpaint-tool-undo",command:"CPUndo",toolTip:"Undo"},{className:"chickenpaint-tool-redo",command:"CPRedo",toolTip:"Redo"},{className:"chickenpaint-tool-send",command:"CPSend",toolTip:"Save Oekaki"}];!function(){var i=n.getBodyElement(),r=document.createElement("ul");for(var o in r.className="chickenpaint-misc-tools list-unstyled",a){var s=a[o],l=document.createElement("li"),c=document.createElement("div");"CPSend"!=s.command||e.isActionSupported("CPContinue")||(s.toolTip="Post Oekaki",s.className="chickenpaint-tool-send-and-end"),l.className="chickenpaint-toolbar-button "+s.className,l.setAttribute("data-buttonIndex",o),l.setAttribute("title",dc(s.toolTip)),c.className="chickenpaint-toolbar-button-icon",l.appendChild(c),r.appendChild(l)}/*@__PURE__*/t(lA)(r).on("mousedown","li",function(e){/*@__PURE__*/t(lA)(this).addClass("selected")}).on("mouseup","li",function(e){/*@__PURE__*/t(lA)(this).removeClass("selected")}).on("click","li",function(t){var n=a[parseInt(this.getAttribute("data-buttonIndex"),10)];e.actionPerformed({action:n.command})}),i.appendChild(r)}()}function dR(e){dA.call(this,e,"stroke","Stroke");var n=[{className:"chickenpaint-tool-freehand",command:"CPFreeHand",toolTip:dc("Free-hand"),selected:!0},{className:"chickenpaint-tool-line",command:"CPLine",toolTip:dc("Straight line")},{className:"chickenpaint-tool-bezier",command:"CPBezier",toolTip:dc("Bezier curve")}],a=this.getBodyElement();!function(){var i=document.createElement("ul");for(var r in i.className="chickenpaint-stroke-tools list-unstyled",n){var o=n[r],s=document.createElement("li"),l=document.createElement("div");s.className="chickenpaint-toolbar-button "+o.className,s.setAttribute("data-buttonIndex",r),s.setAttribute("title",o.toolTip),o.selected&&(s.className=s.className+" selected"),l.className="chickenpaint-toolbar-button-icon",s.appendChild(l),i.appendChild(s)}/*@__PURE__*/t(lA)(i).on("click","li",function(a){var r=n[parseInt(this.getAttribute("data-buttonIndex"),10)];/*@__PURE__*/t(lA)("li",i).removeClass("selected"),/*@__PURE__*/t(lA)(this).addClass("selected"),e.actionPerformed({action:r.command})}),a.appendChild(i)}(),e.on("toolChange",function(e,n){/*@__PURE__*/t(lA)(".chickenpaint-tool-freehand",a).toggleClass("selected",n.strokeMode==lZ.STROKE_MODE_FREEHAND),/*@__PURE__*/t(lA)(".chickenpaint-tool-line",a).toggleClass("selected",n.strokeMode==lZ.STROKE_MODE_LINE),/*@__PURE__*/t(lA)(".chickenpaint-tool-bezier",a).toggleClass("selected",n.strokeMode==lZ.STROKE_MODE_BEZIER)})}dE.prototype.paint=function(t){this.deliverEvent("paint",[t])},dE.prototype.push=function(t,e){var n=this.peek();n&&n.suspend(),t.transient=e,t.capture=!1,t.enter(),this.modes.push(t)},dE.prototype.peek=function(){return this.modes.length>0?this.modes[this.modes.length-1]:null},dE.prototype.pop=function(){var t=this.modes.pop(),e=this.peek();return t&&t.leave(),e&&e.resume(),e},dL.prototype=Object.create(/*@__PURE__*/t(cr).prototype),dL.prototype.constructor=dL,dA.prototype=Object.create(/*@__PURE__*/t(cr).prototype),dA.prototype.constructor=/*@__PURE__*/t(cr),dC.prototype=Object.create(dA.prototype),dC.prototype.constructor=dC,dM.prototype=Object.create(dA.prototype),dM.prototype.constructor=dM,dR.prototype=Object.create(dA.prototype),dR.prototype.constructor=dR;var dB=window.devicePixelRatio||1,dI=Math.round(128*dB),dF=Math.round(128*dB),dD=/*#__PURE__*/function(){function e(t,n){var a=this;lR(this,e),lW(this,"_controller",void 0),lW(this,"_canvas",void 0),lW(this,"_canvasContext",void 0),lW(this,"_imageData",void 0),lW(this,"_bitmapInvalid",!0),lW(this,"_capturedMouse",!1),lW(this,"_greyscale",!1),lW(this,"color",new cd(0)),this._controller=t;var i=document.createElement("canvas");this._canvas=i,i.className="chickenpaint-colorpicker-select",i.setAttribute("touch-action","none"),i.width=dI,i.height=dF,i.style.width="128px",i.style.height="128px",this._canvasContext=i.getContext("2d"),this._imageData=this._canvasContext.createImageData(dI,dF),this._canvasContext.getImageData(0,0,1,1),this._handleEndDrag=this._endDrag.bind(this),this._handleMousePickColor=this._mousePickColor.bind(this),i.addEventListener("pointerdown",function(t){return a._startDrag(t)}),n&&this.color.copyFrom(n),t.on("colorChange",function(t){a.color.copyFrom(t),a._bitmapInvalid=!0,a.paint()}),t.on("colorModeChange",function(t){a._greyscale="greyscale"==t,a._bitmapInvalid=!0,a.paint()}),this.paint()}return lI(e,[{key:"_makeBitmap",value:function(){if(this._bitmapInvalid){var t=0,e=this._imageData.data;if(this._greyscale)for(var n=0;n<dF;n++)for(var a=255-Math.round(n/(dF-1)*255),i=0;i<dI;i++)e[t+l5.RED_BYTE_OFFSET]=a,e[t+l5.GREEN_BYTE_OFFSET]=a,e[t+l5.BLUE_BYTE_OFFSET]=a,e[t+l5.ALPHA_BYTE_OFFSET]=255,t+=l5.BYTES_PER_PIXEL;else for(var r=this.color.clone(),o=0;o<dF;o++){r.setValue(255-~~(o/(dF-1)*255));for(var s=0;s<dI;s++)r.setSaturation(Math.round(s/(dI-1)*255)),e[t+l5.RED_BYTE_OFFSET]=r.rgb>>16&255,e[t+l5.GREEN_BYTE_OFFSET]=r.rgb>>8&255,e[t+l5.BLUE_BYTE_OFFSET]=255&r.rgb,e[t+l5.ALPHA_BYTE_OFFSET]=255,t+=l5.BYTES_PER_PIXEL}this._bitmapInvalid=!1}}},{key:"paint",value:function(){this._makeBitmap(),this._canvasContext.putImageData(this._imageData,0,0);var t=this.color.getSaturation()/255*(dI-1),e=(255-this.color.getValue())/255*(dF-1);dw(this._canvasContext,"stroke"),this._canvasContext.lineWidth=1.5*dB,this._canvasContext.beginPath(),this._greyscale?(this._canvasContext.moveTo(0,e),this._canvasContext.lineTo(dI,e)):this._canvasContext.arc(t,e,5*dB,0,2*Math.PI),this._canvasContext.stroke(),this._canvasContext.globalCompositeOperation="source-over"}},{key:"_mousePickColor",value:function(e){var n=e.pageX-/*@__PURE__*/t(lA)(this._canvas).offset().left,a=Math.max(Math.min(255-~~(255*(e.pageY-/*@__PURE__*/t(lA)(this._canvas).offset().top)/127),255),0);if(this._greyscale)this.color.setGreyscale(a);else{var i=Math.max(Math.min(~~(255*n/127),255),0);this.color.setHsv(this.color.getHue(),i,a)}this.paint(),this._controller.setCurColor(this.color)}},{key:"_endDrag",value:function(t){this._canvas.releasePointerCapture(t.pointerId),this._capturedMouse=!1,this._canvas.removeEventListener("pointerup",this._handleEndDrag),this._canvas.removeEventListener("pointermove",this._handleMousePickColor)}},{key:"_startDrag",value:function(t){this._capturedMouse||(this._capturedMouse=!0,this._canvas.setPointerCapture(t.pointerId),this._canvas.addEventListener("pointerup",this._handleEndDrag),this._canvas.addEventListener("pointermove",this._handleMousePickColor)),this._handleMousePickColor(t)}},{key:"setHue",value:function(t){this.color.getHue()!=t&&(this.color.setHue(t),this._controller.setCurColor(this.color))}},{key:"getElement",value:function(){return this._canvas}}]),e}(),dN=/*#__PURE__*/function(){function e(t,n,a){var i=this;lR(this,e),lW(this,"hue",void 0),lW(this,"selecter",void 0),lW(this,"_canvas",void 0),lW(this,"_canvasContext",void 0),lW(this,"_imageData",void 0),lW(this,"_capturedMouse",!1),this.selecter=n,this.hue=a||0;var r=document.createElement("canvas");this._canvas=r,t.on("colorChange",function(t){i.setHue(t.getHue())}),t.on("colorModeChange",function(t){r.style.display="greyscale"==t?"none":"block"}),r.setAttribute("touch-action","none"),r.addEventListener("pointerdown",function(t){return i._startDrag(t)}),r.width=24,r.height=128,r.className="chickenpaint-colorpicker-slider",this._canvasContext=r.getContext("2d"),this._imageData=this._canvasContext.createImageData(24,128),this._canvasContext.getImageData(0,0,1,1),this._handleEndDrag=this._endDrag.bind(this),this._handleMousePickColor=this._mousePickColor.bind(this),function(t){for(var e=new cd(65535),n=0,a=t.data,i=0;i<t.height;i++){e.setHue(359*i/t.height);for(var r=0;r<t.width;r++)a[n+l5.RED_BYTE_OFFSET]=e.rgb>>16&255,a[n+l5.GREEN_BYTE_OFFSET]=e.rgb>>8&255,a[n+l5.BLUE_BYTE_OFFSET]=255&e.rgb,a[n+l5.ALPHA_BYTE_OFFSET]=255,n+=l5.BYTES_PER_PIXEL}}(this._imageData),this.paint()}return lI(e,[{key:"paint",value:function(){this._canvasContext.putImageData(this._imageData,0,0);var t=128*this.hue/360;dw(this._canvasContext,"stroke"),this._canvasContext.lineWidth=1.5,this._canvasContext.beginPath(),this._canvasContext.moveTo(0,t),this._canvasContext.lineTo(24,t),this._canvasContext.stroke(),this._canvasContext.globalCompositeOperation="source-over"}},{key:"_mousePickColor",value:function(e){var n=e.pageY-/*@__PURE__*/t(lA)(this._canvas).offset().top;this.hue=Math.max(0,Math.min(359,~~(360*n/128))),this.paint(),this.selecter&&this.selecter.setHue(this.hue)}},{key:"_endDrag",value:function(t){this._canvas.releasePointerCapture(t.pointerId),this._capturedMouse=!1,this._canvas.removeEventListener("pointerup",this._handleEndDrag),this._canvas.removeEventListener("pointermove",this._handleMousePickColor)}},{key:"_startDrag",value:function(t){this._capturedMouse||(this._capturedMouse=!0,this._canvas.setPointerCapture(t.pointerId),this._canvas.addEventListener("pointerup",this._handleEndDrag),this._canvas.addEventListener("pointermove",this._handleMousePickColor)),this._handleMousePickColor(t)}},{key:"getElement",value:function(){return this._canvas}},{key:"setHue",value:function(t){this.hue=t,this.paint()}}]),e}();function dH(t){dA.call(this,t,"color","Color (picker)");var e=new dD(t),n=new dN(t,e),a=new dW(t),i=this.getBodyElement(),r=document.createElement("div");r.className="chickenpaint-colorpicker-top",r.appendChild(e.getElement()),r.appendChild(n.getElement()),i.appendChild(r),i.appendChild(a.getElement())}function dW(t){var e=0,n=document.createElement("div");function a(t,e,n){for(;t.length<n;)t=e+t;return t}function i(){n.style.backgroundColor="#"+a(Number(e).toString(16),"0",6)}this.getElement=function(){return n},t.on("colorChange",function(t){e=t.getRgb(),i()}),n.className="chickenpaint-colorpicker-show",n.addEventListener("click",function(n){n.preventDefault();var i="#"+a(Number(e).toString(16),"0",6);if(null!=(i=window.prompt(dc("Please enter a color in hex format"),i)))try{(i.match(/^#/)||i.match(/^$/))&&(i=i.substring(1));var r=parseInt(i,16);t.setCurColor(new cd(r))}catch(t){}}),i()}function dY(t,e){var n=document.createElement("canvas"),a=n.getContext("2d"),i=this;function r(){var t=n.width,e=n.height;a.clearRect(0,0,t,e),a.beginPath(),a.arc(t/2+1,t/2+1,Math.max(t/2,1)-2,0,2*Math.PI),i.state?a.fill():a.stroke()}this.state=t||!1,this.setValue=function(t){this.state!=t&&(this.state=t,this.emitEvent("valueChange",[t]),r())},this.getElement=function(){return n},n.addEventListener("mousedown",function(t){i.setValue(!i.state)}),n.title=e||"",n.className="chickenpaint-checkbox",n.width=20,n.height=20,n.fillStyle="black",n.strokeStyle="black",r()}function dU(e,n,a,i){var r,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:150,s=document.createElement("canvas"),l=s.getContext("2d"),c=n-e,u=0,d=!1,h=this;function f(){var t=s.width||o,n=s.height,r="string"==typeof h.title?dc(h.title):h.title(h.value),u=3*window.devicePixelRatio,d=.75*s.height;if(a)l.save(),l.fillStyle="white",l.fillRect(0,0,t,n),l.fillStyle="black",l.fillText(r,u,d),l.beginPath(),h.value>=c/2?l.rect(t/2,0,(h.value-c/2)*t/c,n):l.rect(h.value*t/c,0,(c/2-h.value)*t/c,n),l.fill(),l.clip(),l.fillStyle="white",l.fillText(r,u,d),l.restore();else{var f,p=(h.value-e)/c;i&&(p=Math.pow(p,.6666666666666666)),f=p*t,l.save(),l.save(),l.fillStyle="black",l.beginPath(),l.rect(0,0,f,n),l.fill(),l.clip(),l.fillStyle="white",l.fillText(r,u,d),l.restore(),l.fillStyle="white",l.beginPath(),l.rect(f,0,t,n),l.fill(),l.clip(),l.fillStyle="black",l.fillText(r,u,d),l.restore()}}function p(n){var a=/*@__PURE__*/t(lA)(s).width(),r=/*@__PURE__*/t(lA)(s).offset().left,o=(n.pageX-r)/a;i&&(o=Math.pow(Math.max(o,0),1.5)),h.setValue(o*c+e)}function v(t){switch(u){case 1:return p(t);case 2:var e=h.title();if(!(e.includes(dc("Brush size"))||e.includes(dc("Opacity"))))return p(t);var n=(t.pageX-r)/4;if(0!==n){var a=h.value+n,i=Math.floor(a);h.setValue(i),r=t.pageX-(a-i)*4}}}this.value=void 0,this.title="",a=a||!1,s.addEventListener("pointerup",function(t){if(0===u)return s.releasePointerCapture(t.pointerId),s.removeEventListener("pointermove",v);if(0!==u)switch(u){case 1:0!==t.button||t.shiftKey||(u=0);break;case 2:(2==t.button||0===t.button&&t.shiftKey)&&(u=0);break;default:return}return s.releasePointerCapture(t.pointerId),s.removeEventListener("pointermove",v)}),this.setValue=function(t){t=~~Math.max(e,Math.min(n,t)),this.value!=t&&(this.value=t,this.emitEvent("valueChange",[this.value]),d?f():(d=!0,this.resize()))},this.getElement=function(){return s},this.resize=function(){s.width=/*@__PURE__*/t(lA)(s).width()||o,s.height=/*@__PURE__*/t(lA)(s).height()||20,window.devicePixelRatio>1&&(s.style.height=s.height+"px",s.width=s.width*window.devicePixelRatio,s.height=s.height*window.devicePixelRatio),l.font=.47*s.height+"pt sans-serif",f()},s.addEventListener("pointerdown",function(t){0===u&&(2===t.button||0===t.button&&t.shiftKey?(u=2,r=t.pageX):(u=1,p(t)),s.setPointerCapture(t.pointerId),s.addEventListener("pointermove",v))}),s.addEventListener("contextmenu",function(t){t.preventDefault()}),s.setAttribute("touch-action","none"),s.className="chickenpaint-slider","devicePixelRatio"in window||(window.devicePixelRatio=1)}function dj(t,e,n){var a=this,i=new cd(0),r=255,o=document.createElement("div");function s(){o.style.backgroundColor="#"+function(t,e,n){for(;t.length<6;)t="0"+t;return t}(Number(i.getRgb()).toString(16),0,0)}this.getElement=function(){return o},this.setColor=function(t){i.isEqual(t)||(i.copyFrom(t),s(),this.emitEvent("colorChange",[i]))},this.setAlpha=function(t){t!=r&&(r=t,s(),this.emitEvent("alphaChange",[r]))},this.getColorRgb=function(){return i.getRgb()},this.getAlpha=function(){return r},this.setCurColor=this.setColor,o.className="chickenpaint-color-pick-swatch",t&&i.copyFrom(t),e&&(r=e);var l=new bootstrap.Popover(o,{html:!0,content:function(){var t,e,n,o,s;return window.addEventListener("mousedown",c),t=document.createElement("div"),e=document.createElement("div"),n=new dD(a,i),o=new dN(a,n,i.getHue()),s=new dU(0,255),t.className="chickenpaint-color-pick-panel",e.className="chickenpaint-colorpicker-top",e.appendChild(n.getElement()),e.appendChild(o.getElement()),t.appendChild(e),s.value=r,s.title=function(t){return dc("Opacity: ")+t},s.on("valueChange",function(t){a.setAlpha(t)}),t.appendChild(s.getElement()),setTimeout(function(){s.resize()},0),t},trigger:"manual",placement:"bottom",container:n||!1}),c=function(t){var e=t.target,n=e.closest(".popover-body")||e.classList.contains("chickenpaint-color-pick-panel")||e.classList.contains("chickenpaint-colorpicker-select")||e.classList.contains("chickenpaint-colorpicker-slider");t.preventDefault(),n||l.hide()};o.addEventListener("click",function(t){t.preventDefault(),l.toggle()}),o.addEventListener("hidden.bs.popover",function(){window.removeEventListener("mousedown",c)}),s()}function dz(t,e){var n=document.createElement("div");return n.className="chickenpaint-checkbox-slider-group",n.appendChild(t.getElement()),n.appendChild(e.getElement()),n}function dq(t,e){for(var n in e)if(e.hasOwnProperty(n)){var a=document.createElement("option");a.appendChild(document.createTextNode(dc(e[n]))),a.value=n,t.appendChild(a)}}function dX(t){var e=document.createElement("canvas"),n=e.getContext("2d"),a=db(n),i=new l5(150,32),r=document.createElement("canvas"),o=r.getContext("2d"),s=t.getCurGradient();function l(){i.gradient(i.getBounds(),0,0,i.width,0,s,!0),o.putImageData(i.imageData,0,0,0,0,150,32),n.fillRect(0,0,e.width,e.height),n.drawImage(r,0,0)}this.getElement=function(){return e},t.on("gradientChange",function(t){s=t,l()}),e.width=r.width=150,e.height=r.height=32,e.className="chickenpaint-gradient-preview",n.fillStyle=a,l()}function dG(t){dA.call(this,t,"brush","Tool options");var e=new dV(t),n=new dK(t),a=new dZ(t),i=this.getBodyElement();i.appendChild(e.getElement()),i.appendChild(n.getElement()),i.appendChild(a.getElement()),t.on("modeChange",function(t){switch(e.getElement().style.display="none",n.getElement().style.display="none",a.getElement().style.display="none",t){case hd.M_GRADIENTFILL:n.getElement().style.display="block";break;case hd.M_TRANSFORM:a.getElement().style.display="block";break;default:e.getElement().style.display="block"}})}function dV(e){var n=[1,2,3,4,5,6,7,8,9,10,15,20,25,30,35,40,45,50,60,70,80,90,100,125,150,175,200],a=document.createElement("div"),i=document.createElement("select"),r=new dY(!1,dc("Control brush opacity with pen pressure")),o=new dU(1,255),s=new dY(!0,dc("Control brush size with pen pressure")),l=new dU(1,200,!1,!0),c=new dY(!1,dc("Control brush scattering with pen pressure")),u=new dU(0,1e3,!1,!0),d=new dU(0,100,!1,!0),h=new dU(0,100,!1,!0),f=new dU(0,100,!1,!0),p=new dU(0,100,!1,!0),v=new dG.CPBrushPreview(e);this.getElement=function(){return a},o.title=function(t){return dc("Opacity")+": "+t},o.on("valueChange",function(t){e.setAlpha(t)}),l.title=function(t){return dc("Brush size")+": "+t},l.on("valueChange",function(t){e.setBrushSize(t)}),d.title=function(t){return dc("Color")+": "+t+"%"},d.on("valueChange",function(t){e.getBrushInfo().resat=t/100,e.callToolListeners()}),h.title=function(t){return dc("Blend")+": "+t+"%"},h.on("valueChange",function(t){e.getBrushInfo().bleed=t/100,e.callToolListeners()}),f.title=function(t){return dc("Spacing")+": "+t+"%"},f.on("valueChange",function(t){e.getBrushInfo().spacing=t/100,e.callToolListeners()}),u.title=function(t){return dc("Scattering")+": "+t+"%"},u.on("valueChange",function(t){e.getBrushInfo().scattering=t/100,e.callToolListeners()}),p.title=function(t){return dc("Smoothing")+": "+t+"%"},p.on("valueChange",function(t){e.getBrushInfo().smoothing=t/100,e.callToolListeners()}),c.on("valueChange",function(t){e.getBrushInfo().pressureScattering=t,e.callToolListeners()}),r.on("valueChange",function(t){e.getBrushInfo().pressureAlpha=t,e.callToolListeners()}),s.on("valueChange",function(t){e.getBrushInfo().pressureSize=t,e.callToolListeners()}),i.addEventListener("change",function(t){e.getBrushInfo().tip=parseInt(i.value,10),i.blur()}),i.className="form-control form-control-sm",i.tabIndex=-1,dq(i,["Round Pixelated","Round Hard Edge","Round Soft","Square Pixelated","Square Hard Edge"]),a.appendChild(i),a.appendChild(v.getElement()),a.appendChild(dz(s,l)),a.appendChild(dz(r,o)),a.appendChild(d.getElement()),a.appendChild(h.getElement()),a.appendChild(f.getElement()),a.appendChild(dz(c,u)),a.appendChild(p.getElement()),r.setValue(e.getBrushInfo().pressureAlpha),o.setValue(e.getAlpha()),s.setValue(e.getBrushInfo().pressureSize),l.setValue(e.getBrushSize()),c.setValue(e.getBrushInfo().pressureScattering),u.setValue(~~(100*e.getBrushInfo().scattering)),i.value=e.getBrushInfo().tip,d.setValue(~~(100*e.getBrushInfo().resat)),h.setValue(~~(100*e.getBrushInfo().bleed)),f.setValue(~~(100*e.getBrushInfo().spacing)),p.setValue(~~(100*e.getBrushInfo().smoothing)),e.on("toolChange",function(t,e){o.setValue(e.alpha),l.setValue(e.size),s.setValue(e.pressureSize),r.setValue(e.pressureAlpha),i.value=e.tip,c.setValue(e.pressureScattering),~~(100*e.resat)!=d.value&&d.setValue(~~(100*e.resat)),~~(100*e.bleed)!=h.value&&h.setValue(~~(100*e.bleed)),~~(100*e.spacing)!=f.value&&f.setValue(~~(100*e.spacing)),~~(100*e.scattering)!=u.value&&u.setValue(~~(100*e.scattering)),~~(100*e.smoothing)!=p.value&&p.setValue(~~(100*e.smoothing))}),/*@__PURE__*/t(dh)("1,2,3,4,5,6,7,8,9,0",function(t,n){var a=parseInt(n.shortcut,10);0==a&&(a=10),e.setAlpha(Math.round(a/10*255))}),/*@__PURE__*/t(dh)("{,[",function(){for(var t=e.getBrushSize(),a=n.length-1;a>=0;a--)if(t>n[a]){e.setBrushSize(n[a]);break}}),/*@__PURE__*/t(dh)("},]",function(){for(var t=e.getBrushSize(),a=0;a<n.length;a++)if(t<n[a]){e.setBrushSize(n[a]);break}})}function dK(t){var e,n,a,i=document.createElement("div"),r=new dX(t),o=new dj(new cd(0xffffff&t.getCurGradient()[0]),t.getCurGradient()[0]>>>24,i),s=new dj(new cd(0xffffff&t.getCurGradient()[1]),t.getCurGradient()[1]>>>24,i);function l(){var e=[o.getAlpha()<<24|o.getColorRgb(),s.getAlpha()<<24|s.getColorRgb()];t.setCurGradient(e)}this.getElement=function(){return i},i.className="chickenpaint-gradient-panel",i.style.display="none",o.on("colorChange",l),o.on("alphaChange",l),s.on("colorChange",l),s.on("alphaChange",l),(e=document.createElement("p")).textContent=dc("Gradient"),i.appendChild(e),i.appendChild(r.getElement()),(n=document.createElement("div")).className="chickenpaint-gradient-colors",(a=document.createElement("div")).className="chickenpaint-gradient-start-color",a.appendChild(o.getElement()),n.appendChild(a),(a=document.createElement("div")).className="chickenpaint-gradient-end-color",a.appendChild(s.getElement()),n.appendChild(a),i.appendChild(n)}function dZ(t){var e={smooth:dc("Smooth"),sharp:dc("Sharp")},n=document.createElement("div"),a=document.createElement("button"),i=document.createElement("button"),r=document.createElement("select");if(this.getElement=function(){return n},n.className="chickenpaint-transform-panel",n.style.display="none",a.type="button",i.type="button",a.className="btn btn-primary btn-block",i.className="btn btn-light btn-block",a.textContent=dc("Apply transform"),i.textContent=dc("Cancel"),r.addEventListener("change",function(e){t.setTransformInterpolation(this.value)}),r.className="form-control chickenpaint-transform-interpolation",dq(r,e),cv()){var o=document.createElement("div"),s=document.createElement("label");s.textContent=dc("Transform style"),o.className="form-group",o.appendChild(s),o.appendChild(r),n.appendChild(o)}var l=document.createElement("div");l.appendChild(a),l.appendChild(i),l.className="form-group",n.appendChild(l),a.addEventListener("click",function(e){t.actionPerformed({action:"CPTransformAccept"}),e.preventDefault()}),i.addEventListener("click",function(e){t.actionPerformed({action:"CPTransformReject"}),e.preventDefault()})}function d$(t){t.preventDefault(),t.stopPropagation()}function dQ(t){var e=document.createElement("span");return e.className="fa "+t,e}function dJ(t){var e=document.createElement("span");return e.className="chickenpaint-icon chickenpaint-icon-"+t,e}function d0(t,e){var n=document.createElement("div"),a=document.createElement("label");return a.tabIndex=-1,t.tabIndex=-1,n.className="form-check",t.className="form-check-input",a.className="form-check-label",a.setAttribute("for",t.id),a.appendChild(t),a.appendChild(document.createTextNode(e)),n.appendChild(t),n.appendChild(a),n}function d5(e){var n=this;dA.call(this,e,"layers","Layers",{resizeHorz:!0,resizeVert:!0});var a,i=this,r=e.getArtwork(),o=null,s=this.getBodyElement(),l=this.getElement(),c=new function(){var n="active",a="chickenpaint-layer-visible",s="chickenpaint-layer-group-expanded",c="chickenpaint-layer-image-thumbnail",u="chickenpaint-layer-mask-thumbnail",d="chickenpaint-layer-thumbnail",f={state:0,layer:null,layerElem:null,dragX:0,dragY:0,initialScrollTop:0,dropTarget:null,dropBetweenMarkerElem:null,frameElem:null},p=document.createElement("div"),v=document.createElement("div"),g=0,y=!1,b=null;function w(e){var n=/*@__PURE__*/t(lA)(".chickenpaint-layer",v);return n.get(n.length-1-e)}function _(e){var n=/*@__PURE__*/t(lA)(e).closest(".chickenpaint-layer");if(!n.length)return -1;var a=/*@__PURE__*/t(lA)(".chickenpaint-layer",v);return a.length-1-a.index(n)}function E(){if(2===f.state){var e=l.getBoundingClientRect(),n=!0,a=!0;if(f.dropTarget=function(e,n){for(var a=/*@__PURE__*/t(lA)(".chickenpaint-layer",v),i={layer:o[o.length-1],displayIndex:o.length-1,direction:"over"},s=0;s<a.length;s++){var l=a[a.length-1-s].getBoundingClientRect();if(0===s&&n>l.bottom){var c=r.getLayersRoot().layers[0];i={layer:c,displayIndex:m(c),direction:"under"};break}if(n>=l.top){var u=o[s],d=l.bottom-l.top;i={layer:u,displayIndex:s},u instanceof l3?n>=l.top+.75*d?u.expanded&&u.layers.length>0?(i.layer=u.layers[u.layers.length-1],i.displayIndex--,i.direction="over"):i.direction="under":n>=l.top+.25*d?u.expanded&&u.layers.length>0?(i.layer=u.layers[u.layers.length-1],i.displayIndex--,i.direction="over"):i.direction="inside":i.direction="over":n>=l.top+.5*d?i.direction="under":i.direction="over";break}}if(i.layer.parent==f.layer.parent&&("over"==i.direction||"under"==i.direction)){var h=i.layer.parent,p=h.indexOf(i.layer);if("over"==i.direction&&h.layers[p+1]==f.layer||"under"==i.direction&&h.layers[p-1]==f.layer||i.layer==f.layer)return null}return f.layer instanceof l3&&(i.layer==f.layer&&"inside"==i.direction||i.layer.hasAncestor(f.layer))?null:i}(f.dragX,f.dragY),f.dropTarget){var i=w(f.dropTarget.displayIndex);switch(f.dropTarget.direction){case"over":case"under":v.appendChild(f.dropBetweenMarkerElem);var s,c,u,d,h=f.dropTarget.layer.getDepth()-1;if(c=i.getBoundingClientRect(),"under"==f.dropTarget.direction&&f.dropTarget.layer instanceof l3&&f.dropTarget.layer.expanded){for(s=f.dropTarget.displayIndex-1;s>=0&&o[s].hasAncestor(f.dropTarget.layer);s--);d=w(s+1).getBoundingClientRect().bottom}else d=c.bottom;u=c.left-e.left+(h>0?26+16*h:0),f.dropBetweenMarkerElem.style.left=u+"px",f.dropBetweenMarkerElem.style.width=c.right-e.left-u+"px",f.dropBetweenMarkerElem.style.top=("over"==f.dropTarget.direction?c.top-1:d+1)-e.top+"px",/*@__PURE__*/t(lA)(".chickenpaint-layer-drop-target",v).removeClass("chickenpaint-layer-drop-target"),n=!1;break;case"inside":var p=/*@__PURE__*/t(lA)(".chickenpaint-layer",v);p.each(function(e){/*@__PURE__*/t(lA)(this).toggleClass("chickenpaint-layer-drop-target",p.length-1-e==f.dropTarget.displayIndex)}),a=!1}}a&&/*@__PURE__*/t(lA)(".chickenpaint-layer-drop-target",v).removeClass("chickenpaint-layer-drop-target"),n&&/*@__PURE__*/t(lA)(f.dropBetweenMarkerElem).remove(),f.frameElem.style.top=f.dragY-e.top-parseInt(f.frameElem.style.height,10)/2+"px"}else /*@__PURE__*/t(lA)(f.dropBetweenMarkerElem).remove(),/*@__PURE__*/t(lA)(f.frameElem).remove()}function k(t){var e=t.getImageThumbnail().getAsCanvas(g);return e.title=dc("Image"),e.className=d+" "+c,e.style.maxWidth=e.width/e.height*25+"px",t!=r.getActiveLayer()||r.isEditingMask()||(e.className+=" active"),e}function T(t){var e,n=t.getMaskThumbnail().getAsCanvas(g);return n.title=dc("Layer mask"),n.className=d+" "+u,n.style.maxWidth=n.width/n.height*25+"px",t==r.getActiveLayer()&&r.isEditingMask()&&(n.className+=" active"),t.maskVisible||(n.className+=" disabled",(e=n.getContext("2d")).strokeStyle="red",e.lineWidth=3,e.moveTo(5,5),e.lineTo(n.width-5,n.height-5),e.moveTo(n.width-5,5),e.lineTo(5,n.height-5),e.stroke()),n}function x(t,e){var i=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div"),u=document.createElement("div"),d=document.createElement("div"),h=document.createElement("div");if(i.className="chickenpaint-layer list-group-item",e==r.getActiveLayer()&&(i.className+=" "+n),o.className="chickenpaint-layer-eye",e.ancestorsAreVisible()||(o.className+=" chickenpaint-layer-eye-hidden-ancestors"),o.style.marginRight=2+16*(e.getDepth()-1)+"px",e.visible?(i.className+=" "+a,o.appendChild(dQ("icon-eye"))):(i.className+=" chickenpaint-layer-hidden",o.appendChild(dQ("icon-eye-slash"))),i.appendChild(o),l.className="chickenpaint-layer-description",e instanceof cn){if(e.clip&&(i.className+=" chickenpaint-layer-clipped",c.appendChild(dQ("icon-level-down-alt fa-flip-horizontal"))),e.lockAlpha){var f=dJ("lock-alpha");f.title=dc("Transparency locked"),d.appendChild(f)}}else e instanceof l3&&(i.className+=" chickenpaint-layer-group",e.expanded?(i.className+=" "+s,c.appendChild(dQ("icon-folder-open chickenpaint-layer-group-toggle"))):(i.className+=" chickenpaint-layer-group-collapsed",c.appendChild(dQ("icon-folder chickenpaint-layer-group-toggle"))));c.childNodes.length&&(c.className="chickenpaint-layer-icons",i.appendChild(c));try{e instanceof cn&&i.appendChild(k(e)),e.mask&&i.appendChild(T(e))}catch(t){console.log("Failed to create layer thumb")}var p=e.name&&e.name.length>0?e.name:"(unnamed "+(e instanceof l3?"group":"layer")+")";return u.innerText=p,u.setAttribute("title",p),u.className="chickenpaint-layer-name",h.innerText=dc(l7.BLEND_MODE_DISPLAY_NAMES[e.blendMode])+": "+e.alpha+"%",h.className="chickenpaint-layer-blend",l.appendChild(u),l.appendChild(h),i.appendChild(l),d.className="chickenpaint-layer-status",i.appendChild(d),i.setAttribute("data-display-index",""+t),i}function O(t){if(t>-1){var e=o[t],n=w(t);e&&n&&h.show(e,n)}}function P(n){2===f.state?(/*@__PURE__*/t(lA)(f.layerElem).removeClass("chickenpaint-layer-dragging"),f.dropTarget&&("inside"==f.dropTarget.direction?e.actionPerformed({action:"CPRelocateLayer",layer:f.layer,toGroup:f.dropTarget.layer,toIndex:f.dropTarget.layer.layers.length}):e.actionPerformed({action:"CPRelocateLayer",layer:f.layer,toGroup:f.dropTarget.layer.parent,toIndex:f.dropTarget.layer.parent.indexOf(f.dropTarget.layer)+("over"==f.dropTarget.direction?1:0)})),f.dropTarget=null,f.state=0,E()):f.state=0,b&&(clearTimeout(b),b=null),v.releasePointerCapture(n.pointerId),v.removeEventListener("pointermove",L),v.removeEventListener("pointerup",P)}function S(){f.state=2,f.frameElem=document.createElement("div"),f.frameElem.className="chickenpaint-layer-drag-frame",f.frameElem.style.width=/*@__PURE__*/t(lA)(f.layerElem).outerWidth(!1)+"px",f.frameElem.style.height=/*@__PURE__*/t(lA)(f.layerElem).outerHeight(!1)+"px",f.dropBetweenMarkerElem=document.createElement("div"),f.dropBetweenMarkerElem.className="chickenpaint-layer-drop-between-mark",f.layerElem.className+=" chickenpaint-layer-dragging",v.appendChild(f.frameElem)}function L(t){var e=t.clientY;switch(f.state){case 3:if(Math.abs(e-f.dragY)>5)f.state=4;else break;case 4:v.scrollTop=f.initialScrollTop+f.dragY-e;break;case 1:if(Math.abs(e-f.dragY)>5)S();else break;case 2:f.dragY=e,E()}}function A(e,n,a){try{a?/*@__PURE__*/t(lA)("."+u,e).replaceWith(T(n)):/*@__PURE__*/t(lA)("."+c,e).replaceWith(k(n))}catch(t){}}this.buildLayers=function(){var e=(o=r.getLayersRoot().getLinearizedLayerList(!0)).map(function(t,e){return x(e,t)}),n=document.createDocumentFragment();/*@__PURE__*/t(lA)(v).empty();for(var a=e.length-1;a>=0;a--)n.appendChild(e[a]);v.appendChild(n),E()},this.layerChanged=function(e){var n=m(e),i=/*@__PURE__*/t(lA)(w(n));0===i.length||e instanceof l3&&(e.expanded!=/*@__PURE__*/t(lA)(i).hasClass(s)||e.visible!=/*@__PURE__*/t(lA)(i).hasClass(a))?this.buildLayers():i.replaceWith(x(n,e))},this.setRotation90=function(e){if(g!=e){g=e;for(var n=0;n<o.length;n++){var a=o[n],i=/*@__PURE__*/t(lA)(w(n));i.length>0&&(A(i,a,!1),a.mask&&A(i,a,!0))}}},this.layerImageThumbChanged=function(e){var n=m(e),a=/*@__PURE__*/t(lA)(w(n));a.length>0&&A(a,e,!1)},this.layerMaskThumbChanged=function(e){var n=m(e),a=/*@__PURE__*/t(lA)(w(n));a.length>0&&(e.mask?A(a,e,!0):/*@__PURE__*/t(lA)("."+u,a).remove())},this.activeLayerChanged=function(e,a){/*@__PURE__*/t(lA)("."+n,v).removeClass(n);var i=/*@__PURE__*/t(lA)(w(m(e)));i.addClass(n),/*@__PURE__*/t(lA)("."+c,i).toggleClass("active",!a),/*@__PURE__*/t(lA)("."+u,i).toggleClass("active",a)},this.resize=function(){i.dismissNotification(),this.buildLayers()},this.getElement=function(){return p},this.revealLayer=function(t){var e=w(t),n=e.getBoundingClientRect(),a=v.getBoundingClientRect();return v.scrollTop=Math.max(Math.min(Math.max(v.scrollTop,v.scrollTop+n.bottom-a.bottom),v.scrollTop+n.top-a.top),0),e},l.id="chickenpaint-layer-pop",p.className="chickenpaint-layers-widget",p.addEventListener("contextmenu",function(t){return t.preventDefault()},!0),v.className="list-group",v.addEventListener("dblclick",function(e){0===e.button&&/*@__PURE__*/t(lA)(e.target).closest(".chickenpaint-layer-description").length>0&&0===/*@__PURE__*/t(lA)(e.target).closest("input").length&&(O(_(e.target)),e.preventDefault())}),v.addEventListener("pointerdown",function(n){var a=_(/*@__PURE__*/t(lA)(n.target).closest(".chickenpaint-layer")[0]);if(-1!=a){var i=o[a];if(0==n.button&&/*@__PURE__*/t(lA)(n.target).closest(".chickenpaint-layer-eye").length)e.actionPerformed({action:"CPSetLayerVisibility",layer:i,visible:!i.visible});else if(0==n.button&&i instanceof l3&&/*@__PURE__*/t(lA)(n.target).closest(".chickenpaint-layer-group-toggle").length)e.actionPerformed({action:"CPExpandLayerGroup",group:i,expand:!i.expanded});else{var s,l,c=r.getActiveLayer()!=i;(y=/*@__PURE__*/t(lA)(n.target).closest("."+u).length>0||i instanceof l3&&null!==i.mask&&c,0==n.button&&n.shiftKey&&!(n.ctrlKey||n.metaKey)&&y)?e.actionPerformed({action:"CPSetMaskVisible",layer:i,visible:!i.maskVisible}):(s=0==n.button||c?y:r.isEditingMask(),l=r.isEditingMask()!=s,(c||l)&&e.actionPerformed({action:"CPSetActiveLayer",layer:i,mask:s}),s&&n.altKey)?e.actionPerformed({action:"CPToggleMaskView"}):s&&!n.shiftKey&&(n.ctrlKey||n.metaKey)?e.actionPerformed({action:"CPApplyLayerMask"}):s&&n.shiftKey&&(n.ctrlKey||n.metaKey)?e.actionPerformed({action:"CPRemoveLayerMask"}):0==n.button?("pen"===n.pointerType||"touch"===n.pointerType?(f.state=3,f.initialScrollTop=v.scrollTop,b&&clearTimeout(b),b=setTimeout(function(){3===f.state&&(S(),f.dragY=n.clientY,E())},800)):f.state=1,f.dropTarget=null,f.layer=i,f.layerElem=w(a),f.dragX=n.clientX,f.dragY=n.clientY,v.setPointerCapture(n.pointerId),v.addEventListener("pointermove",L),v.addEventListener("pointerup",P)):2!=n.button||c||(n.preventDefault(),-1!=_(n.target)&&(O(_(n.target)),n.preventDefault()))}}}),v.setAttribute("touch-action","none");for(var C=0,M=["ontouchstart","ontouchmove","ontouchend","ontouchcancel"];C<M.length;C++){var R=M[C];v.addEventListener(R,d$)}p.appendChild(v)},u=new dU(0,100,!1,!1,208),d=document.createElement("select"),h=new function(){var n=null,a="",i=document.createElement("input"),r=this;this.hide=function(){n=null;var e=/*@__PURE__*/t(lA)(i).parent();e&&(/*@__PURE__*/t(lA)(i).remove(),e.text(a))},this.renameAndHide=function(){n&&n.name!=i.value&&e.actionPerformed({action:"CPSetLayerName",layer:n,name:i.value}),this.hide()},this.show=function(t,e){a=(n=t).name,i.value=a;var r=e.querySelector(".chickenpaint-layer-name");if(r&&r.parentNode){var o=r.firstChild;o&&o.nodeType===Node.TEXT_NODE&&(r.removeChild(o),r.appendChild(i))}i.select()},i.type="text",i.className="chickenpaint-layer-rename form-control input-sm",i.addEventListener("keydown",function(t){t.stopPropagation()}),i.addEventListener("keydown",function(t){"Enter"===t.key&&r.renameAndHide(),t.stopPropagation()}),i.addEventListener("keyup",function(t){"Escape"===t.key&&r.hide(),t.stopPropagation()}),i.addEventListener("blur",function(t){n&&r.renameAndHide()})},f=document.createElement("input"),p=document.createElement("input"),v=!1;function m(t){return o.indexOf(t)}function g(){var t=r.getActiveLayer();t.getAlpha()!=u.value&&u.setValue(t.getAlpha()),function(){for(var t=r.getActiveLayer();d.lastChild;)d.removeChild(d.lastChild);for(var e=l7.LM_FIRST;e<=l7.LM_LAST;e++)if(e!=l7.LM_MULTIPLY2&&(e==t.blendMode||e===l7.LM_PASSTHROUGH&&t instanceof l3||e<=l7.LM_LAST_CHIBIPAINT)){var n=document.createElement("option");n.appendChild(document.createTextNode(dc(l7.BLEND_MODE_DISPLAY_NAMES[e]))),e!==l7.LM_MULTIPLY||t.blendMode===e||t.useLegacyMultiply?n.value=e:n.value=l7.LM_MULTIPLY2,d.appendChild(n)}}(),t.getBlendMode()!=parseInt(d.value,10)&&(d.value=t.getBlendMode()),t.getLockAlpha()!=p.checked&&(p.checked=t.getLockAlpha()),function(){for(var t={"image-layer":(d=r.getActiveLayer())instanceof cn,"layer-group":d instanceof l3,"clipping-mask":d instanceof cn&&d.clip,"no-clipping-mask":d instanceof cn&&!d.clip,"no-clipping-mask-or-is-group":!(d instanceof cn)||!d.clip,mask:d&&null!==d.mask,"no-mask":d&&null===d.mask,"mask-enabled":d&&null!==d.mask&&d.maskVisible,"mask-disabled":d&&null!==d.mask&&!d.maskVisible},n=0,i=["mask","no-mask","clipping-mask","no-clipping-mask-or-is-group","image-layer","layer-group"];n<i.length;n++){var o=i[n],s=a.getElementsByClassName("chickenpaint-action-require-"+o),l=!0,c=!1,u=void 0;try{for(var d,h,f=s[Symbol.iterator]();!(l=(h=f.next()).done);l=!0)h.value.style.display=t[o]?"inline-block":"none"}catch(t){c=!0,u=t}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}}a.querySelectorAll("[data-action]").forEach(function(t){var n=t.getAttribute("data-action");t.classList.toggle("disabled",!e.isActionAllowed(n))})}()}function y(){r=this,c.resize(),g()}var b=this.setSize,w=this.setWidth,_=this.setHeight;this.setSize=function(t,e){b.call(this,t,e),this.dismissNotification(),u.resize()},this.setWidth=function(t){w.call(this,t),u.resize(),c.resize()},this.setHeight=function(t){_.call(this,t),c.resize()},this.setRotation90=function(t){c.setRotation90(t)},this.dismissNotification=function(){/*@__PURE__*/t(lA)(".chickenpaint-layer[aria-describedby],.chickenpaint-slider[aria-describedby]",s).each(function(e,n){n=/*@__PURE__*/t(lA)(n);var a=bootstrap.Popover.getInstance(n[0]);a&&a.dispose()}),v&&(clearTimeout(v),v=!1)},this.showNotification=function(t,e,a){var o,s=m(t);o=r.getActiveLayer()==t&&"opacity"==a?u.getElement():c.revealLayer(s),n.dismissNotification(),new bootstrap.Popover(o,{html:!1,content:e,placement:"left",trigger:"manual",fallbackPlacement:[],boundary:"window",container:i.getElement()}).show(),v=setTimeout(function(){v=!1,n.dismissNotification()},Math.max(Math.round(70*e.length),3e3))},d.className="form-control form-control-sm",d.tabIndex=-1,d.title=dc("Layer blending mode"),d.addEventListener("change",function(t){e.actionPerformed({action:"CPSetLayerBlendMode",blendMode:parseInt(d.value,10)}),d.blur()}),s.appendChild(d),u.title=function(t){return dc("Opacity")+": "+t+"%"},u.on("valueChange",function(t){e.actionPerformed({action:"CPSetLayerAlpha",alpha:t})}),s.appendChild(u.getElement()),f.id="chickenpaint-chk-sample-all-layers",f.type="checkbox",f.addEventListener("click",function(t){r.setSampleAllLayers(f.checked),document.activeElement.blur()}),s.appendChild(d0(f,dc("Sample all layers"))),p.id="chickenpaint-chk-lock-alpha",p.type="checkbox",p.addEventListener("click",function(t){e.actionPerformed({action:"CPSetLayerLockAlpha",lock:p.checked}),document.activeElement.blur()}),s.appendChild(d0(p,dc("Lock transparency"))),s.appendChild(c.getElement()),a=function(){var t=[{title:"Add layer",icon:dQ("icon-file"),action:"CPAddLayer"},{title:"Add group",icon:dQ("icon-folder"),action:"CPAddGroup"},{title:"Merge down",icon:dQ("icon-download_FILL"),action:"CPLayerMergeDown",require:["image-layer"]},{title:"Merge group",icon:dQ("icon-collapse_all_FILL"),action:"CPGroupMerge",require:["layer-group"]},{title:"Clip to the layer below",icon:dQ("icon-level-down-alt fa-flip-horizontal"),action:"CPCreateClippingMask",require:"no-clipping-mask-or-is-group"},{title:"Unclip from the layer below",icon:dQ("icon-level-down-alt fa-flip-horizontal"),action:"CPReleaseClippingMask",require:"clipping-mask"},{title:"Add layer mask",icon:dJ("mask"),action:"CPAddLayerMask",require:["no-mask"]},{title:"Apply mask",icon:dJ("mask"),action:"CPApplyLayerMask",require:["mask"]},{title:"Duplicate",icon:dQ("icon-clone"),action:"CPLayerDuplicate"},{title:"Delete layer",icon:dQ("icon-trash"),action:"CPRemoveLayer"}],n=document.createElement("ul");n.className="chickenpaint-layer-buttons list-unstyled";var a=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done);a=!0)!function(){var t=o.value,a=document.createElement("li");a.setAttribute("data-action",t.action),a.className="chickenpaint-small-toolbar-button "+(t.require?"chickenpaint-action-require-"+t.require:""),a.title=dc(t.title),a.appendChild(t.icon),a.addEventListener("click",function(){e.actionPerformed({action:t.action})}),n.appendChild(a)}()}catch(t){i=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(),s.appendChild(a),r.on("changeActiveLayer",function(t,e,n){c.activeLayerChanged(e,n),g()}),r.on("changeLayer",function(t){r=this,i.dismissNotification(),c.layerChanged(t),g()}),r.on("changeStructure",y),r.on("changeLayerMaskThumb",function(t){r=this,c.layerMaskThumbChanged(t)}),r.on("changeLayerImageThumb",function(t){r=this,c.layerImageThumbChanged(t)}),e.on("layerNotification",this.showNotification.bind(this)),y.call(r)}function d2(){this.table=new Uint8Array(256),this.loadIdentity=function(){for(var t=0;t<256;t++)this.table[t]=t},this.loadBrightnessContrast=function(t,e){for(var n=e>0?1/(1.0001-e):1+e,a=.5-.5*n+t,i=0;i<256;i++){var r=i/255*n+a;this.table[i]=Math.min(255,Math.max(~~(255*r),0))}},this.invert=function(){for(var t=0;t<256;t++)this.table[t]=255-this.table[t]}}function d1(t,e){var n=document.createElement("div"),a=document.createElement("label");return n.className="form-check",t.className="form-check-input",a.className="form-check-label",a.setAttribute("for",t.id),a.appendChild(t),a.appendChild(document.createTextNode(e)),n.appendChild(t),n.appendChild(a),n}function d3(e){dA.call(this,e,"textures","Textures");var n,a,i,r,o,s,l,c,u,d=!1,h=!1,f=0,p=0,v=document.createElement("div"),m=this.getBodyElement();function g(t){for(var e=0;e<t.length;e++){var n=new k(t[e],32,32);n.on("click",function(){l=this.texture,E()}),v.appendChild(n.getElement())}}function y(t){for(var e=new l6(t,t,8),n=1;n<t*t;n++)e.data[n]=255;return e}function b(t){for(var e=2*t,n=new l6(e,e,8),a=0;a<e;a++)for(var i=0;i<e;i++)n.data[a+i*e]=(~~(a/t)+~~(i/t))%2==0?0:255;return n}function w(t,e){for(var n=new l6(e,e,8),a=0;a<e*e;a++)~~(a%e)>=t&&(n.data[a]=255);return n}function _(t,e){for(var n=new l6(e,e,8),a=0;a<e*e;a++)a/e>=t&&(n.data[a]=255);return n}function E(){if(null!=l){c=l.clone(),d&&c.mirrorHorizontally();var t=new d2;t.loadBrightnessContrast(f,p),h&&t.invert(),c.applyLUT(t)}else c=null;e.getArtwork().setBrushTexture(c),null!=u&&u.updateTexture()}function k(t,e,n){var a=document.createElement("canvas"),i=a.getContext("2d"),r=this;this.setTexture=function(t){this.texture=t,this.paint()},this.getElement=function(){return a},this.paint=function(){null!=this.texture?i.fillStyle=i.createPattern(this.texture.getAsCanvas(),"repeat"):i.fillStyle="white",i.fillRect(0,0,a.width,a.height)},a.addEventListener("click",function(){r.emit("click")}),a.width=e,a.height=n,this.setTexture(t)}k.prototype=Object.create(/*@__PURE__*/t(cr).prototype),k.prototype.constructor=k,u=new function(){var t,e,n,a,i=document.createElement("div"),r=document.createElement("input"),o=document.createElement("input"),s=new dU(0,200,!0),l=new dU(0,200,!0),u=new k(null,64,64),v=document.createElement("button"),g=new bootstrap.Popover(v,{html:!0,content:function(){return a},trigger:"manual",placement:"right",container:m});function y(){r.checked=h,o.checked=d,s.setValue(100*f+100),l.setValue(100*p+100)}this.updateTexture=function(){v.disabled=null==c,u.setTexture(c)},this.getElement=function(){return i},i.className="chickenpaint-texture-options",i.appendChild(u.getElement()),v.type="button",v.className="btn btn-light btn-sm",v.setAttribute("data-bs-toggle","popover"),v.setAttribute("data-bs-placement","right"),v.textContent=dc("Customize"),(t=document.createElement("div")).className="chickenpaint-texture-controls",r.id="chickenpaint-chk-texture-invert",r.type="checkbox",r.addEventListener("click",function(t){h=this.checked,E()}),t.appendChild(d1(r,dc("Inverse"))),o.id="chickenpaint-chk-texture-mirror",o.type="checkbox",o.addEventListener("click",function(t){d=this.checked,E()}),t.appendChild(d1(o,dc("Mirror"))),s.title=function(t){return dc("Brightness")+": "+(t-100)+"%"},s.on("valueChange",function(t){f=(t-100)/100,E()}),t.appendChild(s.getElement()),l.title=function(t){return dc("Contrast")+": "+(t-100)+"%"},l.on("valueChange",function(t){p=(t-100)/100,E()}),t.appendChild(l.getElement()),e=document.createElement("button"),n=document.createElement("button"),e.textContent="Ok",e.className="btn btn-primary btn-sm",e.type="button",e.addEventListener("click",function(t){g.hide()}),t.appendChild(e),t.appendChild(document.createTextNode(" ")),n.textContent="Reset",n.className="btn btn-secondary btn-sm",n.type="button",n.addEventListener("click",function(t){f=0,p=0,d=!1,h=!1,y(),E()}),t.appendChild(n),y(),a=t,v.addEventListener("click",function(){g.toggle()}),i.appendChild(v),this.updateTexture()},m.appendChild(u.getElement()),v.className="chickenpaint-texture-swatches",m.appendChild(v),g((n=[null],(a=new l6(2,2,8)).data[0]=255,a.data[3]=255,n.push(a),n.push(y(2)),n.push(y(3)),n.push(y(4)),n.push(y(6)),n.push(y(8)),n.push(w(1,2)),n.push(w(2,4)),n.push(_(1,2)),n.push(_(2,4)),n.push(b(2)),n.push(b(4)),n.push(b(8)),n.push(b(16)),n)),i=e.getResourcesRoot()+"gfx/textures32.png",r=function(t){g(t)},o=new Image,s=[],o.onload=function(){var t=document.createElement("canvas"),e=t.getContext("2d",{willReadFrequently:!0});t.width=o.width,t.height=o.height;for(var n=0;n<2;n++){e.drawImage(o,0,32*n,32,32,0,0,32,32);try{for(var a=e.getImageData(0,0,32,32),i=new l6(32,32,8),l=0;l<1024;l++)i.data[l]=a.data[4*l];s.push(i)}catch(t){console.log(t)}}r(s)},o.src=i}function d4(e){dA.call(this,e,"swatches","Color swatches");var n,a,i,r,o,s,l,c,u,d=[0xffffff,0,0xff0000,65280,255,0xffff00],h=!1,f=document.createElement("ul"),p=document.createElement("div"),v=this;function m(n){var a=document.createElement("div"),i=document.createElement("a"),r=document.createElement("ul"),o=document.createElement("a"),s=document.createElement("a"),l=this;this.getElement=function(){return a},this.setColor=function(t){i.setAttribute("data-color",t),i.style.backgroundColor="#"+function(t,e,n){for(;t.length<6;)t="0"+t;return t}(""+Number(t).toString(16),0,0)},this.setColor(n),i.href="#",i.className="chickenpaint-color-swatch dropdown-toggle",o.className="dropdown-item",o.href="#",o.textContent=dc("Remove"),o.addEventListener("click",function(e){e.preventDefault(),/*@__PURE__*/t(lA)(a).remove(),h=!0}),s.className="dropdown-item",s.href="#",s.textContent=dc("Replace with current color"),s.addEventListener("click",function(t){t.preventDefault(),l.setColor(e.getCurColor().getRgb()),h=!0}),r.className="dropdown-menu";var c=document.createElement("li"),u=document.createElement("li");c.appendChild(o),u.appendChild(s),r.appendChild(c),r.appendChild(u),a.className="chickenpaint-color-swatch-wrapper",a.appendChild(i),a.appendChild(r)}function g(t){var e=new m(t);f.appendChild(e.getElement())}function y(t){var e=document.createElement("span");return e.className="fa icon-"+t,e}this.getSwatches=function(){for(var e=/*@__PURE__*/t(lA)(".chickenpaint-color-swatch",f),n=Array(e.length),a=0;a<e.length;a++)n[a]=parseInt(e.get(a).getAttribute("data-color"),10);return n},this.setSwatches=function(t){!function(){for(;f.lastChild;)f.removeChild(f.lastChild)}();for(var e=0;e<t.length;e++)g(t[e]);h=!0},this.isModified=function(){return h},function(){f.className="chickenpaint-color-swatches list-unstyled";for(var n=0;n<d.length;n++)f.appendChild(new m(d[n]).getElement());f.addEventListener("click",function(t){var n=t.target;/^<a data-color=/i.test(n.outerHTML)&&/chickenpaint-color-swatch/.test(n.className)&&0==t.button&&void 0!==n.getAttribute("data-color")&&(e.setCurColor(new cd(parseInt(n.getAttribute("data-color"),10))),t.stopPropagation(),t.preventDefault())}),f.addEventListener("contextmenu",function(e){var n=e.target;if(/^<a data-color=/i.test(n.outerHTML)&&/chickenpaint-color-swatch/.test(n.className)){e.preventDefault();var a=new bootstrap.Dropdown(/*@__PURE__*/t(lA)(n));a.toggle(),document.addEventListener("click",function t(e){a.hide(),document.removeEventListener("click",t)})}})}(),this.getBodyElement().appendChild(f),n=document.createElement("button"),a=document.createElement("button"),i=document.createElement("ul"),r=document.createElement("a"),o=document.createElement("a"),a.type="button",a.title=dc("Add the current brush color as a new swatch"),a.className="btn chickenpaint-small-toolbar-button chickenpaint-color-swatch-add",a.appendChild(y("plus")),n.type="button",n.className="btn dropdown-toggle chickenpaint-small-toolbar-button chickenpaint-color-swatch-settings",n.setAttribute("data-bs-toggle","dropdown"),n.appendChild(y("cog")),r.className="dropdown-item",r.href="#",r.textContent=dc("Save swatches to your computer..."),r.addEventListener("click",function(e){var n;e.preventDefault(),n=new Blob([new dt().write(v.getSwatches())],{type:"application/octet-stream"}),/*@__PURE__*/t(dn).saveAs(n,"oekakiswatches.aco")}),o.className="dropdown-item",o.href="#",o.textContent=dc("Load swatches from your computer..."),o.addEventListener("click",function(t){t.preventDefault(),u.onchange=function(){var t=this.files;if(!(t.length<1)){var e=t[0],n=new FileReader;n.onload=function(){var t=new dt().read(this.result);null!=t&&t.length>0?v.setSwatches(t):alert(dc("The swatches could not be read, did you select an .aco file?"))},n.readAsArrayBuffer(e)}},u.click()}),i.className="dropdown-menu",s=document.createElement("li"),l=document.createElement("li"),s.appendChild(r),l.appendChild(o),i.appendChild(s),i.appendChild(l),(c=document.createElement("div")).className="btn-group",c.appendChild(n),c.appendChild(i),a.addEventListener("click",function(t){g(e.getCurColor().getRgb()),h=!0}),p.className="chickenpaint-color-swatches-buttons",window.File&&window.FileReader&&window.FileList&&window.Blob&&((u=document.createElement("input")).type="file",u.multiple=!1,u.style.display="none",p.appendChild(c),p.appendChild(u)),p.appendChild(a),this.getBodyElement().appendChild(p)}function d6(e){var n={tool:new dC(e),misc:new dM(e),stroke:new dR(e),color:new dH(e),brush:new dG(e),layers:new d5(e),textures:new d3(e),swatches:new d4(e)},a={tool:!1,color:!1,misc:!1},i={color:!0,textures:!0,layers:!0},r=document.createElement("div"),o=this,s=[],l=[];function c(){var e=/*@__PURE__*/t(lA)(r).parents(".chickenpaint").find(".chickenpaint-canvas");return{width:e.width(),height:e.height()}}function u(t,e){var n=t.getElement();e?r.contains(n)||r.appendChild(n):r.contains(n)&&r.removeChild(n),o.emitEvent("paletteVisChange",[t.name,e])}for(var d in this.palettes=n,this.showPaletteByName=function(t,e){var a=n[t];a&&u(a,e)},this.togglePalettes=function(){if(0==l.length)/*@__PURE__*/t(lA)("> .chickenpaint-palette",r).each(function(){o.showPaletteByName(this.getAttribute("data-paletteName"),!1),l.push(this)});else{for(var e=0;e<l.length;e++){var n=l[e];o.showPaletteByName(n.getAttribute("data-paletteName"),!0)}l=[]}},this.constrainPalettes=function(){var t=c();for(var e in n){var a=n[e];a.getX()+a.getWidth()/2>t.width&&a.setLocation(t.width-a.getWidth(),a.getY()),a.getY()+a.getHeight()/2>t.height&&a.setLocation(a.getX(),t.height-a.getHeight())}var i=t.width-n.tool.getWidth()-n.misc.getWidth()-n.stroke.getWidth()-n.color.getWidth()-n.brush.getWidth()-15>0;n.swatches.getX()+n.swatches.getWidth()==n.brush.getX()+n.brush.getWidth()&&20>Math.abs(n.swatches.getY()-n.brush.getY())&&n.swatches.setLocation(n.brush.getX()-n.swatches.getWidth()-(i?5:1),0),n.layers.getY()+n.layers.getHeight()>t.height&&n.layers.setHeight(Math.max(t.height-n.layers.getY(),200))},this.arrangePalettes=function(){var t,a=c();if(e.getSmallScreenMode()){n.tool.setLocation(0,0),n.misc.setLocation(n.tool.getX()+n.tool.getWidth()+1,0);var i=a.width-(n.tool.getWidth()+n.misc.getWidth()+n.brush.getWidth())<=16?n.misc.getY()+n.misc.getHeight()+1:0;n.brush.setLocation(a.width-n.brush.getWidth()-15,i),n.textures.setWidth(a.width-n.textures.getX()),n.layers.setLocation(n.brush.getX()+n.brush.getWidth()-n.layers.getWidth(),n.textures.getY()-n.layers.getHeight());var r=Math.max(n.textures.getY()-330-1,370);n.layers.setHeight(r),n.layers.setWidth(218),n.stroke.setLocation(n.misc.getX(),n.misc.getY()+n.misc.getHeight()+1),n.swatches.setLocation(n.stroke.getX(),n.stroke.getY()+n.stroke.getHeight()+1)}else{t=a.width-n.tool.getWidth()-n.misc.getWidth()-n.stroke.getWidth()-n.color.getWidth()-n.brush.getWidth()-15>0,n.brush.setLocation(a.width-n.brush.getWidth()-15,0);var o=n.brush.getY()+n.brush.getHeight(),s=a.height-o>300?o+2:o;n.layers.setSize(n.brush.getWidth()+(t?30:0),a.height-s),n.layers.setLocation(n.brush.getX()+n.brush.getWidth()-n.layers.getWidth(),s),n.tool.setLocation(0,0),n.misc.setLocation(n.tool.getX()+n.tool.getWidth()+(t?5:1),0),t?n.stroke.setLocation(n.misc.getX()+n.misc.getWidth()+(t?5:1),0):n.stroke.setLocation(n.misc.getX(),n.misc.getY()+n.misc.getHeight()+1),n.swatches.setLocation(Math.max(n.brush.getX()-n.swatches.getWidth()-(t?5:1),n.tool.getX()+n.tool.getWidth()),0),n.textures.setWidth(Math.min(n.layers.getX()-n.textures.getX(),490))}n.textures.setLocation(n.color.getX()+n.color.getWidth()+4,a.height-n.textures.getHeight()),n.color.setLocation(0,Math.max(n.tool.getY()+n.tool.getHeight(),a.height-n.color.getHeight()))},e.on("smallScreen",function(t){if(t)for(var e in n)n[e].toggleCollapse(t&&(!(e in a)||a[e]))}),this.getElement=function(){return r},r.className="chickenpaint-palettes",n){var h=n[d],f=h.getElement();h.on("paletteVisChange",function(){u(this,!1)}),d in i&&h.setCollapseDownwards(!0),f.setAttribute("data-paletteName",d),s.push(f)}for(var p in n){var v=n[p].getElement();r.appendChild(v)}}dH.prototype=Object.create(dA.prototype),dH.prototype.constructor=dH,dY.prototype=Object.create(/*@__PURE__*/t(cr).prototype),dY.prototype.constructor=dY,dU.prototype=Object.create(/*@__PURE__*/t(cr).prototype),dU.prototype.constructor=dU,dj.prototype=Object.create(/*@__PURE__*/t(cr).prototype),dj.prototype.constructor=dj,dG.prototype=Object.create(dA.prototype),dG.prototype.constructor=dG,dG.CPBrushPreview=function(e){var n=16,a=document.createElement("canvas"),i=a.getContext("2d"),r=!1;function o(){i.clearRect(0,0,a.width,a.height),i.beginPath(),i.arc(a.width/2,a.height/2,n/2*window.devicePixelRatio,0,2*Math.PI),i.stroke()}function s(i){var r=/*@__PURE__*/t(lA)(a).offset(),s={x:i.pageX-r.left,y:i.pageY-r.top},l=s.x-/*@__PURE__*/t(lA)(a).width()/2,c=s.y-/*@__PURE__*/t(lA)(a).height()/2;n=Math.max(1,Math.min(200,Math.round(2*Math.sqrt(l*l+c*c)))),o(),e.setBrushSize(n)}function l(t){r&&(r=!1,window.removeEventListener("mouseup",l),window.removeEventListener("mousemove",s))}this.getElement=function(){return a},a.addEventListener("mousedown",function(t){r||(r=!0,window.addEventListener("mouseup",l),window.addEventListener("mousemove",s),s(t))}),e.on("toolChange",function(t,e){e.size!=n&&(n=e.size,o())}),a.width=64,a.height=64,window.devicePixelRatio>1&&(a.style.width=a.width+"px",a.style.height=a.height+"px",a.width=a.width*window.devicePixelRatio,a.height=a.height*window.devicePixelRatio),a.className="chickenpaint-brush-preview",i.strokeStyle="black",i.lineWidth=1*window.devicePixelRatio,o()},d5.prototype=Object.create(dA.prototype),d5.prototype.constructor=d5,d3.prototype=Object.create(dA.prototype),d3.prototype.constructor=d3,d4.prototype=Object.create(dA.prototype),d4.prototype.constructor=d4,d6.prototype=Object.create(/*@__PURE__*/t(cr).prototype),d6.prototype.constructor=d6;var d8=[{name:"File",mnemonic:"F",children:[{name:"Save to my computer",action:"CPSave",mnemonic:"S",shortcut:"ctrl+s"},{name:"Save Oekaki",action:"CPSend",mnemonic:"S",shortcut:"ctrl+s"}]},{name:"Edit",mnemonic:"E",children:[{name:"Undo",action:"CPUndo",mnemonic:"U",shortcut:"ctrl+z"},{name:"Redo",action:"CPRedo",mnemonic:"R",shortcut:"ctrl+y"},{name:"Clear history",action:"CPClearHistory",mnemonic:"H",title:dc("Removes all undo/redo information to regain memory")},{name:"-"},{name:"Cut",action:"CPCut",mnemonic:"T",shortcut:"ctrl+x"},{name:"Copy",action:"CPCopy",mnemonic:"C",shortcut:"ctrl+c"},{name:"Copy merged",action:"CPCopyMerged",mnemonic:"Y",shortcut:"shift+ctrl+c"},{name:"Paste",action:"CPPaste",mnemonic:"P",shortcut:"ctrl+v"},{name:"-"},{name:"Select all",action:"CPSelectAll",mnemonic:"A",shortcut:"ctrl+a"},{name:"Deselect",action:"CPDeselectAll",mnemonic:"D",shortcut:"ctrl+d"},{name:"-"},{name:"Transform",action:"CPTransform",mnemonic:"T",shortcut:"ctrl+h"}]},{name:"Layers",mnemonic:"L",children:[{name:"Duplicate",action:"CPLayerDuplicate",mnemonic:"D",shortcut:"shift+ctrl+d"},{name:"-"},{name:"Merge down",action:"CPLayerMergeDown",mnemonic:"E",shortcut:"ctrl+e"},{name:"Merge group",action:"CPGroupMerge",mnemonic:"G",shortcut:"shift+ctrl+g"},{name:"Merge all layers",action:"CPLayerMergeAll",shortcut:"shift+ctrl+e",mnemonic:"A"},{name:"-"},{hideIfNotAvailable:!0,name:"Add layer mask",action:"CPAddLayerMask"},{hideIfNotAvailable:!0,name:"Delete layer mask",action:"CPRemoveLayerMask",shortcut:"shift+m"},{hideIfNotAvailable:!0,name:"Apply layer mask",action:"CPApplyLayerMask",shortcut:"ctrl+m"},{name:"-"},{hideIfNotAvailable:!0,name:"Clip to the layer below",action:"CPCreateClippingMask"},{hideIfNotAvailable:!0,name:"Unclip from the layer below",action:"CPReleaseClippingMask"}]},{name:"Effects",mnemonic:"E",children:[{name:"Clear",action:"CPClear",mnemonic:"D",shortcut:"del,backspace"},{name:"Fill",action:"CPFill",mnemonic:"F",shortcut:"ctrl+f"},{name:"Flip horizontal",action:"CPHFlip",mnemonic:"H",shortcut:"h"},{name:"Flip vertical",action:"CPVFlip",mnemonic:"V"},{name:"Invert",action:"CPFXInvert",mnemonic:"I",shortcut:"ctrl+i",title:dc("Invert the image colors")},{name:"-"},{name:"Box blur...",action:"CPFXBoxBlur",mnemonic:"B"},{name:"-"},{name:"Monochromatic noise",action:"CPMNoise",mnemonic:"M",title:dc("Fills the selection with noise")},{name:"Color noise",action:"CPCNoise",mnemonic:"C",title:dc("Fills the selection with colored noise")}]},{name:"View",mnemonic:"V",children:[{name:"Full-screen mode",action:"CPFullScreen",mnemonic:"F",checkbox:!0,checked:!1},{name:"-"},{name:"Zoom in",action:"CPZoomIn",mnemonic:"I",shortcut:"ctrl+="},{name:"Zoom out",action:"CPZoomOut",mnemonic:"O",shortcut:"ctrl+-"},{name:"Zoom 100%",action:"CPZoom100",mnemonic:"1",shortcut:"ctrl+0"},{action:"CPLinearInterpolation",name:"-"},{name:"Smooth-out zoomed canvas",action:"CPLinearInterpolation",mnemonic:"L",title:dc("Linear interpolation is used to give a smoothed looked to the picture when zoomed in"),checkbox:!0,checked:!0},{name:"-"},{name:"Show grid",action:"CPToggleGrid",mnemonic:"G",shortcut:"ctrl+g",checkbox:!0,checked:!1},{name:"Grid options...",action:"CPGridOptions",mnemonic:"D"}]},{name:"Palettes",mnemonic:"P",children:[{name:"Rearrange",action:"CPArrangePalettes",title:dc("Rearrange the palette windows")},{name:"Toggle palettes",action:"CPTogglePalettes",mnemonic:"P",shortcut:"tab",title:dc("Hides or shows all palettes")},{name:"-"},{name:"Show tools",action:"CPPalTool",mnemonic:"T",checkbox:!0,checked:!0},{name:"Show color",action:"CPPalColor",mnemonic:"C",checkbox:!0,checked:!0},{name:"Show stroke",action:"CPPalStroke",mnemonic:"S",checkbox:!0,checked:!0},{name:"Show misc",action:"CPPalMisc",mnemonic:"M",checkbox:!0,checked:!0},{name:"Show swatches",action:"CPPalSwatches",mnemonic:"W",checkbox:!0,checked:!0},{name:"Show textures",action:"CPPalTextures",mnemonic:"X",checkbox:!0,checked:!0},{name:"Show tool options",action:"CPPalBrush",mnemonic:"B",checkbox:!0,checked:!0},{name:"Show layers",action:"CPPalLayers",mnemonic:"L",checkbox:!0,checked:!0}]},{name:"Help",mnemonic:"H",children:[{name:"Tablet support",mnemonic:"T",action:"CPTabletSupport"},{name:"Shortcuts",mnemonic:"S",action:"CPShortcuts"},{name:"-"},{name:"About",mnemonic:"A",action:"CPAbout"}]}];function d7(e,n){var a=/*@__PURE__*/t(lA)('<nav class="navbar navbar-expand-md bg-light"><div class="navbar-upper"><a class="navbar-brand" href="#">ChickenPaint Be</a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#chickenpaint-main-menu-content" aria-controls="chickenpaint-main-menu-content" aria-expanded="false" aria-label="Toggle main menu"><span class="navbar-toggler-icon"></span></button></div><div class="collapse navbar-collapse" id="chickenpaint-main-menu-content"><div class="navbar-nav"></div></div><div class="widget-nav" id="chickenpaint-palette-toggler-content"></div></nav>'),i=navigator.userAgent.toLowerCase().includes("mac os");function r(t){var n,a=t.data("action"),i=t.data("checkbox");e.isActionAllowed(a)&&(i?(t.toggleClass("selected"),n=t.hasClass("selected")):n=!1,e.actionPerformed({action:a,checkbox:i,selected:n}))}this.getElement=function(){return a[0]},function(n,a){n.append(a.map(function(n){var a=/*@__PURE__*/t(lA)('<div class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+dc(n.name)+'</a><ul class="dropdown-menu"></ul></div>'),o=/*@__PURE__*/t(lA)(".dropdown-toggle",a),s=/*@__PURE__*/t(lA)(".dropdown-menu",a);return o[0].addEventListener("show.bs.dropdown",function(n){!function(n){/*@__PURE__*/t(lA)("[data-action]",n).each(function(){var n=/*@__PURE__*/t(lA)(this),a=this.getAttribute("data-action"),i=e.isActionAllowed(a);n.toggleClass("disabled",!i).toggleClass("hidden",!i&&!0===n.data("hideIfNotAvailable"))}),/*@__PURE__*/t(lA)(".dropdown-divider",n).removeClass("hidden");for(var a=/*@__PURE__*/t(lA)(".dropdown-item:not(.hidden),.dropdown-divider:not(.hidden)",n),i=null,r=0;r<a.length;r++){var o=/*@__PURE__*/t(lA)(a[r]);o.hasClass("dropdown-divider")?0===r||i?o.addClass("hidden"):i=o:i=null}i&&i.addClass("hidden")}(a)}),s.append(n.children.map(function(n){if(!n.action||e.isActionSupported(n.action)){if("CPSend"!=n.action||e.isActionSupported("CPContinue")||(n.name=dc("Post Oekaki"),n.shortcut="ctrl+p"),"-"==n.name?o=/*@__PURE__*/t(lA)('<hr class="dropdown-divider"></hr>'):(o=/*@__PURE__*/t(lA)('<a class="dropdown-item" href="#" data-action="'+n.action+'"><span>'+dc(n.name)+"</span></a>"),n.checkbox&&/*@__PURE__*/t(lA)(o).data("checkbox",!0).toggleClass("selected",!!n.checked),n.hideIfNotAvailable&&o.data("hideIfNotAvailable",!0)),n.title&&o.attr("title",dc(n.title)),n.shortcut){var a,o,s=o,l=document.createElement("small");i&&(n.shortcut=n.shortcut.replace(/SHIFT/im,"â§"),n.shortcut=n.shortcut.replace(/ALT/im,"â¥"),n.shortcut=n.shortcut.replace(/CTRL/im,"â")),l.className="chickenpaint-shortcut",l.textContent=(a=(a=(a=(a=(a=n.shortcut).toUpperCase()).replace(/(,.+)$/,"")).replace("CTRL+=","CTRL++")).replace("â+=","â++"),a=i?a.replace(/([^+])\+/g,"$1"):a.replace(/([^+])\+/g,"$1 ")),s.append(l),/*@__PURE__*/t(dh)(n.shortcut,function(t){return r(s),t.preventDefault(),t.stopPropagation(),!1})}return /*@__PURE__*/t(lA)("<li>").append(o)}})),a}))}(/*@__PURE__*/t(lA)(".navbar-nav",a),d8),function(n,a){n.append(a.filter(function(t){return!!t.mnemonic&&e.isActionSupported(t.action)}).map(function(e){var n=/*@__PURE__*/t(lA)('<button class="widget-toggler selected" type="button" data-action="'.concat(e.action,'" data-checkbox="true" data-selected="').concat(!e.checked,'">')+"<span>"+e.mnemonic+"</span></button>");return n.on("click",function(t){r(n),t.preventDefault()}),n}))}(/*@__PURE__*/t(lA)(".widget-nav",a),d8[5].children),/*@__PURE__*/t(lA)(a).on("click","a:not(.dropdown-toggle)",function(e){r(/*@__PURE__*/t(lA)(this)),e.preventDefault()}),/*@__PURE__*/t(lA)(".navbar-toggler",a).on("click",function(t){t.preventDefault()}),n.getPaletteManager().on("paletteVisChange",function(e,n){/*@__PURE__*/t(lA)('[data-action="CPPal'+e.substring(0,1).toUpperCase()+e.substring(1)+'"]',a).toggleClass("selected",n)});var o=/*@__PURE__*/t(lA)(".dropdown-item[data-action=CPFullScreen]",a),s=/*@__PURE__*/t(lA)(".dropdown-item[data-action=CPToolbarStyle]",a);e.on("fullScreen",function(t){return o.toggleClass("selected",t)}),o.toggleClass("selected",e.isFullScreen()),e.on("toolbarStyleChange",function(t){return s.toggleClass("selected","old"===t)}),s.toggleClass("selected","old"===e.getToolbarStyle())}function d9(e,n){var a,i=this,r=document.createElement("div"),o=new dL(e),s=new d6(e),l=!1,c=this;this.togglePalettes=function(){s.togglePalettes()},this.arrangePalettes=function(){setTimeout(s.arrangePalettes.bind(s),0)},this.constrainPalettes=function(){s.constrainPalettes()},this.showPalette=function(t,e){s.showPaletteByName(t,e)},this.getSwatches=function(){return s.palettes.swatches.getSwatches()},this.setSwatches=function(t){s.palettes.swatches.setSwatches(t)},this.getPaletteManager=function(){return s},this.setRotation90=function(t){o.setRotation(t*Math.PI/2),s.palettes.layers.setRotation90(t)},this.setFullScreenMode=function(t){l!==t&&(l=t,c.resize(),c.arrangePalettes())},this.resize=function(){var t,e=window.innerHeight,n=a.getElement().getBoundingClientRect().height;t=l?e-n:Math.min(Math.max(e-n-65,500),850),o.resize(t,!1),c.constrainPalettes()},a=new d7(e,this),n.appendChild(a.getElement()),r.className="chickenpaint-main-section",r.appendChild(o.getElement()),r.appendChild(s.getElement()),n.appendChild(r),o.on("canvasRotated90",function(t){s.palettes.layers.setRotation90(t)}),screen.orientation&&screen.orientation.addEventListener("change",function(t){i.resize(),e.actionPerformed({action:"CPArrangePalettes"}),setTimeout(function(){i.resize(),e.actionPerformed({action:"CPArrangePalettes"})},10),Promise.resolve().then(function(){i.resize()}).then(function(){e.actionPerformed({action:"CPArrangePalettes"})})});var u=document.getElementById("chickenpaint-main-menu-content");if(document.addEventListener("show.bs.modal",function(){u&&u.classList.contains("show")&&new bootstrap.Collapse(u,{toggle:!1}).hide()}),u){var d=document.querySelector(".chickenpaint .widget-nav");d&&(u.addEventListener("show.bs.collapse",function(t){d.classList.add("hidden")}),u.addEventListener("hidden.bs.collapse",function(t){d.classList.remove("hidden")})),window.addEventListener("resize",function(){d.classList.remove("hidden")})}document.addEventListener("hidden.bs.collapse",this.resize.bind(this)),window.addEventListener("resize",this.resize.bind(this)),e.on("fullScreen",function(t){return i.setFullScreenMode(t)}),e.on("toolbarStyleChange",function(e){/*@__PURE__*/t(lA)(n).toggleClass("chickenpaint-toolbar-style-old","old"===e)}),e.on("unsavedChanges",function(e){/*@__PURE__*/t(lA)(n).toggleClass("chickenpaint-unsaved",e)}),setTimeout(this.resize.bind(this),0)}function ht(e){var n=/*@__PURE__*/t(lA)('<div class="modal fade chickenpaint-about-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">About ChickenPaint Be</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n						<a class="chickenpaint-on-github" target="_blank" href="https://github.com/satopian/ChickenPaint_Be" rel="noopener"><span class="icon-github"></span> ChickenPaint Be on GitHub</a>\n						<p>\n						Customized from <a href="https://github.com/thenickdude/chickenpaint" target="_blank" rel="noopener">ChickenPaint</a>.<br>\n						by satopian.<br>\n						<a href="https://www.gnu.org/licenses/" target="_blank" rel="noopener">GNU General Public License</a></br>\n						</p>\n						\n						<a class="chickenpaint-on-github" target="_blank" href="https://github.com/thenickdude/chickenpaint" rel="noopener"><span class="icon-github"></span> ChickenPaint on GitHub</a>\n                            \n                            <p>\n                                ChickenPaint is a translation of <a href="https://github.com/thenickdude/chibipaint" target="_blank" rel="noopener">ChibiPaint</a>\n                                from Java to JavaScript by Nicholas Sherlock / Chicken Smoothie\n                            </p>\n                            <p>\n                                ChibiPaint is Copyright (c) 2006-2008 Marc Schefer. All Rights Reserved\n                            </p>\n                            <p>\n                                ChickenPaint is free software: you can redistribute it and/or modify\n                                it under the terms of the GNU General Public License as published by\n                                the Free Software Foundation, either version 3 of the License, or\n                                (at your option) any later version.\n                            </p>\n        \n                            <p>\n                                ChickenPaint is distributed in the hope that it will be useful,\n                                but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n                                <a target="_blank" href="https://www.gnu.org/licenses/" rel="noopener">GNU General Public License</a> for more details.\n                            </p>\n        \n                            <pre class="pre-scrollable chickenpaint-third-party-licenses">Toolbar icons designed by <a target="_blank" href="https://github.com/Anteira" rel="noopener">Miglena Lapavicheva (Anteira)</a>\n    These icons are dual-licensed under <a target="_blank" href="https://spdx.org/licenses/GPL-3.0-or-later.html" rel="noopener">GPL-3.0-or-later</a> and <a target="_blank" href="https://creativecommons.org/licenses/by/3.0/" rel="noopener">CC-BY-3.0</a>\n\nIncludes icons from the <a target="_blank" href="https://extensions.libreoffice.org/en/extensions/show/tango-icon-theme-for-libreoffice" rel="noopener">Tango Icon Theme for LibreOffice</a>:\n    All artwork is licensed under the Creative Commons Attribution-Share Alike 3.0\n    United States License. To view a copy of this licence, visit\n    https://creativecommons.org/licenses/by-sa/3.0/ or send a letter to Creative\n    Commons, 171 Second Street, Suite 300, San Francisco, California 94105, USA.\n    \n    Credit for icons imported from git://git.gnome.org/gnome-icon-theme or derivatives\n    of these goes to the GNOME project (https://www.gnome.org)\n    Derivatives and new icons were created by Alexander Wilms &lt;f.alexander.wilms@gmail.com> \n    and Miroslav Mazel &lt;mazelm@gmail.com>\n    \nIncludes these MIT-licensed libraries:\n\n    Includes the <a target="_blank" href="https://github.com/eligrey/FileSaver.js" rel="noopener">FileSaver.js library</a>\n    FileSaver.js Copyright Â© 2015 <a target="_blank" href="https://eligrey.com/" rel="noopener">Eli Grey</a>\n\n    Includes the <a target="_blank" href="https://github.com/nodeca/pako" rel="noopener">Pako zlib compression library</a>\n    Copyright (C) 2014-2015 by Vitaly Puzrin\n    \n    Includes the <a target="_blank" href="https://github.com/madrobby/keymaster" rel="noopener">keymaster.js</a> keyboard library\n    Copyright (c) 2011-2013 Thomas Fuchs\n\n    Includes the <a target="_blank" href="https://github.com/stefanpenner/es6-promise" rel="noopener">es6-promise</a> library\n    Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors\n\n    Includes the <a target="_blank" href="https://benalman.com/projects/jquery-throttle-debounce-plugin/" rel="noopener">jQuery throttle-debounce</a> library\n    Copyright (c) 2010 "Cowboy" Ben Alman\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="https://jquery.com/" target="_blank" rel="noopener">jQuery library</a> \nCopyright <a href="https://jquery.com/license/" target="_blank" rel="noopener">OpenJS Foundation and other contributors</a>\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/jquery\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n    \n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="https://github.com/jquery/PEP/" target="_blank" rel="noopener">jQuery PEP library</a>\nCopyright OpenJS Foundation and other contributors, <a href="https://jquery.com/license/" target="_blank" rel="noopener">https://jquery.com/license/</a>\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/PEP\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation \n    files (the "Software"), to deal in the Software without \n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or \n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following \n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND \n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, \n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING \n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR \n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes Font Awesome by Fonticons, Inc. - <a href="https://fontawesome.com/" target="_blank" rel="noopener">https://fontawesome.com/</a>\nIncludes Material Design icons by Google - <a href="https://fonts.google.com/" target="_blank" rel="noopener">https://fonts.google.com/</a>\n                    </pre>\n                </div>\n            </div>\n        </div>\n    ');n[0].addEventListener("hidden.bs.modal",function(t){n.remove()});var a=new bootstrap.Modal(n[0]);e.appendChild(n[0]),this.show=function(){a.show()}}function he(e,n){var a=/*@__PURE__*/t(lA)('<div class="modal fade" tabindex="-1" role="dialog">\n	            <div class="modal-dialog">\n	                <div class="modal-content">\n	                    <div class="modal-header">\n	                        <h5 class="modal-title">'.concat(dc("Complete transform"),'</h5>\n	                        <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n	                        </button>\n	                    </div>\n	                    <div class="modal-body">\n	                        <p>\n							').concat(dc("You need to finish transforming this layer before you can do that. What would you like to do with the transform?"),'\n							</p>\n	                    </div>\n	                    <div class="modal-footer">\n	                        <button type="button" class="btn btn-light" data-bs-dismiss="modal">').concat(dc("Cancel"),'</button>\n	                        <button type="button" class="btn btn-light chickenpaint-reject-transform" data-bs-dismiss="modal">').concat(dc("Undo transform"),'</button>\n	                        <button type="button" class="btn btn-primary chickenpaint-accept-transform" data-bs-dismiss="modal">').concat(dc("Apply transform"),"</button>\n	                    </div>\n	                </div>\n	            </div>\n	        </div>\n	    ")),i=this,r=/*@__PURE__*/t(lA)(".chickenpaint-accept-transform",a),o=/*@__PURE__*/t(lA)(".chickenpaint-reject-transform",a);r.on("click",function(t){n.actionPerformed({action:"CPTransformAccept"}),i.emitEvent("accept")}),o.on("click",function(t){n.actionPerformed({action:"CPTransformReject"}),i.emitEvent("reject")});var s=new bootstrap.Modal(a[0]);this.show=function(){s.show()},a[0].addEventListener("hidden.bs.modal",function(t){a.remove()}),e.addEventListener("keydown",function t(a){"Enter"===a.key&&(s.hide(),n.actionPerformed({action:"CPTransformAccept"}),i.emitEvent("accept"),e.removeEventListener("keydown",t))}),e.appendChild(a[0])}d9.prototype=Object.create(/*@__PURE__*/t(cr).prototype),d9.prototype.constructor=d9,he.prototype=Object.create(/*@__PURE__*/t(cr).prototype),he.prototype.constructor=he;var hn=navigator.userAgent.toLowerCase().includes("mac os")?"â":"Ctrl";function ha(e){var n=/*@__PURE__*/t(lA)('<div class="modal fade chickenpaint-shortcuts-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat(dc("Shortcuts"),'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>\n                                ').concat(dc("Many of the menu options and painting tools have keyboard shortcuts which are written next to them or appear when you hover."),"\n                            </p>\n                            <p>\n                                ").concat(dc("Here are some other shortcuts which are not as obvious!"),'\n                            </p>\n                            <div class="chickenpaint-shortcuts-sections">\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(dc("Color swatches palette"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(dc("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(dc("Use as the drawing color"),'\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(dc("Right"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(dc("Remove or replace a color swatch"),'\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(dc("Line drawing mode"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ').concat(dc("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                   ").concat(dc("Snap line to nearest 45 degrees"),'\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(dc("Painting tools"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">1</span> - <span class="chickenpaint-shortcut-key">9</span> , <span class="chickenpaint-shortcut-key">0</span></span>\n                                                </dt>\n                                                <dd>\n                                                    ').concat(dc("Change brush opacity"),'\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">[</span> , <span class="chickenpaint-shortcut-key">]</span></span>\n                                                </dt>\n                                                <dd>\n                                                    ').concat(dc("Change brush size"),'\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(dc("Brush palette"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(dc("Right"),'</span>\n													<span class="chickenpaint-shortcut-alternate">').concat(dc("or"),'</span>\n													<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ').concat(dc("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(dc("Adjust brush sliders more precisely"),'\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(dc("Drawing canvas"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(dc("Middle"),'</span> <span class="chickenpaint-shortcut-alternate">').concat(dc("or"),'</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Space</span> + <span class="fa icon-mouse-pointer"></span> ').concat(dc("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(dc("Move the canvas around"),'\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">R</span> + <span class="fa icon-mouse-pointer"></span> ').concat(dc("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(dc("Rotate the canvas"),'\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(dc("Right"),'</span> <span class="chickenpaint-shortcut-alternate">').concat(dc("or"),'</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa icon-mouse-pointer"></span> ').concat(dc("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(dc("Sample the color under the cursor"),'\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(dc("Layers palette"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(dc("Double click"),'</span> <span class="chickenpaint-shortcut-alternate">').concat(dc("or"),'</span> <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(dc("Right"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(dc("Rename layer"),'\n                                                </dd>\n                                                <dt>\n												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ').concat(dc("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(dc("Toggle mask enable/disable"),'\n                                                </dd>\n                                                <dt>\n												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa icon-mouse-pointer"></span> ').concat(dc("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(dc("Toggle mask View"),'\n                                                </dd>\n												<dt>\n												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">').concat(hn,'</span> + <span class="fa icon-mouse-pointer"></span> ').concat(dc("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(dc("Apply layer mask"),'\n                                                </dd>\n												<dt>\n												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span></span> +\n												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">').concat(hn,'</span> + <span class="fa icon-mouse-pointer"></span> ').concat(dc("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(dc("Delete layer mask"),"\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            "));n[0].addEventListener("hidden.bs.modal",function(t){n.remove()});var a=new bootstrap.Modal(n[0]);e.appendChild(n[0]),this.show=function(){a.show()}}function hi(e,n){var a=/*@__PURE__*/t(lA)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat(dc("Box blur"),'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <form>\n                                <div class="form-group">\n                                    <label>').concat(dc("Blur amount (pixels)"),'</label>\n                                    <input type="number" class="form-control chickenpaint-blur-amount" value="3">\n                                </div>\n                                <div class="form-group">\n                                    <label>').concat(dc("Iterations (1-8, larger gives smoother blur)"),'</label>\n                                    <input type="number" class="form-control chickenpaint-blur-iterations" value="1" min="1" max="8">\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">').concat(dc("Cancel"),'</button>\n                            <button type="button" class="btn btn-primary chickenpaint-apply-box-blur" data-bs-dismiss="modal">').concat(dc("Ok"),"</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")),i=/*@__PURE__*/t(lA)(".chickenpaint-blur-amount",a),r=/*@__PURE__*/t(lA)(".chickenpaint-blur-iterations",a),o=/*@__PURE__*/t(lA)(".chickenpaint-apply-box-blur",a),s=new bootstrap.Modal(a[0]);this.show=function(){var t=document.getElementById("chickenpaint-main-menu-content");t&&t.classList.contains("show")&&new bootstrap.Collapse(t,{toggle:!1}).hide(),s.show()},o[0].addEventListener("click",function(t){var e=Math.max(parseInt(i.val(),10),1),a=Math.min(Math.max(parseInt(r.val(),10),1),8);n.getArtwork().boxBlur(e,e,a),s.hide()}),a[0].addEventListener("hidden.bs.modal",function(t){a[0].remove()}),a[0].addEventListener("shown.bs.modal",function(t){i[0].focus()}),a[0].addEventListener("keydown",function(t){"Enter"===t.key&&a.hasClass("show")&&(o[0].click(),t.preventDefault())}),e.appendChild(a[0])}function hr(e){var n=/*@__PURE__*/t(lA)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing tablet support</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p class="chickenpaint-tablet-there-are-two-options">\n                                There are two ways you could use your tablet\'s pen pressure support with ChickenPaint.\n                            </p>\n                            <div class="chickenpaint-tablet-support chickenpaint-wacom-support">\n                                <h5>\n                                    Plugin for Wacom tablets\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-firefox"></span>\n                                        Firefox (32-bit only)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-safari"></span>\n                                        Safari\n                                    </div>\n                                        <div class="chickenpaint-supported-browser">\n                                        <span class="icon-opera"></span>\n                                        Opera\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-installed">\n                                    The plugin for Wacom tablets doesn\'t seem to be installed in your browser yet.\n                                </p>\n                                <p class="chickenpaint-not-installed">\n                                    Please make sure that you\'ve installed the latest drivers for your tablet from the \n                                    <a href="http://www.wacom.com/en-us/support/product-support/drivers" target="_blank">Wacom drivers page</a>,\n                                    then restart your browser.\n                                </p>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t support the Wacom tablet plugin, please \n                                    try one of the browsers listed above instead.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    The Wacom tablet plugin is installed and working.\n                                </p>\n                            </div>\n                            <div class="chickenpaint-tablet-support chickenpaint-pointerevents-support">\n                                <h5>\n                                    Built-in support for most tablets.\n                                    <small>macOS, Windows 10 or newer</small>\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n									<div class="chickenpaint-supported-browser">\n									<span class="icon-chrome"></span>\n										Chrome\n									</div>\n									<div class="chickenpaint-supported-browser">\n                                        <span class="icon-edge"></span>\n                                        Edge (Windows 10)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-firefox"></span>\n                                        Firefox (<a href="https://github.com/satopian/ChickenPaint_Be/blob/main/help/Firefox%20pressure%20support.md" target="_blank" rel="noopener">help <i class="fa icon-external-link-alt"></i></a>)\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t have built-in support for drawing tablets, please try\n                                    one of the other browsers listed above.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    Your browser has built-in support for drawing tablets!\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n       '),a=/*@__PURE__*/t(lA)(".chickenpaint-wacom-support",n),i=/*@__PURE__*/t(lA)(".chickenpaint-pointerevents-support",n),r=/*@__PURE__*/t(lA)(".chickenpaint-tablet-there-are-two-options",n),o=dp.getRef().isTabletPresent(),s=!!window.hasNativePointerEvents;a.toggleClass("supported",o),o?(i.hide(),r.hide()):((/Chrome/i.test(navigator.userAgent)&&!/OPR/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent))&&a.addClass("not-supported"),s&&(a.hide(),r.hide())),i.toggleClass("supported",s),i.toggleClass("not-supported",!s),n[0].addEventListener("hidden.bs.modal",function(t){n.remove()});var l=new bootstrap.Modal(n[0]);e.appendChild(n[0]),this.show=function(){l.show()}}function ho(e,n){var a=/*@__PURE__*/t(lA)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat(dc("Grid options"),'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <form>\n                                <div class="form-group">\n                                    <label>').concat(dc("Grid size"),'</label>\n                                    <input type="number" class="form-control chickenpaint-grid-size" value="" autofocus>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">').concat(dc("Cancel"),'</button>\n                            <button type="button" class="btn btn-primary chickenpaint-apply-grid-settings" data-bs-dismiss="modal">').concat(dc("Ok"),"</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")),i=/*@__PURE__*/t(lA)(".chickenpaint-grid-size",a),r=/*@__PURE__*/t(lA)(".chickenpaint-apply-grid-settings",a),o=new bootstrap.Modal(a[0]);this.show=function(){var t=document.getElementById("chickenpaint-main-menu-content");t&&t.classList.contains("show")&&new bootstrap.Collapse(t,{toggle:!1}).hide(),o.show()},i.val(n.getGridSize()),a[0].addEventListener("hidden.bs.modal",function(t){a[0].remove()}),r[0].addEventListener("click",function(t){var e=parseInt(i.val(),10);n.setGridSize(e),bootstrap.Modal.getInstance(a[0]).hide()}),a[0].addEventListener("shown.bs.modal",function(t){i[0].focus()}),a[0].addEventListener("keydown",function(t){"Enter"===t.key&&(t.preventDefault(),r[0].click())}),e.appendChild(a[0])}function hs(e,n,a){var i=/*@__PURE__*/t(lA)('<div class="modal fade chickenpaint-send-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content" data-stage="saving">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat(dc("Saving drawing..."),'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p class="chickenpaint-saving-progress-message">').concat(dc("Preparing your drawing to be saved, please wait..."),'</p>\n                            <pre class="chickenpaint-saving-error-message pre-scrollable"></pre>\n                            <div class="progress">\n                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>\n                            </div>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light chickenpaint-send-cancel" data-bs-dismiss="modal">').concat(dc("Cancel"),'</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-not-previously-posted" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">').concat(dc("Drawing saved!"),'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>').concat(dc("Your drawing has been saved, would you like to post it to the forum now?"),'</p>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-bs-dismiss="modal">').concat(dc("Yes, post it now"),'</button>\n                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-bs-dismiss="modal">').concat(dc("No, keep drawing"),'</button>\n                            <button type="button" class="btn btn-light chickenpaint-exit" data-bs-dismiss="modal">').concat(dc("No, quit and I'll finish it later"),'</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-already-posted" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing saved!</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>').concat(dc("Your drawing has been saved, would you like to view it on the forum now?"),'</p>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-bs-dismiss="modal">').concat(dc("Yes, view the post"),'</button>\n                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-bs-dismiss="modal">').concat(dc("No, keep drawing"),'</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-redirect" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing saved!</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>').concat(dc("Your drawing has been saved, redirecting you to view your new post now..."),"</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")),r=/*@__PURE__*/t(lA)(".chickenpaint-saving-progress-message",i),o=/*@__PURE__*/t(lA)(".chickenpaint-saving-error-message",i),s=/*@__PURE__*/t(lA)(".progress-bar",i),l=this;a.on("savingProgress",function(e,n){e*=100,r.text(n),/*@__PURE__*/t(lA)(s).attr("aria-valuenow",e).css("width",e+"%")}),a.on("savingComplete",function(){/*@__PURE__*/t(lA)(".modal-content[data-stage='saving']",i).hide(),e.isActionSupported("CPContinue")?e.isActionSupported("CPExit")?/*@__PURE__*/t(lA)(".modal-content[data-stage='success-not-previously-posted']",i).show():/*@__PURE__*/t(lA)(".modal-content[data-stage='success-already-posted']",i).show():/*@__PURE__*/t(lA)(".modal-content[data-stage='success-redirect']",i).show()}),a.on("savingFailure",function(t){s.addClass("progress-bar-danger");var e=dc("Sorry, your drawing could not be saved, please try again later.");t&&((t=t.replace(/^CHIBIERROR\s*/,"")).length>0&&(e+="<br><br>".concat(dc("The error returned from the server was"),":"),o.text(t).show()),r.html(e))}),/*@__PURE__*/t(lA)(".chickenpaint-post-drawing",i).on("click",function(){e.actionPerformed({action:"CPPost"})}),/*@__PURE__*/t(lA)(".chickenpaint-exit",i).toggle(e.isActionSupported("CPExit")).on("click",function(){alert("When you want to come back and finish your drawing, just click the 'new drawing' button again and you can choose to continue this drawing."),e.actionPerformed({action:"CPExit"})}),/*@__PURE__*/t(lA)(".chickenpaint-send-cancel",i).on("click",function(){a.cancel()}),i[0].addEventListener("hidden.bs.modal",function(t){i.remove()}),i.appendTo(n);var c=new bootstrap.Modal(i[0]);this.show=function(){c.show(),l.emitEvent("shown")}}hs.prototype=Object.create(/*@__PURE__*/t(cr).prototype),hs.prototype.constructor=hs;var hl={toolbarStyle:"new"},hc="chickenpaint-prefs",hu=/*#__PURE__*/function(t){lH(n,t);var e=lK(n);function n(){var t;return lR(this,n),lW(lM(t=e.call(this)),"toolbarStyle",void 0),t.setDefaults(),t}return lI(n,[{key:"setDefaults",value:function(){for(var t in hl)hl.hasOwnProperty(t)&&this.set(t,hl[t])}},{key:"load",value:function(){var t={};try{t=JSON.parse(localStorage.getItem(hc))}catch(t){console.error(t)}for(var e in t&&"object"==typeof t||(t={}),hl)if(hl.hasOwnProperty(e))try{this.set(e,t.hasOwnProperty(e)?t[e]:hl[e])}catch(t){console.error(t)}}},{key:"save",value:function(){try{var t=!1;for(var e in hl)if(hl.hasOwnProperty(e)&&this[e]!=hl[e]){t=!0;break}t?localStorage.setItem(hc,JSON.stringify({toolbarStyle:this.toolbarStyle})):localStorage.removeItem(hc)}catch(t){console.error(t)}}},{key:"set",value:function(t,e){this[t]=e,this.emitEvent(t,[e])}},{key:"get",value:function(t){return this[t]}}]),n}(/*@__PURE__*/t(cr));window.PointerEvent&&(window.hasNativePointerEvents=!0);function hd(e){var n=this;!function(){try{if("undefined"!=typeof navigator){var t=navigator.languages;Array.isArray(t)||(t=[t]);var e=!0,n=!1,a=void 0;try{for(var i,r=t[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value,s=/^(..)([-_].+)?$/.exec(o);if(s){if(s[1]=s[1].toLowerCase(),s[1]in di){dl(o);return}if("en"===s[1]){dl("en");return}}}}catch(t){n=!0,a=t}finally{try{e||null==r.return||r.return()}finally{if(n)throw a}}}}catch(t){console.error(t)}}(),e.language&&dl(e.language);var a=e.uiElem;document.addEventListener("keydown",function(t){((t.ctrlKey||t.metaKey)&&["+",";","=","-","s","h","r","o"].includes(t.key.toLowerCase())||"Enter"===t.key)&&t.preventDefault()}),a.addEventListener("contextmenu",function(t){t.preventDefault(),t.stopPropagation()},{passive:!1});var i,r,o,s,l,c=this,u=new cd(0),d=255,h=hd.COLOR_MODE_RGB,f=hd.T_PENCIL,p=hd.M_DRAW,v=p,m=[0xff000000,0xffffffff],g=!1,y=!1,b=((i=Array(hd.T_MAX))[hd.T_PENCIL]=new lZ({toolNb:hd.T_PENCIL,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:lZ.TIP_ROUND_AA,brushMode:lZ.BRUSH_MODE_PAINT,paintMode:lZ.PAINT_MODE_OPACITY}),i[hd.T_ERASER]=new lZ({toolNb:hd.T_ERASER,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!1,tip:lZ.TIP_ROUND_AA,brushMode:lZ.BRUSH_MODE_ERASE,paintMode:lZ.PAINT_MODE_OPACITY}),i[hd.T_PEN]=new lZ({toolNb:hd.T_PEN,size:2,alpha:128,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!0,pressureAlpha:!1,tip:lZ.TIP_ROUND_AA,brushMode:lZ.BRUSH_MODE_PAINT,paintMode:lZ.PAINT_MODE_FLOW,alphaScale:.5}),i[hd.T_SOFTERASER]=new lZ({toolNb:hd.T_SOFTERASER,size:16,alpha:64,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:lZ.TIP_ROUND_AIRBRUSH,brushMode:lZ.BRUSH_MODE_ERASE,paintMode:lZ.PAINT_MODE_FLOW,alphaScale:1/8}),i[hd.T_AIRBRUSH]=new lZ({toolNb:hd.T_AIRBRUSH,size:50,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:lZ.TIP_ROUND_AIRBRUSH,brushMode:lZ.BRUSH_MODE_PAINT,paintMode:lZ.PAINT_MODE_FLOW,alphaScale:1/8}),i[hd.T_DODGE]=new lZ({toolNb:hd.T_DODGE,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:lZ.TIP_ROUND_AIRBRUSH,brushMode:lZ.BRUSH_MODE_DODGE,paintMode:lZ.PAINT_MODE_FLOW,alphaScale:1/8}),i[hd.T_BURN]=new lZ({toolNb:hd.T_BURN,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:lZ.TIP_ROUND_AIRBRUSH,brushMode:lZ.BRUSH_MODE_BURN,paintMode:lZ.PAINT_MODE_FLOW,alphaScale:1/8}),i[hd.T_WATER]=new lZ({toolNb:hd.T_WATER,size:30,alpha:70,isAA:!1,minSpacing:.5,spacing:.02,pressureSize:!1,pressureAlpha:!0,tip:lZ.TIP_ROUND_AA,brushMode:lZ.BRUSH_MODE_WATER,paintMode:lZ.PAINT_MODE_FLOW,alphaScale:1/8,resat:.3,bleed:.6}),i[hd.T_BLUR]=new lZ({toolNb:hd.T_BLUR,size:20,alpha:255,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:lZ.TIP_ROUND_PIXEL,brushMode:lZ.BRUSH_MODE_BLUR,paintMode:lZ.PAINT_MODE_FLOW,alphaScale:1/8}),i[hd.T_SMUDGE]=new lZ({toolNb:hd.T_SMUDGE,size:20,alpha:128,isAA:!1,minSpacing:.5,spacing:.01,pressureSize:!1,pressureAlpha:!0,tip:lZ.TIP_ROUND_AIRBRUSH,brushMode:lZ.BRUSH_MODE_SMUDGE,paintMode:lZ.PAINT_MODE_FLOW,alphaScale:1/8,resat:0,bleed:1}),i[hd.T_BLENDER]=new lZ({toolNb:hd.T_BLENDER,size:20,alpha:60,isAA:!1,minSpacing:.5,spacing:.1,pressureSize:!1,pressureAlpha:!0,tip:lZ.TIP_ROUND_AIRBRUSH,brushMode:lZ.BRUSH_MODE_OIL,paintMode:lZ.PAINT_MODE_FLOW,alphaScale:1/8,resat:0,bleed:.07}),i),w=new hu,_={CPFullScreen:{action:function(){c.setFullScreen(!y)},isSupported:function(){return!("disable"===e.fullScreenMode||"force"===e.fullScreenMode||!1===e.allowFullScreen)},modifies:{gui:!0}},CPZoomIn:{action:function(){r.zoomIn()},modifies:{gui:!0}},CPZoomOut:{action:function(){r.zoomOut()},modifies:{gui:!0}},CPZoom100:{action:function(){r.zoom100()},modifies:{gui:!0}},CPToolbarStyle:{action:function(){c.setToolbarStyle("new"===w.toolbarStyle?"old":"new")},modifies:{gui:!0}},CPUndo:{action:function(){c.artwork.undo()},modifies:{document:!0},allowed:"isUndoAllowed"},CPRedo:{action:function(){c.artwork.redo()},modifies:{document:!0},allowed:"isRedoAllowed"},CPClearHistory:{action:function(){confirm(dc("You're about to clear the current Undo/Redo history.\nThis operation cannot be undone, are you sure you want to do that?"))&&c.artwork.clearHistory()},modifies:{document:!0}},CPPencil:new k(hd.T_PENCIL),CPPen:new k(hd.T_PEN),CPEraser:new k(hd.T_ERASER),CPSoftEraser:new k(hd.T_SOFTERASER),CPAirbrush:new k(hd.T_AIRBRUSH),CPDodge:new k(hd.T_DODGE),CPBurn:new k(hd.T_BURN),CPWater:new k(hd.T_WATER),CPBlur:new k(hd.T_BLUR),CPSmudge:new k(hd.T_SMUDGE),CPBlender:new k(hd.T_BLENDER),CPFloodFill:new T(hd.M_FLOODFILL),CPGradientFill:new T(hd.M_GRADIENTFILL),CPRectSelection:new T(hd.M_RECT_SELECTION),CPMoveTool:new T(hd.M_MOVE_TOOL),CPRotateCanvas:new T(hd.M_ROTATE_CANVAS),CPPanCanvas:new T(hd.M_PAN_CANVAS),CPColorPicker:new T(hd.M_COLOR_PICKER),CPTransform:{action:function(){var t=c.artwork.getActiveLayer();null==c.artwork.transformAffineBegin()?c.showLayerNotification(t,dc("Whoops! All of the selected pixels are transparent!"),"layer"):P(hd.M_TRANSFORM)},modifies:{mode:!0},allowed:function(){var t=c.artwork.getActiveLayer();if(t.visible){if(0==t.alpha)c.showLayerNotification(t,dc("Whoops! This layer's opacity is currently 0%"),"opacity");else{if(null!=c.artwork.transformAffineBegin())return 0!=t.getEffectiveAlpha();c.showLayerNotification(t,dc("Whoops! All of the selected pixels are transparent!"),"layer")}}else c.showLayerNotification(t,dc("Whoops! This layer is currently hidden"),"layer")}},CPTransformAccept:{action:function(){p==hd.M_TRANSFORM&&(c.artwork.transformAffineFinish(),P(v))},modifies:{mode:!0}},CPTransformReject:{action:function(){p==hd.M_TRANSFORM&&(c.artwork.transformAffineAbort(),P(v))},modifies:{document:!0,mode:!0}},CPFreeHand:{action:function(){b[f].strokeMode=lZ.STROKE_MODE_FREEHAND,O()},modifies:{tool:!0}},CPLine:{action:function(){b[f].strokeMode=lZ.STROKE_MODE_LINE,O()},modifies:{tool:!0}},CPBezier:{action:function(){b[f].strokeMode=lZ.STROKE_MODE_BEZIER,O()},modifies:{tool:!0}},CPAbout:{action:function(){new ht(a).show()},modifies:{}},CPShortcuts:{action:function(){new ha(a).show()},modifies:{}},CPTabletSupport:{action:function(){new hr(a).show()},modifies:{}},CPLayerDuplicate:{action:function(){c.artwork.duplicateLayer()},modifies:{document:!0}},CPLayerMergeDown:{action:function(){c.artwork.mergeDown()},modifies:{document:!0},allowed:"isMergeDownAllowed"},CPGroupMerge:{action:function(){c.artwork.mergeGroup()},modifies:{document:!0},allowed:"isMergeGroupAllowed"},CPLayerMergeAll:{action:function(){c.artwork.mergeAllLayers()},modifies:{document:!0},allowed:"isMergeAllLayersAllowed"},CPExpandLayerGroup:{action:function(t){c.artwork.expandLayerGroup(t.group,t.expand)},modifies:{document:!0}},CPFill:{action:function(){c.artwork.fill(0xff000000|c.getCurColor().getRgb())},modifies:{document:!0},requiresDrawable:!0},CPClear:{action:function(){c.artwork.clear()},modifies:{document:!0},requiresDrawable:!0},CPSelectAll:{action:function(){c.artwork.rectangleSelection(c.artwork.getBounds()),r.repaintAll()},modifies:{document:!0}},CPDeselectAll:{action:function(){c.artwork.rectangleSelection(new l$(0,0,0,0)),r.repaintAll()},modifies:{document:!0}},CPHFlip:{action:function(){c.artwork.hFlip()},modifies:{document:!0},requiresDrawable:!0},CPVFlip:{action:function(){c.artwork.vFlip()},modifies:{document:!0},requiresDrawable:!0},CPMNoise:{action:function(){c.artwork.monochromaticNoise()},modifies:{document:!0},requiresDrawable:!0},CPCNoise:{action:function(){c.artwork.colorNoise()},modifies:{document:!0},allowed:"isColorNoiseAllowed"},CPFXBoxBlur:{action:function(){s||(s=new hi(a,c)),s.show()},modifies:{document:!0},requiresDrawable:!0},CPFXInvert:{action:function(){c.artwork.invert()},modifies:{document:!0},requiresDrawable:!0},CPCut:{action:function(){c.artwork.cutSelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCutSelectionAllowed"},CPCopy:{action:function(){c.artwork.copySelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCopySelectionAllowed"},CPCopyMerged:{action:function(){c.artwork.copySelectionMerged()},modifies:{document:!0},allowed:"isCopySelectionMergedAllowed"},CPPaste:{action:function(){c.artwork.pasteClipboard()},modifies:{document:!0},allowed:"isPasteClipboardAllowed"},CPToggleGrid:{action:function(t){r.showGrid(t.selected)},modifies:{gui:!0}},CPGridOptions:{action:function(){l||(l=new ho(a,r)),l.show()},modifies:{gui:!0}},CPLinearInterpolation:{action:function(t){r.setInterpolation(t.selected)},modifies:{gui:!0},isSupported:function(){return cv()}},CPResetCanvasRotation:{action:function(){r.resetRotation()},modifies:{gui:!0}},CPAddLayer:{action:function(){c.artwork.addLayer("layer")},modifies:{document:!0}},CPAddGroup:{action:function(){c.artwork.addLayer("group")},modifies:{document:!0}},CPAddLayerMask:{action:function(){c.artwork.addLayerMask()},modifies:{document:!0},allowed:"isAddLayerMaskAllowed"},CPApplyLayerMask:{action:function(){c.artwork.applyLayerMask(!0)},modifies:{document:!0},allowed:"isApplyLayerMaskAllowed"},CPRemoveLayerMask:{action:function(){c.artwork.removeLayerMask(!1)},modifies:{document:!0},allowed:"isRemoveLayerMaskAllowed"},CPRemoveLayer:{action:function(){c.artwork.removeLayer()||alert(dc("Sorry, you can't remove the last remaining layer in the drawing."))},modifies:{document:!0},allowed:"isRemoveLayerAllowed"},CPCreateClippingMask:{action:function(){c.artwork.createClippingMask()},modifies:{document:!0},allowed:"isCreateClippingMaskAllowed"},CPReleaseClippingMask:{action:function(){c.artwork.releaseClippingMask()},modifies:{document:!0},allowed:"isReleaseClippingMaskAllowed"},CPRelocateLayer:{action:function(t){c.artwork.relocateLayer(t.layer,t.toGroup,t.toIndex)},modifies:{document:!0}},CPSetActiveLayer:{action:function(t){t.mask&&t.layer.mask&&!t.layer.maskVisible&&c.artwork.setLayerMaskVisible(t.layer,!0),c.artwork.setActiveLayer(t.layer,t.mask),c.artwork.performIdleTasks()},modifies:{document:!0}},CPToggleMaskView:{action:function(){var t=c.artwork.toggleMaskView();t&&c.emitEvent("maskViewOpened",[t])},modifies:{gui:!0}},CPSetMaskVisible:{action:function(t){c.artwork.setLayerMaskVisible(t.layer,t.visible)},modifies:{layerProp:!0}},CPSetLayerVisibility:{action:function(t){c.artwork.setLayerVisibility(t.layer,t.visible)},modifies:{layerProp:!0}},CPSetLayerName:{action:function(t){c.artwork.setLayerName(t.layer,t.name)},modifies:{layerProp:!0}},CPSetLayerBlendMode:{action:function(t){c.artwork.setLayerBlendMode(t.blendMode)},modifies:{layerProp:!0}},CPSetLayerAlpha:{action:function(t){c.artwork.setLayerAlpha(t.alpha)},modifies:{layerProp:!0}},CPSetLayerLockAlpha:{action:function(t){c.artwork.setLayerLockAlpha(t.lock)},modifies:{layerProp:!0}},CPPalColor:new E("color"),CPPalBrush:new E("brush"),CPPalLayers:new E("layers"),CPPalStroke:new E("stroke"),CPPalSwatches:new E("swatches"),CPPalTool:new E("tool"),CPPalMisc:new E("misc"),CPPalTextures:new E("textures"),CPTogglePalettes:{action:function(){o.togglePalettes()},modifies:{gui:!0}},CPArrangePalettes:{action:function(){o.arrangePalettes()},modifies:{gui:!0}},CPSave:{action:function(){var t;(t=new du({artwork:c.getArtwork(),rotation:r.getRotation90(),swatches:o.getSwatches()})).on("savingComplete",function(){c.artwork.setHasUnsavedChanges(!1)}),t.on("savingFailure",function(){alert(dc("Sorry, your drawing could not be saved, please try again later."))}),t.save()},isSupported:function(){return!1!==e.allowDownload},modifies:{document:!0}},CPSend:{action:function(){!function(){if(c.isActionSupported("CPContinue")||confirm(dc("Are you sure you want to send your drawing to the server and finish drawing now?"))){var t=new du({artwork:c.getArtwork(),rotation:r.getRotation90(),swatches:o.getSwatches(),url:e.saveUrl}),n=new hs(c,a,t);t.on("savingComplete",function(){c.artwork.setHasUnsavedChanges(!1),!c.isActionSupported("CPContinue")&&c.isActionSupported("CPPost")&&c.actionPerformed({action:"CPPost"})}),t.on("savingFailure",function(){alert(dc("Sorry, your drawing could not be saved, please try again later."))}),n.on("shown",function(){t.save()}),n.show()}}()},isSupported:function(){return!!e.saveUrl},modifies:{document:!0}},CPPost:{action:function(){if("function"==typeof handleExit)return handleExit();window.location=e.postUrl},isSupported:function(){return!!e.postUrl},modifies:{document:!0}},CPContinue:{action:function(){},isSupported:function(){return!!e.allowMultipleSends}},CPExit:{action:function(){window.location=e.exitUrl},isSupported:function(){return!!e.exitUrl},modifies:{}}};function E(t){this.palName=t}function k(t){this.toolNum=t}function T(t){this.modeNum=t}function x(t){var e;switch(h=t==cR.EDITING_MODE_IMAGE?hd.COLOR_MODE_RGB:hd.COLOR_MODE_GREYSCALE,c.emitEvent("colorModeChange",[t==cR.EDITING_MODE_IMAGE?"rgb":"greyscale"]),h){case hd.COLOR_MODE_RGB:e=u.clone();break;case hd.COLOR_MODE_GREYSCALE:e=new cd(cd.greyToRGB(d))}c.artwork.setForegroundColor(e.getRgb()),c.emitEvent("colorChange",[e])}function O(){c.emitEvent("toolChange",[f,b[f]])}function P(t){p!=t&&(t==hd.M_TRANSFORM&&(v=p),p=t,c.emitEvent("modeChange",[p]))}function S(t){P(hd.M_DRAW),f=t,c.artwork.setBrush(b[t]),O()}function L(n,i){a&&(a.addEventListener("dblclick",function(t){t.preventDefault(),t.stopPropagation()}),c.artwork.on("editModeChanged",x),o=new d9(c,a),c.emitEvent("fullScreen",[y]),c.emitEvent("smallScreen",[g]),w.load(),S(hd.T_PEN),o.arrangePalettes(),n&&o.setSwatches(n),i&&o.setRotation90(i),dp.getRef().detectTablet(),function(t){var e=t in window;if(!e){var n=document.createElement("div");n.setAttribute(t,"return;"),e="function"==typeof n[t]}return e}("onbeforeunload")?window.addEventListener("beforeunload",function(t){if(c.artwork.getHasUnsavedChanges())return t.preventDefault(),"Your drawing has unsaved changes!"}):/*@__PURE__*/t(lA)("a").on("click",function(t){if("#"!=this.getAttribute("href")&&c.artwork.getHasUnsavedChanges())return confirm("Your drawing has unsaved changes! Are you sure to want to navigate away?")}),c.artwork.on("unsavedChanges",function(t){e.allowMultipleSends&&c.emitEvent("unsavedChanges",[t])}))}switch(E.prototype.action=function(t){o.showPalette(this.palName,t.selected)},E.prototype.modifies={gui:!0},k.prototype.action=function(){S(this.toolNum)},k.prototype.modifies={mode:!0,tool:!0},k.prototype.requiresDrawable=!0,T.prototype.action=function(){P(this.modeNum)},T.prototype.modifies={mode:!0},this.callToolListeners=function(){O()},this.getArtwork=function(){return this.artwork},this.setCanvas=function(t){r=t},this.setTransformInterpolation=function(t){this.artwork.setTransformInterpolation(t)},this.setCurColor=function(t){switch(h){case hd.COLOR_MODE_RGB:u.isEqual(t)||(u.copyFrom(t),this.artwork.setForegroundColor(t.getRgb()),this.emitEvent("colorChange",[t]));break;case hd.COLOR_MODE_GREYSCALE:var e=t.getValue();if(d!=e){var n=cd.greyToRGB(e);this.artwork.setForegroundColor(n),d=e,this.emitEvent("colorChange",[new cd(n)])}}},this.getCurColor=function(){switch(h){case hd.COLOR_MODE_RGB:return u.clone();case hd.COLOR_MODE_GREYSCALE:return new cd(cd.greyToRGB(d))}},this.setCurGradient=function(t){m=t.slice(0),this.emitEvent("gradientChange",[m])},this.getCurGradient=function(){return m.slice(0)},this.setBrushSize=function(t){b[f].size=Math.max(1,Math.min(200,t)),O()},this.getBrushSize=function(){return b[f].size},this.setAlpha=function(t){b[f].alpha=t,O()},this.getAlpha=function(){return b[f].alpha},this.getCurMode=function(){return p},this.getCurTool=function(){return f},this.getBrushInfo=function(){return b[f]},this.isActionSupported=function(t){if(_[t]){var e=ty(_[t].isSupported);return"function"==e?_[t].isSupported():"undefined"==e||_[t].isSupported}return!1},this.isActionAllowed=function(t){var e=_[t];return!!e&&("function"==typeof e.allowed?e.allowed():"string"==typeof e.allowed?this.artwork[e.allowed]():!e.requiresDrawable||this.artwork.isActiveLayerDrawable())},this.showLayerNotification=function(t,e,n){this.emitEvent("layerNotification",[t,e,n])},this.actionPerformed=function(t){if(null!=this.artwork&&null!=r){var e=_[t.action];if(e){if(p==hd.M_TRANSFORM&&(e.modifies.document||e.modifies.mode)&&-1==["CPTransformAccept","CPTransformReject"].indexOf(t.action)){if("CPUndo"==t.action)_.CPTransformReject.action();else if("CPTransform"==t.action);else{var n=new he(a,this);n.on("accept",this.actionPerformed.bind(this,t)),n.on("reject",this.actionPerformed.bind(this,t)),n.show()}}else e.action(t)}}},this.setSmallScreenMode=function(e){g!==e&&(g=e,/*@__PURE__*/t(lA)(a).toggleClass("chickenpaint-small-screen",g),c.emitEvent("smallScreen",[g]))},this.getSmallScreenMode=function(){return g},this.setFullScreen=function(e){y!==e&&(y=e,/*@__PURE__*/t(lA)("body").toggleClass("chickenpaint-full-screen",y),/*@__PURE__*/t(lA)(a).toggleClass("chickenpaint-full-screen",y),y&&0===/*@__PURE__*/t(lA)("head meta[name=viewport]").length?(/*@__PURE__*/t(lA)("head").append('<meta name="viewport" content="width=device-width,user-scalable=no">'),setTimeout(function(){return c.emitEvent("fullScreen",[y])},200)):c.emitEvent("fullScreen",[y]))},this.isFullScreen=function(){return y},this.setToolbarStyle=function(t){w.set("toolbarStyle",t),w.save()},this.getToolbarStyle=function(){return w.get("toolbarStyle")},this.getResourcesRoot=function(){return e.resourcesRoot},!function(){if(!((t=lJ(0,0)).getContext&&t.getContext("2d")&&"Uint8Array"in window))throw new hd.UnsupportedBrowserException;var t,e=(-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("iPod")||-1!=navigator.userAgent.indexOf("iPhone"))&&-1!=navigator.userAgent.indexOf(" OS 8_0 "),n=-1==navigator.userAgent.indexOf("CriOS")&&-1!=navigator.userAgent.indexOf("Safari");if(e&&n)throw new hd.UnsupportedBrowserException("You are using Safari 8.0.0, which is unable to upload drawings. That bug was fixed in the iOS 8.0.2 update, or in Chrome for iOS.")}(),a&&(("string"!=typeof document.body.style.flexBasis&&"string"!=typeof document.body.style.msFlexDirection||/Presto/.test(navigator.userAgent))&&(a.className+=" no-flexbox"),a.className+=" chickenpaint chickenpaint-lang-"+ds),e.resourcesRoot=e.resourcesRoot||"chickenpaint/",e.disableBootstrapAPI&&/*@__PURE__*/t(lA)(document).off(".data-api"),this.setSmallScreenMode(!!("number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&(window.screen.width<=820||window.screen.height<=820))),e.fullScreenMode){case"force":this.setFullScreen(!0);break;case"auto":this.setFullScreen(g)}if(w.on("toolbarStyle",function(t){return n.emitEvent("toolbarStyleChange",[t])}),e.loadImageUrl||e.loadChibiFileUrl){var A=new de(e);new dd(a,A,e.resourcesRoot),A.on("loadingComplete",function(t){c.artwork=t.layers||t.flat,L(t.swatches,e.rotation),e.onLoaded&&e.onLoaded(this)}),A.load()}else e.artwork?this.artwork=e.artwork:(this.artwork=new cR(e.canvasWidth||800,e.canvasHeight||600),this.artwork.addBackgroundLayer(),this.artwork.addDefaultLayer()),L(),e.onLoaded&&e.onLoaded(this)}(function(){var t,e,n,a,i=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],r=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function o(t,e){e=e||Object.create(null);var n=document.createEvent("Event");n.initEvent(t,e.bubbles||!1,e.cancelable||!1);for(var a,o=2;o<i.length;o++)n[a=i[o]]=e[a]||r[o];n.buttons=e.buttons||0;var s=0;return s=e.pressure&&n.buttons?e.pressure:n.buttons?.5:0,n.x=n.clientX,n.y=n.clientY,n.pointerId=e.pointerId||0,n.width=e.width||0,n.height=e.height||0,n.pressure=s,n.tiltX=e.tiltX||0,n.tiltY=e.tiltY||0,n.twist=e.twist||0,n.tangentialPressure=e.tangentialPressure||0,n.pointerType=e.pointerType||"",n.hwTimestamp=e.hwTimestamp||0,n.isPrimary=e.isPrimary||!1,n}var s=window.Map&&window.Map.prototype.forEach?Map:l;function l(){this.array=[],this.size=0}l.prototype={set:function(t,e){if(void 0===e)return this.delete(t);!this.has(t)&&this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(n,a){t.call(e,n,a,this)},this)}};var c=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],u=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],d={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},h="undefined"!=typeof SVGElementInstance,f={pointermap:new s,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var n=e.events;n&&(n.forEach(function(t){e[t]&&(this.eventMap[t]=e[t].bind(e))},this),this.eventSources[t]=e,this.eventSourceList.push(e))},register:function(t){for(var e,n=this.eventSourceList.length,a=0;a<n&&(e=this.eventSourceList[a]);a++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,a=0;a<n&&(e=this.eventSourceList[a]);a++)e.unregister.call(e,t)},contains:function(t,e){try{return t.contains(e)}catch(t){return!1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1)},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0)},eventHandler:function(t){if(!t._handledByPE){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),t._handledByPE=!0}},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var n=new o(t,e);return e.preventDefault&&(n.preventDefault=e.preventDefault),n._target=n._target||e.target,n},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,n=Object.create(null),a=0;a<c.length;a++)n[e=c[a]]=t[e]||u[a],h&&("target"===e||"relatedTarget"===e)&&n[e]instanceof SVGElementInstance&&(n[e]=n[e].correspondingUseElement);return t.preventDefault&&(n.preventDefault=function(){t.preventDefault()}),n},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in d?void 0:e:t._target},propagate:function(t,e,n){for(var a=t.target,i=[];a!==document&&!a.contains(t.relatedTarget);)if(i.push(a),!(a=a.parentNode))return;n&&i.reverse(),i.forEach(function(n){t.target=n,e.call(this,t)},this)},setCapture:function(t,e,n){this.captureInfo[t]&&this.releaseCapture(t,n),this.captureInfo[t]=e,this.implicitRelease=this.releaseCapture.bind(this,t,n),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var a=new o("gotpointercapture");a.pointerId=t,a._target=e,n||this.asyncDispatchEvent(a)},releaseCapture:function(t,e){var n=this.captureInfo[t];if(n){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var a=new o("lostpointercapture");a.pointerId=t,a._target=n,e||this.asyncDispatchEvent(a)}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t))}};f.boundHandler=f.eventHandler.bind(f);var p={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&!!t.elementFromPoint},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var a,i,r=t.elementFromPoint(e,n);for(i=this.targetingShadow(r);i;){if(a=i.elementFromPoint(e,n)){var o=this.targetingShadow(a);return this.searchRoot(o,e,n)||a}i=this.olderShadow(i)}return r}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,n=t.clientY,a=this.owner(t.target);return a.elementFromPoint(e,n)||(a=document),this.searchRoot(a,e,n)}},v=Array.prototype.forEach.call.bind(Array.prototype.forEach),m=Array.prototype.map.call.bind(Array.prototype.map),g=Array.prototype.slice.call.bind(Array.prototype.slice),y=Array.prototype.filter.call.bind(Array.prototype.filter),b=window.MutationObserver||window.WebKitMutationObserver,w={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function _(t,e,n,a){this.addCallback=t.bind(a),this.removeCallback=e.bind(a),this.changedCallback=n.bind(a),b&&(this.observer=new b(this.mutationWatcher.bind(this)))}function E(t){return"body /shadow-deep/ "+k(t)}function k(t){return'[touch-action="'+t+'"]'}function T(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}_.prototype={watchSubtree:function(t){this.observer&&p.canTarget(t)&&this.observer.observe(t,w)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){v(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll("[touch-action]"):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(g(e))},installOnLoad:function(){document.addEventListener("readystatechange",(function(){"complete"===document.readyState&&this.installNewSubtree(document)}).bind(this))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=m(t,this.findElements,this);return e.push(y(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){"childList"===t.type?(this.flattenMutationTree(t.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(t.removedNodes).forEach(this.removeElement,this)):"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}};var x=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],O="",P=window.PointerEvent||window.MSPointerEvent,S=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,L=f.pointermap,A=[1,4,2,8,16],C=!1;try{C=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var M={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){f.listen(t,this.events)},unregister:function(t){f.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,a=t.clientX,i=t.clientY,r=0,o=n.length;r<o&&(e=n[r]);r++){var s=Math.abs(a-e.x),l=Math.abs(i-e.y);if(s<=25&&l<=25)return!0}},prepareEvent:function(t){var e=f.cloneEvent(t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n()},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,e},prepareButtonsForMove:function(t,e){var n=L.get(this.POINTER_ID);0!==e.which&&n?t.buttons=n.buttons:t.buttons=0,e.buttons=t.buttons},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=L.get(this.POINTER_ID),n=this.prepareEvent(t);C||(n.buttons=A[n.button],e&&(n.buttons|=e.buttons),t.buttons=n.buttons),L.set(this.POINTER_ID,t),e&&0!==e.buttons?f.move(n):f.down(n)}},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,L.set(this.POINTER_ID,t),f.move(e)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=L.get(this.POINTER_ID),n=this.prepareEvent(t);if(!C){var a=A[n.button];n.buttons=e?e.buttons&~a:0,t.buttons=n.buttons}L.set(this.POINTER_ID,t),n.buttons&=~A[n.button],0===n.buttons?f.up(n):f.move(n)}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,L.set(this.POINTER_ID,t),f.enterOver(e)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,f.leaveOut(e)}},cancel:function(t){var e=this.prepareEvent(t);f.cancel(e),this.deactivateMouse()},deactivateMouse:function(){L.delete(this.POINTER_ID)}},R=f.captureInfo,B=p.findTarget.bind(p),I=p.allShadows.bind(p),F=f.pointermap,D="touch-action",N={events:["touchstart","touchmove","touchend","touchcancel"],register:function(e){t.enableOnSubtree(e)},unregister:function(){},elementAdded:function(t){var e=t.getAttribute(D),n=this.touchActionToScrollType(e);n&&(t._scrollType=n,f.listen(t,this.events),I(t).forEach(function(t){t._scrollType=n,f.listen(t,this.events)},this))},elementRemoved:function(t){t._scrollType=void 0,f.unlisten(t,this.events),I(t).forEach(function(t){t._scrollType=void 0,f.unlisten(t,this.events)},this)},elementChanged:function(t,e){var n=t.getAttribute(D),a=this.touchActionToScrollType(n),i=this.touchActionToScrollType(e);a&&i?(t._scrollType=a,I(t).forEach(function(t){t._scrollType=a},this)):i?this.elementRemoved(t):a&&this.elementAdded(t)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e=this.scrollTypes;return"none"===t?"none":t===e.XSCROLLER?"X":t===e.YSCROLLER?"Y":e.SCROLLER.exec(t)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===F.size||1===F.size&&F.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=(function(){this.clickCount=0,this.resetId=null}).bind(this);this.resetId=setTimeout(t,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){var e=0;return("touchstart"===t||"touchmove"===t)&&(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,n=f.cloneEvent(t),a=n.pointerId=t.identifier+2;n.target=R[a]||B(n),n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount,n.button=0,n.buttons=this.typeToButtons(e.type),n.width=2*(t.radiusX||t.webkitRadiusX||0),n.height=2*(t.radiusY||t.webkitRadiusY||0),n.pressure=t.force||t.webkitForce||.5,n.isPrimary=this.isPrimaryTouch(t),n.pointerType=this.POINTER_TYPE,n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey;var i=this;return n.preventDefault=function(){i.scrolling=!1,i.firstXY=null,e.preventDefault()},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var a,i=0;i<n.length;i++)a=n[i],e.call(this,this.touchToPointer(a))},shouldScroll:function(t){if(this.firstXY){var e,n=t.currentTarget._scrollType;if("none"===n)e=!1;else if("XY"===n)e=!0;else{var a=t.changedTouches[0],i="Y"===n?"X":"Y";e=Math.abs(a["client"+n]-this.firstXY[n])>=Math.abs(a["client"+i]-this.firstXY[i])}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,a=0,i=t.length;a<i&&(n=t[a]);a++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(F.size>=e.length){var n=[];F.forEach(function(t,a){if(1!==a&&!this.findTouch(e,a-2)){var i=t.out;n.push(i)}},this),n.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){F.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),f.enterOver(t),f.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=F.get(t.pointerId);if(e){var n=e.out,a=e.outTarget;f.move(t),n&&a!==t.target&&(n.relatedTarget=t.target,t.relatedTarget=a,n.target=a,t.target?(f.leaveOut(n),f.enterOver(t)):(t.target=a,t.relatedTarget=null,this.cancelOut(t))),e.out=t,e.outTarget=t.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(f.up(t),f.leaveOut(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){f.cancel(t),f.leaveOut(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){F.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=M.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var a={x:n.clientX,y:n.clientY};e.push(a),setTimeout((function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}).bind(null,e,a),2500)}}};t=new _(N.elementAdded,N.elementRemoved,N.elementChanged,N);var H=f.pointermap,W=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,Y={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){f.listen(t,this.events)},unregister:function(t){f.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return W&&((e=f.cloneEvent(t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){H.delete(t)},MSPointerDown:function(t){H.set(t.pointerId,t);var e=this.prepareEvent(t);f.down(e)},MSPointerMove:function(t){var e=this.prepareEvent(t);f.move(e)},MSPointerUp:function(t){var e=this.prepareEvent(t);f.up(e),this.cleanup(t.pointerId)},MSPointerOut:function(t){var e=this.prepareEvent(t);f.leaveOut(e)},MSPointerOver:function(t){var e=this.prepareEvent(t);f.enterOver(e)},MSPointerCancel:function(t){var e=this.prepareEvent(t);f.cancel(e),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var e=f.makeEvent("lostpointercapture",t);f.dispatchEvent(e)},MSGotPointerCapture:function(t){var e=f.makeEvent("gotpointercapture",t);f.dispatchEvent(e)}};function U(t){if(!f.pointermap.has(t)){var e=Error("InvalidPointerId");throw e.name="InvalidPointerId",e}}function j(t){for(var e=t.parentNode;e&&e!==t.ownerDocument;)e=e.parentNode;if(!e){var n=Error("InvalidStateError");throw n.name="InvalidStateError",n}}function z(t){return 0!==f.pointermap.get(t).buttons}window.navigator.msPointerEnabled?(e=function(t){U(t),j(this),z(t)&&(f.setCapture(t,this,!0),this.msSetPointerCapture(t))},n=function(t){U(t),f.releaseCapture(t,!0),this.msReleasePointerCapture(t)}):(e=function(t){U(t),j(this),z(t)&&f.setCapture(t,this)},n=function(t){U(t),f.releaseCapture(t)}),a=function(t){return!!f.captureInfo[t]},function(){if(P){x.forEach(function(t){String(t)===t?(O+=k(t)+T(t)+"\n",S&&(O+=E(t)+T(t)+"\n")):(O+=t.selectors.map(k)+T(t.rule)+"\n",S&&(O+=t.selectors.map(E)+T(t.rule)+"\n"))});var t=document.createElement("style");t.textContent=O,document.head.appendChild(t)}}(),function(){if(!window.PointerEvent){if(window.PointerEvent=o,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),f.registerSource("ms",Y)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),f.registerSource("mouse",M),void 0!==window.ontouchstart&&f.registerSource("touch",N);f.register(document)}}(),window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:e},releasePointerCapture:{value:n},hasPointerCapture:{value:a}})})(),hd.prototype=Object.create(/*@__PURE__*/t(cr).prototype),hd.prototype.constructor=hd,hd.UnsupportedBrowserException=function(t){this.message=t},hd.UnsupportedBrowserException.prototype.toString=function(){var t="Sorry, your web browser does not support ChickenPaint.";return this.message?t+=" "+this.message:t+=" Please try a modern browser like Chrome, Safari, Firefox, or Edge.",t},hd.M_DRAW=0,hd.M_FLOODFILL=1,hd.M_RECT_SELECTION=2,hd.M_MOVE_TOOL=3,hd.M_ROTATE_CANVAS=4,hd.M_COLOR_PICKER=5,hd.M_GRADIENTFILL=6,hd.M_TRANSFORM=7,hd.M_PAN_CANVAS=8,hd.T_PENCIL=0,hd.T_ERASER=1,hd.T_PEN=2,hd.T_SOFTERASER=3,hd.T_AIRBRUSH=4,hd.T_DODGE=5,hd.T_BURN=6,hd.T_WATER=7,hd.T_BLUR=8,hd.T_SMUDGE=9,hd.T_BLENDER=10,hd.T_MAX=11,hd.COLOR_MODE_RGB=0,hd.COLOR_MODE_GREYSCALE=1,window.ChickenPaint=hd,window.bootstrap=lC}();