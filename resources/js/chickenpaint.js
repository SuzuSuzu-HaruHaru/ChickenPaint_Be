/*
    ChickenPaint Be
    https://github.com/satopian/ChickenPaint_Be
    by satopian
    Customized from ChickenPaint by Nicholas Sherlock.
    GNU GENERAL PUBLIC LICENSE
    Version 3, 29 June 2007
    <http://www.gnu.org/licenses/>
*/
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/
/*
    jQuery JavaScript Library
    (c) OpenJS Foundation and other contributors | https://jquery.com/license/

    Bootstrap (https://getbootstrap.com/)
    Copyright The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)

    EventEmitter v5.2.9 - git.io/ee
    Unlicense - http://unlicense.org/
    Oliver Caldwell - https://oli.me.uk/
*/
/*
 jQuery throttle / debounce - v1.1 - 3/7/2010
 http://benalman.com/projects/jquery-throttle-debounce-plugin/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
*/
!function(){function X(a){return a&&a.__esModule?a.default:a}function ie(a,c,d,b){Object.defineProperty(a,c,{get:d,set:b,enumerable:!0,configurable:!0})}function Ca(a){for(var c in Ca.DEFAULTS)Ca.DEFAULTS.hasOwnProperty(c)&&(this[c]=Ca.DEFAULTS[c]);for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])}function Ia(a,c,d,b){this.left=a;this.top=c;this.right=d;this.bottom=b}function De(a,c){this.width=0|a;this.height=0|c}function Ed(a,c){var d=document.createElement("canvas");return d.width=a,d.height=c,d}
function gi(a,c){return document.createElement("canvas").getContext("2d").createImageData(a,c)}function I(a,c){"number"==typeof a?(De.call(this,a,c),this.imageData=gi(this.width,this.height)):(De.call(this,a.width,a.height),this.imageData=a);this.data=this.imageData.data}function Jk(a,c,d,b){var g,p=0,k=[0,0,0,0];var e=0;for(g=0;g<b&&g<d;g++){for(var l=0;l<I.BYTES_PER_PIXEL;l++)k[l]+=a[e++];p++}g=0;for(l=0;l<d;l++){if(l+b<d){e=(l+b)*I.BYTES_PER_PIXEL;for(var m=0;m<I.BYTES_PER_PIXEL;m++)k[m]+=a[e++];
p++}for(e=0;e<I.BYTES_PER_PIXEL;e++)c[g++]=Math.round(k[e]/p);if(0<=l-b){e=(l-b)*I.BYTES_PER_PIXEL;for(m=0;m<I.BYTES_PER_PIXEL;m++)k[m]-=a[e++];p--}}}function Kk(a,c){if(0==(c%=4))return a;let d=Ed(0,0),b=d.getContext("2d");switch(0==c%2?(d.width=a.width,d.height=a.height):(d.width=a.height,d.height=a.width),c){case 1:b.rotate(Math.PI/2);b.drawImage(a,0,-a.height);break;case 2:b.rotate(Math.PI);b.drawImage(a,-a.width,-a.height);break;case 3:b.rotate(-Math.PI/2);b.drawImage(a,-a.width,0);break;default:return a}return d}
function rb(a,c){tb.call(this,a);this.layers=[];this.expanded=!0;this.blendMode=c}function So(a,c){return a+c}function gb(a,c,d){De.call(this,a,c);this.createBitmap(a,c,d)}function Lk(a,c,d,b){var g,p=0,k=0;for(g=0;g<b&&g<d;g++)k+=a[g],p++;g=0;for(let e=0;e<d;e++)e+b<d&&(k+=a[e+b],p++),c[g++]=Math.round(k/p),0<=e-b&&(k-=a[e-b],p--)}function S(){}function tb(a){this.name=a||"";this.parent=null;this.lockAlpha=!1;this.alpha=100;this.visible=!0;this.blendMode=S.LM_NORMAL;this.mask=null;this.maskVisible=
this.maskLinked=!0;this.maskThumbnail=null;this.useLegacyMultiply=!1}function Na(a,c,d){tb.call(this,d);0<a&&0<c?this.image=new I(a,c):this.image=null;this.clip=!1;this.imageThumbnail=null}function Vf(a,c,d){d?(this.isGroup=d instanceof rb,this.image=d.image,this.mask=d.getEffectiveMask(),this.layer=d,this.blendMode=d.blendMode,this.alpha=d.alpha,this.visible=d.visible):(this.isGroup=!0,this.image=null,this.mask=null,this.layer=null,this.blendMode=S.LM_PASSTHROUGH,this.alpha=100,this.visible=!0);
this.dirtyRect=new Ia(0,0,a,c);this.layers=[];this.parent=null;this.clip=!1}function Mk(a,c,d,b){function g(){return 0<m.length?m.pop():new I(c,d)}function p(n){if(0==n.layers.length)return null;if(1==n.layers.length&&(null==n.mask||null==n.layers[0].mask)){let r=n.layers[0];return r.alpha=Math.round(n.alpha*r.alpha/100),n.blendMode!=S.LM_PASSTHROUGH&&(r.blendMode=n.blendMode),r.mask=n.mask||r.mask,n.layer&&h.set(n.layer,r),r}return n.blendMode==S.LM_PASSTHROUGH&&100==n.alpha&&null==n.mask?n.layers:
(n.image=g(),n)}function k(n){let r=new Vf(c,d,n);return h.set(n,r),r}function e(n,r){n&&(n.dirtyRect.union(r),e(n.parent,r))}let l,m=[],h=new Map;this.invalidateLayerRect=function(n,r){e(h.get(n),r)};this.buildTree=function(){if(!l){if(l=function u(r){if(0==r.getEffectiveAlpha())return null;let v=k(r);for(var x=0;x<r.layers.length;x++){let J=r.layers[x];var C=r.layers[x+1];if(J instanceof Na&&C&&C.clip){C=new Vf(c,d,null);C.blendMode=J.blendMode;C.alpha=100;C.clip=!0;C.addChildren(k(J));for(x+=1;x<
r.layers.length&&r.layers[x].clip;x++)0<r.layers[x].getEffectiveAlpha()&&C.addChildren(k(r.layers[x]));0<J.getEffectiveAlpha()&&v.addChildren(p(C));--x}else J instanceof rb?v.addChildren(u(J)):0<J.getEffectiveAlpha()&&v.addChildren(k(J))}return p(v)}(a)){if(Array.isArray(l)||b&&(100>l.alpha||l.mask)){let r=l;(l=new Vf(c,d)).blendMode=Array.isArray(r)?S.LM_NORMAL:r.blendMode;l.alpha=100;l.image=g();l.addChildren(r)}}else(l=new Vf(c,d,{image:g(),blendMode:S.LM_NORMAL,alpha:100,getEffectiveMask:()=>
null,visible:!0})).image.clearAll(0);m=[]}};this.resetTree=function(){l&&(function u(r){if(r.isGroup)for(let v of(r.image&&m.push(r.image),r.layers))u(v)}(l),l=null,h.clear())};this.layerPropertyChanged=function(n,r){let u=h.get(n);u&&u.visible==n.visible&&u.alpha==n.alpha&&null==u.mask==(null==n.getEffectiveMask())&&u.blendMode==S.LM_PASSTHROUGH==(n.blendMode==S.LM_PASSTHROUGH)&&"clip"!==r?(u.blendMode=n.blendMode,e(u,new Ia(0,0,c,d))):this.resetTree()};this.blendTree=function(){return function u(r){if(!r||
!r.isGroup)return r;let v=r.dirtyRect;var x=!0,C=!0;if(r.blendMode==S.LM_PASSTHROUGH&&r.parent&&v.union(r.parent.dirtyRect),v.isEmpty())return r;if(r.blendMode==S.LM_PASSTHROUGH&&r.parent){x=!1;var J=r.image;var H=r.parent.image;v.getWidth()==J.width&&v.getHeight()==J.height?J.copyPixelsFrom(H):S.replaceOntoFusionWithOpaqueLayer(J,H,100,v)}for(J=0;J<r.layers.length;J++){var G=u(r.layers[J]);if(x){x=r.image;H=G.image;var L=G.alpha,U=v;G=G.mask;if(100!=L||G||U.getWidth()!=x.width||U.getHeight()!=x.height){let T=
"replaceOntoFusionWith";100==L?T+="OpaqueLayer":T+="TransparentLayer";G&&(T+="Masked");S[T](x,H,L,U,G)}else x.copyPixelsFrom(H);x=!1}else C=C&&r.image.hasAlphaInRect(v),S.fuseImageOntoImage(r.image,C,G.image,G.alpha,G.blendMode,v,G.mask)}r.clip&&(C=r.layers[0],100>C.alpha?C.mask?S.replaceAlphaOntoFusionWithTransparentLayerMasked(r.image,C.image,C.alpha,v,C.mask):S.replaceAlphaOntoFusionWithTransparentLayer(r.image,C.image,C.alpha,v):C.mask?S.replaceAlphaOntoFusionWithOpaqueLayerMasked(r.image,C.image,
100,v,C.mask):S.replaceAlphaOntoFusionWithOpaqueLayer(r.image,C.image,100,v));return r.dirtyRect.makeEmpty(),r}(l)}}function To(){function a(h){if(null!=g&&h.curSize==p&&h.curSqueeze==k&&h.curAngle==e&&h.tip==l)return g;switch(h.tip){case Ca.TIP_ROUND_AIRBRUSH:!function(n,r){let u=Math.ceil(r.curSize),v=u/2,x=r.curSize/2*(r.curSize/2),C=1+10*r.curSqueeze,J=Math.cos(r.curAngle);r=Math.sin(r.curAngle);let H=0;for(let U=0;U<u;U++)for(let T=0;T<u;T++){var G=T+.5-v;let Y=U+.5-v;var L=(G*J-Y*r)*C;G=Y*J+
G*r;L=L*L+G*G;L<=x?n[H++]=~~(255*(1-L/x)):n[H++]=0}}(c,h);break;case Ca.TIP_ROUND_AA:!function(n,r){let u=Math.ceil(r.curSize),v=u/2,x=r.curSize/2*(r.curSize/2),C=(r.curSize-2)/2*((r.curSize-2)/2),J=(r.curSize+2)/2*((r.curSize+2)/2),H=1+10*r.curSqueeze,G=Math.cos(r.curAngle);r=Math.sin(r.curAngle);let L=0;for(let T=0;T<u;T++)for(let Y=0;Y<u;Y++){let ea=Y+.5-v,ja=T+.5-v,ra=(ea*G-ja*r)*H,Oa=ja*G+ea*r;var U=ra*ra+Oa*Oa;if(U<=C)n[L++]=255;else if(U>J)n[L++]=0;else{U=0;for(let V=0;4>V;V++)for(let Ga=0;4>
Ga;Ga++)(ra=((ea=Y+.25*Ga-v)*G-(ja=T+.25*V-v)*r)*H)*ra+(Oa=ja*G+ea*r)*Oa<=x&&(U+=1);n[L++]=Math.min(16*U,255)}}}(c,h);break;case Ca.TIP_ROUND_PIXEL:!function(n,r){let u=Math.ceil(r.curSize),v=u/2,x=r.curSize/2*(r.curSize/2),C=1+10*r.curSqueeze,J=Math.cos(r.curAngle);r=Math.sin(r.curAngle);let H=0;for(let L=0;L<u;L++)for(let U=0;U<u;U++){var G=U+.5-v;let T=L+.5-v,Y=(G*J-T*r)*C;G=T*J+G*r;Y*Y+G*G<=x?n[H++]=255:n[H++]=0}}(c,h);break;case Ca.TIP_SQUARE_AA:!function(n,r){let u=Math.ceil(r.curSize),v=u/
2;var x=r.curSize*Math.sin(Math.PI/4);let C=x/2/(1+10*r.curSqueeze);x/=2;let J=C-1,H=x-1,G=C+1,L=x+1,U=Math.cos(r.curAngle);r=Math.sin(r.curAngle);let T=0;for(let ea=0;ea<u;ea++)for(let ja=0;ja<u;ja++){var Y=ja+.5-v;let ra=ea+.5-v,Oa=Math.abs(Y*U-ra*r);Y=Math.abs(ra*U+Y*r);if(Oa<=J&&Y<=H)n[T++]=255;else if(Oa>G||Y>L)n[T++]=0;else{let V=0;for(let Ga=0;4>Ga;Ga++)for(let qa=0;4>qa;qa++)Oa=Math.abs((Y=ja+.25*qa-v)*U-(ra=ea+.25*Ga-v)*r),Y=Math.abs(ra*U+Y*r),Oa<=C&&Y<=x&&V++;n[T++]=Math.min(16*V,255)}}}(c,
h);break;case Ca.TIP_SQUARE_PIXEL:!function(n,r){let u=Math.ceil(r.curSize),v=u/2;var x=r.curSize*Math.sin(Math.PI/4);let C=x/2/(1+10*r.curSqueeze);x/=2;let J=Math.cos(r.curAngle);r=Math.sin(r.curAngle);let H=0;for(let G=0;G<u;G++)for(let L=0;L<u;L++){let U=L+.5-v,T=G+.5-v,Y=Math.abs(T*J+U*r);Math.abs(U*J-T*r)<=C&&Y<=x?n[H++]=255:n[H++]=0}}(c,h)}return g=c,p=h.curSize,l=h.tip,k=h.curSqueeze,e=h.curAngle,c}let c=new Uint8Array(160801),d=new Uint8Array(161604),b=[new Float32Array(402),new Float32Array(402)],
g=null,p,k,e,l,m=this;this.getDab=function(h,n,r){let u={alpha:r.curAlpha,width:Math.ceil(r.curSize),height:Math.ceil(r.curSize)},v=r.isAA&&r.tip!=Ca.TIP_ROUND_PIXEL;v&&(u.width++,u.height++);h=h-u.width/2+.5;n=n-u.height/2+.5;let x=Math.floor(h),C=Math.floor(n);return v?u.brush=function(J,H,G){var L=a(J);let U=Math.ceil(J.curSize);J=Math.ceil(J.curSize)+1;let T=(1-H)*(1-G),Y=H*(1-G),ea=H*G,ja=(1-H)*G,ra=0;H=0;G=b[0];let Oa=b[1];G.fill(0);for(let Ga=0;Ga<U;Ga++){var V=0;for(Oa[0]=0;V<U;V++,ra++,H++){let qa=
L[ra];d[H]=G[V]+qa*T+.5|0;G[V+1]+=qa*Y;Oa[V]+=qa*ja;Oa[V+1]=qa*ea}d[H++]=G[V]+.5|0;V=G;G=Oa;Oa=V}for(L=0;L<J;L++,H++)d[H]=G[L]+.5|0;return d}(r,h-x,n-C):u.brush=a(r),u.x=x,u.y=C,0<r.texture&&null!=this.texture&&(u.brush==c&&(d.set(c),u.brush=d),function(J,H){H=Math.floor(255*H);let G=m.texture,L=J.x%G.width,U=J.y%G.height,T=0,Y,ea;0>L&&(L+=G.width);0>U&&(U+=G.height);for(let ja=0;ja<J.height;ja++){Y=U*G.width+L;ea=U*G.width+G.width;for(let ra=0;ra<J.width;ra++)J.brush[T]=~~(J.brush[T]*(G.data[Y]*
H/255^255)/255),T++,++Y==ea&&(Y-=G.width);++U==G.height&&(U=0)}}(u,r.texture)),u};this.setTexture=function(h){this.texture=h}}function hi(a,c,d){this.bmp=a;this.x=c;this.y=d}function Kg(a){if(0==a.saturation)return a.value<<16|a.value<<8|a.value;var c=a.hue/60;c-=Math.floor(c);var d=a.saturation/255,b=~~(a.value*(1-d)),g=~~(a.value*(1-d*c));c=~~(a.value*(1-d*(1-c)));switch(~~(a.hue/60)){case 0:return a.value<<16|c<<8|b;case 1:return g<<16|a.value<<8|b;case 2:return b<<16|a.value<<8|c;case 3:return b<<
16|g<<8|a.value;case 4:return c<<16|b<<8|a.value;case 5:return a.value<<16|b<<8|g;default:return 0}}function Gb(a){this.value=this.saturation=this.hue=this.rgb=0;this.setRgb(a||0)}function Uo(){var a,c=!1;this.nextGaussian=function(){if(c)return c=!1,a;do var d=(b=2*Math.random()-1)*b+(g=2*Math.random()-1)*g;while(1<=d||0==d);var b,g;d=Math.sqrt(-2*Math.log(d)/d);return a=g*d,c=!0,b*d}}function Tb(){this.setToIdentity()}function ii(a){for(var c=["imageSmoothingEnabled","mozImageSmoothingEnabled",
"webkitImageSmoothingEnabled","msImageSmoothingEnabled"],d=0;d<c.length;d++)if(c[d]in a)return c[d];return null}function ji(a,c){var d=ii(a);d&&(a[d]=c)}function Nd(a,c,d){this.r=a;this.g=c;this.b=d}function Nk(a){let c=0;for(let d=0;d<a.length;d++)c+=a[d];return c/a.length}function Ok(a){let c=new Nd(0,0,0);for(let d=0;d<a.length;d++){let b=a[d];c.r+=b.r;c.g+=b.g;c.b+=b.b}return c.r/=a.length,c.g/=a.length,c.b/=a.length,c}function Pk(a,c){let d=a.data;if(0<c.left)for(var b=c.top;b<c.bottom;b++){var g=
b*a.width,p=g;g=d[g+c.left];for(var k=0;k<c.left;k++,p++)d[p]=g}if(c.right<a.width)for(b=c.top;b<c.bottom;b++)for(p=b*a.width+c.right,g=d[p-1],k=c.right;k<a.width;k++,p++)d[p]=g;b=0;for(p=0;p<c.top;p++)for(g=c.top*a.width,k=0;k<a.width;k++,g++,b++)d[b]=d[g];b=c.bottom*a.width;for(p=c.bottom;p<a.width;p++)for(g=(c.bottom-1)*a.width,k=0;k<a.width;k++,g++,b++)d[b]=d[g]}function Lg(a,c){return a+c}function Qk(a){return a?a.width*a.height*4:0}function Vc(a,c){function d(D){ed=!1;(0<Wa.size||0<qc.size)&&
(D?e():fb||setTimeout(e,1E3))}function b(){ha.emitEvent("changeSelection",[])}function g(D){ha.emitEvent("updateRegion",[D])}function p(){ha.emitEvent("changeStructure");Ya.resetTree();x();g(ha.getBounds())}function k(D,P,da){ha.emitEvent("changeLayer",[D]);da||(Ya.layerPropertyChanged(D,P),g(ha.getBounds()))}function e(){for(let D of Wa)D.rebuildImageThumbnail(),ha.emitEvent("changeLayerImageThumb",[D]);for(let D of qc)D.rebuildMaskThumbnail(),ha.emitEvent("changeLayerMaskThumb",[D]);Wa.clear();
fb&&(clearTimeout(fb),fb=null)}function l(D,P,da,fa){Array.isArray(D)||(D=[D]);D.forEach(N=>Ya.invalidateLayerRect(N,P));let F=!1;if(da)for(let N of(Lb.union(P),D))N instanceof Na&&(Wa.add(N),F=!0);fa&&(Ma.union(P),D.forEach(N=>{qc.add(N);Ja&&Ja.layer==N&&Ja.invalidateRect(P)}),F=!0);F&&(fb&&(clearTimeout(fb),fb=null),ed||(fb=setTimeout(e,1E3)));g(P)}function m(D,P){l(D,P,!Ua,Ua)}function h(){return Ua?pa.mask:pa.image}function n(){if(!Ba.isEmpty()){if(Ua){var D=pa.mask;ib.brushMode==Ca.BRUSH_MODE_ERASE?
Pa[Ca.BRUSH_MODE_PAINT].mergeOntoMask(D,Ka,4278190080):Pa[ib.brushMode].mergeOntoMask(D,Ka,255&hc)}else{D=pa.image;let P=pa.getLockAlpha();ib.brushMode==Ca.BRUSH_MODE_ERASE&&P?Pa[Ca.BRUSH_MODE_PAINT].mergeOntoImage(D,Ub,16777215):Pa[ib.brushMode].mergeOntoImage(D,Ub,hc);P&&D.copyAlphaFrom(Ub,Ba)}Ba.makeEmpty()}}function r(){pa instanceof Na&&!Lb.isEmpty()&&(Ub.copyBitmapRect(pa.image,Lb.left,Lb.top,Lb),Lb.makeEmpty())}function u(){pa.mask&&!Ma.isEmpty()&&(Ka.copyBitmapRect(pa.mask,Ma.left,Ma.top,
Ma),Ma.makeEmpty())}function v(){Ua?u():r()}function x(){let D=ha.getBounds();Lb.set(D);Ma.set(D)}function C(D){ha.setHasUnsavedChanges(!0);0<ub.length&&(ub=[]);0!==nb.length&&nb[nb.length-1].merge(D)?nb[nb.length-1].noChange()&&nb.pop():(30<=nb.length&&nb.shift(),ha.compactUndo(),nb.push(D))}function J(D,P){D||P||(D=!Ua,P=Ua);let da=ob.clone(),fa=D?Ub.copyRectXOR(pa.image,da):null,F=P?Ka.copyRectXOR(pa.mask,da):null;this.layer=pa;ob.makeEmpty();this.redo=this.undo=function(){fa&&this.layer.image.setRectXOR(fa,
da);F&&this.layer.mask.setRectXOR(F,da);l(this.layer,da,null!=fa,null!=F)};this.getMemoryUsed=function(N,ca){return(fa?fa.length:0)+(F?F.length:0)}}function H(D){let P=D.maskLinked,da=D.maskVisible;this.undo=function(){D.setMask(null);D.maskLinked=P;D.maskVisible=da;p();ha.setActiveLayer(D,!1)};this.redo=function(){let fa=new gb(ha.width,ha.height,8);fa.clearAll(255);D.maskLinked=!0;D.maskVisible=!0;D.setMask(fa);p();ha.setActiveLayer(D,!0)};this.redo()}function G(D,P){let da=D.mask,fa,F=!1;fa=P&&
D instanceof Na?D.image.clone():null;F=pa==D&&Ua;this.undo=function(){D.setMask(da);fa&&(D.image.copyPixelsFrom(fa),l(D,D.image.getBounds(),!0,!1));F&&ha.setActiveLayer(D,!0);p()};this.redo=function(){fa&&(S.multiplyAlphaByMask(D.image,100,D.mask),l(D,ha.getBounds(),!0,!1));F&&ha.setActiveLayer(D,!1);D.setMask(null);p()};this.redo()}function L(D,P,da){let fa=da instanceof Na&&da.clip,F=D.layers[P],N=F instanceof Na&&F.clip,ca=Ua;this.undo=function(){D.removeLayer(da);let la=D.layers[P-1]||D.layers[0]||
D;F instanceof Na&&(F.clip=N);da instanceof Na&&(da.clip=fa);p();ha.setActiveLayer(la,ca)};this.redo=function(){D.insertLayer(P,da);N&&(da instanceof Na?da.clip=!0:F.clip=!1);p();ha.setActiveLayer(da,!1)};this.redo()}function U(D){let P=D.clone(),da=Ua;this.undo=function(){P.parent.removeLayer(P);p();ha.setActiveLayer(D,da)};this.redo=function(){let fa=D.name;fa.endsWith(" Copy")||(fa+=" Copy");P.name=fa;D.parent.insertLayer(D.parent.indexOf(D)+1,P);p();ha.setActiveLayer(P,!1)};this.redo()}function T(D){let P=
D.parent,da=P.indexOf(D),fa=Ua,F=0;if(D instanceof Na&&!D.clip)for(let N=da+1;N<P.layers.length&&P.layers[N]instanceof Na&&P.layers[N].clip;N++)F++;this.undo=function(){P.insertLayer(da,D);for(let N=0;N<F;N++)P.layers[N+da+1].clip=!0;p();ha.setActiveLayer(D,fa)};this.redo=function(){var N;for(N=0;N<F;N++)P.layers[N+da+1].clip=!1;P.removeLayerAtIndex(da);N=0==P.layers.length?D.parent:P.layers[Math.max(da-1,0)];p();ha.setActiveLayer(N,!1)};this.getMemoryUsed=function(N,ca){return N?0:D.getMemoryUsed()};
this.redo()}function Y(D){let P=D.parent.indexOf(D),da=Ua,fa=new Na(ha.width,ha.height,"");this.undo=function(){D.parent.setLayerAtIndex(P,D);p();ha.setActiveLayer(D,da)};this.redo=function(){D.parent.setLayerAtIndex(P,fa);p();ha.setActiveLayer(fa,!1)};this.getMemoryUsed=function(N,ca){return N?0:D.getMemoryUsed()};var F=new Mk(D,ha.width,ha.height,!1);F.buildTree();F=F.blendTree();fa.name=D.name;fa.alpha=F.alpha;fa.image=F.image;fa.blendMode=F.blendMode;fa.mask=F.mask;fa.blendMode==S.LM_PASSTHROUGH&&
(fa.blendMode=S.LM_NORMAL);this.redo()}function ea(D){let P=D.parent,da=P.layers[P.indexOf(D)-1],fa=new Na(ha.width,ha.height,""),F=Ua;this.undo=function(){let N=P.indexOf(fa);P.removeLayerAtIndex(N);P.insertLayer(N,D);P.insertLayer(N,da);p();ha.setActiveLayer(D,F)};this.redo=function(){fa.copyFrom(da);0<D.getEffectiveAlpha()&&(fa.mask?(S.multiplyAlphaByMask(fa.image,fa.alpha,fa.mask),fa.mask=null):S.multiplyAlphaBy(fa.image,fa.alpha),fa.alpha=100,S.fuseImageOntoImage(fa.image,!0,D.image,D.alpha,
D.blendMode,D.getBounds(),D.mask));let N=P.indexOf(da);P.removeLayerAtIndex(N);P.removeLayerAtIndex(N);P.insertLayer(N,fa);p();ha.setActiveLayer(fa,!1)};this.getMemoryUsed=function(N,ca){return N?0:D.getMemoryUsed()+fa.getMemoryUsed()};this.redo()}function ja(){let D=ha.getActiveLayer(),P=pb.layers.slice(0),da=new Na(ha.width,ha.height,"");this.undo=function(){pb.layers=P.slice(0);p();ha.setActiveLayer(D,!1)};this.redo=function(){let fa=ha.fusionLayers();da.copyImageFrom(fa);pb.clearLayers();da.setName(ha.getDefaultLayerName(!1));
pb.addLayer(da);p();ha.setActiveLayer(da,!1)};this.getMemoryUsed=function(fa,F){return P.map(N=>N.getMemoryUsed()).reduce(Lg,0)};this.redo()}function ra(D,P,da){let fa=D.parent,F=D.parent.indexOf(D),N=Ua,ca=fa.layers[fa.indexOf(D)+1],la=P.layers[da],xa=D instanceof Na&&D.clip,za=!!xa&&D.getClippingBase(),db=0,hb=0;if(D instanceof Na&&!D.clip)for(var Da=F+1;Da<fa.layers.length&&fa.layers[Da]instanceof Na&&fa.layers[Da].clip;Da++)db++;else if(D instanceof rb)for(Da=da;Da<P.layers.length&&P.layers[Da]instanceof
Na&&P.layers[Da].clip;Da++)hb++;this.undo=function(){D.parent.removeLayer(D);var lb=ca?fa.indexOf(ca):fa.layers.length;fa.insertLayer(lb,D);D instanceof Na&&(D.clip=xa);for(lb=0;lb<db;lb++)fa.layers[lb+F+1].clip=!0;for(lb=0;lb<hb;lb++)P.layers[lb+da].clip=!0;p();ha.setActiveLayer(D,N)};this.redo=function(){for(var lb=0;lb<db;lb++)fa.layers[lb+F+1].clip=!1;D.parent.removeLayer(D);lb=la?P.indexOf(la):P.layers.length;P.insertLayer(lb,D);for(var ec=0;ec<hb;ec++)P.layers[ec+lb+1].clip=!1;D instanceof Na&&
(D.clip&&D.getClippingBase()!=za&&(D.clip=!1),la instanceof Na&&la.clip&&(D.clip=!0));for(ec=0;ec<hb;ec++)P.layers[ec+lb+1].clip=!1;p();ha.setActiveLayer(D,!1)};this.redo()}function Oa(D,P){let da=D.substring(0,1).toUpperCase()+D.substring(1),fa=function(F,N){Array.isArray(F)||(F=[F]);this.layers=F;this.from=this.layers.map(ca=>ca["get"+da]());this.to=N;this.redo()};return fa.prototype=Object.create(Pc.prototype),fa.prototype.constructor=fa,fa.prototype.undo=function(){this.layers.forEach((F,N)=>
F["set"+da](this.from[N]));this.layers.forEach(F=>k(F,D,!P))},fa.prototype.redo=function(){this.layers.forEach(F=>F["set"+da](this.to));this.layers.forEach(F=>k(F,D,!P))},fa.prototype.merge=function(F){var N;if(N=F instanceof fa)a:{N=this.layers;var ca=F.layers;if(N.length!=ca.length)N=!1;else{for(let la=0;la<N.length;la++)if(N[la]!=ca[la]){N=!1;break a}N=!0}}return!!N&&(this.to=F.to,!0)},fa.prototype.noChange=function(){for(let F=0;F<this.from.length;F++)if(this.from[F]!=this.to)return!1;return!0},
fa}function V(D,P){D=D.clone();P=P.clone();this.undo=function(){ha.setSelection(D);g(ha.getBounds())};this.redo=function(){ha.setSelection(P);g(ha.getBounds())};this.noChange=function(){return D.equals(P)}}function Ga(D,P,da){let fa=P?D.mask:D.image,F=fa.cloneRect(da);da=da.clone();this.undo=function(){fa.copyBitmapRect(F,da.left,da.top,F.getBounds());ha.setActiveLayer(D,P);ha.setSelection(da);l(D,da,!P,P)};this.redo=function(){P?fa.clearRect(da,0):fa.clearRect(da,16777215);fc=new hi(F,da.left,da.top);
ha.setActiveLayer(D,P);ha.emptySelection();l(D,da,!P,P)};this.getMemoryUsed=function(N,ca){return F==ca?0:F.getMemorySize()};this.redo()}function qa(D){let P=ha.getSelection(),da=Ua,fa=new Na(ha.width,ha.height,ha.getDefaultLayerName(!1)),F=pa,N=F.parent;this.undo=function(){N.removeLayer(fa);ha.setSelection(P);p();ha.setActiveLayer(F,da)};this.redo=function(){var ca=N.indexOf(F);let la=D.bmp.getBounds(),xa,za;(N.insertLayer(ca+1,fa),la.isInside(ha.getBounds())?(xa=D.x,za=D.y):(xa=(ha.width-D.bmp.width)/
2|0,za=(ha.height-D.bmp.height)/2|0),D.bmp instanceof gb)?(ca=new I(D.bmp.width,D.bmp.height),ca.copyPixelsFromGreyscale(D.bmp),fa.image.copyBitmapRect(ca,xa,za,la)):fa.image.copyBitmapRect(D.bmp,xa,za,la);ha.emptySelection();p();ha.setActiveLayer(fa,!1)};this.getMemoryUsed=function(ca,la){return D.bmp==la?0:D.bmp.getMemorySize()};this.redo()}a|=0;c|=0;let pb=new rb("Root",S.LM_NORMAL),Ya=new Mk(pb,a,c,!0),Ub=new I(a,c),Lb=new Ia(0,0,a,c),Ka=new gb(a,c,8),Ma=new Ia(0,0,a,c),ka=new gb(a,c,32),Ba=new Ia(0,
0,0,0),ya=new To,ha=this,Pa=[],pa=pb,Ua=!1,Ja=null,ob=new Ia(0,0,0,0),lc=!1,wc=new Ia(0,0,0,0),Wb=null,Ib=new Uo,vb=null,fc=null,nb=[],ub=[],ib=null,cc=0,yb=0,$b=0,Pb=!1,ed=!1,qc=new Set,Wa=new Set,fb=null,hc=0,Za="smooth";this.getLayersRoot=function(){return pb};this.getSelectionAutoSelect=function(){return wc.isEmpty()?this.getBounds():this.getSelection()};this.getSelection=function(){return wc.clone()};this.setHasUnsavedChanges=function(D){D!=lc&&(lc=D,this.emitEvent("unsavedChanges",[D]))};this.getHasUnsavedChanges=
function(){return lc};this.isAddLayerMaskAllowed=function(){return!pa.mask};this.addLayerMask=function(){this.isAddLayerMaskAllowed()&&C(new H(pa))};this.isRemoveLayerMaskAllowed=function(){return null!==pa.mask};this.removeLayerMask=function(){this.isRemoveLayerMaskAllowed()&&C(new G(pa,!1))};this.isApplyLayerMaskAllowed=function(){return null!==pa.mask&&pa instanceof Na};this.applyLayerMask=function(D){this.isApplyLayerMaskAllowed()&&C(new G(pa,!0))};this.addLayer=function(D){let P,da;if(pa instanceof
rb&&pa.expanded?(P=pa,da=pa.layers.length):da=(P=pa.parent).layers.indexOf(pa)+1,"group"===D){for(;P.layers[da]instanceof Na&&P.layers[da].clip;)da++;D=new rb(this.getDefaultLayerName(!0),S.LM_PASSTHROUGH)}else(D=new Na(this.width,this.height,this.getDefaultLayerName(!1))).image.clearAll(16777215);return C(new L(P,da,D)),D};this.addLayerObject=function(D,P){D.addLayer(P);D==pb&&1==pb.layers.length&&(pa=P);p()};this.addLayerGroupObject=function(D,P,da){let fa=[];for(let F=0;F<da;F++)fa.unshift(D.layers.pop());
fa.forEach(F=>P.addLayer(F));this.addLayerObject(D,P)};this.isRemoveLayerAllowed=function(){return pa instanceof Na?pb.getLinearizedLayerList(!1).some(D=>D instanceof Na&&D!=pa):pa instanceof rb&&pb.getLinearizedLayerList(!1).some(D=>D instanceof Na&&!D.hasAncestor(pa))};this.removeLayer=function(){return!!this.isRemoveLayerAllowed()&&(C(new T(pa)),!0)};this.duplicateLayer=function(){C(new U(pa))};this.isMergeDownAllowed=function(){let D=pa.parent.indexOf(pa);return 0<D&&pa instanceof Na&&pa.parent.layers[D-
1]instanceof Na};this.mergeDown=function(){this.isMergeDownAllowed()&&C(new ea(pa))};this.isMergeGroupAllowed=function(){return pa instanceof rb&&0<pa.getEffectiveAlpha()};this.mergeGroup=function(){this.isMergeGroupAllowed()&&C(new Y(pa))};this.isMergeAllLayersAllowed=function(){return 1<pb.getLinearizedLayerList(!1).length};this.mergeAllLayers=function(){this.isMergeAllLayersAllowed()&&C(new ja)};this.relocateLayer=function(D,P,da){D&&P&&D!=P&&!P.hasAncestor(D)&&C(new ra(D,P,da))};this.setLayerVisibility=
function(D,P){let da=[];if(D.ancestorsAreVisible())D.visible!=P&&C(new A(D,P));else{for(;null!=D;D=D.parent)D.visible||da.push(D);C(new A(da,!0))}};this.expandLayerGroup=function(D,P){D.expanded!=P&&(D.expanded=P,!P&&pa.hasAncestor(D)&&this.setActiveLayer(D,!1),k(D,"expanded",!0))};this.setLayerAlpha=function(D){pa.getAlpha()!=D&&C(new rd(pa,D))};this.setLayerMaskLinked=function(D){pa.maskLinked!=D&&C(new Fd(pa,D))};this.setLayerMaskVisible=function(D,P){D.maskVisible!=P&&C(new Kc(D,P))};this.setLayerBlendMode=
function(D){pa.getBlendMode()!=D&&(D!=S.LM_PASSTHROUGH||pa instanceof rb)&&C(new sd(pa,D))};this.setLayerName=function(D,P){D.getName()!=P&&C(new kd(D,P))};this.paintDab=function(D,P,da){ib.applyPressure(da);0<ib.scattering&&(D+=Ib.nextGaussian()*ib.curScattering/4,P+=Ib.nextGaussian()*ib.curScattering/4);da=Pa[ib.brushMode];D=ya.getDab(D,P,ib);P=new Ia(0,0,D.width,D.height);let fa=new Ia(0,0,D.width,D.height);if(fa.translate(D.x,D.y),ha.getBounds().clipSourceDest(P,fa),!fa.isEmpty()){ob.union(fa);
var F=Ua?pa.mask:pa.image;da.paintDab(F,fa,Pb&&!Ua?Wb:F,ib,P,D,hc);!Ua&&da.noMergePhase&&pa.getLockAlpha()&&F.copyAlphaFrom(Ub,fa);da.wantsOutputAsInput&&(n(),Pb&&!Ua&&ha.fusionLayers());m(pa,fa)}};this.getDefaultLayerName=function(D){let P=D?"Group ":"Layer ";D=D?/^Group [0-9]+$/:/^Layer [0-9]+$/;let da=0,fa=pb.getLinearizedLayerList(!1);for(let F=0;F<fa.length;F++){let N=fa[F];D.test(N.name)&&(da=Math.max(da,parseInt(N.name.substring(P.length),10)))}return P+(da+1)};this.addBackgroundLayer=function(){let D=
new Na(ha.width,ha.height,this.getDefaultLayerName(!1));D.image.clearAll(4294967295);this.addLayerObject(this.getLayersRoot(),D)};this.addDefaultLayer=function(){let D=new Na(ha.width,ha.height,this.getDefaultLayerName(!1));D.image.clearAll(16777215);this.addLayerObject(this.getLayersRoot(),D);this.setActiveLayer(D,!1)};this.fusionLayers=function(){n();Ya.buildTree();return Wb=Ya.blendTree().image};this.upgradeMultiplyLayers=function(D){let P=this.getLayersRoot().getLinearizedLayerList(!1,[]),da=
-1;for(var fa=0;fa<P.length;fa++){var F=P[fa];if(!(F instanceof Na)||F.mask||F.blendMode>S.LM_LAST_CHIBIPAINT)throw Error("Bad layer type during multiply upgrade");F.blendMode===S.LM_MULTIPLY&&(da=fa)}if(-1!==da){fa=new I(this.width,this.height);let N=F=!0,ca=this.getBounds();fa.clearAll(ca,16777215);for(let la=0;la<=da;la++){let xa=P[la];N||(F=F&&fa.hasAlphaInRect(ca));xa.blendMode===S.LM_MULTIPLY&&("bake"===D?!F&&0<xa.getEffectiveAlpha()&&(100===xa.alpha?S.upgradeMultiplyOfOpaqueLayer(fa,xa.image,
100,ca):S.upgradeMultiplyOfTransparentLayer(fa,xa.image,xa.alpha,ca),xa.setBlendMode(S.LM_MULTIPLY2)):F&&xa.setBlendMode(S.LM_MULTIPLY2));0<xa.getEffectiveAlpha()&&(N=!1,S.fuseImageOntoImage(fa,F,xa.image,xa.alpha,xa.blendMode,ca,null))}}};this.isCreateClippingMaskAllowed=function(){var D=pa.parent.indexOf(pa);D=pa.parent.layers[D-1];return pa instanceof Na&&!pa.clip&&D instanceof Na};this.createClippingMask=function(){this.isCreateClippingMaskAllowed()&&C(new ua(pa,!0))};this.isReleaseClippingMaskAllowed=
function(){return pa instanceof Na&&pa.clip};this.releaseClippingMask=function(){this.isReleaseClippingMaskAllowed()&&C(new ua(pa,!1))};this.setActiveLayer=function(D,P){if(D){let da=(P=D.mask&&P)!=Ua;if(pa!=D||da){let fa=pa;pa=D;Ua=P;x();this.emitEvent("changeActiveLayer",[fa,D,Ua]);da&&this.emitEvent("editModeChanged",[Ua?Vc.EDITING_MODE_MASK:Vc.EDITING_MODE_IMAGE]);Ja&&Ja.layer==fa&&(P?Ja.setLayer(D):this.closeMaskView())}}};this.closeMaskView=function(){Ja.close();Ja=null};this.toggleMaskView=
function(){return null!=Ja&&Ja.isOpen()?this.closeMaskView():Ja=pa.mask?new Vo(pa,n):null,Ja};this.selectTopmostVisibleLayer=function(){let D=pb.getLinearizedLayerList(!1);for(var P=D.length-1;0<=P;P--)if(D[P]instanceof Na&&0<D[P].getEffectiveAlpha()){this.setActiveLayer(D[P],!1);return}for(P=D.length-1;0<=P;P--)if(D[P]instanceof Na){this.setActiveLayer(D[P],!1);return}this.setActiveLayer(D[D.length-1],!1)};this.getActiveLayer=function(){return pa};this.isEditingMask=function(){return Ua};this.isActiveLayerDrawable=
function(){return Ua&&pa.mask||!Ua&&pa instanceof Na};this.getUndoMemoryUsed=function(){let D=0;for(let P of ub)D+=P.getMemoryUsed(!0,null);for(let P of nb)D+=P.getMemoryUsed(!1,null);return D};this.isUndoAllowed=function(){return 0<nb.length};this.isRedoAllowed=function(){return 0<ub.length};this.undo=function(){if(this.isUndoAllowed()){this.setHasUnsavedChanges(!0);var D=nb.pop();D.undo();ub.push(D)}};this.redo=function(){if(this.isRedoAllowed()){this.setHasUnsavedChanges(!0);var D=ub.pop();D.redo();
nb.push(D)}};this.performIdleTasks=function(){v();n();Ya.buildTree()};this.compactUndo=function(){0<nb.length&&nb[nb.length-1].compact()};this.clearHistory=function(){nb=[];ub=[]};this.colorPicker=function(D,P){return Ua&&pa.mask?Gb.greyToRGB(pa.mask.getPixel(~~D,~~P)):16777215&Wb.getPixel(~~D,~~P)};this.setSelection=function(D){wc.set(D);wc.roundNearest();wc.clipTo(this.getBounds())};this.emptySelection=function(){wc.makeEmpty()};this.floodFill=function(D,P){let da=h();da&&(v(),ob=this.getBounds(),
da.floodFill(~~D,~~P,4278190080|hc),C(new J),m(pa,this.getBounds()))};this.gradientFill=function(D,P,da,fa,F){let N=this.getSelectionAutoSelect(),ca=h();ca&&(v(),ob=N.clone(),ca.gradient(N,D,P,da,fa,F,!1),this.getLayerLockAlpha()&&ca instanceof I&&ca.copyAlphaFrom(Ub,N),C(new J),m(pa,N))};this.fill=function(D){let P=this.getSelectionAutoSelect(),da=h();da&&(v(),ob=P.clone(),da.clearRect(P,D),C(new J),m(pa,P))};this.clear=function(){Ua?this.fill(0):this.fill(16777215)};this.flip=function(D){let P=
this.getSelection(),da=P.isEmpty();var fa=da&&pa instanceof Na&&pa.mask&&pa.maskLinked;let F=(!Ua||fa)&&pa instanceof Na;fa=(Ua||fa)&&pa.mask;D=D?"copyRegionHFlip":"copyRegionVFlip";(F||fa)&&(da&&(P=this.getBounds()),ob=P.clone(),F&&(r(),pa.image[D](P,Ub)),fa&&(u(),pa.mask[D](P,Ka)),C(new J(F,fa)),l(pa,P,F,fa))};this.hFlip=function(){this.flip(!0)};this.vFlip=function(){this.flip(!1)};this.monochromaticNoise=function(){let D=this.getSelectionAutoSelect(),P=h();P&&(v(),ob=D.clone(),P.fillWithNoise(D),
C(new J),m(pa,D))};this.isColorNoiseAllowed=function(){return!this.isEditingMask()&&this.isActiveLayerDrawable()};this.colorNoise=function(){if(this.isColorNoiseAllowed()){let D=this.getSelectionAutoSelect();v();ob=D.clone();pa.image.fillWithColorNoise(D);C(new J(!0,!1));l(pa,D,!0,!1)}};this.invert=function(){let D=this.getSelectionAutoSelect(),P=h();P&&(v(),ob=D.clone(),P.invert(D),C(new J),m(pa,D))};this.boxBlur=function(D,P,da){let fa=this.getSelectionAutoSelect(),F=h();if(F){v();ob=fa.clone();
for(let N=0;N<da;N++)F.boxBlur(fa,D,P);C(new J);m(pa,fa)}};this.rectangleSelection=function(D){D=D.clone();D.clipTo(this.getBounds());C(new V(this.getSelection(),D));this.setSelection(D)};this.move=function(D,P,da){if(P|=0,0!=(D|=0)||0!=P){var fa=0<nb.length?nb[nb.length-1]:null;!da&&fa instanceof Lc&&fa.layer==this.getActiveLayer()?(fa.amend(D,P),ub=[],this.setHasUnsavedChanges(!0)):(D=new Lc(D,P,da),C(D),D.redo())}};this.setTransformInterpolation=function(D){Za=D;vb instanceof rc&&vb.setInterpolation(D)};
this.transformAffineAbort=function(){vb instanceof rc&&(vb.undo(),vb=null,d(!0))};this.transformAffineBegin=function(){if(vb instanceof rc)return{transform:vb.getTransform(),rect:vb.getInitialTransformRect(),selection:vb.getInitialSelectionRect()};let D=new Tb,P;return(P=new rc(D,Za)).getInitialTransformRect().isEmpty()?null:(vb=P,ed=!0,{transform:D,rect:P.getInitialTransformRect(),selection:P.getInitialSelectionRect()})};this.transformAffineFinish=function(){vb instanceof rc&&(C(vb),vb=null,d(!0))};
this.transformAffineAmend=function(D){vb instanceof rc&&vb.amend(D)};this.isCopySelectionAllowed=this.isCutSelectionAllowed=function(){return!this.getSelection().isEmpty()&&null!==h()};this.cutSelection=function(){this.isCutSelectionAllowed()&&C(new Ga(pa,Ua,this.getSelection()))};this.copySelection=function(){if(this.isCopySelectionAllowed()){let D=ha.getSelection();fc=new hi(h().cloneRect(D),D.left,D.top)}};this.isCopySelectionMergedAllowed=function(){return!this.getSelection().isEmpty()};this.copySelectionMerged=
function(){if(this.isCopySelectionMergedAllowed()){let D=ha.getSelection();fc=new hi(this.fusionLayers().cloneRect(D),D.left,D.top)}};this.isPasteClipboardAllowed=function(){return!this.isClipboardEmpty()};this.pasteClipboard=function(){this.isPasteClipboardAllowed()&&C(new qa(fc))};this.getClipboard=function(){return fc};this.setClipboard=function(D){fc=D};this.isClipboardEmpty=function(){return null==fc};this.setSampleAllLayers=function(D){Pb=D};this.getLayerLockAlpha=function(){return this.getActiveLayer().getLockAlpha()};
this.setLayerLockAlpha=function(D){pa.getLockAlpha()!=D&&C(new gc(pa,D))};this.setForegroundColor=function(D){hc=D};this.setBrush=function(D){ib=D};this.setBrushTexture=function(D){ya.setTexture(D)};this.beginStroke=function(D,P,da){return!(null===ib||!this.isActiveLayerDrawable())&&(v(),ob.makeEmpty(),ka.clearAll(0),Ba.makeEmpty(),cc=D,yb=P,$b=da,ed=!0,Pa[ib.brushMode].beginStroke(),this.paintDab(D,P,da),!0)};this.continueStroke=function(D,P,da){if(null!=ib){var fa=Math.sqrt((cc-D)*(cc-D)+(yb-P)*
(yb-P)),F=Math.max(ib.minSpacing,ib.curSize*ib.spacing);if(fa>F){let N=cc,ca=yb,la=$b;fa=(F-.001)/fa;for(F=fa;1>=F;F+=fa)N=F*D+(1-F)*cc,ca=F*P+(1-F)*yb,la=F*da+(1-F)*$b,this.paintDab(N,ca,la);cc=N;yb=ca;$b=la}}};this.endStroke=function(){null!=ib&&(n(),Pa[ib.brushMode].endStroke(),ob.clipTo(this.getBounds()),ob.isEmpty()||(C(new J),v()),d(!1))};this.hasAlpha=function(){return Wb.hasAlpha()};this.getFlatPNG=function(D){return this.fusionLayers(),Wb.getAsPNG(D)};this.getFlatPNGBuffer=function(D){return this.fusionLayers(),
Wb.getAsPNGBuffer(D)};this.isSimpleDrawing=function(){return 1==pb.layers.length&&pb.layers[0]instanceof Na&&!pb.layers[0].mask&&100==pb.layers[0].getEffectiveAlpha()};J.prototype=Object.create(Pc.prototype);J.prototype.constructor=J;H.prototype=Object.create(Pc.prototype);H.prototype.constructor=H;G.prototype=Object.create(Pc.prototype);G.prototype.constructor=G;L.prototype=Object.create(Pc.prototype);L.prototype.constructor=L;U.prototype=Object.create(Pc.prototype);U.prototype.constructor=U;T.prototype=
Object.create(Pc.prototype);T.prototype.constructor=T;Y.prototype=Object.create(Pc.prototype);Y.prototype.constructor=Y;ea.prototype=Object.create(Pc.prototype);ea.prototype.constructor=ea;ja.prototype=Object.create(Pc.prototype);ja.prototype.constructor=ja;ra.prototype=Object.create(Pc.prototype);ra.prototype.constructor=ra;let rd=Oa("alpha",!0),sd=Oa("blendMode",!0),A=Oa("visible",!0),ua=Oa("clip",!0),Kc=Oa("maskVisible",!0),kd=Oa("name",!1),gc=Oa("lockAlpha",!1),Fd=Oa("maskLinked",!1);V.prototype=
Object.create(Pc.prototype);V.prototype.constructor=V;class va extends Pc{undo(){let D=[];this.dstRect.isEmpty()||D.push(this.dstRect);this.erasesSourceRect&&(D.push(this.srcRect),D=Ia.union(D));this.movingLayers.forEach(P=>{this.hasFullUndo?D.forEach(da=>{P.moveImage&&P.layer.image.copyBitmapRect(P.imageUndo,da.left,da.top,da);P.moveMask&&P.layer.mask.copyBitmapRect(P.maskUndo,da.left,da.top,da)}):(P.moveImage&&P.imageRect.forEach((da,fa)=>{P.layer.image.copyBitmapRect(da,fa.left,fa.top,da.getBounds())}),
P.moveMask&&P.maskRect.forEach((da,fa)=>{P.layer.mask.copyBitmapRect(da,fa.left,fa.top,da.getBounds())}))});l(this.movingLayers.map(P=>P.layer),D.reduce((P,da)=>P.getUnion(da),new Ia(0,0,0,0)),!0,!0);this.dstRect.makeEmpty();ha.setSelection(this.fromSelection);ha.setActiveLayer(this.layer,this.fromMaskMode);b()}getMemoryUsed(D,P){return this.movingLayers.map(function(da){return[da.imageUndo,da.maskUndo,da.imageRect,da.maskRect].map(fa=>fa?fa.getMemorySize():0).reduce(Lg,0)}).reduce(Lg,0)}buildFullUndo(){this.hasFullUndo||
(this.movingLayers.forEach(function(D){D.moveImage&&(D.imageUndo=D.layer.image.clone());D.moveMask&&(D.maskUndo=D.layer.mask.clone());D.imageRect.clear();D.maskRect.clear()}),this.hasFullUndo=!0)}compact(){if(this.hasFullUndo){let D=[];this.dstRect.isEmpty()||D.push(this.dstRect);this.erasesSourceRect&&(D.push(this.srcRect),D=Ia.union(D));this.movingLayers.forEach(P=>{P.imageRect.clear();P.maskRect.clear();D.forEach(da=>{P.moveImage&&P.imageRect.set(da,P.imageUndo.cloneRect(da));P.moveMask&&P.maskRect.set(da,
P.maskUndo.cloneRect(da))});P.imageUndo=null;P.maskUndo=null});this.hasFullUndo=!1}}constructor(){super();this.layer=pa;this.fromSelection=ha.getSelection();this.fromMaskMode=Ua;this.movingWholeLayer=this.fromSelection.isEmpty();this.movingImage=!Ua||this.movingWholeLayer&&this.layer.maskLinked;this.movingMask=Ua||this.movingWholeLayer&&this.layer.maskLinked;this.erasesSourceRect=this.hasFullUndo=!1;this.dstRect=new Ia(0,0,0,0);this.movingLayers=[{layer:this.layer,moveImage:this.layer instanceof Na&&
this.movingImage,moveMask:null!==this.layer.mask&&this.movingMask,imageRect:new Map,maskRect:new Map}];this.layer instanceof rb&&this.movingImage&&this.movingWholeLayer&&(this.movingLayers=this.movingLayers.concat(this.layer.getLinearizedLayerList(!1).map(fa=>({layer:fa,moveImage:fa instanceof Na,moveMask:null!==fa.mask&&fa.maskLinked,imageRect:new Map,maskRect:new Map}))));let D=new Ia(0,0,0,0);if(this.movingWholeLayer){this.srcRect=ha.getBounds();for(var P=0;P<this.movingLayers.length&&!D.equals(this.srcRect);P++){var da=
this.movingLayers[P];da.moveMask&&D.union(da.layer.mask.getValueBounds(this.srcRect,255));da.moveImage&&D.union(da.layer.image.getNonTransparentBounds(this.srcRect))}}else for(this.srcRect=this.fromSelection.clone(),P=0;P<this.movingLayers.length&&!D.equals(this.srcRect);P++)da=this.movingLayers[P],da.moveMask&&D.union(da.layer.mask.getValueBounds(this.srcRect,0)),da.moveImage&&D.union(da.layer.image.getNonTransparentBounds(this.srcRect));this.srcRect=D}}class rc extends va{buildFullUndo(){this.hasFullUndo||
(super.buildFullUndo(),this.movingLayers.forEach(D=>{if(D.moveImage){var P=Ed(this.srcRect.getWidth(),this.srcRect.getHeight());P.getContext("2d").putImageData(D.layer.image.getImageData(),-this.srcRect.left,-this.srcRect.top,this.srcRect.left,this.srcRect.top,this.srcRect.getWidth(),this.srcRect.getHeight());D.imageSourceCanvas=P}D.moveMask&&(P=Ed(this.srcRect.getWidth(),this.srcRect.getHeight()),P.getContext("2d").putImageData(D.layer.mask.getImageData(this.srcRect.left,this.srcRect.top,this.srcRect.getWidth(),
this.srcRect.getHeight()),0,0),D.maskSourceCanvas=P)}),this.composeCanvas=Ed(ha.width,ha.height),this.composeCanvasContext=this.composeCanvas.getContext("2d",{willReadFrequently:!0}),ji(this.composeCanvasContext,"smooth"==this.interpolation),this.junk=this.composeCanvasContext.getImageData(0,0,1,1))}redo(){this.buildFullUndo();var D=this.dstRect.clone();let P=this.srcRect.toPoints();this.affineTransform.transformPoints(P);this.dstRect.set(Ia.createBoundingBox(P).roundContain().clipTo(ha.getBounds()));
let da=Ia.subtract(this.dstRect,this.srcRect),fa=Ia.subtract(D.isEmpty()?this.srcRect:this.srcRect.getIntersection(D),this.dstRect),F=this.srcRect.getIntersection(this.dstRect),N=Ia.subtract(D,[this.dstRect,this.srcRect]);D=this.srcRect.getUnion(this.dstRect).getUnion(D);(this.movingLayers.forEach(ca=>{if(fa.forEach(la=>{ca.moveImage&&ca.layer.image.clearRect(la,16777215);ca.moveMask&&(this.movingWholeLayer?ca.layer.mask.clearRect(la,255):ca.layer.mask.clearRect(la,0))}),!this.dstRect.isEmpty()){if(ca.moveImage){let la=
ca.imageUndo.getImageData();da.forEach(xa=>{this.composeCanvasContext.putImageData(la,0,0,xa.left,xa.top,xa.getWidth(),xa.getHeight())});this.composeCanvasContext.clearRect(F.left,F.top,F.getWidth(),F.getHeight());this.composeCanvasContext.save();this.composeCanvasContext.setTransform(this.affineTransform.m[0],this.affineTransform.m[1],this.affineTransform.m[2],this.affineTransform.m[3],this.affineTransform.m[4],this.affineTransform.m[5]);this.composeCanvasContext.drawImage(ca.imageSourceCanvas,this.srcRect.left,
this.srcRect.top);this.composeCanvasContext.restore();ca.layer.image.copyBitmapRect(new I(this.composeCanvasContext.getImageData(this.dstRect.left,this.dstRect.top,this.dstRect.getWidth(),this.dstRect.getHeight())),this.dstRect.left,this.dstRect.top,new Ia(0,0,this.dstRect.getWidth(),this.dstRect.getHeight()))}ca.moveMask&&(da.forEach(la=>{this.composeCanvasContext.putImageData(ca.layer.mask.getImageData(la.left,la.top,la.getWidth(),la.getHeight()),la.left,la.top)}),this.movingWholeLayer?this.composeCanvasContext.fillStyle=
"#FFF":this.composeCanvasContext.fillStyle="#000",this.composeCanvasContext.fillRect(F.left,F.top,F.getWidth(),F.getHeight()),this.composeCanvasContext.save(),this.composeCanvasContext.setTransform(this.affineTransform.m[0],this.affineTransform.m[1],this.affineTransform.m[2],this.affineTransform.m[3],this.affineTransform.m[4],this.affineTransform.m[5]),this.composeCanvasContext.drawImage(ca.maskSourceCanvas,this.srcRect.left,this.srcRect.top),this.composeCanvasContext.restore(),ca.layer.mask.pasteImageData(this.composeCanvasContext.getImageData(this.dstRect.left,
this.dstRect.top,this.dstRect.getWidth(),this.dstRect.getHeight()),this.dstRect.left,this.dstRect.top))}N.forEach(la=>{ca.moveImage&&ca.layer.image.copyBitmapRect(ca.imageUndo,la.left,la.top,la);ca.moveMask&&ca.layer.mask.copyBitmapRect(ca.maskUndo,la.left,la.top,la)})}),l(this.movingLayers.map(ca=>ca.layer),D,!0,!0),this.fromSelection.isEmpty())||(D=this.fromSelection.toPoints(),this.affineTransform.transformPoints(D),(D=Ia.createBoundingBox(D)).roundNearest(),ha.setSelection(D),b());ha.setActiveLayer(this.layer,
this.fromMaskMode)}amend(D){this.hasFullUndo||this.undo();this.affineTransform=D.clone();this.redo()}setInterpolation(D){D!=this.interpolation&&(this.interpolation=D,this.composeCanvasContext&&ji(this.composeCanvasContext,"smooth"==this.interpolation),this.undo(),this.redo())}compact(){super.compact();this.composeCanvasContext=this.composeCanvas=null;this.movingLayers.forEach(D=>D.imageSourceCanvas=null)}getMemoryUsed(D,P){D=super.getMemoryUsed(D,P);return D+=Qk(this.composeCanvas),D+=this.movingLayers.map(da=>
Qk(da.imageSourceCanvas)).reduce(Lg,0)}getTransform(){return this.affineTransform.clone()}getInitialTransformRect(){return this.srcRect.clone()}getInitialSelectionRect(){return this.fromSelection.clone()}constructor(D,P){super();this.erasesSourceRect=!0;this.affineTransform=D.clone();this.interpolation=P||"smooth";this.composeCanvasContext=this.composeCanvas=null}}class Lc extends va{redo(){var D=this.dstRect.clone();let P,da,fa=D.clone(),F=null;(this.buildFullUndo(),this.dstRect.set(this.srcRect),
this.dstRect.translate(this.offsetX,this.offsetY),P=this.dstRect.clone(),this.dstRect.clipTo(ha.getBounds()),this.erasesSourceRect?(F=D.isEmpty()?this.srcRect:this.srcRect.getIntersection(D),fa.union(F),da=D.subtract(this.srcRect)):da=[D],this.movingLayers.forEach(N=>{F&&(N.moveImage&&N.layer.image.clearRect(F,16777215),N.moveMask&&N.layer.mask.clearRect(F,this.movingWholeLayer?255:0));da.forEach(function(ca){N.moveImage&&N.layer.image.copyBitmapRect(N.imageUndo,ca.left,ca.top,ca);N.moveMask&&N.layer.mask.copyBitmapRect(N.maskUndo,
ca.left,ca.top,ca)});N.moveImage&&S.normalFuseImageOntoImageAtPosition(N.layer.image,N.imageUndo,P.left,P.top,this.srcRect);N.moveMask&&N.layer.mask.copyBitmapRect(N.maskUndo,P.left,P.top,this.srcRect)}),fa.union(this.dstRect),l(this.movingLayers.map(N=>N.layer),fa,!0,!0),this.fromSelection.isEmpty())||(D=this.fromSelection.clone(),D.translate(this.offsetX,this.offsetY),ha.setSelection(D),b())}amend(D,P){this.hasFullUndo||this.undo();this.offsetX+=D;this.offsetY+=P;this.redo()}constructor(D,P,da){super();
this.offsetX=D;this.offsetY=P;this.erasesSourceRect=!da}}Ga.prototype=Object.create(Pc.prototype);Ga.prototype.constructor=Ga;qa.prototype=Object.create(Pc.prototype);qa.prototype.constructor=qa;Pa=[ff,Wo,Xo,Yo,Wf,Zo,$o,ap].map(D=>new D(ka,Ba));this.width=a;this.height=c}function zb(a,c,d){this.data=a;this.eof=!1;this.start=void 0===c?0:c;this.end=void 0===d?a.length:d;this.pos=this.start}function gf(a){for(var c=a.length;0<=--c;)a[c]=0}function ki(a,c,d,b,g){this.static_tree=a;this.extra_bits=c;
this.extra_base=d;this.elems=b;this.max_length=g;this.has_stree=a&&a.length}function li(a,c){this.dyn_tree=a;this.max_code=0;this.stat_desc=c}function Rk(a){return 256>a?Xf[a]:Xf[256+(a>>>7)]}function Yf(a,c){a.pending_buf[a.pending++]=255&c;a.pending_buf[a.pending++]=c>>>8&255}function Wc(a,c,d){a.bi_valid>16-d?(a.bi_buf|=c<<a.bi_valid&65535,Yf(a,a.bi_buf),a.bi_buf=c>>16-a.bi_valid,a.bi_valid+=d-16):(a.bi_buf|=c<<a.bi_valid&65535,a.bi_valid+=d)}function Gd(a,c,d){Wc(a,d[2*c],d[2*c+1])}function Sk(a,
c){var d=0;do d|=1&a,a>>>=1,d<<=1;while(0<--c);return d>>>1}function Tk(a,c,d){var b,g=Array(16),p=0;for(b=1;15>=b;b++)g[b]=p=p+d[b-1]<<1;for(d=0;d<=c;d++)b=a[2*d+1],0!==b&&(a[2*d]=Sk(g[b]++,b))}function Uk(a){var c;for(c=0;286>c;c++)a.dyn_ltree[2*c]=0;for(c=0;30>c;c++)a.dyn_dtree[2*c]=0;for(c=0;19>c;c++)a.bl_tree[2*c]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function Vk(a){8<a.bi_valid?Yf(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=
0}function Wk(a,c,d,b){var g=2*c,p=2*d;return a[g]<a[p]||a[g]===a[p]&&b[c]<=b[d]}function mi(a,c,d){for(var b=a.heap[d],g=d<<1;g<=a.heap_len&&(g<a.heap_len&&Wk(c,a.heap[g+1],a.heap[g],a.depth)&&g++,!Wk(c,b,a.heap[g],a.depth));)a.heap[d]=a.heap[g],d=g,g<<=1;a.heap[d]=b}function Xk(a,c,d){var b,g,p=0;if(0!==a.last_lit){do{var k=a.pending_buf[a.d_buf+2*p]<<8|a.pending_buf[a.d_buf+2*p+1];var e=a.pending_buf[a.l_buf+p];p++;0===k?Gd(a,e,c):(Gd(a,(b=Zf[e])+256+1,c),0!==(g=ni[b])&&Wc(a,e-oi[b],g),Gd(a,b=
Rk(--k),d),0!==(g=Mg[b])&&Wc(a,k-Ng[b],g))}while(p<a.last_lit)}Gd(a,256,c)}function pi(a,c){var d,b=c.dyn_tree;var g=c.stat_desc.static_tree;var p=c.stat_desc.has_stree,k=c.stat_desc.elems,e=-1;var l=0;a.heap_len=0;for(a.heap_max=573;l<k;l++)0!==b[2*l]?(a.heap[++a.heap_len]=e=l,a.depth[l]=0):b[2*l+1]=0;for(;2>a.heap_len;)b[2*(d=a.heap[++a.heap_len]=2>e?++e:0)]=1,a.depth[d]=0,a.opt_len--,p&&(a.static_len-=g[2*d+1]);c.max_code=e;for(l=a.heap_len>>1;1<=l;l--)mi(a,b,l);d=k;do l=a.heap[1],a.heap[1]=a.heap[a.heap_len--],
mi(a,b,1),g=a.heap[1],a.heap[--a.heap_max]=l,a.heap[--a.heap_max]=g,b[2*d]=b[2*l]+b[2*g],a.depth[d]=(a.depth[l]>=a.depth[g]?a.depth[l]:a.depth[g])+1,b[2*l+1]=b[2*g+1]=d,a.heap[1]=d++,mi(a,b,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];var m,h,n,r,u;l=c.dyn_tree;d=c.max_code;g=c.stat_desc.static_tree;p=c.stat_desc.has_stree;k=c.stat_desc.extra_bits;var v=c.stat_desc.extra_base,x=c.stat_desc.max_length,C=0;for(n=0;15>=n;n++)a.bl_count[n]=0;l[2*a.heap[a.heap_max]+1]=0;for(c=a.heap_max+1;573>
c;c++)(n=l[2*l[2*(m=a.heap[c])+1]+1]+1)>x&&(n=x,C++),l[2*m+1]=n,m>d||(a.bl_count[n]++,r=0,m>=v&&(r=k[m-v]),u=l[2*m],a.opt_len+=u*(n+r),!p||(a.static_len+=u*(g[2*m+1]+r)));if(0!==C){do{for(n=x-1;0===a.bl_count[n];)n--;a.bl_count[n]--;a.bl_count[n+1]+=2;a.bl_count[x]--;C-=2}while(0<C);for(n=x;0!==n;n--)for(m=a.bl_count[n];0!==m;)(h=a.heap[--c])>d||(l[2*h+1]!==n&&(a.opt_len+=(n-l[2*h+1])*l[2*h],l[2*h+1]=n),m--)}Tk(b,e,a.bl_count)}function Yk(a,c,d){var b,g=-1,p=c[1],k=0,e=7,l=4;0===p&&(e=138,l=3);c[2*
(d+1)+1]=65535;for(b=0;b<=d;b++){var m=p;p=c[2*(b+1)+1];++k<e&&m===p||(k<l?a.bl_tree[2*m]+=k:0!==m?(m!==g&&a.bl_tree[2*m]++,a.bl_tree[32]++):10>=k?a.bl_tree[34]++:a.bl_tree[36]++,k=0,g=m,0===p?(e=138,l=3):m===p?(e=6,l=3):(e=7,l=4))}}function Zk(a,c,d){var b,g,p=-1,k=c[1],e=0,l=7,m=4;0===k&&(l=138,m=3);for(b=0;b<=d;b++)if(g=k,k=c[2*(b+1)+1],!(++e<l)||g!==k){if(e<m){do Gd(a,g,a.bl_tree);while(0!=--e)}else 0!==g?(g!==p&&(Gd(a,g,a.bl_tree),e--),Gd(a,16,a.bl_tree),Wc(a,e-3,2)):10>=e?(Gd(a,17,a.bl_tree),
Wc(a,e-3,3)):(Gd(a,18,a.bl_tree),Wc(a,e-11,7));e=0;p=g;0===k?(l=138,m=3):g===k?(l=6,m=3):(l=7,m=4)}}function $k(a,c,d,b){Wc(a,b?1:0,3);Vk(a);Yf(a,d);Yf(a,~d);ab.arraySet(a.pending_buf,a.window,c,d,a.pending);a.pending+=d}function je(a,c){return a.msg=Ee[c],c}function ke(a){for(var c=a.length;0<=--c;)a[c]=0}function le(a){var c=a.state,d=c.pending;d>a.avail_out&&(d=a.avail_out);0!==d&&(ab.arraySet(a.output,c.pending_buf,c.pending_out,d,a.next_out),a.next_out+=d,c.pending_out+=d,a.total_out+=d,a.avail_out-=
d,c.pending-=d,0===c.pending&&(c.pending_out=0))}function Ac(a,c){bp(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,c);a.block_start=a.strstart;le(a.strm)}function Jb(a,c){a.pending_buf[a.pending++]=c}function $f(a,c){a.pending_buf[a.pending++]=c>>>8&255;a.pending_buf[a.pending++]=255&c}function al(a,c){var d,b,g=a.max_chain_length,p=a.strstart,k=a.prev_length,e=a.nice_match,l=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,m=a.window,h=a.w_mask,n=a.prev,r=a.strstart+258,u=m[p+k-
1],v=m[p+k];a.prev_length>=a.good_match&&(g>>=2);e>a.lookahead&&(e=a.lookahead);do if(m[(d=c)+k]===v&&m[d+k-1]===u&&m[d]===m[p]&&m[++d]===m[p+1]){p+=2;for(d++;m[++p]===m[++d]&&m[++p]===m[++d]&&m[++p]===m[++d]&&m[++p]===m[++d]&&m[++p]===m[++d]&&m[++p]===m[++d]&&m[++p]===m[++d]&&m[++p]===m[++d]&&p<r;);if(b=258-(r-p),p=r-258,b>k){if(a.match_start=c,k=b,b>=e)break;u=m[p+k-1];v=m[p+k]}}while((c=n[c&h])>l&&0!=--g);return k<=a.lookahead?k:a.lookahead}function Fe(a){var c,d,b=a.w_size;do{if(d=a.window_size-
a.lookahead-a.strstart,a.strstart>=b+(b-262)){ab.arraySet(a.window,a.window,b,b,0);a.match_start-=b;a.strstart-=b;a.block_start-=b;var g=c=a.hash_size;do{var p=a.head[--g];a.head[g]=p>=b?p-b:0}while(--c);g=c=b;do p=a.prev[--g],a.prev[g]=p>=b?p-b:0;while(--c);d+=b}if(0===a.strm.avail_in)break;g=a.strm;p=a.window;var k=a.strstart+a.lookahead,e=g.avail_in;if(c=(e>d&&(e=d),0===e)?0:(g.avail_in-=e,ab.arraySet(p,g.input,g.next_in,e,k),1===g.state.wrap?g.adler=hf(g.adler,p,e,k):2===g.state.wrap&&(g.adler=
sc(g.adler,p,e,k)),g.next_in+=e,g.total_in+=e,e),a.lookahead+=c,3<=a.lookahead+a.insert)for(d=a.strstart-a.insert,a.ins_h=a.window[d],a.ins_h=(a.ins_h<<a.hash_shift^a.window[d+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[d+3-1])&a.hash_mask,a.prev[d&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=d,d++,a.insert--,!(3>a.lookahead+a.insert)););}while(262>a.lookahead&&0!==a.strm.avail_in)}function qi(a,c){for(var d,b;;){if(262>a.lookahead){if(Fe(a),262>a.lookahead&&0===c)return 1;if(0===
a.lookahead)break}if(d=0,3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==d&&a.strstart-d<=a.w_size-262&&(a.match_length=al(a,d)),3<=a.match_length)if(b=me(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&
a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!=--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else b=me(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(b&&(Ac(a,!1),0===a.strm.avail_out))return 1}return(a.insert=2>a.strstart?a.strstart:2,4===c)?(Ac(a,!0),0===a.strm.avail_out)?3:4:a.last_lit&&(Ac(a,!1),0===a.strm.avail_out)?1:2}function jf(a,c){for(var d,
b,g;;){if(262>a.lookahead){if(Fe(a),262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}if(d=0,3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=2,0!==d&&a.prev_length<a.max_lazy_match&&a.strstart-d<=a.w_size-262&&(a.match_length=al(a,d),5>=a.match_length&&(1===a.strategy||3===a.match_length&&4096<a.strstart-a.match_start)&&
(a.match_length=2)),3<=a.prev_length&&a.match_length<=a.prev_length){g=a.strstart+a.lookahead-3;b=me(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=g&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!=--a.prev_length);if(a.match_available=0,a.match_length=2,a.strstart++,b&&(Ac(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if(me(a,
0,a.window[a.strstart-1])&&Ac(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}return(a.match_available&&(me(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=2>a.strstart?a.strstart:2,4===c)?(Ac(a,!0),0===a.strm.avail_out)?3:4:a.last_lit&&(Ac(a,!1),0===a.strm.avail_out)?1:2}function Hd(a,c,d,b,g){this.good_length=a;this.max_lazy=c;this.nice_length=d;this.max_chain=b;this.func=g}function cp(){this.strm=null;this.status=0;this.pending_buf=
null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=
this.hash_size=this.ins_h=0;this.dyn_ltree=new ab.Buf16(1146);this.dyn_dtree=new ab.Buf16(122);this.bl_tree=new ab.Buf16(78);ke(this.dyn_ltree);ke(this.dyn_dtree);ke(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new ab.Buf16(16);this.heap=new ab.Buf16(573);ke(this.heap);this.heap_max=this.heap_len=0;this.depth=new ab.Buf16(573);ke(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=
0}function bl(a,c){if(65534>c&&(a.subarray&&cl||!a.subarray&&dl))return String.fromCharCode.apply(null,ab.shrinkBuf(a,c));for(var d="",b=0;b<c;b++)d+=String.fromCharCode(a[b]);return d}function Ge(a){if(!(this instanceof Ge))return new Ge(a);this.options=ab.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},a||{});var c;a=this.options;a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<a.windowBits&&16>a.windowBits&&(a.windowBits+=16);this.err=0;this.msg="";
this.ended=!1;this.chunks=[];this.strm=new ri;this.strm.avail_out=0;var d=this.strm;var b=a.level;var g=a.method,p=a.windowBits,k=a.memLevel,e=a.strategy;if(d){var l,m,h,n=1;if(-1===b&&(b=6),0>p?(n=0,p=-p):15<p&&(n=2,p-=16),1>k||9<k||8!==g||8>p||15<p||0>b||9<b||0>e||4<e)b=je(d,-2);else{8===p&&(p=9);var r=new cp;b=(d.state=r,r.strm=d,r.wrap=n,r.gzhead=null,r.w_bits=p,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=k+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+
3-1)/3),r.window=new ab.Buf8(2*r.w_size),r.head=new ab.Buf16(r.hash_size),r.prev=new ab.Buf16(r.w_size),r.lit_bufsize=1<<k+6,r.pending_buf_size=4*r.lit_bufsize,r.pending_buf=new ab.Buf8(r.pending_buf_size),r.d_buf=1*r.lit_bufsize,r.l_buf=3*r.lit_bufsize,r.level=b,r.strategy=e,r.method=g,0===(h=d&&d.state?(d.total_in=d.total_out=0,d.data_type=2,(l=d.state).pending=0,l.pending_out=0,0>l.wrap&&(l.wrap=-l.wrap),l.status=l.wrap?42:113,d.adler=2===l.wrap?0:1,l.last_flush=0,dp(l),0):je(d,-2))&&((m=d.state).window_size=
2*m.w_size,ke(m.head),m.max_lazy_match=ag[m.level].max_lazy,m.good_match=ag[m.level].good_length,m.nice_match=ag[m.level].nice_length,m.max_chain_length=ag[m.level].max_chain,m.strstart=0,m.block_start=0,m.lookahead=0,m.insert=0,m.match_length=m.prev_length=2,m.match_available=0,m.ins_h=0),h)}}else b=-2;if(0!==b)throw Error(Ee[b]);if(a.header&&ep(this.strm,a.header),a.dictionary){if(c="string"==typeof a.dictionary?si(a.dictionary):"[object ArrayBuffer]"===el.call(a.dictionary)?new Uint8Array(a.dictionary):
a.dictionary,0!==(b=fp(this.strm,c)))throw Error(Ee[b]);this._dict_set=!0}}function ti(a,c){c=new Ge(c);if(c.push(a,!0),c.err)throw c.msg||Ee[c.err];return c.result}function fl(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function gp(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=
this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new ab.Buf16(320);this.work=new ab.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function gl(a,c,d,b){var g;a=a.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new ab.Buf8(a.wsize)),b>=a.wsize?(ab.arraySet(a.window,c,d-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((g=a.wsize-a.wnext)>b&&(g=b),ab.arraySet(a.window,c,d-b,g,a.wnext),
(b-=g)?(ab.arraySet(a.window,c,d-b,b,0),a.wnext=b,a.whave=a.wsize):(a.wnext+=g,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=g))),0}function He(a){if(!(this instanceof He))return new He(a);this.options=ab.assign({chunkSize:16384,windowBits:0,to:""},a||{});var c,d,b,g,p,k,e,l,m,h=this.options;h.raw&&0<=h.windowBits&&16>h.windowBits&&(h.windowBits=-h.windowBits,0===h.windowBits&&(h.windowBits=-15));0<=h.windowBits&&16>h.windowBits&&(!a||!a.windowBits)&&(h.windowBits+=32);15<h.windowBits&&
48>h.windowBits&&0==(15&h.windowBits)&&(h.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new ri;this.strm.avail_out=0;a=(b=this.strm,g=h.windowBits,b?(k=new gp,b.state=k,k.window=null,e=g,0!=(p=b&&b.state?(m=b.state,0>e?(l=0,e=-e):(l=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||15<e))?-2:(null!==m.window&&m.wbits!==e&&(m.window=null),m.wrap=l,m.wbits=e,b&&b.state?((c=b.state).wsize=0,c.whave=0,c.wnext=0,b&&b.state?(d=b.state,b.total_in=b.total_out=d.total=0,b.msg="",d.wrap&&(b.adler=
1&d.wrap),d.mode=1,d.last=0,d.havedict=0,d.dmax=32768,d.head=null,d.hold=0,d.bits=0,d.lencode=d.lendyn=new ab.Buf32(852),d.distcode=d.distdyn=new ab.Buf32(592),d.sane=1,d.back=-1,0):-2):-2):-2)&&(b.state=null),p):-2);if(a!==dc.Z_OK||(this.header=new hl,hp(this.strm,this.header),h.dictionary&&("string"==typeof h.dictionary?h.dictionary=si(h.dictionary):"[object ArrayBuffer]"===il.call(h.dictionary)&&(h.dictionary=new Uint8Array(h.dictionary)),h.raw&&(a=jl(this.strm,h.dictionary))!==dc.Z_OK)))throw Error(Ee[a]);
}function ui(a,c){c=new He(c);if(c.push(a,!0),c.err)throw c.msg||Ee[c.err];return c.result}function vi(a){this.version=a.readU32BE();this.width=a.readU32BE();this.height=a.readU32BE();this.layersNb=a.readU32BE()}function Og(a){let c=[,,,,];for(let d=0;d<c.length;d++)c[d]=String.fromCharCode(a.readByte());if(this.chunkType=c.join(""),this.chunkSize=a.readU32BE(),a.eof)throw"Truncated chunk";}function kl(a){return{major:a>>16&65535,minor:65535&a}}function wi(a,c){let d=new zb(new Uint8Array(Og.HEADER_LENGTH+
c));return d.writeString(a),d.writeU32BE(c),d}function kf(){}function Pg(a){function c(p,k){null===k?g.emitEvent("loadingProgress",[1,"Loading your "+p.friendly+"..."]):g.emitEvent("loadingProgress",[k,"Loading your "+p.friendly+" ("+Math.round(100*k)+"%)..."])}var d=[],b={},g=this;a.loadChibiFileUrl&&0<(""+a.loadChibiFileUrl).length?d.push({url:a.loadChibiFileUrl,friendly:"drawing layers",name:"layers",required:!0}):a.loadImageUrl&&0<(""+a.loadImageUrl).length&&d.push({url:a.loadImageUrl,friendly:"drawing",
name:"flat",required:!0});a.loadSwatchesUrl&&d.push({url:a.loadSwatchesUrl,friendly:"color swatches",name:"swatches",required:!1,noProgress:!0});this.load=function(){function p(){k.required?g.emitEvent("loadingFailure",["Failed to load your "+k.friendly+", please try again later."]):g.load()}if(0==d.length)g.emitEvent("loadingComplete",[b]);else{var k=d.shift(),e=new XMLHttpRequest;e.addEventListener("progress",function(l){c(k,l.lengthComputable&&!k.noProgress?l.loaded/l.total:null)},!1);e.addEventListener("load",
function(l){if(200==this.status){let m=this.response;g.emitEvent("loadingProgress",[1,"Starting ChickenPaint..."]);setTimeout(function(){(function(h,n){switch(h.name){case "flat":return new Promise(function(r,u){let v=new Blob([n],{type:"image/png"}),x=window.URL.createObjectURL(v);if(x){let C=new Image;C.onload=function(){let J=new Vc(this.width,this.height),H=new Na(0,0,"Layer 1");H.image=I.createFromImage(C);J.addLayerObject(J.getLayersRoot(),H);C=null;window.URL.revokeObjectURL(x);r(J)};C.src=
x}else u(null)});case "swatches":return(h=(new kf).read(n))?Promise.resolve(h):Promise.reject(null);case "layers":return function(r,u){function v(ea){let ja;var ra=Y;if(null!==ra&&0!==ra.length)if(null===ea||0===ea.length)ea=ra;else{var Oa=new Uint8Array(ra.length+ea.length);ea=(Oa.set(ra,0),Oa.set(ea,ra.length),Oa)}for(Y=ea;Y;){if(L<Y.length)Y=Y.subarray(L),L=0;else{L-=Y.length;Y=null;break}switch(C){case 0:if(Y.length<Og.HEADER_LENGTH)break;if(T=new Og(ja=new zb(Y)),Y=Y.subarray(ja.pos),U)if("ZEND"==
T.chunkType)C=45;else{"LAYR"==T.chunkType?(C=2,G=new ip(T,U.width,U.height)):"GRUP"==T.chunkType?(C=3,G=new jp(T,U.width,U.height)):(console.log("Unknown chunk type '"+T.chunkType+"', attempting to skip..."),L=T.chunkSize);continue}else if("HEAD"==T.chunkType){C=1;continue}else C=5;break;case 1:if(Y.length<T.chunkSize)break;if(0<kl((U=new vi(ja=new zb(Y))).version).major){C=5;break}H=(J=new Vc(U.width,U.height)).getLayersRoot();L=T.chunkSize;C=0;continue;case 2:if(Y=G.decode(Y),G.done){J.addLayerObject(H,
G.layer);C=0;continue}break;case 3:if(Y=G.decode(Y),G.done){J.addLayerGroupObject(H,G.layer,G.childLayers);C=0;continue}}break}}u=u||{};let x=new (X(xi).Inflate)({}),C=0,J=null,H=null,G,L=0,U=null,T=null,Y=null;return(new Promise(function(ea){if(r instanceof ArrayBuffer)ea(r);else{let ja=new FileReader;ja.onload=function(){ea(this.result)};ja.readAsArrayBuffer(r)}})).then(ea=>new Promise(function(ja,ra){let Oa=new Uint8Array(ea);(function(V){for(let Ga=0;8>Ga;Ga++)if(V[Ga]!="CHIBIOEK".charCodeAt(Ga))return!1;
return!0})(Oa)?(Oa=Oa.subarray(8),x.onData=v,x.onEnd=function(V){0===V&&45==C?(!1!==u.upgradeMultiplyLayers&&10>U.version&&J.upgradeMultiplyLayers(u.upgradeMultiplyLayers),J.selectTopmostVisibleLayer(),ja(J)):ra("Fatal error decoding ChibiFile: "+V)},x.push(Oa,!0)):ra("This doesn't appear to be a ChibiPaint layers file, is it damaged?")}))}(n);default:return Promise.reject("Unexpected resource type '"+h.name+"'")}})(k,m).then(function(h){b[k.name]=h;g.load()},function(){g.emitEvent("loadingFailure",
["Failed to read your "+k.friendly])})},0)}else p()},!1);e.addEventListener("error",p);c(k,k.noProgress?null:0);e.open("GET",k.url,!0);e.responseType="arraybuffer";e.send()}}}function yi(a){(a=a.split(/[-_]/,1)[0].toLowerCase())in zi?(Qg=zi[a],Ai=a):(Qg=Rg,Ai="en")}function ma(a){return a in Qg?Qg[a]:a}function bg(a){function c(g){null===g?d.emitEvent("savingProgress",[1,ma("Saving drawing...")]):d.emitEvent("savingProgress",[g,ma("Saving drawing...")+" ("+Math.round(100*g)+"%)"])}var d=this,b=!1;
a.rotation=a.rotation||0;this.save=function(){var g,p,k,e,l;(g=new Blob([function(m){for(var h=new Uint8Array(m.length),n=0;n<m.length;n++)h[n]=m.charCodeAt(n);return h}(a.artwork.getFlatPNG(a.rotation))],{type:"image/png"}),a.artwork.isSimpleDrawing())?k=Promise.resolve(null):(e=a.artwork,l=l||{},k=Promise.resolve().then(()=>{var m,h;let n,r=new (X(xi).Deflate)({level:7}),u=[],v=new Uint8Array(8),x=e.getLayersRoot().getLinearizedLayerList(!1),C=l.forceOldVersion?0:function(H){for(let G of H.getLayersRoot().getLinearizedLayerList(!1))if(G instanceof
rb||G.mask||G.clip||G.blendMode>S.LM_LAST_CHIBIPAINT||G.blendMode===S.LM_MULTIPLY)return 10;return 0}(e),J=0===(h=kl(C)).major&&0===h.minor?"ChibiPaint v0.0":"ChickenPaint v"+h.major+"."+h.minor;h=Promise.resolve();r.onData=function(H){u.push(H)};for(let H=0;8>H;H++)v[H]="CHIBIOEK".charCodeAt(H);for(let H of(u.push(v),r.push((m=x.length,(n=wi("HEAD",vi.FIXED_HEADER_LENGTH)).writeU32BE(C),n.writeU32BE(e.width),n.writeU32BE(e.height),n.writeU32BE(m),n.getAsDataArray()),!1),x))h=h.then(()=>new Promise(function(G){var L=
r.push,U=H,T=U instanceof Na,Y=4*(T?5:6),ea=U.name.length;var ja=wi(T?"LAYR":"GRUP",Y+ea+((T?U.image.data.length:0)+(U.mask?U.mask.data.length:0)));var ra=0;let Oa;U.visible&&(ra|=1);T&&U.clip&&(ra|=2);U.mask&&(ra|=4);U.maskLinked&&(ra|=8);U.maskVisible&&(ra|=16);U.lockAlpha&&(ra|=64);!T&&U.expanded&&(ra|=32);U.blendMode===S.LM_MULTIPLY2?(Oa=S.LM_MULTIPLY,ra|=128):Oa=U.blendMode;ja.writeU32BE(Y+ea);ja.writeU32BE(Oa);ja.writeU32BE(U.alpha);ja.writeU32BE(ra);ja.writeU32BE(U.name.length);T||ja.writeU32BE(U.layers.length);
ja.writeString(U.name);if(T){T=ja.pos;Y=ja.data;ea=U.image.data;for(ra=0;ra<ea.length;ra+=I.BYTES_PER_PIXEL)Y[T++]=ea[ra+I.ALPHA_BYTE_OFFSET],Y[T++]=ea[ra+I.RED_BYTE_OFFSET],Y[T++]=ea[ra+I.GREEN_BYTE_OFFSET],Y[T++]=ea[ra+I.BLUE_BYTE_OFFSET];ja.pos=T}U.mask&&(U=U.mask,ja.data.set(U.data,ja.pos),ja.pos+=U.data.length);ja=ja.getAsDataArray();L.call(r,ja,!1);setTimeout(G,10)}));return h.then(()=>new Promise((H,G)=>{r.onEnd=function(L){if(0===L)if("undefined"!=typeof Blob)H({bytes:new Blob(u,{type:"application/octet-stream"}),
version:J});else{L=new Uint8Array(u.map(T=>T.byteLength).reduce((T,Y)=>T+Y,0));let U=0;for(let T of u)L.set(T,U),U+=T.byteLength;H({bytes:L,version:J})}else G(L)};r.push(wi("ZEND",0).getAsDataArray(),!0)}))}));k.then(function(m){if(b)d.emitEvent("savingFailure");else if(p=a.swatches?new Blob([(new kf).write(a.swatches)],{type:"application/octet-stream"}):null,a.url){var h=new FormData;h.append("beginMarker","This marker ensures the upload wasn't truncated");h.append("painter","ChickenPaint v2.0");
h.append("picture",g);g=null;m?(h.append("chibifileFormat",m.version),h.append("chibifile",m.bytes),m=null,h.append("rotation",""+a.rotation)):h.append("rotation","0");p&&(h.append("swatches",p),p=null);h.append("endMarker","This marker ensures the upload wasn't truncated");c(.5);fetch(a.url,{method:"POST",mode:"same-origin",headers:{"X-Requested-With":"chickenpaint"},body:h}).then(n=>{if(!n.ok)throw Error("Network response was not ok (".concat(n.status,")"));return n.text()}).then(n=>{/^CHIBIOK/.test(n)?
(c(1),d.emitEvent("savingComplete")):d.emitEvent("savingFailure",[n])}).catch(n=>{d.emitEvent("savingFailure",[n.message])})}else h="oekaki_"+(new Date).toISOString().split(".")[0].replace(/[^0-9]/g,"_"),X(cg).saveAs(g,h+".png"),m&&X(cg).saveAs(m.bytes,h+".chi"),p&&X(cg).saveAs(p,h+".aco")}).catch(function(m){d.emitEvent("savingFailure")})};this.cancel=function(){b=!0}}function kp(a,c,d){function b(){var Y=m.width/2,ea=m.height/2;if(h.fillStyle="white",h.fillRect(0,0,m.width,m.height),G==H.length){var ja=
v.width,ra=v.height,Oa=Math.round(Y-ja/2),V=Math.round(ea-ra/2);h.drawImage(v,Oa,V);var Ga=L;p||((p=document.createElement("canvas")).width=ja,p.height=ra,e=p.getContext("2d"));e.globalCompositeOperation="copy";e.drawImage(n,0,0);k||((k=document.createElement("canvas")).width=ja,k.height=ra,l=k.getContext("2d"));l.globalCompositeOperation="copy";l.drawImage(J,0,0);l.globalCompositeOperation="source-in";l.drawImage(J,0,Math.round(170*Ga));e.globalCompositeOperation="source-over";e.drawImage(k,0,0);
e.drawImage(r,0,0);e.globalCompositeOperation="screen";e.drawImage(C,0,0);e.globalCompositeOperation="multiply";e.drawImage(x,0,0);h.globalAlpha=.88;h.drawImage(p,Oa,V);h.globalAlpha=1;h.drawImage(u,Oa,V);ea=Math.round(ea+ra/2+2)}if(""!=U)for(h.fillStyle="black",Ga=U.split("\n"),ja=0;ja<Ga.length;ja++)ra=Ga[ja],Oa=h.measureText(ra).width,ea+=28,h.fillText(ra,Y-Oa/2,ea)}function g(){m.width=m.clientWidth;m.height=m.clientHeight;h.font="14pt sans-serif";b()}var p,k,e,l,m=document.createElement("canvas"),
h=m.getContext("2d"),n=new Image,r=new Image,u=new Image,v=new Image,x=new Image,C=new Image,J=new Image,H=[n,r,u,v,x,C,J],G=0,L=0,U="";d+="splash/";for(var T=0;T<H.length;T++)H[T].onload=function(){++G==H.length&&b()};n.src=d+"cup.png";C.src=d+"highlights.png";r.src=d+"lid.png";u.src=d+"lines.png";x.src=d+"shading.png";J.src=d+"smoothie.png";v.src=d+"text.png";c.on("loadingProgress",function(Y,ea){L=Y;U=ea;b()});c.on("loadingFailure",function(Y){L=0;U=Y;b()});c.on("loadingComplete",function(){window.removeEventListener("resize",
g);a.removeChild(m)});window.addEventListener("resize",g);m.className="chickenpaint-splash-screen";a.appendChild(m);g()}function ll(a){for(var c={DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27," ":32,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,SHIFT:16,"[":219,"]":221,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,0:48,"-":189,"=":187,"+":187,";":187,META:91,LEFTMETA:91,RIGHTMETA:91,ALT:18,ALTGRAPH:18,OPTION:18,CONTROL:17},d=65;90>=d;d++)c[String.fromCharCode(d)]=d;if((a=a.toUpperCase())in c)return c[a]}
function Od(){var a,c=null,d=this;this.isPen=function(){var b;return!!c&&(1==(b=c.pointerType)||3==b)};this.getPressure=function(){return c?c.pressure:1};this.pluginLoaded=function(){console.log("Wacom tablet support loaded!");c=a.penAPI};this.isTabletPresent=function(){return!!c};this.detectTablet=function(){if(/Chrome/i.test(navigator.userAgent)&&!/OPR/.test(navigator.userAgent))console.log("Not attempting to load Wacom tablet plugin, since this is Chrome");else{if(console.log("Attempting to load Wacom tablet support..."),
"classid"in(a=document.createElement("object")))a.classid="CLSID:092dfa86-5807-5a94-bf3b-5a53ba9e5308";else{var b=document.createElement("param");b.name="onload";b.value="onWacomPluginLoaded";a.appendChild(b);a.type="application/x-wacomtabletplugin"}a.style.position="absolute";a.style.visibility="hidden";a.onload="onWacomPluginLoaded";document.body.appendChild(a);setTimeout(function(){d.isTabletPresent()||console.log("Looks like the Wacom plugin isn't installed, or failed to load.")},5E3)}}}function ml(){let a,
c,d,b,g,p,k,e;this.x0=this.y0=this.x1=this.y1=this.x2=this.y2=this.x3=this.y3=0;let l=m=>{let h=3*m,n=h*m;m*=m*m;let r=2*n,u=6*m,v=this.x0-2*this.x1+this.x2,x=this.y0-2*this.y1+this.y2,C=3*(this.x1-this.x2)-this.x0+this.x3,J=3*(this.y1-this.y2)-this.y0+this.y3;a=this.x0;g=this.y0;c=(this.x1-this.x0)*h+v*n+C*m;p=(this.y1-this.y0)*h+x*n+J*m;d=v*r+C*u;k=x*r+J*u;b=C*u;e=J*u};this.compute=(m,h,n)=>{l(1/n);m[0]=a;h[0]=g;for(let r=1;r<n;r++)a+=c,g+=p,c+=d,p+=k,d+=b,k+=e,m[r]=a,h[r]=g}}function nl(a,c,d,
b){var g,p=0;return"boolean"!=typeof c&&(b=d,d=c,c=void 0),function(){function k(){p=+new Date;d.apply(e,m)}var e=this,l=+new Date-p,m=arguments;b&&!g&&k();g&&clearTimeout(g);void 0===b&&l>a?k():!0!==c&&(g=setTimeout(b?function(){g=void 0}:k,void 0===b?a-l:a))}}function Ie(a){this.points=a||[]}function Vb(a,c){this.x=a;this.y=c}function ol(a){for(var c=document.createElement("canvas"),d=c.getContext("2d"),b=d.createImageData(64,64),g=b.data,p=0,k=0;64>k;k++)for(var e=0;64>e;e++)0!=(8&e)^0!=(8&k)?
(g[p++]=255,g[p++]=255,g[p++]=255):(g[p++]=204,g[p++]=204,g[p++]=204),g[p++]=255;return c.width=64,c.height=64,d.putImageData(b,0,0),a.createPattern(c,"repeat")}function Sg(a,c){c+="Style";a.globalCompositeOperation="exclusion";"exclusion"==a.globalCompositeOperation?a[c]="white":(a.globalCompositeOperation="difference",a[c]="#888","difference"!=a.globalCompositeOperation&&(a[c]="black"))}function dg(a){function c(){var x=a?X(ia)(d).height():X(ia)(d).width();n=l/(k-p)*x;x=(e-p)/(k-p)*(x-n);g.style[a?
"height":"width"]=n+"px";b.style[a?"height":"width"]=n+"px";b.style[a?"top":"left"]=x+"px"}let d=document.createElement("div"),b=document.createElement("div"),g=document.createElement("div"),p=0,k=1,e=0,l=1,m=10,h=!1,n=1,r=!1,u,v=this;this.setValues=function(x,C,J,H){e=x;l=C;p=J;k=H;c()};this.setBlockIncrement=function(x){m=x};this.setUnitIncrement=function(x){};this.getElement=function(){return d};this.getValueIsAdjusting=function(){return h};d.className="chickenpaint-scrollbar "+(a?"chickenpaint-scrollbar-vertical":
"chickenpaint-scrollbar-horizontal");b.className="chickenpaint-scrollbar-handle";b.setAttribute("touch-action","none");g.className="chickenpaint-scrollbar-handle-inner";b.appendChild(g);d.appendChild(b);b.addEventListener("pointerdown",function(x){x.stopPropagation();u=a?x.pageY-X(ia)(d).offset().top:x.pageX-X(ia)(d).offset().left;b.setPointerCapture(x.pointerId);X(ia)(b).addClass("dragging");r=!0});b.addEventListener("pointermove",function(x){if(r){h=!0;let C=a?X(ia)(d).height():X(ia)(d).width();
x=a?x.pageY-X(ia)(d).offset().top:x.pageX-X(ia)(d).offset().left;e+=(x-u)*(k-p)/(C-n);e=Math.min(Math.max(e,p),k);u=x;v.emitEvent("valueChanged",[e]);c();h=!1}});b.addEventListener("pointerup",function(x){if(x.stopPropagation(),r){try{b.releasePointerCapture(x.pointerId)}catch(C){}X(ia)(b).removeClass("dragging");r=!1}});b.addEventListener("click",function(x){x.stopPropagation()});d.addEventListener("click",function(x){this==d&&((a?x.pageY-X(ia)(d).offset().top:x.pageX-X(ia)(d).offset().left)<parseInt(b.style[a?
"top":"left"],10)?e-=m:e+=m,v.emitEvent("valueChanged",[e]),c())})}function Bc(){this.modes=[]}function Tg(a){function c(){}function d(){}function b(){this.shouldPaintBrushPreview=!1;this.oldPreviewRect=null}function g(){b.call(this);this.smoothMouse={x:0,y:0}}function p(){var F,N;this.mouseDown=function(ca,la,xa){if(!this.capture&&0==la&&!ca.altKey&&!X(ac).isPressed("space")&&J())return this.capture=!0,F=N={x:ub+.5,y:ib+.5},this.eraseBrushPreview(),!0};this.mouseDrag=function(ca){if(this.capture){var la=
new Ia(Math.min(F.x,N.x)-1-1,Math.min(F.y,N.y)-1-1,Math.max(F.x,N.x)+1+1+1,Math.max(F.y,N.y)+1+1+1);if(N={x:ub+.5,y:ib+.5},ca.shiftKey){var xa=Math.PI/4;ca=Math.round(Math.atan2(N.y-F.y,N.x-F.x)/xa);switch(ca){case 0:case 4:N.y=F.y;break;case 2:case 6:N.x=F.x;break;default:ca*=xa,xa=Math.sqrt((N.y-F.y)*(N.y-F.y)+(N.x-F.x)*(N.x-F.x)),N.x=F.x+xa*Math.cos(ca),N.y=F.y+xa*Math.sin(ca)}}return la.union(new Ia(Math.min(F.x,N.x)-1-1,Math.min(F.y,N.y)-1-1,Math.max(F.x,N.x)+1+1+1,Math.max(F.y,N.y)+1+1+1)),
Ya(la),!0}this.mouseMove.call(this,ca)};this.mouseUp=function(ca,la,xa){if(this.capture&&0==la)return ca=L(F),la=L(N),this.capture=!1,this.drawLine(ca,la),Ya(new Ia(Math.min(F.x,N.x)-1-1,Math.min(F.y,N.y)-1-1,Math.max(F.x,N.x)+1+1+1,Math.max(F.y,N.y)+1+1+1)),!0};this.paint=function(){this.capture?(ha.lineWidth=1,ha.beginPath(),ha.moveTo(F.x,F.y),ha.lineTo(N.x,N.y),ha.stroke()):b.prototype.paint.call(this)};b.call(this)}function k(){let F=0,N,ca,la,xa;this.mouseDown=function(za,db,hb){if(!this.capture&&
0==db&&!za.altKey&&!X(ac).isPressed("space")&&J())return za=L({x:ub,y:ib}),F=0,N=ca=la=xa=za,this.capture=!0,this.eraseBrushPreview(),!0};this.mouseDrag=function(za){if(this.capture&&0===F)return la=xa=L({x:ub,y:ib}),Ka.repaintAll(),!0;this.mouseMove.call(this,za)};this.mouseUp=function(za,db,hb){if(this.capture&&0==db){switch(F){case 0:F=1;break;case 1:F=2;break;case 2:this.capture=!1;db=N;hb=ca;let Da=la,lb=xa;za=new ml;za.x0=db.x;za.y0=db.y;za.x1=hb.x;za.y1=hb.y;za.x2=Da.x;za.y2=Da.y;za.x3=lb.x;
za.y3=lb.y;db=Array(500);hb=Array(500);za.compute(db,hb,500);Ja.beginStroke(db[0],hb[0],1);for(za=1;500>za;za++)Ja.continueStroke(db[za],hb[za],1);Ja.endStroke();Ka.repaintAll()}return!0}};this.mouseMove=function(za,db){if(this.capture)return za=L({x:ub,y:ib}),1==F?ca=za:2==F&&(la=za),Ka.repaintAll(),!0;b.prototype.mouseMove.call(this,za,db)};this.paint=function(){if(this.capture){var za=new ml;let db=T(N),hb=T(ca),Da=T(la),lb=T(xa);za.x0=db.x;za.y0=db.y;za.x1=hb.x;za.y1=hb.y;za.x2=Da.x;za.y2=Da.y;
za.x3=lb.x;za.y3=lb.y;let ec=Array(100),xc=Array(100);za.compute(ec,xc,100);ha.beginPath();ha.moveTo(ec[0],xc[0]);for(za=1;100>za;za++)ha.lineTo(ec[za],xc[za]);ha.moveTo(~~db.x,~~db.y);ha.lineTo(~~hb.x,~~hb.y);ha.moveTo(~~Da.x,~~Da.y);ha.lineTo(~~lb.x,~~lb.y);ha.stroke()}else b.prototype.paint.call(this)};b.call(this)}function e(){var F;this.mouseDown=function(N,ca,la){return!!this.capture||(X(ac).isPressed("space")||(0!=ca||this.transient&&!N.altKey)&&2!=ca?void(this.transient&&va.pop()):(F=ca,this.capture=
!0,x("crosshair"),this.mouseDrag(N),!0))};this.mouseDrag=function(N){if(this.capture)return N=L({x:ub,y:ib}),Ja.isPointWithin(N.x,N.y)&&a.setCurColor(new Gb(Ja.colorPicker(N.x,N.y))),!0};this.mouseUp=function(N,ca,la){if(this.capture&&ca==F)return F=-1,this.capture=!1,x("default"),this.transient&&va.pop(),!0};this.enter=function(){c.prototype.enter.call(this);F=-1}}function l(){var F,N,ca,la;this.keyDown=function(xa){if(" "===xa.key)return this.capture||x("grab"),!0};this.keyUp=function(xa){if(this.transient&&
1!=la&&" "===xa.key)return x("default"),va.pop(),!0};this.mouseDown=function(xa,za,db){return!!this.capture||(1==za||X(ac).isPressed("space")&&0==za||!this.transient&&0==za?(this.capture=!0,la=za,F=xa.pageX,N=xa.pageY,ca=Ka.getOffset(),x("grabbing"),!0):void(this.transient&&va.pop()))};this.mouseDrag=function(xa){if(this.capture)return Ka.setOffset(ca.x+xa.pageX-F,ca.y+xa.pageY-N),!0};this.mouseUp=function(xa,za,db){if(this.capture&&za==la)return la=-1,this.capture=!1,this.transient&&!X(ac).isPressed("space")&&
(x("default"),va.pop()),!0};this.enter=function(){x("grab")}}function m(){}function h(){var F,N=new Ia(0,0,0,0),ca=-1;this.mouseDown=function(la,xa,za){if(!this.capture&&0==xa&&!la.altKey&&!X(ac).isPressed("space"))return la=U({x:ub,y:ib}),ca=xa,N.makeEmpty(),F=la,Ka.repaintAll(),this.capture=!0,!0};this.mouseDrag=function(la){if(!this.capture)return!1;var xa=U({x:ub,y:ib});la=la.shiftKey;var za=~~Math.max(Math.abs(xa.x-F.x),Math.abs(xa.y-F.y));return xa.x>=F.x?(N.left=F.x,N.right=(la?F.x+za:xa.x)+
1):(N.left=la?F.x-za:xa.x,N.right=F.x+1),xa.y>=F.y?(N.top=F.y,N.bottom=(la?F.y+za:xa.y)+1):(N.top=la?F.y-za:xa.y,N.bottom=F.y+1),Ka.repaintAll(),!0};this.mouseUp=function(la,xa,za){if(this.capture&&xa==ca)return Ja.rectangleSelection(N),N.makeEmpty(),Ka.repaintAll(),this.capture=!1,ca=-1,!0};this.paint=function(){N.isEmpty()||(ha.lineWidth=1,ja(ha,N))}}function n(){var F,N,ca=!1;this.mouseDown=function(la,xa,za){if(!this.capture&&0==xa&&!X(ac).isPressed("space")&&C())return F=L({x:ub,y:ib}),N=la.altKey,
ca=!0,this.capture=!0,!0};this.mouseDrag=nl(25,function(la){if(this.capture){la=L({x:ub,y:ib});var xa=la.x-F.x,za=la.y-F.y,db=~~xa,hb=~~za;return(0!=db||0!=hb)&&(Ja.move(db,hb,N&&ca),ca=!1),F.x=la.x-(xa-db),F.y=la.y-(za-hb),!0}});this.mouseUp=function(la,xa,za){if(this.capture&&0==xa)return this.capture=!1,this.transient&&va.pop(),!0}}function r(){function F(Ea,La){return{x:(Ea.x+La.x)/2,y:(Ea.y+La.y)/2}}function N(Ea){return{x:Math.round(Ea.x),y:Math.round(Ea.y)}}function ca(Ea,La){for(var Sa=0;Sa<
Ea.points.length;Sa++)if(49>=(La.x-Ea.points[Sa].x)*(La.x-Ea.points[Sa].x)+(La.y-Ea.points[Sa].y)*(La.y-Ea.points[Sa].y))return 2*Sa;for(Sa=0;Sa<Ea.points.length;Sa++){var qb=Ea.points[Sa],sb=Ea.points[(Sa+1)%Ea.points.length];sb=new Vb(sb.x-qb.x,sb.y-qb.y);qb=new Vb(La.x-qb.x,La.y-qb.y);var Mc=sb.getLength(),Qc=sb.getScaled(1/Mc);Mc=qb.getScaled(1/Mc);Qc=Qc.getDotProduct(Mc);if(0<=Qc&&1>=Qc&&(sb.scale(Qc),49>=(sb.x-qb.x)*(sb.x-qb.x)+(sb.y-qb.y)*(sb.y-qb.y)))return 2*Sa+1}return Ea.containsPoint(La)?
-3:-2}function la(){var Ea=hb.getTransformed(Ib),La=ca(Ea,{x:ub,y:ib});switch(La){case 0:case 2:case 4:case 6:La=~~(La/2);let Sa=Ea.points[La],qb=Ea.points[(La+1)%4];xa(Vb.subtractPoints(Ea.points[(La+3)%4],Sa).normalize().add(Vb.subtractPoints(qb,Sa).normalize()));break;case 1:case 3:case 5:case 7:xa(Vb.subtractPoints(Ea.points[(~~(La/2)+1)%4],Ea.points[~~(La/2)]).getPerpendicular());break;case -3:x("move");break;default:x("default")}}function xa(Ea){Ea=Math.floor(Math.atan2(-Ea.y,Ea.x)/(Math.PI/
4)+.5);switch(0>Ea&&(Ea+=4),Ea){default:Ea="ew-resize";break;case 1:Ea="nesw-resize";break;case 2:Ea="ns-resize";break;case 3:Ea="nwse-resize"}x(Ea)}var za,db,hb,Da,lb,ec,xc=-1;this.mouseDown=function(Ea,La,Sa){if(!this.capture&&0==La&&!Ea.altKey&&!X(ac).isPressed("space"))return xc=ca(hb.getTransformed(Ib),{x:ub,y:ib}),lb=L(Da={x:ub,y:ib}),this.capture=!0,la(),!0};this.mouseDrag=nl(40,function(Ea){if(this.capture){var La={x:ub,y:ib};switch(xc){case -3:Ea=N(L(La));var Sa=Vb.subtractPoints(Ea,lb);
La=Sa.getTruncated();Sa=Sa.subtract(La);var qb=new Tb;qb.translate(La.x,La.y);za.preMultiply(qb);lb=Vb.subtractPoints(Ea,Sa);break;case -2:qb=Math.PI/4;Sa=hb.getCenter();var sb=T(Sa),Mc=Math.atan2(La.y-sb.y,La.x-sb.x)-Math.atan2(Da.y-sb.y,Da.x-sb.x);sb=new Tb;ec+=Mc;Ea=Ea.shiftKey?-za.decompose().rotate+Math.round(ec/qb)*qb:Mc;sb.rotateAroundPoint(Ea,Sa.x,Sa.y);za.preMultiply(sb);Da=La;break;case 0:case 2:case 4:case 6:qb=~~(xc/2);Sa=db.points[qb];sb=za.getInverted().getTransformedPoint(N(L(La)));
La=db.points[(qb+2)%4];qb=(sb.x-La.x)/(Sa.x-La.x);Sa=(sb.y-La.y)/(Sa.y-La.y);if(.001>Math.abs(qb)||.001>Math.abs(Sa)||isNaN(qb)||isNaN(Sa))return!0;Ea.shiftKey&&(Sa=qb=Ea=Math.max(qb,Sa));za.scaleAroundPoint(qb,Sa,La.x,La.y);break;case 1:case 5:case 3:case 7:Ea=~~(xc/2);sb=F(db.points[Ea],db.points[(Ea+1)%4]);La=za.getInverted().getTransformedPoint(N(L(La)));Ea=F(db.points[(Ea+2)%4],db.points[(Ea+3)%4]);sb=Vb.subtractPoints(sb,Ea);La=Vb.subtractPoints(La,Ea);Mc=sb.getLength();La=sb.getDotProduct(La)/
Mc/Mc;if(.001>Math.abs(La)||isNaN(La))return!0;1==xc||5==xc?(Sa=1,qb=La):(Sa=La,qb=1);za.scaleAroundPoint(Sa,qb,Ea.x,Ea.y)}return hb=db.getTransformed(za),Ja.transformAffineAmend(za),Ka.repaintAll(),!0}});this.mouseUp=function(Ea,La,Sa){if(this.capture&&0==La)return this.capture=!1,xc=-1,!0};this.mouseMove=function(){this.capture||la()};this.paint=function(){var Ea=hb.getTransformed(Ib).points,La=Array(2*Ea.length);for(var Sa=0;Sa<Ea.length;Sa++)La[Sa]=Ea[Sa];for(let sb=0;sb<Ea.length;sb++){Sa=Ea[sb];
var qb=Ea[(sb+1)%Ea.length];La[sb+Ea.length]={x:(Sa.x+qb.x)/2,y:(Sa.y+qb.y)/2}}Sg(ha,"fill");for(Sa=0;Sa<La.length;Sa++)ha.fillRect(La[Sa].x-3,La[Sa].y-3,7,7);ea(ha,Ea)};this.keyDown=function(Ea){return"Enter"===Ea.key?(a.actionPerformed({action:"CPTransformAccept"}),!0):"Escape"===Ea.key?(a.actionPerformed({action:"CPTransformReject"}),!0):void 0};this.enter=function(){c.prototype.enter.call(this);var Ea,La=Ja.transformAffineBegin();za=La.transform;La.rect;(Ea=La.selection).isEmpty()&&(Ea=La.rect.clone());
hb=(db=new Ie(Ea.toPoints())).getTransformed(za);xc=-1;ec=0;Ka.repaintAll()};this.leave=function(){c.prototype.leave.call(this);Ka.repaintAll()}}function u(){var F,N,ca=0,la=!1,xa=-1;this.mouseDown=function(za,db,hb){return!!this.capture||(!this.transient&&0==db&&!za.altKey&&!X(ac).isPressed("space")||0==db&&!za.altKey&&!X(ac).isPressed("space")&&X(ac).isPressed("r")?(F={x:ub,y:ib},ca=Ka.getRotation(),N=Ib.clone(),la=!1,this.capture=!0,xa=db,!0):void(this.transient&&va.pop()))};this.mouseDrag=function(za){if(this.capture){var db=
ub,hb=ib,Da=X(ia)(ya).width()/2,lb=X(ia)(ya).height()/2;za=ya.width/2;var ec=ya.height/2;db=Math.atan2(hb-lb,db-Da)-Math.atan2(F.y-lb,F.x-Da);hb=new Tb;return hb.rotateAroundPoint(db,za,ec),hb.multiply(N),Ka.setRotation(ca+db),Ka.setOffset(~~hb.getTranslateX(),~~hb.getTranslateY()),la=!0,!0}};this.mouseUp=function(za,db,hb){if(this.capture&&db==xa){if(la){za=Math.round(Wb/(Math.PI/2))*Math.PI/2;if(Math.abs(Wb-za)<5/180*Math.PI){hb=za-ca;za=ya.width/2;db=ya.height/2;let Da=new Tb;Da.rotateAroundPoint(hb,
za,db);Da.multiply(N);Ka.setRotation(ca+hb);Ka.setOffset(~~Da.getTranslateX(),~~Da.getTranslateY());Ka.repaintAll()}Ka.emitEvent("canvasRotated90",[Ka.getRotation90()])}else Ka.resetRotation();return this.capture=!1,this.transient&&!X(ac).isPressed("r")&&va.pop(),!0}};this.keyUp=function(za){if(this.transient&&1!=xa&&" "===za.key)return x("default"),va.pop(),!0};this.keyDown=function(za){if("r"===za.key.toLowerCase())return!0}}function v(){p.call(this)}function x(F){ya.getAttribute("data-cursor")!=
F&&ya.setAttribute("data-cursor",F)}function C(){var F=Ja.getActiveLayer();return F.visible&&F.ancestorsAreVisible()?0!=F.alpha||(a.showLayerNotification(F,ma("Whoops! This layer's opacity is currently 0%"),"opacity"),!1):(a.showLayerNotification(F,ma("Whoops! This layer is currently hidden"),"layer"),!1)}function J(){var F=Ja.getActiveLayer();return F instanceof rb&&!Ja.isEditingMask()?(a.showLayerNotification(F,ma("Whoops! You can't draw on a group"),"layer"),!1):C()}function H(F,N,ca,la,xa){F.setValues(-xa,
la,N-la-xa+ca/4,N+ca-xa-ca/4);F.setBlockIncrement(Math.max(1,~~(.66*la)));F.setUnitIncrement(Math.max(1,~~(.05*la)))}function G(){Ib.setToIdentity();Ib.translate(lc,wc);Ib.scale(ob,ob);Ib.rotate(Wb);if(null!=Lc&&null!=D&&!Lc.getValueIsAdjusting()&&!D.getValueIsAdjusting()){var F=ra(new Ia(0,0,Pa.width,Pa.height));H(Lc,F.left,F.getWidth(),X(ia)(ya).width(),Ka.getOffset().x);H(D,F.top,F.getHeight(),X(ia)(ya).height(),Ka.getOffset().y)}Ka.repaintAll()}function L(F){return Ib.getInverted().getTransformedPoint(F)}
function U(F){F=L(F);return F.x=Math.floor(F.x),F.y=Math.floor(F.y),F}function T(F){return Ib.getTransformedPoint(F)}function Y(F){F=T(F);return F.x=Math.round(F.x),F.y=Math.round(F.y),F}function ea(F,N){F.beginPath();F.moveTo(N[0].x,N[0].y);for(var ca=1;ca<N.length;ca++)F.lineTo(N[ca].x,N[ca].y);F.lineTo(N[0].x,N[0].y);F.stroke()}function ja(F,N){var ca=T({x:(N.left+N.right)/2,y:(N.top+N.bottom)/2});N=N.toPoints();for(var la=0;la<N.length;la++)N[la]=Y(N[la]),N[la].x+=.5*Math.sign(ca.x-N[la].x),N[la].y+=
.5*Math.sign(ca.y-N[la].y);ea(F,N)}function ra(F){var N=Y({x:F.left-1,y:F.top-1}),ca=Y({x:F.left-1,y:F.bottom}),la=Y({x:F.right,y:F.top-1});F=Y({x:F.right,y:F.bottom});N=new Ia(Math.min(Math.min(N.x,ca.x),Math.min(la.x,F.x)),Math.min(Math.min(N.y,ca.y),Math.min(la.y,F.y)),Math.max(Math.max(N.x,ca.x),Math.max(la.x,F.x))+1,Math.max(Math.max(N.y,ca.y),Math.max(la.y,F.y))+1);return N.grow(2,2),N}function Oa(){var F=ya.width,N=ya.height,ca=T({x:Ja.width/2,y:Ja.height/2});Ka.setOffset(Math.round(lc+F/2-
ca.x),Math.round(wc+N/2-ca.y))}function V(F,N,ca){if(F=Math.max(.1,Math.min(16,F)),Ka.getZoom()!=F){var la=Ka.getOffset();Ka.setOffset(la.x+~~((N-la.x)*(1-F/Ka.getZoom())),la.y+~~((ca-la.y)*(1-F/Ka.getZoom())));Ka.setZoom(F);Ka.repaintAll()}}function Ga(F){var N=X(ia)(ya).width(),ca=X(ia)(ya).height();let la=parseFloat(F);.01>Math.abs(la-1)?F=1:.2>Math.abs(la-2)?F=2:.08>Math.abs(la-.5)&&(F=.5);V(F,N/2,ca/2)}function qa(F){return $b?P.getPressure():"mouse"===F.pointerType&&0!==F.buttons&&0===F.pressure?
1:"touch"===F.pointerType?(0!==F.pressure&&(ed=!0),ed)?2*F.pressure:1:2*F.pressure}function pb(){fb||(fb=!0,window.requestAnimationFrame(function(){Ka.paint()}))}function Ya(F){Wa.union(F);pb()}function Ub(){qc=Ja.getBounds();Ka.repaintAll()}let Lb,Ka=this,Ma=document.createElement("div"),ka=document.createElement("div"),Ba=document.createElement("div"),ya=document.createElement("canvas"),ha=ya.getContext("2d"),Pa=document.createElement("canvas"),pa=Pa.getContext("2d"),Ua=ol(ha),Ja=a.getArtwork(),
ob=1,lc=0,wc=0,Wb=0,Ib=new Tb,vb=!1,fc=!1,nb=32,ub=0,ib=0,cc=!1,yb=[!1,!1,!1],$b=!1,Pb=!1,ed=!1,qc=Ja.getBounds(),Wa=new Ia(0,0,0,0),fb=!1,hc;let Za,rd,sd,A,ua,Kc,kd,gc,Fd=[],va=new Bc,rc,Lc=new dg(!1),D=new dg(!0),P=Od.getRef();Math.sign=Math.sign||function(F){return 0==(F=+F)||isNaN(F)?F:0<F?1:-1};c.prototype.transient=!1;c.prototype.capture=!1;c.prototype.enter=function(){x("default")};c.prototype.leave=function(){this.capture=!1};c.prototype.mouseMove=c.prototype.paint=c.prototype.mouseDown=c.prototype.mouseDrag=
c.prototype.mouseUp=c.prototype.keyDown=c.prototype.suspend=c.prototype.resume=c.prototype.keyUp=function(){};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.mouseDown=function(F,N,ca){var la=X(ac).isPressed("space");!la&&(2==N||0==N&&F.altKey)?(va.push(Za,!0),va.peek().mouseDown(F,N,ca)):la||0!=N||F.altKey||!X(ac).isPressed("r")?(1==N||!F.altKey&&la&&0==N)&&(va.push(rd,!0),va.peek().mouseDown(F,N,ca)):(va.push(sd,!0),va.peek().mouseDown(F,N,ca))};d.prototype.keyDown=
function(F){if("r"===F.key.toLowerCase()&&" "!==F.key)va.push(sd,!0),va.peek().keyDown(F);else if("r"!==F.key.toLowerCase()&&" "===F.key&&!F.altKey)return va.push(rd,!0),va.peek().keyDown(F),!0};b.prototype=Object.create(c.prototype);b.prototype.constructor=b;b.prototype.getBrushPreviewOval=function(){var F=a.getBrushSize()*ob;return new Ia(ub-F/2,ib-F/2,ub+F/2,ib+F/2)};b.prototype.queueBrushPreview=function(){if(va.peek()==this){this.shouldPaintBrushPreview=!0;var F=this.getBrushPreviewOval();F.grow(2,
2);null!=this.oldPreviewRect&&(F.union(this.oldPreviewRect),this.oldPreviewRect=null);Ya(F)}};b.prototype.eraseBrushPreview=function(){this.shouldPaintBrushPreview=!1;null!=this.oldPreviewRect&&(Ya(this.oldPreviewRect),this.oldPreviewRect=null)};b.prototype.mouseMove=function(F,N){this.queueBrushPreview()};b.prototype.enter=function(){c.prototype.enter.call(this);cc&&this.queueBrushPreview()};b.prototype.leave=function(){c.prototype.leave.call(this);this.eraseBrushPreview()};b.prototype.suspend=b.prototype.leave;
b.prototype.resume=b.prototype.enter;b.prototype.paint=function(){if(this.shouldPaintBrushPreview){this.shouldPaintBrushPreview=!1;var F=this.getBrushPreviewOval();ha.beginPath();ha.arc((F.left+F.right)/2,(F.top+F.bottom)/2,F.getWidth()/2,0,2*Math.PI);ha.stroke();F.grow(2,2);null==this.oldPreviewRect?this.oldPreviewRect=F:this.oldPreviewRect.union(F)}};g.prototype=Object.create(b.prototype);g.prototype.constructor=g;g.prototype.mouseDown=function(F,N,ca){if(!this.capture&&0==N&&!F.altKey&&!X(ac).isPressed("space")&&
J()&&(F=L({x:ub,y:ib}),this.eraseBrushPreview(),Ja.beginStroke(F.x,F.y,ca)))return this.capture=!0,this.smoothMouse=F,!0};g.prototype.mouseDrag=function(F,N){if(("number"!=typeof navigator.maxTouchPoints||3>navigator.maxTouchPoints)&&b.prototype.mouseMove.call(this,F,N),this.capture){F=L({x:ub,y:ib});var ca=Math.min(.999,Math.pow(a.getBrushInfo().smoothing,.3));return this.smoothMouse.x=(1-ca)*F.x+ca*this.smoothMouse.x,this.smoothMouse.y=(1-ca)*F.y+ca*this.smoothMouse.y,Ja.continueStroke(this.smoothMouse.x,
this.smoothMouse.y,N),!0}this.mouseMove(F)};g.prototype.mouseUp=function(F,N,ca){if(this.capture)return 0==N&&(this.capture=!1,Ja.endStroke()),!0};p.prototype=Object.create(b.prototype);p.prototype.constructor=p;p.prototype.drawLine=function(F,N){Ja.beginStroke(F.x,F.y,1);Ja.continueStroke(N.x,N.y,1);Ja.endStroke()};k.prototype=Object.create(b.prototype);k.prototype.constructor=k;e.prototype=Object.create(c.prototype);e.prototype.constructor=e;l.prototype=Object.create(c.prototype);l.prototype.constructor=
l;m.prototype=Object.create(c.prototype);m.prototype.constructor=m;m.prototype.mouseDown=function(F,N,ca){if(0==N&&!F.altKey&&!X(ac).isPressed("space")&&J())return F=L({x:ub,y:ib}),Ja.isPointWithin(F.x,F.y)&&(Ja.floodFill(F.x,F.y),Ka.repaintAll()),!0};h.prototype=Object.create(c.prototype);h.prototype.constructor=h;n.prototype=Object.create(c.prototype);n.prototype.constructor=n;n.prototype.mouseMove=function(F){if(!X(ac).isPressed("r"))return x("move"),!0};n.prototype.enter=function(){x("move")};
r.prototype=Object.create(c.prototype);r.prototype.constructor=r;u.prototype=Object.create(c.prototype);u.prototype.constructor=u;v.prototype=Object.create(p.prototype);v.prototype.constructor=v;v.prototype.drawLine=function(F,N){Ja.gradientFill(Math.round(F.x),Math.round(F.y),Math.round(N.x),Math.round(N.y),a.getCurGradient())};v.prototype.queueBrushPreview=function(){};this.setZoom=function(F){ob=F;G()};this.getZoom=function(){return ob};this.setGridSize=function(F){nb=Math.max(Math.round(F),1);
this.repaintAll()};this.getGridSize=function(){return nb};this.setOffset=function(F,N){isNaN(F)||isNaN(N)?console.log("Bad offset"):(lc=F,wc=N,G())};this.getOffset=function(){return{x:lc,y:wc}};this.setInterpolation=function(F){vb=F;ji(ha,F);this.repaintAll()};this.setRotation=function(F){Wb=F%(2*Math.PI);G()};this.getRotation=function(){return Wb};this.getRotation90=function(){var F=Math.round(this.getRotation()/Math.PI*2);return 0>(F%=4)&&(F+=4),F};this.zoomIn=function(){Ga(1.41*this.getZoom())};
this.zoomOut=function(){Ga(.7092*this.getZoom())};this.zoom100=function(){Ga(1);Oa()};this.resetRotation=function(){var F=ya.width/2,N=ya.height/2,ca=new Tb;ca.rotateAroundPoint(-this.getRotation(),F,N);ca.multiply(Ib);this.setOffset(~~ca.getTranslateX(),~~ca.getTranslateY());this.setRotation(0);Ka.emitEvent("canvasRotated90",[0])};let da=!1;this.getElement=function(){return Ma};this.repaintAll=function(){Wa.left=0;Wa.top=0;Wa.right=ya.width;Wa.bottom=ya.height;pb()};this.paint=function(){var F=!1;
if(fb=!1,Wa.isEmpty()||(ha.save(),ha.clipTo&&(ha.beginPath(),Wa.left|=0,Wa.top|=0,ha.rect(Wa.left,Wa.top,Math.ceil(Wa.getWidth()),Math.ceil(Wa.getHeight())),ha.clip()),F=!0),!qc.isEmpty()){var N=hc&&hc.isOpen()?hc.getImageData():Ja.fusionLayers().getImageData();pa.putImageData(N,0,0,qc.left,qc.top,qc.getWidth(),qc.getHeight());qc.makeEmpty()}if(ha.fillStyle="#606060",ha.fillRect(0,0,ya.width,ya.height),ha.save(),ha.setTransform(Ib.m[0],Ib.m[1],Ib.m[2],Ib.m[3],Ib.m[4],Ib.m[5]),ha.fillStyle=Ua,ha.fillRect(0,
0,Ja.width,Ja.height),ha.drawImage(Pa,0,0,Pa.width,Pa.height),ha.restore(),Sg(ha,"stroke"),ha.lineWidth=1,Ja.getSelection().isEmpty()||va.peek()instanceof h&&va.peek().capture||(ha.setLineDash([3,2]),ja(ha,Ja.getSelection()),ha.setLineDash([])),fc)if(N=Ja.getBounds(),2<ob*nb){ha.beginPath();for(var ca=nb-1;ca<N.right;ca+=nb){var la=T({x:ca,y:N.top}),xa=T({x:ca,y:N.bottom});ha.moveTo(la.x+.5,la.y+.5);ha.lineTo(xa.x+.5,xa.y+.5)}for(ca=nb-1;ca<N.bottom;ca+=nb)la=T({x:0,y:ca}),xa=T({x:N.right,y:ca}),
ha.moveTo(la.x+.5,la.y+.5),ha.lineTo(xa.x+.5,xa.y+.5);ha.stroke()}va.paint(ha);ha.globalCompositeOperation="source-over";F&&(Wa.makeEmpty(),ha.restore())};this.showGrid=function(F){fc=F;this.repaintAll()};this.resize=function(F,N){F-=X(ia)(Ba).outerHeight();X(ia)(ya).css("height",F+"px");ya.width=X(ia)(ya).width();ya.height=F;Lb=null;N||Oa();this.setInterpolation(vb);this.repaintAll()};a.on("toolChange",function(F,N){F=Fd[N.strokeMode];for(N=0;N<va.modes.length;N++)if(va.modes[N]instanceof b){va.modes[N].leave();
va.modes[N]=F;va.modes[N].enter();break}rc=F});a.on("modeChange",function(F){switch(F){case na.M_DRAW:var N=rc;break;case na.M_FLOODFILL:N=A;break;case na.M_GRADIENTFILL:N=ua;break;case na.M_RECT_SELECTION:N=Kc;break;case na.M_MOVE_TOOL:N=kd;break;case na.M_ROTATE_CANVAS:N=sd;break;case na.M_PAN_CANVAS:N=rd;break;case na.M_COLOR_PICKER:N=Za;break;case na.M_TRANSFORM:N=gc}va.setUserMode(N)});a.on("maskViewOpened",function(F){hc&&hc.off("changeLayer",Ub);(hc=F).on("changeLayer",Ub);Ub()});var fa=new d;
Za=new e;rd=new l;sd=new u;A=new m;ua=new v;Kc=new h;kd=new n;gc=new r;rc=(Fd=[new g,new p,new k])[Ca.STROKE_MODE_FREEHAND];va.setDefaultMode(fa);va.setUserMode(rc);Pa.width=Ja.width;Pa.height=Ja.height;ya.width=800;ya.height=900;ya.className="chickenpaint-canvas";ya.setAttribute("touch-action","none");ha.setLineDash||(ha.setLineDash=function(){});ya.addEventListener("contextmenu",function(F){F.preventDefault()});ya.addEventListener("mouseenter",function(){cc=!0});ya.addEventListener("mouseleave",
function(){cc=!1;yb[0]||yb[2]||yb[1]||Ka.repaintAll()});ya.addEventListener("pointerdown",function(F){Pb&&"touch"===F.pointerType||(ya.setPointerCapture(F.pointerId),Lb=ya.getBoundingClientRect(),ub=F.clientX-Lb.left,ib=F.clientY-Lb.top,$b=P.isPen(),yb[0]=!1,yb[2]=!1,yb[1]=!1,yb[F.button]=!0,va.mouseDown(F,F.button,qa(F)))});ya.addEventListener("pointermove",function(F){if(Lb||=ya.getBoundingClientRect(),!Pb||"touch"!==F.pointerType){ub=F.clientX-Lb.left;ib=F.clientY-Lb.top;var N=0!==F.buttons,ca=
N?qa(F):0;if(0!=(1&F.buttons)!=yb[0]){if(.5===F.mozPressure)return;yb[0]=!yb[0];yb[0]?va.mouseDown(F,0,ca):va.mouseUp(F,0,ca)}0!=(2&F.buttons)!=yb[2]&&(yb[2]=!yb[2],yb[2]?va.mouseDown(F,2,ca):va.mouseUp(F,2,ca));0!=(4&F.buttons)!=yb[1]&&(yb[1]=!yb[1],yb[1]?va.mouseDown(F,1,ca):va.mouseUp(F,1,ca));N?va.mouseDrag(F,ca):va.mouseMove(F,ca);Pb||"pen"!==F.pointerType||(Pb=!0)}});ya.addEventListener("pointerup",function(F){yb[0]=!1;yb[2]=!1;$b=yb[1]=!1;va.mouseUp(F,F.button,0);ya.releasePointerCapture(F.pointerId)});
ya.addEventListener("wheel",function(F){if(0!=F.deltaY){if(!da||20<Math.abs(F.deltaY)){var N,ca;let la;la=0<F.deltaY?1/1.15:1.15;let xa=(N={x:F.pageX,y:F.pageY},ca=ya.getBoundingClientRect(),{x:N.x-ca.left-window.pageXOffset,y:N.y-ca.top-window.pageYOffset});N=L(xa);Ja.isPointWithin(N.x,N.y)?V(Ka.getZoom()*la,xa.x,xa.y):V(Ka.getZoom()*la,lc+~~(Ja.width*ob/2),wc+~~(Ja.height*ob/2));da=da||setTimeout(function(){da=!1},50)}F.preventDefault()}},{passive:!1});document.addEventListener("keydown",function(F){va.keyDown(F)});
document.addEventListener("keyup",function(F){"alt"===F.key.toLowerCase()&&F.preventDefault();va.keyUp(F)});document.addEventListener("visibilitychange",function(){var F=ya.height+X(ia)(Ba).outerHeight();ya.width=1;ya.height=1;Ka.resize(F,!0)},!1);window.addEventListener("scroll",function(){Lb=null});ya.addEventListener("mousedown",function(F){1==F.button&&F.preventDefault()});Ja.on("changeSelection",function(){Ka.repaintAll()});Ja.on("updateRegion",function(F){qc.union(F);Ya(ra(qc))});Lc.on("valueChanged",
function(F){var N=Ka.getOffset();Ka.setOffset(-F,N.y)});D.on("valueChanged",function(F){var N=Ka.getOffset();Ka.setOffset(N.x,-F)});this.setInterpolation(!0);fa=document.createElement("div");fa.className="chickenpaint-canvas-container-wrapper";fa.appendChild(ya);ka.className="chickenpaint-canvas-container-top";ka.appendChild(fa);ka.appendChild(D.getElement());Ba.className="chickenpaint-canvas-container-bottom";Ba.appendChild(Lc.getElement());Ma.appendChild(ka);Ma.appendChild(Ba);a.setCanvas(this)}
function yc(a,c,d,b){a.getSmallScreenMode()&&ma(d+" (shorter)")!==d+" (shorter)"?this.title=ma(d+" (shorter)"):this.title=ma(d);b=b||{};this.name=c;this.resizeVert=b.resizeVert||!1;this.resizeHorz=b.resizeHorz||!1;let g=document.createElement("div");d=document.createElement("div");let p=document.createElement("i"),k=document.createElement("button"),e=document.createElement("div"),l=null,m=null,h,n,r,u=this;this.getElement=function(){return g};this.getBodyElement=function(){return e};this.getWidth=
function(){return X(ia)(g).outerWidth()};this.getHeight=function(){return X(ia)(g).outerHeight()};this.getX=function(){return parseInt(g.style.left,10)||0};this.getY=function(){return parseInt(g.style.top,10)||0};this.setLocation=function(x,C){g.style.left=x+"px";g.style.top=C+"px"};this.setWidth=function(x){g.style.width=x+"px"};this.setHeight=function(x){g.style.height=x+"px"};this.setSize=function(x,C){this.setWidth(x);this.setHeight(C)};this.setCollapseDownwards=function(x){b.collapseDownwards=
x};this.toggleCollapse=function(x){let C=X(ia)(g);if(void 0===x)x=!C.hasClass("collapsed");else if(C.hasClass("collapsed")==x)return;let J=C.parents(".chickenpaint").find(".chickenpaint-canvas").height();var H=this.getHeight();H=this.getY()+H;(C.toggleClass("collapsed",x),X(ia)(p).toggleClass("icon-angle-down",!x).toggleClass("icon-angle-up",x),x)?b.collapseDownwards&&this.setLocation(this.getX(),Math.min(H,J)-this.getHeight()):(x=this.getHeight(),b.collapseDownwards?this.setLocation(this.getX(),
Math.max(H-x,0)):this.getY()+x>J&&this.setLocation(this.getX(),Math.max(J-x,0)))};this.userIsDoneWithUs=function(){a.getSmallScreenMode()&&this.toggleCollapse(!0)};p.className="collapse-icon fas icon-angle-down";k.type="button";k.className="btn btn-close";k.textContent="";k.tabIndex=-1;g.className="chickenpaint-palette chickenpaint-palette-"+c;d.className="chickenpaint-palette-head";d.setAttribute("touch-action","none");c=document.createElement("div");let v=document.createElement("h5");c.className=
"modal-header";v.className="modal-title";v.appendChild(document.createTextNode(this.title));v.appendChild(p);c.appendChild(v);c.appendChild(k);d.appendChild(c);e.className="chickenpaint-palette-body";g.appendChild(d);g.appendChild(e);this.resizeVert&&((l=document.createElement("div")).className="chickenpaint-resize-handle-vert",l.addEventListener("pointerdown",function(x){n="vertResize";l.setPointerCapture(x.pointerId)}),l.addEventListener("pointermove",function(x){"vertResize"==n&&u.setHeight(x.pageY-
X(ia)(g).offset().top)}),l.addEventListener("pointerup",function(x){l.releasePointerCapture(x.pointerId);n=!1}),g.appendChild(l));this.resizeHorz&&((m=document.createElement("div")).className="chickenpaint-resize-handle-horz",m.addEventListener("pointerdown",function(x){n="horzResize";m.setPointerCapture(x.pointerId)}),m.addEventListener("pointermove",function(x){"horzResize"==n&&u.setWidth(x.pageX-X(ia)(g).offset().left)}),m.addEventListener("pointerup",function(x){m.releasePointerCapture(x.pointerId);
n=!1}),g.appendChild(m));d.addEventListener("pointerdown",function(x){0==x.button&&(x.stopPropagation(),x.preventDefault(),"BUTTON"==x.target.nodeName?u.emitEvent("paletteVisChange",[u,!1]):(h={x:parseInt(g.style.left,10)||0,y:parseInt(g.style.top,10)||0},r={x:x.pageX-X(ia)(g).position().left,y:x.pageY-X(ia)(g).position().top},n=a.getSmallScreenMode()?"dragStart":"dragging",x.target.setPointerCapture(x.pointerId)))});d.addEventListener("pointermove",function(x){if(("dragStart"===n||"dragging"===n)&&
0!==x.buttons){let H=x.pageX-r.x,G=x.pageY-r.y;if("dragStart"==n){x=H;var C=G;var J=h;25<(x-J.x)*(x-J.x)+(C-J.y)*(C-J.y)&&(n="dragging")}"dragging"==n&&u.setLocation(H,G)}});d.addEventListener("pointerup",function(x){if("dragging"===n||"dragStart"===n){"dragStart"===n&&(x.stopPropagation(),x.preventDefault(),setTimeout(()=>{u.setLocation(h.x,h.y);u.toggleCollapse()},100));n=!1;try{x.target.releasePointerCapture(x.pointerId)}catch(C){console.error(C)}}})}function Ug(a){function c(p){"LI"==this.nodeName&&
(p=b[parseInt(this.getAttribute("data-buttonIndex"),10)],a.actionPerformed({action:p.command}))}yc.call(this,a,"tool","Tools");let d=this,b=[{className:"chickenpaint-tool-rect-selection",command:"CPRectSelection",toolTip:"Marquee",shortcut:"m",mode:na.M_RECT_SELECTION},{className:"chickenpaint-tool-move",command:"CPMoveTool",toolTip:"Move tool",shortcut:"v",mode:na.M_MOVE_TOOL},{className:"chickenpaint-tool-flood-fill",command:"CPFloodFill",toolTip:"Flood fill",shortcut:"f",mode:na.M_FLOODFILL},{className:"chickenpaint-tool-gradient-fill",
command:"CPGradientFill",toolTip:"Gradient fill",shortcut:"g",mode:na.M_GRADIENTFILL},{className:"chickenpaint-tool-color-picker",command:"CPColorPicker",toolTip:"Color picker",shortcut:"i",mode:na.M_COLOR_PICKER},{className:"chickenpaint-tool-blur",command:"CPBlur",toolTip:"Blur",shortcut:"u",mode:na.M_DRAW,tool:na.T_BLUR},{className:"chickenpaint-tool-pencil",command:"CPPencil",toolTip:"Pencil",shortcut:"n",mode:na.M_DRAW,tool:na.T_PENCIL},{className:"chickenpaint-tool-pen",command:"CPPen",toolTip:"Pen",
selected:!0,shortcut:"b",mode:na.M_DRAW,tool:na.T_PEN},{className:"chickenpaint-tool-airbrush",command:"CPAirbrush",toolTip:"Airbrush",shortcut:"a",mode:na.M_DRAW,tool:na.T_AIRBRUSH},{className:"chickenpaint-tool-water",command:"CPWater",toolTip:"Waterpaint",shortcut:"w",mode:na.M_DRAW,tool:na.T_WATER},{className:"chickenpaint-tool-eraser",command:"CPEraser",toolTip:"Eraser",shortcut:"e",mode:na.M_DRAW,tool:na.T_ERASER},{className:"chickenpaint-tool-soft-eraser",command:"CPSoftEraser",toolTip:"Soft eraser",
shortcut:"s",mode:na.M_DRAW,tool:na.T_SOFTERASER},{className:"chickenpaint-tool-smudge",command:"CPSmudge",toolTip:"Smudge",shortcut:"d",mode:na.M_DRAW,tool:na.T_SMUDGE},{className:"chickenpaint-tool-blender",command:"CPBlender",toolTip:"Blender",shortcut:"c",mode:na.M_DRAW,tool:na.T_BLENDER},{className:"chickenpaint-tool-dodge",command:"CPDodge",toolTip:"Dodge (tool)",shortcut:"o",mode:na.M_DRAW,tool:na.T_DODGE},{className:"chickenpaint-tool-burn",command:"CPBurn",toolTip:"Burn (tool)",shortcut:"p",
mode:na.M_DRAW,tool:na.T_BURN},{className:"chickenpaint-tool-rotate-canvas",command:"CPRotateCanvas",commandDoubleClick:"CPResetCanvasRotation",toolTip:"Rotate canvas",mode:na.M_ROTATE_CANVAS},{className:"chickenpaint-tool-pan-canvas",command:"CPPanCanvas",toolTip:"Grab canvas",mode:na.M_PAN_CANVAS}],g=document.createElement("ul");a.on("modeChange",function(p){let k=d.getBodyElement();X(ia)("li",k).removeClass("selected");p==na.M_DRAW?X(ia)("li[data-tool="+a.getCurTool()+"]",k).addClass("selected"):
X(ia)("li[data-mode="+p+"]",k).addClass("selected")});a.on("toolChange",function(p){let k=d.getBodyElement();a.getCurMode()==na.M_DRAW&&(X(ia)("li",k).removeClass("selected"),X(ia)("li[data-tool="+p+"]",k).addClass("selected"))});(function(){let p=d.getBodyElement();for(let k in g.className="chickenpaint-tools list-unstyled",b)!function(e){let l=b[e],m=document.createElement("li"),h=document.createElement("div");m.className="chickenpaint-toolbar-button "+l.className;m.setAttribute("data-buttonIndex",
e);m.setAttribute("data-mode",l.mode);void 0!==l.tool&&m.setAttribute("data-tool",l.tool);m.title=ma(l.toolTip);l.shortcut&&(m.title+=" ("+l.shortcut.toUpperCase()+")",X(ac)(l.shortcut,function(){return c.call(m),!1}));l.selected&&(m.className+=" selected");h.className="chickenpaint-toolbar-button-icon";m.appendChild(h);g.appendChild(m)}(k);X(ia)(g).on("click","li",c).on("dblclick","li",function(k){k=b[parseInt(this.getAttribute("data-buttonIndex"),10)];k.commandDoubleClick&&a.actionPerformed({action:k.commandDoubleClick})});
p.appendChild(g)})()}function Vg(a){yc.call(this,a,"misc","Misc");let c=this,d=[{className:"chickenpaint-tool-zoom-in",command:"CPZoomIn",toolTip:"Zoom in"},{className:"chickenpaint-tool-zoom-out",command:"CPZoomOut",toolTip:"Zoom out"},{className:"chickenpaint-tool-zoom-100",command:"CPZoom100",toolTip:"Zoom 100%"},{className:"chickenpaint-tool-flip-horizontal",command:"CPHFlip",toolTip:"Flip horizontal"},{className:"chickenpaint-tool-undo",command:"CPUndo",toolTip:"Undo"},{className:"chickenpaint-tool-redo",
command:"CPRedo",toolTip:"Redo"},{className:"chickenpaint-tool-send",command:"CPSend",toolTip:"Save Oekaki"}];!function(){let b=c.getBodyElement(),g=document.createElement("ul");for(let p in g.className="chickenpaint-misc-tools list-unstyled",d){let k=d[p],e=document.createElement("li"),l=document.createElement("div");"CPSend"!=k.command||a.isActionSupported("CPContinue")||(k.toolTip="Post Oekaki",k.className="chickenpaint-tool-send-and-end");e.className="chickenpaint-toolbar-button "+k.className;
e.setAttribute("data-buttonIndex",p);e.setAttribute("title",ma(k.toolTip));l.className="chickenpaint-toolbar-button-icon";e.appendChild(l);g.appendChild(e)}X(ia)(g).on("mousedown","li",function(p){X(ia)(this).addClass("selected")}).on("mouseup","li",function(p){X(ia)(this).removeClass("selected")}).on("click","li",function(p){p=d[parseInt(this.getAttribute("data-buttonIndex"),10)];a.actionPerformed({action:p.command})});b.appendChild(g)}()}function Wg(a){yc.call(this,a,"stroke","Stroke");let c=[{className:"chickenpaint-tool-freehand",
command:"CPFreeHand",toolTip:ma("Free-hand"),selected:!0},{className:"chickenpaint-tool-line",command:"CPLine",toolTip:ma("Straight line")},{className:"chickenpaint-tool-bezier",command:"CPBezier",toolTip:ma("Bezier curve")}],d=this.getBodyElement();!function(){let b=document.createElement("ul");for(let g in b.className="chickenpaint-stroke-tools list-unstyled",c){let p=c[g],k=document.createElement("li"),e=document.createElement("div");k.className="chickenpaint-toolbar-button "+p.className;k.setAttribute("data-buttonIndex",
g);k.setAttribute("title",p.toolTip);p.selected&&(k.className+=" selected");e.className="chickenpaint-toolbar-button-icon";k.appendChild(e);b.appendChild(k)}X(ia)(b).on("click","li",function(g){g=c[parseInt(this.getAttribute("data-buttonIndex"),10)];X(ia)("li",b).removeClass("selected");X(ia)(this).addClass("selected");a.actionPerformed({action:g.command})});d.appendChild(b)}();a.on("toolChange",function(b,g){X(ia)(".chickenpaint-tool-freehand",d).toggleClass("selected",g.strokeMode==Ca.STROKE_MODE_FREEHAND);
X(ia)(".chickenpaint-tool-line",d).toggleClass("selected",g.strokeMode==Ca.STROKE_MODE_LINE);X(ia)(".chickenpaint-tool-bezier",d).toggleClass("selected",g.strokeMode==Ca.STROKE_MODE_BEZIER)})}function Rc(a,c,d){return c in a?Object.defineProperty(a,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[c]=d,a}function Xg(a){yc.call(this,a,"color","Color (picker)");let c=new pl(a),d=new ql(a,c);a=new lp(a);let b=this.getBodyElement(),g=document.createElement("div");g.className="chickenpaint-colorpicker-top";
g.appendChild(c.getElement());g.appendChild(d.getElement());b.appendChild(g);b.appendChild(a.getElement())}function lp(a){function c(p,k,e){for(;p.length<e;)p=k+p;return p}function d(){g.style.backgroundColor="#"+c(Number(b).toString(16),"0",6)}let b=0,g=document.createElement("div");this.getElement=function(){return g};a.on("colorChange",function(p){b=p.getRgb();d()});g.className="chickenpaint-colorpicker-show";g.addEventListener("click",function(p){p.preventDefault();p="#"+c(Number(b).toString(16),
"0",6);if(null!=(p=window.prompt(ma("Please enter a color in hex format"),p)))try{(p.match(/^#/)||p.match(/^$/))&&(p=p.substring(1));let k=parseInt(p,16);a.setCurColor(new Gb(k))}catch(k){}});d()}function lf(a,c){function d(){var k=b.width;g.clearRect(0,0,k,b.height);g.beginPath();g.arc(k/2+1,k/2+1,Math.max(k/2,1)-2,0,2*Math.PI);p.state?g.fill():g.stroke()}var b=document.createElement("canvas"),g=b.getContext("2d"),p=this;this.state=a||!1;this.setValue=function(k){this.state!=k&&(this.state=k,this.emitEvent("valueChange",
[k]),d())};this.getElement=function(){return b};b.addEventListener("mousedown",function(k){p.setValue(!p.state)});b.title=c||"";b.className="chickenpaint-checkbox";b.width=20;b.height=20;b.fillStyle="black";b.strokeStyle="black";d()}function Xc(a,c,d,b,g=150){function p(){let x=l.width||g,C=l.height,J="string"==typeof v.title?ma(v.title):v.title(v.value),H=3*window.devicePixelRatio,G=.75*l.height;if(d)m.save(),m.fillStyle="white",m.fillRect(0,0,x,C),m.fillStyle="black",m.fillText(J,H,G),m.beginPath(),
v.value>=h/2?m.rect(x/2,0,(v.value-h/2)*x/h,C):m.rect(v.value*x/h,0,(h/2-v.value)*x/h,C),m.fill(),m.clip(),m.fillStyle="white";else{var L=(v.value-a)/h;b&&(L=Math.pow(L,.6666666666666666));L*=x;m.save();m.save();m.fillStyle="black";m.beginPath();m.rect(0,0,L,C);m.fill();m.clip();m.fillStyle="white";m.fillText(J,H,G);m.restore();m.fillStyle="white";m.beginPath();m.rect(L,0,x,C);m.fill();m.clip();m.fillStyle="black"}m.fillText(J,H,G);m.restore()}function k(x){let C=X(ia)(l).width(),J=X(ia)(l).offset().left;
x=(x.pageX-J)/C;b&&(x=Math.pow(Math.max(x,0),1.5));v.setValue(x*h+a)}function e(x){switch(n){case 1:return k(x);case 2:var C=v.title();if(!C.includes(ma("Brush size"))&&!C.includes(ma("Opacity")))return k(x);C=(x.pageX-r)/4;if(0!==C){C=v.value+C;let J=Math.floor(C);v.setValue(J);r=x.pageX-4*(C-J)}}}let l=document.createElement("canvas"),m=l.getContext("2d"),h=c-a,n=0,r,u=!1,v=this;this.value=void 0;this.title="";d=d||!1;l.addEventListener("pointerup",x=>{if(0===n)return l.releasePointerCapture(x.pointerId),
l.removeEventListener("pointermove",e);if(0!==n)switch(n){case 1:0!==x.button||x.shiftKey||(n=0);break;case 2:(2==x.button||0===x.button&&x.shiftKey)&&(n=0);break;default:return}return l.releasePointerCapture(x.pointerId),l.removeEventListener("pointermove",e)});this.setValue=function(x){x=~~Math.max(a,Math.min(c,x));this.value!=x&&(this.value=x,this.emitEvent("valueChange",[this.value]),u?p():(u=!0,this.resize()))};this.getElement=function(){return l};this.resize=function(){l.width=X(ia)(l).width()||
g;l.height=X(ia)(l).height()||20;1<window.devicePixelRatio&&(l.style.height=l.height+"px",l.width*=window.devicePixelRatio,l.height*=window.devicePixelRatio);m.font=.47*l.height+"pt sans-serif";p()};l.addEventListener("pointerdown",function(x){0===n&&(2===x.button||0===x.button&&x.shiftKey?(n=2,r=x.pageX):(n=1,k(x)),l.setPointerCapture(x.pointerId),l.addEventListener("pointermove",e))});l.addEventListener("contextmenu",function(x){x.preventDefault()});l.setAttribute("touch-action","none");l.className=
"chickenpaint-slider";"devicePixelRatio"in window||(window.devicePixelRatio=1)}function eg(a,c,d){function b(){for(var h=e.style,n=Number(p.getRgb()).toString(16);6>n.length;)n="0"+n;h.backgroundColor="#"+n}let g=this,p=new Gb(0),k=255,e=document.createElement("div");this.getElement=function(){return e};this.setColor=function(h){p.isEqual(h)||(p.copyFrom(h),b(),this.emitEvent("colorChange",[p]))};this.setAlpha=function(h){h!=k&&(k=h,b(),this.emitEvent("alphaChange",[k]))};this.getColorRgb=function(){return p.getRgb()};
this.getAlpha=function(){return k};this.setCurColor=this.setColor;e.className="chickenpaint-color-pick-swatch";a&&p.copyFrom(a);c&&(k=c);let l=new bootstrap.Popover(e,{html:!0,content:function(){return window.addEventListener("mousedown",m),function(){let h=document.createElement("div"),n=document.createElement("div"),r=new pl(g,p),u=new ql(g,r,p.getHue()),v=new Xc(0,255);return h.className="chickenpaint-color-pick-panel",n.className="chickenpaint-colorpicker-top",n.appendChild(r.getElement()),n.appendChild(u.getElement()),
h.appendChild(n),v.value=k,v.title=function(x){return ma("Opacity: ")+x},v.on("valueChange",function(x){g.setAlpha(x)}),h.appendChild(v.getElement()),setTimeout(function(){v.resize()},0),h}()},trigger:"manual",placement:"bottom",container:d||!1}),m=function(h){var n=h.target;n=n.closest(".popover-body")||n.classList.contains("chickenpaint-color-pick-panel")||n.classList.contains("chickenpaint-colorpicker-select")||n.classList.contains("chickenpaint-colorpicker-slider");h.preventDefault();n||l.hide()};
e.addEventListener("click",function(h){h.preventDefault();l.toggle()});e.addEventListener("hidden.bs.popover",function(){window.removeEventListener("mousedown",m)});b()}function Bi(a,c){let d=document.createElement("div");return d.className="chickenpaint-checkbox-slider-group",d.appendChild(a.getElement()),d.appendChild(c.getElement()),d}function rl(a,c){for(let d in c)if(c.hasOwnProperty(d)){let b=document.createElement("option");b.appendChild(document.createTextNode(ma(c[d])));b.value=d;a.appendChild(b)}}
function mp(a){function c(){p.gradient(p.getBounds(),0,0,p.width,0,l,!0);e.putImageData(p.imageData,0,0,0,0,150,32);b.fillRect(0,0,d.width,d.height);b.drawImage(k,0,0)}let d=document.createElement("canvas"),b=d.getContext("2d"),g=ol(b),p=new I(150,32),k=document.createElement("canvas"),e=k.getContext("2d"),l=a.getCurGradient();this.getElement=function(){return d};a.on("gradientChange",function(m){l=m;c()});d.width=k.width=150;d.height=k.height=32;d.className="chickenpaint-gradient-preview";b.fillStyle=
g;c()}function mf(a){yc.call(this,a,"brush","Tool options");let c=new np(a),d=new op(a),b=new pp(a),g=this.getBodyElement();g.appendChild(c.getElement());g.appendChild(d.getElement());g.appendChild(b.getElement());a.on("modeChange",function(p){switch(c.getElement().style.display="none",d.getElement().style.display="none",b.getElement().style.display="none",p){case na.M_GRADIENTFILL:d.getElement().style.display="block";break;case na.M_TRANSFORM:b.getElement().style.display="block";break;default:c.getElement().style.display=
"block"}})}function np(a){let c=[1,2,3,4,5,6,7,8,9,10,15,20,25,30,35,40,45,50,60,70,80,90,100,125,150,175,200],d=document.createElement("div"),b=document.createElement("select"),g=new lf(!1,ma("Control brush opacity with pen pressure")),p=new Xc(1,255),k=new lf(!0,ma("Control brush size with pen pressure")),e=new Xc(1,200,!1,!0),l=new lf(!1,ma("Control brush scattering with pen pressure")),m=new Xc(0,1E3,!1,!0),h=new Xc(0,100,!1,!0),n=new Xc(0,100,!1,!0),r=new Xc(0,100,!1,!0),u=new Xc(0,100,!1,!0),
v=new mf.CPBrushPreview(a);this.getElement=function(){return d};p.title=function(x){return ma("Opacity")+": "+x};p.on("valueChange",function(x){a.setAlpha(x)});e.title=function(x){return ma("Brush size")+": "+x};e.on("valueChange",function(x){a.setBrushSize(x)});h.title=function(x){return ma("Color")+": "+x+"%"};h.on("valueChange",function(x){a.getBrushInfo().resat=x/100;a.callToolListeners()});n.title=function(x){return ma("Blend")+": "+x+"%"};n.on("valueChange",function(x){a.getBrushInfo().bleed=
x/100;a.callToolListeners()});r.title=function(x){return ma("Spacing")+": "+x+"%"};r.on("valueChange",function(x){a.getBrushInfo().spacing=x/100;a.callToolListeners()});m.title=function(x){return ma("Scattering")+": "+x+"%"};m.on("valueChange",function(x){a.getBrushInfo().scattering=x/100;a.callToolListeners()});u.title=function(x){return ma("Smoothing")+": "+x+"%"};u.on("valueChange",function(x){a.getBrushInfo().smoothing=x/100;a.callToolListeners()});l.on("valueChange",function(x){a.getBrushInfo().pressureScattering=
x;a.callToolListeners()});g.on("valueChange",function(x){a.getBrushInfo().pressureAlpha=x;a.callToolListeners()});k.on("valueChange",function(x){a.getBrushInfo().pressureSize=x;a.callToolListeners()});b.addEventListener("change",function(x){a.getBrushInfo().tip=parseInt(b.value,10);b.blur()});b.className="form-control form-control-sm";b.tabIndex=-1;rl(b,["Round Pixelated","Round Hard Edge","Round Soft","Square Pixelated","Square Hard Edge"]);d.appendChild(b);d.appendChild(v.getElement());d.appendChild(Bi(k,
e));d.appendChild(Bi(g,p));d.appendChild(h.getElement());d.appendChild(n.getElement());d.appendChild(r.getElement());d.appendChild(Bi(l,m));d.appendChild(u.getElement());g.setValue(a.getBrushInfo().pressureAlpha);p.setValue(a.getAlpha());k.setValue(a.getBrushInfo().pressureSize);e.setValue(a.getBrushSize());l.setValue(a.getBrushInfo().pressureScattering);m.setValue(~~(100*a.getBrushInfo().scattering));b.value=a.getBrushInfo().tip;h.setValue(~~(100*a.getBrushInfo().resat));n.setValue(~~(100*a.getBrushInfo().bleed));
r.setValue(~~(100*a.getBrushInfo().spacing));u.setValue(~~(100*a.getBrushInfo().smoothing));a.on("toolChange",function(x,C){p.setValue(C.alpha);e.setValue(C.size);k.setValue(C.pressureSize);g.setValue(C.pressureAlpha);b.value=C.tip;l.setValue(C.pressureScattering);~~(100*C.resat)!=h.value&&h.setValue(~~(100*C.resat));~~(100*C.bleed)!=n.value&&n.setValue(~~(100*C.bleed));~~(100*C.spacing)!=r.value&&r.setValue(~~(100*C.spacing));~~(100*C.scattering)!=m.value&&m.setValue(~~(100*C.scattering));~~(100*
C.smoothing)!=u.value&&u.setValue(~~(100*C.smoothing))});X(ac)("1,2,3,4,5,6,7,8,9,0",function(x,C){x=parseInt(C.shortcut,10);0==x&&(x=10);a.setAlpha(Math.round(x/10*255))});X(ac)("{,[",function(){let x=a.getBrushSize();for(let C=c.length-1;0<=C;C--)if(x>c[C]){a.setBrushSize(c[C]);break}});X(ac)("},]",function(){let x=a.getBrushSize();for(let C=0;C<c.length;C++)if(x<c[C]){a.setBrushSize(c[C]);break}})}function op(a){function c(){let e=[p.getAlpha()<<24|p.getColorRgb(),k.getAlpha()<<24|k.getColorRgb()];
a.setCurGradient(e)}var d;let b=document.createElement("div");var g=new mp(a);let p=new eg(new Gb(16777215&a.getCurGradient()[0]),a.getCurGradient()[0]>>>24,b),k=new eg(new Gb(16777215&a.getCurGradient()[1]),a.getCurGradient()[1]>>>24,b);this.getElement=function(){return b};b.className="chickenpaint-gradient-panel";b.style.display="none";p.on("colorChange",c);p.on("alphaChange",c);k.on("colorChange",c);k.on("alphaChange",c);(d=document.createElement("p")).textContent=ma("Gradient");b.appendChild(d);
b.appendChild(g.getElement());(d=document.createElement("div")).className="chickenpaint-gradient-colors";(g=document.createElement("div")).className="chickenpaint-gradient-start-color";g.appendChild(p.getElement());d.appendChild(g);(g=document.createElement("div")).className="chickenpaint-gradient-end-color";g.appendChild(k.getElement());d.appendChild(g);b.appendChild(d)}function pp(a){var c={smooth:ma("Smooth"),sharp:ma("Sharp")};let d=document.createElement("div"),b=document.createElement("button"),
g=document.createElement("button");var p=document.createElement("select");if(this.getElement=function(){return d},d.className="chickenpaint-transform-panel",d.style.display="none",b.type="button",g.type="button",b.className="btn btn-primary btn-block",g.className="btn btn-light btn-block",b.textContent=ma("Apply transform"),g.textContent=ma("Cancel"),p.addEventListener("change",function(k){a.setTransformInterpolation(this.value)}),p.className="form-control chickenpaint-transform-interpolation",rl(p,
c),ii(Ed(0,0).getContext("2d"))){c=document.createElement("div");let k=document.createElement("label");k.textContent=ma("Transform style");c.className="form-group";c.appendChild(k);c.appendChild(p);d.appendChild(c)}p=document.createElement("div");p.appendChild(b);p.appendChild(g);p.className="form-group";d.appendChild(p);b.addEventListener("click",function(k){a.actionPerformed({action:"CPTransformAccept"});k.preventDefault()});g.addEventListener("click",function(k){a.actionPerformed({action:"CPTransformReject"});
k.preventDefault()})}function qp(a){a.preventDefault();a.stopPropagation()}function fd(a){let c=document.createElement("span");return c.className="fa "+a,c}function Ci(a){let c=document.createElement("span");return c.className="chickenpaint-icon chickenpaint-icon-"+a,c}function sl(a,c){let d=document.createElement("div"),b=document.createElement("label");return b.tabIndex=-1,a.tabIndex=-1,d.className="form-check",a.className="form-check-input",b.className="form-check-label",b.setAttribute("for",a.id),
b.appendChild(a),b.appendChild(document.createTextNode(c)),d.appendChild(a),d.appendChild(b),d}function Yg(a){function c(){let G=g.getActiveLayer();G.getAlpha()!=m.value&&m.setValue(G.getAlpha());(function(){let L=g.getActiveLayer();for(;h.lastChild;)h.removeChild(h.lastChild);for(let U=S.LM_FIRST;U<=S.LM_LAST;U++)if(U!=S.LM_MULTIPLY2&&(U==L.blendMode||U===S.LM_PASSTHROUGH&&L instanceof rb||U<=S.LM_LAST_CHIBIPAINT)){let T=document.createElement("option");T.appendChild(document.createTextNode(ma(S.BLEND_MODE_DISPLAY_NAMES[U])));
U!==S.LM_MULTIPLY||L.blendMode===U||L.useLegacyMultiply?T.value=U:T.value=S.LM_MULTIPLY2;h.appendChild(T)}})();G.getBlendMode()!=parseInt(h.value,10)&&(h.value=G.getBlendMode());G.getLockAlpha()!=u.checked&&(u.checked=G.getLockAlpha());(function(){var L;let U={"image-layer":(L=g.getActiveLayer())instanceof Na,"layer-group":L instanceof rb,"clipping-mask":L instanceof Na&&L.clip,"no-clipping-mask":L instanceof Na&&!L.clip,"no-clipping-mask-or-is-group":!(L instanceof Na)||!L.clip,mask:L&&null!==L.mask,
"no-mask":L&&null===L.mask,"mask-enabled":L&&null!==L.mask&&L.maskVisible,"mask-disabled":L&&null!==L.mask&&!L.maskVisible};for(let T of"mask no-mask clipping-mask no-clipping-mask-or-is-group image-layer layer-group".split(" "))for(let Y of x.getElementsByClassName("chickenpaint-action-require-"+T))Y.style.display=U[T]?"inline-block":"none";x.querySelectorAll("[data-action]").forEach(function(T){let Y=T.getAttribute("data-action");T.classList.toggle("disabled",!a.isActionAllowed(Y))})})()}function d(){g=
this;l.resize();c()}yc.call(this,a,"layers","Layers",{resizeHorz:!0,resizeVert:!0});let b=this,g=a.getArtwork(),p=null,k=this.getBodyElement(),e=this.getElement(),l=new function(){function G(Ma){let ka=X(ia)(".chickenpaint-layer",Ya);return ka.get(ka.length-1-Ma)}function L(Ma){Ma=X(ia)(Ma).closest(".chickenpaint-layer");if(!Ma.length)return-1;let ka=X(ia)(".chickenpaint-layer",Ya);return ka.length-1-ka.index(Ma)}function U(){if(2===qa.state){let ya=e.getBoundingClientRect();var Ma=!0;let ha=!0;if(qa.dropTarget=
function(Pa,pa){var Ua=X(ia)(".chickenpaint-layer",Ya);Pa={layer:p[p.length-1],displayIndex:p.length-1,direction:"over"};for(var Ja=0;Ja<Ua.length;Ja++){let ob=Ua[Ua.length-1-Ja].getBoundingClientRect();if(0===Ja&&pa>ob.bottom){Pa=g.getLayersRoot().layers[0];Pa={layer:Pa,displayIndex:p.indexOf(Pa),direction:"under"};break}if(pa>=ob.top){Ua=p[Ja];let lc=ob.bottom-ob.top;Pa={layer:Ua,displayIndex:Ja};Ua instanceof rb?pa>=ob.top+.75*lc?Ua.expanded&&0<Ua.layers.length?(Pa.layer=Ua.layers[Ua.layers.length-
1],Pa.displayIndex--,Pa.direction="over"):Pa.direction="under":pa>=ob.top+.25*lc?Ua.expanded&&0<Ua.layers.length?(Pa.layer=Ua.layers[Ua.layers.length-1],Pa.displayIndex--,Pa.direction="over"):Pa.direction="inside":Pa.direction="over":pa>=ob.top+.5*lc?Pa.direction="under":Pa.direction="over";break}}return Pa.layer.parent==qa.layer.parent&&("over"==Pa.direction||"under"==Pa.direction)&&(pa=Pa.layer.parent,Ja=pa.indexOf(Pa.layer),"over"==Pa.direction&&pa.layers[Ja+1]==qa.layer||"under"==Pa.direction&&
pa.layers[Ja-1]==qa.layer||Pa.layer==qa.layer)?null:qa.layer instanceof rb&&(Pa.layer==qa.layer&&"inside"==Pa.direction||Pa.layer.hasAncestor(qa.layer))?null:Pa}(qa.dragX,qa.dragY),qa.dropTarget){var ka=G(qa.dropTarget.displayIndex);switch(qa.dropTarget.direction){case "over":case "under":Ya.appendChild(qa.dropBetweenMarkerElem);Ma=qa.dropTarget.layer.getDepth()-1;var Ba;if(ka=ka.getBoundingClientRect(),"under"==qa.dropTarget.direction&&qa.dropTarget.layer instanceof rb&&qa.dropTarget.layer.expanded){for(Ba=
qa.dropTarget.displayIndex-1;0<=Ba&&p[Ba].hasAncestor(qa.dropTarget.layer);Ba--);Ba=G(Ba+1).getBoundingClientRect().bottom}else Ba=ka.bottom;Ma=ka.left-ya.left+(0<Ma?26+16*Ma:0);qa.dropBetweenMarkerElem.style.left=Ma+"px";qa.dropBetweenMarkerElem.style.width=ka.right-ya.left-Ma+"px";qa.dropBetweenMarkerElem.style.top=("over"==qa.dropTarget.direction?ka.top-1:Ba+1)-ya.top+"px";X(ia)(".chickenpaint-layer-drop-target",Ya).removeClass("chickenpaint-layer-drop-target");Ma=!1;break;case "inside":let Pa=
X(ia)(".chickenpaint-layer",Ya);Pa.each(function(pa){X(ia)(this).toggleClass("chickenpaint-layer-drop-target",Pa.length-1-pa==qa.dropTarget.displayIndex)});ha=!1}}ha&&X(ia)(".chickenpaint-layer-drop-target",Ya).removeClass("chickenpaint-layer-drop-target");Ma&&X(ia)(qa.dropBetweenMarkerElem).remove();qa.frameElem.style.top=qa.dragY-ya.top-parseInt(qa.frameElem.style.height,10)/2+"px"}else X(ia)(qa.dropBetweenMarkerElem).remove(),X(ia)(qa.frameElem).remove()}function T(Ma){let ka=Ma.getImageThumbnail().getAsCanvas(Ub);
return ka.title=ma("Image"),ka.className="chickenpaint-layer-thumbnail chickenpaint-layer-image-thumbnail",ka.style.maxWidth=ka.width/ka.height*25+"px",Ma!=g.getActiveLayer()||g.isEditingMask()||(ka.className+=" active"),ka}function Y(Ma){let ka=Ma.getMaskThumbnail().getAsCanvas(Ub);ka.title=ma("Layer mask");ka.className="chickenpaint-layer-thumbnail chickenpaint-layer-mask-thumbnail";ka.style.maxWidth=ka.width/ka.height*25+"px";Ma==g.getActiveLayer()&&g.isEditingMask()&&(ka.className+=" active");
Ma.maskVisible||(ka.className+=" disabled",Ma=ka.getContext("2d"),Ma.strokeStyle="red",Ma.lineWidth=3,Ma.moveTo(5,5),Ma.lineTo(ka.width-5,ka.height-5),Ma.moveTo(ka.width-5,5),Ma.lineTo(5,ka.height-5),Ma.stroke());return ka}function ea(Ma,ka){let Ba=document.createElement("div");var ya=document.createElement("div");let ha=document.createElement("div");var Pa=document.createElement("div");let pa=document.createElement("div"),Ua=document.createElement("div"),Ja=document.createElement("div");if(Ba.className=
"chickenpaint-layer list-group-item",ka==g.getActiveLayer()&&(Ba.className+=" active"),ya.className="chickenpaint-layer-eye",ka.ancestorsAreVisible()||(ya.className+=" chickenpaint-layer-eye-hidden-ancestors"),ya.style.marginRight=2+16*(ka.getDepth()-1)+"px",ka.visible?(Ba.className+=" chickenpaint-layer-visible",ya.appendChild(fd("icon-eye"))):(Ba.className+=" chickenpaint-layer-hidden",ya.appendChild(fd("icon-eye-slash"))),Ba.appendChild(ya),ha.className="chickenpaint-layer-description",ka instanceof
Na){if(ka.clip&&(Ba.className+=" chickenpaint-layer-clipped",Pa.appendChild(fd("icon-level-down-alt fa-flip-horizontal"))),ka.lockAlpha)ya=Ci("lock-alpha"),ya.title=ma("Transparency locked"),Ua.appendChild(ya)}else ka instanceof rb&&(Ba.className+=" chickenpaint-layer-group",ka.expanded?(Ba.className+=" chickenpaint-layer-group-expanded",Pa.appendChild(fd("icon-folder-open chickenpaint-layer-group-toggle"))):(Ba.className+=" chickenpaint-layer-group-collapsed",Pa.appendChild(fd("icon-folder chickenpaint-layer-group-toggle"))));
Pa.childNodes.length&&(Pa.className="chickenpaint-layer-icons",Ba.appendChild(Pa));try{ka instanceof Na&&Ba.appendChild(T(ka)),ka.mask&&Ba.appendChild(Y(ka))}catch(ob){console.log("Failed to create layer thumb")}Pa=ka.name&&0<ka.name.length?ka.name:"(unnamed "+(ka instanceof rb?"group":"layer")+")";return pa.innerText=Pa,pa.setAttribute("title",Pa),pa.className="chickenpaint-layer-name",Ja.innerText=ma(S.BLEND_MODE_DISPLAY_NAMES[ka.blendMode])+": "+ka.alpha+"%",Ja.className="chickenpaint-layer-blend",
ha.appendChild(pa),ha.appendChild(Ja),Ba.appendChild(ha),Ua.className="chickenpaint-layer-status",Ba.appendChild(Ua),Ba.setAttribute("data-display-index",""+Ma),Ba}function ja(Ma){if(-1<Ma){let ka=p[Ma];Ma=G(Ma);ka&&Ma&&n.show(ka,Ma)}}function ra(Ma){2===qa.state?(X(ia)(qa.layerElem).removeClass("chickenpaint-layer-dragging"),qa.dropTarget&&("inside"==qa.dropTarget.direction?a.actionPerformed({action:"CPRelocateLayer",layer:qa.layer,toGroup:qa.dropTarget.layer,toIndex:qa.dropTarget.layer.layers.length}):
a.actionPerformed({action:"CPRelocateLayer",layer:qa.layer,toGroup:qa.dropTarget.layer.parent,toIndex:qa.dropTarget.layer.parent.indexOf(qa.dropTarget.layer)+("over"==qa.dropTarget.direction?1:0)})),qa.dropTarget=null,qa.state=0,U()):qa.state=0;Ka&&(clearTimeout(Ka),Ka=null);Ya.releasePointerCapture(Ma.pointerId);Ya.removeEventListener("pointermove",V);Ya.removeEventListener("pointerup",ra)}function Oa(){qa.state=2;qa.frameElem=document.createElement("div");qa.frameElem.className="chickenpaint-layer-drag-frame";
qa.frameElem.style.width=X(ia)(qa.layerElem).outerWidth(!1)+"px";qa.frameElem.style.height=X(ia)(qa.layerElem).outerHeight(!1)+"px";qa.dropBetweenMarkerElem=document.createElement("div");qa.dropBetweenMarkerElem.className="chickenpaint-layer-drop-between-mark";qa.layerElem.className+=" chickenpaint-layer-dragging";Ya.appendChild(qa.frameElem)}function V(Ma){Ma=Ma.clientY;switch(qa.state){case 3:if(5<Math.abs(Ma-qa.dragY))qa.state=4;else break;case 4:Ya.scrollTop=qa.initialScrollTop+qa.dragY-Ma;break;
case 1:if(5<Math.abs(Ma-qa.dragY))Oa();else break;case 2:qa.dragY=Ma,U()}}function Ga(Ma,ka,Ba){try{Ba?X(ia)(".chickenpaint-layer-mask-thumbnail",Ma).replaceWith(Y(ka)):X(ia)(".chickenpaint-layer-image-thumbnail",Ma).replaceWith(T(ka))}catch(ya){}}let qa={state:0,layer:null,layerElem:null,dragX:0,dragY:0,initialScrollTop:0,dropTarget:null,dropBetweenMarkerElem:null,frameElem:null},pb=document.createElement("div"),Ya=document.createElement("div"),Ub=0,Lb=!1,Ka=null;for(let Ma of(this.buildLayers=function(){let ka=
(p=g.getLayersRoot().getLinearizedLayerList(!0)).map((ya,ha)=>ea(ha,ya)),Ba=document.createDocumentFragment();X(ia)(Ya).empty();for(let ya=ka.length-1;0<=ya;ya--)Ba.appendChild(ka[ya]);Ya.appendChild(Ba);U()},this.layerChanged=function(ka){let Ba=p.indexOf(ka),ya=X(ia)(G(Ba));0===ya.length||ka instanceof rb&&(ka.expanded!=X(ia)(ya).hasClass("chickenpaint-layer-group-expanded")||ka.visible!=X(ia)(ya).hasClass("chickenpaint-layer-visible"))?this.buildLayers():ya.replaceWith(ea(Ba,ka))},this.setRotation90=
function(ka){if(Ub!=ka)for(Ub=ka,ka=0;ka<p.length;ka++){let Ba=p[ka],ya=X(ia)(G(ka));0<ya.length&&(Ga(ya,Ba,!1),Ba.mask&&Ga(ya,Ba,!0))}},this.layerImageThumbChanged=function(ka){var Ba=p.indexOf(ka);Ba=X(ia)(G(Ba));0<Ba.length&&Ga(Ba,ka,!1)},this.layerMaskThumbChanged=function(ka){var Ba=p.indexOf(ka);Ba=X(ia)(G(Ba));0<Ba.length&&(ka.mask?Ga(Ba,ka,!0):X(ia)(".chickenpaint-layer-mask-thumbnail",Ba).remove())},this.activeLayerChanged=function(ka,Ba){X(ia)(".active",Ya).removeClass("active");ka=X(ia)(G(p.indexOf(ka)));
ka.addClass("active");X(ia)(".chickenpaint-layer-image-thumbnail",ka).toggleClass("active",!Ba);X(ia)(".chickenpaint-layer-mask-thumbnail",ka).toggleClass("active",Ba)},this.resize=function(){b.dismissNotification();this.buildLayers()},this.getElement=function(){return pb},this.revealLayer=function(ka){ka=G(ka);let Ba=ka.getBoundingClientRect(),ya=Ya.getBoundingClientRect();return Ya.scrollTop=Math.max(Math.min(Math.max(Ya.scrollTop,Ya.scrollTop+Ba.bottom-ya.bottom),Ya.scrollTop+Ba.top-ya.top),0),
ka},e.id="chickenpaint-layer-pop",pb.className="chickenpaint-layers-widget",pb.addEventListener("contextmenu",ka=>ka.preventDefault(),!0),Ya.className="list-group",Ya.addEventListener("dblclick",function(ka){0===ka.button&&0<X(ia)(ka.target).closest(".chickenpaint-layer-description").length&&0===X(ia)(ka.target).closest("input").length&&(ja(L(ka.target)),ka.preventDefault())}),Ya.addEventListener("pointerdown",function(ka){let Ba=L(X(ia)(ka.target).closest(".chickenpaint-layer")[0]);if(-1!=Ba){let ya=
p[Ba];if(0==ka.button&&X(ia)(ka.target).closest(".chickenpaint-layer-eye").length)a.actionPerformed({action:"CPSetLayerVisibility",layer:ya,visible:!ya.visible});else if(0==ka.button&&ya instanceof rb&&X(ia)(ka.target).closest(".chickenpaint-layer-group-toggle").length)a.actionPerformed({action:"CPExpandLayerGroup",group:ya,expand:!ya.expanded});else{let ha=g.getActiveLayer()!=ya;if(Lb=0<X(ia)(ka.target).closest(".chickenpaint-layer-mask-thumbnail").length||ya instanceof rb&&null!==ya.mask&&ha,0==
ka.button&&ka.shiftKey&&!ka.ctrlKey&&!ka.metaKey&&Lb)a.actionPerformed({action:"CPSetMaskVisible",layer:ya,visible:!ya.maskVisible});else{let Pa,pa;(Pa=0==ka.button||ha?Lb:g.isEditingMask(),pa=g.isEditingMask()!=Pa,(ha||pa)&&a.actionPerformed({action:"CPSetActiveLayer",layer:ya,mask:Pa}),Pa&&ka.altKey)?a.actionPerformed({action:"CPToggleMaskView"}):Pa&&!ka.shiftKey&&(ka.ctrlKey||ka.metaKey)?a.actionPerformed({action:"CPApplyLayerMask"}):Pa&&ka.shiftKey&&(ka.ctrlKey||ka.metaKey)?a.actionPerformed({action:"CPRemoveLayerMask"}):
0==ka.button?("pen"===ka.pointerType||"touch"===ka.pointerType?(qa.state=3,qa.initialScrollTop=Ya.scrollTop,Ka&&clearTimeout(Ka),Ka=setTimeout(()=>{3===qa.state&&(Oa(),qa.dragY=ka.clientY,U())},800)):qa.state=1,qa.dropTarget=null,qa.layer=ya,qa.layerElem=G(Ba),qa.dragX=ka.clientX,qa.dragY=ka.clientY,Ya.setPointerCapture(ka.pointerId),Ya.addEventListener("pointermove",V),Ya.addEventListener("pointerup",ra)):2==ka.button&&!ha&&(ka.preventDefault(),-1!=L(ka.target)&&(ja(L(ka.target)),ka.preventDefault()))}}}}),
Ya.setAttribute("touch-action","none"),["ontouchstart","ontouchmove","ontouchend","ontouchcancel"]))Ya.addEventListener(Ma,qp);pb.appendChild(Ya)},m=new Xc(0,100,!1,!1,208),h=document.createElement("select"),n=new function(){let G=null,L="",U=document.createElement("input"),T=this;this.hide=function(){G=null;let Y=X(ia)(U).parent();Y&&(X(ia)(U).remove(),Y.text(L))};this.renameAndHide=function(){G&&G.name!=U.value&&a.actionPerformed({action:"CPSetLayerName",layer:G,name:U.value});this.hide()};this.show=
function(Y,ea){L=(G=Y).name;U.value=L;(Y=ea.querySelector(".chickenpaint-layer-name"))&&Y.parentNode&&(ea=Y.firstChild)&&ea.nodeType===Node.TEXT_NODE&&(Y.removeChild(ea),Y.appendChild(U));U.select()};U.type="text";U.className="chickenpaint-layer-rename form-control input-sm";U.addEventListener("keydown",function(Y){Y.stopPropagation()});U.addEventListener("keydown",function(Y){"Enter"===Y.key&&T.renameAndHide();Y.stopPropagation()});U.addEventListener("keyup",function(Y){"Escape"===Y.key&&T.hide();
Y.stopPropagation()});U.addEventListener("blur",function(Y){G&&T.renameAndHide()})},r=document.createElement("input"),u=document.createElement("input"),v=!1,x,C=this.setSize,J=this.setWidth,H=this.setHeight;this.setSize=function(G,L){C.call(this,G,L);this.dismissNotification();m.resize()};this.setWidth=function(G){J.call(this,G);m.resize();l.resize()};this.setHeight=function(G){H.call(this,G);l.resize()};this.setRotation90=function(G){l.setRotation90(G)};this.dismissNotification=function(){X(ia)(".chickenpaint-layer[aria-describedby],.chickenpaint-slider[aria-describedby]",
k).each((G,L)=>{L=X(ia)(L);(G=bootstrap.Popover.getInstance(L[0]))&&G.dispose()});v&&(clearTimeout(v),v=!1)};this.showNotification=(G,L,U)=>{let T=p.indexOf(G);G=g.getActiveLayer()==G&&"opacity"==U?m.getElement():l.revealLayer(T);this.dismissNotification();(new bootstrap.Popover(G,{html:!1,content:L,placement:"left",trigger:"manual",fallbackPlacement:[],boundary:"window",container:b.getElement()})).show();v=setTimeout(()=>{v=!1;this.dismissNotification()},Math.max(Math.round(70*L.length),3E3))};h.className=
"form-control form-control-sm";h.tabIndex=-1;h.title=ma("Layer blending mode");h.addEventListener("change",function(G){a.actionPerformed({action:"CPSetLayerBlendMode",blendMode:parseInt(h.value,10)});h.blur()});k.appendChild(h);m.title=function(G){return ma("Opacity")+": "+G+"%"};m.on("valueChange",function(G){a.actionPerformed({action:"CPSetLayerAlpha",alpha:G})});k.appendChild(m.getElement());r.id="chickenpaint-chk-sample-all-layers";r.type="checkbox";r.addEventListener("click",function(G){g.setSampleAllLayers(r.checked);
document.activeElement.blur()});k.appendChild(sl(r,ma("Sample all layers")));u.id="chickenpaint-chk-lock-alpha";u.type="checkbox";u.addEventListener("click",function(G){a.actionPerformed({action:"CPSetLayerLockAlpha",lock:u.checked});document.activeElement.blur()});k.appendChild(sl(u,ma("Lock transparency")));k.appendChild(l.getElement());x=function(){var G=[{title:"Add layer",icon:fd("icon-file"),action:"CPAddLayer"},{title:"Add group",icon:fd("icon-folder"),action:"CPAddGroup"},{title:"Merge down",
icon:fd("icon-download_FILL"),action:"CPLayerMergeDown",require:["image-layer"]},{title:"Merge group",icon:fd("icon-collapse_all_FILL"),action:"CPGroupMerge",require:["layer-group"]},{title:"Clip to the layer below",icon:fd("icon-level-down-alt fa-flip-horizontal"),action:"CPCreateClippingMask",require:"no-clipping-mask-or-is-group"},{title:"Unclip from the layer below",icon:fd("icon-level-down-alt fa-flip-horizontal"),action:"CPReleaseClippingMask",require:"clipping-mask"},{title:"Add layer mask",
icon:Ci("mask"),action:"CPAddLayerMask",require:["no-mask"]},{title:"Apply mask",icon:Ci("mask"),action:"CPApplyLayerMask",require:["mask"]},{title:"Duplicate",icon:fd("icon-clone"),action:"CPLayerDuplicate"},{title:"Delete layer",icon:fd("icon-trash"),action:"CPRemoveLayer"}];let L=document.createElement("ul");for(let U of(L.className="chickenpaint-layer-buttons list-unstyled",G))G=document.createElement("li"),G.setAttribute("data-action",U.action),G.className="chickenpaint-small-toolbar-button "+
(U.require?"chickenpaint-action-require-"+U.require:""),G.title=ma(U.title),G.appendChild(U.icon),G.addEventListener("click",function(){a.actionPerformed({action:U.action})}),L.appendChild(G);return L}();k.appendChild(x);g.on("changeActiveLayer",function(G,L,U){l.activeLayerChanged(L,U);c()});g.on("changeLayer",function(G){g=this;b.dismissNotification();l.layerChanged(G);c()});g.on("changeStructure",d);g.on("changeLayerMaskThumb",function(G){g=this;l.layerMaskThumbChanged(G)});g.on("changeLayerImageThumb",
function(G){g=this;l.layerImageThumbChanged(G)});a.on("layerNotification",this.showNotification.bind(this));d.call(g)}function rp(){this.table=new Uint8Array(256);this.loadIdentity=function(){for(var a=0;256>a;a++)this.table[a]=a};this.loadBrightnessContrast=function(a,c){c=0<c?1/(1.0001-c):1+c;a=.5-.5*c+a;for(var d=0;256>d;d++)this.table[d]=Math.min(255,Math.max(~~(255*(d/255*c+a)),0))};this.invert=function(){for(var a=0;256>a;a++)this.table[a]=255-this.table[a]}}function tl(a,c){let d=document.createElement("div"),
b=document.createElement("label");return d.className="form-check",a.className="form-check-input",b.className="form-check-label",b.setAttribute("for",a.id),b.appendChild(a),b.appendChild(document.createTextNode(c)),d.appendChild(a),d.appendChild(b),d}function Zg(a){function c(T){for(let Y=0;Y<T.length;Y++){let ea=new e(T[Y],32,32);ea.on("click",function(){r=this.texture;k()});G.appendChild(ea.getElement())}}function d(T){let Y=new gb(T,T,8);for(let ea=1;ea<T*T;ea++)Y.data[ea]=255;return Y}function b(T){let Y=
2*T,ea=new gb(Y,Y,8);for(let ja=0;ja<Y;ja++)for(let ra=0;ra<Y;ra++)ea.data[ja+ra*Y]=0==(~~(ja/T)+~~(ra/T))%2?0:255;return ea}function g(T,Y){let ea=new gb(Y,Y,8);for(let ja=0;ja<Y*Y;ja++)~~(ja%Y)>=T&&(ea.data[ja]=255);return ea}function p(T,Y){let ea=new gb(Y,Y,8);for(let ja=0;ja<Y*Y;ja++)ja/Y>=T&&(ea.data[ja]=255);return ea}function k(){if(null!=r){u=r.clone();v&&u.mirrorHorizontally();let T=new rp;T.loadBrightnessContrast(C,J);x&&T.invert();u.applyLUT(T)}else u=null;a.getArtwork().setBrushTexture(u);
null!=H&&H.updateTexture()}function e(T,Y,ea){let ja=document.createElement("canvas"),ra=ja.getContext("2d"),Oa=this;this.setTexture=function(V){this.texture=V;this.paint()};this.getElement=function(){return ja};this.paint=function(){null!=this.texture?ra.fillStyle=ra.createPattern(this.texture.getAsCanvas(),"repeat"):ra.fillStyle="white";ra.fillRect(0,0,ja.width,ja.height)};ja.addEventListener("click",function(){Oa.emit("click")});ja.width=Y;ja.height=ea;this.setTexture(T)}var l;let m,h,n;yc.call(this,
a,"textures","Textures");let r,u,v=!1,x=!1,C=0,J=0,H,G=document.createElement("div"),L=this.getBodyElement();e.prototype=Object.create(X(ic).prototype);e.prototype.constructor=e;H=new function(){function T(){Oa.checked=x;V.checked=v;Ga.setValue(100*C+100);qa.setValue(100*J+100)}let Y,ea,ja,ra=document.createElement("div"),Oa=document.createElement("input"),V=document.createElement("input"),Ga=new Xc(0,200,!0),qa=new Xc(0,200,!0),pb=new e(null,64,64),Ya=document.createElement("button"),Ub,Lb=new bootstrap.Popover(Ya,
{html:!0,content:()=>Ub,trigger:"manual",placement:"right",container:L});this.updateTexture=function(){Ya.disabled=null==u;pb.setTexture(u)};this.getElement=function(){return ra};ra.className="chickenpaint-texture-options";ra.appendChild(pb.getElement());Ya.type="button";Ya.className="btn btn-light btn-sm";Ya.setAttribute("data-bs-toggle","popover");Ya.setAttribute("data-bs-placement","right");Ya.textContent=ma("Customize");(Y=document.createElement("div")).className="chickenpaint-texture-controls";
Oa.id="chickenpaint-chk-texture-invert";Oa.type="checkbox";Oa.addEventListener("click",function(Ka){x=this.checked;k()});Y.appendChild(tl(Oa,ma("Inverse")));V.id="chickenpaint-chk-texture-mirror";V.type="checkbox";V.addEventListener("click",function(Ka){v=this.checked;k()});Y.appendChild(tl(V,ma("Mirror")));Ga.title=function(Ka){return ma("Brightness")+": "+(Ka-100)+"%"};Ga.on("valueChange",function(Ka){C=(Ka-100)/100;k()});Y.appendChild(Ga.getElement());qa.title=function(Ka){return ma("Contrast")+
": "+(Ka-100)+"%"};qa.on("valueChange",function(Ka){J=(Ka-100)/100;k()});Y.appendChild(qa.getElement());ea=document.createElement("button");ja=document.createElement("button");ea.textContent="Ok";ea.className="btn btn-primary btn-sm";ea.type="button";ea.addEventListener("click",function(Ka){Lb.hide()});Y.appendChild(ea);Y.appendChild(document.createTextNode(" "));ja.textContent="Reset";ja.className="btn btn-secondary btn-sm";ja.type="button";ja.addEventListener("click",function(Ka){J=C=0;x=v=!1;T();
k()});Y.appendChild(ja);T();Ub=Y;Ya.addEventListener("click",function(){Lb.toggle()});ra.appendChild(Ya);this.updateTexture()};L.appendChild(H.getElement());G.className="chickenpaint-texture-swatches";L.appendChild(G);c((l=[null],(m=new gb(2,2,8)).data[0]=255,m.data[3]=255,l.push(m),l.push(d(2)),l.push(d(3)),l.push(d(4)),l.push(d(6)),l.push(d(8)),l.push(g(1,2)),l.push(g(2,4)),l.push(p(1,2)),l.push(p(2,4)),l.push(b(2)),l.push(b(4)),l.push(b(8)),l.push(b(16)),l));l=a.getResourcesRoot()+"gfx/textures32.png";
var U=function(T){c(T)};h=new Image;n=[];h.onload=function(){var T=document.createElement("canvas");let Y=T.getContext("2d",{willReadFrequently:!0});T.width=h.width;T.height=h.height;for(T=0;2>T;T++){Y.drawImage(h,0,32*T,32,32,0,0,32,32);try{let ea=Y.getImageData(0,0,32,32),ja=new gb(32,32,8);for(let ra=0;1024>ra;ra++)ja.data[ra]=ea.data[4*ra];n.push(ja)}catch(ea){console.log(ea)}}U(n)};h.src=l}function $g(a){function c(J){let H=document.createElement("div"),G=document.createElement("a"),L=document.createElement("ul"),
U=document.createElement("a"),T=document.createElement("a"),Y=this;this.getElement=function(){return H};this.setColor=function(ja){G.setAttribute("data-color",ja);var ra=G.style;for(ja=""+Number(ja).toString(16);6>ja.length;)ja="0"+ja;ra.backgroundColor="#"+ja};this.setColor(J);G.href="#";G.className="chickenpaint-color-swatch dropdown-toggle";U.className="dropdown-item";U.href="#";U.textContent=ma("Remove");U.addEventListener("click",function(ja){ja.preventDefault();X(ia)(H).remove();n=!0});T.className=
"dropdown-item";T.href="#";T.textContent=ma("Replace with current color");T.addEventListener("click",function(ja){ja.preventDefault();Y.setColor(a.getCurColor().getRgb());n=!0});L.className="dropdown-menu";J=document.createElement("li");let ea=document.createElement("li");J.appendChild(U);ea.appendChild(T);L.appendChild(J);L.appendChild(ea);H.className="chickenpaint-color-swatch-wrapper";H.appendChild(G);H.appendChild(L)}function d(J){J=new c(J);r.appendChild(J.getElement())}function b(J){let H=document.createElement("span");
return H.className="fa icon-"+J,H}let g,p,k;let e,l,m;yc.call(this,a,"swatches","Color swatches");let h=[16777215,0,16711680,65280,255,16776960],n=!1,r=document.createElement("ul"),u=document.createElement("div"),v,x=this;this.getSwatches=function(){let J=X(ia)(".chickenpaint-color-swatch",r),H=Array(J.length);for(let G=0;G<J.length;G++)H[G]=parseInt(J.get(G).getAttribute("data-color"),10);return H};this.setSwatches=function(J){for(;r.lastChild;)r.removeChild(r.lastChild);!0;for(let H=0;H<J.length;H++)d(J[H]);
n=!0};this.isModified=function(){return n};(function(){r.className="chickenpaint-color-swatches list-unstyled";for(let J=0;J<h.length;J++)r.appendChild((new c(h[J])).getElement());r.addEventListener("click",function(J){let H=J.target;/^<a data-color=/i.test(H.outerHTML)&&/chickenpaint-color-swatch/.test(H.className)&&0==J.button&&void 0!==H.getAttribute("data-color")&&(a.setCurColor(new Gb(parseInt(H.getAttribute("data-color"),10))),J.stopPropagation(),J.preventDefault())});r.addEventListener("contextmenu",
function(J){let H=J.target;if(/^<a data-color=/i.test(H.outerHTML)&&/chickenpaint-color-swatch/.test(H.className)){J.preventDefault();var G=new bootstrap.Dropdown(X(ia)(H));G.toggle();document.addEventListener("click",function T(U){G.hide();document.removeEventListener("click",T)})}})})();this.getBodyElement().appendChild(r);g=document.createElement("button");p=document.createElement("button");k=document.createElement("ul");var C=document.createElement("a");e=document.createElement("a");p.type="button";
p.title=ma("Add the current brush color as a new swatch");p.className="btn chickenpaint-small-toolbar-button chickenpaint-color-swatch-add";p.appendChild(b("plus"));g.type="button";g.className="btn dropdown-toggle chickenpaint-small-toolbar-button chickenpaint-color-swatch-settings";g.setAttribute("data-bs-toggle","dropdown");g.appendChild(b("cog"));C.className="dropdown-item";C.href="#";C.textContent=ma("Save swatches to your computer...");C.addEventListener("click",function(J){J.preventDefault();
J=new Blob([(new kf).write(x.getSwatches())],{type:"application/octet-stream"});X(cg).saveAs(J,"oekakiswatches.aco")});e.className="dropdown-item";e.href="#";e.textContent=ma("Load swatches from your computer...");e.addEventListener("click",function(J){J.preventDefault();v.onchange=function(){var H=this.files;if(!(1>H.length)){H=H[0];var G=new FileReader;G.onload=function(){let L=(new kf).read(this.result);null!=L&&0<L.length?x.setSwatches(L):alert(ma("The swatches could not be read, did you select an .aco file?"))};
G.readAsArrayBuffer(H)}};v.click()});k.className="dropdown-menu";l=document.createElement("li");m=document.createElement("li");l.appendChild(C);m.appendChild(e);k.appendChild(l);k.appendChild(m);(C=document.createElement("div")).className="btn-group";C.appendChild(g);C.appendChild(k);p.addEventListener("click",function(J){d(a.getCurColor().getRgb());n=!0});u.className="chickenpaint-color-swatches-buttons";window.File&&window.FileReader&&window.FileList&&window.Blob&&((v=document.createElement("input")).type=
"file",v.multiple=!1,v.style.display="none",u.appendChild(C),u.appendChild(v));u.appendChild(p);this.getBodyElement().appendChild(u)}function ah(a){function c(){let h=X(ia)(k).parents(".chickenpaint").find(".chickenpaint-canvas");return{width:h.width(),height:h.height()}}function d(h,n){let r=h.getElement();n?k.contains(r)||k.appendChild(r):k.contains(r)&&k.removeChild(r);e.emitEvent("paletteVisChange",[h.name,n])}let b={tool:new Ug(a),misc:new Vg(a),stroke:new Wg(a),color:new Xg(a),brush:new mf(a),
layers:new Yg(a),textures:new Zg(a),swatches:new $g(a)},g={tool:!1,color:!1,misc:!1};var p={color:!0,textures:!0,layers:!0};let k=document.createElement("div"),e=this,l=[],m=[];for(let h in this.palettes=b,this.showPaletteByName=function(n,r){(n=b[n])&&d(n,r)},this.togglePalettes=function(){if(0==m.length)X(ia)("> .chickenpaint-palette",k).each(function(){e.showPaletteByName(this.getAttribute("data-paletteName"),!1);m.push(this)});else{for(let n=0;n<m.length;n++)e.showPaletteByName(m[n].getAttribute("data-paletteName"),
!0);m=[]}},this.constrainPalettes=function(){let n=c();for(var r in b){let u=b[r];u.getX()+u.getWidth()/2>n.width&&u.setLocation(n.width-u.getWidth(),u.getY());u.getY()+u.getHeight()/2>n.height&&u.setLocation(u.getX(),n.height-u.getHeight())}r=0<n.width-b.tool.getWidth()-b.misc.getWidth()-b.stroke.getWidth()-b.color.getWidth()-b.brush.getWidth()-15;b.swatches.getX()+b.swatches.getWidth()==b.brush.getX()+b.brush.getWidth()&&20>Math.abs(b.swatches.getY()-b.brush.getY())&&b.swatches.setLocation(b.brush.getX()-
b.swatches.getWidth()-(r?5:1),0);b.layers.getY()+b.layers.getHeight()>n.height&&b.layers.setHeight(Math.max(n.height-b.layers.getY(),200))},this.arrangePalettes=function(){let n=c();if(a.getSmallScreenMode()){b.tool.setLocation(0,0);b.misc.setLocation(b.tool.getX()+b.tool.getWidth()+1,0);var r=16>=n.width-(b.tool.getWidth()+b.misc.getWidth()+b.brush.getWidth())?b.misc.getY()+b.misc.getHeight()+1:0;b.brush.setLocation(n.width-b.brush.getWidth()-15,r);b.textures.setWidth(n.width-b.textures.getX());
b.layers.setLocation(b.brush.getX()+b.brush.getWidth()-b.layers.getWidth(),b.textures.getY()-b.layers.getHeight());r=Math.max(b.textures.getY()-330-1,370);b.layers.setHeight(r);b.layers.setWidth(218);b.stroke.setLocation(b.misc.getX(),b.misc.getY()+b.misc.getHeight()+1);b.swatches.setLocation(b.stroke.getX(),b.stroke.getY()+b.stroke.getHeight()+1)}else{r=0<n.width-b.tool.getWidth()-b.misc.getWidth()-b.stroke.getWidth()-b.color.getWidth()-b.brush.getWidth()-15;b.brush.setLocation(n.width-b.brush.getWidth()-
15,0);var u=b.brush.getY()+b.brush.getHeight();u=300<n.height-u?u+2:u;b.layers.setSize(b.brush.getWidth()+(r?30:0),n.height-u);b.layers.setLocation(b.brush.getX()+b.brush.getWidth()-b.layers.getWidth(),u);b.tool.setLocation(0,0);b.misc.setLocation(b.tool.getX()+b.tool.getWidth()+(r?5:1),0);r?b.stroke.setLocation(b.misc.getX()+b.misc.getWidth()+(r?5:1),0):b.stroke.setLocation(b.misc.getX(),b.misc.getY()+b.misc.getHeight()+1);b.swatches.setLocation(Math.max(b.brush.getX()-b.swatches.getWidth()-(r?5:
1),b.tool.getX()+b.tool.getWidth()),0);b.textures.setWidth(Math.min(b.layers.getX()-b.textures.getX(),490))}b.textures.setLocation(b.color.getX()+b.color.getWidth()+4,n.height-b.textures.getHeight());b.color.setLocation(0,Math.max(b.tool.getY()+b.tool.getHeight(),n.height-b.color.getHeight()))},a.on("smallScreen",function(n){if(n)for(let r in b)b[r].toggleCollapse(n&&(!(r in g)||g[r]))}),this.getElement=function(){return k},k.className="chickenpaint-palettes",b){let n=b[h],r=n.getElement();n.on("paletteVisChange",
function(){d(this,!1)});h in p&&n.setCollapseDownwards(!0);r.setAttribute("data-paletteName",h);l.push(r)}for(let h in b)p=b[h].getElement(),k.appendChild(p)}function sp(a,c){function d(e){let l=e.data("action"),m=e.data("checkbox"),h;a.isActionAllowed(l)&&(m?(e.toggleClass("selected"),h=e.hasClass("selected")):h=!1,a.actionPerformed({action:l,checkbox:m,selected:h}))}let b=X(ia)('<nav class="navbar navbar-expand-md bg-light"><div class="navbar-upper"><a class="navbar-brand" href="#">ChickenPaint Be</a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#chickenpaint-main-menu-content" aria-controls="chickenpaint-main-menu-content" aria-expanded="false" aria-label="Toggle main menu"><span class="navbar-toggler-icon"></span></button></div><div class="collapse navbar-collapse" id="chickenpaint-main-menu-content"><div class="navbar-nav"></div></div><div class="widget-nav" id="chickenpaint-palette-toggler-content"></div></nav>'),
g=navigator.userAgent.toLowerCase().includes("mac os");this.getElement=function(){return b[0]};(function(e,l){e.append(l.map(m=>{let h=X(ia)('<div class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+ma(m.name)+'</a><ul class="dropdown-menu"></ul></div>'),n=X(ia)(".dropdown-toggle",h),r=X(ia)(".dropdown-menu",h);return n[0].addEventListener("show.bs.dropdown",u=>{!function(v){X(ia)("[data-action]",
v).each(function(){let C=X(ia)(this);var J=this.getAttribute("data-action");J=a.isActionAllowed(J);C.toggleClass("disabled",!J).toggleClass("hidden",!J&&!0===C.data("hideIfNotAvailable"))});X(ia)(".dropdown-divider",v).removeClass("hidden");v=X(ia)(".dropdown-item:not(.hidden),.dropdown-divider:not(.hidden)",v);let x=null;for(let C=0;C<v.length;C++){let J=X(ia)(v[C]);J.hasClass("dropdown-divider")?0===C||x?J.addClass("hidden"):x=J:x=null}x&&x.addClass("hidden")}(h)}),r.append(m.children.map(u=>{let v;
if(!u.action||a.isActionSupported(u.action)){if("CPSend"!=u.action||a.isActionSupported("CPContinue")||(u.name=ma("Post Oekaki"),u.shortcut="ctrl+p"),"-"==u.name?v=X(ia)('<hr class="dropdown-divider"></hr>'):(v=X(ia)('<a class="dropdown-item" href="#" data-action="'+u.action+'"><span>'+ma(u.name)+"</span></a>"),u.checkbox&&X(ia)(v).data("checkbox",!0).toggleClass("selected",!!u.checked),u.hideIfNotAvailable&&v.data("hideIfNotAvailable",!0)),u.title&&v.attr("title",ma(u.title)),u.shortcut){var x;let C=
v,J=document.createElement("small");g&&(u.shortcut=u.shortcut.replace(/SHIFT/im,"\u21e7"),u.shortcut=u.shortcut.replace(/ALT/im,"\u2325"),u.shortcut=u.shortcut.replace(/CTRL/im,"\u2318"));J.className="chickenpaint-shortcut";J.textContent=(x=(x=(x=(x=(x=u.shortcut).toUpperCase()).replace(/(,.+)$/,"")).replace("CTRL+=","CTRL++")).replace("\u2318+=","\u2318++"),x=g?x.replace(/([^+])\+/g,"$1"):x.replace(/([^+])\+/g,"$1 "));C.append(J);X(ac)(u.shortcut,function(H){return d(C),H.preventDefault(),H.stopPropagation(),
!1})}return X(ia)("<li>").append(v)}})),h}))})(X(ia)(".navbar-nav",b),ul);(function(e,l){e.append(l.filter(m=>!!m.mnemonic&&a.isActionSupported(m.action)).map(m=>{let h=X(ia)(`<button class="widget-toggler selected" type="button" data-action="${m.action}" data-checkbox="true" data-selected="${!m.checked}"><span>`+m.mnemonic+"</span></button>");return h.on("click",n=>{d(h);n.preventDefault()}),h}))})(X(ia)(".widget-nav",b),ul[5].children);X(ia)(b).on("click","a:not(.dropdown-toggle)",function(e){d(X(ia)(this));
e.preventDefault()});X(ia)(".navbar-toggler",b).on("click",e=>{e.preventDefault()});c.getPaletteManager().on("paletteVisChange",function(e,l){X(ia)('[data-action="CPPal'+e.substring(0,1).toUpperCase()+e.substring(1)+'"]',b).toggleClass("selected",l)});let p=X(ia)(".dropdown-item[data-action=CPFullScreen]",b),k=X(ia)(".dropdown-item[data-action=CPToolbarStyle]",b);a.on("fullScreen",e=>p.toggleClass("selected",e));p.toggleClass("selected",a.isFullScreen());a.on("toolbarStyleChange",e=>k.toggleClass("selected",
"old"===e));k.toggleClass("selected","old"===a.getToolbarStyle())}function bh(a,c){let d=document.createElement("div"),b=new Tg(a),g=new ah(a),p,k=!1,e=this;this.togglePalettes=function(){g.togglePalettes()};this.arrangePalettes=function(){setTimeout(g.arrangePalettes.bind(g),0)};this.constrainPalettes=function(){g.constrainPalettes()};this.showPalette=function(m,h){g.showPaletteByName(m,h)};this.getSwatches=function(){return g.palettes.swatches.getSwatches()};this.setSwatches=function(m){g.palettes.swatches.setSwatches(m)};
this.getPaletteManager=function(){return g};this.setRotation90=function(m){b.setRotation(m*Math.PI/2);g.palettes.layers.setRotation90(m)};this.setFullScreenMode=function(m){k!==m&&(k=m,e.resize(),e.arrangePalettes())};this.resize=function(){let m=window.innerHeight,h=p.getElement().getBoundingClientRect().height;b.resize(k?m-h:Math.min(Math.max(m-h-65,500),850),!1);e.constrainPalettes()};p=new sp(a,this);c.appendChild(p.getElement());d.className="chickenpaint-main-section";d.appendChild(b.getElement());
d.appendChild(g.getElement());c.appendChild(d);b.on("canvasRotated90",function(m){g.palettes.layers.setRotation90(m)});screen.orientation&&screen.orientation.addEventListener("change",m=>{this.resize();a.actionPerformed({action:"CPArrangePalettes"});setTimeout(()=>{this.resize();a.actionPerformed({action:"CPArrangePalettes"})},10);Promise.resolve().then(()=>{this.resize()}).then(()=>{a.actionPerformed({action:"CPArrangePalettes"})})});let l=document.getElementById("chickenpaint-main-menu-content");
if(document.addEventListener("show.bs.modal",()=>{l&&l.classList.contains("show")&&(new bootstrap.Collapse(l,{toggle:!1})).hide()}),l){let m=document.querySelector(".chickenpaint .widget-nav");m&&(l.addEventListener("show.bs.collapse",h=>{m.classList.add("hidden")}),l.addEventListener("hidden.bs.collapse",h=>{m.classList.remove("hidden")}));window.addEventListener("resize",()=>{m.classList.remove("hidden")})}document.addEventListener("hidden.bs.collapse",this.resize.bind(this));window.addEventListener("resize",
this.resize.bind(this));a.on("fullScreen",m=>this.setFullScreenMode(m));a.on("toolbarStyleChange",m=>{X(ia)(c).toggleClass("chickenpaint-toolbar-style-old","old"===m)});a.on("unsavedChanges",m=>{X(ia)(c).toggleClass("chickenpaint-unsaved",m)});setTimeout(this.resize.bind(this),0)}function tp(a){var c=X(ia)('<div class="modal fade chickenpaint-about-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">About ChickenPaint Be</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n\t\t\t\t\t\t<a class="chickenpaint-on-github" target="_blank" href="https://github.com/satopian/ChickenPaint_Be" rel="noopener"><span class="icon-github"></span> ChickenPaint Be on GitHub</a>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tCustomized from <a href="https://github.com/thenickdude/chickenpaint" target="_blank" rel="noopener">ChickenPaint</a>.<br>\n\t\t\t\t\t\tby satopian.<br>\n\t\t\t\t\t\t<a href="https://www.gnu.org/licenses/" target="_blank" rel="noopener">GNU General Public License</a></br>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<a class="chickenpaint-on-github" target="_blank" href="https://github.com/thenickdude/chickenpaint" rel="noopener"><span class="icon-github"></span> ChickenPaint on GitHub</a>\n                            \n                            <p>\n                                ChickenPaint is a translation of <a href="https://github.com/thenickdude/chibipaint" target="_blank" rel="noopener">ChibiPaint</a>\n                                from Java to JavaScript by Nicholas Sherlock / Chicken Smoothie\n                            </p>\n                            <p>\n                                ChibiPaint is Copyright (c) 2006-2008 Marc Schefer. All Rights Reserved\n                            </p>\n                            <p>\n                                ChickenPaint is free software: you can redistribute it and/or modify\n                                it under the terms of the GNU General Public License as published by\n                                the Free Software Foundation, either version 3 of the License, or\n                                (at your option) any later version.\n                            </p>\n        \n                            <p>\n                                ChickenPaint is distributed in the hope that it will be useful,\n                                but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n                                <a target="_blank" href="https://www.gnu.org/licenses/" rel="noopener">GNU General Public License</a> for more details.\n                            </p>\n        \n                            <pre class="pre-scrollable chickenpaint-third-party-licenses">Toolbar icons designed by <a target="_blank" href="https://github.com/Anteira" rel="noopener">Miglena Lapavicheva (Anteira)</a>\n    These icons are dual-licensed under <a target="_blank" href="https://spdx.org/licenses/GPL-3.0-or-later.html" rel="noopener">GPL-3.0-or-later</a> and <a target="_blank" href="https://creativecommons.org/licenses/by/3.0/" rel="noopener">CC-BY-3.0</a>\n\nIncludes icons from the <a target="_blank" href="https://extensions.libreoffice.org/en/extensions/show/tango-icon-theme-for-libreoffice" rel="noopener">Tango Icon Theme for LibreOffice</a>:\n    All artwork is licensed under the Creative Commons Attribution-Share Alike 3.0\n    United States License. To view a copy of this licence, visit\n    https://creativecommons.org/licenses/by-sa/3.0/ or send a letter to Creative\n    Commons, 171 Second Street, Suite 300, San Francisco, California 94105, USA.\n    \n    Credit for icons imported from git://git.gnome.org/gnome-icon-theme or derivatives\n    of these goes to the GNOME project (https://www.gnome.org)\n    Derivatives and new icons were created by Alexander Wilms &lt;f.alexander.wilms@gmail.com> \n    and Miroslav Mazel &lt;mazelm@gmail.com>\n    \nIncludes these MIT-licensed libraries:\n\n    Includes the <a target="_blank" href="https://github.com/eligrey/FileSaver.js" rel="noopener">FileSaver.js library</a>\n    FileSaver.js Copyright \u00a9 2015 <a target="_blank" href="https://eligrey.com/" rel="noopener">Eli Grey</a>\n\n    Includes the <a target="_blank" href="https://github.com/nodeca/pako" rel="noopener">Pako zlib compression library</a>\n    Copyright (C) 2014-2015 by Vitaly Puzrin\n    \n    Includes the <a target="_blank" href="https://github.com/madrobby/keymaster" rel="noopener">keymaster.js</a> keyboard library\n    Copyright (c) 2011-2013 Thomas Fuchs\n\n    Includes the <a target="_blank" href="https://github.com/stefanpenner/es6-promise" rel="noopener">es6-promise</a> library\n    Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors\n\n    Includes the <a target="_blank" href="https://benalman.com/projects/jquery-throttle-debounce-plugin/" rel="noopener">jQuery throttle-debounce</a> library\n    Copyright (c) 2010 "Cowboy" Ben Alman\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="https://jquery.com/" target="_blank" rel="noopener">jQuery library</a> \nCopyright <a href="https://jquery.com/license/" target="_blank" rel="noopener">OpenJS Foundation and other contributors</a>\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/jquery\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n    \n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="https://getbootstrap.com/" target="_blank" rel="noopener">Bootstrap</a> \nCopyright <a href="https://github.com/twbs/bootstrap/blob/main/LICENSE" target="_blank" rel="noopener">The Bootstrap Authors</a>\n    \n    Permission is hereby granted, free of charge, to any person obtaining a copy\n    of this software and associated documentation files (the "Software"), to deal\n    in the Software without restriction, including without limitation the rights\n    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n    copies of the Software, and to permit persons to whom the Software is\n    furnished to do so, subject to the following conditions:\n\n    The above copyright notice and this permission notice shall be included in\n    all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n    THE SOFTWARE.\n\n\n    Includes Font Awesome by Fonticons, Inc. - <a href="https://fontawesome.com/" target="_blank" rel="noopener">https://fontawesome.com/</a>\nIncludes Material Design icons by Google - <a href="https://fonts.google.com/" target="_blank" rel="noopener">https://fonts.google.com/</a>\n                    </pre>\n                </div>\n            </div>\n        </div>\n    ');
c[0].addEventListener("hidden.bs.modal",b=>{c.remove()});var d=new bootstrap.Modal(c[0]);a.appendChild(c[0]);this.show=function(){d.show()}}function ch(a,c){var d=X(ia)(`<div class="modal fade" tabindex="-1" role="dialog">
	            <div class="modal-dialog">
	                <div class="modal-content">
	                    <div class="modal-header">
	                        <h5 class="modal-title">${ma("Complete transform")}</h5>
	                        <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
	                        </button>
	                    </div>
	                    <div class="modal-body">
	                        <p>
							${ma("You need to finish transforming this layer before you can do that. What would you like to do with the transform?")}
							</p>
	                    </div>
	                    <div class="modal-footer">
	                        <button type="button" class="btn btn-light" data-bs-dismiss="modal">${ma("Cancel")}</button>
	                        <button type="button" class="btn btn-light chickenpaint-reject-transform" data-bs-dismiss="modal">${ma("Undo transform")}</button>
	                        <button type="button" class="btn btn-primary chickenpaint-accept-transform" data-bs-dismiss="modal">${ma("Apply transform")}</button>
	                    </div>
	                </div>
	            </div>
	        </div>
	    `),b=this,g=X(ia)(".chickenpaint-accept-transform",d),p=X(ia)(".chickenpaint-reject-transform",d);g.on("click",function(e){c.actionPerformed({action:"CPTransformAccept"});b.emitEvent("accept")});p.on("click",function(e){c.actionPerformed({action:"CPTransformReject"});b.emitEvent("reject")});var k=new bootstrap.Modal(d[0]);this.show=function(){k.show()};d[0].addEventListener("hidden.bs.modal",e=>{d.remove()});a.addEventListener("keydown",function m(l){"Enter"===l.key&&(k.hide(),c.actionPerformed({action:"CPTransformAccept"}),
b.emitEvent("accept"),a.removeEventListener("keydown",m))});a.appendChild(d[0])}function up(a){var c=X(ia)(`<div class="modal fade chickenpaint-shortcuts-dialog" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">${ma("Shortcuts")}</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>
                                ${ma("Many of the menu options and painting tools have keyboard shortcuts which are written next to them or appear when you hover.")}
                            </p>
                            <p>
                                ${ma("Here are some other shortcuts which are not as obvious!")}
                            </p>
                            <div class="chickenpaint-shortcuts-sections">
                                <div class="chickenpaint-shortcuts-section">
                                    <h5>${ma("Color swatches palette")}</h5>
                                    <ul class="chickenpaint-shortcuts-list list-unstyled">
                                        <li>
                                            <dl>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ma("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ma("Use as the drawing color")}
                                                </dd>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ma("Right")}</span>
                                                </dt>
                                                <dd>
                                                    ${ma("Remove or replace a color swatch")}
                                                </dd>
                                             </dl>
                                        </li>
                                    </ul>
                                </div>
                                <div class="chickenpaint-shortcuts-section">
                                    <h5>${ma("Line drawing mode")}</h5>
                                    <ul class="chickenpaint-shortcuts-list list-unstyled">
                                        <li>
                                            <dl>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ${ma("Left")}</span>
                                                </dt>
                                                <dd>
                                                   ${ma("Snap line to nearest 45 degrees")}
                                                </dd>
                                             </dl>
                                        </li>
                                    </ul>
                                </div>
                                <div class="chickenpaint-shortcuts-section">
                                    <h5>${ma("Painting tools")}</h5>
                                    <ul class="chickenpaint-shortcuts-list list-unstyled">
                                        <li>
                                            <dl>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">1</span> - <span class="chickenpaint-shortcut-key">9</span> , <span class="chickenpaint-shortcut-key">0</span></span>
                                                </dt>
                                                <dd>
                                                    ${ma("Change brush opacity")}
                                                </dd>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">[</span> , <span class="chickenpaint-shortcut-key">]</span></span>
                                                </dt>
                                                <dd>
                                                    ${ma("Change brush size")}
                                                </dd>
                                            </dl>
                                        </li>
                                    </ul>
                                </div>
                                <div class="chickenpaint-shortcuts-section">
                                    <h5>${ma("Brush palette")}</h5>
                                    <ul class="chickenpaint-shortcuts-list list-unstyled">
                                        <li>
                                            <dl>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ma("Right")}</span>
													<span class="chickenpaint-shortcut-alternate">${ma("or")}</span>
													<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ${ma("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ma("Adjust brush sliders more precisely")}
                                                </dd>
                                            </dl>
                                        </li>
                                    </ul>
                                </div>
                                <div class="chickenpaint-shortcuts-section">
                                    <h5>${ma("Drawing canvas")}</h5>
                                    <ul class="chickenpaint-shortcuts-list list-unstyled">
                                        <li>
                                            <dl>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ma("Middle")}</span> <span class="chickenpaint-shortcut-alternate">${ma("or")}</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Space</span> + <span class="fa icon-mouse-pointer"></span> ${ma("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ma("Move the canvas around")}
                                                </dd>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">R</span> + <span class="fa icon-mouse-pointer"></span> ${ma("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ma("Rotate the canvas")}
                                                </dd>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ma("Right")}</span> <span class="chickenpaint-shortcut-alternate">${ma("or")}</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa icon-mouse-pointer"></span> ${ma("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ma("Sample the color under the cursor")}
                                                </dd>
                                             </dl>
                                        </li>
                                    </ul>
                                </div>
                                <div class="chickenpaint-shortcuts-section">
                                    <h5>${ma("Layers palette")}</h5>
                                    <ul class="chickenpaint-shortcuts-list list-unstyled">
                                        <li>
                                            <dl>
                                                <dt>
                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ma("Double click")}</span> <span class="chickenpaint-shortcut-alternate">${ma("or")}</span> <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ${ma("Right")}</span>
                                                </dt>
                                                <dd>
                                                    ${ma("Rename layer")}
                                                </dd>
                                                <dt>
												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ${ma("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ma("Toggle mask enable/disable")}
                                                </dd>
                                                <dt>
												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa icon-mouse-pointer"></span> ${ma("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ma("Toggle mask View")}
                                                </dd>
												<dt>
												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">${vl}</span> + <span class="fa icon-mouse-pointer"></span> ${ma("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ma("Apply layer mask")}
                                                </dd>
												<dt>
												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span></span> +
												<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">${vl}</span> + <span class="fa icon-mouse-pointer"></span> ${ma("Left")}</span>
                                                </dt>
                                                <dd>
                                                    ${ma("Delete layer mask")}
                                                </dd>
                                             </dl>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `);c[0].addEventListener("hidden.bs.modal",b=>{c.remove()});var d=new bootstrap.Modal(c[0]);a.appendChild(c[0]);this.show=function(){d.show()}}function vp(a,c){let d=X(ia)(`<div class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">${ma("Box blur")}</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label>${ma("Blur amount (pixels)")}</label>
                                    <input type="number" class="form-control chickenpaint-blur-amount" value="3">
                                </div>
                                <div class="form-group">
                                    <label>${ma("Iterations (1-8, larger gives smoother blur)")}</label>
                                    <input type="number" class="form-control chickenpaint-blur-iterations" value="1" min="1" max="8">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">${ma("Cancel")}</button>
                            <button type="button" class="btn btn-primary chickenpaint-apply-box-blur" data-bs-dismiss="modal">${ma("Ok")}</button>
                        </div>
                    </div>
                </div>
            </div>
        `),b=X(ia)(".chickenpaint-blur-amount",d),g=X(ia)(".chickenpaint-blur-iterations",d),p=X(ia)(".chickenpaint-apply-box-blur",d);var k=new bootstrap.Modal(d[0]);this.show=function(){let e=document.getElementById("chickenpaint-main-menu-content");e&&e.classList.contains("show")&&(new bootstrap.Collapse(e,{toggle:!1})).hide();k.show()};p[0].addEventListener("click",e=>{e=Math.max(parseInt(b.val(),10),1);let l=Math.min(Math.max(parseInt(g.val(),10),1),8);c.getArtwork().boxBlur(e,e,l);k.hide()});
d[0].addEventListener("hidden.bs.modal",e=>{d[0].remove()});d[0].addEventListener("shown.bs.modal",e=>{b[0].focus()});d[0].addEventListener("keydown",e=>{"Enter"===e.key&&d.hasClass("show")&&(p[0].click(),e.preventDefault())});a.appendChild(d[0])}function wp(a){let c=X(ia)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing tablet support</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p class="chickenpaint-tablet-there-are-two-options">\n                                There are two ways you could use your tablet\'s pen pressure support with ChickenPaint.\n                            </p>\n                            <div class="chickenpaint-tablet-support chickenpaint-wacom-support">\n                                <h5>\n                                    Plugin for Wacom tablets\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-firefox"></span>\n                                        Firefox (32-bit only)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-safari"></span>\n                                        Safari\n                                    </div>\n                                        <div class="chickenpaint-supported-browser">\n                                        <span class="icon-opera"></span>\n                                        Opera\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-installed">\n                                    The plugin for Wacom tablets doesn\'t seem to be installed in your browser yet.\n                                </p>\n                                <p class="chickenpaint-not-installed">\n                                    Please make sure that you\'ve installed the latest drivers for your tablet from the \n                                    <a href="http://www.wacom.com/en-us/support/product-support/drivers" target="_blank">Wacom drivers page</a>,\n                                    then restart your browser.\n                                </p>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t support the Wacom tablet plugin, please \n                                    try one of the browsers listed above instead.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    The Wacom tablet plugin is installed and working.\n                                </p>\n                            </div>\n                            <div class="chickenpaint-tablet-support chickenpaint-pointerevents-support">\n                                <h5>\n                                    Built-in support for most tablets.\n                                    <small>macOS, Windows 10 or newer</small>\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n\t\t\t\t\t\t\t\t\t<div class="chickenpaint-supported-browser">\n\t\t\t\t\t\t\t\t\t<span class="icon-chrome"></span>\n\t\t\t\t\t\t\t\t\t\tChrome\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="chickenpaint-supported-browser">\n                                        <span class="icon-edge"></span>\n                                        Edge (Windows 10)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-firefox"></span>\n                                        Firefox (<a href="https://github.com/satopian/ChickenPaint_Be/blob/main/help/Firefox%20pressure%20support.md" target="_blank" rel="noopener">help <i class="fa icon-external-link-alt"></i></a>)\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t have built-in support for drawing tablets, please try\n                                    one of the other browsers listed above.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    Your browser has built-in support for drawing tablets!\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n       '),
d=X(ia)(".chickenpaint-wacom-support",c),b=X(ia)(".chickenpaint-pointerevents-support",c),g=X(ia)(".chickenpaint-tablet-there-are-two-options",c),p=Od.getRef().isTabletPresent(),k=!!window.hasNativePointerEvents;d.toggleClass("supported",p);p?(b.hide(),g.hide()):((/Chrome/i.test(navigator.userAgent)&&!/OPR/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent))&&d.addClass("not-supported"),k&&(d.hide(),g.hide()));b.toggleClass("supported",k);b.toggleClass("not-supported",
!k);c[0].addEventListener("hidden.bs.modal",l=>{c.remove()});var e=new bootstrap.Modal(c[0]);a.appendChild(c[0]);this.show=function(){e.show()}}function xp(a,c){var d=X(ia)(`<div class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">${ma("Grid options")}</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label>${ma("Grid size")}</label>
                                    <input type="number" class="form-control chickenpaint-grid-size" value="" autofocus>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">${ma("Cancel")}</button>
                            <button type="button" class="btn btn-primary chickenpaint-apply-grid-settings" data-bs-dismiss="modal">${ma("Ok")}</button>
                        </div>
                    </div>
                </div>
            </div>
        `),b=X(ia)(".chickenpaint-grid-size",d),g=X(ia)(".chickenpaint-apply-grid-settings",d),p=new bootstrap.Modal(d[0]);this.show=function(){let k=document.getElementById("chickenpaint-main-menu-content");k&&k.classList.contains("show")&&(new bootstrap.Collapse(k,{toggle:!1})).hide();p.show()};b.val(c.getGridSize());d[0].addEventListener("hidden.bs.modal",k=>{d[0].remove()});g[0].addEventListener("click",k=>{k=parseInt(b.val(),10);c.setGridSize(k);bootstrap.Modal.getInstance(d[0]).hide()});d[0].addEventListener("shown.bs.modal",
k=>{b[0].focus()});d[0].addEventListener("keydown",k=>{"Enter"===k.key&&(k.preventDefault(),g[0].click())});a.appendChild(d[0])}function dh(a,c,d){let b=X(ia)(`<div class="modal fade chickenpaint-send-dialog" tabindex="-1" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content" data-stage="saving">
                        <div class="modal-header">
                            <h5 class="modal-title">${ma("Saving drawing...")}</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <p class="chickenpaint-saving-progress-message">${ma("Preparing your drawing to be saved, please wait...")}</p>
                            <pre class="chickenpaint-saving-error-message pre-scrollable"></pre>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-light chickenpaint-send-cancel" data-bs-dismiss="modal">${ma("Cancel")}</button>
                        </div>
                    </div>
                    <div class="modal-content" data-stage="success-not-previously-posted" style="display:none">
                        <div class="modal-header">
                            <h5 class="modal-title">${ma("Drawing saved!")}</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>${ma("Your drawing has been saved, would you like to post it to the forum now?")}</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-bs-dismiss="modal">${ma("Yes, post it now")}</button>
                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-bs-dismiss="modal">${ma("No, keep drawing")}</button>
                            <button type="button" class="btn btn-light chickenpaint-exit" data-bs-dismiss="modal">${ma("No, quit and I'll finish it later")}</button>
                        </div>
                    </div>
                    <div class="modal-content" data-stage="success-already-posted" style="display:none">
                        <div class="modal-header">
                            <h5 class="modal-title">Drawing saved!</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>${ma("Your drawing has been saved, would you like to view it on the forum now?")}</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-bs-dismiss="modal">${ma("Yes, view the post")}</button>
                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-bs-dismiss="modal">${ma("No, keep drawing")}</button>
                        </div>
                    </div>
                    <div class="modal-content" data-stage="success-redirect" style="display:none">
                        <div class="modal-header">
                            <h5 class="modal-title">Drawing saved!</h5>
                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>${ma("Your drawing has been saved, redirecting you to view your new post now...")}</p>
                        </div>
                    </div>
                </div>
            </div>
        `),g=X(ia)(".chickenpaint-saving-progress-message",b),p=X(ia)(".chickenpaint-saving-error-message",b),k=X(ia)(".progress-bar",b),e=this;d.on("savingProgress",function(m,h){m*=100;g.text(h);X(ia)(k).attr("aria-valuenow",m).css("width",m+"%")});d.on("savingComplete",function(){X(ia)(".modal-content[data-stage='saving']",b).hide();a.isActionSupported("CPContinue")?a.isActionSupported("CPExit")?X(ia)(".modal-content[data-stage='success-not-previously-posted']",b).show():X(ia)(".modal-content[data-stage='success-already-posted']",
b).show():X(ia)(".modal-content[data-stage='success-redirect']",b).show()});d.on("savingFailure",function(m){k.addClass("progress-bar-danger");let h=ma("Sorry, your drawing could not be saved, please try again later.");m&&(0<(m=m.replace(/^CHIBIERROR\s*/,"")).length&&(h+=`<br><br>${ma("The error returned from the server was")}:`,p.text(m).show()),g.html(h))});X(ia)(".chickenpaint-post-drawing",b).on("click",function(){a.actionPerformed({action:"CPPost"})});X(ia)(".chickenpaint-exit",b).toggle(a.isActionSupported("CPExit")).on("click",
function(){alert("When you want to come back and finish your drawing, just click the 'new drawing' button again and you can choose to continue this drawing.");a.actionPerformed({action:"CPExit"})});X(ia)(".chickenpaint-send-cancel",b).on("click",function(){d.cancel()});b[0].addEventListener("hidden.bs.modal",m=>{b.remove()});b.appendTo(c);let l=new bootstrap.Modal(b[0]);this.show=function(){l.show();e.emitEvent("shown")}}function na(a){function c(V){this.palName=V}function d(V){this.toolNum=V}function b(V){this.modeNum=
V}function g(V){let Ga;switch(C=V==Vc.EDITING_MODE_IMAGE?na.COLOR_MODE_RGB:na.COLOR_MODE_GREYSCALE,n.emitEvent("colorModeChange",[V==Vc.EDITING_MODE_IMAGE?"rgb":"greyscale"]),C){case na.COLOR_MODE_RGB:Ga=v.clone();break;case na.COLOR_MODE_GREYSCALE:Ga=new Gb(Gb.greyToRGB(x))}n.artwork.setForegroundColor(Ga.getRgb());n.emitEvent("colorChange",[Ga])}function p(){n.emitEvent("toolChange",[J,Y[J]])}function k(V){H!=V&&(V==na.M_TRANSFORM&&(G=H),H=V,n.emitEvent("modeChange",[H]))}function e(V){k(na.M_DRAW);
J=V;n.artwork.setBrush(Y[V]);p()}function l(V,Ga){h&&(h.addEventListener("dblclick",function(qa){qa.preventDefault();qa.stopPropagation()}),n.artwork.on("editModeChanged",g),u=new bh(n,h),n.emitEvent("fullScreen",[T]),n.emitEvent("smallScreen",[U]),ea.load(),e(na.T_PEN),u.arrangePalettes(),V&&u.setSwatches(V),Ga&&u.setRotation90(Ga),Od.getRef().detectTablet(),function(qa){var pb=qa in window;pb||(pb=document.createElement("div"),pb.setAttribute(qa,"return;"),pb="function"==typeof pb[qa]);return pb}("onbeforeunload")?
window.addEventListener("beforeunload",function(qa){if(n.artwork.getHasUnsavedChanges())return qa.preventDefault(),"Your drawing has unsaved changes!"}):X(ia)("a").on("click",function(qa){if("#"!=this.getAttribute("href")&&n.artwork.getHasUnsavedChanges())return confirm("Your drawing has unsaved changes! Are you sure to want to navigate away?")}),n.artwork.on("unsavedChanges",qa=>{a.allowMultipleSends&&n.emitEvent("unsavedChanges",[qa])}))}var m;!function(){try{if("undefined"!=typeof navigator){let V=
navigator.languages;for(let Ga of(Array.isArray(V)||(V=[V]),V)){let qa=/^(..)([-_].+)?$/.exec(Ga);if(qa){if(qa[1]=qa[1].toLowerCase(),qa[1]in zi){yi(Ga);break}if("en"===qa[1]){yi("en");break}}}}}catch(V){console.error(V)}}();a.language&&yi(a.language);let h=a.uiElem;document.addEventListener("keydown",V=>{((V.ctrlKey||V.metaKey)&&"+;=-shro".split("").includes(V.key.toLowerCase())||"Enter"===V.key)&&V.preventDefault()});h.addEventListener("contextmenu",V=>{V.preventDefault();V.stopPropagation()},{passive:!1});
let n=this,r,u,v=new Gb(0),x=255,C=na.COLOR_MODE_RGB,J=na.T_PENCIL,H=na.M_DRAW,G=H,L=[4278190080,4294967295],U=!1,T=!1,Y=((m=Array(na.T_MAX))[na.T_PENCIL]=new Ca({toolNb:na.T_PENCIL,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ca.TIP_ROUND_AA,brushMode:Ca.BRUSH_MODE_PAINT,paintMode:Ca.PAINT_MODE_OPACITY}),m[na.T_ERASER]=new Ca({toolNb:na.T_ERASER,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!1,tip:Ca.TIP_ROUND_AA,brushMode:Ca.BRUSH_MODE_ERASE,
paintMode:Ca.PAINT_MODE_OPACITY}),m[na.T_PEN]=new Ca({toolNb:na.T_PEN,size:2,alpha:128,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!0,pressureAlpha:!1,tip:Ca.TIP_ROUND_AA,brushMode:Ca.BRUSH_MODE_PAINT,paintMode:Ca.PAINT_MODE_FLOW,alphaScale:.5}),m[na.T_SOFTERASER]=new Ca({toolNb:na.T_SOFTERASER,size:16,alpha:64,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ca.TIP_ROUND_AIRBRUSH,brushMode:Ca.BRUSH_MODE_ERASE,paintMode:Ca.PAINT_MODE_FLOW,alphaScale:.125}),m[na.T_AIRBRUSH]=
new Ca({toolNb:na.T_AIRBRUSH,size:50,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ca.TIP_ROUND_AIRBRUSH,brushMode:Ca.BRUSH_MODE_PAINT,paintMode:Ca.PAINT_MODE_FLOW,alphaScale:.125}),m[na.T_DODGE]=new Ca({toolNb:na.T_DODGE,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ca.TIP_ROUND_AIRBRUSH,brushMode:Ca.BRUSH_MODE_DODGE,paintMode:Ca.PAINT_MODE_FLOW,alphaScale:.125}),m[na.T_BURN]=new Ca({toolNb:na.T_BURN,size:30,alpha:32,isAA:!1,
minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Ca.TIP_ROUND_AIRBRUSH,brushMode:Ca.BRUSH_MODE_BURN,paintMode:Ca.PAINT_MODE_FLOW,alphaScale:.125}),m[na.T_WATER]=new Ca({toolNb:na.T_WATER,size:30,alpha:70,isAA:!1,minSpacing:.5,spacing:.02,pressureSize:!1,pressureAlpha:!0,tip:Ca.TIP_ROUND_AA,brushMode:Ca.BRUSH_MODE_WATER,paintMode:Ca.PAINT_MODE_FLOW,alphaScale:.125,resat:.3,bleed:.6}),m[na.T_BLUR]=new Ca({toolNb:na.T_BLUR,size:20,alpha:255,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,
pressureAlpha:!0,tip:Ca.TIP_ROUND_PIXEL,brushMode:Ca.BRUSH_MODE_BLUR,paintMode:Ca.PAINT_MODE_FLOW,alphaScale:.125}),m[na.T_SMUDGE]=new Ca({toolNb:na.T_SMUDGE,size:20,alpha:128,isAA:!1,minSpacing:.5,spacing:.01,pressureSize:!1,pressureAlpha:!0,tip:Ca.TIP_ROUND_AIRBRUSH,brushMode:Ca.BRUSH_MODE_SMUDGE,paintMode:Ca.PAINT_MODE_FLOW,alphaScale:.125,resat:0,bleed:1}),m[na.T_BLENDER]=new Ca({toolNb:na.T_BLENDER,size:20,alpha:60,isAA:!1,minSpacing:.5,spacing:.1,pressureSize:!1,pressureAlpha:!0,tip:Ca.TIP_ROUND_AIRBRUSH,
brushMode:Ca.BRUSH_MODE_OIL,paintMode:Ca.PAINT_MODE_FLOW,alphaScale:.125,resat:0,bleed:.07}),m),ea=new yp,ja,ra,Oa={CPFullScreen:{action:function(){n.setFullScreen(!T)},isSupported:function(){return!("disable"===a.fullScreenMode||"force"===a.fullScreenMode||!1===a.allowFullScreen)},modifies:{gui:!0}},CPZoomIn:{action:function(){r.zoomIn()},modifies:{gui:!0}},CPZoomOut:{action:function(){r.zoomOut()},modifies:{gui:!0}},CPZoom100:{action:function(){r.zoom100()},modifies:{gui:!0}},CPToolbarStyle:{action:function(){n.setToolbarStyle("new"===
ea.toolbarStyle?"old":"new")},modifies:{gui:!0}},CPUndo:{action:function(){n.artwork.undo()},modifies:{document:!0},allowed:"isUndoAllowed"},CPRedo:{action:function(){n.artwork.redo()},modifies:{document:!0},allowed:"isRedoAllowed"},CPClearHistory:{action:function(){confirm(ma("You're about to clear the current Undo/Redo history.\nThis operation cannot be undone, are you sure you want to do that?"))&&n.artwork.clearHistory()},modifies:{document:!0}},CPPencil:new d(na.T_PENCIL),CPPen:new d(na.T_PEN),
CPEraser:new d(na.T_ERASER),CPSoftEraser:new d(na.T_SOFTERASER),CPAirbrush:new d(na.T_AIRBRUSH),CPDodge:new d(na.T_DODGE),CPBurn:new d(na.T_BURN),CPWater:new d(na.T_WATER),CPBlur:new d(na.T_BLUR),CPSmudge:new d(na.T_SMUDGE),CPBlender:new d(na.T_BLENDER),CPFloodFill:new b(na.M_FLOODFILL),CPGradientFill:new b(na.M_GRADIENTFILL),CPRectSelection:new b(na.M_RECT_SELECTION),CPMoveTool:new b(na.M_MOVE_TOOL),CPRotateCanvas:new b(na.M_ROTATE_CANVAS),CPPanCanvas:new b(na.M_PAN_CANVAS),CPColorPicker:new b(na.M_COLOR_PICKER),
CPTransform:{action:function(){let V=n.artwork.getActiveLayer();null==n.artwork.transformAffineBegin()?n.showLayerNotification(V,ma("Whoops! All of the selected pixels are transparent!"),"layer"):k(na.M_TRANSFORM)},modifies:{mode:!0},allowed:function(){let V=n.artwork.getActiveLayer();if(V.visible)if(0==V.alpha)n.showLayerNotification(V,ma("Whoops! This layer's opacity is currently 0%"),"opacity");else{if(null!=n.artwork.transformAffineBegin())return 0!=V.getEffectiveAlpha();n.showLayerNotification(V,
ma("Whoops! All of the selected pixels are transparent!"),"layer")}else n.showLayerNotification(V,ma("Whoops! This layer is currently hidden"),"layer")}},CPTransformAccept:{action:function(){H==na.M_TRANSFORM&&(n.artwork.transformAffineFinish(),k(G))},modifies:{mode:!0}},CPTransformReject:{action:function(){H==na.M_TRANSFORM&&(n.artwork.transformAffineAbort(),k(G))},modifies:{document:!0,mode:!0}},CPFreeHand:{action:function(){Y[J].strokeMode=Ca.STROKE_MODE_FREEHAND;p()},modifies:{tool:!0}},CPLine:{action:function(){Y[J].strokeMode=
Ca.STROKE_MODE_LINE;p()},modifies:{tool:!0}},CPBezier:{action:function(){Y[J].strokeMode=Ca.STROKE_MODE_BEZIER;p()},modifies:{tool:!0}},CPAbout:{action:function(){(new tp(h)).show()},modifies:{}},CPShortcuts:{action:function(){(new up(h)).show()},modifies:{}},CPTabletSupport:{action:function(){(new wp(h)).show()},modifies:{}},CPLayerDuplicate:{action:function(){n.artwork.duplicateLayer()},modifies:{document:!0}},CPLayerMergeDown:{action:function(){n.artwork.mergeDown()},modifies:{document:!0},allowed:"isMergeDownAllowed"},
CPGroupMerge:{action:function(){n.artwork.mergeGroup()},modifies:{document:!0},allowed:"isMergeGroupAllowed"},CPLayerMergeAll:{action:function(){n.artwork.mergeAllLayers()},modifies:{document:!0},allowed:"isMergeAllLayersAllowed"},CPExpandLayerGroup:{action:function(V){n.artwork.expandLayerGroup(V.group,V.expand)},modifies:{document:!0}},CPFill:{action:function(){n.artwork.fill(4278190080|n.getCurColor().getRgb())},modifies:{document:!0},requiresDrawable:!0},CPClear:{action:function(){n.artwork.clear()},
modifies:{document:!0},requiresDrawable:!0},CPSelectAll:{action:function(){n.artwork.rectangleSelection(n.artwork.getBounds());r.repaintAll()},modifies:{document:!0}},CPDeselectAll:{action:function(){n.artwork.rectangleSelection(new Ia(0,0,0,0));r.repaintAll()},modifies:{document:!0}},CPHFlip:{action:function(){n.artwork.hFlip()},modifies:{document:!0},requiresDrawable:!0},CPVFlip:{action:function(){n.artwork.vFlip()},modifies:{document:!0},requiresDrawable:!0},CPMNoise:{action:function(){n.artwork.monochromaticNoise()},
modifies:{document:!0},requiresDrawable:!0},CPCNoise:{action:function(){n.artwork.colorNoise()},modifies:{document:!0},allowed:"isColorNoiseAllowed"},CPFXBoxBlur:{action:function(){ja||=new vp(h,n);ja.show()},modifies:{document:!0},requiresDrawable:!0},CPFXInvert:{action:function(){n.artwork.invert()},modifies:{document:!0},requiresDrawable:!0},CPCut:{action:function(){n.artwork.cutSelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCutSelectionAllowed"},CPCopy:{action:function(){n.artwork.copySelection()},
modifies:{document:!0},requiresDrawable:!0,allowed:"isCopySelectionAllowed"},CPCopyMerged:{action:function(){n.artwork.copySelectionMerged()},modifies:{document:!0},allowed:"isCopySelectionMergedAllowed"},CPPaste:{action:function(){n.artwork.pasteClipboard()},modifies:{document:!0},allowed:"isPasteClipboardAllowed"},CPToggleGrid:{action:function(V){r.showGrid(V.selected)},modifies:{gui:!0}},CPGridOptions:{action:function(){ra||=new xp(h,r);ra.show()},modifies:{gui:!0}},CPLinearInterpolation:{action:function(V){r.setInterpolation(V.selected)},
modifies:{gui:!0},isSupported:function(){return!!ii(Ed(0,0).getContext("2d"))}},CPResetCanvasRotation:{action:function(){r.resetRotation()},modifies:{gui:!0}},CPAddLayer:{action:function(){n.artwork.addLayer("layer")},modifies:{document:!0}},CPAddGroup:{action:function(){n.artwork.addLayer("group")},modifies:{document:!0}},CPAddLayerMask:{action:function(){n.artwork.addLayerMask()},modifies:{document:!0},allowed:"isAddLayerMaskAllowed"},CPApplyLayerMask:{action:function(){n.artwork.applyLayerMask(!0)},
modifies:{document:!0},allowed:"isApplyLayerMaskAllowed"},CPRemoveLayerMask:{action:function(){n.artwork.removeLayerMask(!1)},modifies:{document:!0},allowed:"isRemoveLayerMaskAllowed"},CPRemoveLayer:{action:function(){n.artwork.removeLayer()||alert(ma("Sorry, you can't remove the last remaining layer in the drawing."))},modifies:{document:!0},allowed:"isRemoveLayerAllowed"},CPCreateClippingMask:{action:function(){n.artwork.createClippingMask()},modifies:{document:!0},allowed:"isCreateClippingMaskAllowed"},
CPReleaseClippingMask:{action:function(){n.artwork.releaseClippingMask()},modifies:{document:!0},allowed:"isReleaseClippingMaskAllowed"},CPRelocateLayer:{action:function(V){n.artwork.relocateLayer(V.layer,V.toGroup,V.toIndex)},modifies:{document:!0}},CPSetActiveLayer:{action:function(V){V.mask&&V.layer.mask&&!V.layer.maskVisible&&n.artwork.setLayerMaskVisible(V.layer,!0);n.artwork.setActiveLayer(V.layer,V.mask);n.artwork.performIdleTasks()},modifies:{document:!0}},CPToggleMaskView:{action:function(){let V=
n.artwork.toggleMaskView();V&&n.emitEvent("maskViewOpened",[V])},modifies:{gui:!0}},CPSetMaskVisible:{action:function(V){n.artwork.setLayerMaskVisible(V.layer,V.visible)},modifies:{layerProp:!0}},CPSetLayerVisibility:{action:function(V){n.artwork.setLayerVisibility(V.layer,V.visible)},modifies:{layerProp:!0}},CPSetLayerName:{action:function(V){n.artwork.setLayerName(V.layer,V.name)},modifies:{layerProp:!0}},CPSetLayerBlendMode:{action:function(V){n.artwork.setLayerBlendMode(V.blendMode)},modifies:{layerProp:!0}},
CPSetLayerAlpha:{action:function(V){n.artwork.setLayerAlpha(V.alpha)},modifies:{layerProp:!0}},CPSetLayerLockAlpha:{action:function(V){n.artwork.setLayerLockAlpha(V.lock)},modifies:{layerProp:!0}},CPPalColor:new c("color"),CPPalBrush:new c("brush"),CPPalLayers:new c("layers"),CPPalStroke:new c("stroke"),CPPalSwatches:new c("swatches"),CPPalTool:new c("tool"),CPPalMisc:new c("misc"),CPPalTextures:new c("textures"),CPTogglePalettes:{action:function(){u.togglePalettes()},modifies:{gui:!0}},CPArrangePalettes:{action:function(){u.arrangePalettes()},
modifies:{gui:!0}},CPSave:{action:function(){let V;(V=new bg({artwork:n.getArtwork(),rotation:r.getRotation90(),swatches:u.getSwatches()})).on("savingComplete",function(){n.artwork.setHasUnsavedChanges(!1)});V.on("savingFailure",function(){alert(ma("Sorry, your drawing could not be saved, please try again later."))});V.save()},isSupported:function(){return!1!==a.allowDownload},modifies:{document:!0}},CPSend:{action:function(){!function(){if(n.isActionSupported("CPContinue")||confirm(ma("Are you sure you want to send your drawing to the server and finish drawing now?"))){var V=
new bg({artwork:n.getArtwork(),rotation:r.getRotation90(),swatches:u.getSwatches(),url:a.saveUrl}),Ga=new dh(n,h,V);V.on("savingComplete",function(){n.artwork.setHasUnsavedChanges(!1);!n.isActionSupported("CPContinue")&&n.isActionSupported("CPPost")&&n.actionPerformed({action:"CPPost"})});V.on("savingFailure",function(){alert(ma("Sorry, your drawing could not be saved, please try again later."))});Ga.on("shown",function(){V.save()});Ga.show()}}()},isSupported:function(){return!!a.saveUrl},modifies:{document:!0}},
CPPost:{action:function(){if("function"==typeof handleExit)return handleExit();window.location=a.postUrl},isSupported:function(){return!!a.postUrl},modifies:{document:!0}},CPContinue:{action:function(){},isSupported:function(){return!!a.allowMultipleSends}},CPExit:{action:function(){window.location=a.exitUrl},isSupported:function(){return!!a.exitUrl},modifies:{}}};switch(c.prototype.action=function(V){u.showPalette(this.palName,V.selected)},c.prototype.modifies={gui:!0},d.prototype.action=function(){e(this.toolNum)},
d.prototype.modifies={mode:!0,tool:!0},d.prototype.requiresDrawable=!0,b.prototype.action=function(){k(this.modeNum)},b.prototype.modifies={mode:!0},this.callToolListeners=function(){p()},this.getArtwork=function(){return this.artwork},this.setCanvas=function(V){r=V},this.setTransformInterpolation=function(V){this.artwork.setTransformInterpolation(V)},this.setCurColor=function(V){switch(C){case na.COLOR_MODE_RGB:v.isEqual(V)||(v.copyFrom(V),this.artwork.setForegroundColor(V.getRgb()),this.emitEvent("colorChange",
[V]));break;case na.COLOR_MODE_GREYSCALE:if(V=V.getValue(),x!=V){let Ga=Gb.greyToRGB(V);this.artwork.setForegroundColor(Ga);x=V;this.emitEvent("colorChange",[new Gb(Ga)])}}},this.getCurColor=function(){switch(C){case na.COLOR_MODE_RGB:return v.clone();case na.COLOR_MODE_GREYSCALE:return new Gb(Gb.greyToRGB(x))}},this.setCurGradient=function(V){L=V.slice(0);this.emitEvent("gradientChange",[L])},this.getCurGradient=function(){return L.slice(0)},this.setBrushSize=function(V){Y[J].size=Math.max(1,Math.min(200,
V));p()},this.getBrushSize=function(){return Y[J].size},this.setAlpha=function(V){Y[J].alpha=V;p()},this.getAlpha=function(){return Y[J].alpha},this.getCurMode=function(){return H},this.getCurTool=function(){return J},this.getBrushInfo=function(){return Y[J]},this.isActionSupported=function(V){if(Oa[V]){let Ga=typeof Oa[V].isSupported;return"function"==Ga?Oa[V].isSupported():"undefined"==Ga||Oa[V].isSupported}return!1},this.isActionAllowed=function(V){V=Oa[V];return!!V&&("function"==typeof V.allowed?
V.allowed():"string"==typeof V.allowed?this.artwork[V.allowed]():!V.requiresDrawable||this.artwork.isActiveLayerDrawable())},this.showLayerNotification=function(V,Ga,qa){this.emitEvent("layerNotification",[V,Ga,qa])},this.actionPerformed=function(V){if(null!=this.artwork&&null!=r){var Ga=Oa[V.action];Ga&&(H==na.M_TRANSFORM&&(Ga.modifies.document||Ga.modifies.mode)&&-1==["CPTransformAccept","CPTransformReject"].indexOf(V.action)?"CPUndo"==V.action?Oa.CPTransformReject.action():"CPTransform"!=V.action&&
(Ga=new ch(h,this),Ga.on("accept",this.actionPerformed.bind(this,V)),Ga.on("reject",this.actionPerformed.bind(this,V)),Ga.show()):Ga.action(V))}},this.setSmallScreenMode=function(V){U!==V&&(U=V,X(ia)(h).toggleClass("chickenpaint-small-screen",U),n.emitEvent("smallScreen",[U]))},this.getSmallScreenMode=function(){return U},this.setFullScreen=function(V){T!==V&&(T=V,X(ia)("body").toggleClass("chickenpaint-full-screen",T),X(ia)(h).toggleClass("chickenpaint-full-screen",T),T&&0===X(ia)("head meta[name=viewport]").length?
(X(ia)("head").append('<meta name="viewport" content="width=device-width,user-scalable=no">'),setTimeout(()=>n.emitEvent("fullScreen",[T]),200)):n.emitEvent("fullScreen",[T]))},this.isFullScreen=function(){return T},this.setToolbarStyle=function(V){ea.set("toolbarStyle",V);ea.save()},this.getToolbarStyle=function(){return ea.get("toolbarStyle")},this.getResourcesRoot=function(){return a.resourcesRoot},!function(){var V;if(!((V=Ed(0,0)).getContext&&V.getContext("2d")&&"Uint8Array"in window))throw new na.UnsupportedBrowserException;
V=(-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("iPod")||-1!=navigator.userAgent.indexOf("iPhone"))&&-1!=navigator.userAgent.indexOf(" OS 8_0 ");let Ga=-1==navigator.userAgent.indexOf("CriOS")&&-1!=navigator.userAgent.indexOf("Safari");if(V&&Ga)throw new na.UnsupportedBrowserException("You are using Safari 8.0.0, which is unable to upload drawings. That bug was fixed in the iOS 8.0.2 update, or in Chrome for iOS.");}(),h&&(("string"!=typeof document.body.style.flexBasis&&
"string"!=typeof document.body.style.msFlexDirection||/Presto/.test(navigator.userAgent))&&(h.className+=" no-flexbox"),h.className+=" chickenpaint chickenpaint-lang-"+Ai),a.resourcesRoot=a.resourcesRoot||"chickenpaint/",a.disableBootstrapAPI&&X(ia)(document).off(".data-api"),this.setSmallScreenMode(!!("number"==typeof navigator.maxTouchPoints&&2<navigator.maxTouchPoints&&(820>=window.screen.width||820>=window.screen.height))),a.fullScreenMode){case "force":this.setFullScreen(!0);break;case "auto":this.setFullScreen(U)}(ea.on("toolbarStyle",
V=>this.emitEvent("toolbarStyleChange",[V])),a.loadImageUrl||a.loadChibiFileUrl)?(m=new Pg(a),new kp(h,m,a.resourcesRoot),m.on("loadingComplete",function(V){n.artwork=V.layers||V.flat;l(V.swatches,a.rotation);a.onLoaded&&a.onLoaded(this)}),m.load()):(a.artwork?this.artwork=a.artwork:(this.artwork=new Vc(a.canvasWidth||800,a.canvasHeight||600),this.artwork.addBackgroundLayer(),this.artwork.addDefaultLayer()),l(),a.onLoaded&&a.onLoaded(this))}var wl,fg,ne,eh,fh,Pd,xl,yl,gg,nf,zl,Di,of,Ei,Fi,Gi,Al,Hi,
Bl,Yc,pf,gh,Cl,Dl,El,Ii,Ji,qf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},Bb={},Fa={},hg=function(a){return a&&a.Math===Math&&a};Fa=hg("object"==typeof globalThis&&globalThis)||hg("object"==typeof window&&window)||hg("object"==typeof self&&self)||hg("object"==typeof qf&&qf)||hg("object"==typeof Fa&&Fa)||function(){return this}()||Function("return this")();var Kb={},Mb={};Kb=!(Mb=function(a){try{return!!a()}catch(c){return!0}})(function(){return 7!==
Object.defineProperty({},1,{get:function(){return 7}})[1]});var Qb={},rf={};rf=!Mb(function(){var a=function(){}.bind();return"function"!=typeof a||a.hasOwnProperty("prototype")});var hh=Function.prototype.call;Qb=rf?hh.bind(hh):function(){return hh.apply(hh,arguments)};var Fl={}.propertyIsEnumerable,Gl=Object.getOwnPropertyDescriptor;var Ki=Gl&&!Fl.call({1:2},1)?function(a){a=Gl(this,a);return!!a&&a.enumerable}:Fl;var ld={};ld=function(a,c){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&
a),value:c}};var td={},Li={},mb={},Hl=Function.prototype,Mi=Hl.call,zp=rf&&Hl.bind.bind(Mi,Mi),Zc={},Ap=(mb=rf?zp:function(a){return function(){return Mi.apply(a,arguments)}})({}.toString),Bp=mb("".slice);Zc=function(a){return Bp(Ap(a),8,-1)};var Ni=Object,Cp=mb("".split);Li=Mb(function(){return!Ni("z").propertyIsEnumerable(0)})?function(a){return"String"===Zc(a)?Cp(a,""):Ni(a)}:Ni;var Je={},Ke={};Ke=function(a){return null==a};var Dp=TypeError;Je=function(a){if(Ke(a))throw new Dp("Can't call method on "+
a);return a};td=function(a){return Li(Je(a))};var Le={},Oi={},Rb={},Ab={},Pi="object"==typeof document&&document.all;Ab=void 0===Pi&&void 0!==Pi?function(a){return"function"==typeof a||a===Pi}:function(a){return"function"==typeof a};Rb=function(a){return"object"==typeof a?null!==a:Ab(a)};var Me={},Cc={};Cc=function(a,c){var d;return 2>arguments.length?(d=Fa[a],Ab(d)?d:void 0):Fa[a]&&Fa[a][c]};var Qd={};Qd=mb({}.isPrototypeOf);var Qi={},ud={},oe={},pe={},Il=Fa.navigator,Jl=Il&&Il.userAgent;pe=Jl?String(Jl):
"";var Kl=Fa.process,Ll=Fa.Deno,Ml=Kl&&Kl.versions||Ll&&Ll.version,Nl=Ml&&Ml.v8;Nl&&(eh=0<(ne=Nl.split("."))[0]&&4>ne[0]?1:+(ne[0]+ne[1]));!eh&&pe&&(!(ne=pe.match(/Edge\/(\d+)/))||74<=ne[1])&&(ne=pe.match(/Chrome\/(\d+)/))&&(eh=+ne[1]);oe=eh;var Ep=Fa.String;Qi=(ud=!!Object.getOwnPropertySymbols&&!Mb(function(){var a=Symbol("symbol detection");return!Ep(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&oe&&41>oe}))&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;var Fp=Object;Me=Qi?function(a){return"symbol"==
typeof a}:function(a){var c=Cc("Symbol");return Ab(c)&&Qd(c.prototype,Fp(a))};var ig={},Sc={},Ne={},Gp=String;Ne=function(a){try{return Gp(a)}catch(c){return"Object"}};var Hp=TypeError;Sc=function(a){if(Ab(a))return a;throw new Hp(Ne(a)+" is not a function");};ig=function(a,c){a=a[c];return Ke(a)?void 0:Sc(a)};var Ol={},Ip=TypeError;Ol=function(a,c){var d,b;if("string"===c&&Ab(d=a.toString)&&!Rb(b=Qb(d,a))||Ab(d=a.valueOf)&&!Rb(b=Qb(d,a))||"string"!==c&&Ab(d=a.toString)&&!Rb(b=Qb(d,a)))return b;throw new Ip("Can't convert object to primitive value");
};var bc={},Rd={},Sd={},zc={};zc=!1;var ih={},Jp=Object.defineProperty;ih=function(a,c){try{Jp(Fa,a,{value:c,configurable:!0,writable:!0})}catch(d){Fa[a]=c}return c};var Pl=Sd=Fa["__core-js_shared__"]||ih("__core-js_shared__",{});(Pl.versions||(Pl.versions=[])).push({version:"3.38.1",mode:zc?"pure":"global",copyright:"\u00a9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"});Rd=function(a,c){return Sd[a]||
(Sd[a]=c||{})};var jb={},Oe={},Kp=Object;Oe=function(a){return Kp(Je(a))};var Lp=mb({}.hasOwnProperty);jb=Object.hasOwn||function(a,c){return Lp(Oe(a),c)};var Pe={},Mp=0,Np=Math.random(),Op=mb((1).toString);Pe=function(a){return"Symbol("+(void 0===a?"":a)+")_"+Op(++Mp+Np,36)};var sf=Fa.Symbol,Ri=Rd("wks"),Pp=Qi?sf.for||sf:sf&&sf.withoutSetter||Pe,Qp=TypeError,Rp=(bc=function(a){return jb(Ri,a)||(Ri[a]=ud&&jb(sf,a)?sf[a]:Pp("Symbol."+a)),Ri[a]})("toPrimitive");Oi=function(a,c){if(!Rb(a)||Me(a))return a;
var d,b=ig(a,Rp);if(b){if(void 0===c&&(c="default"),d=Qb(b,a,c),!Rb(d)||Me(d))return d;throw new Qp("Can't convert object to primitive value");}return void 0===c&&(c="number"),Ol(a,c)};Le=function(a){a=Oi(a,"string");return Me(a)?a:a+""};var Si={},tf={},Ti=Fa.document,Sp=Rb(Ti)&&Rb(Ti.createElement);tf=function(a){return Sp?Ti.createElement(a):{}};Si=!Kb&&!Mb(function(){return 7!==Object.defineProperty(tf("div"),"a",{get:function(){return 7}}).a});var Ql=Object.getOwnPropertyDescriptor,Tp=fg=Kb?Ql:
function(a,c){if(a=td(a),c=Le(c),Si)try{return Ql(a,c)}catch(d){}if(jb(a,c))return ld(!Qb(Ki,a,c),a[c])},md={},Ui={};Ui=Kb&&Mb(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype});var mc={},Up=String,Vp=TypeError;mc=function(a){if(Rb(a))return a;throw new Vp(Up(a)+" is not an object");};var Wp=TypeError,Vi=Object.defineProperty,Xp=Object.getOwnPropertyDescriptor;var gd=Kb?Ui?function(a,c,d){if(mc(a),c=Le(c),mc(d),"function"==typeof a&&"prototype"===
c&&"value"in d&&"writable"in d&&!d.writable){var b=Xp(a,c);b&&b.writable&&(a[c]=d.value,d={configurable:"configurable"in d?d.configurable:b.configurable,enumerable:"enumerable"in d?d.enumerable:b.enumerable,writable:!1})}return Vi(a,c,d)}:Vi:function(a,c,d){if(mc(a),c=Le(c),mc(d),Si)try{return Vi(a,c,d)}catch(b){}if("get"in d||"set"in d)throw new Wp("Accessors not supported");return"value"in d&&(a[c]=d.value),a};md=Kb?function(a,c,d){return gd(a,c,ld(1,d))}:function(a,c,d){return a[c]=d,a};var nc=
{},jh={},Wi={},Rl=Function.prototype,Yp=Kb&&Object.getOwnPropertyDescriptor,Xi=jb(Rl,"name"),Zp=Xi&&(!Kb||Kb&&Yp(Rl,"name").configurable),$p=(Wi={EXISTS:Xi,PROPER:Xi&&"something"===function(){}.name,CONFIGURABLE:Zp}).CONFIGURABLE,kh={},aq=mb(Function.toString);Ab(Sd.inspectSource)||(Sd.inspectSource=function(a){return aq(a)});kh=Sd.inspectSource;var $c={},Sl={},Tl=Fa.WeakMap;Sl=Ab(Tl)&&/native code/.test(String(Tl));var jg={},Ul=Rd("keys");jg=function(a){return Ul[a]||(Ul[a]=Pe(a))};var Qe={};Qe=
{};var Yi=Fa.TypeError,bq=Fa.WeakMap;if(Sl||Sd.state){var Id=Sd.state||(Sd.state=new bq);Id.get=Id.get;Id.has=Id.has;Id.set=Id.set;var Zi=function(a,c){if(Id.has(a))throw new Yi("Object already initialized");return c.facade=a,Id.set(a,c),c};var lh=function(a){return Id.get(a)||{}};var $i=function(a){return Id.has(a)}}else{var uf=jg("state");Qe[uf]=!0;Zi=function(a,c){if(jb(a,uf))throw new Yi("Object already initialized");return c.facade=a,md(a,uf,c),c};lh=function(a){return jb(a,uf)?a[uf]:{}};$i=
function(a){return jb(a,uf)}}var cq=($c={set:Zi,get:lh,has:$i,enforce:function(a){return $i(a)?lh(a):Zi(a,{})},getterFor:function(a){return function(c){var d;if(!Rb(c)||(d=lh(c)).type!==a)throw new Yi("Incompatible receiver, "+a+" required");return d}}}).enforce,dq=$c.get,Vl=String,mh=Object.defineProperty,eq=mb("".slice),fq=mb("".replace),gq=mb([].join),hq=Kb&&!Mb(function(){return 8!==mh(function(){},"length",{value:8}).length}),iq=String(String).split("String"),jq=jh=function(a,c,d){"Symbol("===
eq(Vl(c),0,7)&&(c="["+fq(Vl(c),/^Symbol\(([^)]*)\).*$/,"$1")+"]");d&&d.getter&&(c="get "+c);d&&d.setter&&(c="set "+c);(!jb(a,"name")||$p&&a.name!==c)&&(Kb?mh(a,"name",{value:c,configurable:!0}):a.name=c);hq&&d&&jb(d,"arity")&&a.length!==d.arity&&mh(a,"length",{value:d.arity});try{d&&jb(d,"constructor")&&d.constructor?Kb&&mh(a,"prototype",{writable:!1}):a.prototype&&(a.prototype=void 0)}catch(b){}d=cq(a);return jb(d,"source")||(d.source=gq(iq,"string"==typeof c?c:"")),a};Function.prototype.toString=
jq(function(){return Ab(this)&&dq(this).source||kh(this)},"toString");nc=function(a,c,d,b){b||={};var g=b.enumerable,p=void 0!==b.name?b.name:c;if(Ab(d)&&jh(d,p,b),b.global)g?a[c]=d:ih(c,d);else{try{b.unsafe?a[c]&&(g=!0):delete a[c]}catch(k){}g?a[c]=d:gd(a,c,{value:d,enumerable:!1,configurable:!b.nonConfigurable,writable:!b.nonWritable})}return a};var nh={},Wl={},aj={},oh={},kg={},Xl={},kq=Math.ceil,lq=Math.floor;Xl=Math.trunc||function(a){a=+a;return(0<a?lq:kq)(a)};kg=function(a){a=+a;return a!=
a||0===a?0:Xl(a)};var mq=Math.max,nq=Math.min;oh=function(a,c){a=kg(a);return 0>a?mq(a+c,0):nq(a,c)};var vf={},bj={},oq=Math.min;bj=function(a){a=kg(a);return 0<a?oq(a,9007199254740991):0};vf=function(a){return bj(a.length)};var Yl=function(a){return function(c,d,b){var g;c=td(c);var p=vf(c);if(0===p)return!a&&-1;b=oh(b,p);if(a&&d!=d)for(;p>b;){if((g=c[b++])!=g)return!0}else for(;p>b;b++)if((a||b in c)&&c[b]===d)return a||b||0;return!a&&-1}},pq={includes:Yl(!0),indexOf:Yl(!1)}.indexOf,Zl=mb([].push);
aj=function(a,c){var d;a=td(a);var b=0,g=[];for(d in a)!jb(Qe,d)&&jb(a,d)&&Zl(g,d);for(;c.length>b;)jb(a,d=c[b++])&&(~pq(g,d)||Zl(g,d));return g};var ph={},qq=(ph="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ")).concat("length","prototype");var lg=Object.getOwnPropertyNames||function(a){return aj(a,qq)};var qh=Object.getOwnPropertySymbols;var rq=mb([].concat);Wl=Cc("Reflect","ownKeys")||function(a){var c=lg(mc(a)),d=qh;return d?rq(c,d(a)):
c};nh=function(a,c,d){for(var b=Wl(c),g=gd,p=fg,k=0;k<b.length;k++){var e=b[k];jb(a,e)||d&&jb(d,e)||g(a,e,p(c,e))}};var mg={},sq=/#|\.prototype\./,ng=function(a,c){a=tq[uq(a)];return a===vq||a!==wq&&(Ab(c)?Mb(c):!!c)},uq=ng.normalize=function(a){return String(a).replace(sq,".").toLowerCase()},tq=ng.data={},wq=ng.NATIVE="N",vq=ng.POLYFILL="P";mg=ng;Bb=function(a,c){var d,b,g,p,k,e=a.target,l=a.global,m=a.stat;if(d=l?Fa:m?Fa[e]||ih(e,{}):Fa[e]&&Fa[e].prototype)for(b in c){if(p=c[b],g=a.dontCallGetSet?
(k=Tp(d,b))&&k.value:d[b],!mg(l?b:e+(m?".":"#")+b,a.forced)&&void 0!==g){if(typeof p==typeof g)continue;nh(p,g)}(a.sham||g&&g.sham)&&md(p,"sham",!0);nc(d,b,p,a)}};var wf={};wf=Array.isArray||function(a){return"Array"===Zc(a)};var cj={},xq=TypeError;cj=function(a){if(9007199254740991<a)throw xq("Maximum allowed index exceeded");return a};var dj={};dj=function(a,c,d){Kb?gd(a,c,ld(0,d)):a[c]=d};var ej={},$l={},fj={},Td={},rh={},yq=bc("toStringTag"),am={};am[yq]="z";rh="[object z]"===String(am);var zq=
bc("toStringTag"),Aq=Object,Bq="Arguments"===Zc(function(){return arguments}());Td=rh?Zc:function(a){var c;if(void 0===a)var d="Undefined";else{if(null===a)var b="Null";else{a:{var g=a=Aq(a);try{b=g[zq];break a}catch(p){}b=void 0}b="string"==typeof(d=b)?d:Bq?Zc(a):"Object"===(c=Zc(a))&&Ab(a.callee)?"Arguments":c}d=b}return d};var bm=function(){},cm=Cc("Reflect","construct"),gj=/^\s*(?:class|function)\b/,Cq=mb(gj.exec),Dq=!gj.test(bm),og=function(a){if(!Ab(a))return!1;try{return cm(bm,[],a),!0}catch(c){return!1}},
dm=function(a){if(!Ab(a))return!1;switch(Td(a)){case "AsyncFunction":case "GeneratorFunction":case "AsyncGeneratorFunction":return!1}try{return Dq||!!Cq(gj,kh(a))}catch(c){return!0}};dm.sham=!0;fj=!cm||Mb(function(){var a;return og(og.call)||!og(Object)||!og(function(){a=!0})||a})?dm:og;var Eq=bc("species"),em=Array;$l=function(a){var c;return wf(a)&&(c=a.constructor,fj(c)&&(c===em||wf(c.prototype))?c=void 0:Rb(c)&&null===(c=c[Eq])&&(c=void 0)),void 0===c?em:c};ej=function(a,c){return new ($l(a))(0===
c?0:c)};var fm={},Fq=bc("species");fm=function(a){return 51<=oe||!Mb(function(){var c=[];return(c.constructor={})[Fq]=function(){return{foo:1}},1!==c[a](Boolean).foo})};var gm=bc("isConcatSpreadable"),Gq=!(51<=oe||!Mb(function(){var a=[];return a[gm]=!1,a.concat()[0]!==a}))||!fm("concat");Bb({target:"Array",proto:!0,arity:1,forced:Gq},{concat:function(a){var c,d=Oe(this),b=ej(d,0),g=0;var p=-1;for(c=arguments.length;p<c;p++){var k=-1===p?d:arguments[p];var e=k;if(Rb(e)){var l=e[gm];e=void 0!==l?!!l:
wf(e)}else e=!1;if(e)for(l=vf(k),cj(g+l),e=0;e<l;e++,g++)e in k&&dj(b,g,k[e]);else cj(g+1),dj(b,g++,k)}return b.length=g,b}});var hm={};hm=rh?{}.toString:function(){return"[object "+Td(this)+"]"};rh||nc(Object.prototype,"toString",hm,{unsafe:!0});var Jd={},Hq=String;Jd=function(a){if("Symbol"===Td(a))throw TypeError("Cannot convert a Symbol value to a string");return Hq(a)};var ad={},sh={};sh=Object.keys||function(a){return aj(a,ph)};var im=Kb&&!Ui?Object.defineProperties:function(a,c){mc(a);var d,
b=td(c);c=sh(c);for(var g=c.length,p=0;g>p;)gd(a,d=c[p++],b[d]);return a};var th={};th=Cc("document","documentElement");var jm=jg("IE_PROTO"),hj=function(){},km=function(a){a.write("<script>\x3c/script>");a.close();return a.parentWindow.Object},uh=function(){try{fh=new ActiveXObject("htmlfile")}catch(d){}var a;if("undefined"!=typeof document){if(document.domain&&fh)var c=km(fh);else c=tf("iframe"),c=(c.style.display="none",th.appendChild(c),c.src="javascript:",(a=c.contentWindow.document).open(),
a.write("<script>document.F=Object\x3c/script>"),a.close(),a.F);a=c}else a=km(fh);uh=a;for(a=ph.length;a--;)delete uh.prototype[ph[a]];return uh()};Qe[jm]=!0;ad=Object.create||function(a,c){var d;return null!==a?(hj.prototype=mc(a),d=new hj,hj.prototype=null,d[jm]=a):d=uh(),void 0===c?d:im(d,c)};var lm=lg,xf={};xf=mb([].slice);var mm="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var ij=function(a){if(mm&&"Window"===Zc(a))try{var c=lm(a)}catch(d){c=
xf(mm)}else c=lm(td(a));return c};var yf={};yf=function(a,c,d){return d.get&&jh(d.get,c,{getter:!0}),d.set&&jh(d.set,c,{setter:!0}),gd(a,c,d)};var nm=bc;var Tc={},Re={};Re=Fa;var Iq=gd;Tc=function(a){var c=Re.Symbol||(Re.Symbol={});jb(c,a)||Iq(c,a,{value:nm(a)})};var jj={};jj=function(){var a=Cc("Symbol"),c=(a=a&&a.prototype)&&a.valueOf,d=bc("toPrimitive");a&&!a[d]&&nc(a,d,function(b){return Qb(c,this)},{arity:1})};var vd={},Jq=gd,om=bc("toStringTag");vd=function(a,c,d){a&&!d&&(a=a.prototype);a&&
!jb(a,om)&&Jq(a,om,{configurable:!0,value:c})};var Se={},kj={},Kq=(kj=function(a){if("Function"===Zc(a))return mb(a)})(kj.bind);Se=function(a,c){return Sc(a),void 0===c?a:rf?Kq(a,c):function(){return a.apply(c,arguments)}};var pm=mb([].push),qe=function(a){var c=1===a,d=2===a,b=3===a,g=4===a,p=6===a,k=7===a,e=5===a||p;return function(l,m,h,n){var r,u,v=Oe(l),x=Li(v),C=vf(x);m=Se(m,h);h=0;n=n||ej;for(l=c?n(l,C):d||k?n(l,0):void 0;C>h;h++)if((e||h in x)&&(u=m(r=x[h],h,v),a))if(c)l[h]=u;else if(u)switch(a){case 3:return!0;
case 5:return r;case 6:return h;case 2:pm(l,r)}else switch(a){case 4:return!1;case 7:pm(l,r)}return p?-1:b||g?g:l}},vh={forEach:qe(0),map:qe(1),filter:qe(2),some:qe(3),every:qe(4),find:qe(5),findIndex:qe(6),filterReject:qe(7)}.forEach,bd=jg("hidden"),Lq=$c.set,qm=$c.getterFor("Symbol"),nd=Object.prototype,zf=Fa.Symbol,pg=zf&&zf.prototype,Mq=Fa.RangeError,Nq=Fa.TypeError,lj=Fa.QObject,rm=fg,Te=gd,sm=ij,Oq=Ki,tm=mb([].push),Ud=Rd("symbols"),qg=Rd("op-symbols"),Pq=Rd("wks"),mj=!lj||!lj.prototype||!lj.prototype.findChild,
um=function(a,c,d){var b=rm(nd,c);b&&delete nd[c];Te(a,c,d);b&&a!==nd&&Te(nd,c,b)},nj=Kb&&Mb(function(){return 7!==ad(Te({},"a",{get:function(){return Te(this,"a",{value:7}).a}})).a})?um:Te,oj=function(a,c){var d=Ud[a]=ad(pg);return Lq(d,{type:"Symbol",tag:a,description:c}),Kb||(d.description=c),d},wh=function(a,c,d){a===nd&&wh(qg,c,d);mc(a);c=Le(c);return(mc(d),jb(Ud,c))?(d.enumerable?(jb(a,bd)&&a[bd][c]&&(a[bd][c]=!1),d=ad(d,{enumerable:ld(0,!1)})):(jb(a,bd)||Te(a,bd,ld(1,ad(null))),a[bd][c]=!0),
nj(a,c,d)):Te(a,c,d)},qj=function(a,c){mc(a);var d=td(c);return vh(sh(d).concat(vm(d)),function(b){Kb&&!Qb(pj,d,b)||wh(a,b,d[b])}),a},pj=function(a){a=Le(a);var c=Qb(Oq,this,a);return(!(this===nd&&jb(Ud,a))||!!jb(qg,a))&&(!(c||!jb(this,a)||!jb(Ud,a)||jb(this,bd)&&this[bd][a])||c)},wm=function(a,c){a=td(a);c=Le(c);if(a!==nd||!jb(Ud,c)||jb(qg,c)){var d=rm(a,c);return d&&jb(Ud,c)&&!(jb(a,bd)&&a[bd][c])&&(d.enumerable=!0),d}},xm=function(a){a=sm(td(a));var c=[];return vh(a,function(d){jb(Ud,d)||jb(Qe,
d)||tm(c,d)}),c},vm=function(a){var c=a===nd;a=sm(c?qg:td(a));var d=[];return vh(a,function(b){jb(Ud,b)&&(!c||jb(nd,b))&&tm(d,Ud[b])}),d};ud||(pg=(zf=function(){if(Qd(pg,this))throw new Nq("Symbol is not a constructor");var a=arguments.length&&void 0!==arguments[0]?Jd(arguments[0]):void 0,c=Pe(a),d=function(b){var g=void 0===this?Fa:this;g===nd&&Qb(d,qg,b);jb(g,bd)&&jb(g[bd],c)&&(g[bd][c]=!1);b=ld(1,b);try{nj(g,c,b)}catch(p){if(!(p instanceof Mq))throw p;um(g,c,b)}};return Kb&&mj&&nj(nd,c,{configurable:!0,
set:d}),oj(c,a)}).prototype,nc(pg,"toString",function(){return qm(this).tag}),nc(zf,"withoutSetter",function(a){return oj(Pe(a),a)}),Ki=pj,gd=wh,im=qj,fg=wm,lg=ij=xm,qh=vm,nm=function(a){return oj(bc(a),a)},Kb&&(yf(pg,"description",{configurable:!0,get:function(){return qm(this).description}}),zc||nc(nd,"propertyIsEnumerable",pj,{unsafe:!0})));Bb({global:!0,constructor:!0,wrap:!0,forced:!ud,sham:!ud},{Symbol:zf});vh(sh(Pq),function(a){Tc(a)});Bb({target:"Symbol",stat:!0,forced:!ud},{useSetter:function(){mj=
!0},useSimple:function(){mj=!1}});Bb({target:"Object",stat:!0,forced:!ud,sham:!Kb},{create:function(a,c){return void 0===c?ad(a):qj(ad(a),c)},defineProperty:wh,defineProperties:qj,getOwnPropertyDescriptor:wm});Bb({target:"Object",stat:!0,forced:!ud},{getOwnPropertyNames:xm});jj();vd(zf,"Symbol");Qe[bd]=!0;var rj={};rj=ud&&!!Symbol.for&&!!Symbol.keyFor;var sj=Rd("string-to-symbol-registry"),Qq=Rd("symbol-to-string-registry");Bb({target:"Symbol",stat:!0,forced:!rj},{for:function(a){a=Jd(a);if(jb(sj,
a))return sj[a];var c=Cc("Symbol")(a);return sj[a]=c,Qq[c]=a,c}});var ym=Rd("symbol-to-string-registry");Bb({target:"Symbol",stat:!0,forced:!rj},{keyFor:function(a){if(!Me(a))throw TypeError(Ne(a)+" is not a symbol");if(jb(ym,a))return ym[a]}});var xh={},zm=Function.prototype,Am=zm.apply,Bm=zm.call;xh="object"==typeof Reflect&&Reflect.apply||(rf?Bm.bind(Am):function(){return Bm.apply(Am,arguments)});var Cm={},Dm=mb([].push);Cm=function(a){if(Ab(a))return a;if(wf(a)){for(var c=a.length,d=[],b=0;b<
c;b++){var g=a[b];"string"==typeof g?Dm(d,g):("number"==typeof g||"Number"===Zc(g)||"String"===Zc(g))&&Dm(d,Jd(g))}var p=d.length,k=!0;return function(e,l){if(k)return k=!1,l;if(wf(this))return l;for(var m=0;m<p;m++)if(d[m]===e)return l}}};var Rq=String,re=Cc("JSON","stringify"),yh=mb(/./.exec),Em=mb("".charAt),Sq=mb("".charCodeAt),Tq=mb("".replace),Uq=mb((1).toString),Vq=/[\uD800-\uDFFF]/g,Fm=/^[\uD800-\uDBFF]$/,Gm=/^[\uDC00-\uDFFF]$/,Hm=!ud||Mb(function(){var a=Cc("Symbol")("stringify detection");
return"[null]"!==re([a])||"{}"!==re({a})||"{}"!==re(Object(a))}),Im=Mb(function(){return'"\udf06\ud834"'!==re("\udf06\ud834")||'"\udead"'!==re("\udead")}),Wq=function(a,c){var d=xf(arguments),b=Cm(c);if(Ab(b)||void 0!==a&&!Me(a))return d[1]=function(g,p){if(Ab(b)&&(p=Qb(b,this,Rq(g),p)),!Me(p))return p},xh(re,null,d)},Xq=function(a,c,d){var b=Em(d,c-1);c=Em(d,c+1);return yh(Fm,a)&&!yh(Gm,c)||yh(Gm,a)&&!yh(Fm,b)?"\\u"+Uq(Sq(a,0),16):a};re&&Bb({target:"JSON",stat:!0,arity:3,forced:Hm||Im},{stringify:function(a,
c,d){var b=xf(arguments);b=xh(Hm?Wq:re,null,b);return Im&&"string"==typeof b?Tq(b,Vq,Xq):b}});var Yq=!ud||Mb(function(){qh(1)});Bb({target:"Object",stat:!0,forced:Yq},{getOwnPropertySymbols:function(a){var c=qh;return c?c(Oe(a)):[]}});Tc("asyncIterator");var Vd=Fa.Symbol,Ue=Vd&&Vd.prototype;if(Kb&&Ab(Vd)&&(!("description"in Ue)||void 0!==Vd().description)){var Jm={},zh=function(){var a=1>arguments.length||void 0===arguments[0]?void 0:Jd(arguments[0]),c=Qd(Ue,this)?new Vd(a):void 0===a?Vd():Vd(a);
return""===a&&(Jm[c]=!0),c};nh(zh,Vd);zh.prototype=Ue;Ue.constructor=zh;var Zq="Symbol(description detection)"===String(Vd("description detection")),$q=mb(Ue.valueOf),ar=mb(Ue.toString),br=/^Symbol\((.*)\)[^)]+$/,cr=mb("".replace),dr=mb("".slice);yf(Ue,"description",{configurable:!0,get:function(){var a=$q(this);if(jb(Jm,a))return"";a=ar(a);a=Zq?dr(a,7,-1):cr(a,br,"$1");return""===a?void 0:a}});Bb({global:!0,constructor:!0,forced:!0},{Symbol:zh})}Tc("hasInstance");Tc("isConcatSpreadable");Tc("iterator");
Tc("match");Tc("matchAll");Tc("replace");Tc("search");Tc("species");Tc("split");Tc("toPrimitive");jj();Tc("toStringTag");vd(Cc("Symbol"),"Symbol");Tc("unscopables");vd(Fa.JSON,"JSON",!0);vd(Math,"Math",!0);Bb({global:!0},{Reflect:{}});vd(Fa.Reflect,"Reflect",!0);Re.Symbol;var tj={};tj={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,
MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};var Km={},uj=tf("span").classList,Lm=uj&&uj.constructor&&uj.constructor.prototype;Km=Lm===Object.prototype?void 0:Lm;var Af={},rg={},er=gd,vj=bc("unscopables"),wj=Array.prototype;void 0===wj[vj]&&er(wj,vj,{configurable:!0,
value:ad(null)});rg=function(a){wj[vj][a]=!0};var se={};se={};var fr=gd,Ah={},Mm={},xj={},Kd={},Nm={};Nm=!Mb(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype});var Om=jg("IE_PROTO"),yj=Object,gr=yj.prototype;Kd=Nm?yj.getPrototypeOf:function(a){a=Oe(a);if(jb(a,Om))return a[Om];var c=a.constructor;return Ab(c)&&a instanceof c?c.prototype:a instanceof yj?gr:null};var zj=bc("iterator"),Pm=!1;[].keys&&("next"in(yl=[].keys())?(xl=Kd(Kd(yl)))!==Object.prototype&&
(Pd=xl):Pm=!0);!Rb(Pd)||Mb(function(){var a={};return Pd[zj].call(a)!==a})?Pd={}:zc&&(Pd=ad(Pd));Ab(Pd[zj])||nc(Pd,zj,function(){return this});var hr=(xj={IteratorPrototype:Pd,BUGGY_SAFARI_ITERATORS:Pm}).IteratorPrototype,ir=function(){return this};Mm=function(a,c,d,b){c+=" Iterator";return a.prototype=ad(hr,{next:ld(+!b,d)}),vd(a,c,!1,!0),se[c]=ir,a};var Dc={},Aj={};Aj=function(a,c,d){try{return mb(Sc(Object.getOwnPropertyDescriptor(a,c)[d]))}catch(b){}};var Qm={},Rm={};Rm=function(a){return Rb(a)||
null===a};var jr=String,kr=TypeError;Qm=function(a){if(Rm(a))return a;throw new kr("Can't set "+jr(a)+" as a prototype");};Dc=Object.setPrototypeOf||("__proto__"in{}?function(){var a,c=!1,d={};try{(a=Aj(Object.prototype,"__proto__","set"))(d,[]),c=d instanceof Array}catch(b){}return function(b,g){return Je(b),Qm(g),Rb(b)&&(c?a(b,g):b.__proto__=g),b}}():void 0);var lr=Wi.PROPER,mr=Wi.CONFIGURABLE,Sm=xj.IteratorPrototype,Bh=xj.BUGGY_SAFARI_ITERATORS,sg=bc("iterator"),Tm=function(){return this};Ah=function(a,
c,d,b,g,p,k){Mm(d,c,b);var e,l,m;b=function(C){if(C===g&&v)return v;if(!Bh&&C&&C in r)return r[C];switch(C){case "keys":case "values":case "entries":return function(){return new d(this,C)}}return function(){return new d(this)}};var h=c+" Iterator",n=!1,r=a.prototype,u=r[sg]||r["@@iterator"]||g&&r[g],v=!Bh&&u||b(g),x="Array"===c&&r.entries||u;if(x&&(e=Kd(x.call(new a)))!==Object.prototype&&e.next&&(zc||Kd(e)===Sm||(Dc?Dc(e,Sm):Ab(e[sg])||nc(e,sg,Tm)),vd(e,h,!0,!0),zc&&(se[h]=Tm)),lr&&"values"===g&&
u&&"values"!==u.name&&(!zc&&mr?md(r,"name","values"):(n=!0,v=function(){return Qb(u,this)})),g)if(l={values:b("values"),keys:p?v:b("keys"),entries:b("entries")},k)for(m in l)!Bh&&!n&&m in r||nc(r,m,l[m]);else Bb({target:c,proto:!0,forced:Bh||n},l);return(!zc||k)&&r[sg]!==v&&nc(r,sg,v,{name:g}),se[c]=v,l};var wd={};wd=function(a,c){return{value:a,done:c}};var nr=$c.set,or=$c.getterFor("Array Iterator");Af=Ah(Array,"Array",function(a,c){nr(this,{type:"Array Iterator",target:td(a),index:0,kind:c})},
function(){var a=or(this),c=a.target,d=a.index++;if(!c||d>=c.length)return a.target=null,wd(void 0,!0);switch(a.kind){case "keys":return wd(d,!1);case "values":return wd(c[d],!1)}return wd([d,c[d]],!1)},"values");var Um=se.Arguments=se.Array;if(rg("keys"),rg("values"),rg("entries"),!zc&&Kb&&"values"!==Um.name)try{fr(Um,"name",{value:"values"})}catch(a){}var Bj=bc("iterator"),Cj=Af.values,Vm=function(a,c){if(a){if(a[Bj]!==Cj)try{md(a,Bj,Cj)}catch(b){a[Bj]=Cj}if(vd(a,c,!0),tj[c])for(var d in Af)if(a[d]!==
Af[d])try{md(a,d,Af[d])}catch(b){a[d]=Af[d]}}},Ch;for(Ch in tj)Vm(Fa[Ch]&&Fa[Ch].prototype,Ch);Vm(Km,"DOMTokenList");var Wm={};Wm=function(a,c){Rb(c)&&"cause"in c&&md(a,"cause",c.cause)};var Xm={},Ym={},Zm=Error,pr=mb("".replace),qr=String((new Zm("zxcasd")).stack),$m=/\n\s*at [^:]*:[^\n]*/,rr=$m.test(qr);Ym=function(a,c){if(rr&&"string"==typeof a&&!Zm.prepareStackTrace)for(;c--;)a=pr(a,$m,"");return a};var an={};an=!Mb(function(){var a=Error("a");return!("stack"in a)||(Object.defineProperty(a,"stack",
ld(1,7)),7!==a.stack)});var bn=Error.captureStackTrace;Xm=function(a,c,d,b){an&&(bn?bn(a,c):md(a,"stack",Ym(d,b)))};var Wd={},cn={},sr=bc("iterator"),tr=Array.prototype;cn=function(a){return void 0!==a&&(se.Array===a||tr[sr]===a)};var dn={},Dj={},ur=bc("iterator");Dj=function(a){if(!Ke(a))return ig(a,ur)||ig(a,"@@iterator")||se[Td(a)]};var vr=TypeError;dn=function(a,c){var d=2>arguments.length?Dj(a):c;if(Sc(d))return mc(Qb(d,a));throw new vr(Ne(a)+" is not iterable");};var tg={};tg=function(a,c,d){var b;
mc(a);try{if(!(b=ig(a,"return"))){if("throw"===c)throw d;return d}b=Qb(b,a)}catch(p){var g=!0;b=p}if("throw"===c)throw d;if(g)throw b;return mc(b),d};var wr=TypeError,Dh=function(a,c){this.stopped=a;this.result=c},en=Dh.prototype;Wd=function(a,c,d){var b,g=!(!d||!d.AS_ENTRIES);var p=!(!d||!d.IS_RECORD);var k=!(!d||!d.IS_ITERATOR);var e=!(!d||!d.INTERRUPTED),l=Se(c,d&&d.that),m=function(n){return h&&tg(h,"normal",n),new Dh(!0,n)};c=function(n){return g?(mc(n),e?l(n[0],n[1],m):l(n[0],n[1])):e?l(n,m):
l(n)};if(p)var h=a.iterator;else if(k)h=a;else{if(!(k=Dj(a)))throw new wr(Ne(a)+" is not iterable");if(cn(k)){p=0;for(k=vf(a);k>p;p++)if((b=c(a[p]))&&Qd(en,b))return b;return new Dh(!1)}h=dn(a,k)}for(a=p?a.next:h.next;!(p=Qb(a,h)).done;){try{b=c(p.value)}catch(n){tg(h,"throw",n)}if("object"==typeof b&&b&&Qd(en,b))return b}return new Dh(!1)};var fn={};fn=function(a,c){return void 0===a?2>arguments.length?"":c:Jd(a)};var xr=bc("toStringTag"),Eh=Error,yr=[].push,Bf=function(a,c){var d,b=Qd(Ej,this);
Dc?d=Dc(new Eh,b?Kd(this):Ej):(d=b?this:ad(Ej),md(d,xr,"Error"));void 0!==c&&md(d,"message",fn(c));Xm(d,Bf,d.stack,1);2<arguments.length&&Wm(d,arguments[2]);b=[];return Wd(a,yr,{that:b}),md(d,"errors",b),d};Dc?Dc(Bf,Eh):nh(Bf,Eh,{name:!0});var Ej=Bf.prototype=ad(Eh.prototype,{constructor:ld(1,Bf),message:ld(1,""),name:ld(1,"AggregateError")});Bb({global:!0,constructor:!0,arity:2},{AggregateError:Bf});var Xd={},Fj={},Fh=function(a){return pe.slice(0,a.length)===a};Xd="NODE"==(Fj=Fh("Bun/")?"BUN":Fh("Cloudflare-Workers")?
"CLOUDFLARE":Fh("Deno/")?"DENO":Fh("Node.js/")?"NODE":Fa.Bun&&"string"==typeof Bun.version?"BUN":Fa.Deno&&"object"==typeof Deno.version?"DENO":"process"===Zc(Fa.process)?"NODE":Fa.window&&Fa.document?"BROWSER":"REST");var Gj={},gn=bc("species");Gj=function(a){a=Cc(a);Kb&&a&&!a[gn]&&yf(a,gn,{configurable:!0,get:function(){return this}})};var Gh={},zr=TypeError;Gh=function(a,c){if(Qd(c,a))return a;throw new zr("Incorrect invocation");};var Hh={},hn={},Ar=TypeError;hn=function(a){if(fj(a))return a;throw new Ar(Ne(a)+
" is not a constructor");};var Br=bc("species");Hh=function(a,c){var d;a=mc(a).constructor;return void 0===a||Ke(d=mc(a)[Br])?c:hn(d)};var jn={},kn={},Cr=TypeError;kn=function(a,c){if(a<c)throw new Cr("Not enough arguments");return a};var Hj={};Hj=/(?:ipad|iphone|ipod).*applewebkit/i.test(pe);var Ij=Fa.setImmediate,Jj=Fa.clearImmediate,Dr=Fa.process,Kj=Fa.Dispatch,Er=Fa.Function,ln=Fa.MessageChannel,Fr=Fa.String,Lj=0,ug={};Mb(function(){gg=Fa.location});var Mj=function(a){if(jb(ug,a)){var c=ug[a];
delete ug[a];c()}},Nj=function(a){return function(){Mj(a)}},mn=function(a){Mj(a.data)},nn=function(a){Fa.postMessage(Fr(a),gg.protocol+"//"+gg.host)};Ij&&Jj||(Ij=function(a){kn(arguments.length,1);var c=Ab(a)?a:Er(a),d=xf(arguments,1);return ug[++Lj]=function(){xh(c,void 0,d)},nf(Lj),Lj},Jj=function(a){delete ug[a]},Xd?nf=function(a){Dr.nextTick(Nj(a))}:Kj&&Kj.now?nf=function(a){Kj.now(Nj(a))}:ln&&!Hj?(Di=(zl=new ln).port2,zl.port1.onmessage=mn,nf=Se(Di.postMessage,Di)):Fa.addEventListener&&Ab(Fa.postMessage)&&
!Fa.importScripts&&gg&&"file:"!==gg.protocol&&!Mb(nn)?(nf=nn,Fa.addEventListener("message",mn,!1)):nf="onreadystatechange"in tf("script")?function(a){th.appendChild(tf("script")).onreadystatechange=function(){th.removeChild(this);Mj(a)}}:function(a){setTimeout(Nj(a),0)});var on=(jn={set:Ij,clear:Jj}).set,Ih={},pn={},Gr=Object.getOwnPropertyDescriptor;pn=function(a){return Kb?(a=Gr(Fa,a))&&a.value:Fa[a]};var Oj=jn.set,Pj={},qn=function(){this.tail=this.head=null};qn.prototype={add:function(a){a={item:a,
next:null};var c=this.tail;c?c.next=a:this.head=a;this.tail=a},get:function(){var a=this.head;if(a)return null===(this.head=a.next)&&(this.tail=null),a.item}};Pj=qn;var rn={};rn=/ipad|iphone|ipod/i.test(pe)&&"undefined"!=typeof Pebble;var sn={};sn=/web0s(?!.*chrome)/i.test(pe);var tn=Fa.MutationObserver||Fa.WebKitMutationObserver,un=Fa.document,vn=Fa.process,Jh=Fa.Promise,Qj=pn("queueMicrotask");if(!Qj){var Kh=new Pj,Lh=function(){var a,c;for(Xd&&(a=vn.domain)&&a.exit();c=Kh.get();)try{c()}catch(d){throw Kh.head&&
of(),d;}a&&a.enter()};Hj||Xd||sn||!tn||!un?!rn&&Jh&&Jh.resolve?((Gi=Jh.resolve(void 0)).constructor=Jh,Al=Se(Gi.then,Gi),of=function(){Al(Lh)}):Xd?of=function(){vn.nextTick(Lh)}:(Oj=Se(Oj,Fa),of=function(){Oj(Lh)}):(Ei=!0,Fi=un.createTextNode(""),(new tn(Lh)).observe(Fi,{characterData:!0}),of=function(){Fi.data=Ei=!Ei});Qj=function(a){Kh.head||of();Kh.add(a)}}Ih=Qj;var wn={};wn=function(a,c){try{1==arguments.length?console.error(a):console.error(a,c)}catch(d){}};var Cf={};Cf=function(a){try{return{error:!1,
value:a()}}catch(c){return{error:!0,value:c}}};var tc={};tc=Fa.Promise;var xn=tc&&tc.prototype,Hr=bc("species"),yn=!1,zn=Ab(Fa.PromiseRejectionEvent);var Ve=mg("Promise",function(){var a=kh(tc),c=a!==String(tc);if(!c&&66===oe||zc&&(!xn.catch||!xn.finally))return!0;if(!oe||51>oe||!/native code/.test(a)){a=new tc(function(b){b(1)});var d=function(b){b(function(){},function(){})};if((a.constructor={})[Hr]=d,!(yn=a.then(function(){})instanceof d))return!0}return!c&&("BROWSER"===Fj||"DENO"===Fj)&&!zn});
var Ir=yn;var Jr=TypeError,Kr=function(a){var c,d;this.promise=new a(function(b,g){if(void 0!==c||void 0!==d)throw new Jr("Bad Promise constructor");c=b;d=g});this.resolve=Sc(c);this.reject=Sc(d)};var Yd=function(a){return new Kr(a)};var Rj=$c.getterFor("Promise"),Lr=$c.set,Df=tc&&tc.prototype,Ef=tc,Mh=Df,An=Fa.TypeError,Sj=Fa.document,Tj=Fa.process,Uj=Yd,Mr=Uj,Nr=!!(Sj&&Sj.createEvent&&Fa.dispatchEvent),Bn=function(a){var c;return!(!Rb(a)||!Ab(c=a.then))&&c},Cn=function(a,c){var d,b,g,p=c.value,
k=1===c.state,e=k?a.ok:a.fail,l=a.resolve,m=a.reject,h=a.domain;try{e?(k||(2===c.rejection&&Or(c),c.rejection=1),!0===e?d=p:(h&&h.enter(),d=e(p),h&&(h.exit(),g=!0)),d===a.promise?m(new An("Promise-chain cycle")):(b=Bn(d))?Qb(b,d,l,m):l(d)):m(p)}catch(n){h&&!g&&h.exit(),m(n)}},Dn=function(a,c){a.notified||(a.notified=!0,Ih(function(){for(var d,b=a.reactions;d=b.get();)Cn(d,a);a.notified=!1;c&&!a.rejection&&Pr(a)}))},En=function(a,c,d){var b,g;Nr?((b=Sj.createEvent("Event")).promise=c,b.reason=d,b.initEvent(a,
!1,!0),Fa.dispatchEvent(b)):b={promise:c,reason:d};!zn&&(g=Fa["on"+a])?g(b):"unhandledrejection"===a&&wn("Unhandled promise rejection",d)},Pr=function(a){Qb(on,Fa,function(){var c,d=a.facade,b=a.value;if(1!==a.rejection&&!a.parent&&(c=Cf(function(){Xd?Tj.emit("unhandledRejection",b,d):En("unhandledrejection",d,b)}),a.rejection=Xd||1!==a.rejection&&!a.parent?2:1,c.error))throw c.value;})},Or=function(a){Qb(on,Fa,function(){var c=a.facade;Xd?Tj.emit("rejectionHandled",c):En("rejectionhandled",c,a.value)})},
Ff=function(a,c,d){return function(b){a(c,b,d)}},Gf=function(a,c,d){a.done||(a.done=!0,d&&(a=d),a.value=c,a.state=2,Dn(a,!0))},Vj=function(a,c,d){if(!a.done){a.done=!0;d&&(a=d);try{if(a.facade===c)throw new An("Promise can't be resolved itself");var b=Bn(c);b?Ih(function(){var g={done:!1};try{Qb(b,c,Ff(Vj,g,a),Ff(Gf,g,a))}catch(p){Gf(g,p,a)}}):(a.value=c,a.state=1,Dn(a,!1))}catch(g){Gf({done:!1},g,a)}}};if(Ve&&(Mh=(Ef=function(a){Gh(this,Mh);Sc(a);Qb(Hi,this);var c=Rj(this);try{a(Ff(Vj,c),Ff(Gf,c))}catch(d){Gf(c,
d)}}).prototype,(Hi=function(a){Lr(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new Pj,rejection:!1,state:0,value:null})}).prototype=nc(Mh,"then",function(a,c){var d=Rj(this),b=Uj(Hh(this,Ef));return d.parent=!0,b.ok=!Ab(a)||a,b.fail=Ab(c)&&c,b.domain=Xd?Tj.domain:void 0,0===d.state?d.reactions.add(b):Ih(function(){Cn(b,d)}),b.promise}),Bl=function(){var a=new Hi,c=Rj(a);this.promise=a;this.resolve=Ff(Vj,c);this.reject=Ff(Gf,c)},Yd=Uj=function(a){return a===Ef||void 0===a?new Bl(a):
Mr(a)},!zc&&Ab(tc)&&Df!==Object.prototype)){var Qr=Df.then;Ir||nc(Df,"then",function(a,c){var d=this;return(new Ef(function(b,g){Qb(Qr,d,b,g)})).then(a,c)},{unsafe:!0});try{delete Df.constructor}catch(a){}Dc&&Dc(Df,Mh)}Bb({global:!0,constructor:!0,wrap:!0,forced:Ve},{Promise:Ef});vd(Ef,"Promise",!1,!0);Gj("Promise");var vg={},Wj={},Fn=bc("iterator"),Gn=!1;try{var Rr=0,Hn={next:function(){return{done:!!Rr++}},return:function(){Gn=!0}};Hn[Fn]=function(){return this};Array.from(Hn,function(){throw 2;
})}catch(a){}Wj=function(a,c){if(!c&&!Gn)return!1;var d=!1;try{c={},c[Fn]=function(){return{next:function(){return{done:d=!0}}}},a(c)}catch(b){}return d};vg=Ve||!Wj(function(a){tc.all(a).then(void 0,function(){})});Bb({target:"Promise",stat:!0,forced:vg},{all:function(a){var c=this,d=Yd(c),b=d.resolve,g=d.reject,p=Cf(function(){var k=Sc(c.resolve),e=[],l=0,m=1;Wd(a,function(h){var n=l++,r=!1;m++;Qb(k,c,h).then(function(u){!r&&(r=!0,e[n]=u,--m||b(e))},g)});--m||b(e)});return p.error&&g(p.value),d.promise}});
var In=tc&&tc.prototype;if(Bb({target:"Promise",proto:!0,forced:Ve,real:!0},{catch:function(a){return this.then(void 0,a)}}),!zc&&Ab(tc)){var Jn=Cc("Promise").prototype.catch;In.catch!==Jn&&nc(In,"catch",Jn,{unsafe:!0})}Bb({target:"Promise",stat:!0,forced:vg},{race:function(a){var c=this,d=Yd(c),b=d.reject,g=Cf(function(){var p=Sc(c.resolve);Wd(a,function(k){Qb(p,c,k).then(d.resolve,b)})});return g.error&&b(g.value),d.promise}});Bb({target:"Promise",stat:!0,forced:Ve},{reject:function(a){var c=Yd(this);
return(0,c.reject)(a),c.promise}});var Nh={};Nh=function(a,c){if(mc(a),Rb(c)&&c.constructor===a)return c;a=Yd(a);return(0,a.resolve)(c),a.promise};var Sr=Cc("Promise"),Tr=zc&&!Ve;Bb({target:"Promise",stat:!0,forced:zc||Ve},{resolve:function(a){return Nh(Tr&&this===Sr?tc:this,a)}});Bb({target:"Promise",stat:!0,forced:vg},{allSettled:function(a){var c=this,d=Yd(c),b=d.resolve,g=d.reject,p=Cf(function(){var k=Sc(c.resolve),e=[],l=0,m=1;Wd(a,function(h){var n=l++,r=!1;m++;Qb(k,c,h).then(function(u){!r&&
(r=!0,e[n]={status:"fulfilled",value:u},--m||b(e))},function(u){!r&&(r=!0,e[n]={status:"rejected",reason:u},--m||b(e))})});--m||b(e)});return p.error&&g(p.value),d.promise}});Bb({target:"Promise",stat:!0,forced:vg},{any:function(a){var c=this,d=Cc("AggregateError"),b=Yd(c),g=b.resolve,p=b.reject,k=Cf(function(){var e=Sc(c.resolve),l=[],m=0,h=1,n=!1;Wd(a,function(r){var u=m++,v=!1;h++;Qb(e,c,r).then(function(x){v||n||(n=!0,g(x))},function(x){!v&&!n&&(v=!0,l[u]=x,--h||p(new d(l,"No one promise resolved")))})});
--h||p(new d(l,"No one promise resolved"))});return k.error&&p(k.value),b.promise}});Bb({target:"Promise",stat:!0},{withResolvers:function(){var a=Yd(this);return{promise:a.promise,resolve:a.resolve,reject:a.reject}}});var Xj=tc&&tc.prototype,Ur=!!tc&&Mb(function(){Xj.finally.call({then:function(){}},function(){})});if(Bb({target:"Promise",proto:!0,real:!0,forced:Ur},{finally:function(a){var c=Hh(this,Cc("Promise")),d=Ab(a);return this.then(d?function(b){return Nh(c,a()).then(function(){return b})}:
a,d?function(b){return Nh(c,a()).then(function(){throw b;})}:a)}}),!zc&&Ab(tc)){var Kn=Cc("Promise").prototype.finally;Xj.finally!==Kn&&nc(Xj,"finally",Kn,{unsafe:!0})}var Vr=mb("".charAt),Ln=mb("".charCodeAt),Wr=mb("".slice),Mn=function(a){return function(c,d){var b,g;c=Jd(Je(c));d=kg(d);var p=c.length;return 0>d||d>=p?a?"":void 0:55296>(b=Ln(c,d))||56319<b||d+1===p||56320>(g=Ln(c,d+1))||57343<g?a?Vr(c,d):b:a?Wr(c,d,d+2):(b-55296<<10)+(g-56320)+65536}},Xr={codeAt:Mn(!1),charAt:Mn(!0)}.charAt,Yr=
$c.set,Zr=$c.getterFor("String Iterator");Ah(String,"String",function(a){Yr(this,{type:"String Iterator",string:Jd(a),index:0})},function(){var a,c=Zr(this),d=c.string,b=c.index;return b>=d.length?wd(void 0,!0):(a=Xr(d,b),c.index+=a.length,wd(a,!1))});Re.Promise;var Yj={},Zj={},$r=gd,Oh={},ak={};ak=Mb(function(){if("function"==typeof ArrayBuffer){var a=new ArrayBuffer(8);Object.isExtensible(a)&&Object.defineProperty(a,"a",{value:8})}});var Ph=Object.isExtensible;Oh=Mb(function(){Ph(1)})||ak?function(a){return!!Rb(a)&&
(!ak||"ArrayBuffer"!==Zc(a))&&(!Ph||Ph(a))}:Ph;var Nn={};Nn=!Mb(function(){return Object.isExtensible(Object.preventExtensions({}))});var On=!1,Zd=Pe("meta"),as=0,bk=function(a){$r(a,Zd,{value:{objectID:"O"+as++,weakData:{}}})},bs=Zj={enable:function(){bs.enable=function(){};On=!0;var a=lg,c=mb([].splice),d={};d[Zd]=1;a(d).length&&(lg=function(b){b=a(b);for(var g=0,p=b.length;g<p;g++)if(b[g]===Zd){c(b,g,1);break}return b},Bb({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ij}))},fastKey:function(a,
c){if(!Rb(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!jb(a,Zd)){if(!Oh(a))return"F";if(!c)return"E";bk(a)}return a[Zd].objectID},getWeakData:function(a,c){if(!jb(a,Zd)){if(!Oh(a))return!0;if(!c)return!1;bk(a)}return a[Zd].weakData},onFreeze:function(a){return Nn&&On&&Oh(a)&&!jb(a,Zd)&&bk(a),a}};Qe[Zd]=!0;var Pn={};Pn=function(a,c,d){var b,g;return Dc&&Ab(b=c.constructor)&&b!==d&&Rb(g=b.prototype)&&g!==d.prototype&&Dc(a,g),a};Yj=function(a,c,d){var b=-1!==a.indexOf("Map"),g=-1!==
a.indexOf("Weak"),p=b?"set":"add",k=Fa[a],e=k&&k.prototype,l=k,m={},h=function(C){var J=mb(e[C]);nc(e,C,"add"===C?function(H){return J(this,0===H?0:H),this}:"delete"===C?function(H){return(!g||!!Rb(H))&&J(this,0===H?0:H)}:"get"===C?function(H){return g&&!Rb(H)?void 0:J(this,0===H?0:H)}:"has"===C?function(H){return(!g||!!Rb(H))&&J(this,0===H?0:H)}:function(H,G){return J(this,0===H?0:H,G),this})};if(mg(a,!Ab(k)||!(g||e.forEach&&!Mb(function(){(new k).entries().next()}))))l=d.getConstructor(c,a,b,p),
Zj.enable();else if(mg(a,!0)){var n=new l,r=n[p](g?{}:-0,1)!==n,u=Mb(function(){n.has(1)}),v=Wj(function(C){new k(C)}),x=!g&&Mb(function(){for(var C=new k,J=5;J--;)C[p](J,J);return!C.has(-0)});v||((l=c(function(C,J){Gh(C,e);C=Pn(new k,C,l);return Ke(J)||Wd(J,C[p],{that:C,AS_ENTRIES:b}),C})).prototype=e,e.constructor=l);(u||x)&&(h("delete"),h("has"),b&&h("get"));(x||r)&&h(p);g&&e.clear&&delete e.clear}return m[a]=l,Bb({global:!0,constructor:!0,forced:l!==k},m),vd(l,a),g||d.setStrong(l,a,b),l};var Qn=
{},ck={};ck=function(a,c,d){for(var b in c)nc(a,b,c[b],d);return a};var Rn=Zj.fastKey,Sn=$c.set,dk=$c.getterFor;Yj("Map",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},Qn={getConstructor:function(a,c,d,b){a=a(function(l,m){Gh(l,g);Sn(l,{type:c,index:ad(null),first:null,last:null,size:0});Kb||(l.size=0);Ke(m)||Wd(m,l[b],{that:l,AS_ENTRIES:d})});var g=a.prototype,p=dk(c),k=function(l,m,h){var n,r,u=p(l),v=e(l,m);return v?v.value=h:(u.last=v={index:r=Rn(m,!0),key:m,
value:h,previous:n=u.last,next:null,removed:!1},u.first||(u.first=v),n&&(n.next=v),Kb?u.size++:l.size++,"F"!==r&&(u.index[r]=v)),l},e=function(l,m){l=p(l);var h=Rn(m);if("F"!==h)return l.index[h];for(l=l.first;l;l=l.next)if(l.key===m)return l};return ck(g,{clear:function(){for(var l=p(this),m=l.first;m;)m.removed=!0,m.previous&&(m.previous=m.previous.next=null),m=m.next;l.first=l.last=null;l.index=ad(null);Kb?l.size=0:this.size=0},delete:function(l){var m=p(this);if(l=e(this,l)){var h=l.next,n=l.previous;
delete m.index[l.index];l.removed=!0;n&&(n.next=h);h&&(h.previous=n);m.first===l&&(m.first=h);m.last===l&&(m.last=n);Kb?m.size--:this.size--}return!!l},forEach:function(l){for(var m,h=p(this),n=Se(l,1<arguments.length?arguments[1]:void 0);m=m?m.next:h.first;)for(n(m.value,m.key,this);m&&m.removed;)m=m.previous},has:function(l){return!!e(this,l)}}),ck(g,d?{get:function(l){return(l=e(this,l))&&l.value},set:function(l,m){return k(this,0===l?0:l,m)}}:{add:function(l){return k(this,l=0===l?0:l,l)}}),Kb&&
yf(g,"size",{configurable:!0,get:function(){return p(this).size}}),a},setStrong:function(a,c,d){var b=c+" Iterator",g=dk(c),p=dk(b);Ah(a,c,function(k,e){Sn(this,{type:b,target:k,state:g(k),kind:e,last:null})},function(){for(var k=p(this),e=k.kind,l=k.last;l&&l.removed;)l=l.previous;return k.target&&(k.last=l=l?l.next:k.state.first)?"keys"===e?wd(l.key,!1):"values"===e?wd(l.value,!1):wd([l.key,l.value],!1):(k.target=null,wd(void 0,!0))},d?"entries":"values",!d,!0);Gj(c)}});var Qh={},wg=Map.prototype,
Tn=(Qh={Map,set:mb(wg.set),get:mb(wg.get),has:mb(wg.has),remove:mb(wg.delete),proto:wg}).Map,cs=Qh.has,ds=Qh.get,es=Qh.set,fs=mb([].push),gs=zc||Mb(function(){return 1!==Tn.groupBy("ab",function(a){return a}).get("a").length});Bb({target:"Map",stat:!0,forced:zc||gs},{groupBy:function(a,c){Je(a);Sc(c);var d=new Tn,b=0;return Wd(a,function(g){var p=c(g,b++);cs(d,p)?fs(ds(d,p),g):es(d,p,[g])}),d}});Re.Map;Yj("Set",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},Qn);
var Un={},te={},Ec={},Rh=Set.prototype,hs=(Ec={Set,add:mb(Rh.add),has:mb(Rh.has),remove:mb(Rh.delete),proto:Rh}).has;te=function(a){return hs(a),a};var Sh={},Hf={},ue={};ue=function(a,c,d){var b;d=d?a:a.iterator;for(a=a.next;!(b=Qb(a,d)).done;)if(void 0!==(b=c(b.value)))return b};var is=Ec.Set,Vn=Ec.proto,js=mb(Vn.forEach),Wn=mb(Vn.keys),ks=Wn(new is).next;Hf=function(a,c,d){return d?ue({iterator:Wn(a),next:ks},c):js(a,c)};var ls=Ec.Set,ms=Ec.add;Sh=function(a){var c=new ls;return Hf(a,function(d){ms(c,
d)}),c};var If={};If=Aj(Ec.proto,"size","get")||function(a){return a.size};var ve={},Xn={};Xn=function(a){return{iterator:a,next:a.next,done:!1}};var ns=RangeError,os=TypeError,ps=Math.max,Yn=function(a,c){this.set=a;this.size=ps(c,0);this.has=Sc(a.has);this.keys=Sc(a.keys)};Yn.prototype={getIterator:function(){return Xn(mc(Qb(this.keys,this.set)))},includes:function(a){return Qb(this.has,this.set,a)}};ve=function(a){mc(a);var c=+a.size;if(c!=c)throw new os("Invalid size");c=kg(c);if(0>c)throw new ns("Invalid size");
return new Yn(a,c)};var qs=Ec.has,Zn=Ec.remove;Un=function(a){var c=te(this),d=ve(a),b=Sh(c);return If(c)<=d.size?Hf(c,function(g){d.includes(g)&&Zn(b,g)}):ue(d.getIterator(),function(g){qs(c,g)&&Zn(b,g)}),b};var We={},$n=function(a){return{size:a,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};Bb({target:"Set",proto:!0,real:!0,forced:!(We=function(a){var c=Cc("Set");try{(new c)[a]($n(0));try{return(new c)[a]($n(-1)),!1}catch(d){return!0}}catch(d){return!1}})("difference")},
{difference:Un});var ao={},rs=Ec.Set,bo=Ec.add,ss=Ec.has;ao=function(a){var c=te(this),d=ve(a),b=new rs;return If(c)>d.size?ue(d.getIterator(),function(g){ss(c,g)&&bo(b,g)}):Hf(c,function(g){d.includes(g)&&bo(b,g)}),b};var ts=!We("intersection")||Mb(function(){return"3,2"!==String(Array.from((new Set([1,2,3])).intersection(new Set([3,2]))))});Bb({target:"Set",proto:!0,real:!0,forced:ts},{intersection:ao});var co={},us=Ec.has;co=function(a){var c=te(this),d=ve(a);if(If(c)<=d.size)return!1!==Hf(c,function(g){if(d.includes(g))return!1},
!0);var b=d.getIterator();return!1!==ue(b,function(g){if(us(c,g))return tg(b,"normal",!1)})};Bb({target:"Set",proto:!0,real:!0,forced:!We("isDisjointFrom")},{isDisjointFrom:co});var eo={};eo=function(a){var c=te(this),d=ve(a);return!(If(c)>d.size)&&!1!==Hf(c,function(b){if(!d.includes(b))return!1},!0)};Bb({target:"Set",proto:!0,real:!0,forced:!We("isSubsetOf")},{isSubsetOf:eo});var fo={},vs=Ec.has;fo=function(a){var c=te(this);a=ve(a);if(If(c)<a.size)return!1;var d=a.getIterator();return!1!==ue(d,
function(b){if(!vs(c,b))return tg(d,"normal",!1)})};Bb({target:"Set",proto:!0,real:!0,forced:!We("isSupersetOf")},{isSupersetOf:fo});var go={},ws=Ec.add,xs=Ec.has,ys=Ec.remove;go=function(a){var c=te(this);a=ve(a).getIterator();var d=Sh(c);return ue(a,function(b){xs(c,b)?ys(d,b):ws(d,b)}),d};Bb({target:"Set",proto:!0,real:!0,forced:!We("symmetricDifference")},{symmetricDifference:go});var ho={},zs=Ec.add;ho=function(a){var c=te(this);a=ve(a).getIterator();var d=Sh(c);return ue(a,function(b){zs(d,
b)}),d};Bb({target:"Set",proto:!0,real:!0,forced:!We("union")},{union:ho});Re.Set;var Jf={},io={};io="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView;var jo=$c.enforce,As=$c.get,Th=Fa.Int8Array,ek=Th&&Th.prototype,ko=Fa.Uint8ClampedArray,lo=ko&&ko.prototype,Ld=Th&&Kd(Th),xd=ek&&Kd(ek),Bs=Object.prototype,fk=Fa.TypeError,mo=bc("toStringTag"),gk=Pe("TYPED_ARRAY_TAG"),$d=io&&!!Dc&&"Opera"!==Td(Fa.opera),no=!1,ae={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,
Uint32Array:4,Float32Array:4,Float64Array:8},hk={BigInt64Array:8,BigUint64Array:8},oo=function(a){a=Kd(a);if(Rb(a)){var c=As(a);return c&&jb(c,"TypedArrayConstructor")?c.TypedArrayConstructor:oo(a)}},po=function(a){if(!Rb(a))return!1;a=Td(a);return jb(ae,a)||jb(hk,a)};for(Yc in ae)(gh=(pf=Fa[Yc])&&pf.prototype)?jo(gh).TypedArrayConstructor=pf:$d=!1;for(Yc in hk)(gh=(pf=Fa[Yc])&&pf.prototype)&&(jo(gh).TypedArrayConstructor=pf);if((!$d||!Ab(Ld)||Ld===Function.prototype)&&(Ld=function(){throw new fk("Incorrect invocation");
},$d))for(Yc in ae)Fa[Yc]&&Dc(Fa[Yc],Ld);if((!$d||!xd||xd===Bs)&&(xd=Ld.prototype,$d))for(Yc in ae)Fa[Yc]&&Dc(Fa[Yc].prototype,xd);if($d&&Kd(lo)!==xd&&Dc(lo,xd),Kb&&!jb(xd,mo))for(Yc in no=!0,yf(xd,mo,{configurable:!0,get:function(){return Rb(this)?this[gk]:void 0}}),ae)Fa[Yc]&&md(Fa[Yc],gk,Yc);var qo={},Cs=(Jf={NATIVE_ARRAY_BUFFER_VIEWS:$d,TYPED_ARRAY_TAG:no&&gk,aTypedArray:function(a){if(po(a))return a;throw new fk("Target is not a typed array");},aTypedArrayConstructor:function(a){if(Ab(a)&&(!Dc||
Qd(Ld,a)))return a;throw new fk(Ne(a)+" is not a typed array constructor");},exportTypedArrayMethod:function(a,c,d,b){if(Kb){if(d)for(var g in ae){var p=Fa[g];if(p&&jb(p.prototype,a))try{delete p.prototype[a]}catch(k){try{p.prototype[a]=c}catch(e){}}}xd[a]&&!d||nc(xd,a,d?c:$d&&ek[a]||c,b)}},exportTypedArrayStaticMethod:function(a,c,d){var b,g;if(Kb){if(Dc){if(d)for(b in ae)if((g=Fa[b])&&jb(g,a))try{delete g[a]}catch(p){}if(Ld[a]&&!d)return;try{return nc(Ld,a,d?c:$d&&Ld[a]||c)}catch(p){}}for(b in ae)(g=
Fa[b])&&(!g[a]||d)&&nc(g,a,c)}},getTypedArrayConstructor:oo,isView:function(a){if(!Rb(a))return!1;a=Td(a);return"DataView"===a||jb(ae,a)||jb(hk,a)},isTypedArray:po,TypedArray:Ld,TypedArrayPrototype:xd}).aTypedArrayConstructor,Ds=Jf.getTypedArrayConstructor;qo=function(a){return Cs(Hh(a,Ds(a)))};var Es=Jf.aTypedArray;(0,Jf.exportTypedArrayMethod)("slice",function(a,c){a=xf(Es(this),a,c);var d=qo(this);c=0;var b=a.length;for(d=new d(b);b>c;)d[c]=a[c++];return d},Mb(function(){(new Int8Array(1)).slice()}));
var ik={};ik=function(a){var c=Oe(this),d=vf(c),b=arguments.length,g=oh(1<b?arguments[1]:void 0,d);b=2<b?arguments[2]:void 0;for(d=void 0===b?d:oh(b,d);d>g;)c[g++]=a;return c};var ro={},Fs=TypeError;ro=function(a){a=Oi(a,"number");if("number"==typeof a)throw new Fs("Can't convert number to bigint");return BigInt(a)};var Gs=Jf.aTypedArray,Hs=Jf.exportTypedArrayMethod,Is=mb("".slice);Hs("fill",function(a){var c=arguments.length;Gs(this);var d="Big"===Is(Td(this),0,3)?ro(a):+a;return Qb(ik,this,d,1<
c?arguments[1]:void 0,2<c?arguments[2]:void 0)},Mb(function(){var a=0;return(new Int8Array(2)).fill({valueOf:function(){return a++}}),1!==a}));var jk={};(jk=function(a,c){return mb(Fa[a].prototype[c])})("Array","values");Bb({target:"Array",proto:!0},{fill:ik});rg("fill");jk("Array","fill");var Js=fg,so={},to={},Ks=bc("match");to=function(a){var c;return Rb(a)&&(void 0!==(c=a[Ks])?!!c:"RegExp"===Zc(a))};var Ls=TypeError;so=function(a){if(to(a))throw new Ls("The method doesn't accept regular expressions");
return a};var uo={},Ms=bc("match");uo=function(a){var c=/./;try{"/./"[a](c)}catch(d){try{return c[Ms]=!1,"/./"[a](c)}catch(b){}}return!1};var Ns=kj("".slice),Os=Math.min,vo=uo("endsWith"),Ps=!zc&&!vo&&!(!(wl=Js(String.prototype,"endsWith"))||wl.writable);Bb({target:"String",proto:!0,forced:!Ps&&!vo},{endsWith:function(a){var c=Jd(Je(this));so(a);var d=1<arguments.length?arguments[1]:void 0,b=c.length;d=void 0===d?b:Os(bj(d),b);b=Jd(a);return Ns(c,d-b.length,d)===b}});jk("String","endsWith");var ia=
{};var kk="undefined"!=typeof window?window:ia;var Hk=function(a,c){function d(f,t,w){var y,B,E=(w=w||Za).createElement("script");if(E.text=f,t)for(y in rd)(B=t[y]||t.getAttribute&&t.getAttribute(y))&&E.setAttribute(y,B);w.head.appendChild(E).parentNode.removeChild(E)}function b(f){return null==f?f+"":"object"==typeof f||"function"==typeof f?yb[$b.call(f)]||"object":typeof f}function g(f){var t=!!f&&"length"in f&&f.length,w=b(f);return!(fb(f)||hc(f))&&("array"===w||0===t||"number"==typeof t&&0<t&&
t-1 in f)}function p(f,t){return f.nodeName&&f.nodeName.toLowerCase()===t.toLowerCase()}function k(f,t){return t?"\x00"===f?"\ufffd":f.slice(0,-1)+"\\"+f.charCodeAt(f.length-1).toString(16)+" ":"\\"+f}function e(f,t,w){return fb(t)?A.grep(f,function(y,B){return!!t.call(y,B,y)!==w}):t.nodeType?A.grep(f,function(y){return y===t!==w}):"string"!=typeof t?A.grep(f,function(y){return-1<cc.call(t,y)!==w}):A.filter(t,f,w)}function l(f,t){for(;(f=f[t])&&1!==f.nodeType;);return f}function m(f){return f}function h(f){throw f;
}function n(f,t,w,y){var B;try{f&&fb(B=f.promise)?B.call(f).done(t).fail(w):f&&fb(B=f.then)?B.call(f,t,w):t.apply(void 0,[f].slice(y))}catch(E){w.apply(void 0,[E])}}function r(){Za.removeEventListener("DOMContentLoaded",r);a.removeEventListener("load",r);A.ready()}function u(f,t){return t.toUpperCase()}function v(f){return f.replace(za,"ms-").replace(db,u)}function x(){this.expando=A.expando+x.uid++}function C(f,t,w){var y;if(void 0===w&&1===f.nodeType)if(y="data-"+t.replace(xc,"-$&").toLowerCase(),
"string"==typeof(w=f.getAttribute(y))){try{var B=w;w="true"===B||"false"!==B&&("null"===B?null:B===+B+""?+B:ec.test(B)?JSON.parse(B):B)}catch(E){}lb.set(f,t,w)}else w=void 0;return w}function J(f,t,w,y){var B,E,K=20,O=y?function(){return y.cur()}:function(){return A.css(f,t,"")},M=O(),W=w&&w[3]||(A.cssNumber[t]?"":"px"),Z=f.nodeType&&(A.cssNumber[t]||"px"!==W&&+M)&&La.exec(A.css(f,t));if(Z&&Z[3]!==W){M/=2;W=W||Z[3];for(Z=+M||1;K--;)A.style(f,t,Z+W),0>=(1-E)*(1-(E=O()/M||.5))&&(K=0),Z/=E;Z*=2;A.style(f,
t,Z+W);w=w||[]}return w&&(Z=+Z||+M||0,B=w[1]?Z+(w[1]+1)*w[2]:+w[2],y&&(y.unit=W,y.start=Z,y.end=B)),B}function H(f,t){for(var w,y,B=[],E=0,K=f.length;E<K;E++)if((y=f[E]).style)if(w=y.style.display,t){if("none"!==w||(B[E]=Da.get(y,"display")||null,B[E]||(y.style.display="")),""===y.style.display&&Qc(y)){w=E;var O=void 0;var M=y.ownerDocument;y=y.nodeName;var W=Kf[y];M=(W||(O=M.body.appendChild(M.createElement(y)),W=A.css(O,"display"),O.parentNode.removeChild(O),"none"===W&&(W="block"),Kf[y]=W),W);
B[w]=M}}else"none"!==w&&(B[E]="none",Da.set(y,"display",w));for(E=0;E<K;E++)null!=B[E]&&(f[E].style.display=B[E]);return f}function G(f,t){var w;return(w=void 0!==f.getElementsByTagName?f.getElementsByTagName(t||"*"):void 0!==f.querySelectorAll?f.querySelectorAll(t||"*"):[],void 0===t||t&&p(f,t))?A.merge([f],w):w}function L(f,t){for(var w=0,y=f.length;w<y;w++)Da.set(f[w],"globalEval",!t||Da.get(t[w],"globalEval"))}function U(f,t,w,y,B){for(var E,K,O,M,W=t.createDocumentFragment(),Z=[],R=0,oa=f.length;R<
oa;R++)if((E=f[R])||0===E)if("object"===b(E))A.merge(Z,E.nodeType?[E]:E);else if(xg.test(E)){K=K||W.appendChild(t.createElement("div"));O=Uc[(Uh.exec(E)||["",""])[1].toLowerCase()]||Uc._default;K.innerHTML=O[1]+A.htmlPrefilter(E)+O[2];for(O=O[0];O--;)K=K.lastChild;A.merge(Z,K.childNodes);(K=W.firstChild).textContent=""}else Z.push(t.createTextNode(E));W.textContent="";for(R=0;E=Z[R++];)if(y&&-1<A.inArray(E,y))B&&B.push(E);else if(M=sb(E),K=G(W.appendChild(E),"script"),M&&L(K),w)for(O=0;E=K[O++];)yg.test(E.type||
"")&&w.push(E);return W}function T(){return!0}function Y(){return!1}function ea(f,t,w,y,B,E){var K,O;if("object"==typeof t){for(O in"string"!=typeof w&&(y=y||w,w=void 0),t)ea(f,O,w,y,t[O],E);return f}if(null==y&&null==B?(B=w,y=w=void 0):null==B&&("string"==typeof w?(B=y,y=void 0):(B=y,y=w,w=void 0)),!1===B)B=Y;else if(!B)return f;return 1===E&&(K=B,(B=function(M){return A().off(M),K.apply(this,arguments)}).guid=K.guid||(K.guid=A.guid++)),f.each(function(){A.event.add(this,t,B,y,w)})}function ja(f,
t,w){w?(Da.set(f,t,!1),A.event.add(f,t,{namespace:!1,handler:function(y){var B,E=Da.get(this,t);if(1&y.isTrigger&&this[t])if(E)(A.event.special[t]||{}).delegateType&&y.stopPropagation();else{if(E=nb.call(arguments),Da.set(this,t,E),this[t](),B=Da.get(this,t),Da.set(this,t,!1),E!==B)return y.stopImmediatePropagation(),y.preventDefault(),B}else E&&(Da.set(this,t,A.event.trigger(E[0],E.slice(1),this)),y.stopPropagation(),y.isImmediatePropagationStopped=T)}})):void 0===Da.get(f,t)&&A.event.add(f,t,T)}
function ra(f,t){return p(f,"table")&&p(11!==t.nodeType?t:t.firstChild,"tr")&&A(f).children("tbody")[0]||f}function Oa(f){return f.type=(null!==f.getAttribute("type"))+"/"+f.type,f}function V(f){return"true/"===(f.type||"").slice(0,5)?f.type=f.type.slice(5):f.removeAttribute("type"),f}function Ga(f,t){var w,y,B,E,K;if(1===t.nodeType){if(Da.hasData(f)&&(K=Da.get(f).events))for(y in Da.remove(t,"handle events"),K){var O=0;for(w=K[y].length;O<w;O++)A.event.add(t,y,K[y][O])}lb.hasData(f)&&(B=lb.access(f),
E=A.extend({},B),lb.set(t,E))}}function qa(f,t,w,y){t=ub(t);var B,E,K,O=0,M=f.length,W=M-1,Z=t[0],R=fb(Z);if(R||1<M&&"string"==typeof Z&&!Wa.checkClone&&lk.test(Z))return f.each(function(ta){var wa=f.eq(ta);R&&(t[0]=Z.call(this,ta,wa.html()));qa(wa,t,w,y)});if(M&&(E=(B=U(t,f[0].ownerDocument,!1,f,y)).firstChild,1===B.childNodes.length&&(B=E),E||y)){for(K=(E=A.map(G(B,"script"),Oa)).length;O<M;O++){var oa=B;O!==W&&(oa=A.clone(oa,!0,!0),K&&A.merge(E,G(oa,"script")));w.call(f[O],oa,O)}if(K)for(B=E[E.length-
1].ownerDocument,A.map(E,V),O=0;O<K;O++)oa=E[O],yg.test(oa.type||"")&&!Da.access(oa,"globalEval")&&A.contains(B,oa)&&(oa.src&&"module"!==(oa.type||"").toLowerCase()?A._evalUrl&&!oa.noModule&&A._evalUrl(oa.src,{nonce:oa.nonce||oa.getAttribute("nonce")},B):d(oa.textContent.replace(mk,""),oa,B))}return f}function pb(f,t,w){for(var y=t?A.filter(t,f):f,B=0;null!=(t=y[B]);B++)w||1!==t.nodeType||A.cleanData(G(t)),t.parentNode&&(w&&sb(t)&&L(G(t,"script")),t.parentNode.removeChild(t));return f}function Ya(f,
t,w){var y,B,E,K,O=Lf.test(t),M=f.style;return(w=w||Mf(f))&&(K=w.getPropertyValue(t)||w[t],O&&K&&(K=K.replace(gc,"$1")||void 0),""!==K||sb(f)||(K=A.style(f,t)),!Wa.pixelBoxStyles()&&Xe.test(K)&&nk.test(t)&&(y=M.width,B=M.minWidth,E=M.maxWidth,M.minWidth=M.maxWidth=M.width=K,K=w.width,M.width=y,M.minWidth=B,M.maxWidth=E)),void 0!==K?K+"":K}function Ub(f,t){return{get:function(){if(f())delete this.get;else return(this.get=t).apply(this,arguments)}}}function Lb(f){var t;if(!(t=A.cssProps[f]||Vh[f])){if(!(f in
Wh)){a:{t=f;for(var w=t[0].toUpperCase()+t.slice(1),y=Xh.length;y--;)if((t=Xh[y]+w)in Wh)break a;t=void 0}f=Vh[f]=t||f}t=f}return t}function Ka(f,t,w){return(f=La.exec(t))?Math.max(0,f[2]-(w||0))+(f[3]||"px"):t}function Ma(f,t,w,y,B,E){var K="width"===t?1:0,O=0,M=0,W=0;if(w===(y?"border":"content"))return 0;for(;4>K;K+=2)"margin"===w&&(W+=A.css(f,w+Sa[K],!0,B)),y?("content"===w&&(M-=A.css(f,"padding"+Sa[K],!0,B)),"margin"!==w&&(M-=A.css(f,"border"+Sa[K]+"Width",!0,B))):(M+=A.css(f,"padding"+Sa[K],
!0,B),"padding"!==w?M+=A.css(f,"border"+Sa[K]+"Width",!0,B):O+=A.css(f,"border"+Sa[K]+"Width",!0,B));return!y&&0<=E&&(M+=Math.max(0,Math.ceil(f["offset"+t[0].toUpperCase()+t.slice(1)]-E-M-O-.5))||0),M+W}function ka(f,t,w){var y=Mf(f),B=(!Wa.boxSizingReliable()||w)&&"border-box"===A.css(f,"boxSizing",!1,y),E=B,K=Ya(f,t,y),O="offset"+t[0].toUpperCase()+t.slice(1);if(Xe.test(K)){if(!w)return K;K="auto"}return(!Wa.boxSizingReliable()&&B||!Wa.reliableTrDimensions()&&p(f,"tr")||"auto"===K||!parseFloat(K)&&
"inline"===A.css(f,"display",!1,y))&&f.getClientRects().length&&(B="border-box"===A.css(f,"boxSizing",!1,y),(E=O in f)&&(K=f[O])),(K=parseFloat(K)||0)+Ma(f,t,w||(B?"border":"content"),E,y,K)+"px"}function Ba(f,t,w,y,B){return new Ba.prototype.init(f,t,w,y,B)}function ya(){return a.setTimeout(function(){we=void 0}),we=Date.now()}function ha(f,t){var w,y=0,B={height:f};for(t=t?1:0;4>y;y+=2-t)B["margin"+(w=Sa[y])]=B["padding"+w]=f;return t&&(B.opacity=B.width=f),B}function Pa(f,t,w){for(var y,B=(pa.tweeners[t]||
[]).concat(pa.tweeners["*"]),E=0,K=B.length;E<K;E++)if(y=B[E].call(w,t,f))return y}function pa(f,t,w){var y,B=0,E=pa.prefilters.length,K=A.Deferred().always(function(){delete O.elem}),O=function(){if(y)return!1;var W=we||ya();W=Math.max(0,M.startTime+M.duration-W);for(var Z=1-(W/M.duration||0),R=0,oa=M.tweens.length;R<oa;R++)M.tweens[R].run(Z);return(K.notifyWith(f,[M,Z,W]),1>Z&&oa)?W:(oa||K.notifyWith(f,[M,1,0]),K.resolveWith(f,[M]),!1)},M=K.promise({elem:f,props:A.extend({},t),opts:A.extend(!0,
{specialEasing:{},easing:A.easing._default},w),originalProperties:t,originalOptions:w,startTime:we||ya(),duration:w.duration,tweens:[],createTween:function(W,Z){W=A.Tween(f,M.opts,W,Z,M.opts.specialEasing[W]||M.opts.easing);return M.tweens.push(W),W},stop:function(W){var Z=0,R=W?M.tweens.length:0;if(y)return this;for(y=!0;Z<R;Z++)M.tweens[Z].run(1);return W?(K.notifyWith(f,[M,1,0]),K.resolveWith(f,[M,W])):K.rejectWith(f,[M,W]),this}});w=M.props;(function(W,Z){var R,oa,ta,wa,Aa;for(R in W)if(ta=Z[oa=
v(R)],Array.isArray(wa=W[R])&&(ta=wa[1],wa=W[R]=wa[0]),R!==oa&&(W[oa]=wa,delete W[R]),(Aa=A.cssHooks[oa])&&"expand"in Aa)for(R in wa=Aa.expand(wa),delete W[oa],wa)R in W||(W[R]=wa[R],Z[R]=ta);else Z[oa]=ta})(w,M.opts.specialEasing);for(;B<E;B++)if(t=pa.prefilters[B].call(M,f,w,M.opts))return fb(t.stop)&&(A._queueHooks(M.elem,M.opts.queue).stop=t.stop.bind(t)),t;return A.map(w,Pa,M),fb(M.opts.start)&&M.opts.start.call(f,M),M.progress(M.opts.progress).done(M.opts.done,M.opts.complete).fail(M.opts.fail).always(M.opts.always),
A.fx.timer(A.extend(O,{elem:f,anim:M,queue:M.opts.queue})),M}function Ua(f){return(f.match(N)||[]).join(" ")}function Ja(f){return f.getAttribute&&f.getAttribute("class")||""}function ob(f){return Array.isArray(f)?f:"string"==typeof f&&f.match(N)||[]}function lc(f){return function(t,w){"string"!=typeof t&&(w=t,t="*");var y=0,B=t.toLowerCase().match(N)||[];if(fb(w))for(;t=B[y++];)"+"===t[0]?(f[t=t.slice(1)||"*"]=f[t]||[]).unshift(w):(f[t]=f[t]||[]).push(w)}}function wc(f,t,w,y){function B(O){var M;
return E[O]=!0,A.each(f[O]||[],function(W,Z){W=Z(t,w,y);return"string"!=typeof W||K||E[W]?K?!(M=W):void 0:(t.dataTypes.unshift(W),B(W),!1)}),M}var E={},K=f===Ye;return B(t.dataTypes[0])||!E["*"]&&B("*")}function Wb(f,t){var w,y,B=A.ajaxSettings.flatOptions||{};for(w in t)void 0!==t[w]&&((B[w]?f:y||={})[w]=t[w]);return y&&A.extend(!0,f,y),f}var Ib,vb=[],fc=Object.getPrototypeOf,nb=vb.slice,ub=vb.flat?function(f){return vb.flat.call(f)}:function(f){return vb.concat.apply([],f)},ib=vb.push,cc=vb.indexOf,
yb={},$b=yb.toString,Pb=yb.hasOwnProperty,ed=Pb.toString,qc=ed.call(Object),Wa={},fb=function(f){return"function"==typeof f&&"number"!=typeof f.nodeType&&"function"!=typeof f.item},hc=function(f){return null!=f&&f===f.window},Za=a.document,rd={type:!0,src:!0,nonce:!0,noModule:!0},sd=/HTML$/i,A=function(f,t){return new A.fn.init(f,t)};A.fn=A.prototype={jquery:"3.7.1",constructor:A,length:0,toArray:function(){return nb.call(this)},get:function(f){return null==f?nb.call(this):0>f?this[f+this.length]:
this[f]},pushStack:function(f){f=A.merge(this.constructor(),f);return f.prevObject=this,f},each:function(f){return A.each(this,f)},map:function(f){return this.pushStack(A.map(this,function(t,w){return f.call(t,w,t)}))},slice:function(){return this.pushStack(nb.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,function(f,t){return(t+1)%2}))},odd:function(){return this.pushStack(A.grep(this,function(f,t){return t%
2}))},eq:function(f){var t=this.length;f=+f+(0>f?t:0);return this.pushStack(0<=f&&f<t?[this[f]]:[])},end:function(){return this.prevObject||this.constructor()},push:ib,sort:vb.sort,splice:vb.splice};A.extend=A.fn.extend=function(){var f,t,w,y,B,E=arguments[0]||{},K=1,O=arguments.length,M=!1;"boolean"==typeof E&&(M=E,E=arguments[K]||{},K++);"object"==typeof E||fb(E)||(E={});for(K===O&&(E=this,K--);K<O;K++)if(null!=(f=arguments[K]))for(t in f){var W=f[t];"__proto__"!==t&&E!==W&&(M&&W&&(A.isPlainObject(W)||
(y=Array.isArray(W)))?(w=E[t],B=y&&!Array.isArray(w)?[]:y||A.isPlainObject(w)?w:{},y=!1,E[t]=A.extend(M,B,W)):void 0!==W&&(E[t]=W))}return E};A.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(f){throw Error(f);},noop:function(){},isPlainObject:function(f){var t,w;return!!f&&"[object Object]"===$b.call(f)&&(!(t=fc(f))||"function"==typeof(w=Pb.call(t,"constructor")&&t.constructor)&&ed.call(w)===qc)},isEmptyObject:function(f){for(var t in f)return!1;return!0},
globalEval:function(f,t,w){d(f,{nonce:t&&t.nonce},w)},each:function(f,t){var w,y=0;if(g(f))for(w=f.length;y<w&&!1!==t.call(f[y],y,f[y]);y++);else for(y in f)if(!1===t.call(f[y],y,f[y]))break;return f},text:function(f){var t,w="",y=0,B=f.nodeType;if(!B)for(;t=f[y++];)w+=A.text(t);return 1===B||11===B?f.textContent:9===B?f.documentElement.textContent:3===B||4===B?f.nodeValue:w},makeArray:function(f,t){t=t||[];return null!=f&&(g(Object(f))?A.merge(t,"string"==typeof f?[f]:f):ib.call(t,f)),t},inArray:function(f,
t,w){return null==t?-1:cc.call(t,f,w)},isXMLDoc:function(f){var t=f&&(f.ownerDocument||f).documentElement;return!sd.test(f&&f.namespaceURI||t&&t.nodeName||"HTML")},merge:function(f,t){for(var w=+t.length,y=0,B=f.length;y<w;y++)f[B++]=t[y];return f.length=B,f},grep:function(f,t,w){var y=[],B=0,E=f.length;for(w=!w;B<E;B++)!t(f[B],B)!==w&&y.push(f[B]);return y},map:function(f,t,w){var y,B,E=0,K=[];if(g(f))for(y=f.length;E<y;E++)null!=(B=t(f[E],E,w))&&K.push(B);else for(E in f)null!=(B=t(f[E],E,w))&&
K.push(B);return ub(K)},guid:1,support:Wa});"function"==typeof Symbol&&(A.fn[Symbol.iterator]=vb[Symbol.iterator]);A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(f,t){yb["[object "+t+"]"]=t.toLowerCase()});var ua=vb.pop,Kc=vb.sort,kd=vb.splice,gc=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");A.contains=function(f,t){t=t&&t.parentNode;return f===t||!!(t&&1===t.nodeType&&(f.contains?f.contains(t):f.compareDocumentPosition&&
16&f.compareDocumentPosition(t)))};var Fd=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;A.escapeSelector=function(f){return(f+"").replace(Fd,k)};(function(){function f(Q,aa,ba,sa){var Ha,kb,bb,xb,eb=aa&&aa.ownerDocument;var Eb=aa?aa.nodeType:9;if(ba=ba||[],"string"!=typeof Q||!Q||1!==Eb&&9!==Eb&&11!==Eb)return ba;if(!sa&&(O(aa),aa=aa||$a,cb)){if(11!==Eb&&(xb=Qs.exec(Q)))if(Ha=xb[1])if(9===Eb){if(!(kb=aa.getElementById(Ha)))return ba;if(kb.id===Ha)return Sb.call(ba,kb),ba}else{if(eb&&(kb=eb.getElementById(Ha))&&
f.contains(aa,kb)&&kb.id===Ha)return Sb.call(ba,kb),ba}else{if(xb[2])return Sb.apply(ba,aa.getElementsByTagName(Q)),ba;if((Ha=xb[3])&&aa.getElementsByClassName)return Sb.apply(ba,aa.getElementsByClassName(Ha)),ba}if(!(uc[Q+" "]||Fb&&Fb.test(Q))){if(Ha=Q,eb=aa,1===Eb&&(Fc.test(Q)||Xb.test(Q))){(eb=ok.test(Q)&&K(aa.parentNode)||aa)==aa&&Wa.scope||((bb=aa.getAttribute("id"))?bb=A.escapeSelector(bb):aa.setAttribute("id",bb=Nb));for(Eb=(Ha=W(Q)).length;Eb--;)Ha[Eb]=(bb?"#"+bb:":scope")+" "+Z(Ha[Eb]);Ha=
Ha.join(",")}try{return Sb.apply(ba,eb.querySelectorAll(Ha)),ba}catch(Cb){uc(Q,!0)}finally{bb===Nb&&aa.removeAttribute("id")}}}return Aa(Q.replace(gc,"$1"),aa,ba,sa)}function t(){var Q=[];return function Ha(ba,sa){return Q.push(ba+" ")>Va.cacheLength&&delete Ha[Q.shift()],Ha[ba+" "]=sa}}function w(Q){return Q[Nb]=!0,Q}function y(Q){var aa=$a.createElement("fieldset");try{return!!Q(aa)}catch(ba){return!1}finally{aa.parentNode&&aa.parentNode.removeChild(aa)}}function B(Q){return function(aa){return"form"in
aa?aa.parentNode&&!1===aa.disabled?"label"in aa?"label"in aa.parentNode?aa.parentNode.disabled===Q:aa.disabled===Q:aa.isDisabled===Q||!Q!==aa.isDisabled&&Rs(aa)===Q:aa.disabled===Q:"label"in aa&&aa.disabled===Q}}function E(Q){return w(function(aa){return aa=+aa,w(function(ba,sa){for(var Ha,kb=Q([],ba.length,aa),bb=kb.length;bb--;)ba[Ha=kb[bb]]&&(ba[Ha]=!(sa[Ha]=ba[Ha]))})})}function K(Q){return Q&&void 0!==Q.getElementsByTagName&&Q}function O(Q){var aa;Q=Q?Q.ownerDocument||Q:Za;return Q!=$a&&9===
Q.nodeType&&Q.documentElement&&(Qa=($a=Q).documentElement,cb=!A.isXMLDoc($a),cd=Qa.matches||Qa.webkitMatchesSelector||Qa.msMatchesSelector,Qa.msMatchesSelector&&Za!=$a&&(aa=$a.defaultView)&&aa.top!==aa&&aa.addEventListener("unload",Ss),Wa.getById=y(function(ba){return Qa.appendChild(ba).id=A.expando,!$a.getElementsByName||!$a.getElementsByName(A.expando).length}),Wa.disconnectedMatch=y(function(ba){return cd.call(ba,"*")}),Wa.scope=y(function(){return $a.querySelectorAll(":scope")}),Wa.cssHas=y(function(){try{return $a.querySelector(":has(*,:jqfake)"),
!1}catch(ba){return!0}}),Wa.getById?(Va.filter.ID=function(ba){var sa=ba.replace(be,ce);return function(Ha){return Ha.getAttribute("id")===sa}},Va.find.ID=function(ba,sa){if(void 0!==sa.getElementById&&cb)return(ba=sa.getElementById(ba))?[ba]:[]}):(Va.filter.ID=function(ba){var sa=ba.replace(be,ce);return function(Ha){return(Ha=void 0!==Ha.getAttributeNode&&Ha.getAttributeNode("id"))&&Ha.value===sa}},Va.find.ID=function(ba,sa){if(void 0!==sa.getElementById&&cb){var Ha,kb=sa.getElementById(ba);if(kb){if((Ha=
kb.getAttributeNode("id"))&&Ha.value===ba)return[kb];var bb=sa.getElementsByName(ba);for(sa=0;kb=bb[sa++];)if((Ha=kb.getAttributeNode("id"))&&Ha.value===ba)return[kb]}return[]}}),Va.find.TAG=function(ba,sa){return void 0!==sa.getElementsByTagName?sa.getElementsByTagName(ba):sa.querySelectorAll(ba)},Va.find.CLASS=function(ba,sa){if(void 0!==sa.getElementsByClassName&&cb)return sa.getElementsByClassName(ba)},Fb=[],y(function(ba){var sa;Qa.appendChild(ba).innerHTML="<a id='"+Nb+"' href='' disabled='disabled'></a><select id='"+
Nb+"-\r\\' disabled='disabled'><option selected=''></option></select>";ba.querySelectorAll("[selected]").length||Fb.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");ba.querySelectorAll("[id~="+Nb+"-]").length||Fb.push("~=");ba.querySelectorAll("a#"+Nb+"+*").length||Fb.push(".#.+[+~]");ba.querySelectorAll(":checked").length||Fb.push(":checked");(sa=$a.createElement("input")).setAttribute("type",
"hidden");ba.appendChild(sa).setAttribute("name","D");Qa.appendChild(ba).disabled=!0;2!==ba.querySelectorAll(":disabled").length&&Fb.push(":enabled",":disabled");(sa=$a.createElement("input")).setAttribute("name","");ba.appendChild(sa);ba.querySelectorAll("[name='']").length||Fb.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")")}),Wa.cssHas||Fb.push(":has"),Fb=Fb.length&&new RegExp(Fb.join("|")),hd=function(ba,sa){if(ba===sa)return Ta=!0,0;var Ha=!ba.compareDocumentPosition-
!sa.compareDocumentPosition;return Ha||(1&(Ha=(ba.ownerDocument||ba)==(sa.ownerDocument||sa)?ba.compareDocumentPosition(sa):1)||!Wa.sortDetached&&sa.compareDocumentPosition(ba)===Ha?ba===$a||ba.ownerDocument==Za&&f.contains(Za,ba)?-1:sa===$a||sa.ownerDocument==Za&&f.contains(Za,sa)?1:wb?cc.call(wb,ba)-cc.call(wb,sa):0:4&Ha?-1:1)}),$a}function M(){}function W(Q,aa){var ba,sa,Ha,kb,bb,xb;if(bb=Nc[Q+" "])return aa?0:bb.slice(0);bb=Q;var eb=[];for(xb=Va.preFilter;bb;){for(kb in(!ba||(sa=jc.exec(bb)))&&
(sa&&(bb=bb.slice(sa[0].length)||bb),eb.push(Ha=[])),ba=!1,(sa=Xb.exec(bb))&&(ba=sa.shift(),Ha.push({value:ba,type:sa[0].replace(gc," ")}),bb=bb.slice(ba.length)),Va.filter)(sa=id[kb].exec(bb))&&(!xb[kb]||(sa=xb[kb](sa)))&&(ba=sa.shift(),Ha.push({value:ba,type:kb,matches:sa}),bb=bb.slice(ba.length));if(!ba)break}return aa?bb.length:bb?f.error(Q):Nc(Q,eb).slice(0)}function Z(Q){for(var aa=0,ba=Q.length,sa="";aa<ba;aa++)sa+=Q[aa].value;return sa}function R(Q,aa,ba){var sa=aa.dir,Ha=aa.next,kb=Ha||sa,
bb=ba&&"parentNode"===kb,xb=yd++;return aa.first?function(eb,Eb,Cb){for(;eb=eb[sa];)if(1===eb.nodeType||bb)return Q(eb,Eb,Cb);return!1}:function(eb,Eb,Cb){var Gc,Hb,Ob=[Hc,xb];if(Cb)for(;eb=eb[sa];){if((1===eb.nodeType||bb)&&Q(eb,Eb,Cb))return!0}else for(;eb=eb[sa];)if(1===eb.nodeType||bb)if(Hb=eb[Nb]||(eb[Nb]={}),Ha&&p(eb,Ha))eb=eb[sa]||eb;else{if((Gc=Hb[kb])&&Gc[0]===Hc&&Gc[1]===xb)return Ob[2]=Gc[2];if(Hb[kb]=Ob,Ob[2]=Q(eb,Eb,Cb))return!0}return!1}}function oa(Q){return 1<Q.length?function(aa,
ba,sa){for(var Ha=Q.length;Ha--;)if(!Q[Ha](aa,ba,sa))return!1;return!0}:Q[0]}function ta(Q,aa,ba,sa,Ha){for(var kb,bb=[],xb=0,eb=Q.length,Eb=null!=aa;xb<eb;xb++)(kb=Q[xb])&&(!ba||ba(kb,sa,Ha))&&(bb.push(kb),Eb&&aa.push(xb));return bb}function wa(Q,aa){var ba,sa,Ha,kb,bb=[],xb=[],eb=oc[Q+" "];if(!eb){aa||=W(Q);for(kb=aa.length;kb--;)(eb=function Gc(Cb){var Hb,Ob,kc=Cb.length,od=Va.relative[Cb[0].type];var Ic=od||Va.relative[" "];for(var Db=od?1:0,Ad=R(function(zd){return zd===Hb},Ic,!0),de=R(function(zd){return-1<
cc.call(Hb,zd)},Ic,!0),ye=[function(zd,pd,xe){zd=!od&&(xe||pd!=Ra)||((Hb=pd).nodeType?Ad(zd,pd,xe):de(zd,pd,xe));return Hb=null,zd}];Db<kc;Db++)if(Ic=Va.relative[Cb[Db].type])ye=[R(oa(ye),Ic)];else{if((Ic=Va.filter[Cb[Db].type].apply(null,Cb[Db].matches))[Nb]){for(Ob=++Db;Ob<kc&&!Va.relative[Cb[Ob].type];Ob++);return function wo(pd,xe,Nf,Ze,Bd,Ts){return Ze&&!Ze[Nb]&&(Ze=wo(Ze)),Bd&&!Bd[Nb]&&(Bd=wo(Bd,Ts)),w(function(Of,Pf,vc,zg){var $e,Oc,xo=[],pk=[],yo=Pf.length,Cd;if(!(Cd=Of)){Cd=xe||"*";for(var zo=
vc.nodeType?[vc]:vc,Ao=[],qk=0,Us=zo.length;qk<Us;qk++)f(Cd,zo[qk],Ao);Cd=Ao}Cd=!pd||!Of&&xe?Cd:ta(Cd,xo,pd,vc,zg);if(Nf?Nf(Cd,Oc=Bd||(Of?pd:yo||Ze)?[]:Pf,vc,zg):Oc=Cd,Ze){var ee=ta(Oc,pk);Ze(ee,[],vc,zg);for(vc=ee.length;vc--;)($e=ee[vc])&&(Oc[pk[vc]]=!(Cd[pk[vc]]=$e))}if(Of){if(Bd||pd){if(Bd){ee=[];for(vc=Oc.length;vc--;)($e=Oc[vc])&&ee.push(Cd[vc]=$e);Bd(null,Oc=[],ee,zg)}for(vc=Oc.length;vc--;)($e=Oc[vc])&&-1<(ee=Bd?cc.call(Of,$e):xo[vc])&&(Of[ee]=!(Pf[ee]=$e))}}else Oc=ta(Oc===Pf?Oc.splice(yo,
Oc.length):Oc),Bd?Bd(null,Pf,Oc,zg):Sb.apply(Pf,Oc)})}(1<Db&&oa(ye),1<Db&&Z(Cb.slice(0,Db-1).concat({value:" "===Cb[Db-2].type?"*":""})).replace(gc,"$1"),Ic,Db<Ob&&Gc(Cb.slice(Db,Ob)),Ob<kc&&Gc(Cb=Cb.slice(Ob)),Ob<kc&&Z(Cb))}ye.push(Ic)}return oa(ye)}(aa[kb]))[Nb]?bb.push(eb):xb.push(eb);(eb=oc(Q,(ba=0<bb.length,sa=0<xb.length,Ha=function(Eb,Cb,Gc,Hb,Ob){var kc,od,Ic=0,Db="0",Ad=Eb&&[],de=[],ye=Ra,zd=Eb||sa&&Va.find.TAG("*",Ob),pd=Hc+=null==ye?1:Math.random()||.1,xe=zd.length;for(Ob&&(Ra=Cb==$a||
Cb||Ob);Db!==xe&&null!=(kc=zd[Db]);Db++){if(sa&&kc){var Nf=0;for(Cb||kc.ownerDocument==$a||(O(kc),Gc=!cb);od=xb[Nf++];)if(od(kc,Cb||$a,Gc)){Sb.call(Hb,kc);break}Ob&&(Hc=pd)}ba&&((kc=!od&&kc)&&Ic--,Eb&&Ad.push(kc))}if(Ic+=Db,ba&&Db!==Ic){for(Nf=0;od=bb[Nf++];)od(Ad,de,Cb,Gc);if(Eb){if(0<Ic)for(;Db--;)Ad[Db]||de[Db]||(de[Db]=ua.call(Hb));de=ta(de)}Sb.apply(Hb,de);Ob&&!Eb&&0<de.length&&1<Ic+bb.length&&A.uniqueSort(Hb)}return Ob&&(Hc=pd,Ra=ye),Ad},ba?w(Ha):Ha))).selector=Q}return eb}function Aa(Q,aa,
ba,sa){var Ha,kb,bb,xb,eb,Eb="function"==typeof Q&&Q,Cb=!sa&&W(Q=Eb.selector||Q);if(ba=ba||[],1===Cb.length){if(2<(kb=Cb[0]=Cb[0].slice(0)).length&&"ID"===(bb=kb[0]).type&&9===aa.nodeType&&cb&&Va.relative[kb[1].type]){if(!(aa=(Va.find.ID(bb.matches[0].replace(be,ce),aa)||[])[0]))return ba;Eb&&(aa=aa.parentNode);Q=Q.slice(kb.shift().value.length)}for(Ha=id.needsContext.test(Q)?0:kb.length;Ha--&&(bb=kb[Ha],!Va.relative[xb=bb.type]);)if((eb=Va.find[xb])&&(sa=eb(bb.matches[0].replace(be,ce),ok.test(kb[0].type)&&
K(aa.parentNode)||aa))){if(kb.splice(Ha,1),!(Q=sa.length&&Z(kb)))return Sb.apply(ba,sa),ba;break}}return(Eb||wa(Q,Cb))(sa,aa,!cb,ba,!aa||ok.test(Q)&&K(aa.parentNode)||aa),ba}var Xa,Va,Ra,wb,Ta,$a,Qa,cb,Fb,cd,Sb=ib,Nb=A.expando,Hc=0,yd=0,Md=t(),Nc=t(),oc=t(),uc=t(),hd=function(Q,aa){return Q===aa&&(Ta=!0),0},Jc=RegExp("[\\x20\\t\\r\\n\\f]+","g"),jc=RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),Xb=RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),Fc=RegExp("[\\x20\\t\\r\\n\\f]|>"),
Dd=RegExp(":((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
pc=RegExp("^(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+$"),id={ID:RegExp("^#((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)"),CLASS:RegExp("^\\.((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)"),TAG:RegExp("^((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+|[*])"),ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\]"),
PSEUDO:RegExp("^:((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},Qf=/^(?:input|select|textarea|button)$/i,rk=/^h\d$/i,Qs=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ok=/[+~]/,be=RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ce=function(Q,aa){Q="0x"+Q.slice(1)-65536;return aa||(0>Q?String.fromCharCode(Q+65536):String.fromCharCode(Q>>10|55296,1023&Q|56320))},Ss=function(){O()},Rs=R(function(Q){return!0===Q.disabled&&p(Q,"fieldset")},{dir:"parentNode",next:"legend"});try{Sb.apply(vb=nb.call(Za.childNodes),Za.childNodes),vb[Za.childNodes.length].nodeType}catch(Q){Sb=
{apply:function(aa,ba){ib.apply(aa,nb.call(ba))},call:function(aa){ib.apply(aa,nb.call(arguments,1))}}}for(Xa in f.matches=function(Q,aa){return f(Q,null,null,aa)},f.matchesSelector=function(Q,aa){if(O(Q),!(!cb||uc[aa+" "]||Fb&&Fb.test(aa)))try{var ba=cd.call(Q,aa);if(ba||Wa.disconnectedMatch||Q.document&&11!==Q.document.nodeType)return ba}catch(sa){uc(aa,!0)}return 0<f(aa,$a,null,[Q]).length},f.contains=function(Q,aa){return(Q.ownerDocument||Q)!=$a&&O(Q),A.contains(Q,aa)},f.attr=function(Q,aa){(Q.ownerDocument||
Q)!=$a&&O(Q);var ba=Va.attrHandle[aa.toLowerCase()];ba=ba&&Pb.call(Va.attrHandle,aa.toLowerCase())?ba(Q,aa,!cb):void 0;return void 0!==ba?ba:Q.getAttribute(aa)},f.error=function(Q){throw Error("Syntax error, unrecognized expression: "+Q);},A.uniqueSort=function(Q){var aa,ba=[],sa=0,Ha=0;if(Ta=!Wa.sortStable,wb=!Wa.sortStable&&nb.call(Q,0),Kc.call(Q,hd),Ta){for(;aa=Q[Ha++];)aa===Q[Ha]&&(sa=ba.push(Ha));for(;sa--;)kd.call(Q,ba[sa],1)}return wb=null,Q},A.fn.uniqueSort=function(){return this.pushStack(A.uniqueSort(nb.apply(this)))},
(Va=A.expr={cacheLength:50,createPseudo:w,match:id,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Q){return Q[1]=Q[1].replace(be,ce),Q[3]=(Q[3]||Q[4]||Q[5]||"").replace(be,ce),"~="===Q[2]&&(Q[3]=" "+Q[3]+" "),Q.slice(0,4)},CHILD:function(Q){return Q[1]=Q[1].toLowerCase(),"nth"===Q[1].slice(0,3)?(Q[3]||f.error(Q[0]),Q[4]=+(Q[4]?Q[5]+(Q[6]||1):2*("even"===Q[3]||"odd"===
Q[3])),Q[5]=+(Q[7]+Q[8]||"odd"===Q[3])):Q[3]&&f.error(Q[0]),Q},PSEUDO:function(Q){var aa,ba=!Q[6]&&Q[2];return id.CHILD.test(Q[0])?null:(Q[3]?Q[2]=Q[4]||Q[5]||"":ba&&Dd.test(ba)&&(aa=W(ba,!0))&&(aa=ba.indexOf(")",ba.length-aa)-ba.length)&&(Q[0]=Q[0].slice(0,aa),Q[2]=ba.slice(0,aa)),Q.slice(0,3))}},filter:{TAG:function(Q){var aa=Q.replace(be,ce).toLowerCase();return"*"===Q?function(){return!0}:function(ba){return p(ba,aa)}},CLASS:function(Q){var aa=Md[Q+" "];return aa||(aa=RegExp("(^|[\\x20\\t\\r\\n\\f])"+
Q+"([\\x20\\t\\r\\n\\f]|$)"),Md(Q,function(ba){return aa.test("string"==typeof ba.className&&ba.className||void 0!==ba.getAttribute&&ba.getAttribute("class")||"")}))},ATTR:function(Q,aa,ba){return function(sa){sa=f.attr(sa,Q);return null==sa?"!="===aa:!aa||((sa+="","="===aa)?sa===ba:"!="===aa?sa!==ba:"^="===aa?ba&&0===sa.indexOf(ba):"*="===aa?ba&&-1<sa.indexOf(ba):"$="===aa?ba&&sa.slice(-ba.length)===ba:"~="===aa?-1<(" "+sa.replace(Jc," ")+" ").indexOf(ba):"|="===aa&&(sa===ba||sa.slice(0,ba.length+
1)===ba+"-"))}},CHILD:function(Q,aa,ba,sa,Ha){var kb="nth"!==Q.slice(0,3),bb="last"!==Q.slice(-4),xb="of-type"===aa;return 1===sa&&0===Ha?function(eb){return!!eb.parentNode}:function(eb,Eb,Cb){var Gc,Hb,Ob;Eb=kb!==bb?"nextSibling":"previousSibling";var kc=eb.parentNode,od=xb&&eb.nodeName.toLowerCase(),Ic=!Cb&&!xb,Db=!1;if(kc){if(kb){for(;Eb;){for(Hb=eb;Hb=Hb[Eb];)if(xb?p(Hb,od):1===Hb.nodeType)return!1;var Ad=Eb="only"===Q&&!Ad&&"nextSibling"}return!0}if(Ad=[bb?kc.firstChild:kc.lastChild],bb&&Ic)for(Db=
(Ob=(Gc=(Cb=kc[Nb]||(kc[Nb]={}))[Q]||[])[0]===Hc&&Gc[1])&&Gc[2],Hb=Ob&&kc.childNodes[Ob];Hb=++Ob&&Hb&&Hb[Eb]||(Db=Ob=0)||Ad.pop();){if(1===Hb.nodeType&&++Db&&Hb===eb){Cb[Q]=[Hc,Ob,Db];break}}else if(Ic&&(Db=Ob=(Gc=(eb[Nb]||(eb[Nb]={}))[Q]||[])[0]===Hc&&Gc[1]),!1===Db)for(;(Hb=++Ob&&Hb&&Hb[Eb]||(Db=Ob=0)||Ad.pop())&&((xb?!p(Hb,od):1!==Hb.nodeType)||!++Db||(Ic&&((Cb=Hb[Nb]||(Hb[Nb]={}))[Q]=[Hc,Db]),Hb!==eb)););return(Db-=Ha)===sa||0==Db%sa&&0<=Db/sa}}},PSEUDO:function(Q,aa){var ba,sa=Va.pseudos[Q]||
Va.setFilters[Q.toLowerCase()]||f.error("unsupported pseudo: "+Q);return sa[Nb]?sa(aa):1<sa.length?(ba=[Q,Q,"",aa],Va.setFilters.hasOwnProperty(Q.toLowerCase())?w(function(Ha,kb){for(var bb,xb=sa(Ha,aa),eb=xb.length;eb--;)bb=cc.call(Ha,xb[eb]),Ha[bb]=!(kb[bb]=xb[eb])}):function(Ha){return sa(Ha,0,ba)}):sa}},pseudos:{not:w(function(Q){var aa=[],ba=[],sa=wa(Q.replace(gc,"$1"));return sa[Nb]?w(function(Ha,kb,bb,xb){var eb;bb=sa(Ha,null,xb,[]);for(xb=Ha.length;xb--;)(eb=bb[xb])&&(Ha[xb]=!(kb[xb]=eb))}):
function(Ha,kb,bb){return aa[0]=Ha,sa(aa,null,bb,ba),aa[0]=null,!ba.pop()}}),has:w(function(Q){return function(aa){return 0<f(Q,aa).length}}),contains:w(function(Q){return Q=Q.replace(be,ce),function(aa){return-1<(aa.textContent||A.text(aa)).indexOf(Q)}}),lang:w(function(Q){return pc.test(Q||"")||f.error("unsupported lang: "+Q),Q=Q.replace(be,ce).toLowerCase(),function(aa){var ba;do if(ba=cb?aa.lang:aa.getAttribute("xml:lang")||aa.getAttribute("lang"))return(ba=ba.toLowerCase())===Q||0===ba.indexOf(Q+
"-");while((aa=aa.parentNode)&&1===aa.nodeType);return!1}}),target:function(Q){var aa=a.location&&a.location.hash;return aa&&aa.slice(1)===Q.id},root:function(Q){return Q===Qa},focus:function(Q){a:{try{var aa=$a.activeElement;break a}catch(ba){}aa=void 0}return Q===aa&&$a.hasFocus()&&!!(Q.type||Q.href||~Q.tabIndex)},enabled:B(!1),disabled:B(!0),checked:function(Q){return p(Q,"input")&&!!Q.checked||p(Q,"option")&&!!Q.selected},selected:function(Q){return Q.parentNode&&Q.parentNode.selectedIndex,!0===
Q.selected},empty:function(Q){for(Q=Q.firstChild;Q;Q=Q.nextSibling)if(6>Q.nodeType)return!1;return!0},parent:function(Q){return!Va.pseudos.empty(Q)},header:function(Q){return rk.test(Q.nodeName)},input:function(Q){return Qf.test(Q.nodeName)},button:function(Q){return p(Q,"input")&&"button"===Q.type||p(Q,"button")},text:function(Q){var aa;return p(Q,"input")&&"text"===Q.type&&(null==(aa=Q.getAttribute("type"))||"text"===aa.toLowerCase())},first:E(function(){return[0]}),last:E(function(Q,aa){return[aa-
1]}),eq:E(function(Q,aa,ba){return[0>ba?ba+aa:ba]}),even:E(function(Q,aa){for(var ba=0;ba<aa;ba+=2)Q.push(ba);return Q}),odd:E(function(Q,aa){for(var ba=1;ba<aa;ba+=2)Q.push(ba);return Q}),lt:E(function(Q,aa,ba){for(aa=0>ba?ba+aa:ba>aa?aa:ba;0<=--aa;)Q.push(aa);return Q}),gt:E(function(Q,aa,ba){for(ba=0>ba?ba+aa:ba;++ba<aa;)Q.push(ba);return Q})}}).pseudos.nth=Va.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Va.pseudos[Xa]=function(Q){return function(aa){return p(aa,"input")&&aa.type===
Q}}(Xa);for(Xa in{submit:!0,reset:!0})Va.pseudos[Xa]=function(Q){return function(aa){return(p(aa,"input")||p(aa,"button"))&&aa.type===Q}}(Xa);M.prototype=Va.filters=Va.pseudos;Va.setFilters=new M;Wa.sortStable=Nb.split("").sort(hd).join("")===Nb;O();Wa.sortDetached=y(function(Q){return 1&Q.compareDocumentPosition($a.createElement("fieldset"))});A.find=f;A.expr[":"]=A.expr.pseudos;A.unique=A.uniqueSort;f.compile=wa;f.select=Aa;f.setDocument=O;f.tokenize=W;f.escape=A.escapeSelector;f.getText=A.text;
f.isXML=A.isXMLDoc;f.selectors=A.expr;f.support=A.support;f.uniqueSort=A.uniqueSort})();var va=function(f,t,w){for(var y=[],B=void 0!==w;(f=f[t])&&9!==f.nodeType;)if(1===f.nodeType){if(B&&A(f).is(w))break;y.push(f)}return y},rc=function(f,t){for(var w=[];f;f=f.nextSibling)1===f.nodeType&&f!==t&&w.push(f);return w},Lc=A.expr.match.needsContext,D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;A.filter=function(f,t,w){var y=t[0];return(w&&(f=":not("+f+")"),1===t.length&&1===y.nodeType)?
A.find.matchesSelector(y,f)?[y]:[]:A.find.matches(f,A.grep(t,function(B){return 1===B.nodeType}))};A.fn.extend({find:function(f){var t,w=this.length,y=this;if("string"!=typeof f)return this.pushStack(A(f).filter(function(){for(B=0;B<w;B++)if(A.contains(y[B],this))return!0}));var B=0;for(t=this.pushStack([]);B<w;B++)A.find(f,y[B],t);return 1<w?A.uniqueSort(t):t},filter:function(f){return this.pushStack(e(this,f||[],!1))},not:function(f){return this.pushStack(e(this,f||[],!0))},is:function(f){return!!e(this,
"string"==typeof f&&Lc.test(f)?A(f):f||[],!1).length}});var P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(A.fn.init=function(f,t,w){var y,B;if(!f)return this;if(w=w||da,"string"==typeof f){if((y="<"===f[0]&&">"===f[f.length-1]&&3<=f.length?[null,f,null]:P.exec(f))&&(y[1]||!t)){if(!y[1])return(B=Za.getElementById(y[2]))&&(this[0]=B,this.length=1),this;if(t=t instanceof A?t[0]:t,A.merge(this,A.parseHTML(y[1],t&&t.nodeType?t.ownerDocument||t:Za,!0)),D.test(y[1])&&A.isPlainObject(t))for(y in t)fb(this[y])?
this[y](t[y]):this.attr(y,t[y]);return this}return!t||t.jquery?(t||w).find(f):this.constructor(t).find(f)}return f.nodeType?(this[0]=f,this.length=1,this):fb(f)?void 0!==w.ready?w.ready(f):f(A):A.makeArray(f,this)}).prototype=A.fn;var da=A(Za);var fa=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};A.fn.extend({has:function(f){var t=A(f,this),w=t.length;return this.filter(function(){for(var y=0;y<w;y++)if(A.contains(this,t[y]))return!0})},closest:function(f,t){var w,y=
0,B=this.length,E=[],K="string"!=typeof f&&A(f);if(!Lc.test(f))for(;y<B;y++)for(w=this[y];w&&w!==t;w=w.parentNode)if(11>w.nodeType&&(K?-1<K.index(w):1===w.nodeType&&A.find.matchesSelector(w,f))){E.push(w);break}return this.pushStack(1<E.length?A.uniqueSort(E):E)},index:function(f){return f?"string"==typeof f?cc.call(A(f),this[0]):cc.call(this,f.jquery?f[0]:f):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(f,t){return this.pushStack(A.uniqueSort(A.merge(this.get(),A(f,t))))},
addBack:function(f){return this.add(null==f?this.prevObject:this.prevObject.filter(f))}});A.each({parent:function(f){return(f=f.parentNode)&&11!==f.nodeType?f:null},parents:function(f){return va(f,"parentNode")},parentsUntil:function(f,t,w){return va(f,"parentNode",w)},next:function(f){return l(f,"nextSibling")},prev:function(f){return l(f,"previousSibling")},nextAll:function(f){return va(f,"nextSibling")},prevAll:function(f){return va(f,"previousSibling")},nextUntil:function(f,t,w){return va(f,"nextSibling",
w)},prevUntil:function(f,t,w){return va(f,"previousSibling",w)},siblings:function(f){return rc((f.parentNode||{}).firstChild,f)},children:function(f){return rc(f.firstChild)},contents:function(f){return null!=f.contentDocument&&fc(f.contentDocument)?f.contentDocument:(p(f,"template")&&(f=f.content||f),A.merge([],f.childNodes))}},function(f,t){A.fn[f]=function(w,y){var B=A.map(this,t,w);return"Until"!==f.slice(-5)&&(y=w),y&&"string"==typeof y&&(B=A.filter(y,B)),1<this.length&&(F[f]||A.uniqueSort(B),
fa.test(f)&&B.reverse()),this.pushStack(B)}});var N=/[^\x20\t\r\n\f]+/g;A.Callbacks=function(f){f="string"==typeof f?(t=f,w={},A.each(t.match(N)||[],function(oa,ta){w[ta]=!0}),w):A.extend({},f);var t,w,y,B,E,K,O=[],M=[],W=-1,Z=function(){K=K||f.once;for(E=y=!0;M.length;W=-1)for(B=M.shift();++W<O.length;)!1===O[W].apply(B[0],B[1])&&f.stopOnFalse&&(W=O.length,B=!1);f.memory||(B=!1);y=!1;K&&(O=B?[]:"")},R={add:function(){return O&&(B&&!y&&(W=O.length-1,M.push(B)),function wa(ta){A.each(ta,function(Aa,
Xa){fb(Xa)?f.unique&&R.has(Xa)||O.push(Xa):Xa&&Xa.length&&"string"!==b(Xa)&&wa(Xa)})}(arguments),B&&!y&&Z()),this},remove:function(){return A.each(arguments,function(oa,ta){for(var wa;-1<(wa=A.inArray(ta,O,wa));)O.splice(wa,1),wa<=W&&W--}),this},has:function(oa){return oa?-1<A.inArray(oa,O):0<O.length},empty:function(){return O&&=[],this},disable:function(){return K=M=[],O=B="",this},disabled:function(){return!O},lock:function(){return K=M=[],B||y||(O=B=""),this},locked:function(){return!!K},fireWith:function(oa,
ta){return K||(ta=[oa,(ta=ta||[]).slice?ta.slice():ta],M.push(ta),y||Z()),this},fire:function(){return R.fireWith(this,arguments),this},fired:function(){return!!E}};return R};A.extend({Deferred:function(f){var t=[["notify","progress",A.Callbacks("memory"),A.Callbacks("memory"),2],["resolve","done",A.Callbacks("once memory"),A.Callbacks("once memory"),0,"resolved"],["reject","fail",A.Callbacks("once memory"),A.Callbacks("once memory"),1,"rejected"]],w="pending",y={state:function(){return w},always:function(){return B.done(arguments).fail(arguments),
this},catch:function(E){return y.then(null,E)},pipe:function(){var E=arguments;return A.Deferred(function(K){A.each(t,function(O,M){var W=fb(E[M[4]])&&E[M[4]];B[M[1]](function(){var Z=W&&W.apply(this,arguments);Z&&fb(Z.promise)?Z.promise().progress(K.notify).done(K.resolve).fail(K.reject):K[M[0]+"With"](this,W?[Z]:arguments)})});E=null}).promise()},then:function(E,K,O){function M(Z,R,oa,ta){return function(){var wa=this,Aa=arguments,Xa=function(){var Ra,wb;if(!(Z<W)){if((Ra=oa.apply(wa,Aa))===R.promise())throw TypeError("Thenable self-resolution");
fb(wb=Ra&&("object"==typeof Ra||"function"==typeof Ra)&&Ra.then)?ta?wb.call(Ra,M(W,R,m,ta),M(W,R,h,ta)):(W++,wb.call(Ra,M(W,R,m,ta),M(W,R,h,ta),M(W,R,m,R.notifyWith))):(oa!==m&&(wa=void 0,Aa=[Ra]),(ta||R.resolveWith)(wa,Aa))}},Va=ta?Xa:function(){try{Xa()}catch(Ra){A.Deferred.exceptionHook&&A.Deferred.exceptionHook(Ra,Va.error),Z+1>=W&&(oa!==h&&(wa=void 0,Aa=[Ra]),R.rejectWith(wa,Aa))}};Z?Va():(A.Deferred.getErrorHook?Va.error=A.Deferred.getErrorHook():A.Deferred.getStackHook&&(Va.error=A.Deferred.getStackHook()),
a.setTimeout(Va))}}var W=0;return A.Deferred(function(Z){t[0][3].add(M(0,Z,fb(O)?O:m,Z.notifyWith));t[1][3].add(M(0,Z,fb(E)?E:m));t[2][3].add(M(0,Z,fb(K)?K:h))}).promise()},promise:function(E){return null!=E?A.extend(E,y):y}},B={};return A.each(t,function(E,K){var O=K[2],M=K[5];y[K[1]]=O.add;M&&O.add(function(){w=M},t[3-E][2].disable,t[3-E][3].disable,t[0][2].lock,t[0][3].lock);O.add(K[3].fire);B[K[0]]=function(){return B[K[0]+"With"](this===B?void 0:this,arguments),this};B[K[0]+"With"]=O.fireWith}),
y.promise(B),f&&f.call(B,B),B},when:function(f){var t=arguments.length,w=t,y=Array(w),B=nb.call(arguments),E=A.Deferred(),K=function(O){return function(M){y[O]=this;B[O]=1<arguments.length?nb.call(arguments):M;--t||E.resolveWith(y,B)}};if(1>=t&&(n(f,E.done(K(w)).resolve,E.reject,!t),"pending"===E.state()||fb(B[w]&&B[w].then)))return E.then();for(;w--;)n(B[w],K(w),E.reject);return E.promise()}});var ca=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;A.Deferred.exceptionHook=function(f,t){a.console&&
a.console.warn&&f&&ca.test(f.name)&&a.console.warn("jQuery.Deferred exception: "+f.message,f.stack,t)};A.readyException=function(f){a.setTimeout(function(){throw f;})};var la=A.Deferred();A.fn.ready=function(f){return la.then(f).catch(function(t){A.readyException(t)}),this};A.extend({isReady:!1,readyWait:1,ready:function(f){(!0===f?!--A.readyWait:!A.isReady)&&(A.isReady=!0,!0!==f&&0<--A.readyWait||la.resolveWith(Za,[A]))}});A.ready.then=la.then;"complete"===Za.readyState||"loading"!==Za.readyState&&
!Za.documentElement.doScroll?a.setTimeout(A.ready):(Za.addEventListener("DOMContentLoaded",r),a.addEventListener("load",r));var xa=function(f,t,w,y,B,E,K){var O=0,M=f.length,W=null==w;if("object"===b(w))for(O in B=!0,w)xa(f,t,O,w[O],!0,E,K);else if(void 0!==y&&(B=!0,fb(y)||(K=!0),W&&(K?(t.call(f,y),t=null):(W=t,t=function(Z,R,oa){return W.call(A(Z),oa)})),t))for(;O<M;O++)t(f[O],w,K?y:y.call(f[O],O,t(f[O],w)));return B?f:W?t.call(f):M?t(f[0],w):E},za=/^-ms-/,db=/-([a-z])/g,hb=function(f){return 1===
f.nodeType||9===f.nodeType||!+f.nodeType};x.uid=1;x.prototype={cache:function(f){var t=f[this.expando];return!t&&(t={},hb(f)&&(f.nodeType?f[this.expando]=t:Object.defineProperty(f,this.expando,{value:t,configurable:!0}))),t},set:function(f,t,w){var y;f=this.cache(f);if("string"==typeof t)f[v(t)]=w;else for(y in t)f[v(y)]=t[y];return f},get:function(f,t){return void 0===t?this.cache(f):f[this.expando]&&f[this.expando][v(t)]},access:function(f,t,w){return void 0===t||t&&"string"==typeof t&&void 0===
w?this.get(f,t):(this.set(f,t,w),void 0!==w?w:t)},remove:function(f,t){var w=f[this.expando];if(void 0!==w){if(void 0!==t){var y=(t=Array.isArray(t)?t.map(v):(t=v(t))in w?[t]:t.match(N)||[]).length;for(;y--;)delete w[t[y]]}(void 0===t||A.isEmptyObject(w))&&(f.nodeType?f[this.expando]=void 0:delete f[this.expando])}},hasData:function(f){f=f[this.expando];return void 0!==f&&!A.isEmptyObject(f)}};var Da=new x,lb=new x,ec=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xc=/[A-Z]/g;A.extend({hasData:function(f){return lb.hasData(f)||
Da.hasData(f)},data:function(f,t,w){return lb.access(f,t,w)},removeData:function(f,t){lb.remove(f,t)},_data:function(f,t,w){return Da.access(f,t,w)},_removeData:function(f,t){Da.remove(f,t)}});A.fn.extend({data:function(f,t){var w,y,B,E=this[0],K=E&&E.attributes;if(void 0===f){if(this.length&&(B=lb.get(E),1===E.nodeType&&!Da.get(E,"hasDataAttrs"))){for(w=K.length;w--;)K[w]&&0===(y=K[w].name).indexOf("data-")&&C(E,y=v(y.slice(5)),B[y]);Da.set(E,"hasDataAttrs",!0)}return B}return"object"==typeof f?
this.each(function(){lb.set(this,f)}):xa(this,function(O){var M;if(E&&void 0===O)return void 0!==(M=lb.get(E,f))||void 0!==(M=C(E,f))?M:void 0;this.each(function(){lb.set(this,f,O)})},null,t,1<arguments.length,null,!0)},removeData:function(f){return this.each(function(){lb.remove(this,f)})}});A.extend({queue:function(f,t,w){var y;if(f)return t=(t||"fx")+"queue",y=Da.get(f,t),w&&(!y||Array.isArray(w)?y=Da.access(f,t,A.makeArray(w)):y.push(w)),y||[]},dequeue:function(f,t){t=t||"fx";var w=A.queue(f,
t),y=w.length,B=w.shift(),E=A._queueHooks(f,t);"inprogress"===B&&(B=w.shift(),y--);B&&("fx"===t&&w.unshift("inprogress"),delete E.stop,B.call(f,function(){A.dequeue(f,t)},E));!y&&E&&E.empty.fire()},_queueHooks:function(f,t){var w=t+"queueHooks";return Da.get(f,w)||Da.access(f,w,{empty:A.Callbacks("once memory").add(function(){Da.remove(f,[t+"queue",w])})})}});A.fn.extend({queue:function(f,t){var w=2;return("string"!=typeof f&&(t=f,f="fx",w--),arguments.length<w)?A.queue(this[0],f):void 0===t?this:
this.each(function(){var y=A.queue(this,f,t);A._queueHooks(this,f);"fx"===f&&"inprogress"!==y[0]&&A.dequeue(this,f)})},dequeue:function(f){return this.each(function(){A.dequeue(this,f)})},clearQueue:function(f){return this.queue(f||"fx",[])},promise:function(f,t){var w,y=1,B=A.Deferred(),E=this,K=this.length,O=function(){--y||B.resolveWith(E,[E])};"string"!=typeof f&&(t=f,f=void 0);for(f=f||"fx";K--;)(w=Da.get(E[K],f+"queueHooks"))&&w.empty&&(y++,w.empty.add(O));return O(),B.promise(t)}});var Ea=
/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,La=RegExp("^(?:([+-])=|)("+Ea+")([a-z%]*)$","i"),Sa=["Top","Right","Bottom","Left"],qb=Za.documentElement,sb=function(f){return A.contains(f.ownerDocument,f)},Mc={composed:!0};qb.getRootNode&&(sb=function(f){return A.contains(f.ownerDocument,f)||f.getRootNode(Mc)===f.ownerDocument});var Qc=function(f,t){return"none"===(f=t||f).style.display||""===f.style.display&&sb(f)&&"none"===A.css(f,"display")},Kf={};A.fn.extend({show:function(){return H(this,!0)},
hide:function(){return H(this)},toggle:function(f){return"boolean"==typeof f?f?this.show():this.hide():this.each(function(){Qc(this)?A(this).show():A(this).hide()})}});var af=/^(?:checkbox|radio)$/i,Uh=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yg=/^$|^module$|\/(?:java|ecma)script/i;var fe=Za.createDocumentFragment().appendChild(Za.createElement("div"));(Rf=Za.createElement("input")).setAttribute("type","radio");Rf.setAttribute("checked","checked");Rf.setAttribute("name","t");fe.appendChild(Rf);Wa.checkClone=
fe.cloneNode(!0).cloneNode(!0).lastChild.checked;fe.innerHTML="<textarea>x</textarea>";Wa.noCloneChecked=!!fe.cloneNode(!0).lastChild.defaultValue;fe.innerHTML="<option></option>";Wa.option=!!fe.lastChild;var Uc={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Uc.tbody=Uc.tfoot=Uc.colgroup=Uc.caption=Uc.thead;Uc.th=Uc.td;Wa.option||(Uc.optgroup=Uc.option=
[1,"<select multiple='multiple'>","</select>"]);var xg=/<|&#?\w+;/,Ag=/^([^.]*)(?:\.(.+)|)/;A.event={global:{},add:function(f,t,w,y,B){var E,K,O,M,W,Z,R,oa;var ta=Da.get(f);if(hb(f))for(w.handler&&(w=(E=w).handler,B=E.selector),B&&A.find.matchesSelector(qb,B),w.guid||(w.guid=A.guid++),(M=ta.events)||(M=ta.events=Object.create(null)),(K=ta.handle)||(K=ta.handle=function(Aa){return A.event.triggered!==Aa.type?A.event.dispatch.apply(f,arguments):void 0}),ta=(t=(t||"").match(N)||[""]).length;ta--;){var wa=
oa=(O=Ag.exec(t[ta])||[])[1];O=(O[2]||"").split(".").sort();wa&&(Z=A.event.special[wa]||{},wa=(B?Z.delegateType:Z.bindType)||wa,Z=A.event.special[wa]||{},W=A.extend({type:wa,origType:oa,data:y,handler:w,guid:w.guid,selector:B,needsContext:B&&A.expr.match.needsContext.test(B),namespace:O.join(".")},E),(R=M[wa])||((R=M[wa]=[]).delegateCount=0,(!Z.setup||!1===Z.setup.call(f,y,O,K))&&f.addEventListener&&f.addEventListener(wa,K)),Z.add&&(Z.add.call(f,W),W.handler.guid||(W.handler.guid=w.guid)),B?R.splice(R.delegateCount++,
0,W):R.push(W),A.event.global[wa]=!0)}},remove:function(f,t,w,y,B){var E,K,O,M,W,Z,R,oa,ta=Da.hasData(f)&&Da.get(f);if(ta&&(M=ta.events)){for(W=(t=(t||"").match(N)||[""]).length;W--;)if(Z=oa=(O=Ag.exec(t[W])||[])[1],R=(O[2]||"").split(".").sort(),Z){var wa=A.event.special[Z]||{};var Aa=M[Z=(y?wa.delegateType:wa.bindType)||Z]||[];O=O[2]&&RegExp("(^|\\.)"+R.join("\\.(?:.*\\.|)")+"(\\.|$)");for(K=E=Aa.length;E--;){var Xa=Aa[E];!B&&oa!==Xa.origType||w&&w.guid!==Xa.guid||O&&!O.test(Xa.namespace)||y&&y!==
Xa.selector&&("**"!==y||!Xa.selector)||(Aa.splice(E,1),Xa.selector&&Aa.delegateCount--,!wa.remove||wa.remove.call(f,Xa))}K&&!Aa.length&&(wa.teardown&&!1!==wa.teardown.call(f,R,ta.handle)||A.removeEvent(f,Z,ta.handle),delete M[Z])}else for(Z in M)A.event.remove(f,Z+t[W],w,y,!0);A.isEmptyObject(M)&&Da.remove(f,"handle events")}},dispatch:function(f){var t,w,y,B=Array(arguments.length),E=A.event.fix(f);var K=(Da.get(this,"events")||Object.create(null))[E.type]||[];var O=A.event.special[E.type]||{};var M=
1;for(B[0]=E;M<arguments.length;M++)B[M]=arguments[M];if(E.delegateTarget=this,!O.preDispatch||!1!==O.preDispatch.call(this,E)){var W=A.event.handlers.call(this,E,K);for(M=0;(w=W[M++])&&!E.isPropagationStopped();)for(E.currentTarget=w.elem,K=0;(y=w.handlers[K++])&&!E.isImmediatePropagationStopped();)E.rnamespace&&!1!==y.namespace&&!E.rnamespace.test(y.namespace)||(E.handleObj=y,E.data=y.data,void 0===(t=((A.event.special[y.origType]||{}).handle||y.handler).apply(w.elem,B))||!1!==(E.result=t)||(E.preventDefault(),
E.stopPropagation()));return O.postDispatch&&O.postDispatch.call(this,E),E.result}},handlers:function(f,t){var w,y,B,E=[],K=t.delegateCount,O=f.target;if(K&&O.nodeType&&!("click"===f.type&&1<=f.button))for(;O!==this;O=O.parentNode||this)if(1===O.nodeType&&("click"!==f.type||!0!==O.disabled)){var M=0;var W=[];for(B={};M<K;M++)void 0===B[y=(w=t[M]).selector+" "]&&(B[y]=w.needsContext?-1<A(y,this).index(O):A.find(y,this,null,[O]).length),B[y]&&W.push(w);W.length&&E.push({elem:O,handlers:W})}return O=
this,K<t.length&&E.push({elem:O,handlers:t.slice(K)}),E},addProp:function(f,t){Object.defineProperty(A.Event.prototype,f,{enumerable:!0,configurable:!0,get:fb(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[f]},set:function(w){Object.defineProperty(this,f,{enumerable:!0,configurable:!0,writable:!0,value:w})}})},fix:function(f){return f[A.expando]?f:new A.Event(f)},special:{load:{noBubble:!0},click:{setup:function(f){f=this||
f;return af.test(f.type)&&f.click&&p(f,"input")&&ja(f,"click",!0),!1},trigger:function(f){f=this||f;return af.test(f.type)&&f.click&&p(f,"input")&&ja(f,"click"),!0},_default:function(f){f=f.target;return af.test(f.type)&&f.click&&p(f,"input")&&Da.get(f,"click")||p(f,"a")}},beforeunload:{postDispatch:function(f){void 0!==f.result&&f.originalEvent&&(f.originalEvent.returnValue=f.result)}}}};A.removeEvent=function(f,t,w){f.removeEventListener&&f.removeEventListener(t,w)};A.Event=function(f,t){if(!(this instanceof
A.Event))return new A.Event(f,t);f&&f.type?(this.originalEvent=f,this.type=f.type,this.isDefaultPrevented=f.defaultPrevented||void 0===f.defaultPrevented&&!1===f.returnValue?T:Y,this.target=f.target&&3===f.target.nodeType?f.target.parentNode:f.target,this.currentTarget=f.currentTarget,this.relatedTarget=f.relatedTarget):this.type=f;t&&A.extend(this,t);this.timeStamp=f&&f.timeStamp||Date.now();this[A.expando]=!0};A.Event.prototype={constructor:A.Event,isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y,
isSimulated:!1,preventDefault:function(){var f=this.originalEvent;this.isDefaultPrevented=T;f&&!this.isSimulated&&f.preventDefault()},stopPropagation:function(){var f=this.originalEvent;this.isPropagationStopped=T;f&&!this.isSimulated&&f.stopPropagation()},stopImmediatePropagation:function(){var f=this.originalEvent;this.isImmediatePropagationStopped=T;f&&!this.isSimulated&&f.stopImmediatePropagation();this.stopPropagation()}};A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,
detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},A.event.addProp);A.each({focus:"focusin",blur:"focusout"},function(f,t){function w(y){if(Za.documentMode){var B=Da.get(this,"handle"),E=A.event.fix(y);E.type="focusin"===y.type?"focus":"blur";E.isSimulated=!0;B(y);E.target===
E.currentTarget&&B(E)}else A.event.simulate(t,y.target,A.event.fix(y))}A.event.special[f]={setup:function(){var y;if(ja(this,f,!0),!Za.documentMode)return!1;(y=Da.get(this,t))||this.addEventListener(t,w);Da.set(this,t,(y||0)+1)},trigger:function(){return ja(this,f),!0},teardown:function(){var y;if(!Za.documentMode)return!1;(y=Da.get(this,t)-1)?Da.set(this,t,y):(this.removeEventListener(t,w),Da.remove(this,t))},_default:function(y){return Da.get(y.target,f)},delegateType:t};A.event.special[t]={setup:function(){var y=
this.ownerDocument||this.document||this,B=Za.documentMode?this:y,E=Da.get(B,t);E||(Za.documentMode?this.addEventListener(t,w):y.addEventListener(f,w,!0));Da.set(B,t,(E||0)+1)},teardown:function(){var y=this.ownerDocument||this.document||this,B=Za.documentMode?this:y,E=Da.get(B,t)-1;E?Da.set(B,t,E):(Za.documentMode?this.removeEventListener(t,w):y.removeEventListener(f,w,!0),Da.remove(B,t))}}});A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},
function(f,t){A.event.special[f]={delegateType:t,bindType:t,handle:function(w){var y,B=w.relatedTarget,E=w.handleObj;return B&&(B===this||A.contains(this,B))||(w.type=E.origType,y=E.handler.apply(this,arguments),w.type=t),y}}});A.fn.extend({on:function(f,t,w,y){return ea(this,f,t,w,y)},one:function(f,t,w,y){return ea(this,f,t,w,y,1)},off:function(f,t,w){var y,B;if(f&&f.preventDefault&&f.handleObj)return y=f.handleObj,A(f.delegateTarget).off(y.namespace?y.origType+"."+y.namespace:y.origType,y.selector,
y.handler),this;if("object"==typeof f){for(B in f)this.off(B,t,f[B]);return this}return(!1===t||"function"==typeof t)&&(w=t,t=void 0),!1===w&&(w=Y),this.each(function(){A.event.remove(this,f,w,t)})}});var Yh=/<script|<style|<link/i,lk=/checked\s*(?:[^=]|=\s*.checked.)/i,mk=/^\s*<!\[CDATA\[|\]\]>\s*$/g;A.extend({htmlPrefilter:function(f){return f},clone:function(f,t,w){var y,B,E=f.cloneNode(!0),K=sb(f);if(!(Wa.noCloneChecked||1!==f.nodeType&&11!==f.nodeType||A.isXMLDoc(f))){var O=0;var M=G(E);for(y=
(B=G(f)).length;O<y;O++){var W=B[O],Z=M[O],R=Z.nodeName.toLowerCase();"input"===R&&af.test(W.type)?Z.checked=W.checked:("input"===R||"textarea"===R)&&(Z.defaultValue=W.defaultValue);!0}}if(t)if(w)for(O=0,B=B||G(f),M=M||G(E),y=B.length;O<y;O++)Ga(B[O],M[O]);else Ga(f,E);return 0<(M=G(E,"script")).length&&L(M,!K&&G(f,"script")),E},cleanData:function(f){for(var t,w,y,B=A.event.special,E=0;void 0!==(w=f[E]);E++)if(hb(w)){if(t=w[Da.expando]){if(t.events)for(y in t.events)B[y]?A.event.remove(w,y):A.removeEvent(w,
y,t.handle);w[Da.expando]=void 0}w[lb.expando]&&(w[lb.expando]=void 0)}}});A.fn.extend({detach:function(f){return pb(this,f,!0)},remove:function(f){return pb(this,f)},text:function(f){return xa(this,function(t){return void 0===t?A.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,f,arguments.length)},append:function(){return qa(this,arguments,function(f){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ra(this,f).appendChild(f)})},
prepend:function(){return qa(this,arguments,function(f){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ra(this,f);t.insertBefore(f,t.firstChild)}})},before:function(){return qa(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this)})},after:function(){return qa(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this.nextSibling)})},empty:function(){for(var f,t=0;null!=(f=this[t]);t++)1===f.nodeType&&(A.cleanData(G(f,!1)),f.textContent=
"");return this},clone:function(f,t){return f=null!=f&&f,t=null==t?f:t,this.map(function(){return A.clone(this,f,t)})},html:function(f){return xa(this,function(t){var w=this[0]||{},y=0,B=this.length;if(void 0===t&&1===w.nodeType)return w.innerHTML;if("string"==typeof t&&!Yh.test(t)&&!Uc[(Uh.exec(t)||["",""])[1].toLowerCase()]){t=A.htmlPrefilter(t);try{for(;y<B;y++)w=this[y]||{},1===w.nodeType&&(A.cleanData(G(w,!1)),w.innerHTML=t);w=0}catch(E){}}w&&this.empty().append(t)},null,f,arguments.length)},
replaceWith:function(){var f=[];return qa(this,arguments,function(t){var w=this.parentNode;0>A.inArray(this,f)&&(A.cleanData(G(this)),w&&w.replaceChild(t,this))},f)}});A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,t){A.fn[f]=function(w){for(var y=[],B=A(w),E=B.length-1,K=0;K<=E;K++)w=K===E?this:this.clone(!0),A(B[K])[t](w),ib.apply(y,w.get());return this.pushStack(y)}});var Xe=RegExp("^("+Ea+")(?!px)[a-z%]+$","i"),Lf=/^--/,
Mf=function(f){var t=f.ownerDocument.defaultView;return t&&t.opener||(t=a),t.getComputedStyle(f)},Zh=function(f,t,w){var y,B={};for(y in t)B[y]=f.style[y],f.style[y]=t[y];for(y in w=w.call(f),t)f.style[y]=B[y];return w},nk=RegExp(Sa.join("|"),"i");!function(){function f(){if(M){O.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";M.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";
qb.appendChild(O).appendChild(M);var W=a.getComputedStyle(M);t="1%"!==W.top;K=12===Math.round(parseFloat(W.marginLeft));M.style.right="60%";B=36===Math.round(parseFloat(W.right));w=36===Math.round(parseFloat(W.width));M.style.position="absolute";y=12===Math.round(parseFloat(M.offsetWidth/3));qb.removeChild(O);M=null}}var t,w,y,B,E,K,O=Za.createElement("div"),M=Za.createElement("div");M.style&&(M.style.backgroundClip="content-box",M.cloneNode(!0).style.backgroundClip="",Wa.clearCloneStyle="content-box"===
M.style.backgroundClip,A.extend(Wa,{boxSizingReliable:function(){return f(),w},pixelBoxStyles:function(){return f(),B},pixelPosition:function(){return f(),t},reliableMarginLeft:function(){return f(),K},scrollboxSize:function(){return f(),y},reliableTrDimensions:function(){var W,Z,R,oa;return null==E&&(W=Za.createElement("table"),Z=Za.createElement("tr"),R=Za.createElement("div"),W.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Z.style.cssText="box-sizing:content-box;border:1px solid",
Z.style.height="1px",R.style.height="9px",R.style.display="block",qb.appendChild(W).appendChild(Z).appendChild(R),E=parseInt((oa=a.getComputedStyle(Z)).height,10)+parseInt(oa.borderTopWidth,10)+parseInt(oa.borderBottomWidth,10)===Z.offsetHeight,qb.removeChild(W)),E}}))}();var Xh=["Webkit","Moz","ms"],Wh=Za.createElement("div").style,Vh={},sk=/^(none|table(?!-c[ea]).+)/,tk={position:"absolute",visibility:"hidden",display:"block"},jd={letterSpacing:"0",fontWeight:"400"};A.extend({cssHooks:{opacity:{get:function(f,
t){if(t)return f=Ya(f,"opacity"),""===f?"1":f}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(f,t,w,y){if(f&&3!==f.nodeType&&
8!==f.nodeType&&f.style){var B,E,K,O=v(t),M=Lf.test(t),W=f.style;if(M||(t=Lb(O)),K=A.cssHooks[t]||A.cssHooks[O],void 0===w)return K&&"get"in K&&void 0!==(B=K.get(f,!1,y))?B:W[t];"string"==(E=typeof w)&&(B=La.exec(w))&&B[1]&&(w=J(f,t,B),E="number");null!=w&&w==w&&("number"!==E||M||(w+=B&&B[3]||(A.cssNumber[O]?"":"px")),Wa.clearCloneStyle||""!==w||0!==t.indexOf("background")||(W[t]="inherit"),K&&"set"in K&&void 0===(w=K.set(f,w,y))||(M?W.setProperty(t,w):W[t]=w))}},css:function(f,t,w,y){var B,E,K,O=
v(t);return(Lf.test(t)||(t=Lb(O)),(K=A.cssHooks[t]||A.cssHooks[O])&&"get"in K&&(B=K.get(f,!0,w)),void 0===B&&(B=Ya(f,t,y)),"normal"===B&&t in jd&&(B=jd[t]),""===w||w)?(E=parseFloat(B),!0===w||isFinite(E)?E||0:B):B}});A.each(["height","width"],function(f,t){A.cssHooks[t]={get:function(w,y,B){if(y)return!sk.test(A.css(w,"display"))||w.getClientRects().length&&w.getBoundingClientRect().width?ka(w,t,B):Zh(w,tk,function(){return ka(w,t,B)})},set:function(w,y,B){var E,K=Mf(w),O=!Wa.scrollboxSize()&&"absolute"===
K.position,M=(O||B)&&"border-box"===A.css(w,"boxSizing",!1,K);B=B?Ma(w,t,B,M,K):0;return M&&O&&(B-=Math.ceil(w["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(K[t])-Ma(w,t,"border",!1,K)-.5)),B&&(E=La.exec(y))&&"px"!==(E[3]||"px")&&(w.style[t]=y,y=A.css(w,t)),Ka(w,y,B)}}});A.cssHooks.marginLeft=Ub(Wa.reliableMarginLeft,function(f,t){if(t)return(parseFloat(Ya(f,"marginLeft"))||f.getBoundingClientRect().left-Zh(f,{marginLeft:0},function(){return f.getBoundingClientRect().left}))+"px"});A.each({margin:"",
padding:"",border:"Width"},function(f,t){A.cssHooks[f+t]={expand:function(w){var y=0,B={};for(w="string"==typeof w?w.split(" "):[w];4>y;y++)B[f+Sa[y]+t]=w[y]||w[y-2]||w[0];return B}};"margin"!==f&&(A.cssHooks[f+t].set=Ka)});A.fn.extend({css:function(f,t){return xa(this,function(w,y,B){var E,K={},O=0;if(Array.isArray(y)){B=Mf(w);for(E=y.length;O<E;O++)K[y[O]]=A.css(w,y[O],!1,B);return K}return void 0!==B?A.style(w,y,B):A.css(w,y)},f,t,1<arguments.length)}});A.Tween=Ba;Ba.prototype={constructor:Ba,
init:function(f,t,w,y,B,E){this.elem=f;this.prop=w;this.easing=B||A.easing._default;this.options=t;this.start=this.now=this.cur();this.end=y;this.unit=E||(A.cssNumber[w]?"":"px")},cur:function(){var f=Ba.propHooks[this.prop];return f&&f.get?f.get(this):Ba.propHooks._default.get(this)},run:function(f){var t,w=Ba.propHooks[this.prop];return this.options.duration?this.pos=t=A.easing[this.easing](f,this.options.duration*f,0,1,this.options.duration):this.pos=t=f,this.now=(this.end-this.start)*t+this.start,
this.options.step&&this.options.step.call(this.elem,this.now,this),w&&w.set?w.set(this):Ba.propHooks._default.set(this),this}};Ba.prototype.init.prototype=Ba.prototype;Ba.propHooks={_default:{get:function(f){var t;return 1!==f.elem.nodeType||null!=f.elem[f.prop]&&null==f.elem.style[f.prop]?f.elem[f.prop]:(t=A.css(f.elem,f.prop,""))&&"auto"!==t?t:0},set:function(f){A.fx.step[f.prop]?A.fx.step[f.prop](f):1!==f.elem.nodeType||!A.cssHooks[f.prop]&&null==f.elem.style[Lb(f.prop)]?f.elem[f.prop]=f.now:A.style(f.elem,
f.prop,f.now+f.unit)}}};Ba.propHooks.scrollTop=Ba.propHooks.scrollLeft={set:function(f){f.elem.nodeType&&f.elem.parentNode&&(f.elem[f.prop]=f.now)}};A.easing={linear:function(f){return f},swing:function(f){return.5-Math.cos(f*Math.PI)/2},_default:"swing"};A.fx=Ba.prototype.init;A.fx.step={};var Rf,we,bf,uk=/^(?:toggle|show|hide)$/,vk=/queueHooks$/;A.Animation=A.extend(pa,{tweeners:{"*":[function(f,t){var w=this.createTween(f,t);return J(w.elem,f,La.exec(t),w),w}]},tweener:function(f,t){fb(f)?(t=f,
f=["*"]):f=f.match(N);for(var w,y=0,B=f.length;y<B;y++)w=f[y],pa.tweeners[w]=pa.tweeners[w]||[],pa.tweeners[w].unshift(t)},prefilters:[function(f,t,w){var y,B,E,K,O,M,W,Z="width"in t||"height"in t,R=this,oa={},ta=f.style,wa=f.nodeType&&Qc(f),Aa=Da.get(f,"fxshow");for(y in w.queue||(null==(K=A._queueHooks(f,"fx")).unqueued&&(K.unqueued=0,O=K.empty.fire,K.empty.fire=function(){K.unqueued||O()}),K.unqueued++,R.always(function(){R.always(function(){K.unqueued--;A.queue(f,"fx").length||K.empty.fire()})})),
t)if(B=t[y],uk.test(B)){if(delete t[y],E=E||"toggle"===B,B===(wa?"hide":"show")){if("show"!==B||!Aa||void 0===Aa[y])continue;wa=!0}oa[y]=Aa&&Aa[y]||A.style(f,y)}if((t=!A.isEmptyObject(t))||!A.isEmptyObject(oa))for(y in Z&&1===f.nodeType&&(w.overflow=[ta.overflow,ta.overflowX,ta.overflowY],null==(M=Aa&&Aa.display)&&(M=Da.get(f,"display")),"none"===(W=A.css(f,"display"))&&(M?W=M:(H([f],!0),M=f.style.display||M,W=A.css(f,"display"),H([f]))),("inline"===W||"inline-block"===W&&null!=M)&&"none"===A.css(f,
"float")&&(t||(R.done(function(){ta.display=M}),null!=M||(M="none"===(W=ta.display)?"":W)),ta.display="inline-block")),w.overflow&&(ta.overflow="hidden",R.always(function(){ta.overflow=w.overflow[0];ta.overflowX=w.overflow[1];ta.overflowY=w.overflow[2]})),t=!1,oa)t||(Aa?"hidden"in Aa&&(wa=Aa.hidden):Aa=Da.access(f,"fxshow",{display:M}),E&&(Aa.hidden=!wa),wa&&H([f],!0),R.done(function(){for(y in wa||H([f]),Da.remove(f,"fxshow"),oa)A.style(f,y,oa[y])})),t=Pa(wa?Aa[y]:0,y,R),y in Aa||(Aa[y]=t.start,
wa&&(t.end=t.start,t.start=0))}],prefilter:function(f,t){t?pa.prefilters.unshift(f):pa.prefilters.push(f)}});A.speed=function(f,t,w){var y=f&&"object"==typeof f?A.extend({},f):{complete:w||!w&&t||fb(f)&&f,duration:f,easing:w&&t||t&&!fb(t)&&t};return A.fx.off?y.duration=0:"number"!=typeof y.duration&&(y.duration in A.fx.speeds?y.duration=A.fx.speeds[y.duration]:y.duration=A.fx.speeds._default),(null==y.queue||!0===y.queue)&&(y.queue="fx"),y.old=y.complete,y.complete=function(){fb(y.old)&&y.old.call(this);
y.queue&&A.dequeue(this,y.queue)},y};A.fn.extend({fadeTo:function(f,t,w,y){return this.filter(Qc).css("opacity",0).show().end().animate({opacity:t},f,w,y)},animate:function(f,t,w,y){var B=A.isEmptyObject(f),E=A.speed(t,w,y);t=function(){var K=pa(this,A.extend({},f),E);(B||Da.get(this,"finish"))&&K.stop(!0)};return t.finish=t,B||!1===E.queue?this.each(t):this.queue(E.queue,t)},stop:function(f,t,w){var y=function(B){var E=B.stop;delete B.stop;E(w)};return"string"!=typeof f&&(w=t,t=f,f=void 0),t&&this.queue(f||
"fx",[]),this.each(function(){var B=!0,E=null!=f&&f+"queueHooks",K=A.timers,O=Da.get(this);if(E)O[E]&&O[E].stop&&y(O[E]);else for(E in O)O[E]&&O[E].stop&&vk.test(E)&&y(O[E]);for(E=K.length;E--;)K[E].elem!==this||null!=f&&K[E].queue!==f||(K[E].anim.stop(w),B=!1,K.splice(E,1));!B&&w||A.dequeue(this,f)})},finish:function(f){return!1!==f&&(f=f||"fx"),this.each(function(){var t=Da.get(this),w=t[f+"queue"];var y=t[f+"queueHooks"];var B=A.timers,E=w?w.length:0;t.finish=!0;A.queue(this,f,[]);y&&y.stop&&y.stop.call(this,
!0);for(y=B.length;y--;)B[y].elem===this&&B[y].queue===f&&(B[y].anim.stop(!0),B.splice(y,1));for(y=0;y<E;y++)w[y]&&w[y].finish&&w[y].finish.call(this);delete t.finish})}});A.each(["toggle","show","hide"],function(f,t){var w=A.fn[t];A.fn[t]=function(y,B,E){return null==y||"boolean"==typeof y?w.apply(this,arguments):this.animate(ha(t,!0),y,B,E)}});A.each({slideDown:ha("show"),slideUp:ha("hide"),slideToggle:ha("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},
function(f,t){A.fn[f]=function(w,y,B){return this.animate(t,w,y,B)}});A.timers=[];A.fx.tick=function(){var f,t=0,w=A.timers;for(we=Date.now();t<w.length;t++)(f=w[t])()||w[t]!==f||w.splice(t--,1);w.length||A.fx.stop();we=void 0};A.fx.timer=function(f){A.timers.push(f);A.fx.start()};A.fx.interval=13;A.fx.start=function(){bf||(bf=!0,function t(){bf&&(!1===Za.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(t):a.setTimeout(t,A.fx.interval),A.fx.tick())}())};A.fx.stop=function(){bf=null};A.fx.speeds=
{slow:600,fast:200,_default:400};A.fn.delay=function(f,t){return f=A.fx&&A.fx.speeds[f]||f,t=t||"fx",this.queue(t,function(w,y){var B=a.setTimeout(w,f);y.stop=function(){a.clearTimeout(B)}})};var ze=Za.createElement("input");var Bg=Za.createElement("select").appendChild(Za.createElement("option"));ze.type="checkbox";Wa.checkOn=""!==ze.value;Wa.optSelected=Bg.selected;(ze=Za.createElement("input")).value="t";ze.type="radio";Wa.radioValue="t"===ze.value;var cf=A.expr.attrHandle;A.fn.extend({attr:function(f,
t){return xa(this,A.attr,f,t,1<arguments.length)},removeAttr:function(f){return this.each(function(){A.removeAttr(this,f)})}});A.extend({attr:function(f,t,w){var y,B,E=f.nodeType;if(3!==E&&8!==E&&2!==E){if(void 0===f.getAttribute)return A.prop(f,t,w);if(1===E&&A.isXMLDoc(f)||(B=A.attrHooks[t.toLowerCase()]||(A.expr.match.bool.test(t)?wk:void 0)),void 0!==w){if(null===w){A.removeAttr(f,t);return}return B&&"set"in B&&void 0!==(y=B.set(f,w,t))?y:(f.setAttribute(t,w+""),w)}return B&&"get"in B&&null!==
(y=B.get(f,t))?y:null==(y=A.find.attr(f,t))?void 0:y}},attrHooks:{type:{set:function(f,t){if(!Wa.radioValue&&"radio"===t&&p(f,"input")){var w=f.value;return f.setAttribute("type",t),w&&(f.value=w),t}}}},removeAttr:function(f,t){var w=0,y=t&&t.match(N);if(y&&1===f.nodeType)for(;t=y[w++];)f.removeAttribute(t)}});var wk={set:function(f,t,w){return!1===t?A.removeAttr(f,w):f.setAttribute(w,w),w}};A.each(A.expr.match.bool.source.match(/\w+/g),function(f,t){var w=cf[t]||A.find.attr;cf[t]=function(y,B,E){var K,
O,M=B.toLowerCase();return E||(O=cf[M],cf[M]=K,K=null!=w(y,B,E)?M:null,cf[M]=O),K}});var Ae=/^(?:input|select|textarea|button)$/i,xk=/^(?:a|area)$/i;A.fn.extend({prop:function(f,t){return xa(this,A.prop,f,t,1<arguments.length)},removeProp:function(f){return this.each(function(){delete this[A.propFix[f]||f]})}});A.extend({prop:function(f,t,w){var y,B,E=f.nodeType;if(3!==E&&8!==E&&2!==E)return(1===E&&A.isXMLDoc(f)||(t=A.propFix[t]||t,B=A.propHooks[t]),void 0!==w)?B&&"set"in B&&void 0!==(y=B.set(f,w,
t))?y:f[t]=w:B&&"get"in B&&null!==(y=B.get(f,t))?y:f[t]},propHooks:{tabIndex:{get:function(f){var t=A.find.attr(f,"tabindex");return t?parseInt(t,10):Ae.test(f.nodeName)||xk.test(f.nodeName)&&f.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}});Wa.optSelected||(A.propHooks.selected={get:function(f){f=f.parentNode;return f&&f.parentNode&&f.parentNode.selectedIndex,null},set:function(f){f=f.parentNode;f&&(f.selectedIndex,f.parentNode&&f.parentNode.selectedIndex)}});A.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){A.propFix[this.toLowerCase()]=this});A.fn.extend({addClass:function(f){var t,w,y,B,E,K;return fb(f)?this.each(function(O){A(this).addClass(f.call(this,O,Ja(this)))}):(t=ob(f)).length?this.each(function(){if(y=Ja(this),w=1===this.nodeType&&" "+Ua(y)+" "){for(E=0;E<t.length;E++)B=t[E],0>w.indexOf(" "+B+" ")&&(w+=B+" ");y!==(K=Ua(w))&&this.setAttribute("class",K)}}):this},removeClass:function(f){var t,w,y,B,E,K;return fb(f)?this.each(function(O){A(this).removeClass(f.call(this,O,Ja(this)))}):
arguments.length?(t=ob(f)).length?this.each(function(){if(y=Ja(this),w=1===this.nodeType&&" "+Ua(y)+" "){for(E=0;E<t.length;E++)for(B=t[E];-1<w.indexOf(" "+B+" ");)w=w.replace(" "+B+" "," ");y!==(K=Ua(w))&&this.setAttribute("class",K)}}):this:this.attr("class","")},toggleClass:function(f,t){var w,y,B,E,K=typeof f,O="string"===K||Array.isArray(f);return fb(f)?this.each(function(M){A(this).toggleClass(f.call(this,M,Ja(this),t),t)}):"boolean"==typeof t&&O?t?this.addClass(f):this.removeClass(f):(w=ob(f),
this.each(function(){if(O)for(B=0,E=A(this);B<w.length;B++)y=w[B],E.hasClass(y)?E.removeClass(y):E.addClass(y);else(void 0===f||"boolean"===K)&&((y=Ja(this))&&Da.set(this,"__className__",y),this.setAttribute&&this.setAttribute("class",y||!1===f?"":Da.get(this,"__className__")||""))}))},hasClass:function(f){var t,w=0;for(f=" "+f+" ";t=this[w++];)if(1===t.nodeType&&-1<(" "+Ua(Ja(t))+" ").indexOf(f))return!0;return!1}});var yk=/\r/g;A.fn.extend({val:function(f){var t,w,y,B=this[0];return arguments.length?
(y=fb(f),this.each(function(E){var K;1!==this.nodeType||(null==(K=y?f.call(this,E,A(this).val()):f)?K="":"number"==typeof K?K+="":Array.isArray(K)&&(K=A.map(K,function(O){return null==O?"":O+""})),(t=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,K,"value")||(this.value=K))})):B?(t=A.valHooks[B.type]||A.valHooks[B.nodeName.toLowerCase()])&&"get"in t&&void 0!==(w=t.get(B,"value"))?w:"string"==typeof(w=B.value)?w.replace(yk,""):null==w?"":w:void 0}});
A.extend({valHooks:{option:{get:function(f){var t=A.find.attr(f,"value");return null!=t?t:Ua(A.text(f))}},select:{get:function(f){var t,w,y=f.options,B=f.selectedIndex,E="select-one"===f.type,K=E?null:[],O=E?B+1:y.length;for(w=0>B?O:E?B:0;w<O;w++)if(!(!(t=y[w]).selected&&w!==B||t.disabled||t.parentNode.disabled&&p(t.parentNode,"optgroup"))){if(f=A(t).val(),E)return f;K.push(f)}return K},set:function(f,t){var w,y,B=f.options;t=A.makeArray(t);for(var E=B.length;E--;)((y=B[E]).selected=-1<A.inArray(A.valHooks.option.get(y),
t))&&(w=!0);return w||(f.selectedIndex=-1),t}}}});A.each(["radio","checkbox"],function(){A.valHooks[this]={set:function(f,t){if(Array.isArray(t))return f.checked=-1<A.inArray(A(f).val(),t)}};Wa.checkOn||(A.valHooks[this].get=function(f){return null===f.getAttribute("value")?"on":f.value})});var dd=a.location,Cg=Date.now(),Dg=/\?/;A.parseXML=function(f){var t;if(!f||"string"!=typeof f)return null;try{var w=(new a.DOMParser).parseFromString(f,"text/xml")}catch(y){}return t=w&&w.getElementsByTagName("parsererror")[0],
(!w||t)&&A.error("Invalid XML: "+(t?A.map(t.childNodes,function(y){return y.textContent}).join("\n"):f)),w};var $h=/^(?:focusinfocus|focusoutblur)$/,ai=function(f){f.stopPropagation()};A.extend(A.event,{trigger:function(f,t,w,y){var B,E,K,O,M,W,Z=[w||Za],R=Pb.call(f,"type")?f.type:f;var oa=Pb.call(f,"namespace")?f.namespace.split("."):[];if(B=W=E=w=w||Za,3!==w.nodeType&&8!==w.nodeType&&!$h.test(R+A.event.triggered)&&(-1<R.indexOf(".")&&(R=(oa=R.split(".")).shift(),oa.sort()),K=0>R.indexOf(":")&&"on"+
R,(f=f[A.expando]?f:new A.Event(R,"object"==typeof f&&f)).isTrigger=y?2:3,f.namespace=oa.join("."),f.rnamespace=f.namespace?RegExp("(^|\\.)"+oa.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f.result=void 0,f.target||(f.target=w),t=null==t?[f]:A.makeArray(t,[f]),M=A.event.special[R]||{},y||!M.trigger||!1!==M.trigger.apply(w,t))){if(!y&&!M.noBubble&&!hc(w)){var ta=M.delegateType||R;for($h.test(ta+R)||(B=B.parentNode);B;B=B.parentNode)Z.push(B),E=B;E===(w.ownerDocument||Za)&&Z.push(E.defaultView||E.parentWindow||
a)}for(oa=0;(B=Z[oa++])&&!f.isPropagationStopped();)W=B,f.type=1<oa?ta:M.bindType||R,(O=(Da.get(B,"events")||Object.create(null))[f.type]&&Da.get(B,"handle"))&&O.apply(B,t),(O=K&&B[K])&&O.apply&&hb(B)&&(f.result=O.apply(B,t),!1===f.result&&f.preventDefault());return f.type=R,!y&&!f.isDefaultPrevented()&&(!M._default||!1===M._default.apply(Z.pop(),t))&&hb(w)&&K&&fb(w[R])&&!hc(w)&&((E=w[K])&&(w[K]=null),A.event.triggered=R,f.isPropagationStopped()&&W.addEventListener(R,ai),w[R](),f.isPropagationStopped()&&
W.removeEventListener(R,ai),A.event.triggered=void 0,E&&(w[K]=E)),f.result}},simulate:function(f,t,w){f=A.extend(new A.Event,w,{type:f,isSimulated:!0});A.event.trigger(f,null,t)}});A.fn.extend({trigger:function(f,t){return this.each(function(){A.event.trigger(f,t,this)})},triggerHandler:function(f,t){var w=this[0];if(w)return A.event.trigger(f,t,w,!0)}});var zk=/\[\]$/,bi=/\r?\n/g,Ak=/^(?:submit|button|image|reset|file)$/i,Bk=/^(?:input|select|textarea|keygen)/i;A.param=function(f,t){var w,y=[],B=
function(E,K){K=fb(K)?K():K;y[y.length]=encodeURIComponent(E)+"="+encodeURIComponent(null==K?"":K)};if(null==f)return"";if(Array.isArray(f)||f.jquery&&!A.isPlainObject(f))A.each(f,function(){B(this.name,this.value)});else for(w in f)!function Z(K,O,M,W){var R;if(Array.isArray(O))A.each(O,function(oa,ta){M||zk.test(K)?W(K,ta):Z(K+"["+("object"==typeof ta&&null!=ta?oa:"")+"]",ta,M,W)});else if(M||"object"!==b(O))W(K,O);else for(R in O)Z(K+"["+R+"]",O[R],M,W)}(w,f[w],t,B);return y.join("&")};A.fn.extend({serialize:function(){return A.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var f=A.prop(this,"elements");return f?A.makeArray(f):this}).filter(function(){var f=this.type;return this.name&&!A(this).is(":disabled")&&Bk.test(this.nodeName)&&!Ak.test(f)&&(this.checked||!af.test(f))}).map(function(f,t){f=A(this).val();return null==f?null:Array.isArray(f)?A.map(f,function(w){return{name:t.name,value:w.replace(bi,"\r\n")}}):{name:t.name,value:f.replace(bi,"\r\n")}}).get()}});var Ck=/%20/g,Dk=/#.*$/,Ek=/([?&])_=[^&]*/,Fk=/^(.*?):[ \t]*([^\r\n]*)$/mg,
Be=/^(?:GET|HEAD)$/,Gk=/^\/\//,ci={},Ye={},di="*/".concat("*"),Eg=Za.createElement("a");Eg.href=dd.href;A.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dd.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(dd.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":di,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,
html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(f,t){return t?Wb(Wb(f,A.ajaxSettings),t):Wb(A.ajaxSettings,f)},ajaxPrefilter:lc(ci),ajaxTransport:lc(Ye),ajax:function(f,t){function w(Qa,cb,Fb,cd){var Sb,Nb,Hc,yd,Md,Nc=cb;$a||($a=!0,O&&a.clearTimeout(O),y=void 0,E=cd||"",Ta.readyState=0<Qa?4:0,Sb=200<=
Qa&&300>Qa||304===Qa,Fb&&(yd=function(oc,uc,hd){for(var Jc,jc,Xb,Fc,Dd=oc.contents,pc=oc.dataTypes;"*"===pc[0];)pc.shift(),void 0===Jc&&(Jc=oc.mimeType||uc.getResponseHeader("Content-Type"));if(Jc)for(jc in Dd)if(Dd[jc]&&Dd[jc].test(Jc)){pc.unshift(jc);break}if(pc[0]in hd)Xb=pc[0];else{for(jc in hd){if(!pc[0]||oc.converters[jc+" "+pc[0]]){Xb=jc;break}Fc||=jc}Xb=Xb||Fc}if(Xb)return Xb!==pc[0]&&pc.unshift(Xb),hd[Xb]}(R,Ta,Fb)),!Sb&&-1<A.inArray("script",R.dataTypes)&&0>A.inArray("json",R.dataTypes)&&
(R.converters["text script"]=function(){}),yd=function(oc,uc,hd,Jc){var jc,Xb,Fc,Dd,pc,id={},Qf=oc.dataTypes.slice();if(Qf[1])for(Fc in oc.converters)id[Fc.toLowerCase()]=oc.converters[Fc];for(Xb=Qf.shift();Xb;)if(oc.responseFields[Xb]&&(hd[oc.responseFields[Xb]]=uc),!pc&&Jc&&oc.dataFilter&&(uc=oc.dataFilter(uc,oc.dataType)),pc=Xb,Xb=Qf.shift())if("*"===Xb)Xb=pc;else if("*"!==pc&&pc!==Xb){if(!(Fc=id[pc+" "+Xb]||id["* "+Xb]))for(jc in id)if((Dd=jc.split(" "))[1]===Xb&&(Fc=id[pc+" "+Dd[0]]||id["* "+
Dd[0]])){!0===Fc?Fc=id[jc]:!0!==id[jc]&&(Xb=Dd[0],Qf.unshift(Dd[1]));break}if(!0!==Fc)if(Fc&&oc.throws)uc=Fc(uc);else try{uc=Fc(uc)}catch(rk){return{state:"parsererror",error:Fc?rk:"No conversion from "+pc+" to "+Xb}}}return{state:"success",data:uc}}(R,yd,Ta,Sb),Sb?(R.ifModified&&((Md=Ta.getResponseHeader("Last-Modified"))&&(A.lastModified[B]=Md),(Md=Ta.getResponseHeader("etag"))&&(A.etag[B]=Md)),204===Qa||"HEAD"===R.type?Nc="nocontent":304===Qa?Nc="notmodified":(Nc=yd.state,Nb=yd.data,Sb=!(Hc=yd.error))):
(Hc=Nc,(Qa||!Nc)&&(Nc="error",0>Qa&&(Qa=0))),Ta.status=Qa,Ta.statusText=(cb||Nc)+"",Sb?wa.resolveWith(oa,[Nb,Nc,Ta]):wa.rejectWith(oa,[Ta,Nc,Hc]),Ta.statusCode(Xa),Xa=void 0,M&&ta.trigger(Sb?"ajaxSuccess":"ajaxError",[Ta,R,Sb?Nb:Hc]),Aa.fireWith(oa,[Ta,Nc]),!M||(ta.trigger("ajaxComplete",[Ta,R]),--A.active||A.event.trigger("ajaxStop")))}"object"==typeof f&&(t=f,f=void 0);t=t||{};var y,B,E,K,O,M,W,Z,R=A.ajaxSetup({},t),oa=R.context||R,ta=R.context&&(oa.nodeType||oa.jquery)?A(oa):A.event,wa=A.Deferred(),
Aa=A.Callbacks("once memory"),Xa=R.statusCode||{},Va={},Ra={},wb="canceled",Ta={readyState:0,getResponseHeader:function(Qa){var cb;if($a){if(!K)for(K={};cb=Fk.exec(E);)K[cb[1].toLowerCase()+" "]=(K[cb[1].toLowerCase()+" "]||[]).concat(cb[2]);cb=K[Qa.toLowerCase()+" "]}return null==cb?null:cb.join(", ")},getAllResponseHeaders:function(){return $a?E:null},setRequestHeader:function(Qa,cb){return null==$a&&(Va[Qa=Ra[Qa.toLowerCase()]=Ra[Qa.toLowerCase()]||Qa]=cb),this},overrideMimeType:function(Qa){return null==
$a&&(R.mimeType=Qa),this},statusCode:function(Qa){var cb;if(Qa)if($a)Ta.always(Qa[Ta.status]);else for(cb in Qa)Xa[cb]=[Xa[cb],Qa[cb]];return this},abort:function(Qa){Qa=Qa||wb;return y&&y.abort(Qa),w(0,Qa),this}};if(wa.promise(Ta),R.url=((f||R.url||dd.href)+"").replace(Gk,dd.protocol+"//"),R.type=t.method||t.type||R.method||R.type,R.dataTypes=(R.dataType||"*").toLowerCase().match(N)||[""],null==R.crossDomain){f=Za.createElement("a");try{f.href=R.url,f.href=f.href,R.crossDomain=Eg.protocol+"//"+Eg.host!=
f.protocol+"//"+f.host}catch(Qa){R.crossDomain=!0}}if(R.data&&R.processData&&"string"!=typeof R.data&&(R.data=A.param(R.data,R.traditional)),wc(ci,R,t,Ta),$a)return Ta;for(W in(M=A.event&&R.global)&&0==A.active++&&A.event.trigger("ajaxStart"),R.type=R.type.toUpperCase(),R.hasContent=!Be.test(R.type),B=R.url.replace(Dk,""),R.hasContent?R.data&&R.processData&&0===(R.contentType||"").indexOf("application/x-www-form-urlencoded")&&(R.data=R.data.replace(Ck,"+")):(Z=R.url.slice(B.length),R.data&&(R.processData||
"string"==typeof R.data)&&(B+=(Dg.test(B)?"&":"?")+R.data,delete R.data),!1===R.cache&&(B=B.replace(Ek,"$1"),Z=(Dg.test(B)?"&":"?")+"_="+Cg++ +Z),R.url=B+Z),R.ifModified&&(A.lastModified[B]&&Ta.setRequestHeader("If-Modified-Since",A.lastModified[B]),A.etag[B]&&Ta.setRequestHeader("If-None-Match",A.etag[B])),(R.data&&R.hasContent&&!1!==R.contentType||t.contentType)&&Ta.setRequestHeader("Content-Type",R.contentType),Ta.setRequestHeader("Accept",R.dataTypes[0]&&R.accepts[R.dataTypes[0]]?R.accepts[R.dataTypes[0]]+
("*"!==R.dataTypes[0]?", "+di+"; q=0.01":""):R.accepts["*"]),R.headers)Ta.setRequestHeader(W,R.headers[W]);if(R.beforeSend&&(!1===R.beforeSend.call(oa,Ta,R)||$a))return Ta.abort();if(wb="abort",Aa.add(R.complete),Ta.done(R.success),Ta.fail(R.error),y=wc(Ye,R,t,Ta)){if(Ta.readyState=1,M&&ta.trigger("ajaxSend",[Ta,R]),$a)return Ta;R.async&&0<R.timeout&&(O=a.setTimeout(function(){Ta.abort("timeout")},R.timeout));try{var $a=!1;y.send(Va,w)}catch(Qa){if($a)throw Qa;w(-1,Qa)}}else w(-1,"No Transport");
return Ta},getJSON:function(f,t,w){return A.get(f,t,w,"json")},getScript:function(f,t){return A.get(f,void 0,t,"script")}});A.each(["get","post"],function(f,t){A[t]=function(w,y,B,E){return fb(y)&&(E=E||B,B=y,y=void 0),A.ajax(A.extend({url:w,type:t,dataType:E,data:y,success:B},A.isPlainObject(w)&&w))}});A.ajaxPrefilter(function(f){for(var t in f.headers)"content-type"===t.toLowerCase()&&(f.contentType=f.headers[t]||"")});A._evalUrl=function(f,t,w){return A.ajax({url:f,type:"GET",dataType:"script",
cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(y){A.globalEval(y,t,w)}})};A.fn.extend({wrapAll:function(f){var t;return this[0]&&(fb(f)&&(f=f.call(this[0])),t=A(f,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var w=this;w.firstElementChild;)w=w.firstElementChild;return w}).append(this)),this},wrapInner:function(f){return fb(f)?this.each(function(t){A(this).wrapInner(f.call(this,t))}):this.each(function(){var t=
A(this),w=t.contents();w.length?w.wrapAll(f):t.append(f)})},wrap:function(f){var t=fb(f);return this.each(function(w){A(this).wrapAll(t?f.call(this,w):f)})},unwrap:function(f){return this.parent(f).not("body").each(function(){A(this).replaceWith(this.childNodes)}),this}});A.expr.pseudos.hidden=function(f){return!A.expr.pseudos.visible(f)};A.expr.pseudos.visible=function(f){return!!(f.offsetWidth||f.offsetHeight||f.getClientRects().length)};A.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(f){}};
var Sf={0:200,1223:204},qd=A.ajaxSettings.xhr();Wa.cors=!!qd&&"withCredentials"in qd;Wa.ajax=qd=!!qd;A.ajaxTransport(function(f){var t,w;if(Wa.cors||qd&&!f.crossDomain)return{send:function(y,B){var E,K=f.xhr();if(K.open(f.type,f.url,f.async,f.username,f.password),f.xhrFields)for(E in f.xhrFields)K[E]=f.xhrFields[E];for(E in f.mimeType&&K.overrideMimeType&&K.overrideMimeType(f.mimeType),f.crossDomain||y["X-Requested-With"]||(y["X-Requested-With"]="XMLHttpRequest"),y)K.setRequestHeader(E,y[E]);t=function(O){return function(){t&&
(t=w=K.onload=K.onerror=K.onabort=K.ontimeout=K.onreadystatechange=null,"abort"===O?K.abort():"error"===O?"number"!=typeof K.status?B(0,"error"):B(K.status,K.statusText):B(Sf[K.status]||K.status,K.statusText,"text"!==(K.responseType||"text")||"string"!=typeof K.responseText?{binary:K.response}:{text:K.responseText},K.getAllResponseHeaders()))}};K.onload=t();w=K.onerror=K.ontimeout=t("error");void 0!==K.onabort?K.onabort=w:K.onreadystatechange=function(){4===K.readyState&&a.setTimeout(function(){t&&
w()})};t=t("abort");try{K.send(f.hasContent&&f.data||null)}catch(O){if(t)throw O;}},abort:function(){t&&t()}}});A.ajaxPrefilter(function(f){f.crossDomain&&(f.contents.script=!1)});A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(f){return A.globalEval(f),f}}});A.ajaxPrefilter("script",function(f){void 0===f.cache&&(f.cache=!1);f.crossDomain&&(f.type=
"GET")});A.ajaxTransport("script",function(f){if(f.crossDomain||f.scriptAttrs){var t,w;return{send:function(y,B){t=A("<script>").attr(f.scriptAttrs||{}).prop({charset:f.scriptCharset,src:f.url}).on("load error",w=function(E){t.remove();w=null;E&&B("error"===E.type?404:200,E.type)});Za.head.appendChild(t[0])},abort:function(){w&&w()}}}});var ei=[],Fg=/(=)\?(?=&|$)|\?\?/;A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var f=ei.pop()||A.expando+"_"+Cg++;return this[f]=!0,f}});A.ajaxPrefilter("json jsonp",
function(f,t,w){var y,B,E,K=!1!==f.jsonp&&(Fg.test(f.url)?"url":"string"==typeof f.data&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fg.test(f.data)&&"data");if(K||"jsonp"===f.dataTypes[0])return y=f.jsonpCallback=fb(f.jsonpCallback)?f.jsonpCallback():f.jsonpCallback,K?f[K]=f[K].replace(Fg,"$1"+y):!1!==f.jsonp&&(f.url+=(Dg.test(f.url)?"&":"?")+f.jsonp+"="+y),f.converters["script json"]=function(){return E||A.error(y+" was not called"),E[0]},f.dataTypes[0]="json",B=a[y],a[y]=
function(){E=arguments},w.always(function(){void 0===B?A(a).removeProp(y):a[y]=B;f[y]&&(f.jsonpCallback=t.jsonpCallback,ei.push(y));E&&fb(B)&&B(E[0]);E=B=void 0}),"script"});Wa.createHTMLDocument=((Ib=Za.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ib.childNodes.length);A.parseHTML=function(f,t,w){var y,B,E;return"string"!=typeof f?[]:("boolean"==typeof t&&(w=t,t=!1),t||(Wa.createHTMLDocument?((y=(t=Za.implementation.createHTMLDocument("")).createElement("base")).href=
Za.location.href,t.head.appendChild(y)):t=Za),B=D.exec(f),E=!w&&[],B)?[t.createElement(B[1])]:(B=U([f],t,E),E&&E.length&&A(E).remove(),A.merge([],B.childNodes))};A.fn.load=function(f,t,w){var y,B,E,K=this,O=f.indexOf(" ");return-1<O&&(y=Ua(f.slice(O)),f=f.slice(0,O)),fb(t)?(w=t,t=void 0):t&&"object"==typeof t&&(B="POST"),0<K.length&&A.ajax({url:f,type:B||"GET",dataType:"html",data:t}).done(function(M){E=arguments;K.html(y?A("<div>").append(A.parseHTML(M)).find(y):M)}).always(w&&function(M,W){K.each(function(){w.apply(this,
E||[M.responseText,W,M])})}),this};A.expr.pseudos.animated=function(f){return A.grep(A.timers,function(t){return f===t.elem}).length};A.offset={setOffset:function(f,t,w){var y,B,E,K=A.css(f,"position"),O=A(f),M={};"static"===K&&(f.style.position="relative");var W=O.offset();var Z=A.css(f,"top");var R=A.css(f,"left");("absolute"===K||"fixed"===K)&&-1<(Z+R).indexOf("auto")?(E=(y=O.position()).top,B=y.left):(E=parseFloat(Z)||0,B=parseFloat(R)||0);fb(t)&&(t=t.call(f,w,A.extend({},W)));null!=t.top&&(M.top=
t.top-W.top+E);null!=t.left&&(M.left=t.left-W.left+B);"using"in t?t.using.call(f,M):O.css(M)}};A.fn.extend({offset:function(f){if(arguments.length)return void 0===f?this:this.each(function(B){A.offset.setOffset(this,f,B)});var t,w,y=this[0];if(y)return y.getClientRects().length?(t=y.getBoundingClientRect(),w=y.ownerDocument.defaultView,{top:t.top+w.pageYOffset,left:t.left+w.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var f,t=this[0],w={top:0,left:0};if("fixed"===A.css(t,"position"))var y=
t.getBoundingClientRect();else{y=this.offset();var B=t.ownerDocument;for(f=t.offsetParent||B.documentElement;f&&(f===B.body||f===B.documentElement)&&"static"===A.css(f,"position");)f=f.parentNode;f&&f!==t&&1===f.nodeType&&(w=A(f).offset(),w.top+=A.css(f,"borderTopWidth",!0),w.left+=A.css(f,"borderLeftWidth",!0))}return{top:y.top-w.top-A.css(t,"marginTop",!0),left:y.left-w.left-A.css(t,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var f=this.offsetParent;f&&"static"===
A.css(f,"position");)f=f.offsetParent;return f||qb})}});A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(f,t){var w="pageYOffset"===t;A.fn[f]=function(y){return xa(this,function(B,E,K){var O;if(hc(B)?O=B:9===B.nodeType&&(O=B.defaultView),void 0===K)return O?O[t]:B[E];O?O.scrollTo(w?O.pageXOffset:K,w?K:O.pageYOffset):B[E]=K},f,y,arguments.length)}});A.each(["top","left"],function(f,t){A.cssHooks[t]=Ub(Wa.pixelPosition,function(w,y){if(y)return y=Ya(w,t),Xe.test(y)?A(w).position()[t]+
"px":y})});A.each({Height:"height",Width:"width"},function(f,t){A.each({padding:"inner"+f,content:t,"":"outer"+f},function(w,y){A.fn[y]=function(B,E){var K=arguments.length&&(w||"boolean"!=typeof B),O=w||(!0===B||!0===E?"margin":"border");return xa(this,function(M,W,Z){var R;return hc(M)?0===y.indexOf("outer")?M["inner"+f]:M.document.documentElement["client"+f]:9===M.nodeType?(R=M.documentElement,Math.max(M.body["scroll"+f],R["scroll"+f],M.body["offset"+f],R["offset"+f],R["client"+f])):void 0===Z?
A.css(M,W,O):A.style(M,W,Z,O)},t,K?B:void 0,K)}})});A.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(f,t){A.fn[t]=function(w){return this.on(t,w)}});A.fn.extend({bind:function(f,t,w){return this.on(f,null,t,w)},unbind:function(f,t){return this.off(f,null,t)},delegate:function(f,t,w,y){return this.on(t,f,w,y)},undelegate:function(f,t,w){return 1==arguments.length?this.off(f,"**"):this.off(t,f||"**",w)},hover:function(f,t){return this.on("mouseenter",f).on("mouseleave",
t||f)}});A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(f,t){A.fn[t]=function(w,y){return 0<arguments.length?this.on(t,null,w,y):this.trigger(t)}});var Tf=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;A.proxy=function(f,t){var w,y,B;if("string"==typeof t&&(w=f[t],t=f,f=w),fb(f))return y=nb.call(arguments,2),(B=function(){return f.apply(t||
this,y.concat(nb.call(arguments)))}).guid=f.guid=f.guid||A.guid++,B};A.holdReady=function(f){f?A.readyWait++:A.ready(!0)};A.isArray=Array.isArray;A.parseJSON=JSON.parse;A.nodeName=p;A.isFunction=fb;A.isWindow=hc;A.camelCase=v;A.type=b;A.now=Date.now;A.isNumeric=function(f){var t=A.type(f);return("number"===t||"string"===t)&&!isNaN(f-parseFloat(f))};A.trim=function(f){return null==f?"":(f+"").replace(Tf,"$1")};"function"==typeof define&&define.amd&&define("jquery",[],function(){return A});var q=a.jQuery,
z=a.$;return A.noConflict=function(f){return a.$===A&&(a.$=z),f&&a.jQuery===A&&(a.jQuery=q),A},void 0===c&&(a.jQuery=a.$=A),A};"object"==typeof ia?ia=kk.document?Hk(kk,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return Hk(a)}:Hk(kk);var Bo={};Bo=function(){function a(q,z){return z&&`${z}::${rd++}`||q.uidEvent||rd++}function c(q){let z=a(q);return q.uidEvent=z,Za[z]=Za[z]||{},Za[z]}function d(q,z,f=null){return Object.values(q).find(t=>t.callable===z&&t.delegationSelector===
f)}function b(q,z,f){let t="string"==typeof z,w=k(q);return A.has(w)||(w=q),[t,t?f:z||f,w]}function g(q,z,f,t,w){var y,B;if("string"==typeof z&&q){var [E,K,O]=b(z,f,t);if(z in sd){let W;W=K;K=function(Z){if(!Z.relatedTarget||Z.relatedTarget!==Z.delegateTarget&&!Z.delegateTarget.contains(Z.relatedTarget))return W.call(this,Z)}}t=c(q);t=t[O]||(t[O]={});var M=d(t,K,E?f:null);if(M)return void(M.oneOff=M.oneOff&&w);z=a(K,z.replace(Wa,""));M=E?(y=K,function R(Z){let oa=q.querySelectorAll(f);for(let {target:ta}=
Z;ta&&ta!==this;ta=ta.parentNode)for(let wa of oa)if(wa===ta)return e(Z,{delegateTarget:ta}),R.oneOff&&ua.off(q,Z.type,f,y),y.apply(ta,[Z])}):(B=K,function oa(R){return e(R,{delegateTarget:q}),oa.oneOff&&ua.off(q,R.type,B),B.apply(q,[R])});M.delegationSelector=E?f:null;M.callable=K;M.oneOff=w;M.uidEvent=z;t[z]=M;q.addEventListener(O,M,E)}}function p(q,z,f,t,w){(t=d(z[f],t,w))&&(q.removeEventListener(f,t,!!w),delete z[f][t.uidEvent])}function k(q){return sd[q=q.replace(fb,"")]||q}function e(q,z={}){for(let [f,
t]of Object.entries(z))try{q[f]=t}catch(w){Object.defineProperty(q,f,{configurable:!0,get:()=>t})}return q}function l(q){if("true"===q)return!0;if("false"===q)return!1;if(q===Number(q).toString())return Number(q);if(""===q||"null"===q)return null;if("string"!=typeof q)return q;try{return JSON.parse(decodeURIComponent(q))}catch(z){return q}}function m(q){return q.replace(/[A-Z]/g,z=>`-${z.toLowerCase()}`)}function h(q){return q?(q.nodeName||"").toLowerCase():null}function n(q){return null==q?window:
"[object Window]"!==q.toString()?(q=q.ownerDocument)&&q.defaultView||window:q}function r(q){return q instanceof n(q).Element||q instanceof Element}function u(q){return q instanceof n(q).HTMLElement||q instanceof HTMLElement}function v(q){return"undefined"!=typeof ShadowRoot&&(q instanceof n(q).ShadowRoot||q instanceof ShadowRoot)}function x(q){return q.split("-")[0]}function C(){var q=navigator.userAgentData;return null!=q&&q.brands&&Array.isArray(q.brands)?q.brands.map(function(z){return z.brand+
"/"+z.version}).join(" "):navigator.userAgent}function J(){return!/^((?!chrome|android).)*safari/i.test(C())}function H(q,z,f){void 0===z&&(z=!1);void 0===f&&(f=!1);var t=q.getBoundingClientRect(),w=1,y=1;z&&u(q)&&(w=0<q.offsetWidth&&Sa(t.width)/q.offsetWidth||1,y=0<q.offsetHeight&&Sa(t.height)/q.offsetHeight||1);q=(r(q)?n(q):window).visualViewport;z=!J()&&f;f=(t.left+(z&&q?q.offsetLeft:0))/w;q=(t.top+(z&&q?q.offsetTop:0))/y;w=t.width/w;t=t.height/y;return{width:w,height:t,top:q,right:f+w,bottom:q+
t,left:f,x:f,y:q}}function G(q){var z=H(q),f=q.offsetWidth,t=q.offsetHeight;return 1>=Math.abs(z.width-f)&&(f=z.width),1>=Math.abs(z.height-t)&&(t=z.height),{x:q.offsetLeft,y:q.offsetTop,width:f,height:t}}function L(q,z){var f=z.getRootNode&&z.getRootNode();if(q.contains(z))return!0;if(f&&v(f)){do{if(z&&q.isSameNode(z))return!0;z=z.parentNode||z.host}while(z)}return!1}function U(q){return n(q).getComputedStyle(q)}function T(q){return((r(q)?q.ownerDocument:q.document)||window.document).documentElement}
function Y(q){return"html"===h(q)?q:q.assignedSlot||q.parentNode||(v(q)?q.host:null)||T(q)}function ea(q){return u(q)&&"fixed"!==U(q).position?q.offsetParent:null}function ja(q){for(var z=n(q),f=ea(q);f&&0<=["table","td","th"].indexOf(h(f))&&"static"===U(f).position;)f=ea(f);if(!f||"html"!==h(f)&&("body"!==h(f)||"static"!==U(f).position)){if(!f)a:{f=/firefox/i.test(C());if(!/Trident/i.test(C())||!u(q)||"fixed"!==U(q).position)for(q=Y(q),v(q)&&(q=q.host);u(q)&&0>["html","body"].indexOf(h(q));){var t=
U(q);if("none"!==t.transform||"none"!==t.perspective||"paint"===t.contain||-1!==["transform","perspective"].indexOf(t.willChange)||f&&"filter"===t.willChange||f&&t.filter&&"none"!==t.filter){f=q;break a}q=q.parentNode}f=null}z=f||z}return z}function ra(q){return 0<=["top","bottom"].indexOf(q)?"x":"y"}function Oa(q){return Object.assign({},{top:0,right:0,bottom:0,left:0},q)}function V(q,z){return z.reduce(function(f,t){return f[t]=q,f},{})}function Ga(q){return q.split("-")[1]}function qa(q){var z,
f=q.popper,t=q.popperRect,w=q.placement,y=q.variation,B=q.offsets,E=q.position,K=q.gpuAcceleration,O=q.adaptive,M=q.roundOffsets,W=q.isFixed;q=B.x;q=void 0===q?0:q;var Z=B.y;Z=void 0===Z?0:Z;Z="function"==typeof M?M({x:q,y:Z}):{x:q,y:Z};q=Z.x;Z=Z.y;var R=B.hasOwnProperty("x");B=B.hasOwnProperty("y");var oa="left",ta="top",wa=window;if(O){var Aa=ja(f),Xa="clientHeight",Va="clientWidth";Aa===n(f)&&"static"!==U(Aa=T(f)).position&&"absolute"===E&&(Xa="scrollHeight",Va="scrollWidth");("top"===w||("left"===
w||"right"===w)&&"end"===y)&&(ta="bottom",Z-=(W&&Aa===wa&&wa.visualViewport?wa.visualViewport.height:Aa[Xa])-t.height,Z*=K?1:-1);"left"!==w&&("top"!==w&&"bottom"!==w||"end"!==y)||(oa="right",q-=(W&&Aa===wa&&wa.visualViewport?wa.visualViewport.width:Aa[Va])-t.width,q*=K?1:-1)}var Ra,wb,Ta,$a,Qa,cb;t=Object.assign({position:E},O&&sb);M=!0===M?(Ra={x:q,y:Z},wb=n(f),Ta=Ra.x,$a=Ra.y,{x:Sa(Ta*(Qa=wb.devicePixelRatio||1))/Qa||0,y:Sa($a*Qa)/Qa||0}):{x:q,y:Z};return q=M.x,Z=M.y,K?Object.assign({},t,((cb={})[ta]=
B?"0":"",cb[oa]=R?"0":"",cb.transform=1>=(wa.devicePixelRatio||1)?"translate("+q+"px, "+Z+"px)":"translate3d("+q+"px, "+Z+"px, 0)",cb)):Object.assign({},t,((z={})[ta]=B?Z+"px":"",z[oa]=R?q+"px":"",z.transform="",z))}function pb(q){return q.replace(/left|right|bottom|top/g,function(z){return af[z]})}function Ya(q){return q.replace(/start|end/g,function(z){return Uh[z]})}function Ub(q){q=n(q);return{scrollLeft:q.pageXOffset,scrollTop:q.pageYOffset}}function Lb(q){return H(T(q)).left+Ub(q).scrollLeft}
function Ka(q){q=U(q);return/auto|scroll|overlay|hidden/.test(q.overflow+q.overflowY+q.overflowX)}function Ma(q,z){void 0===z&&(z=[]);var f,t=function B(y){return 0<=["html","body","#document"].indexOf(h(y))?y.ownerDocument.body:u(y)&&Ka(y)?y:B(Y(y))}(q);q=t===(null==(f=q.ownerDocument)?void 0:f.body);f=n(t);t=q?[f].concat(f.visualViewport||[],Ka(t)?t:[]):t;z=z.concat(t);return q?z:z.concat(Ma(Y(t)))}function ka(q){return Object.assign({},q,{left:q.x,top:q.y,right:q.x+q.width,bottom:q.y+q.height})}
function Ba(q,z,f){var t,w,y,B,E,K,O;if("viewport"===z){z=n(q);var M=T(q);z=z.visualViewport;var W=M.clientWidth;M=M.clientHeight;var Z=t=0;z&&(W=z.width,M=z.height,((w=J())||!w&&"fixed"===f)&&(t=z.offsetLeft,Z=z.offsetTop));q={width:W,height:M,x:t+Lb(q),y:Z};f=ka(q)}else f=r(z)?((W=H(z,!1,"fixed"===f)).top=W.top+z.clientTop,W.left+=z.clientLeft,W.bottom=W.top+z.clientHeight,W.right=W.left+z.clientWidth,W.width=z.clientWidth,W.height=z.clientHeight,W.x=W.left,W.y=W.top,W):ka((M=T(q),Z=T(M),w=Ub(M),
y=null==(t=M.ownerDocument)?void 0:t.body,B=Ea(Z.scrollWidth,Z.clientWidth,y?y.scrollWidth:0,y?y.clientWidth:0),E=Ea(Z.scrollHeight,Z.clientHeight,y?y.scrollHeight:0,y?y.clientHeight:0),K=-w.scrollLeft+Lb(M),O=-w.scrollTop,"rtl"===U(y||Z).direction&&(K+=Ea(Z.clientWidth,y?y.clientWidth:0)-B),{width:B,height:E,x:K,y:O}));return f}function ya(q){var z=q.reference,f=q.element,t=(q=q.placement)?x(q):null;q=q?Ga(q):null;var w=z.x+z.width/2-f.width/2;var y=z.y+z.height/2-f.height/2;switch(t){case "top":w=
{x:w,y:z.y-f.height};break;case "bottom":w={x:w,y:z.y+z.height};break;case "right":w={x:z.x+z.width,y};break;case "left":w={x:z.x-f.width,y};break;default:w={x:z.x,y:z.y}}t=t?ra(t):null;if(null!=t)switch(y="y"===t?"height":"width",q){case "start":w[t]-=z[y]/2-f[y]/2;break;case "end":w[t]+=z[y]/2-f[y]/2}return w}function ha(q,z){void 0===z&&(z={});var f,t,w,y,B,E,K=z;z=K.placement;z=void 0===z?q.placement:z;var O=K.strategy,M=void 0===O?q.strategy:O;O=K.boundary;var W=void 0===O?"clippingParents":
O,Z=K.rootBoundary;O=K.elementContext;O=void 0===O?"popper":O;var R=K.altBoundary;K=K.padding;K=void 0===K?0:K;K=Oa("number"!=typeof K?K:V(K,hb));var oa=q.rects.popper;R=q.elements[void 0!==R&&R?"popper"===O?"reference":"popper":O];R=(f=r(R)?R:R.contextElement||T(q.elements.popper),B=(y=[].concat("clippingParents"===W?(t=Ma(Y(f)),r(w=0<=["absolute","fixed"].indexOf(U(f).position)&&u(f)?ja(f):f)?t.filter(function(Aa){return r(Aa)&&L(Aa,w)&&"body"!==h(Aa)}):[]):[].concat(W),[void 0===Z?"viewport":Z]))[0],
(E=y.reduce(function(Aa,Xa){Xa=Ba(f,Xa,M);return Aa.top=Ea(Xa.top,Aa.top),Aa.right=La(Xa.right,Aa.right),Aa.bottom=La(Xa.bottom,Aa.bottom),Aa.left=Ea(Xa.left,Aa.left),Aa},Ba(f,B,M))).width=E.right-E.left,E.height=E.bottom-E.top,E.x=E.left,E.y=E.top,E);t=H(q.elements.reference);y=ya({reference:t,element:oa,strategy:"absolute",placement:z});y=ka(Object.assign({},oa,y));t="popper"===O?y:t;var ta={top:R.top-t.top+K.top,bottom:t.bottom-R.bottom+K.bottom,left:R.left-t.left+K.left,right:t.right-R.right+
K.right};q=q.modifiersData.offset;if("popper"===O&&q){var wa=q[z];Object.keys(ta).forEach(function(Aa){var Xa=0<=["right","bottom"].indexOf(Aa)?1:-1,Va=0<=["top","bottom"].indexOf(Aa)?"y":"x";ta[Aa]+=wa[Va]*Xa})}return ta}function Pa(q,z,f){return void 0===f&&(f={x:0,y:0}),{top:q.top-z.height-f.y,right:q.right-z.width+f.x,bottom:q.bottom-z.height+f.y,left:q.left-z.width-f.x}}function pa(q){return["top","right","bottom","left"].some(function(z){return 0<=q[z]})}function Ua(){for(var q=arguments.length,
z=Array(q),f=0;f<q;f++)z[f]=arguments[f];return!z.some(function(t){return!(t&&"function"==typeof t.getBoundingClientRect)})}function Ja(q){void 0===q&&(q={});var z=q.defaultModifiers,f=void 0===z?[]:z;q=q.defaultOptions;var t=void 0===q?Yh:q;return function(w,y,B){function E(){W.forEach(function(oa){return oa()});W=[]}void 0===B&&(B=t);var K,O,M={placement:"bottom",orderedModifiers:[],options:Object.assign({},Yh,t),modifiersData:{},elements:{reference:w,popper:y},attributes:{},styles:{}},W=[],Z=!1,
R={state:M,setOptions:function(oa){oa="function"==typeof oa?oa(M.options):oa;E();M.options=Object.assign({},t,M.options,oa);M.scrollParents={reference:r(w)?Ma(w):w.contextElement?Ma(w.contextElement):[],popper:Ma(y)};var ta,wa,Aa,Xa,Va;oa=(ta=Object.keys(Va=[].concat(f,M.options.modifiers).reduce(function(Ra,wb){var Ta=Ra[wb.name];return Ra[wb.name]=Ta?Object.assign({},Ta,wb,{options:Object.assign({},Ta.options,wb.options),data:Object.assign({},Ta.data,wb.data)}):wb,Ra},{})).map(function(Ra){return Va[Ra]}),
wa=new Map,Aa=new Set,Xa=[],ta.forEach(function(Ra){wa.set(Ra.name,Ra)}),ta.forEach(function(Ra){Aa.has(Ra.name)||function $a(Ta){Aa.add(Ta.name);[].concat(Ta.requires||[],Ta.requiresIfExists||[]).forEach(function(Qa){Aa.has(Qa)||(Qa=wa.get(Qa))&&$a(Qa)});Xa.push(Ta)}(Ra)}),ec.reduce(function(Ra,wb){return Ra.concat(Xa.filter(function(Ta){return Ta.phase===wb}))},[]));return M.orderedModifiers=oa.filter(function(Ra){return Ra.enabled}),M.orderedModifiers.forEach(function(Ra){var wb=Ra.name,Ta=Ra.options;
Ra=Ra.effect;"function"==typeof Ra&&(wb=Ra({state:M,name:wb,instance:R,options:void 0===Ta?{}:Ta}),W.push(wb||function(){}))}),R.update()},forceUpdate:function(){if(!Z){var oa=M.elements,ta=oa.reference;oa=oa.popper;if(Ua(ta,oa)){M.rects={reference:(wa=ja(oa),Aa="fixed"===M.options.strategy,wb=u(wa),Ta=u(wa)&&(Va=Sa((Xa=wa.getBoundingClientRect()).width)/wa.offsetWidth||1,Ra=Sa(Xa.height)/wa.offsetHeight||1,1!==Va||1!==Ra),$a=T(wa),Qa=H(ta,Ta,Aa),cb={scrollLeft:0,scrollTop:0},Fb={x:0,y:0},(wb||!wb&&
!Aa)&&(("body"!==h(wa)||Ka($a))&&(cb=wa!==n(wa)&&u(wa)?{scrollLeft:wa.scrollLeft,scrollTop:wa.scrollTop}:Ub(wa)),u(wa)?((Fb=H(wa,!0)).x+=wa.clientLeft,Fb.y+=wa.clientTop):$a&&(Fb.x=Lb($a))),{x:Qa.left+cb.scrollLeft-Fb.x,y:Qa.top+cb.scrollTop-Fb.y,width:Qa.width,height:Qa.height}),popper:G(oa)};M.reset=!1;M.placement=M.options.placement;M.orderedModifiers.forEach(function(cd){return M.modifiersData[cd.name]=Object.assign({},cd.data)});var wa,Aa,Xa,Va,Ra,wb,Ta,$a,Qa,cb,Fb;for(ta=0;ta<M.orderedModifiers.length;ta++)!0!==
M.reset?(Aa=M.orderedModifiers[ta],wa=Aa.fn,Xa=Aa.options,Xa=void 0===Xa?{}:Xa,Aa=Aa.name,"function"==typeof wa&&(M=wa({state:M,options:Xa,name:Aa,instance:R})||M)):(M.reset=!1,ta=-1)}}},update:(K=function(){return new Promise(function(oa){R.forceUpdate();oa(M)})},function(){return O||=new Promise(function(oa){Promise.resolve().then(function(){O=void 0;oa(K())})}),O}),destroy:function(){E();Z=!0}};return Ua(w,y)?(R.setOptions(B).then(function(oa){!Z&&B.onFirstUpdate&&B.onFirstUpdate(oa)}),R):R}}let ob=
new Map,lc={set(q,z,f){ob.has(q)||ob.set(q,new Map);q=ob.get(q);q.has(z)||0===q.size?q.set(z,f):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(q.keys())[0]}.`)},get:(q,z)=>ob.has(q)&&ob.get(q).get(z)||null,remove(q,z){if(ob.has(q)){var f=ob.get(q);f.delete(z);0===f.size&&ob.delete(q)}}},wc=q=>(q&&window.CSS&&window.CSS.escape&&(q=q.replace(/#([^\s"#']+)/g,(z,f)=>`#${CSS.escape(f)}`)),q),Wb=q=>!(!q||"object"!=typeof q)&&(void 0!==q.jquery&&(q=
q[0]),void 0!==q.nodeType),Ib=q=>Wb(q)?q.jquery?q[0]:q:"string"==typeof q&&0<q.length?document.querySelector(wc(q)):null,vb=q=>{if(!Wb(q)||0===q.getClientRects().length)return!1;let z="visible"===getComputedStyle(q).getPropertyValue("visibility"),f=q.closest("details:not([open])");return f?f!==q&&((q=q.closest("summary"))&&q.parentNode!==f||null===q)?!1:z:z},fc=q=>!q||q.nodeType!==Node.ELEMENT_NODE||!!q.classList.contains("disabled")||(void 0!==q.disabled?q.disabled:q.hasAttribute("disabled")&&"false"!==
q.getAttribute("disabled")),nb=q=>document.documentElement.attachShadow?"function"==typeof q.getRootNode?(q=q.getRootNode(),q instanceof ShadowRoot?q:null):q instanceof ShadowRoot?q:q.parentNode?nb(q.parentNode):null:null,ub=()=>{},ib=q=>{q.offsetHeight},cc=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,yb=[],$b=q=>{var z=()=>{let f=cc();if(f){let t=q.NAME,w=f.fn[t];f.fn[t]=q.jQueryInterface;f.fn[t].Constructor=q;f.fn[t].noConflict=()=>(f.fn[t]=w,q.jQueryInterface)}};
"loading"===document.readyState?(yb.length||document.addEventListener("DOMContentLoaded",()=>{for(let f of yb)f()}),yb.push(z)):z()},Pb=(q,z=[],f=q)=>"function"==typeof q?q(...z):f,ed=(q,z,f=!0)=>{if(!f)return void Pb(q);f=(y=>{if(!y)return 0;let {transitionDuration:B,transitionDelay:E}=window.getComputedStyle(y);y=Number.parseFloat(B);let K=Number.parseFloat(E);return y||K?(B=B.split(",")[0],E=E.split(",")[0],1E3*(Number.parseFloat(B)+Number.parseFloat(E))):0})(z)+5;let t=!1,w=({target:y})=>{y===
z&&(t=!0,z.removeEventListener("transitionend",w),Pb(q))};z.addEventListener("transitionend",w);setTimeout(()=>{t||z.dispatchEvent(new Event("transitionend"))},f)},qc=(q,z,f,t)=>{let w=q.length;z=q.indexOf(z);return-1===z?!f&&t?q[w-1]:q[0]:(z+=f?1:-1,t&&(z=(z+w)%w),q[Math.max(0,Math.min(z,w-1))])},Wa=/[^.]*(?=\..*)\.|.*/,fb=/\..*/,hc=/::\d+$/,Za={},rd=1,sd={mouseenter:"mouseover",mouseleave:"mouseout"},A=new Set("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange touchstart touchmove touchend touchcancel pointerdown pointermove pointerup pointerleave pointercancel gesturestart gesturechange gestureend focus blur change reset select submit focusin focusout load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll".split(" ")),
ua={on(q,z,f,t){g(q,z,f,t,!1)},one(q,z,f,t){g(q,z,f,t,!0)},off(q,z,f,t){if("string"==typeof z&&q){var [w,y,B]=b(z,f,t);t=B!==z;var E=c(q),K=E[B]||{},O=z.startsWith(".");if(void 0===y){if(O)for(var M of Object.keys(E)){f=q;O=E;var W=M,Z=z.slice(1);for(let [R,oa]of Object.entries(O[W]||{}))R.includes(Z)&&p(f,O,W,oa.callable,oa.delegationSelector);!0}for(let [R,oa]of Object.entries(K))M=R.replace(hc,""),t&&!z.includes(M)||p(q,E,B,oa.callable,oa.delegationSelector)}else Object.keys(K).length&&p(q,E,B,
y,w?f:null)}},trigger(q,z,f){if("string"!=typeof z||!q)return null;let t=cc(),w=null,y=!0,B=!0,E=!1;z!==k(z)&&t&&(w=t.Event(z,f),t(q).trigger(w),y=!w.isPropagationStopped(),B=!w.isImmediatePropagationStopped(),E=w.isDefaultPrevented());z=e(new Event(z,{bubbles:y,cancelable:!0}),f);return E&&z.preventDefault(),B&&q.dispatchEvent(z),z.defaultPrevented&&w&&w.preventDefault(),z}},Kc={setDataAttribute(q,z,f){q.setAttribute(`data-bs-${m(z)}`,f)},removeDataAttribute(q,z){q.removeAttribute(`data-bs-${m(z)}`)},
getDataAttributes(q){if(!q)return{};let z={};for(let f of Object.keys(q.dataset).filter(t=>t.startsWith("bs")&&!t.startsWith("bsConfig"))){let t=f.replace(/^bs/,"");z[t=t.charAt(0).toLowerCase()+t.slice(1,t.length)]=l(q.dataset[f])}return z},getDataAttribute:(q,z)=>l(q.getAttribute(`data-bs-${m(z)}`))};class kd{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw Error('You have to implement the static method "NAME", for each component!');}_getConfig(q){return q=
this._mergeConfigObj(q),q=this._configAfterMerge(q),this._typeCheckConfig(q),q}_configAfterMerge(q){return q}_mergeConfigObj(q,z){let f=Wb(z)?Kc.getDataAttribute(z,"config"):{};return{...this.constructor.Default,...("object"==typeof f?f:{}),...(Wb(z)?Kc.getDataAttributes(z):{}),...("object"==typeof q?q:{})}}_typeCheckConfig(q,z=this.constructor.DefaultType){for(let [f,t]of Object.entries(z))if(z=q[f],z=Wb(z)?"element":null==z?`${z}`:Object.prototype.toString.call(z).match(/\s([a-z]+)/i)[1].toLowerCase(),
!(new RegExp(t)).test(z))throw TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${f}" provided type "${z}" but expected type "${t}".`);}}class gc extends kd{dispose(){for(let q of(lc.remove(this._element,this.constructor.DATA_KEY),ua.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this)))this[q]=null}_queueCallback(q,z,f=!0){ed(q,z,f)}_getConfig(q){return q=this._mergeConfigObj(q,this._element),q=this._configAfterMerge(q),this._typeCheckConfig(q),q}static getInstance(q){return lc.get(Ib(q),
this.DATA_KEY)}static getOrCreateInstance(q,z={}){return this.getInstance(q)||new this(q,"object"==typeof z?z:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(q){return`${q}${this.EVENT_KEY}`}constructor(q,z){super();(q=Ib(q))&&(this._element=q,this._config=this._getConfig(z),lc.set(this._element,this.constructor.DATA_KEY,this))}}let Fd=q=>{let z=q.getAttribute("data-bs-target");if(!z||"#"===z){q=
q.getAttribute("href");if(!q||!q.includes("#")&&!q.startsWith("."))return null;q.includes("#")&&!q.startsWith("#")&&(q=`#${q.split("#")[1]}`);z=q&&"#"!==q?q.trim():null}return z?z.split(",").map(f=>wc(f)).join(","):null},va={find:(q,z=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(z,q)),findOne:(q,z=document.documentElement)=>Element.prototype.querySelector.call(z,q),children:(q,z)=>[].concat(...q.children).filter(f=>f.matches(z)),parents(q,z){let f=[];for(q=q.parentNode.closest(z);q;)f.push(q),
q=q.parentNode.closest(z);return f},prev(q,z){for(q=q.previousElementSibling;q;){if(q.matches(z))return[q];q=q.previousElementSibling}return[]},next(q,z){for(q=q.nextElementSibling;q;){if(q.matches(z))return[q];q=q.nextElementSibling}return[]},focusableChildren(q){let z='a button input textarea select details [tabindex] [contenteditable="true"]'.split(" ").map(f=>`${f}:not([tabindex^="-"])`).join(",");return this.find(z,q).filter(f=>!fc(f)&&vb(f))},getSelectorFromElement(q){return(q=Fd(q))&&va.findOne(q)?
q:null},getElementFromSelector(q){return(q=Fd(q))?va.findOne(q):null},getMultipleElementsFromSelector(q){return(q=Fd(q))?va.find(q):[]}},rc=(q,z="hide")=>{let f=q.NAME;ua.on(document,`click.dismiss${q.EVENT_KEY}`,`[data-bs-dismiss="${f}"]`,function(t){(["A","AREA"].includes(this.tagName)&&t.preventDefault(),fc(this))||(t=va.getElementFromSelector(this)||this.closest(`.${f}`),q.getOrCreateInstance(t)[z]())})};class Lc extends gc{static get NAME(){return"alert"}close(){if(!ua.trigger(this._element,
"close.bs.alert").defaultPrevented){this._element.classList.remove("show");var q=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,q)}}_destroyElement(){this._element.remove();ua.trigger(this._element,"closed.bs.alert");this.dispose()}static jQueryInterface(q){return this.each(function(){let z=Lc.getOrCreateInstance(this);if("string"==typeof q){if(void 0===z[q]||q.startsWith("_")||"constructor"===q)throw TypeError(`No method named "${q}"`);z[q](this)}})}}
rc(Lc,"close");$b(Lc);class D extends gc{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(q){return this.each(function(){let z=D.getOrCreateInstance(this);"toggle"===q&&z[q]()})}}ua.on(document,"click.bs.button.data-api",'[data-bs-toggle="button"]',q=>{q.preventDefault();q=q.target.closest('[data-bs-toggle="button"]');D.getOrCreateInstance(q).toggle()});$b(D);let P={endCallback:null,leftCallback:null,
rightCallback:null},da={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class fa extends kd{static get Default(){return P}static get DefaultType(){return da}static get NAME(){return"swipe"}dispose(){ua.off(this._element,".bs.swipe")}_start(q){this._supportPointerEvents?this._eventIsPointerPenTouch(q)&&(this._deltaX=q.clientX):this._deltaX=q.touches[0].clientX}_end(q){this._eventIsPointerPenTouch(q)&&(this._deltaX=q.clientX-this._deltaX);this._handleSwipe();
Pb(this._config.endCallback)}_move(q){this._deltaX=q.touches&&1<q.touches.length?0:q.touches[0].clientX-this._deltaX}_handleSwipe(){var q=Math.abs(this._deltaX);40>=q||(q/=this._deltaX,this._deltaX=0,q&&Pb(0<q?this._config.rightCallback:this._config.leftCallback))}_initEvents(){this._supportPointerEvents?(ua.on(this._element,"pointerdown.bs.swipe",q=>this._start(q)),ua.on(this._element,"pointerup.bs.swipe",q=>this._end(q)),this._element.classList.add("pointer-event")):(ua.on(this._element,"touchstart.bs.swipe",
q=>this._start(q)),ua.on(this._element,"touchmove.bs.swipe",q=>this._move(q)),ua.on(this._element,"touchend.bs.swipe",q=>this._end(q)))}_eventIsPointerPenTouch(q){return this._supportPointerEvents&&("pen"===q.pointerType||"touch"===q.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||0<navigator.maxTouchPoints}constructor(q,z){super();(this._element=q)&&fa.isSupported()&&(this._config=this._getConfig(z),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,
this._initEvents())}}let F={ArrowLeft:"right",ArrowRight:"left"},N={interval:5E3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ca={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class la extends gc{static get Default(){return N}static get DefaultType(){return ca}static get NAME(){return"carousel"}next(){this._slide("next")}nextWhenVisible(){!document.hidden&&vb(this._element)&&this.next()}prev(){this._slide("prev")}pause(){this._isSliding&&
this._element.dispatchEvent(new Event("transitionend"));this._clearInterval()}cycle(){this._clearInterval();this._updateInterval();this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?ua.one(this._element,"slid.bs.carousel",()=>this.cycle()):this.cycle())}to(q){let z=this._getItems();if(!(q>z.length-1||0>q)){if(this._isSliding)return void ua.one(this._element,"slid.bs.carousel",()=>this.to(q));var f=this._getItemIndex(this._getActive());
f!==q&&this._slide(q>f?"next":"prev",z[q])}}dispose(){this._swipeHelper&&this._swipeHelper.dispose();super.dispose()}_configAfterMerge(q){return q.defaultInterval=q.interval,q}_addEventListeners(){this._config.keyboard&&ua.on(this._element,"keydown.bs.carousel",q=>this._keydown(q));"hover"===this._config.pause&&(ua.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),ua.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle()));this._config.touch&&fa.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let q of va.find(".carousel-item img",
this._element))ua.on(q,"dragstart.bs.carousel",z=>z.preventDefault());this._swipeHelper=new fa(this._element,{leftCallback:()=>this._slide(this._directionToOrder("left")),rightCallback:()=>this._slide(this._directionToOrder("right")),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(q){if(!/input|textarea/i.test(q.target.tagName)){var z=F[q.key];
z&&(q.preventDefault(),this._slide(this._directionToOrder(z)))}}_getItemIndex(q){return this._getItems().indexOf(q)}_setActiveIndicatorElement(q){if(this._indicatorsElement){var z=va.findOne(".active",this._indicatorsElement);z.classList.remove("active");z.removeAttribute("aria-current");(q=va.findOne(`[data-bs-slide-to="${q}"]`,this._indicatorsElement))&&(q.classList.add("active"),q.setAttribute("aria-current","true"))}}_updateInterval(){var q=this._activeElement||this._getActive();q&&(q=Number.parseInt(q.getAttribute("data-bs-interval"),
10),this._config.interval=q||this._config.defaultInterval)}_slide(q,z=null){if(!this._isSliding){var f=this._getActive(),t="next"===q,w=z||qc(this._getItems(),f,t,this._config.wrap);if(w!==f){var y=this._getItemIndex(w),B=O=>ua.trigger(this._element,O,{relatedTarget:w,direction:this._orderToDirection(q),from:this._getItemIndex(f),to:y});if(!B("slide.bs.carousel").defaultPrevented&&f&&w){z=!!this._interval;this.pause();this._isSliding=!0;this._setActiveIndicatorElement(y);this._activeElement=w;var E=
t?"carousel-item-start":"carousel-item-end",K=t?"carousel-item-next":"carousel-item-prev";w.classList.add(K);w.offsetHeight;f.classList.add(E);w.classList.add(E);this._queueCallback(()=>{w.classList.remove(E,K);w.classList.add("active");f.classList.remove("active",K,E);this._isSliding=!1;B("slid.bs.carousel")},f,this._isAnimated());z&&this.cycle()}}}}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return va.findOne(".active.carousel-item",this._element)}_getItems(){return va.find(".carousel-item",
this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(q){return"rtl"===document.documentElement.dir?"left"===q?"prev":"next":"left"===q?"next":"prev"}_orderToDirection(q){return"rtl"===document.documentElement.dir?"prev"===q?"left":"right":"prev"===q?"right":"left"}static jQueryInterface(q){return this.each(function(){let z=la.getOrCreateInstance(this,q);if("number"!=typeof q){if("string"==typeof q){if(void 0===z[q]||q.startsWith("_")||
"constructor"===q)throw TypeError(`No method named "${q}"`);z[q]()}}else z.to(q)})}constructor(q,z){super(q,z);this._activeElement=this._interval=null;this._isSliding=!1;this._swipeHelper=this.touchTimeout=null;this._indicatorsElement=va.findOne(".carousel-indicators",this._element);this._addEventListeners();"carousel"===this._config.ride&&this.cycle()}}ua.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(q){var z=va.getElementFromSelector(this);if(z&&z.classList.contains("carousel"))return q.preventDefault(),
q=la.getOrCreateInstance(z),z=this.getAttribute("data-bs-slide-to"),z?q.to(z):"next"===Kc.getDataAttribute(this,"slide")?q.next():q.prev(),void q._maybeEnableCycle()});ua.on(window,"load.bs.carousel.data-api",()=>{for(let q of va.find('[data-bs-ride="carousel"]'))la.getOrCreateInstance(q)});$b(la);let xa={parent:null,toggle:!0},za={parent:"(null|element)",toggle:"boolean"};class db extends gc{static get Default(){return xa}static get DefaultType(){return za}static get NAME(){return"collapse"}toggle(){this._isShown()?
this.hide():this.show()}show(){if(!this._isTransitioning&&!this._isShown()){var q=[];if(!(this._config.parent&&(q=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(f=>f!==this._element).map(f=>db.getOrCreateInstance(f,{toggle:!1}))),q.length&&q[0]._isTransitioning||ua.trigger(this._element,"show.bs.collapse").defaultPrevented)){for(let f of q)f.hide();var z=this._getDimension();this._element.classList.remove("collapse");this._element.classList.add("collapsing");this._element.style[z]=
0;this._addAriaAndCollapsedClass(this._triggerArray,!0);this._isTransitioning=!0;q=`scroll${z[0].toUpperCase()+z.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1;this._element.classList.remove("collapsing");this._element.classList.add("collapse","show");this._element.style[z]="";ua.trigger(this._element,"shown.bs.collapse")},this._element,!0);this._element.style[z]=`${this._element[q]}px`}}}hide(){if(!this._isTransitioning&&this._isShown()&&!ua.trigger(this._element,"hide.bs.collapse").defaultPrevented){var q=
this._getDimension();for(let z of(this._element.style[q]=`${this._element.getBoundingClientRect()[q]}px`,ib(this._element),this._element.classList.add("collapsing"),this._element.classList.remove("collapse","show"),this._triggerArray)){let f=va.getElementFromSelector(z);f&&!this._isShown(f)&&this._addAriaAndCollapsedClass([z],!1)}this._isTransitioning=!0;this._element.style[q]="";this._queueCallback(()=>{this._isTransitioning=!1;this._element.classList.remove("collapsing");this._element.classList.add("collapse");
ua.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}}_isShown(q=this._element){return q.classList.contains("show")}_configAfterMerge(q){return q.toggle=!!q.toggle,q.parent=Ib(q.parent),q}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(this._config.parent)for(let q of this._getFirstLevelChildren('[data-bs-toggle="collapse"]')){let z=va.getElementFromSelector(q);z&&this._addAriaAndCollapsedClass([q],this._isShown(z))}}_getFirstLevelChildren(q){let z=
va.find(":scope .collapse .collapse",this._config.parent);return va.find(q,this._config.parent).filter(f=>!z.includes(f))}_addAriaAndCollapsedClass(q,z){if(q.length)for(let f of q)f.classList.toggle("collapsed",!z),f.setAttribute("aria-expanded",z)}static jQueryInterface(q){let z={};return"string"==typeof q&&/show|hide/.test(q)&&(z.toggle=!1),this.each(function(){let f=db.getOrCreateInstance(this,z);if("string"==typeof q){if(void 0===f[q])throw TypeError(`No method named "${q}"`);f[q]()}})}constructor(q,
z){for(let f of(super(q,z),this._isTransitioning=!1,this._triggerArray=[],va.find('[data-bs-toggle="collapse"]')))q=va.getSelectorFromElement(f),z=va.find(q).filter(t=>t===this._element),null!==q&&z.length&&this._triggerArray.push(f);this._initializeChildren();this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown());this._config.toggle&&this.toggle()}}ua.on(document,"click.bs.collapse.data-api",'[data-bs-toggle="collapse"]',function(q){for(let z of(("A"===q.target.tagName||
q.delegateTarget&&"A"===q.delegateTarget.tagName)&&q.preventDefault(),va.getMultipleElementsFromSelector(this)))db.getOrCreateInstance(z,{toggle:!1}).toggle()});$b(db);var hb=["top","bottom","right","left"],Da=hb.reduce(function(q,z){return q.concat([z+"-start",z+"-end"])},[]),lb=[].concat(hb,["auto"]).reduce(function(q,z){return q.concat([z,z+"-start",z+"-end"])},[]),ec="beforeRead read afterRead beforeMain main afterMain beforeWrite write afterWrite".split(" ");let xc={name:"applyStyles",enabled:!0,
phase:"write",fn:function(q){var z=q.state;Object.keys(z.elements).forEach(function(f){var t=z.styles[f]||{},w=z.attributes[f]||{},y=z.elements[f];u(y)&&h(y)&&(Object.assign(y.style,t),Object.keys(w).forEach(function(B){var E=w[B];!1===E?y.removeAttribute(B):y.setAttribute(B,!0===E?"":E)}))})},effect:function(q){var z=q.state,f={popper:{position:z.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(z.elements.popper.style,f.popper),z.styles=
f,z.elements.arrow&&Object.assign(z.elements.arrow.style,f.arrow),function(){Object.keys(z.elements).forEach(function(t){var w=z.elements[t],y=z.attributes[t]||{};t=Object.keys(z.styles.hasOwnProperty(t)?z.styles[t]:f[t]).reduce(function(B,E){return B[E]="",B},{});u(w)&&h(w)&&(Object.assign(w.style,t),Object.keys(y).forEach(function(B){w.removeAttribute(B)}))})}},requires:["computeStyles"]};var Ea=Math.max,La=Math.min,Sa=Math.round;let qb={name:"arrow",enabled:!0,phase:"main",fn:function(q){var z,
f=q.state,t=q.name,w=q.options,y=f.elements.arrow,B=f.modifiersData.popperOffsets,E=x(f.placement);q=ra(E);E=0<=["left","right"].indexOf(E)?"height":"width";if(y&&B){var K;w=Oa("number"!=typeof(K="function"==typeof(K=w.padding)?K(Object.assign({},f.rects,{placement:f.placement})):K)?K:V(K,hb));K=G(y);var O="y"===q?"top":"left",M="y"===q?"bottom":"right",W=f.rects.reference[E]+f.rects.reference[q]-B[q]-f.rects.popper[E];B=B[q]-f.rects.reference[q];y=(y=ja(y))?"y"===q?y.clientHeight||0:y.clientWidth||
0:0;B=y/2-K[E]/2+(W/2-B/2);E=Ea(w[O],La(B,y-K[E]-w[M]));f.modifiersData[t]=((z={})[q]=E,z.centerOffset=E-B,z)}},effect:function(q){var z=q.state;q=q.options.element;q=void 0===q?"[data-popper-arrow]":q;null!=q&&("string"!=typeof q||(q=z.elements.popper.querySelector(q)))&&L(z.elements.popper,q)&&(z.elements.arrow=q)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};var sb={top:"auto",right:"auto",bottom:"auto",left:"auto"};let Mc={name:"computeStyles",enabled:!0,phase:"beforeWrite",
fn:function(q){var z=q.state,f=q.options,t=f.gpuAcceleration;q=f.adaptive;f=f.roundOffsets;f=void 0===f||f;t={placement:x(z.placement),variation:Ga(z.placement),popper:z.elements.popper,popperRect:z.rects.popper,gpuAcceleration:void 0===t||t,isFixed:"fixed"===z.options.strategy};null!=z.modifiersData.popperOffsets&&(z.styles.popper=Object.assign({},z.styles.popper,qa(Object.assign({},t,{offsets:z.modifiersData.popperOffsets,position:z.options.strategy,adaptive:void 0===q||q,roundOffsets:f}))));null!=
z.modifiersData.arrow&&(z.styles.arrow=Object.assign({},z.styles.arrow,qa(Object.assign({},t,{offsets:z.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f}))));z.attributes.popper=Object.assign({},z.attributes.popper,{"data-popper-placement":z.placement})},data:{}};var Qc={passive:!0};let Kf={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(q){var z=q.state,f=q.instance;q=q.options;var t=q.scroll,w=void 0===t||t;q=q.resize;var y=void 0===q||q,B=n(z.elements.popper),
E=[].concat(z.scrollParents.reference,z.scrollParents.popper);return w&&E.forEach(function(K){K.addEventListener("scroll",f.update,Qc)}),y&&B.addEventListener("resize",f.update,Qc),function(){w&&E.forEach(function(K){K.removeEventListener("scroll",f.update,Qc)});y&&B.removeEventListener("resize",f.update,Qc)}},data:{}};var af={left:"right",right:"left",bottom:"top",top:"bottom"},Uh={start:"end",end:"start"};let yg={name:"flip",enabled:!0,phase:"main",fn:function(q){var z=q.state,f=q.options;q=q.name;
if(!z.modifiersData[q]._skip){var t=f.mainAxis;t=void 0===t||t;var w=f.altAxis;w=void 0===w||w;var y=f.fallbackPlacements,B=f.padding,E=f.boundary,K=f.rootBoundary,O=f.altBoundary,M=f.flipVariations,W=void 0===M||M,Z=f.allowedAutoPlacements;f=z.options.placement;M=x(f);y=y||(M!==f&&W?function($a){if("auto"===x($a))return[];var Qa=pb($a);return[Ya($a),Qa,Ya(Qa)]}(f):[pb(f)]);var R=[f].concat(y).reduce(function($a,Qa){var cb,Fb,cd,Sb,Nb,Hc,yd,Md,Nc,oc,uc,hd;return $a.concat("auto"===x(Qa)?(Fb=(cb={placement:Qa,
boundary:E,rootBoundary:K,padding:B,flipVariations:W,allowedAutoPlacements:Z}).placement,cd=cb.boundary,Sb=cb.rootBoundary,Nb=cb.padding,Hc=cb.flipVariations,Md=void 0===(yd=cb.allowedAutoPlacements)?lb:yd,0===(uc=(oc=(Nc=Ga(Fb))?Hc?Da:Da.filter(function(Jc){return Ga(Jc)===Nc}):hb).filter(function(Jc){return 0<=Md.indexOf(Jc)})).length&&(uc=oc),Object.keys(hd=uc.reduce(function(Jc,jc){return Jc[jc]=ha(z,{placement:jc,boundary:cd,rootBoundary:Sb,padding:Nb})[x(jc)],Jc},{})).sort(function(Jc,jc){return hd[Jc]-
hd[jc]})):Qa)},[]);f=z.rects.reference;y=z.rects.popper;var oa=new Map;M=!0;for(var ta=R[0],wa=0;wa<R.length;wa++){var Aa=R[wa],Xa=x(Aa),Va="start"===Ga(Aa),Ra=0<=["top","bottom"].indexOf(Xa),wb=Ra?"width":"height",Ta=ha(z,{placement:Aa,boundary:E,rootBoundary:K,altBoundary:O,padding:B});Va=Ra?Va?"right":"left":Va?"bottom":"top";f[wb]>y[wb]&&(Va=pb(Va));wb=pb(Va);Ra=[];if(t&&Ra.push(0>=Ta[Xa]),w&&Ra.push(0>=Ta[Va],0>=Ta[wb]),Ra.every(function($a){return $a})){ta=Aa;M=!1;break}oa.set(Aa,Ra)}if(M)for(t=
function($a){var Qa=R.find(function(cb){if(cb=oa.get(cb))return cb.slice(0,$a).every(function(Fb){return Fb})});if(Qa)return ta=Qa,"break"},w=W?3:1;0<w&&"break"!==t(w);w--);z.placement!==ta&&(z.modifiersData[q]._skip=!0,z.placement=ta,z.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},fe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(q){var z=q.state;q=q.name;var f=z.rects.reference,t=z.rects.popper,w=z.modifiersData.preventOverflow,y=ha(z,{elementContext:"reference"}),
B=ha(z,{altBoundary:!0});f=Pa(y,f);t=Pa(B,t,w);w=pa(f);B=pa(t);z.modifiersData[q]={referenceClippingOffsets:f,popperEscapeOffsets:t,isReferenceHidden:w,hasPopperEscaped:B};z.attributes.popper=Object.assign({},z.attributes.popper,{"data-popper-reference-hidden":w,"data-popper-escaped":B})}},Uc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(q){var z=q.state,f=q.name;q=q.options.offset;var t=void 0===q?[0,0]:q;q=lb.reduce(function(B,E){var K,O,M,W,Z,R;return B[E]=(K=z.rects,
M=0<=["left","top"].indexOf(O=x(E))?-1:1,Z=(W="function"==typeof t?t(Object.assign({},K,{placement:E})):t)[0],R=W[1],Z=Z||0,R=(R||0)*M,0<=["left","right"].indexOf(O)?{x:R,y:Z}:{x:Z,y:R}),B},{});var w=q[z.placement],y=w.x;w=w.y;null!=z.modifiersData.popperOffsets&&(z.modifiersData.popperOffsets.x+=y,z.modifiersData.popperOffsets.y+=w);z.modifiersData[f]=q}},xg={name:"popperOffsets",enabled:!0,phase:"read",fn:function(q){var z=q.state;z.modifiersData[q.name]=ya({reference:z.rects.reference,element:z.rects.popper,
strategy:"absolute",placement:z.placement})},data:{}},Ag={name:"preventOverflow",enabled:!0,phase:"main",fn:function(q){var z=q.state,f=q.options;q=q.name;var t=f.mainAxis,w=f.altAxis,y=f.tether;y=void 0===y||y;var B=f.tetherOffset,E=void 0===B?0:B,K=ha(z,{boundary:f.boundary,rootBoundary:f.rootBoundary,padding:f.padding,altBoundary:f.altBoundary}),O=x(z.placement),M=Ga(z.placement),W=!M,Z=ra(O);f="x"===Z?"y":"x";B=z.modifiersData.popperOffsets;var R=z.rects.reference,oa=z.rects.popper;E="function"==
typeof E?E(Object.assign({},z.rects,{placement:z.placement})):E;var ta="number"==typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),wa=z.modifiersData.offset?z.modifiersData.offset[z.placement]:null;E={x:0,y:0};if(B){if(void 0===t||t){var Aa,Xa="y"===Z?"top":"left",Va="y"===Z?"bottom":"right",Ra="y"===Z?"height":"width";t=B[Z];var wb=t+K[Xa],Ta=t-K[Va],$a=y?-oa[Ra]/2:0,Qa="start"===M?R[Ra]:oa[Ra];M="start"===M?-oa[Ra]:-R[Ra];var cb=z.elements.arrow;cb=y&&cb?G(cb):{width:0,height:0};
var Fb=z.modifiersData["arrow#persistent"]?z.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0};Xa=Fb[Xa];Va=Fb[Va];cb=Ea(0,La(R[Ra],cb[Ra]));Qa=W?R[Ra]/2-$a-cb-Xa-ta.mainAxis:Qa-cb-Xa-ta.mainAxis;W=W?-R[Ra]/2+$a+cb+Va+ta.mainAxis:M+cb+Va+ta.mainAxis;$a=(Ra=z.elements.arrow&&ja(z.elements.arrow))?"y"===Z?Ra.clientTop||0:Ra.clientLeft||0:0;Ra=null!=(Aa=null==wa?void 0:wa[Z])?Aa:0;Aa=y?La(wb,t+Qa-Ra-$a):wb;Ta=y?Ea(Ta,t+W-Ra):Ta;Aa=Ea(Aa,La(t,Ta));B[Z]=Aa;E[Z]=Aa-t}if(void 0!==
w&&w){var cd,Sb;w=B[f];t="y"===f?"height":"width";Aa=w+K["x"===Z?"top":"left"];K=w-K["x"===Z?"bottom":"right"];O=-1!==["top","left"].indexOf(O);Z=null!=(Sb=null==wa?void 0:wa[f])?Sb:0;Sb=O?Aa:w-R[t]-oa[t]-Z+ta.altAxis;R=O?w+R[t]+oa[t]-Z-ta.altAxis:K;oa=y&&O?(cd=Ea(Sb,La(w,R)))>R?R:cd:Ea(y?Sb:Aa,La(w,y?R:K));B[f]=oa;E[f]=oa-w}z.modifiersData[q]=E}},requiresIfExists:["offset"]};var Yh={placement:"bottom",modifiers:[],strategy:"absolute"},lk=Ja(),mk=Ja({defaultModifiers:[Kf,xg,Mc,xc]}),Xe=Ja({defaultModifiers:[Kf,
xg,Mc,xc,Uc,yg,Ag,qb,fe]});let Lf=Object.freeze(Object.defineProperty({__proto__:null,afterMain:"afterMain",afterRead:"afterRead",afterWrite:"afterWrite",applyStyles:xc,arrow:qb,auto:"auto",basePlacements:hb,beforeMain:"beforeMain",beforeRead:"beforeRead",beforeWrite:"beforeWrite",bottom:"bottom",clippingParents:"clippingParents",computeStyles:Mc,createPopper:Xe,createPopperBase:lk,createPopperLite:mk,detectOverflow:ha,end:"end",eventListeners:Kf,flip:yg,hide:fe,left:"left",main:"main",modifierPhases:ec,
offset:Uc,placements:lb,popper:"popper",popperGenerator:Ja,popperOffsets:xg,preventOverflow:Ag,read:"read",reference:"reference",right:"right",start:"start",top:"top",variationPlacements:Da,viewport:"viewport",write:"write"},Symbol.toStringTag,{value:"Module"})),Mf="rtl"===document.documentElement.dir?"top-end":"top-start",Zh="rtl"===document.documentElement.dir?"top-start":"top-end",nk="rtl"===document.documentElement.dir?"bottom-end":"bottom-start",Xh="rtl"===document.documentElement.dir?"bottom-start":
"bottom-end",Wh="rtl"===document.documentElement.dir?"left-start":"right-start",Vh="rtl"===document.documentElement.dir?"right-start":"left-start",sk={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},tk={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class jd extends gc{static get Default(){return sk}static get DefaultType(){return tk}static get NAME(){return"dropdown"}toggle(){return this._isShown()?
this.hide():this.show()}show(){if(!fc(this._element)&&!this._isShown()){var q={relatedTarget:this._element};if(!ua.trigger(this._element,"show.bs.dropdown",q).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(let z of[].concat(...document.body.children))ua.on(z,"mouseover",ub);this._element.focus();this._element.setAttribute("aria-expanded",!0);this._menu.classList.add("show");this._element.classList.add("show");ua.trigger(this._element,
"shown.bs.dropdown",q)}}}hide(){!fc(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy();super.dispose()}update(){this._inNavbar=this._detectNavbar();this._popper&&this._popper.update()}_completeHide(q){if(!ua.trigger(this._element,"hide.bs.dropdown",q).defaultPrevented){if("ontouchstart"in document.documentElement)for(let z of[].concat(...document.body.children))ua.off(z,"mouseover",ub);this._popper&&this._popper.destroy();
this._menu.classList.remove("show");this._element.classList.remove("show");this._element.setAttribute("aria-expanded","false");Kc.removeDataAttribute(this._menu,"popper");ua.trigger(this._element,"hidden.bs.dropdown",q)}}_getConfig(q){if("object"==typeof(q=super._getConfig(q)).reference&&!Wb(q.reference)&&"function"!=typeof q.reference.getBoundingClientRect)throw TypeError('DROPDOWN: Option "reference" provided type "object" without a required "getBoundingClientRect" method.');return q}_createPopper(){if(void 0===
Lf)throw TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let q=this._element;"parent"===this._config.reference?q=this._parent:Wb(this._config.reference)?q=Ib(this._config.reference):"object"==typeof this._config.reference&&(q=this._config.reference);let z=this._getPopperConfig();this._popper=Xe(q,this._menu,z)}_isShown(){return this._menu.classList.contains("show")}_getPlacement(){let q=this._parent;if(q.classList.contains("dropend"))return Wh;if(q.classList.contains("dropstart"))return Vh;
if(q.classList.contains("dropup-center"))return"top";if(q.classList.contains("dropdown-center"))return"bottom";let z="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return q.classList.contains("dropup")?z?Zh:Mf:z?Xh:nk}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){let {offset:q}=this._config;return"string"==typeof q?q.split(",").map(z=>Number.parseInt(z,10)):"function"==typeof q?z=>q(z,this._element):q}_getPopperConfig(){let q={placement:this._getPlacement(),
modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Kc.setDataAttribute(this._menu,"popper","static"),q.modifiers=[{name:"applyStyles",enabled:!1}]),{...q,...Pb(this._config.popperConfig,[q])}}_selectMenuItem({key:q,target:z}){let f=va.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(t=>vb(t));f.length&&qc(f,z,"ArrowDown"===q,
!f.includes(z)).focus()}static jQueryInterface(q){return this.each(function(){let z=jd.getOrCreateInstance(this,q);if("string"==typeof q){if(void 0===z[q])throw TypeError(`No method named "${q}"`);z[q]()}})}static clearMenus(q){if(2!==q.button&&("keyup"!==q.type||"Tab"===q.key))for(let f of va.find('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled).show')){let t=jd.getInstance(f);if(!t||!1===t._config.autoClose)continue;var z=q.composedPath();let w=z.includes(t._menu);z.includes(t._element)||
"inside"===t._config.autoClose&&!w||"outside"===t._config.autoClose&&w||t._menu.contains(q.target)&&("keyup"===q.type&&"Tab"===q.key||/input|select|option|textarea|form/i.test(q.target.tagName))||(z={relatedTarget:t._element},"click"===q.type&&(z.clickEvent=q),t._completeHide(z))}}static dataApiKeydownHandler(q){var z=/input|textarea/i.test(q.target.tagName),f="Escape"===q.key;let t=["ArrowUp","ArrowDown"].includes(q.key);if((t||f)&&(!z||f)){q.preventDefault();z=this.matches('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)')?
this:va.prev(this,'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)')[0]||va.next(this,'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)')[0]||va.findOne('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',q.delegateTarget.parentNode);f=jd.getOrCreateInstance(z);if(t)return q.stopPropagation(),f.show(),void f._selectMenuItem(q);f._isShown()&&(q.stopPropagation(),f.hide(),z.focus())}}constructor(q,z){super(q,z);this._popper=null;this._parent=this._element.parentNode;this._menu=
va.next(this._element,".dropdown-menu")[0]||va.prev(this._element,".dropdown-menu")[0]||va.findOne(".dropdown-menu",this._parent);this._inNavbar=this._detectNavbar()}}ua.on(document,"keydown.bs.dropdown.data-api",'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',jd.dataApiKeydownHandler);ua.on(document,"keydown.bs.dropdown.data-api",".dropdown-menu",jd.dataApiKeydownHandler);ua.on(document,"click.bs.dropdown.data-api",jd.clearMenus);ua.on(document,"keyup.bs.dropdown.data-api",jd.clearMenus);
ua.on(document,"click.bs.dropdown.data-api",'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',function(q){q.preventDefault();jd.getOrCreateInstance(this).toggle()});$b(jd);let Rf={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},we={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class bf extends kd{static get Default(){return Rf}static get DefaultType(){return we}static get NAME(){return"backdrop"}show(q){if(!this._config.isVisible)return void Pb(q);
this._append();let z=this._getElement();this._config.isAnimated&&z.offsetHeight;z.classList.add("show");this._emulateAnimation(()=>{Pb(q)})}hide(q){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose();Pb(q)})):Pb(q)}dispose(){this._isAppended&&(ua.off(this._element,"mousedown.bs.backdrop"),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let q=document.createElement("div");q.className=this._config.className;this._config.isAnimated&&
q.classList.add("fade");this._element=q}return this._element}_configAfterMerge(q){return q.rootElement=Ib(q.rootElement),q}_append(){if(!this._isAppended){var q=this._getElement();this._config.rootElement.append(q);ua.on(q,"mousedown.bs.backdrop",()=>{Pb(this._config.clickCallback)});this._isAppended=!0}}_emulateAnimation(q){ed(q,this._getElement(),this._config.isAnimated)}constructor(q){super();this._config=this._getConfig(q);this._isAppended=!1;this._element=null}}let uk={autofocus:!0,trapElement:null},
vk={autofocus:"boolean",trapElement:"element"};class ze extends kd{static get Default(){return uk}static get DefaultType(){return vk}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ua.off(document,".bs.focustrap"),ua.on(document,"focusin.bs.focustrap",q=>this._handleFocusin(q)),ua.on(document,"keydown.tab.bs.focustrap",q=>this._handleKeydown(q)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ua.off(document,
".bs.focustrap"))}_handleFocusin(q){let {trapElement:z}=this._config;q.target===document||q.target===z||z.contains(q.target)||(q=va.focusableChildren(z),0===q.length?z.focus():"backward"===this._lastTabNavDirection?q[q.length-1].focus():q[0].focus())}_handleKeydown(q){"Tab"===q.key&&(this._lastTabNavDirection=q.shiftKey?"backward":"forward")}constructor(q){super();this._config=this._getConfig(q);this._isActive=!1;this._lastTabNavDirection=null}}class Bg{getWidth(){return Math.abs(window.innerWidth-
document.documentElement.clientWidth)}hide(){let q=this.getWidth();this._disableOverFlow();this._setElementAttributes(this._element,"padding-right",z=>z+q);this._setElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top","padding-right",z=>z+q);this._setElementAttributes(".sticky-top","margin-right",z=>z-q)}reset(){this._resetElementAttributes(this._element,"overflow");this._resetElementAttributes(this._element,"padding-right");this._resetElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",
"padding-right");this._resetElementAttributes(".sticky-top","margin-right")}isOverflowing(){return 0<this.getWidth()}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow");this._element.style.overflow="hidden"}_setElementAttributes(q,z,f){let t=this.getWidth();this._applyManipulationCallback(q,w=>{if(!(w!==this._element&&window.innerWidth>w.clientWidth+t)){this._saveInitialAttribute(w,z);var y=window.getComputedStyle(w).getPropertyValue(z);w.style.setProperty(z,`${f(Number.parseFloat(y))}px`)}})}_saveInitialAttribute(q,
z){let f=q.style.getPropertyValue(z);f&&Kc.setDataAttribute(q,z,f)}_resetElementAttributes(q,z){this._applyManipulationCallback(q,f=>{let t=Kc.getDataAttribute(f,z);null!==t?(Kc.removeDataAttribute(f,z),f.style.setProperty(z,t)):f.style.removeProperty(z)})}_applyManipulationCallback(q,z){if(Wb(q))z(q);else for(let f of va.find(q,this._element))z(f)}constructor(){this._element=document.body}}let cf={backdrop:!0,focus:!0,keyboard:!0},wk={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};
class Ae extends gc{static get Default(){return cf}static get DefaultType(){return wk}static get NAME(){return"modal"}toggle(q){return this._isShown?this.hide():this.show(q)}show(q){this._isShown||this._isTransitioning||ua.trigger(this._element,"show.bs.modal",{relatedTarget:q}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add("modal-open"),this._adjustDialog(),this._backdrop.show(()=>this._showElement(q)))}hide(){this._isShown&&!this._isTransitioning&&
(ua.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){ua.off(window,".bs.modal");ua.off(this._dialog,".bs.modal");this._backdrop.dispose();this._focustrap.deactivate();super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new bf({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ze({trapElement:this._element})}_showElement(q){document.body.contains(this._element)||
document.body.append(this._element);this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.setAttribute("aria-modal",!0);this._element.setAttribute("role","dialog");this._element.scrollTop=0;let z=va.findOne(".modal-body",this._dialog);z&&(z.scrollTop=0);this._element.offsetHeight;this._element.classList.add("show");this._queueCallback(()=>{this._config.focus&&this._focustrap.activate();this._isTransitioning=!1;ua.trigger(this._element,"shown.bs.modal",{relatedTarget:q})},
this._dialog,this._isAnimated())}_addEventListeners(){ua.on(this._element,"keydown.dismiss.bs.modal",q=>{"Escape"===q.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())});ua.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()});ua.on(this._element,"mousedown.dismiss.bs.modal",q=>{ua.one(this._element,"click.dismiss.bs.modal",z=>{this._element===q.target&&this._element===z.target&&("static"!==this._config.backdrop?this._config.backdrop&&
this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none";this._element.setAttribute("aria-hidden",!0);this._element.removeAttribute("aria-modal");this._element.removeAttribute("role");this._isTransitioning=!1;this._backdrop.hide(()=>{document.body.classList.remove("modal-open");this._resetAdjustments();this._scrollBar.reset();ua.trigger(this._element,"hidden.bs.modal")})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(!ua.trigger(this._element,
"hidePrevented.bs.modal").defaultPrevented){var q=this._element.scrollHeight>document.documentElement.clientHeight,z=this._element.style.overflowY;"hidden"===z||this._element.classList.contains("modal-static")||(q||(this._element.style.overflowY="hidden"),this._element.classList.add("modal-static"),this._queueCallback(()=>{this._element.classList.remove("modal-static");this._queueCallback(()=>{this._element.style.overflowY=z},this._dialog)},this._dialog),this._element.focus())}}_adjustDialog(){let q=
this._element.scrollHeight>document.documentElement.clientHeight,z=this._scrollBar.getWidth(),f=0<z;f&&!q&&(this._element.style["rtl"===document.documentElement.dir?"paddingLeft":"paddingRight"]=`${z}px`);!f&&q&&(this._element.style["rtl"===document.documentElement.dir?"paddingRight":"paddingLeft"]=`${z}px`)}_resetAdjustments(){this._element.style.paddingLeft="";this._element.style.paddingRight=""}static jQueryInterface(q,z){return this.each(function(){let f=Ae.getOrCreateInstance(this,q);if("string"==
typeof q){if(void 0===f[q])throw TypeError(`No method named "${q}"`);f[q](z)}})}constructor(q,z){super(q,z);this._dialog=va.findOne(".modal-dialog",this._element);this._backdrop=this._initializeBackDrop();this._focustrap=this._initializeFocusTrap();this._isTransitioning=this._isShown=!1;this._scrollBar=new Bg;this._addEventListeners()}}ua.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(q){let z=va.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&q.preventDefault();
ua.one(z,"show.bs.modal",f=>{f.defaultPrevented||ua.one(z,"hidden.bs.modal",()=>{vb(this)&&this.focus()})});(q=va.findOne(".modal.show"))&&Ae.getInstance(q).hide();Ae.getOrCreateInstance(z).toggle(this)});rc(Ae);$b(Ae);let xk={backdrop:!0,keyboard:!0,scroll:!1},yk={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class dd extends gc{static get Default(){return xk}static get DefaultType(){return yk}static get NAME(){return"offcanvas"}toggle(q){return this._isShown?this.hide():this.show(q)}show(q){this._isShown||
ua.trigger(this._element,"show.bs.offcanvas",{relatedTarget:q}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Bg).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("showing"),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate();this._element.classList.add("show");this._element.classList.remove("showing");ua.trigger(this._element,"shown.bs.offcanvas",
{relatedTarget:q})},this._element,!0))}hide(){this._isShown&&(ua.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding");this._element.removeAttribute("aria-modal");this._element.removeAttribute("role");this._config.scroll||(new Bg).reset();ua.trigger(this._element,"hidden.bs.offcanvas")},this._element,
!0)))}dispose(){this._backdrop.dispose();this._focustrap.deactivate();super.dispose()}_initializeBackDrop(){let q=!!this._config.backdrop;return new bf({className:"offcanvas-backdrop",isVisible:q,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:q?()=>{"static"!==this._config.backdrop?this.hide():ua.trigger(this._element,"hidePrevented.bs.offcanvas")}:null})}_initializeFocusTrap(){return new ze({trapElement:this._element})}_addEventListeners(){ua.on(this._element,"keydown.dismiss.bs.offcanvas",
q=>{"Escape"===q.key&&(this._config.keyboard?this.hide():ua.trigger(this._element,"hidePrevented.bs.offcanvas"))})}static jQueryInterface(q){return this.each(function(){let z=dd.getOrCreateInstance(this,q);if("string"==typeof q){if(void 0===z[q]||q.startsWith("_")||"constructor"===q)throw TypeError(`No method named "${q}"`);z[q](this)}})}constructor(q,z){super(q,z);this._isShown=!1;this._backdrop=this._initializeBackDrop();this._focustrap=this._initializeFocusTrap();this._addEventListeners()}}ua.on(document,
"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(q){let z=va.getElementFromSelector(this);(["A","AREA"].includes(this.tagName)&&q.preventDefault(),fc(this))||(ua.one(z,"hidden.bs.offcanvas",()=>{vb(this)&&this.focus()}),(q=va.findOne(".offcanvas.show"))&&q!==z&&dd.getInstance(q).hide(),dd.getOrCreateInstance(z).toggle(this))});ua.on(window,"load.bs.offcanvas.data-api",()=>{for(let q of va.find(".offcanvas.show"))dd.getOrCreateInstance(q).show()});ua.on(window,"resize.bs.offcanvas",
()=>{for(let q of va.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(q).position&&dd.getOrCreateInstance(q).hide()});rc(dd);$b(dd);let Cg={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:"src srcset alt title width height".split(" "),li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},
Dg=new Set("background cite href itemtype longdesc poster src xlink:href".split(" ")),$h=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ai=(q,z)=>{let f=q.nodeName.toLowerCase();return z.includes(f)?!Dg.has(f)||!!$h.test(q.nodeValue):z.filter(t=>t instanceof RegExp).some(t=>t.test(f))},zk={allowList:Cg,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},bi={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",
sanitizeFn:"(null|function)",template:"string"},Ak={entry:"(string|element|function|null)",selector:"(string|element)"};class Bk extends kd{static get Default(){return zk}static get DefaultType(){return bi}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(q=>this._resolvePossibleFunction(q)).filter(Boolean)}hasContent(){return 0<this.getContent().length}changeContent(q){return this._checkContent(q),this._config.content={...this._config.content,...q},
this}toHtml(){var q=document.createElement("div");for(let [f,t]of(q.innerHTML=this._maybeSanitize(this._config.template),Object.entries(this._config.content)))this._setContent(q,t,f);q=q.children[0];let z=this._resolvePossibleFunction(this._config.extraClass);return z&&q.classList.add(...z.split(" ")),q}_typeCheckConfig(q){super._typeCheckConfig(q);this._checkContent(q.content)}_checkContent(q){for(let [z,f]of Object.entries(q))super._typeCheckConfig({selector:z,entry:f},Ak)}_setContent(q,z,f){(q=
va.findOne(f,q))&&((z=this._resolvePossibleFunction(z))?Wb(z)?this._putElementInTemplate(Ib(z),q):this._config.html?q.innerHTML=this._maybeSanitize(z):q.textContent=z:q.remove())}_maybeSanitize(q){if(this._config.sanitize){var z=this._config.allowList;var f=this._config.sanitizeFn;if(q.length)if(f&&"function"==typeof f)z=f(q);else{q=(new window.DOMParser).parseFromString(q,"text/html");for(let w of[].concat(...q.body.querySelectorAll("*"))){var t=w.nodeName.toLowerCase();if(Object.keys(z).includes(t)){f=
[].concat(...w.attributes);t=[].concat(z["*"]||[],z[t]||[]);for(let y of f)ai(y,t)||w.removeAttribute(y.nodeName)}else w.remove()}z=q.body.innerHTML}else z=q}else z=q;return z}_resolvePossibleFunction(q){return Pb(q,[this])}_putElementInTemplate(q,z){if(this._config.html)return z.innerHTML="",void z.append(q);z.textContent=q.textContent}constructor(q){super();this._config=this._getConfig(q)}}let Ck=new Set(["sanitize","allowList","sanitizeFn"]),Dk={AUTO:"auto",TOP:"top",RIGHT:"rtl"===document.documentElement.dir?
"left":"right",BOTTOM:"bottom",LEFT:"rtl"===document.documentElement.dir?"right":"left"},Ek={allowList:Cg,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Fk={allowList:"object",
animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Be extends gc{static get Default(){return Ek}static get DefaultType(){return Fk}static get NAME(){return"tooltip"}enable(){this._isEnabled=
!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout);ua.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler);this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title"));this._disposePopper();super.dispose()}show(){if("none"===
this._element.style.display)throw Error("Please use show on visible elements");if(this._isWithContent()&&this._isEnabled){var q=ua.trigger(this._element,this.constructor.eventName("show")),z=(nb(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(!q.defaultPrevented&&z){this._disposePopper();q=this._getTipElement();this._element.setAttribute("aria-describedby",q.getAttribute("id"));({container:z}=this._config);if(this._element.ownerDocument.documentElement.contains(this.tip)||
(z.append(q),ua.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(q),q.classList.add("show"),"ontouchstart"in document.documentElement)for(let f of[].concat(...document.body.children))ua.on(f,"mouseover",ub);this._queueCallback(()=>{ua.trigger(this._element,this.constructor.eventName("shown"));!1===this._isHovered&&this._leave();this._isHovered=!1},this.tip,this._isAnimated())}}}hide(){if(this._isShown()&&!ua.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove("show"),
"ontouchstart"in document.documentElement)for(let q of[].concat(...document.body.children))ua.off(q,"mouseover",ub);this._activeTrigger.click=!1;this._activeTrigger.focus=!1;this._activeTrigger.hover=!1;this._isHovered=null;this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ua.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||
(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(q){q=this._getTemplateFactory(q).toHtml();if(!q)return null;q.classList.remove("fade","show");q.classList.add(`bs-${this.constructor.NAME}-auto`);var z=this.constructor.NAME;do z+=Math.floor(1E6*Math.random());while(document.getElementById(z));return q.setAttribute("id",z.toString()),this._isAnimated()&&q.classList.add("fade"),q}setContent(q){this._newContent=q;this._isShown()&&(this._disposePopper(),
this.show())}_getTemplateFactory(q){return this._templateFactory?this._templateFactory.changeContent(q):this._templateFactory=new Bk({...this._config,content:q,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(q){return this.constructor.getOrCreateInstance(q.delegateTarget,
this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains("fade")}_isShown(){return this.tip&&this.tip.classList.contains("show")}_createPopper(q){let z=Dk[Pb(this._config.placement,[this,q,this._element]).toUpperCase()];return Xe(this._element,q,this._getPopperConfig(z))}_getOffset(){let {offset:q}=this._config;return"string"==typeof q?q.split(",").map(z=>Number.parseInt(z,10)):"function"==typeof q?z=>q(z,this._element):q}_resolvePossibleFunction(q){return Pb(q,
[this._element])}_getPopperConfig(q){q={placement:q,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:z=>{this._getTipElement().setAttribute("data-popper-placement",z.state.placement)}}]};return{...q,...Pb(this._config.popperConfig,
[q])}}_setListeners(){for(let q of this._config.trigger.split(" "))if("click"===q)ua.on(this._element,this.constructor.eventName("click"),this._config.selector,z=>{this._initializeOnDelegatedTarget(z).toggle()});else if("manual"!==q){let z="hover"===q?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),f="hover"===q?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");ua.on(this._element,z,this._config.selector,t=>{let w=this._initializeOnDelegatedTarget(t);
w._activeTrigger["focusin"===t.type?"focus":"hover"]=!0;w._enter()});ua.on(this._element,f,this._config.selector,t=>{let w=this._initializeOnDelegatedTarget(t);w._activeTrigger["focusout"===t.type?"focus":"hover"]=w._element.contains(t.relatedTarget);w._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()};ua.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler)}_fixTitle(){let q=this._element.getAttribute("title");q&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||
this._element.setAttribute("aria-label",q),this._element.setAttribute("data-bs-original-title",q),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(q,z){clearTimeout(this._timeout);this._timeout=setTimeout(q,
z)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(q){let z=Kc.getDataAttributes(this._element);for(let f of Object.keys(z))Ck.has(f)&&delete z[f];return q={...z,...("object"==typeof q&&q?q:{})},q=this._mergeConfigObj(q),q=this._configAfterMerge(q),this._typeCheckConfig(q),q}_configAfterMerge(q){return q.container=!1===q.container?document.body:Ib(q.container),"number"==typeof q.delay&&(q.delay={show:q.delay,hide:q.delay}),"number"==typeof q.title&&(q.title=
q.title.toString()),"number"==typeof q.content&&(q.content=q.content.toString()),q}_getDelegateConfig(){let q={};for(let [z,f]of Object.entries(this._config))this.constructor.Default[z]!==f&&(q[z]=f);return q.selector=!1,q.trigger="manual",q}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null);this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(q){return this.each(function(){let z=Be.getOrCreateInstance(this,q);if("string"==typeof q){if(void 0===z[q])throw TypeError(`No method named "${q}"`);
z[q]()}})}constructor(q,z){if(void 0===Lf)throw TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(q,z);this._isEnabled=!0;this._timeout=0;this._isHovered=null;this._activeTrigger={};this.tip=this._newContent=this._templateFactory=this._popper=null;this._setListeners();this._config.selector||this._fixTitle()}}$b(Be);let Gk={...Be.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',
trigger:"click"},ci={...Be.DefaultType,content:"(null|string|element|function)"};class Ye extends Be{static get Default(){return Gk}static get DefaultType(){return ci}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(q){return this.each(function(){let z=Ye.getOrCreateInstance(this,
q);if("string"==typeof q){if(void 0===z[q])throw TypeError(`No method named "${q}"`);z[q]()}})}}$b(Ye);let di={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Eg={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Sf extends gc{static get Default(){return di}static get DefaultType(){return Eg}static get NAME(){return"scrollspy"}refresh(){for(let q of(this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),
this._observer?this._observer.disconnect():this._observer=this._getNewObserver(),this._observableSections.values()))this._observer.observe(q)}dispose(){this._observer.disconnect();super.dispose()}_configAfterMerge(q){return q.target=Ib(q.target)||document.body,q.rootMargin=q.offset?`${q.offset}px 0px -30%`:q.rootMargin,"string"==typeof q.threshold&&(q.threshold=q.threshold.split(",").map(z=>Number.parseFloat(z))),q}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ua.off(this._config.target,
"click.bs.scrollspy"),ua.on(this._config.target,"click.bs.scrollspy","[href]",q=>{var z=this._observableSections.get(q.target.hash);if(z){q.preventDefault();q=this._rootElement||window;z=z.offsetTop-this._element.offsetTop;if(q.scrollTo)return void q.scrollTo({top:z,behavior:"smooth"});q.scrollTop=z}}))}_getNewObserver(){return new IntersectionObserver(q=>this._observerCallback(q),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(q){let z=
y=>this._targetLinks.get(`#${y.target.id}`),f=y=>{this._previousScrollData.visibleEntryTop=y.target.offsetTop;this._process(z(y))},t=(this._rootElement||document.documentElement).scrollTop,w=t>=this._previousScrollData.parentScrollTop;for(let y of(this._previousScrollData.parentScrollTop=t,q))if(y.isIntersecting)if(q=y.target.offsetTop>=this._previousScrollData.visibleEntryTop,w&&q){if(f(y),!t)break}else w||q||f(y);else this._activeTarget=null,this._clearActiveClass(z(y))}_initializeTargetsAndObservables(){for(let q of(this._targetLinks=
new Map,this._observableSections=new Map,va.find("[href]",this._config.target))){if(!q.hash||fc(q))continue;let z=va.findOne(decodeURI(q.hash),this._element);vb(z)&&(this._targetLinks.set(decodeURI(q.hash),q),this._observableSections.set(q.hash,z))}}_process(q){this._activeTarget!==q&&(this._clearActiveClass(this._config.target),this._activeTarget=q,q.classList.add("active"),this._activateParents(q),ua.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:q}))}_activateParents(q){if(q.classList.contains("dropdown-item"))va.findOne(".dropdown-toggle",
q.closest(".dropdown")).classList.add("active");else for(let z of va.parents(q,".nav, .list-group"))for(let f of va.prev(z,".nav-link, .nav-item > .nav-link, .list-group-item"))f.classList.add("active")}_clearActiveClass(q){for(let z of(q.classList.remove("active"),va.find("[href].active",q)))z.classList.remove("active")}static jQueryInterface(q){return this.each(function(){let z=Sf.getOrCreateInstance(this,q);if("string"==typeof q){if(void 0===z[q]||q.startsWith("_")||"constructor"===q)throw TypeError(`No method named "${q}"`);
z[q]()}})}constructor(q,z){super(q,z);this._targetLinks=new Map;this._observableSections=new Map;this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element;this._observer=this._activeTarget=null;this._previousScrollData={visibleEntryTop:0,parentScrollTop:0};this.refresh()}}ua.on(window,"load.bs.scrollspy.data-api",()=>{for(let q of va.find('[data-bs-spy="scroll"]'))Sf.getOrCreateInstance(q)});$b(Sf);class qd extends gc{static get NAME(){return"tab"}show(){let q=this._element;
if(!this._elemIsActive(q)){var z=this._getActiveElem(),f=z?ua.trigger(z,"hide.bs.tab",{relatedTarget:q}):null;ua.trigger(q,"show.bs.tab",{relatedTarget:z}).defaultPrevented||f&&f.defaultPrevented||(this._deactivate(z,q),this._activate(q,z))}}_activate(q,z){q&&(q.classList.add("active"),this._activate(va.getElementFromSelector(q)),this._queueCallback(()=>{"tab"===q.getAttribute("role")?(q.removeAttribute("tabindex"),q.setAttribute("aria-selected",!0),this._toggleDropDown(q,!0),ua.trigger(q,"shown.bs.tab",
{relatedTarget:z})):q.classList.add("show")},q,q.classList.contains("fade")))}_deactivate(q,z){q&&(q.classList.remove("active"),q.blur(),this._deactivate(va.getElementFromSelector(q)),this._queueCallback(()=>{"tab"===q.getAttribute("role")?(q.setAttribute("aria-selected",!1),q.setAttribute("tabindex","-1"),this._toggleDropDown(q,!1),ua.trigger(q,"hidden.bs.tab",{relatedTarget:z})):q.classList.remove("show")},q,q.classList.contains("fade")))}_keydown(q){if("ArrowLeft ArrowRight ArrowUp ArrowDown Home End".split(" ").includes(q.key)){q.stopPropagation();
q.preventDefault();var z=this._getChildren().filter(f=>!fc(f));if(["Home","End"].includes(q.key))q=z["Home"===q.key?0:z.length-1];else{let f=["ArrowRight","ArrowDown"].includes(q.key);q=qc(z,q.target,f,!0)}q&&(q.focus({preventScroll:!0}),qd.getOrCreateInstance(q).show())}}_getChildren(){return va.find('.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), [data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',this._parent)}_getActiveElem(){return this._getChildren().find(q=>
this._elemIsActive(q))||null}_setInitialAttributes(q,z){for(let f of(this._setAttributeIfNotExists(q,"role","tablist"),z))this._setInitialAttributesOnChild(f)}_setInitialAttributesOnChild(q){q=this._getInnerElement(q);let z=this._elemIsActive(q),f=this._getOuterElement(q);q.setAttribute("aria-selected",z);f!==q&&this._setAttributeIfNotExists(f,"role","presentation");z||q.setAttribute("tabindex","-1");this._setAttributeIfNotExists(q,"role","tab");this._setInitialAttributesOnTargetPanel(q)}_setInitialAttributesOnTargetPanel(q){let z=
va.getElementFromSelector(q);z&&(this._setAttributeIfNotExists(z,"role","tabpanel"),q.id&&this._setAttributeIfNotExists(z,"aria-labelledby",`${q.id}`))}_toggleDropDown(q,z){q=this._getOuterElement(q);if(q.classList.contains("dropdown")){var f=va.findOne(".dropdown-toggle",q);f&&f.classList.toggle("active",z);(f=va.findOne(".dropdown-menu",q))&&f.classList.toggle("show",z);q.setAttribute("aria-expanded",z)}}_setAttributeIfNotExists(q,z,f){q.hasAttribute(z)||q.setAttribute(z,f)}_elemIsActive(q){return q.classList.contains("active")}_getInnerElement(q){return q.matches('.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), [data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]')?
q:va.findOne('.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), [data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',q)}_getOuterElement(q){return q.closest(".nav-item, .list-group-item")||q}static jQueryInterface(q){return this.each(function(){let z=qd.getOrCreateInstance(this);if("string"==typeof q){if(void 0===z[q]||q.startsWith("_")||"constructor"===q)throw TypeError(`No method named "${q}"`);z[q]()}})}constructor(q){super(q);
(this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'))&&(this._setInitialAttributes(this._parent,this._getChildren()),ua.on(this._element,"keydown.bs.tab",z=>this._keydown(z)))}}ua.on(document,"click.bs.tab",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(q){["A","AREA"].includes(this.tagName)&&q.preventDefault();fc(this)||qd.getOrCreateInstance(this).show()});ua.on(window,"load.bs.tab",()=>{for(let q of va.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))qd.getOrCreateInstance(q)});
$b(qd);let ei={animation:"boolean",autohide:"boolean",delay:"number"},Fg={animation:!0,autohide:!0,delay:5E3};class Tf extends gc{static get Default(){return Fg}static get DefaultType(){return ei}static get NAME(){return"toast"}show(){ua.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.offsetHeight,this._element.classList.add("show","showing"),this._queueCallback(()=>
{this._element.classList.remove("showing");ua.trigger(this._element,"shown.bs.toast");this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(ua.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add("showing"),this._queueCallback(()=>{this._element.classList.add("hide");this._element.classList.remove("showing","show");ua.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout();
this.isShown()&&this._element.classList.remove("show");super.dispose()}isShown(){return this._element.classList.contains("show")}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(q,z){switch(q.type){case "mouseover":case "mouseout":this._hasMouseInteraction=z;break;case "focusin":case "focusout":this._hasKeyboardInteraction=z}if(z)return void this._clearTimeout();q=
q.relatedTarget;this._element===q||this._element.contains(q)||this._maybeScheduleHide()}_setListeners(){ua.on(this._element,"mouseover.bs.toast",q=>this._onInteraction(q,!0));ua.on(this._element,"mouseout.bs.toast",q=>this._onInteraction(q,!1));ua.on(this._element,"focusin.bs.toast",q=>this._onInteraction(q,!0));ua.on(this._element,"focusout.bs.toast",q=>this._onInteraction(q,!1))}_clearTimeout(){clearTimeout(this._timeout);this._timeout=null}static jQueryInterface(q){return this.each(function(){let z=
Tf.getOrCreateInstance(this,q);if("string"==typeof q){if(void 0===z[q])throw TypeError(`No method named "${q}"`);z[q](this)}})}constructor(q,z){super(q,z);this._timeout=null;this._hasKeyboardInteraction=this._hasMouseInteraction=!1;this._setListeners()}}return rc(Tf),$b(Tf),{Alert:Lc,Button:D,Carousel:la,Collapse:db,Dropdown:jd,Modal:Ae,Offcanvas:dd,Popover:Ye,ScrollSpy:Sf,Tab:qd,Toast:Tf,Tooltip:Be}}();(function(){for(var a=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=
window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,g){var p=(new Date).getTime(),k=Math.max(0,16-(p-a));g=window.setTimeout(function(){b(p+k)},k);return a=p+k,g});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(b){clearTimeout(b)})})();Ca.STROKE_MODE_FREEHAND=0;Ca.STROKE_MODE_LINE=1;Ca.STROKE_MODE_BEZIER=2;Ca.TIP_ROUND_PIXEL=
0;Ca.TIP_ROUND_AA=1;Ca.TIP_ROUND_AIRBRUSH=2;Ca.TIP_SQUARE_PIXEL=3;Ca.TIP_SQUARE_AA=4;Ca.BRUSH_MODE_PAINT=0;Ca.BRUSH_MODE_ERASE=1;Ca.BRUSH_MODE_DODGE=2;Ca.BRUSH_MODE_BURN=3;Ca.BRUSH_MODE_WATER=4;Ca.BRUSH_MODE_BLUR=5;Ca.BRUSH_MODE_SMUDGE=6;Ca.BRUSH_MODE_OIL=7;Ca.PAINT_MODE_OPACITY=0;Ca.PAINT_MODE_FLOW=1;Ca.DEFAULTS={isAA:!1,minSpacing:0,spacing:0,pressureSize:!0,pressureAlpha:!1,pressureScattering:!1,alphaScale:1,tip:Ca.TIP_ROUND_PIXEL,brushMode:Ca.BRUSH_MODE_PAINT,paintMode:Ca.PAINT_MODE_OPACITY,strokeMode:Ca.STROKE_MODE_FREEHAND,
resat:1,bleed:0,texture:1,size:0,curSize:0,alpha:0,curAlpha:0,scattering:0,curScattering:0,squeeze:0,curSqueeze:0,angle:Math.PI,curAngle:0,smoothing:0};Ca.prototype.applyPressure=function(a){this.pressureSize&&this.brushMode!=Ca.BRUSH_MODE_SMUDGE&&this.brushMode!=Ca.BRUSH_MODE_OIL?this.curSize=Math.max(.1,this.size*a):this.curSize=Math.max(.1,this.size);16<this.curSize&&(this.curSize=Math.floor(this.curSize));this.curSize=Math.min(this.curSize,400);this.curAlpha=this.pressureAlpha?Math.floor(this.alpha*
Math.min(a,1)):this.alpha;this.curSqueeze=this.squeeze;this.curAngle=this.angle;this.curScattering=this.scattering*this.curSize*(this.pressureScattering?a:1)};Ca.prototype.clone=function(){return new Ca(this)};Ia.prototype.makeEmpty=function(){this.bottom=this.right=this.top=this.left=0};Ia.prototype.union=function(a){this.isEmpty()?this.set(a):a.isEmpty()||(this.left=Math.min(this.left,a.left),this.top=Math.min(this.top,a.top),this.right=Math.max(this.right,a.right),this.bottom=Math.max(this.bottom,
a.bottom))};Ia.prototype.getUnion=function(a){var c=this.clone();return c.union(a),c};Ia.prototype.getIntersection=function(a){return new Ia(Math.max(this.left,a.left),Math.max(this.top,a.top),Math.min(this.right,a.right),Math.min(this.bottom,a.bottom))};Ia.prototype.clipTo=function(a){return this.isEmpty()||(a.isEmpty()?this.makeEmpty():(this.left=Math.min(Math.max(this.left,a.left),a.right),this.top=Math.min(Math.max(this.top,a.top),a.bottom),this.right=Math.max(Math.min(this.right,a.right),a.left),
this.bottom=Math.max(Math.min(this.bottom,a.bottom),a.top))),this};Ia.prototype.containsPoint=function(a){return!(a.x<this.left||a.y<this.top||a.x>=this.right||a.y>=this.bottom)};Ia.prototype.isInside=function(a){return this.left>=a.left&&this.top>=a.top&&this.right<=a.right&&this.bottom<=a.bottom};Ia.prototype.clipSourceDest=function(a,c){c.right=c.left+a.getWidth();c.bottom=c.top+a.getHeight();this.isEmpty()||c.left>=this.right||c.top>=this.bottom||c.right<=this.left||c.bottom<=this.top?(a.makeEmpty(),
c.makeEmpty()):(c.right>this.right&&(a.right-=c.right-this.right,c.right=this.right),c.bottom>this.bottom&&(a.bottom-=c.bottom-this.bottom,c.bottom=this.bottom),c.left<this.left&&(a.left+=this.left-c.left,c.left=this.left),c.top<this.top&&(a.top+=this.top-c.top,c.top=this.top))};Ia.prototype.getWidth=function(){return this.right-this.left};Ia.prototype.getHeight=function(){return this.bottom-this.top};Ia.prototype.getArea=function(){return this.getWidth()*this.getHeight()};Ia.prototype.isEmpty=function(){return this.right<=
this.left||this.bottom<=this.top};Ia.prototype.set=function(a){this.left=a.left;this.top=a.top;this.right=a.right;this.bottom=a.bottom};Ia.prototype.clone=function(){return new Ia(this.left,this.top,this.right,this.bottom)};Ia.prototype.translate=function(a,c){return this.left+=a,this.right+=a,this.top+=c,this.bottom+=c,this};Ia.prototype.getTranslated=function(a,c){var d=this.clone();return d.translate(a,c),d};Ia.prototype.moveTo=function(a,c){this.translate(a-this.left,c-this.top)};Ia.prototype.equals=
function(a){return this.left==a.left&&this.right==a.right&&this.top==a.top&&this.bottom==a.bottom};Ia.prototype.grow=function(a,c){this.left-=a;this.right+=a;this.top-=c;this.bottom+=c};Ia.prototype.toString=function(){return"("+this.left+","+this.top+","+this.right+","+this.bottom+")"};Ia.prototype.toPoints=function(){return[{x:this.left,y:this.top},{x:this.right,y:this.top},{x:this.right,y:this.bottom},{x:this.left,y:this.bottom}]};Ia.prototype.roundNearest=function(){return this.left=Math.round(this.left),
this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this};Ia.prototype.roundContain=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this};Ia.createBoundingBox=function(a){if(0===a.length)return new Ia(0,0,0,0);let c=new Ia(a[0].x,a[0].y,a[0].x,a[0].y);for(let d=1;d<a.length;d++)c.left=Math.min(c.left,a[d].x),c.top=Math.min(c.top,a[d].y),c.right=Math.max(c.right,
a[d].x),c.bottom=Math.max(c.bottom,a[d].y);return c};Ia.prototype.subtract=function(a){return Ia.subtract(this,a)};Ia.subtract=function(a,c){a instanceof Ia&&(a=[a]);c instanceof Ia&&(c=[c]);a=a.slice(0);for(let b=0;b<c.length;b++){let g=c[b],p=a.length;for(let k=0;k<p;k++){var d=a[k];if(!d)continue;let e=d.getIntersection(g);if(!e.isEmpty()){let l=[];if(d.top<g.top&&l.push(new Ia(d.left,d.top,d.right,e.top)),d.bottom>g.bottom&&l.push(new Ia(d.left,e.bottom,d.right,d.bottom)),d.left<g.left&&l.push(new Ia(d.left,
e.top,e.left,e.bottom)),d.right>g.right&&l.push(new Ia(e.right,e.top,d.right,e.bottom)),0<(l=l.filter(m=>!m.isEmpty())).length)for(a[k]=l[0],d=1;d<l.length;d++)a.push(l[d]);else a[k]=null}}}return a.filter(b=>null!=b)};Ia.union=function(a){if(a instanceof Ia)a=[a];else{a=a.slice(0);for(let d=0;d<a.length;d++){let b=a[d],g=a.length;if(b)for(let p=d+1;p<g;p++){var c=a[p];if(c&&!b.getIntersection(c).isEmpty()){c=Ia.subtract(c,b);a[p]=c[0];for(let k=1;k<c.length;k++)a.push(c[k])}}}}return a.filter(d=>
d&&!d.isEmpty())};"object"==typeof window&&(window.cpRectGarbage=new Ia(1.5,2.5,3.5,4.5));De.prototype.getBounds=function(){return new Ia(0,0,this.width,this.height)};De.prototype.isInside=function(a,c){return 0<=a&&0<=c&&a<this.width&&c<this.height};I.prototype=Object.create(De.prototype);I.prototype.constructor=I;I.BYTES_PER_PIXEL=4;I.RED_BYTE_OFFSET=0;I.GREEN_BYTE_OFFSET=1;I.BLUE_BYTE_OFFSET=2;I.ALPHA_BYTE_OFFSET=3;I.prototype.clone=function(){return this.cloneRect(this.getBounds())};I.prototype.cloneRect=
function(a){var c=new I(a.getWidth(),a.getHeight());return c.copyBitmapRect(this,0,0,a),c};I.prototype.getPixel=function(a,c){a=Math.max(0,Math.min(this.width-1,a));c=Math.max(0,Math.min(this.height-1,c));a=this.offsetOfPixel(a,c);return this.data[a+I.ALPHA_BYTE_OFFSET]<<24|this.data[a+I.RED_BYTE_OFFSET]<<16|this.data[a+I.GREEN_BYTE_OFFSET]<<8|this.data[a+I.BLUE_BYTE_OFFSET]};I.prototype.copyRectXOR=function(a,c){var d=(c=this.getBounds().clipTo(c)).getWidth(),b=new Uint8Array(d*c.getHeight()*I.BYTES_PER_PIXEL),
g=0,p=this.offsetOfPixel(c.left,c.top),k=a.offsetOfPixel(c.left,c.top),e=(this.width-d)*I.BYTES_PER_PIXEL,l=(a.width-d)*I.BYTES_PER_PIXEL;d*=I.BYTES_PER_PIXEL;for(var m=c.top;m<c.bottom;m++,p+=e,k+=l)for(var h=0;h<d;h++,g++,p++,k++)b[g]=this.data[p]^a.data[k];return b};I.prototype.setRectXOR=function(a,c){var d=(c=this.getBounds().clipTo(c)).getWidth(),b=c.getHeight();c=this.offsetOfPixel(c.left,c.top);var g=0,p=(this.width-d)*I.BYTES_PER_PIXEL;d*=I.BYTES_PER_PIXEL;for(var k=0;k<b;k++){for(var e=
0;e<d;e++)this.data[c++]^=a[g++];c+=p}};I.prototype.copyBitmapRect=function(a,c,d,b){var g=new Ia(c,d,0,0);b=b.clone();this.getBounds().clipSourceDest(b,g);c=0|g.getWidth();d=0|g.getHeight();if(0==g.left&&0==g.top&&c==this.width&&d==this.height&&c==a.width&&d==a.height)this.copyPixelsFrom(a);else{g=this.offsetOfPixel(g.left,g.top);var p=(this.width-c)*I.BYTES_PER_PIXEL;b=a.offsetOfPixel(b.left,b.top);for(var k=(a.width-c)*I.BYTES_PER_PIXEL,e=0;e<d;e++,b+=k,g+=p)for(var l=0;l<c;l++,b+=I.BYTES_PER_PIXEL,
g+=I.BYTES_PER_PIXEL)this.data[g]=a.data[b],this.data[g+1]=a.data[b+1],this.data[g+2]=a.data[b+2],this.data[g+3]=a.data[b+3]}};I.prototype.copyAlphaFrom=function(a,c){var d=0|(c=this.getBounds().clipTo(c)).getWidth(),b=0|c.getHeight();c=this.offsetOfPixel(c.left,c.top)+I.ALPHA_BYTE_OFFSET|0;for(var g=(this.width-d)*I.BYTES_PER_PIXEL|0,p=0;p<b;p++,c+=g)for(var k=0;k<d;k++,c+=I.BYTES_PER_PIXEL)this.data[c]=a.data[c]};I.prototype.setToSize=function(a){(a.width!=this.width||a.height!=this.height)&&(this.width=
a.width,this.height=a.height,this.imageData=gi(this.width,this.height),this.data=this.imageData.data)};I.prototype.copyPixelsFrom=function(a){if(this.setToSize(a),"set"in this.data)this.data.set(a.data);else for(var c=0;c<this.data.length;c++)this.data[c]=a.data[c]};I.prototype.copyPixelsFromGreyscale=function(a){var c,d=0,b=a.width*a.height;this.setToSize(a);for(c=0;c<b;c++,d+=I.BYTES_PER_PIXEL)this.data[d+I.RED_BYTE_OFFSET]=a.data[c],this.data[d+I.GREEN_BYTE_OFFSET]=a.data[c],this.data[d+I.BLUE_BYTE_OFFSET]=
a.data[c],this.data[d+I.ALPHA_BYTE_OFFSET]=255};I.prototype.copyScaledNearestNeighbor=function(a){for(var c,d=0,b=a.width/this.width,g=a.height/this.height,p=0,k=0;p<this.height;p++,k+=g){c=a.offsetOfPixel(0,Math.round(k));for(var e=0,l=0;e<this.width;e++,d+=I.BYTES_PER_PIXEL,l+=b){var m=c+Math.round(l)*I.BYTES_PER_PIXEL;this.data[d]=a.data[m];this.data[d+1]=a.data[m+1];this.data[d+2]=a.data[m+2];this.data[d+I.ALPHA_BYTE_OFFSET]=a.data[m+I.ALPHA_BYTE_OFFSET]}}};I.prototype.createThumbnailFrom=function(a){let c=
Math.min(Math.floor(a.width/this.width),3);if(2>c)this.copyScaledNearestNeighbor(a);else{var d=new Uint16Array(5*this.width),b=a.width*I.BYTES_PER_PIXEL,g=Math.floor(a.width/this.width)*I.BYTES_PER_PIXEL,p=Math.floor(a.width/this.width/c)*I.BYTES_PER_PIXEL,k=g-p*c,e=Math.floor(a.height/this.height/c);g=e*b-g*this.width;b*=Math.floor(a.height/this.height)-e*c;var l=e=0;for(let r=0;r<this.height;r++,e+=b){let u;d.fill(0);for(var m=0;m<c;m++,e+=g){u=0;for(var h=0;h<this.width;h++,u+=5,e+=k)for(var n=
0;n<c;n++,e+=p){let v=a.data[e+I.ALPHA_BYTE_OFFSET],x=v/255;d[u]+=a.data[e]*x;d[u+1]+=a.data[e+1]*x;d[u+2]+=a.data[e+2]*x;d[u+I.ALPHA_BYTE_OFFSET]+=v;d[u+4]=Math.max(d[u+4],v)}}u=0;for(m=0;m<this.width;m++,u+=5,l+=I.BYTES_PER_PIXEL)h=d[u+4],0==h?this.data[l+I.ALPHA_BYTE_OFFSET]=0:(n=h/d[u+I.ALPHA_BYTE_OFFSET],this.data[l]=d[u]*n,this.data[l+1]=d[u+1]*n,this.data[l+2]=d[u+2]*n,this.data[l+I.ALPHA_BYTE_OFFSET]=h)}}};I.prototype.floodFill=function(a,c,d){if(this.isInside(a,c)){var b=this.getPixel(a,
c),g=b>>24&255,p=b>>16&255,k=b>>8&255,e=255&b,l=d>>24&255,m=d>>16&255,h=d>>8&255,n=255&d,r=[],u=this.getBounds(),v=this.data;if(u.left*=I.BYTES_PER_PIXEL,u.right*=I.BYTES_PER_PIXEL,r.push({x1:a*I.BYTES_PER_PIXEL,x2:a*I.BYTES_PER_PIXEL,y:c,dy:-1}),r.push({x1:a*I.BYTES_PER_PIXEL,x2:a*I.BYTES_PER_PIXEL,y:c+1,dy:1}),0==g){if(0!=l)for(;0<r.length;)if(p=r.pop(),!(p.y<u.top||p.y>=u.bottom)){k=this.offsetOfPixel(0,p.y);for(e=p.x1;e>=u.left&&0==v[e+k+I.ALPHA_BYTE_OFFSET];)v[e+k+I.RED_BYTE_OFFSET]=m,v[e+k+
I.GREEN_BYTE_OFFSET]=h,v[e+k+I.BLUE_BYTE_OFFSET]=n,v[e+k+I.ALPHA_BYTE_OFFSET]=l,e-=I.BYTES_PER_PIXEL;if(e>=p.x1){for(;e<=p.x2&&v[e+k+I.ALPHA_BYTE_OFFSET]!=g;)e+=I.BYTES_PER_PIXEL;if(a=e+I.BYTES_PER_PIXEL,e>p.x2)continue}else(e+=I.BYTES_PER_PIXEL)<p.x1&&r.push({x1:e,x2:p.x1-I.BYTES_PER_PIXEL,y:p.y-p.dy,dy:-p.dy}),a=p.x1+I.BYTES_PER_PIXEL;do{v[e+k+I.RED_BYTE_OFFSET]=m;v[e+k+I.GREEN_BYTE_OFFSET]=h;v[e+k+I.BLUE_BYTE_OFFSET]=n;for(v[e+k+I.ALPHA_BYTE_OFFSET]=l;a<u.right&&v[a+k+I.ALPHA_BYTE_OFFSET]==g;)v[a+
k+I.RED_BYTE_OFFSET]=m,v[a+k+I.GREEN_BYTE_OFFSET]=h,v[a+k+I.BLUE_BYTE_OFFSET]=n,v[a+k+I.ALPHA_BYTE_OFFSET]=l,a+=I.BYTES_PER_PIXEL;r.push({x1:e,x2:a-I.BYTES_PER_PIXEL,y:p.y+p.dy,dy:p.dy});a-I.BYTES_PER_PIXEL>p.x2&&r.push({x1:p.x2+I.BYTES_PER_PIXEL,x2:a-I.BYTES_PER_PIXEL,y:p.y-p.dy,dy:-p.dy});for(e=a+I.BYTES_PER_PIXEL;e<=p.x2&&v[e+k+I.ALPHA_BYTE_OFFSET]!=g;)e+=I.BYTES_PER_PIXEL;a=e+I.BYTES_PER_PIXEL}while(e<=p.x2)}}else if(d!=b)for(;0<r.length;)if(a=r.pop(),!(a.y<u.top||a.y>=u.bottom)){c=this.offsetOfPixel(0,
a.y);for(d=a.x1;d>=u.left&&v[d+c+I.RED_BYTE_OFFSET]==p&&v[d+c+I.GREEN_BYTE_OFFSET]==k&&v[d+c+I.BLUE_BYTE_OFFSET]==e&&v[d+c+I.ALPHA_BYTE_OFFSET]==g;)v[d+c+I.RED_BYTE_OFFSET]=m,v[d+c+I.GREEN_BYTE_OFFSET]=h,v[d+c+I.BLUE_BYTE_OFFSET]=n,v[d+c+I.ALPHA_BYTE_OFFSET]=l,d-=I.BYTES_PER_PIXEL;if(d>=a.x1){for(;d<=a.x2&&(v[d+c+I.RED_BYTE_OFFSET]!=p||v[d+c+I.GREEN_BYTE_OFFSET]!=k||v[d+c+I.BLUE_BYTE_OFFSET]!=e||v[d+c+I.ALPHA_BYTE_OFFSET]!=g);)d+=I.BYTES_PER_PIXEL;if(b=d+I.BYTES_PER_PIXEL,d>a.x2)continue}else(d+=
I.BYTES_PER_PIXEL)<a.x1&&r.push({x1:d,x2:a.x1-I.BYTES_PER_PIXEL,y:a.y-a.dy,dy:-a.dy}),b=a.x1+I.BYTES_PER_PIXEL;do{v[d+c+I.RED_BYTE_OFFSET]=m;v[d+c+I.GREEN_BYTE_OFFSET]=h;v[d+c+I.BLUE_BYTE_OFFSET]=n;for(v[d+c+I.ALPHA_BYTE_OFFSET]=l;b<u.right&&v[b+c+I.RED_BYTE_OFFSET]==p&&v[b+c+I.GREEN_BYTE_OFFSET]==k&&v[b+c+I.BLUE_BYTE_OFFSET]==e&&v[b+c+I.ALPHA_BYTE_OFFSET]==g;)v[b+c+I.RED_BYTE_OFFSET]=m,v[b+c+I.GREEN_BYTE_OFFSET]=h,v[b+c+I.BLUE_BYTE_OFFSET]=n,v[b+c+I.ALPHA_BYTE_OFFSET]=l,b+=I.BYTES_PER_PIXEL;r.push({x1:d,
x2:b-I.BYTES_PER_PIXEL,y:a.y+a.dy,dy:a.dy});b-I.BYTES_PER_PIXEL>a.x2&&r.push({x1:a.x2+I.BYTES_PER_PIXEL,x2:b-I.BYTES_PER_PIXEL,y:a.y-a.dy,dy:-a.dy});for(d=b+I.BYTES_PER_PIXEL;d<=a.x2&&(v[d+c+I.RED_BYTE_OFFSET]!=p||v[d+c+I.GREEN_BYTE_OFFSET]!=k||v[d+c+I.BLUE_BYTE_OFFSET]!=e||v[d+c+I.ALPHA_BYTE_OFFSET]!=g);)d+=I.BYTES_PER_PIXEL;b=d+I.BYTES_PER_PIXEL}while(d<=a.x2)}}};I.prototype.copyPixelColumnToArray=function(a,c,d,b){var g=(this.width-1)*I.BYTES_PER_PIXEL,p=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++){for(var k=
0;k<I.BYTES_PER_PIXEL;k++)b[p++]=this.data[a++];a+=g}};I.prototype.copyArrayToPixelColumn=function(a,c,d,b){var g=(this.width-1)*I.BYTES_PER_PIXEL,p=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++){for(var k=0;k<I.BYTES_PER_PIXEL;k++)this.data[a++]=b[p++];a+=g}};I.prototype.boxBlur=function(a,c,d){let b=(a=this.getBounds().clipTo(a)).getWidth(),g=b*I.BYTES_PER_PIXEL,p=a.getHeight();var k=Math.max(b,p);let e=new Uint8Array(k*I.BYTES_PER_PIXEL);k=new Uint8Array(k*I.BYTES_PER_PIXEL);for(let h=a.top;h<a.bottom;h++){var l=
this.offsetOfPixel(a.left,h);for(var m=0;m<g;m++)e[m]=this.data[l++];(function(n,r){for(var u=0,v=0;v<r;v++){for(var x=n[u+I.ALPHA_BYTE_OFFSET],C=0;3>C;C++,u++)n[u]=Math.round(n[u]*x/255);u++}})(e,b);Jk(e,k,b,c);l=this.offsetOfPixel(a.left,h);for(m=0;m<g;m++)this.data[l++]=k[m]}for(c=a.left;c<a.right;c++)this.copyPixelColumnToArray(c,a.top,p,e),Jk(e,k,p,d),function(h,n){for(var r=0,u=0;u<n;u++){var v=h[r+I.ALPHA_BYTE_OFFSET];if(0!=v){v=255/v;for(var x=0;3>x;x++,r++)h[r]=Math.min(Math.round(h[r]*v),
255);r++}else r+=I.BYTES_PER_PIXEL}}(k,p),this.copyArrayToPixelColumn(c,a.top,p,k)};I.prototype.offsetOfPixel=function(a,c){return 4*(c*this.width+a)|0};I.prototype.getMemorySize=function(){return this.data.length};I.prototype.getImageData=function(){return this.imageData};I.prototype.setImageData=function(a){this.width=a.width;this.height=a.height;this.imageData=a;this.data=a.data};I.prototype.clearAll=function(a){if(0==a&&"fill"in this.data)this.data.fill(0);else{var c=a>>24&255,d=a>>16&255,b=a>>
8&255;a&=255;for(var g=0;g<this.width*this.height*I.BYTES_PER_PIXEL;)this.data[g++]=d,this.data[g++]=b,this.data[g++]=a,this.data[g++]=c}};I.prototype.clearRect=function(a,c){a=this.getBounds().clipTo(a);var d=c>>24&255,b=c>>16&255,g=c>>8&255;c&=255;for(var p=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,k=this.offsetOfPixel(a.left,a.top),e=a.top;e<a.bottom;e++,k+=p)for(var l=a.left;l<a.right;l++)this.data[k++]=b,this.data[k++]=g,this.data[k++]=c,this.data[k++]=d};I.prototype.copyRegionHFlip=function(a,
c){a=this.getBounds().clipTo(a);for(var d=a.top;d<a.bottom;d++)for(var b=this.offsetOfPixel(a.left,d),g=c.offsetOfPixel(a.right-1,d),p=a.left;p<a.right;p++,g-=2*I.BYTES_PER_PIXEL)for(var k=0;k<I.BYTES_PER_PIXEL;k++)this.data[b++]=c.data[g++]};I.prototype.copyRegionVFlip=function(a,c){for(var d=(a=this.getBounds().clipTo(a)).getWidth()*I.BYTES_PER_PIXEL,b=a.top;b<a.bottom;b++)for(var g=this.offsetOfPixel(a.left,b),p=c.offsetOfPixel(a.left,a.bottom-1-(b-a.top)),k=0;k<d;k++)this.data[g++]=c.data[p++]};
I.prototype.fillWithNoise=function(a){a=this.getBounds().clipTo(a);for(var c,d=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,b=this.offsetOfPixel(a.left,a.top),g=a.top;g<a.bottom;g++,b+=d)for(var p=a.left;p<a.right;p++,b+=I.BYTES_PER_PIXEL)c=256*Math.random()|0,this.data[b+I.RED_BYTE_OFFSET]=c,this.data[b+I.GREEN_BYTE_OFFSET]=c,this.data[b+I.BLUE_BYTE_OFFSET]=c,this.data[b+I.ALPHA_BYTE_OFFSET]=255};I.prototype.gradientHorzReplace=function(a,c,d,b){var g={r:b[0]>>16&255,g:b[0]>>8&255,b:255&b[0],a:b[0]>>
24&255};b={r:b[1]>>16&255,g:b[1]>>8&255,b:255&b[1],a:b[1]>>24&255};var p=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,k=0|this.offsetOfPixel(a.left,a.top),e=a.bottom-a.top|0;if(d<c){var l=d;d=c;c=l;l=g;g=b;b=l}var m=d-c|0;l=(b.r-g.r)/m;var h=(b.g-g.g)/m,n=(b.b-g.b)/m;m=(b.a-g.a)/m;for(var r=Math.max(a.left-c,0),u=0;u<e;u++,k+=p){for(var v=a.left,x=0|Math.min(c,a.right);v<x;v++,k+=I.BYTES_PER_PIXEL)this.data[k+I.RED_BYTE_OFFSET]=g.r,this.data[k+I.GREEN_BYTE_OFFSET]=g.g,this.data[k+I.BLUE_BYTE_OFFSET]=
g.b,this.data[k+I.ALPHA_BYTE_OFFSET]=g.a;var C=g.r+l*r,J=g.g+h*r,H=g.b+n*r,G=g.a+m*r;for(x=0|Math.min(d,a.right);v<x;v++,k+=I.BYTES_PER_PIXEL)this.data[k+I.RED_BYTE_OFFSET]=C,this.data[k+I.GREEN_BYTE_OFFSET]=J,this.data[k+I.BLUE_BYTE_OFFSET]=H,this.data[k+I.ALPHA_BYTE_OFFSET]=G,C+=l,J+=h,H+=n,G+=m;for(;v<a.right;v++,k+=I.BYTES_PER_PIXEL)this.data[k+I.RED_BYTE_OFFSET]=b.r,this.data[k+I.GREEN_BYTE_OFFSET]=b.g,this.data[k+I.BLUE_BYTE_OFFSET]=b.b,this.data[k+I.ALPHA_BYTE_OFFSET]=b.a}};I.prototype.gradientVertReplace=
function(a,c,d,b){var g={r:b[0]>>16&255,g:b[0]>>8&255,b:255&b[0],a:b[0]>>24&255};b={r:b[1]>>16&255,g:b[1]>>8&255,b:255&b[1],a:b[1]>>24&255};let p=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,k=0|this.offsetOfPixel(a.left,a.top),e=a.right-a.left|0;if(d<c){var l=d;d=c;c=l;l=g;g=b;b=l}l=a.top;for(var m=0|Math.min(a.bottom,c);l<m;l++,k+=p)for(var h=0;h<e;h++,k+=I.BYTES_PER_PIXEL)this.data[k+I.RED_BYTE_OFFSET]=g.r,this.data[k+I.GREEN_BYTE_OFFSET]=g.g,this.data[k+I.BLUE_BYTE_OFFSET]=g.b,this.data[k+I.ALPHA_BYTE_OFFSET]=
g.a;var n=d-c|0;m=(b.r-g.r)/n;h=(b.g-g.g)/n;var r=(b.b-g.b)/n;n=(b.a-g.a)/n;var u=Math.max(l-c,0);c=g.r+m*u;var v=g.g+h*u,x=g.b+r*u;g=g.a+n*u;for(d=0|Math.min(a.bottom,d);l<d;l++,k+=p){for(u=0;u<e;u++,k+=I.BYTES_PER_PIXEL)this.data[k+I.RED_BYTE_OFFSET]=c,this.data[k+I.GREEN_BYTE_OFFSET]=v,this.data[k+I.BLUE_BYTE_OFFSET]=x,this.data[k+I.ALPHA_BYTE_OFFSET]=g;c+=m;v+=h;x+=r;g+=n}for(;l<a.bottom;l++,k+=p)for(d=0;d<e;d++,k+=I.BYTES_PER_PIXEL)this.data[k+I.RED_BYTE_OFFSET]=b.r,this.data[k+I.GREEN_BYTE_OFFSET]=
b.g,this.data[k+I.BLUE_BYTE_OFFSET]=b.b,this.data[k+I.ALPHA_BYTE_OFFSET]=b.a};I.prototype.gradientReplace=function(a,c,d,b,g,p){var k=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,e=0|this.offsetOfPixel(a.left,a.top),l=a.right-a.left|0,m=p[0]>>16&255,h=p[0]>>8&255,n=255&p[0],r=p[0]>>24&255,u=p[1]>>16&255,v=p[1]>>8&255,x=255&p[1];p=p[1]>>24&255;var C=g-d+(b-c)*(b-c)/(g-d);b=b-c+(g-d)*(g-d)/(b-c);g=1/b;for(var J=a.top;J<a.bottom;J++,e+=k)for(var H=(a.left-c)/b+(J-d)/C,G=0;G<l;G++,e+=I.BYTES_PER_PIXEL){var L=
Math.min(Math.max(H,0),1),U=1-L;this.data[e+I.RED_BYTE_OFFSET]=m*U+u*L;this.data[e+I.GREEN_BYTE_OFFSET]=h*U+v*L;this.data[e+I.BLUE_BYTE_OFFSET]=n*U+x*L;this.data[e+I.ALPHA_BYTE_OFFSET]=r*U+p*L;H+=g}};I.prototype.gradientAlpha=function(a,c,d,b,g,p){var k=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,e=0|this.offsetOfPixel(a.left,a.top),l=a.right-a.left|0,m=p[0]>>16&255,h=p[0]>>8&255,n=255&p[0],r=p[0]>>24&255,u=p[1]>>16&255,v=p[1]>>8&255,x=255&p[1];p=p[1]>>24&255;var C=g-d+(b-c)*(b-c)/(g-d);b=b-c+(g-
d)*(g-d)/(b-c);g=1/b;for(var J=a.top;J<a.bottom;J++,e+=k)for(var H=(a.left-c)/b+(J-d)/C,G=0;G<l;G++,e+=I.BYTES_PER_PIXEL){var L=Math.min(Math.max(H,0),1),U=1-L,T=m*U+u*L,Y=h*U+v*L,ea=n*U+x*L;U=r*U+p*L;L=this.data[e+I.ALPHA_BYTE_OFFSET];L=U+L-U*L/255|0;if(0<L){U=255*U/L|0;var ja=255-U;this.data[e+I.RED_BYTE_OFFSET]=(T*U+this.data[e+I.RED_BYTE_OFFSET]*ja)/255|0;this.data[e+I.GREEN_BYTE_OFFSET]=(Y*U+this.data[e+I.GREEN_BYTE_OFFSET]*ja)/255|0;this.data[e+I.BLUE_BYTE_OFFSET]=(ea*U+this.data[e+I.BLUE_BYTE_OFFSET]*
ja)/255|0;this.data[e+I.ALPHA_BYTE_OFFSET]=L}H+=g}};I.prototype.gradient=function(a,c,d,b,g,p,k){a=this.getBounds().clipTo(a);(c!=b||d!=g)&&(k||255==p[0]>>>24&&255==p[1]>>>24?c==b?this.gradientVertReplace(a,d,g,p):d==g?this.gradientHorzReplace(a,c,b,p):this.gradientReplace(a,c,d,b,g,p):this.gradientAlpha(a,c,d,b,g,p))};I.prototype.fillWithColorNoise=function(a){a=this.getBounds().clipTo(a);for(var c,d=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,b=this.offsetOfPixel(a.left,a.top),g=a.top;g<a.bottom;g++,
b+=d)for(var p=a.left;p<a.right;p++,b+=I.BYTES_PER_PIXEL)c=16777216*Math.random()|0,this.data[b+I.RED_BYTE_OFFSET]=c>>16&255,this.data[b+I.GREEN_BYTE_OFFSET]=c>>8&255,this.data[b+I.BLUE_BYTE_OFFSET]=255&c,this.data[b+I.ALPHA_BYTE_OFFSET]=255};I.prototype.invert=function(a){a=this.getBounds().clipTo(a);for(var c=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,d=this.offsetOfPixel(a.left,a.top),b=a.top;b<a.bottom;b++,d+=c)for(var g=a.left;g<a.right;g++,d+=I.BYTES_PER_PIXEL)this.data[d+I.RED_BYTE_OFFSET]^=
255,this.data[d+I.GREEN_BYTE_OFFSET]^=255,this.data[d+I.BLUE_BYTE_OFFSET]^=255};I.prototype.getNonTransparentBounds=function(a){var c,d,b=a.clone();var g=(this.width-b.getWidth())*I.BYTES_PER_PIXEL;a=this.offsetOfPixel(b.left,b.top)+I.ALPHA_BYTE_OFFSET;for(d=b.top;d<b.bottom;d++,a+=g){var p=0;for(c=b.left;c<b.right;c++,a+=I.BYTES_PER_PIXEL)p|=this.data[a];if(0!=p)break}if(b.top=d,b.top==b.bottom)return b;a=this.offsetOfPixel(b.right-1,b.bottom-1)+I.ALPHA_BYTE_OFFSET;for(d=b.bottom-1;d>=b.top;d--,
a-=g){p=0;for(c=b.right-1;c>=b.left;c--,a-=I.BYTES_PER_PIXEL)p|=this.data[a];if(0!=p)break}b.bottom=d+1;g=I.BYTES_PER_PIXEL*this.width;for(c=b.left;c<b.right;c++){a=this.offsetOfPixel(c,b.top)+I.ALPHA_BYTE_OFFSET;p=0;for(d=b.top;d<b.bottom;d++,a+=g)p|=this.data[a];if(0!=p)break}b.left=c;for(c=b.right-1;c>=b.left;c--){a=this.offsetOfPixel(c,b.top)+I.ALPHA_BYTE_OFFSET;p=0;for(d=b.top;d<b.bottom;d++,a+=g)p|=this.data[a];if(0!=p)break}return b.right=c+1,b};I.prototype.getAsCanvas=function(a){var c=Ed(this.imageData.width,
this.imageData.height);return c.getContext("2d").putImageData(this.imageData,0,0),Kk(c,a||0)};I.prototype.getAsPNG=function(a){var c;return!("string"!=typeof(c=this.getAsCanvas(a).toDataURL("image/png"))||!c.match(/^data:image\/png;base64,/i))&&window.atob(c.substring(22))};I.prototype.getAsPNGBuffer=function(a){return this.getAsCanvas(a).toBuffer("image/png")};I.prototype.hasAlphaInRect=function(a){a=this.getBounds().clipTo(a);for(var c=(this.width-a.getWidth())*I.BYTES_PER_PIXEL,d=this.offsetOfPixel(a.left,
a.top)+I.ALPHA_BYTE_OFFSET,b=a.top;b<a.bottom;b++,d+=c){for(var g=255,p=a.left;p<a.right;p++,d+=I.BYTES_PER_PIXEL)g&=this.data[d];if(255!=g)return!0}return!1};I.prototype.hasAlpha=function(){return this.hasAlphaInRect(this.getBounds())};I.createFromImage=function(a){var c=Ed(a.width,a.height).getContext("2d");return c.globalCompositeOperation="copy",c.drawImage(a,0,0),new I(c.getImageData(0,0,a.width,a.height))};I.prototype.equals=function(a){if(this.width!=a.width||this.height!=a.height)return!1;
for(let c=0;c<this.data.length;c+=I.BYTES_PER_PIXEL)if(!(0==this.data[c+I.ALPHA_BYTE_OFFSET]&&0==a.data[c+I.ALPHA_BYTE_OFFSET]||this.data[c]==a.data[c]&&this.data[c+1]==a.data[c+1]&&this.data[c+2]==a.data[c+2]&&this.data[c+3]==a.data[c+3]))return!1;return!0};rb.prototype=Object.create(tb.prototype);rb.prototype.constructor=rb;rb.prototype.getLinearizedLayerList=function(a,c){for(let d of(c=c||[],this.layers))d instanceof rb&&(d.expanded||!a)&&d.getLinearizedLayerList(a,c),c.push(d);return c};rb.prototype.clearLayers=
function(){this.layers=[]};rb.prototype.addLayer=function(a){a.parent=this;this.layers.push(a)};rb.prototype.insertLayer=function(a,c){c.parent=this;this.layers.splice(a,0,c)};rb.prototype.removeLayer=function(a){a=this.layers.indexOf(a);-1<a&&this.layers.splice(a,1)};rb.prototype.removeLayerAtIndex=function(a){var c=this.layers[a];return c&&this.layers.splice(a,1),c};rb.prototype.setLayerAtIndex=function(a,c){var d=this.layers[a];return c.parent=this,this.layers[a]=c,d};rb.prototype.setExpanded=
function(a){this.expanded=a};rb.prototype.getExpanded=function(){return this.expanded};rb.prototype.indexOf=function(a){return this.layers.indexOf(a)};rb.prototype.getMemoryUsed=function(){return this.layers.map(a=>a.getMemoryUsed()).reduce(So,0)};rb.prototype.clone=function(){var a=new rb(this.name,this.blendMode);return tb.prototype.copyFrom.call(a,this),a.expanded=this.expanded,a.layers=this.layers.map(c=>c.clone()),a.layers.forEach(c=>c.parent=a),a};rb.prototype.getNonTransparentBounds=function(a){var c=
new Ia(0,0,0,0);return this.layers.forEach(d=>c.union(d.getNonTransparentBounds(a))),c};gb.prototype=Object.create(De.prototype);gb.prototype.constructor=gb;gb.prototype.createBitmap=function(a,c,d){switch(this.bitDepth=d,d){case 32:this.data=new Uint32Array(a*c);break;case 16:this.data=new Uint16Array(a*c);break;default:this.data=new Uint8Array(a*c)}};gb.prototype.clone=function(){var a=new gb(this.width,this.height,this.bitDepth);return a.copyPixelsFrom(this),a};gb.prototype.cloneRect=function(a){var c=
new gb(a.getWidth(),a.getHeight(),this.bitDepth);return c.copyBitmapRect(this,0,0,a),c};gb.prototype.getPixel=function(a,c){return a=Math.max(0,Math.min(this.width-1,a)),c=Math.max(0,Math.min(this.height-1,c)),this.data[this.offsetOfPixel(a,c)]};gb.prototype.clearAll=function(a){this.data.fill(a)};gb.prototype.clearRect=function(a,c){if((a=this.getBounds().clipTo(a)).equals(this.getBounds()))this.clearAll(c);else{let d=this.width,b=a.right-a.left,g=this.offsetOfPixel(a.left,a.top);for(let p=a.top;p<
a.bottom;p++,g+=d)this.data.fill(c,g,g+b)}};gb.prototype.copyScaledNearestNeighbor=function(a){for(var c,d=0,b=a.width/this.width,g=a.height/this.height,p=0,k=0;p<this.height;p++,k+=g){c=a.offsetOfPixel(0,Math.round(k));for(var e=0,l=0;e<this.width;e++,d++,l+=b)this.data[d]=a.data[c+Math.round(l)]}};gb.prototype.floodFill=function(a,c,d){if(this.isInside(a,c)){d&=255;var b=this.getPixel(a,c),g=[],p=this.getBounds(),k=this.data;if(g.push({x1:a,x2:a,y:c,dy:-1}),g.push({x1:a,x2:a,y:c+1,dy:1}),d!=b)for(;0<
g.length;){a=g.pop();if(a.y<p.top||a.y>=p.bottom)continue;c=this.offsetOfPixel(0,a.y);let e=a.x1,l;for(;e>=p.left&&k[e+c]==b;)k[e+c]=d,e--;if(e>=a.x1){for(;e<=a.x2&&k[e+c]!=b;)e++;if(l=e+1,e>a.x2)continue}else++e<a.x1&&g.push({x1:e,x2:a.x1-1,y:a.y-a.dy,dy:-a.dy}),l=a.x1+1;do{for(k[e+c]=d;l<p.right&&k[l+c]==b;)k[l+c]=d,l++;g.push({x1:e,x2:l-1,y:a.y+a.dy,dy:a.dy});l-1>a.x2&&g.push({x1:a.x2+1,x2:l-1,y:a.y-a.dy,dy:-a.dy});for(e=l+1;e<=a.x2&&k[e+c]!=b;)e++;l=e+1}while(e<=a.x2)}}};gb.prototype.createThumbnailFrom=
function(a){let c=Math.min(Math.floor(a.width/this.width),3);if(2>c)this.copyScaledNearestNeighbor(a);else{var d=new Uint16Array(this.width),b=a.width,g=Math.floor(a.width/this.width),p=Math.floor(a.width/this.width/c),k=g-p*c,e=Math.floor(a.height/this.height/c);g=e*b-g*this.width;b*=Math.floor(a.height/this.height)-e*c;var l=e=0;for(let h=0;h<this.height;h++,e+=b){let n;d.fill(0);for(var m=0;m<c;m++,e+=g){n=0;for(let r=0;r<this.width;r++,n++,e+=k)for(let u=0;u<c;u++,e+=p)d[n]+=a.data[e]}n=0;for(m=
0;m<this.width;m++,n++,l++)this.data[l]=d[n]/(c*c)}}};gb.prototype.mirrorHorizontally=function(){let a=this.width,c=this.height,d=new Uint8Array(a*c),b=0,g=a;for(let p=0;p<c;p++,g+=a+a)for(let k=0;k<a;k++)d[b++]=this.data[--g];this.data=d};gb.prototype.applyLUT=function(a){for(var c=0;c<this.data.length;c++)this.data[c]=a.table[this.data[c]]};gb.prototype.getAsCanvas=function(a){var c=this.getImageData(0,0,this.width,this.height),d=Ed(this.width,this.height);return d.getContext("2d").putImageData(c,
0,0),Kk(d,a||0)};gb.prototype.getImageData=function(a,c,d,b){let g=gi(d,b);a=this.offsetOfPixel(a,c);c=0;let p=this.width-d;for(let k=0;k<b;k++,a+=p)for(let e=0;e<d;e++,a++)g.data[c++]=this.data[a],g.data[c++]=this.data[a],g.data[c++]=this.data[a],g.data[c++]=255;return g};gb.prototype.pasteImageData=function(a,c,d){let b=0;c=this.offsetOfPixel(c,d);d=this.width-a.width;for(let g=0;g<a.height;g++,c+=d)for(let p=0;p<a.width;p++,b+=4,c++)this.data[c]=a.data[b];return a};gb.prototype.copyPixelsFrom=
function(a){a.width!=this.width||a.height!=this.height||a.bitDepth!=this.bitDepth?(this.data=a.data.slice(0),this.width=a.width,this.height=a.height,this.bitDepth=a.bitDepth):this.data.set(a.data)};gb.prototype.copyRectXOR=function(a,c){for(var d=(c=this.getBounds().clipTo(c)).getWidth(),b=new Uint8Array(d*c.getHeight()),g=0,p=this.offsetOfPixel(c.left,c.top),k=a.offsetOfPixel(c.left,c.top),e=this.width-d,l=a.width-d,m=c.top;m<c.bottom;m++,p+=e,k+=l)for(var h=0;h<d;h++,g++,p++,k++)b[g]=this.data[p]^
a.data[k];return b};gb.prototype.setRectXOR=function(a,c){var d=(c=this.getBounds().clipTo(c)).getWidth(),b=c.getHeight();c=this.offsetOfPixel(c.left,c.top);for(var g=0,p=this.width-d,k=0;k<b;k++){for(var e=0;e<d;e++)this.data[c++]^=a[g++];c+=p}};gb.prototype.copyBitmapRect=function(a,c,d,b){var g=new Ia(c,d,0,0);b=b.clone();this.getBounds().clipSourceDest(b,g);c=0|g.getWidth();d=0|g.getHeight();if(0==g.left&&0==g.top&&c==this.width&&d==this.height&&c==a.width&&d==a.height)this.copyPixelsFrom(a);
else{g=this.offsetOfPixel(g.left,g.top);var p=this.width-c;b=a.offsetOfPixel(b.left,b.top);for(var k=a.width-c,e=0;e<d;e++,b+=k,g+=p)for(var l=0;l<c;l++,b++,g++)this.data[g]=a.data[b]}};gb.prototype.copyRegionHFlip=function(a,c){a=this.getBounds().clipTo(a);for(var d=a.top;d<a.bottom;d++)for(var b=this.offsetOfPixel(a.left,d),g=c.offsetOfPixel(a.right-1,d),p=a.left;p<a.right;p++,g-=2)this.data[b++]=c.data[g++]};gb.prototype.copyRegionVFlip=function(a,c){for(var d=(a=this.getBounds().clipTo(a)).getWidth(),
b=a.top;b<a.bottom;b++)for(var g=this.offsetOfPixel(a.left,b),p=c.offsetOfPixel(a.left,a.bottom-1-(b-a.top)),k=0;k<d;k++)this.data[g++]=c.data[p++]};gb.prototype.copyPixelColumnToArray=function(a,c,d,b){var g=this.width,p=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++)b[p]=this.data[a],a+=g,p++};gb.prototype.copyArrayToPixelColumn=function(a,c,d,b){var g=this.width,p=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++)this.data[a]=b[p],a+=g,p++};gb.prototype.boxBlur=function(a,c,d){let b=(a=this.getBounds().clipTo(a)).getWidth(),
g=a.getHeight();var p=Math.max(b,g);let k=new this.data.constructor(p);p=new this.data.constructor(p);for(let m=a.top;m<a.bottom;m++){var e=this.offsetOfPixel(a.left,m);for(var l=0;l<b;l++)k[l]=this.data[e++];Lk(k,p,b,c);e=this.offsetOfPixel(a.left,m);for(l=0;l<b;l++)this.data[e++]=p[l]}for(c=a.left;c<a.right;c++)this.copyPixelColumnToArray(c,a.top,g,k),Lk(k,p,g,d),this.copyArrayToPixelColumn(c,a.top,g,p)};gb.prototype.offsetOfPixel=function(a,c){return c*this.width+a};gb.prototype.fillWithNoise=
function(a){a=this.getBounds().clipTo(a);for(var c=this.width-a.getWidth(),d=this.offsetOfPixel(a.left,a.top),b=a.top;b<a.bottom;b++,d+=c)for(var g=a.left;g<a.right;g++,d++)this.data[d]=256*Math.random()|0};gb.prototype.invert=function(a){a=this.getBounds().clipTo(a);for(var c=this.width-a.getWidth(),d=this.offsetOfPixel(a.left,a.top),b=a.top;b<a.bottom;b++,d+=c)for(var g=a.left;g<a.right;g++,d++)this.data[d]=~this.data[d]};gb.prototype.getValueBounds=function(a,c){var d,b,g=a.clone();var p=this.width-
g.getWidth();a=this.offsetOfPixel(g.left,g.top);for(b=g.top;b<g.bottom;b++,a+=p){var k=!1;for(d=g.left;d<g.right;d++,a++)if(this.data[a]!=c){k=!0;break}if(k)break}if(g.top=b,g.top==g.bottom)return g;a=this.offsetOfPixel(g.right-1,g.bottom-1);for(b=g.bottom-1;b>=g.top;b--,a-=p){k=!1;for(d=g.right-1;d>=g.left;d--,a--)if(this.data[a]!=c){k=!0;break}if(k)break}g.bottom=b+1;p=this.width;for(d=g.left;d<g.right;d++){a=this.offsetOfPixel(d,g.top);k=!1;for(b=g.top;b<g.bottom;b++,a+=p)if(this.data[a]!=c){k=
!0;break}if(k)break}g.left=d;for(d=g.right-1;d>=g.left;d--){a=this.offsetOfPixel(d,g.top);k=!1;for(b=g.top;b<g.bottom;b++,a+=p)if(this.data[a]!=c){k=!0;break}if(k)break}return g.right=d+1,g};gb.prototype.gradientHorzReplace=function(a,c,d,b){var g=255&b[0];b=255&b[1];var p=this.width-a.getWidth(),k=0|this.offsetOfPixel(a.left,a.top),e=a.bottom-a.top|0;if(d<c){var l=d;d=c;c=l;l=g;g=b;b=l}l=(b-g)/(d-c|0);for(var m=Math.max(a.left-c,0),h=0;h<e;h++,k+=p){for(var n=a.left,r=0|Math.min(c,a.right);n<r;n++,
k++)this.data[k]=g;var u=g+l*m;for(r=0|Math.min(d,a.right);n<r;n++,k++)this.data[k]=u,u+=l;for(;n<a.right;n++,k++)this.data[k]=b}};gb.prototype.gradientVertReplace=function(a,c,d,b){var g=255&b[0];b=255&b[1];let p=this.width-a.getWidth(),k=0|this.offsetOfPixel(a.left,a.top),e=a.right-a.left|0;if(d<c){var l=d;d=c;c=l;l=g;g=b;b=l}l=a.top;for(var m=0|Math.min(a.bottom,c);l<m;l++,k+=p)for(let h=0;h<e;h++,k++)this.data[k]=g;m=(b-g)/(d-c|0);c=g+m*Math.max(l-c,0);for(d=0|Math.min(a.bottom,d);l<d;l++,k+=
p){for(g=0;g<e;g++,k++)this.data[k]=c;c+=m}for(;l<a.bottom;l++,k+=p)for(d=0;d<e;d++,k++)this.data[k]=b};gb.prototype.gradientReplace=function(a,c,d,b,g,p){var k=this.width-a.getWidth(),e=0|this.offsetOfPixel(a.left,a.top),l=a.right-a.left|0,m=255&p[0];p=255&p[1];var h=g-d+(b-c)*(b-c)/(g-d);b=b-c+(g-d)*(g-d)/(b-c);g=1/b;for(var n=a.top;n<a.bottom;n++,e+=k)for(var r=(a.left-c)/b+(n-d)/h,u=0;u<l;u++,e++){var v=Math.min(Math.max(r,0),1);this.data[e]=m*(1-v)+p*v;r+=g}};gb.prototype.gradientAlpha=function(a,
c,d,b,g,p){var k=this.width-a.getWidth(),e=0|this.offsetOfPixel(a.left,a.top),l=a.right-a.left|0,m=255&p[0],h=p[0]>>24&255,n=255&p[1];p=p[1]>>24&255;var r=g-d+(b-c)*(b-c)/(g-d);b=b-c+(g-d)*(g-d)/(b-c);g=1/b;for(var u=a.top;u<a.bottom;u++,e+=k)for(var v=(a.left-c)/b+(u-d)/r,x=0;x<l;x++,e++){var C=Math.min(Math.max(v,0),1),J=1-C,H=h*J+p*C;this.data[e]=((m*J+n*C)*H+this.data[e]*(255-H))/255|0;v+=g}};gb.prototype.gradient=function(a,c,d,b,g,p,k){a=this.getBounds().clipTo(a);(c!=b||d!=g)&&(k||255==p[0]>>>
24&&255==p[1]>>>24?c==b?this.gradientVertReplace(a,d,g,p):d==g?this.gradientHorzReplace(a,c,b,p):this.gradientReplace(a,c,d,b,g,p):this.gradientAlpha(a,c,d,b,g,p))};gb.prototype.equals=function(a){if(this.width!=a.width||this.height!=a.height)return!1;for(let c=0;c<this.data.length;c++)if(this.data[c]!=a.data[c])return!1;return!0};let Yb=Array(256),Zb=Array(256);S.multiplyOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m;l&&(m=a.data[b],a.data[b]=m-((255^c.data[b])*m*l/65025|0),m=a.data[b+1],a.data[b+1]=m-((255^c.data[b+1])*m*l/65025|0),m=a.data[b+2],a.data[b+2]=m-((255^c.data[b+2])*m*l/65025|0))}};S.multiplyOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h;m&&(h=a.data[b],
a.data[b]=h-((255^c.data[b])*h*m/65025|0),h=a.data[b+1],a.data[b+1]=h-((255^c.data[b+1])*h*m/65025|0),h=a.data[b+2],a.data[b+2]=h-((255^c.data[b+2])*h*m/65025|0))}};S.multiplyOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let l=0;l<g;l++,b+=4){var k=c.data[b+3];let m,h;if(k){let n=k+(m=a.data[b+3])-(k*m/255|0)|0,r=k*m/255|0,u=k*(255^m)/255|0,v=(255^k)*m/255|0;k=c.data[b];
h=a.data[b];a.data[b]=(k*u+h*v+(k*h*r/255|0))/n|0;k=c.data[b+1];h=a.data[b+1];a.data[b+1]=(k*u+h*v+(k*h*r/255|0))/n|0;k=c.data[b+2];h=a.data[b+2];a.data[b+2]=(k*u+h*v+(k*h*r/255|0))/n|0;a.data[b+3]=n}}};S.multiplyOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=e+(h=a.data[b+3])-(e*h/255|0)|0,u=e*h/255|
0,v=e*(255^h)/255|0,x=(255^e)*h/255|0;e=c.data[b];n=a.data[b];a.data[b]=(e*v+n*x+(e*n*u/255|0))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(e*v+n*x+(e*n*u/255|0))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(e*v+n*x+(e*n*u/255|0))/r|0;a.data[b+3]=r}}};S.multiplyOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<
p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r;n&&(r=a.data[e],a.data[e]=r-((255^c.data[e])*r*n/65025|0),r=a.data[e+1],a.data[e+1]=r-((255^c.data[e+1])*r*n/65025|0),r=a.data[e+2],a.data[e+2]=r-((255^c.data[e+2])*r*n/65025|0))}};S.multiplyOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=
c.data[l+3]*g.data[b]*d/25500|0,u;r&&(u=a.data[l],a.data[l]=u-((255^c.data[l])*u*r/65025|0),u=a.data[l+1],a.data[l+1]=u-((255^c.data[l+1])*u*r/65025|0),u=a.data[l+2],a.data[l+2]=u-((255^c.data[l+2])*u*r/65025|0))}};S.multiplyOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+
3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=m*r/255|0,C=m*(255^r)/255|0,J=(255^m)*r/255|0;m=c.data[e];u=a.data[e];a.data[e]=(m*C+u*J+(m*u*x/255|0))/v|0;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=(m*C+u*J+(m*u*x/255|0))/v|0;m=c.data[e+2];u=a.data[e+2];a.data[e+2]=(m*C+u*J+(m*u*x/255|0))/v|0;a.data[e+3]=v}}};S.multiplyOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),
m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u,v;if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=h*u/255|0,J=h*(255^u)/255|0,H=(255^h)*u/255|0;h=c.data[l];v=a.data[l];a.data[l]=(h*J+v*H+(h*v*C/255|0))/x|0;h=c.data[l+1];v=a.data[l+1];a.data[l+1]=(h*J+v*H+(h*v*C/255|0))/x|0;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=(h*J+v*H+(h*v*C/255|0))/x|0;a.data[l+3]=x}}};S.multiply2OntoOpaqueFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m;l&&(m=a.data[b],a.data[b]=m-Math.ceil((255^c.data[b])*m*l/65025),m=a.data[b+1],a.data[b+1]=m-Math.ceil((255^c.data[b+1])*m*l/65025),m=a.data[b+2],a.data[b+2]=m-Math.ceil((255^c.data[b+2])*m*l/65025))}};S.multiply2OntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|
0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h;m&&(h=a.data[b],a.data[b]=h-Math.ceil((255^c.data[b])*h*m/65025),h=a.data[b+1],a.data[b+1]=h-Math.ceil((255^c.data[b+1])*h*m/65025),h=a.data[b+2],a.data[b+2]=h-Math.ceil((255^c.data[b+2])*h*m/65025))}};S.multiply2OntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let l=
0;l<g;l++,b+=4){var k=c.data[b+3];let m,h;if(k){let n=k+(m=a.data[b+3])-(k*m/255|0)|0,r=k*m/255|0,u=k*(255^m)/255|0,v=(255^k)*m/255|0;k=c.data[b];h=a.data[b];a.data[b]=(k*u+h*v+(k*h*r/255|0))/n|0;k=c.data[b+1];h=a.data[b+1];a.data[b+1]=(k*u+h*v+(k*h*r/255|0))/n|0;k=c.data[b+2];h=a.data[b+2];a.data[b+2]=(k*u+h*v+(k*h*r/255|0))/n|0;a.data[b+3]=n}}};S.multiply2OntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=e+(h=a.data[b+3])-(e*h/255|0)|0,u=e*h/255|0,v=e*(255^h)/255|0,x=(255^e)*h/255|0;e=c.data[b];n=a.data[b];a.data[b]=(e*v+n*x+(e*n*u/255|0))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(e*v+n*x+(e*n*u/255|0))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(e*v+n*x+(e*n*u/255|0))/r|0;a.data[b+3]=r}}};S.multiply2OntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),
k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r;n&&(r=a.data[e],a.data[e]=r-Math.ceil((255^c.data[e])*r*n/65025),r=a.data[e+1],a.data[e+1]=r-Math.ceil((255^c.data[e+1])*r*n/65025),r=a.data[e+2],a.data[e+2]=r-Math.ceil((255^c.data[e+2])*r*n/65025))}};S.multiply2OntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),
e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u;r&&(u=a.data[l],a.data[l]=u-Math.ceil((255^c.data[l])*u*r/65025),u=a.data[l+1],a.data[l+1]=u-Math.ceil((255^c.data[l+1])*u*r/65025),u=a.data[l+2],a.data[l+2]=u-Math.ceil((255^c.data[l+2])*u*r/65025))}};S.multiply2OntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|
b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=m*r/255|0,C=m*(255^r)/255|0,J=(255^m)*r/255|0;m=c.data[e];u=a.data[e];a.data[e]=(m*C+u*J+(m*u*x/255|0))/v|0;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=(m*C+u*J+(m*u*x/255|0))/v|0;m=c.data[e+2];u=a.data[e+2];a.data[e+2]=(m*C+u*J+(m*u*x/255|0))/
v|0;a.data[e+3]=v}}};S.multiply2OntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u,v;if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=h*u/255|0,J=h*(255^u)/255|0,H=(255^h)*u/255|0;h=c.data[l];v=a.data[l];a.data[l]=(h*J+v*H+(h*v*C/255|0))/x|0;h=
c.data[l+1];v=a.data[l+1];a.data[l+1]=(h*J+v*H+(h*v*C/255|0))/x|0;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=(h*J+v*H+(h*v*C/255|0))/x|0;a.data[l+3]=x}}};S.normalOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m;if(l)if(255==l)a.data[b]=c.data[b],a.data[b+1]=c.data[b+1],a.data[b+2]=c.data[b+2];else{let h=255-l;m=c.data[b];a.data[b]=(m*l+a.data[b]*
h)/255|0;m=c.data[b+1];a.data[b+1]=(m*l+a.data[b+1]*h)/255|0;m=c.data[b+2];a.data[b+2]=(m*l+a.data[b+2]*h)/255|0}}};S.normalOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h;if(m){let n=255-m;h=c.data[b];a.data[b]=(h*m+a.data[b]*n)/255|0;h=c.data[b+1];a.data[b+1]=(h*m+a.data[b+1]*n)/255|0;h=c.data[b+2];a.data[b+2]=(h*m+a.data[b+
2]*n)/255|0}}};S.normalOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let l=0;l<g;l++,b+=4){var k=c.data[b+3];let m;if(k){let h=k+(m=a.data[b+3])-(k*m/255|0)|0;k=255*k/h|0;let n=255-k;a.data[b]=(c.data[b]*k+a.data[b]*n)/255|0;a.data[b+1]=(c.data[b+1]*k+a.data[b+1]*n)/255|0;a.data[b+2]=(c.data[b+2]*k+a.data[b+2]*n)/255|0;a.data[b+3]=h}}};S.normalOntoTransparentFusionWithTransparentLayer=
function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h;if(e){let n=e+(h=a.data[b+3])-(e*h/255|0)|0;e=255*e/n|0;let r=255-e;a.data[b]=(c.data[b]*e+a.data[b]*r)/255|0;a.data[b+1]=(c.data[b+1]*e+a.data[b+1]*r)/255|0;a.data[b+2]=(c.data[b+2]*e+a.data[b+2]*r)/255|0;a.data[b+3]=n}}};S.normalOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=
0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r;if(n)if(255==n)a.data[e]=c.data[e],a.data[e+1]=c.data[e+1],a.data[e+2]=c.data[e+2];else{let u=255-n;r=c.data[e];a.data[e]=(r*n+a.data[e]*u)/255|0;r=c.data[e+1];a.data[e+1]=(r*n+a.data[e+1]*u)/255|0;r=c.data[e+2];a.data[e+2]=(r*n+a.data[e+2]*u)/255|0}}};S.normalOntoOpaqueFusionWithTransparentLayerMasked=
function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u;if(r){let v=255-r;u=c.data[l];a.data[l]=(u*r+a.data[l]*v)/255|0;u=c.data[l+1];a.data[l+1]=(u*r+a.data[l+1]*v)/255|0;u=c.data[l+2];a.data[l+2]=(u*r+a.data[l+2]*v)/255|0}}};S.normalOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=
0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r;if(m){let u=m+(r=a.data[e+3])-(m*r/255|0)|0;m=255*m/u|0;let v=255-m;a.data[e]=(c.data[e]*m+a.data[e]*v)/255|0;a.data[e+1]=(c.data[e+1]*m+a.data[e+1]*v)/255|0;a.data[e+2]=(c.data[e+2]*m+a.data[e+2]*v)/255|0;a.data[e+3]=u}}};S.normalOntoTransparentFusionWithTransparentLayerMasked=
function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u;if(h){let v=h+(u=a.data[l+3])-(h*u/255|0)|0;h=255*h/v|0;let x=255-h;a.data[l]=(c.data[l]*h+a.data[l]*x)/255|0;a.data[l+1]=(c.data[l+1]*h+a.data[l+1]*x)/255|0;a.data[l+2]=(c.data[l+2]*h+a.data[l+2]*x)/255|0;a.data[l+3]=v}}};S.addOntoOpaqueFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3];l&&(a.data[b]=a.data[b]+l*c.data[b]/255|0,a.data[b+1]=a.data[b+1]+l*c.data[b+1]/255|0,a.data[b+2]=a.data[b+2]+l*c.data[b+2]/255|0)}};S.addOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<
p;l++,b+=4){let m=c.data[b+3]*d/100|0;m&&(a.data[b]=a.data[b]+m*c.data[b]/255|0,a.data[b+1]=a.data[b+1]+m*c.data[b+1]/255|0,a.data[b+2]=a.data[b+2]+m*c.data[b+2]/255|0)}};S.addOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m;if(l){let h=l+(m=a.data[b+3])-(l*m/255|0)|0;a.data[b]=(m*a.data[b]+l*c.data[b])/h|0;a.data[b+1]=(m*a.data[b+
1]+l*c.data[b+1])/h|0;a.data[b+2]=(m*a.data[b+2]+l*c.data[b+2])/h|0;a.data[b+3]=h}}};S.addOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h;if(m){let n=m+(h=a.data[b+3])-(m*h/255|0)|0;a.data[b]=(h*a.data[b]+m*c.data[b])/n|0;a.data[b+1]=(h*a.data[b+1]+m*c.data[b+1])/n|0;a.data[b+2]=(h*a.data[b+2]+m*c.data[b+2])/n|0;a.data[b+
3]=n}}};S.addOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0;n&&(a.data[e]=a.data[e]+n*c.data[e]/255|0,a.data[e+1]=a.data[e+1]+n*c.data[e+1]/255|0,a.data[e+2]=a.data[e+2]+n*c.data[e+2]/255|0)}};S.addOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,
g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0;r&&(a.data[l]=a.data[l]+r*c.data[l]/255|0,a.data[l+1]=a.data[l+1]+r*c.data[l+1]/255|0,a.data[l+2]=a.data[l+2]+r*c.data[l+2]/255|0)}};S.addOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|
c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r;if(n){let u=n+(r=a.data[e+3])-(n*r/255|0)|0;a.data[e]=(r*a.data[e]+n*c.data[e])/u|0;a.data[e+1]=(r*a.data[e+1]+n*c.data[e+1])/u|0;a.data[e+2]=(r*a.data[e+2]+n*c.data[e+2])/u|0;a.data[e+3]=u}}};S.addOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|
c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u;if(r){let v=r+(u=a.data[l+3])-(r*u/255|0)|0;a.data[l]=(u*a.data[l]+r*c.data[l])/v|0;a.data[l+1]=(u*a.data[l+1]+r*c.data[l+1])/v|0;a.data[l+2]=(u*a.data[l+2]+r*c.data[l+2])/v|0;a.data[l+3]=v}}};S.subtractOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3];l&&(a.data[b]=a.data[b]+l*c.data[b]/255-l|0,a.data[b+1]=a.data[b+1]+l*c.data[b+1]/255-l|0,a.data[b+2]=a.data[b+2]+l*c.data[b+2]/255-l|0)}};S.subtractOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0;m&&(a.data[b]=a.data[b]+m*c.data[b]/255-m|0,a.data[b+
1]=a.data[b+1]+m*c.data[b+1]/255-m|0,a.data[b+2]=a.data[b+2]+m*c.data[b+2]/255-m|0)}};S.subtractOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m;if(l){let h=l+(m=a.data[b+3])-(l*m/255|0)|0,n=l*m;a.data[b]=(m*a.data[b]+l*c.data[b]-n)/h|0;a.data[b+1]=(m*a.data[b+1]+l*c.data[b+1]-n)/h|0;a.data[b+2]=(m*a.data[b+2]+l*c.data[b+2]-n)/h|0;
a.data[b+3]=h}}};S.subtractOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h;if(m){let n=m+(h=a.data[b+3])-(m*h/255|0)|0,r=m*h;a.data[b]=(h*a.data[b]+m*c.data[b]-r)/n|0;a.data[b+1]=(h*a.data[b+1]+m*c.data[b+1]-r)/n|0;a.data[b+2]=(h*a.data[b+2]+m*c.data[b+2]-r)/n|0;a.data[b+3]=n}}};S.subtractOntoOpaqueFusionWithOpaqueLayerMasked=
function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0;n&&(a.data[e]=a.data[e]+n*c.data[e]/255-n|0,a.data[e+1]=a.data[e+1]+n*c.data[e+1]/255-n|0,a.data[e+2]=a.data[e+2]+n*c.data[e+2]/255-n|0)}};S.subtractOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),
e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0;r&&(a.data[l]=a.data[l]+r*c.data[l]/255-r|0,a.data[l+1]=a.data[l+1]+r*c.data[l+1]/255-r|0,a.data[l+2]=a.data[l+2]+r*c.data[l+2]/255-r|0)}};S.subtractOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),
l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r;if(n){let u=n+(r=a.data[e+3])-(n*r/255|0)|0,v=n*r;a.data[e]=(r*a.data[e]+n*c.data[e]-v)/u|0;a.data[e+1]=(r*a.data[e+1]+n*c.data[e+1]-v)/u|0;a.data[e+2]=(r*a.data[e+2]+n*c.data[e+2]-v)/u|0;a.data[e+3]=u}}};S.subtractOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,
b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u;if(r){let v=r+(u=a.data[l+3])-(r*u/255|0)|0,x=r*u;a.data[l]=(u*a.data[l]+r*c.data[l]-x)/v|0;a.data[l+1]=(u*a.data[l+1]+r*c.data[l+1]-x)/v|0;a.data[l+2]=(u*a.data[l+2]+r*c.data[l+2]-x)/v|0;a.data[l+3]=v}}};S.screenOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m;if(l){let h=255^l;m=a.data[b];a.data[b]=255^((255^m)*h+(255^c.data[b])*(255^m)*l/255)/255;m=a.data[b+1];a.data[b+1]=255^((255^m)*h+(255^c.data[b+1])*(255^m)*l/255)/255;m=a.data[b+2];a.data[b+2]=255^((255^m)*h+(255^c.data[b+2])*(255^m)*l/255)/255}}};S.screenOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,
b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h;if(m){let n=255^m;h=a.data[b];a.data[b]=255^((255^h)*n+(255^c.data[b])*(255^h)*m/255)/255;h=a.data[b+1];a.data[b+1]=255^((255^h)*n+(255^c.data[b+1])*(255^h)*m/255)/255;h=a.data[b+2];a.data[b+2]=255^((255^h)*n+(255^c.data[b+2])*(255^h)*m/255)/255}}};S.screenOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let l=0;l<
g;l++,b+=4){var k=c.data[b+3];let m,h;if(k){let n=k+(m=a.data[b+3])-(k*m/255|0)|0,r=k*m/255|0,u=k*(255^m)/255|0,v=(255^k)*m/255|0;k=c.data[b];h=a.data[b];a.data[b]=255^((255^k)*u+(255^h)*v+(255^k)*(255^h)*r/255)/n;k=c.data[b+1];h=a.data[b+1];a.data[b+1]=255^((255^k)*u+(255^h)*v+(255^k)*(255^h)*r/255)/n;k=c.data[b+2];h=a.data[b+2];a.data[b+2]=255^((255^k)*u+(255^h)*v+(255^k)*(255^h)*r/255)/n;a.data[b+3]=n}}};S.screenOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),
p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=e+(h=a.data[b+3])-(e*h/255|0)|0,u=e*h/255|0,v=e*(255^h)/255|0,x=(255^e)*h/255|0;e=c.data[b];n=a.data[b];a.data[b]=255^((255^e)*v+(255^n)*x+(255^e)*(255^n)*u/255)/r;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=255^((255^e)*v+(255^n)*x+(255^e)*(255^n)*u/255)/r;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=255^((255^e)*v+(255^n)*x+(255^e)*(255^n)*
u/255)/r;a.data[b+3]=r}}};S.screenOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r;if(n){let u=255^n;r=a.data[e];a.data[e]=255^((255^r)*u+(255^c.data[e])*(255^r)*n/255)/255;r=a.data[e+1];a.data[e+1]=255^((255^r)*u+(255^c.data[e+1])*(255^r)*n/255)/255;r=a.data[e+
2];a.data[e+2]=255^((255^r)*u+(255^c.data[e+2])*(255^r)*n/255)/255}}};S.screenOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u;if(r){let v=255^r;u=a.data[l];a.data[l]=255^((255^u)*v+(255^c.data[l])*(255^u)*r/255)/255;u=a.data[l+1];a.data[l+1]=255^((255^
u)*v+(255^c.data[l+1])*(255^u)*r/255)/255;u=a.data[l+2];a.data[l+2]=255^((255^u)*v+(255^c.data[l+2])*(255^u)*r/255)/255}}};S.screenOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=m*r/255|0,C=m*(255^r)/
255|0,J=(255^m)*r/255|0;m=c.data[e];u=a.data[e];a.data[e]=255^((255^m)*C+(255^u)*J+(255^m)*(255^u)*x/255)/v;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=255^((255^m)*C+(255^u)*J+(255^m)*(255^u)*x/255)/v;m=c.data[e+2];u=a.data[e+2];a.data[e+2]=255^((255^m)*C+(255^u)*J+(255^m)*(255^u)*x/255)/v;a.data[e+3]=v}}};S.screenOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,
b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u,v;if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=h*u/255|0,J=h*(255^u)/255|0,H=(255^h)*u/255|0;h=c.data[l];v=a.data[l];a.data[l]=255^((255^h)*J+(255^v)*H+(255^h)*(255^v)*C/255)/x;h=c.data[l+1];v=a.data[l+1];a.data[l+1]=255^((255^h)*J+(255^v)*H+(255^h)*(255^v)*C/255)/x;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=255^((255^h)*J+(255^v)*H+(255^h)*(255^v)*C/255)/x;a.data[l+3]=x}}};S.lightenOntoOpaqueFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m,h;if(l){let n=255^l;m=c.data[b];h=a.data[b];a.data[b]=h>=m?h:(h*n+m*l)/255|0;m=c.data[b+1];h=a.data[b+1];a.data[b+1]=h>=m?h:(h*n+m*l)/255|0;m=c.data[b+2];h=a.data[b+2];a.data[b+2]=h>=m?h:(h*n+m*l)/255|0}}};S.lightenOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-
p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h,n;if(m){let r=255^m;h=c.data[b];n=a.data[b];a.data[b]=n>=h?n:(n*r+h*m)/255|0;h=c.data[b+1];n=a.data[b+1];a.data[b+1]=n>=h?n:(n*r+h*m)/255|0;h=c.data[b+2];n=a.data[b+2];a.data[b+2]=n>=h?n:(n*r+h*m)/255|0}}};S.lightenOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=
p)for(let l=0;l<g;l++,b+=4){var k=c.data[b+3];let m,h;if(k){let n=k+(m=a.data[b+3])-(k*m/255|0)|0,r=m*(255^k)/n|0,u=255^r,v=k*(255^m)/n|0,x=255^v;k=c.data[b];h=a.data[b];a.data[b]=(h>=k?k*v+h*x:h*r+k*u)/255|0;k=c.data[b+1];h=a.data[b+1];a.data[b+1]=(h>=k?k*v+h*x:h*r+k*u)/255|0;k=c.data[b+2];h=a.data[b+2];a.data[b+2]=(h>=k?k*v+h*x:h*r+k*u)/255|0;a.data[b+3]=n}}};S.lightenOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=e+(h=a.data[b+3])-(e*h/255|0)|0,u=h*(255^e)/r|0,v=255^u,x=e*(255^h)/r|0,C=255^x;e=c.data[b];n=a.data[b];a.data[b]=(n>=e?e*x+n*C:n*u+e*v)/255|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(n>=e?e*x+n*C:n*u+e*v)/255|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(n>=e?e*x+n*C:n*u+e*v)/255|0;a.data[b+3]=r}}};S.lightenOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),
k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=u>=r?u:(u*v+r*n)/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=u>=r?u:(u*v+r*n)/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=u>=r?u:(u*v+r*n)/255|0}}};S.lightenOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),
e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[l];v=a.data[l];a.data[l]=v>=u?v:(v*x+u*r)/255|0;u=c.data[l+1];v=a.data[l+1];a.data[l+1]=v>=u?v:(v*x+u*r)/255|0;u=c.data[l+2];v=a.data[l+2];a.data[l+2]=v>=u?v:(v*x+u*r)/255|0}}};S.lightenOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=
0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=r*(255^m)/v|0,C=255^x,J=m*(255^r)/v|0,H=255^J;m=c.data[e];u=a.data[e];a.data[e]=(u>=m?m*J+u*H:u*x+m*C)/255|0;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=(u>=m?m*J+u*H:u*x+m*C)/255|0;m=c.data[e+2];u=a.data[e+2];a.data[e+2]=(u>=m?m*J+u*H:u*x+m*
C)/255|0;a.data[e+3]=v}}};S.lightenOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u,v;if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=u*(255^h)/x|0,J=255^C,H=h*(255^u)/x|0,G=255^H;h=c.data[l];v=a.data[l];a.data[l]=(v>=h?h*H+v*G:v*C+h*J)/255|
0;h=c.data[l+1];v=a.data[l+1];a.data[l+1]=(v>=h?h*H+v*G:v*C+h*J)/255|0;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=(v>=h?h*H+v*G:v*C+h*J)/255|0;a.data[l+3]=x}}};S.darkenOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m,h;if(l){let n=255^l;m=c.data[b];h=a.data[b];a.data[b]=h>=m?(h*n+m*l)/255|0:h;m=c.data[b+1];h=a.data[b+1];a.data[b+1]=h>=m?(h*
n+m*l)/255|0:h;m=c.data[b+2];h=a.data[b+2];a.data[b+2]=h>=m?(h*n+m*l)/255|0:h}}};S.darkenOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h,n;if(m){let r=255^m;h=c.data[b];n=a.data[b];a.data[b]=n>=h?(n*r+h*m)/255|0:n;h=c.data[b+1];n=a.data[b+1];a.data[b+1]=n>=h?(n*r+h*m)/255|0:n;h=c.data[b+2];n=a.data[b+2];a.data[b+2]=n>=h?(n*
r+h*m)/255|0:n}}};S.darkenOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let l=0;l<g;l++,b+=4){var k=c.data[b+3];let m,h;if(k){let n=k+(m=a.data[b+3])-(k*m/255|0)|0,r=k*(255^m)/n|0,u=255^r,v=m*(255^k)/n|0,x=255^v;k=c.data[b];h=a.data[b];a.data[b]=(h>=k?h*v+k*x:k*r+h*u)/255|0;k=c.data[b+1];h=a.data[b+1];a.data[b+1]=(h>=k?h*v+k*x:k*r+h*u)/255|0;k=c.data[b+2];h=a.data[b+2];
a.data[b+2]=(h>=k?h*v+k*x:k*r+h*u)/255|0;a.data[b+3]=n}}};S.darkenOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=e+(h=a.data[b+3])-(e*h/255|0)|0,u=e*(255^h)/r|0,v=255^u,x=h*(255^e)/r|0,C=255^x;e=c.data[b];n=a.data[b];a.data[b]=(n>=e?n*x+e*C:e*u+n*v)/255|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(n>=
e?n*x+e*C:e*u+n*v)/255|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(n>=e?n*x+e*C:e*u+n*v)/255|0;a.data[b+3]=r}}};S.darkenOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=u>=r?(u*v+r*n)/255|0:u;r=c.data[e+1];
u=a.data[e+1];a.data[e+1]=u>=r?(u*v+r*n)/255|0:u;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=u>=r?(u*v+r*n)/255|0:u}}};S.darkenOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[l];v=a.data[l];a.data[l]=v>=u?(v*x+u*r)/255|0:v;
u=c.data[l+1];v=a.data[l+1];a.data[l+1]=v>=u?(v*x+u*r)/255|0:v;u=c.data[l+2];v=a.data[l+2];a.data[l+2]=v>=u?(v*x+u*r)/255|0:v}}};S.darkenOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=m*(255^r)/v|0,
C=255^x,J=r*(255^m)/v|0,H=255^J;m=c.data[e];u=a.data[e];a.data[e]=(u>=m?u*J+m*H:m*x+u*C)/255|0;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=(u>=m?u*J+m*H:m*x+u*C)/255|0;m=c.data[e+2];u=a.data[e+2];a.data[e+2]=(u>=m?u*J+m*H:m*x+u*C)/255|0;a.data[e+3]=v}}};S.darkenOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=
0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u,v;if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=h*(255^u)/x|0,J=255^C,H=u*(255^h)/x|0,G=255^H;h=c.data[l];v=a.data[l];a.data[l]=(v>=h?v*H+h*G:h*C+v*J)/255|0;h=c.data[l+1];v=a.data[l+1];a.data[l+1]=(v>=h?v*H+h*G:h*C+v*J)/255|0;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=(v>=h?v*H+h*G:h*C+v*J)/255|0;a.data[l+3]=x}}};S.dodgeOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m,h;if(l){let n=255^l;m=c.data[b];h=a.data[b];a.data[b]=(h*n+l*(255==m?255:Math.min(255,255*h/(255^m)|0)))/255|0;m=c.data[b+1];h=a.data[b+1];a.data[b+1]=(h*n+l*(255==m?255:Math.min(255,255*h/(255^m)|0)))/255|0;m=c.data[b+2];h=a.data[b+2];a.data[b+2]=(h*n+l*(255==m?255:Math.min(255,255*h/(255^m)|0)))/255|0}}};S.dodgeOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|
0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h,n;if(m){let r=255^m;h=c.data[b];n=a.data[b];a.data[b]=(n*r+m*(255==h?255:Math.min(255,255*n/(255^h)|0)))/255|0;h=c.data[b+1];n=a.data[b+1];a.data[b+1]=(n*r+m*(255==h?255:Math.min(255,255*n/(255^h)|0)))/255|0;h=c.data[b+2];n=a.data[b+2];a.data[b+2]=(n*r+m*(255==h?255:Math.min(255,255*n/(255^h)|0)))/255|0}}};S.dodgeOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();
let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let l=0;l<g;l++,b+=4){var k=c.data[b+3];let m,h;if(k){let n=k+(m=a.data[b+3])-(k*m/255|0)|0,r=k*m/255|0,u=k*(255^m)/255|0,v=(255^k)*m/255|0;k=c.data[b];h=a.data[b];a.data[b]=(k*u+h*v+r*(255==k?255:Math.min(255,255*h/(255^k)|0)))/n|0;k=c.data[b+1];h=a.data[b+1];a.data[b+1]=(k*u+h*v+r*(255==k?255:Math.min(255,255*h/(255^k)|0)))/n|0;k=c.data[b+2];h=a.data[b+2];a.data[b+2]=(k*u+h*v+r*(255==k?255:Math.min(255,
255*h/(255^k)|0)))/n|0;a.data[b+3]=n}}};S.dodgeOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=e+(h=a.data[b+3])-(e*h/255|0)|0,u=e*h/255|0,v=e*(255^h)/255|0,x=(255^e)*h/255|0;e=c.data[b];n=a.data[b];a.data[b]=(e*v+n*x+u*(255==e?255:Math.min(255,255*n/(255^e)|0)))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+
1]=(e*v+n*x+u*(255==e?255:Math.min(255,255*n/(255^e)|0)))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(e*v+n*x+u*(255==e?255:Math.min(255,255*n/(255^e)|0)))/r|0;a.data[b+3]=r}}};S.dodgeOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];
u=a.data[e];a.data[e]=(u*v+n*(255==r?255:Math.min(255,255*u/(255^r)|0)))/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=(u*v+n*(255==r?255:Math.min(255,255*u/(255^r)|0)))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(u*v+n*(255==r?255:Math.min(255,255*u/(255^r)|0)))/255|0}}};S.dodgeOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,
l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[l];v=a.data[l];a.data[l]=(v*x+r*(255==u?255:Math.min(255,255*v/(255^u)|0)))/255|0;u=c.data[l+1];v=a.data[l+1];a.data[l+1]=(v*x+r*(255==u?255:Math.min(255,255*v/(255^u)|0)))/255|0;u=c.data[l+2];v=a.data[l+2];a.data[l+2]=(v*x+r*(255==u?255:Math.min(255,255*v/(255^u)|0)))/255|0}}};S.dodgeOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*
(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=m*r/255|0,C=m*(255^r)/255|0,J=(255^m)*r/255|0;m=c.data[e];u=a.data[e];a.data[e]=(m*C+u*J+x*(255==m?255:Math.min(255,255*u/(255^m)|0)))/v|0;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=(m*C+u*J+x*(255==m?255:Math.min(255,255*u/(255^m)|0)))/v|0;m=c.data[e+2];u=a.data[e+
2];a.data[e+2]=(m*C+u*J+x*(255==m?255:Math.min(255,255*u/(255^m)|0)))/v|0;a.data[e+3]=v}}};S.dodgeOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u,v;if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=h*u/255|0,J=h*(255^u)/255|0,H=(255^h)*u/255|
0;h=c.data[l];v=a.data[l];a.data[l]=(h*J+v*H+C*(255==h?255:Math.min(255,255*v/(255^h)|0)))/x|0;h=c.data[l+1];v=a.data[l+1];a.data[l+1]=(h*J+v*H+C*(255==h?255:Math.min(255,255*v/(255^h)|0)))/x|0;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=(h*J+v*H+C*(255==h?255:Math.min(255,255*v/(255^h)|0)))/x|0;a.data[l+3]=x}}};S.burnOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,
b+=4){let l=c.data[b+3],m,h;if(l){let n=255^l;m=c.data[b];h=a.data[b];a.data[b]=(h*n+l*(0==m?0:255^Math.min(255,255*(255^h)/m)))/255|0;m=c.data[b+1];h=a.data[b+1];a.data[b+1]=(h*n+l*(0==m?0:255^Math.min(255,255*(255^h)/m)))/255|0;m=c.data[b+2];h=a.data[b+2];a.data[b+2]=(h*n+l*(0==m?0:255^Math.min(255,255*(255^h)/m)))/255|0}}};S.burnOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=
k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h,n;if(m){let r=255^m;h=c.data[b];n=a.data[b];a.data[b]=(n*r+m*(0==h?0:255^Math.min(255,255*(255^n)/h)))/255|0;h=c.data[b+1];n=a.data[b+1];a.data[b+1]=(n*r+m*(0==h?0:255^Math.min(255,255*(255^n)/h)))/255|0;h=c.data[b+2];n=a.data[b+2];a.data[b+2]=(n*r+m*(0==h?0:255^Math.min(255,255*(255^n)/h)))/255|0}}};S.burnOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(let e=0;e<d;e++,b+=p)for(let l=0;l<g;l++,b+=4){var k=c.data[b+3];let m,h;if(k){let n=k+(m=a.data[b+3])-(k*m/255|0)|0,r=k*m/255|0,u=k*(255^m)/255|0,v=(255^k)*m/255|0;k=c.data[b];h=a.data[b];a.data[b]=(k*u+h*v+r*(0==k?0:255^Math.min(255,255*(255^h)/k)))/n|0;k=c.data[b+1];h=a.data[b+1];a.data[b+1]=(k*u+h*v+r*(0==k?0:255^Math.min(255,255*(255^h)/k)))/n|0;k=c.data[b+2];h=a.data[b+2];a.data[b+2]=(k*u+h*v+r*(0==k?0:255^Math.min(255,255*(255^h)/k)))/n|0;a.data[b+3]=n}}};S.burnOntoTransparentFusionWithTransparentLayer=
function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=e+(h=a.data[b+3])-(e*h/255|0)|0,u=e*h/255|0,v=e*(255^h)/255|0,x=(255^e)*h/255|0;e=c.data[b];n=a.data[b];a.data[b]=(e*v+n*x+u*(0==e?0:255^Math.min(255,255*(255^n)/e)))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(e*v+n*x+u*(0==e?0:255^Math.min(255,255*(255^n)/e)))/r|0;e=c.data[b+2];n=a.data[b+2];
a.data[b+2]=(e*v+n*x+u*(0==e?0:255^Math.min(255,255*(255^n)/e)))/r|0;a.data[b+3]=r}}};S.burnOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(u*v+n*(0==r?0:255^Math.min(255,255*(255^u)/r)))/255|0;r=c.data[e+
1];u=a.data[e+1];a.data[e+1]=(u*v+n*(0==r?0:255^Math.min(255,255*(255^u)/r)))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(u*v+n*(0==r?0:255^Math.min(255,255*(255^u)/r)))/255|0}}};S.burnOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u,v;if(r){let x=
255^r;u=c.data[l];v=a.data[l];a.data[l]=(v*x+r*(0==u?0:255^Math.min(255,255*(255^v)/u)))/255|0;u=c.data[l+1];v=a.data[l+1];a.data[l+1]=(v*x+r*(0==u?0:255^Math.min(255,255*(255^v)/u)))/255|0;u=c.data[l+2];v=a.data[l+2];a.data[l+2]=(v*x+r*(0==u?0:255^Math.min(255,255*(255^v)/u)))/255|0}}};S.burnOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=
0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=m*r/255|0,C=m*(255^r)/255|0,J=(255^m)*r/255|0;m=c.data[e];u=a.data[e];a.data[e]=(m*C+u*J+x*(0==m?0:255^Math.min(255,255*(255^u)/m)))/v|0;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=(m*C+u*J+x*(0==m?0:255^Math.min(255,255*(255^u)/m)))/v|0;m=c.data[e+2];u=a.data[e+2];a.data[e+2]=(m*C+u*J+x*(0==m?0:255^Math.min(255,255*(255^u)/m)))/v|0;a.data[e+3]=v}}};S.burnOntoTransparentFusionWithTransparentLayerMasked=
function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u,v;if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=h*u/255|0,J=h*(255^u)/255|0,H=(255^h)*u/255|0;h=c.data[l];v=a.data[l];a.data[l]=(h*J+v*H+C*(0==h?0:255^Math.min(255,255*(255^v)/h)))/x|0;h=c.data[l+1];v=a.data[l+1];a.data[l+1]=(h*J+v*H+C*(0==
h?0:255^Math.min(255,255*(255^v)/h)))/x|0;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=(h*J+v*H+C*(0==h?0:255^Math.min(255,255*(255^v)/h)))/x|0;a.data[l+3]=x}}};S.overlayOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m,h;if(l){let n=255^l;m=c.data[b];h=a.data[b];a.data[b]=(n*h+(127>=h?2*l*m*h/255:l*(2*(255^m)*(255^h)/255^255)))/255|0;m=c.data[b+
1];h=a.data[b+1];a.data[b+1]=(n*h+(127>=h?2*l*m*h/255:l*(2*(255^m)*(255^h)/255^255)))/255|0;m=c.data[b+2];h=a.data[b+2];a.data[b+2]=(n*h+(127>=h?2*l*m*h/255:l*(2*(255^m)*(255^h)/255^255)))/255|0}}};S.overlayOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h,n;if(m){let r=255^m;h=c.data[b];n=a.data[b];a.data[b]=(r*n+(127>=n?2*
m*h*n/255:m*(2*(255^h)*(255^n)/255^255)))/255|0;h=c.data[b+1];n=a.data[b+1];a.data[b+1]=(r*n+(127>=n?2*m*h*n/255:m*(2*(255^h)*(255^n)/255^255)))/255|0;h=c.data[b+2];n=a.data[b+2];a.data[b+2]=(r*n+(127>=n?2*m*h*n/255:m*(2*(255^h)*(255^n)/255^255)))/255|0}}};S.overlayOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let l=0;l<g;l++,b+=4){var k=c.data[b+3];let m,h;if(k){let n=
k+(m=a.data[b+3])-(k*m/255|0)|0,r=k*m/255|0,u=k*(255^m)/255|0,v=(255^k)*m/255|0;k=c.data[b];h=a.data[b];a.data[b]=(u*k+v*h+(127>=h?2*r*k*h/255:r*(2*(255^k)*(255^h)/255^255)))/n|0;k=c.data[b+1];h=a.data[b+1];a.data[b+1]=(u*k+v*h+(127>=h?2*r*k*h/255:r*(2*(255^k)*(255^h)/255^255)))/n|0;k=c.data[b+2];h=a.data[b+2];a.data[b+2]=(u*k+v*h+(127>=h?2*r*k*h/255:r*(2*(255^k)*(255^h)/255^255)))/n|0;a.data[b+3]=n}}};S.overlayOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|
b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=e+(h=a.data[b+3])-(e*h/255|0)|0,u=e*h/255|0,v=e*(255^h)/255|0,x=(255^e)*h/255|0;e=c.data[b];n=a.data[b];a.data[b]=(v*e+x*n+(127>=n?2*u*e*n/255:u*(2*(255^e)*(255^n)/255^255)))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(v*e+x*n+(127>=n?2*u*e*n/255:u*(2*(255^e)*(255^n)/255^255)))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(v*e+x*n+(127>=
n?2*u*e*n/255:u*(2*(255^e)*(255^n)/255^255)))/r|0;a.data[b+3]=r}}};S.overlayOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(v*u+(127>=u?2*n*r*u/255:n*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[e+1];u=
a.data[e+1];a.data[e+1]=(v*u+(127>=u?2*n*r*u/255:n*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(v*u+(127>=u?2*n*r*u/255:n*(2*(255^r)*(255^u)/255^255)))/255|0}}};S.overlayOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,
u,v;if(r){let x=255^r;u=c.data[l];v=a.data[l];a.data[l]=(x*v+(127>=v?2*r*u*v/255:r*(2*(255^u)*(255^v)/255^255)))/255|0;u=c.data[l+1];v=a.data[l+1];a.data[l+1]=(x*v+(127>=v?2*r*u*v/255:r*(2*(255^u)*(255^v)/255^255)))/255|0;u=c.data[l+2];v=a.data[l+2];a.data[l+2]=(x*v+(127>=v?2*r*u*v/255:r*(2*(255^u)*(255^v)/255^255)))/255|0}}};S.overlayOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-
p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=m*r/255|0,C=m*(255^r)/255|0,J=(255^m)*r/255|0;m=c.data[e];u=a.data[e];a.data[e]=(C*m+J*u+(127>=u?2*x*m*u/255:x*(2*(255^m)*(255^u)/255^255)))/v|0;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=(C*m+J*u+(127>=u?2*x*m*u/255:x*(2*(255^m)*(255^u)/255^255)))/v|0;m=c.data[e+2];u=a.data[e+2];a.data[e+2]=(C*m+J*u+(127>=u?2*x*m*u/
255:x*(2*(255^m)*(255^u)/255^255)))/v|0;a.data[e+3]=v}}};S.overlayOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u,v;if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=h*u/255|0,J=h*(255^u)/255|0,H=(255^h)*u/255|0;h=c.data[l];v=a.data[l];a.data[l]=
(J*h+H*v+(127>=v?2*C*h*v/255:C*(2*(255^h)*(255^v)/255^255)))/x|0;h=c.data[l+1];v=a.data[l+1];a.data[l+1]=(J*h+H*v+(127>=v?2*C*h*v/255:C*(2*(255^h)*(255^v)/255^255)))/x|0;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=(J*h+H*v+(127>=v?2*C*h*v/255:C*(2*(255^h)*(255^v)/255^255)))/x|0;a.data[l+3]=x}}};S.hardLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=
c.data[b+3],m,h;if(l){let n=255^l;m=c.data[b];h=a.data[b];a.data[b]=(n*h+(127>=m?2*l*m*h/255:l*(2*(255^m)*(255^h)/255^255)))/255|0;m=c.data[b+1];h=a.data[b+1];a.data[b+1]=(n*h+(127>=m?2*l*m*h/255:l*(2*(255^m)*(255^h)/255^255)))/255|0;m=c.data[b+2];h=a.data[b+2];a.data[b+2]=(n*h+(127>=m?2*l*m*h/255:l*(2*(255^m)*(255^h)/255^255)))/255|0}}};S.hardLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=
0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h,n;if(m){let r=255^m;h=c.data[b];n=a.data[b];a.data[b]=(r*n+(127>=h?2*m*h*n/255:m*(2*(255^h)*(255^n)/255^255)))/255|0;h=c.data[b+1];n=a.data[b+1];a.data[b+1]=(r*n+(127>=h?2*m*h*n/255:m*(2*(255^h)*(255^n)/255^255)))/255|0;h=c.data[b+2];n=a.data[b+2];a.data[b+2]=(r*n+(127>=h?2*m*h*n/255:m*(2*(255^h)*(255^n)/255^255)))/255|0}}};S.hardLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=
4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let l=0;l<g;l++,b+=4){var k=c.data[b+3];let m,h;if(k){let n=k+(m=a.data[b+3])-(k*m/255|0)|0,r=k*m/255|0,u=k*(255^m)/255|0,v=(255^k)*m/255|0;k=c.data[b];h=a.data[b];a.data[b]=(u*k+v*h+(127>=k?2*r*k*h/255:r*(2*(255^k)*(255^h)/255^255)))/n|0;k=c.data[b+1];h=a.data[b+1];a.data[b+1]=(u*k+v*h+(127>=k?2*r*k*h/255:r*(2*(255^k)*(255^h)/255^255)))/n|0;k=c.data[b+2];h=a.data[b+2];a.data[b+2]=(u*k+v*h+(127>=k?2*r*k*h/255:r*(2*(255^
k)*(255^h)/255^255)))/n|0;a.data[b+3]=n}}};S.hardLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=e+(h=a.data[b+3])-(e*h/255|0)|0,u=e*h/255|0,v=e*(255^h)/255|0,x=(255^e)*h/255|0;e=c.data[b];n=a.data[b];a.data[b]=(v*e+x*n+(127>=e?2*u*e*n/255:u*(2*(255^e)*(255^n)/255^255)))/r|0;e=c.data[b+1];n=a.data[b+
1];a.data[b+1]=(v*e+x*n+(127>=e?2*u*e*n/255:u*(2*(255^e)*(255^n)/255^255)))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(v*e+x*n+(127>=e?2*u*e*n/255:u*(2*(255^e)*(255^n)/255^255)))/r|0;a.data[b+3]=r}}};S.hardLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|
0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(v*u+(127>=r?2*n*r*u/255:n*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=(v*u+(127>=r?2*n*r*u/255:n*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(v*u+(127>=r?2*n*r*u/255:n*(2*(255^r)*(255^u)/255^255)))/255|0}}};S.hardLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-
k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[l];v=a.data[l];a.data[l]=(x*v+(127>=u?2*r*u*v/255:r*(2*(255^u)*(255^v)/255^255)))/255|0;u=c.data[l+1];v=a.data[l+1];a.data[l+1]=(x*v+(127>=u?2*r*u*v/255:r*(2*(255^u)*(255^v)/255^255)))/255|0;u=c.data[l+2];v=a.data[l+2];a.data[l+2]=(x*v+(127>=u?2*r*u*v/255:r*(2*(255^u)*(255^v)/255^255)))/255|0}}};S.hardLightOntoTransparentFusionWithOpaqueLayerMasked=
function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=m*r/255|0,C=m*(255^r)/255|0,J=(255^m)*r/255|0;m=c.data[e];u=a.data[e];a.data[e]=(C*m+J*u+(127>=m?2*x*m*u/255:x*(2*(255^m)*(255^u)/255^255)))/v|0;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=(C*m+J*u+
(127>=m?2*x*m*u/255:x*(2*(255^m)*(255^u)/255^255)))/v|0;m=c.data[e+2];u=a.data[e+2];a.data[e+2]=(C*m+J*u+(127>=m?2*x*m*u/255:x*(2*(255^m)*(255^u)/255^255)))/v|0;a.data[e+3]=v}}};S.hardLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u,v;
if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=h*u/255|0,J=h*(255^u)/255|0,H=(255^h)*u/255|0;h=c.data[l];v=a.data[l];a.data[l]=(J*h+H*v+(127>=h?2*C*h*v/255:C*(2*(255^h)*(255^v)/255^255)))/x|0;h=c.data[l+1];v=a.data[l+1];a.data[l+1]=(J*h+H*v+(127>=h?2*C*h*v/255:C*(2*(255^h)*(255^v)/255^255)))/x|0;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=(J*h+H*v+(127>=h?2*C*h*v/255:C*(2*(255^h)*(255^v)/255^255)))/x|0;a.data[l+3]=x}}};S.softLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=
0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m,h;if(l){let n=255^l;m=c.data[b];h=a.data[b];a.data[b]=(n*h+l*(127>=m?((2*m-255)*Yb[h]/255|0)+h:((2*m-255)*Zb[h]/255|0)+h))/255|0;m=c.data[b+1];h=a.data[b+1];a.data[b+1]=(n*h+l*(127>=m?((2*m-255)*Yb[h]/255|0)+h:((2*m-255)*Zb[h]/255|0)+h))/255|0;m=c.data[b+2];h=a.data[b+2];a.data[b+2]=(n*h+l*(127>=m?((2*m-255)*Yb[h]/255|0)+h:((2*m-255)*Zb[h]/255|0)+h))/255|0}}};S.softLightOntoOpaqueFusionWithTransparentLayer=
function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h,n;if(m){let r=255^m;h=c.data[b];n=a.data[b];a.data[b]=(r*n+m*(127>=h?((2*h-255)*Yb[n]/255|0)+n:((2*h-255)*Zb[n]/255|0)+n))/255|0;h=c.data[b+1];n=a.data[b+1];a.data[b+1]=(r*n+m*(127>=h?((2*h-255)*Yb[n]/255|0)+n:((2*h-255)*Zb[n]/255|0)+n))/255|0;h=c.data[b+2];n=a.data[b+2];a.data[b+2]=(r*n+m*(127>=h?((2*h-255)*Yb[n]/
255|0)+n:((2*h-255)*Zb[n]/255|0)+n))/255|0}}};S.softLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let l=0;l<g;l++,b+=4){var k=c.data[b+3];let m,h;if(k){let n=k+(m=a.data[b+3])-(k*m/255|0)|0,r=k*m/255|0,u=k*(255^m)/255|0,v=(255^k)*m/255|0;k=c.data[b];h=a.data[b];a.data[b]=(u*k+v*h+(127>=k?r*(((2*k-255)*Yb[h]/255|0)+h):r*(((2*k-255)*Zb[h]/255|0)+h)))/n|0;k=c.data[b+1];
h=a.data[b+1];a.data[b+1]=(u*k+v*h+(127>=k?r*(((2*k-255)*Yb[h]/255|0)+h):r*(((2*k-255)*Zb[h]/255|0)+h)))/n|0;k=c.data[b+2];h=a.data[b+2];a.data[b+2]=(u*k+v*h+(127>=k?r*(((2*k-255)*Yb[h]/255|0)+h):r*(((2*k-255)*Zb[h]/255|0)+h)))/n|0;a.data[b+3]=n}}};S.softLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=
e+(h=a.data[b+3])-(e*h/255|0)|0,u=e*h/255|0,v=e*(255^h)/255|0,x=(255^e)*h/255|0;e=c.data[b];n=a.data[b];a.data[b]=(v*e+x*n+(127>=e?u*(((2*e-255)*Yb[n]/255|0)+n):u*(((2*e-255)*Zb[n]/255|0)+n)))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(v*e+x*n+(127>=e?u*(((2*e-255)*Yb[n]/255|0)+n):u*(((2*e-255)*Zb[n]/255|0)+n)))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(v*e+x*n+(127>=e?u*(((2*e-255)*Yb[n]/255|0)+n):u*(((2*e-255)*Zb[n]/255|0)+n)))/r|0;a.data[b+3]=r}}};S.softLightOntoOpaqueFusionWithOpaqueLayerMasked=
function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(v*u+n*(127>=r?((2*r-255)*Yb[u]/255|0)+u:((2*r-255)*Zb[u]/255|0)+u))/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=(v*u+n*(127>=r?((2*r-255)*Yb[u]/255|0)+u:((2*r-255)*Zb[u]/255|0)+u))/255|0;r=
c.data[e+2];u=a.data[e+2];a.data[e+2]=(v*u+n*(127>=r?((2*r-255)*Yb[u]/255|0)+u:((2*r-255)*Zb[u]/255|0)+u))/255|0}}};S.softLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[l];v=a.data[l];a.data[l]=(x*v+r*(127>=u?((2*
u-255)*Yb[v]/255|0)+v:((2*u-255)*Zb[v]/255|0)+v))/255|0;u=c.data[l+1];v=a.data[l+1];a.data[l+1]=(x*v+r*(127>=u?((2*u-255)*Yb[v]/255|0)+v:((2*u-255)*Zb[v]/255|0)+v))/255|0;u=c.data[l+2];v=a.data[l+2];a.data[l+2]=(x*v+r*(127>=u?((2*u-255)*Yb[v]/255|0)+v:((2*u-255)*Zb[v]/255|0)+v))/255|0}}};S.softLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);
for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=m*r/255|0,C=m*(255^r)/255|0,J=(255^m)*r/255|0;m=c.data[e];u=a.data[e];a.data[e]=(C*m+J*u+(127>=m?x*(((2*m-255)*Yb[u]/255|0)+u):x*(((2*m-255)*Zb[u]/255|0)+u)))/v|0;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=(C*m+J*u+(127>=m?x*(((2*m-255)*Yb[u]/255|0)+u):x*(((2*m-255)*Zb[u]/255|0)+u)))/v|0;m=c.data[e+2];u=a.data[e+2];a.data[e+2]=(C*m+J*u+(127>=m?x*(((2*m-255)*
Yb[u]/255|0)+u):x*(((2*m-255)*Zb[u]/255|0)+u)))/v|0;a.data[e+3]=v}}};S.softLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u,v;if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=h*u/255|0,J=h*(255^u)/255|0,H=(255^h)*u/255|0;h=c.data[l];v=a.data[l];
a.data[l]=(J*h+H*v+(127>=h?C*(((2*h-255)*Yb[v]/255|0)+v):C*(((2*h-255)*Zb[v]/255|0)+v)))/x|0;h=c.data[l+1];v=a.data[l+1];a.data[l+1]=(J*h+H*v+(127>=h?C*(((2*h-255)*Yb[v]/255|0)+v):C*(((2*h-255)*Zb[v]/255|0)+v)))/x|0;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=(J*h+H*v+(127>=h?C*(((2*h-255)*Yb[v]/255|0)+v):C*(((2*h-255)*Zb[v]/255|0)+v)))/x|0;a.data[l+3]=x}}};S.vividLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m,h;if(l){let n=255^l;m=c.data[b];h=a.data[b];a.data[b]=(n*h+(127>=m?l*(0==m?0:255-Math.min(255,255*(255-h)/(2*m)|0)):l*(255==m?255:Math.min(255,255*h/(2*(255-m))|0))))/255|0;m=c.data[b+1];h=a.data[b+1];a.data[b+1]=(n*h+(127>=m?l*(0==m?0:255-Math.min(255,255*(255-h)/(2*m)|0)):l*(255==m?255:Math.min(255,255*h/(2*(255-m))|0))))/255|0;m=c.data[b+2];h=a.data[b+2];a.data[b+2]=(n*h+(127>=m?l*(0==m?0:255-Math.min(255,255*(255-h)/
(2*m)|0)):l*(255==m?255:Math.min(255,255*h/(2*(255-m))|0))))/255|0}}};S.vividLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h,n;if(m){let r=255^m;h=c.data[b];n=a.data[b];a.data[b]=(r*n+(127>=h?m*(0==h?0:255-Math.min(255,255*(255-n)/(2*h)|0)):m*(255==h?255:Math.min(255,255*n/(2*(255-h))|0))))/255|0;h=c.data[b+1];n=a.data[b+
1];a.data[b+1]=(r*n+(127>=h?m*(0==h?0:255-Math.min(255,255*(255-n)/(2*h)|0)):m*(255==h?255:Math.min(255,255*n/(2*(255-h))|0))))/255|0;h=c.data[b+2];n=a.data[b+2];a.data[b+2]=(r*n+(127>=h?m*(0==h?0:255-Math.min(255,255*(255-n)/(2*h)|0)):m*(255==h?255:Math.min(255,255*n/(2*(255-h))|0))))/255|0}}};S.vividLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let l=0;l<g;l++,b+=
4){var k=c.data[b+3];let m,h;if(k){let n=k+(m=a.data[b+3])-(k*m/255|0)|0,r=k*m/255|0,u=k*(255^m)/255|0,v=(255^k)*m/255|0;k=c.data[b];h=a.data[b];a.data[b]=(u*k+v*h+(127>=k?r*(0==k?0:255-Math.min(255,255*(255-h)/(2*k)|0)):r*(255==k?255:Math.min(255,255*h/(2*(255-k))|0))))/n|0;k=c.data[b+1];h=a.data[b+1];a.data[b+1]=(u*k+v*h+(127>=k?r*(0==k?0:255-Math.min(255,255*(255-h)/(2*k)|0)):r*(255==k?255:Math.min(255,255*h/(2*(255-k))|0))))/n|0;k=c.data[b+2];h=a.data[b+2];a.data[b+2]=(u*k+v*h+(127>=k?r*(0==k?
0:255-Math.min(255,255*(255-h)/(2*k)|0)):r*(255==k?255:Math.min(255,255*h/(2*(255-k))|0))))/n|0;a.data[b+3]=n}}};S.vividLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=e+(h=a.data[b+3])-(e*h/255|0)|0,u=e*h/255|0,v=e*(255^h)/255|0,x=(255^e)*h/255|0;e=c.data[b];n=a.data[b];a.data[b]=(v*e+x*n+(127>=
e?u*(0==e?0:255-Math.min(255,255*(255-n)/(2*e)|0)):u*(255==e?255:Math.min(255,255*n/(2*(255-e))|0))))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(v*e+x*n+(127>=e?u*(0==e?0:255-Math.min(255,255*(255-n)/(2*e)|0)):u*(255==e?255:Math.min(255,255*n/(2*(255-e))|0))))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(v*e+x*n+(127>=e?u*(0==e?0:255-Math.min(255,255*(255-n)/(2*e)|0)):u*(255==e?255:Math.min(255,255*n/(2*(255-e))|0))))/r|0;a.data[b+3]=r}}};S.vividLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,
c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(v*u+(127>=r?n*(0==r?0:255-Math.min(255,255*(255-u)/(2*r)|0)):n*(255==r?255:Math.min(255,255*u/(2*(255-r))|0))))/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=(v*u+(127>=r?n*(0==r?0:255-Math.min(255,255*
(255-u)/(2*r)|0)):n*(255==r?255:Math.min(255,255*u/(2*(255-r))|0))))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(v*u+(127>=r?n*(0==r?0:255-Math.min(255,255*(255-u)/(2*r)|0)):n*(255==r?255:Math.min(255,255*u/(2*(255-r))|0))))/255|0}}};S.vividLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,
l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[l];v=a.data[l];a.data[l]=(x*v+(127>=u?r*(0==u?0:255-Math.min(255,255*(255-v)/(2*u)|0)):r*(255==u?255:Math.min(255,255*v/(2*(255-u))|0))))/255|0;u=c.data[l+1];v=a.data[l+1];a.data[l+1]=(x*v+(127>=u?r*(0==u?0:255-Math.min(255,255*(255-v)/(2*u)|0)):r*(255==u?255:Math.min(255,255*v/(2*(255-u))|0))))/255|0;u=c.data[l+2];v=a.data[l+2];a.data[l+2]=(x*v+(127>=u?r*(0==u?0:255-Math.min(255,255*(255-v)/(2*u)|0)):r*(255==u?255:Math.min(255,
255*v/(2*(255-u))|0))))/255|0}}};S.vividLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=m*r/255|0,C=m*(255^r)/255|0,J=(255^m)*r/255|0;m=c.data[e];u=a.data[e];a.data[e]=(C*m+J*u+(127>=m?x*(0==m?0:
255-Math.min(255,255*(255-u)/(2*m)|0)):x*(255==m?255:Math.min(255,255*u/(2*(255-m))|0))))/v|0;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=(C*m+J*u+(127>=m?x*(0==m?0:255-Math.min(255,255*(255-u)/(2*m)|0)):x*(255==m?255:Math.min(255,255*u/(2*(255-m))|0))))/v|0;m=c.data[e+2];u=a.data[e+2];a.data[e+2]=(C*m+J*u+(127>=m?x*(0==m?0:255-Math.min(255,255*(255-u)/(2*m)|0)):x*(255==m?255:Math.min(255,255*u/(2*(255-m))|0))))/v|0;a.data[e+3]=v}}};S.vividLightOntoTransparentFusionWithTransparentLayerMasked=function(a,
c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u,v;if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=h*u/255|0,J=h*(255^u)/255|0,H=(255^h)*u/255|0;h=c.data[l];v=a.data[l];a.data[l]=(J*h+H*v+(127>=h?C*(0==h?0:255-Math.min(255,255*(255-v)/(2*h)|0)):C*(255==h?255:Math.min(255,255*v/(2*(255-h))|0))))/x|0;
h=c.data[l+1];v=a.data[l+1];a.data[l+1]=(J*h+H*v+(127>=h?C*(0==h?0:255-Math.min(255,255*(255-v)/(2*h)|0)):C*(255==h?255:Math.min(255,255*v/(2*(255-h))|0))))/x|0;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=(J*h+H*v+(127>=h?C*(0==h?0:255-Math.min(255,255*(255-v)/(2*h)|0)):C*(255==h?255:Math.min(255,255*v/(2*(255-h))|0))))/x|0;a.data[l+3]=x}}};S.linearLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=
0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m;if(l){let h=255^l;m=a.data[b];a.data[b]=(h*m+l*Math.min(255,Math.max(0,m+2*c.data[b]-255)))/255|0;m=a.data[b+1];a.data[b+1]=(h*m+l*Math.min(255,Math.max(0,m+2*c.data[b+1]-255)))/255|0;m=a.data[b+2];a.data[b+2]=(h*m+l*Math.min(255,Math.max(0,m+2*c.data[b+2]-255)))/255|0}}};S.linearLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=
0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h;if(m){let n=255^m;h=a.data[b];a.data[b]=(n*h+m*Math.min(255,Math.max(0,h+2*c.data[b]-255)))/255|0;h=a.data[b+1];a.data[b+1]=(n*h+m*Math.min(255,Math.max(0,h+2*c.data[b+1]-255)))/255|0;h=a.data[b+2];a.data[b+2]=(n*h+m*Math.min(255,Math.max(0,h+2*c.data[b+2]-255)))/255|0}}};S.linearLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);
for(let e=0;e<d;e++,b+=p)for(let l=0;l<g;l++,b+=4){var k=c.data[b+3];let m,h;if(k){let n=k+(m=a.data[b+3])-(k*m/255|0)|0,r=k*m/255|0,u=k*(255^m)/255|0,v=(255^k)*m/255|0;k=c.data[b];h=a.data[b];a.data[b]=(u*k+v*h+r*Math.min(255,Math.max(0,h+2*k-255)))/n|0;k=c.data[b+1];h=a.data[b+1];a.data[b+1]=(u*k+v*h+r*Math.min(255,Math.max(0,h+2*k-255)))/n|0;k=c.data[b+2];h=a.data[b+2];a.data[b+2]=(u*k+v*h+r*Math.min(255,Math.max(0,h+2*k-255)))/n|0;a.data[b+3]=n}}};S.linearLightOntoTransparentFusionWithTransparentLayer=
function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=e+(h=a.data[b+3])-(e*h/255|0)|0,u=e*h/255|0,v=e*(255^h)/255|0,x=(255^e)*h/255|0;e=c.data[b];n=a.data[b];a.data[b]=(v*e+x*n+u*Math.min(255,Math.max(0,n+2*e-255)))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(v*e+x*n+u*Math.min(255,Math.max(0,n+2*e-255)))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+
2]=(v*e+x*n+u*Math.min(255,Math.max(0,n+2*e-255)))/r|0;a.data[b+3]=r}}};S.linearLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r;if(n){let u=255^n;r=a.data[e];a.data[e]=(u*r+n*Math.min(255,Math.max(0,r+2*c.data[e]-255)))/255|0;r=a.data[e+1];a.data[e+1]=
(u*r+n*Math.min(255,Math.max(0,r+2*c.data[e+1]-255)))/255|0;r=a.data[e+2];a.data[e+2]=(u*r+n*Math.min(255,Math.max(0,r+2*c.data[e+2]-255)))/255|0}}};S.linearLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u;if(r){let v=255^r;u=a.data[l];a.data[l]=
(v*u+r*Math.min(255,Math.max(0,u+2*c.data[l]-255)))/255|0;u=a.data[l+1];a.data[l+1]=(v*u+r*Math.min(255,Math.max(0,u+2*c.data[l+1]-255)))/255|0;u=a.data[l+2];a.data[l+2]=(v*u+r*Math.min(255,Math.max(0,u+2*c.data[l+2]-255)))/255|0}}};S.linearLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=
4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=m*r/255|0,C=m*(255^r)/255|0,J=(255^m)*r/255|0;m=c.data[e];u=a.data[e];a.data[e]=(C*m+J*u+x*Math.min(255,Math.max(0,u+2*m-255)))/v|0;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=(C*m+J*u+x*Math.min(255,Math.max(0,u+2*m-255)))/v|0;m=c.data[e+2];u=a.data[e+2];a.data[e+2]=(C*m+J*u+x*Math.min(255,Math.max(0,u+2*m-255)))/v|0;a.data[e+3]=v}}};S.linearLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,
d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*d/25500|0;let u,v;if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=h*u/255|0,J=h*(255^u)/255|0,H=(255^h)*u/255|0;h=c.data[l];v=a.data[l];a.data[l]=(J*h+H*v+C*Math.min(255,Math.max(0,v+2*h-255)))/x|0;h=c.data[l+1];v=a.data[l+1];a.data[l+1]=(J*h+H*v+C*Math.min(255,Math.max(0,
v+2*h-255)))/x|0;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=(J*h+H*v+C*Math.min(255,Math.max(0,v+2*h-255)))/x|0;a.data[l+3]=x}}};S.pinLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m,h;if(l){let n=255^l;m=c.data[b];h=a.data[b];a.data[b]=(n*h+l*(h>=2*m?2*m:h<=2*m-255?2*m-255:h))/255|0;m=c.data[b+1];h=a.data[b+1];a.data[b+1]=(n*h+l*(h>=
2*m?2*m:h<=2*m-255?2*m-255:h))/255|0;m=c.data[b+2];h=a.data[b+2];a.data[b+2]=(n*h+l*(h>=2*m?2*m:h<=2*m-255?2*m-255:h))/255|0}}};S.pinLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h,n;if(m){let r=255^m;h=c.data[b];n=a.data[b];a.data[b]=(r*n+m*(n>=2*h?2*h:n<=2*h-255?2*h-255:n))/255|0;h=c.data[b+1];n=a.data[b+1];a.data[b+
1]=(r*n+m*(n>=2*h?2*h:n<=2*h-255?2*h-255:n))/255|0;h=c.data[b+2];n=a.data[b+2];a.data[b+2]=(r*n+m*(n>=2*h?2*h:n<=2*h-255?2*h-255:n))/255|0}}};S.pinLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<d;e++,b+=p)for(let l=0;l<g;l++,b+=4){var k=c.data[b+3];let m,h;if(k){let n=k+(m=a.data[b+3])-(k*m/255|0)|0,r=k*m/255|0,u=k*(255^m)/255|0,v=(255^k)*m/255|0;k=c.data[b];h=a.data[b];a.data[b]=
(u*k+v*h+r*(h>=2*k?2*k:h<=2*k-255?2*k-255:h))/n|0;k=c.data[b+1];h=a.data[b+1];a.data[b+1]=(u*k+v*h+r*(h>=2*k?2*k:h<=2*k-255?2*k-255:h))/n|0;k=c.data[b+2];h=a.data[b+2];a.data[b+2]=(u*k+v*h+r*(h>=2*k?2*k:h<=2*k-255?2*k-255:h))/n|0;a.data[b+3]=n}}};S.pinLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let l=0;l<g;l++,b+=k)for(let m=0;m<p;m++,b+=4){var e=c.data[b+3]*d/100|0;let h,n;if(e){let r=
e+(h=a.data[b+3])-(e*h/255|0)|0,u=e*h/255|0,v=e*(255^h)/255|0,x=(255^e)*h/255|0;e=c.data[b];n=a.data[b];a.data[b]=(v*e+x*n+u*(n>=2*e?2*e:n<=2*e-255?2*e-255:n))/r|0;e=c.data[b+1];n=a.data[b+1];a.data[b+1]=(v*e+x*n+u*(n>=2*e?2*e:n<=2*e-255?2*e-255:n))/r|0;e=c.data[b+2];n=a.data[b+2];a.data[b+2]=(v*e+x*n+u*(n>=2*e?2*e:n<=2*e-255?2*e-255:n))/r|0;a.data[b+3]=r}}};S.pinLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,
b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0,r,u;if(n){let v=255^n;r=c.data[e];u=a.data[e];a.data[e]=(v*u+n*(u>=2*r?2*r:u<=2*r-255?2*r-255:u))/255|0;r=c.data[e+1];u=a.data[e+1];a.data[e+1]=(v*u+n*(u>=2*r?2*r:u<=2*r-255?2*r-255:u))/255|0;r=c.data[e+2];u=a.data[e+2];a.data[e+2]=(v*u+n*(u>=2*r?2*r:u<=2*r-255?2*r-255:u))/255|0}}};S.pinLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,
g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3]*g.data[b]*d/25500|0,u,v;if(r){let x=255^r;u=c.data[l];v=a.data[l];a.data[l]=(x*v+r*(v>=2*u?2*u:v<=2*u-255?2*u-255:v))/255|0;u=c.data[l+1];v=a.data[l+1];a.data[l+1]=(x*v+r*(v>=2*u?2*u:v<=2*u-255?2*u-255:v))/255|0;u=c.data[l+2];v=a.data[l+2];a.data[l+2]=(x*v+r*(v>=2*u?2*u:v<=2*u-255?
2*u-255:v))/255|0}}};S.pinLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<d;h++,e+=k,b+=l)for(let n=0;n<p;n++,e+=4,b++){var m=c.data[e+3]*g.data[b]/255|0;let r,u;if(m){let v=m+(r=a.data[e+3])-(m*r/255|0)|0,x=m*r/255|0,C=m*(255^r)/255|0,J=(255^m)*r/255|0;m=c.data[e];u=a.data[e];a.data[e]=(C*m+J*u+x*(u>=2*m?2*m:u<=2*m-255?2*m-255:
u))/v|0;m=c.data[e+1];u=a.data[e+1];a.data[e+1]=(C*m+J*u+x*(u>=2*m?2*m:u<=2*m-255?2*m-255:u))/v|0;m=c.data[e+2];u=a.data[e+2];a.data[e+2]=(C*m+J*u+x*(u>=2*m?2*m:u<=2*m-255?2*m-255:u))/v|0;a.data[e+3]=v}}};S.pinLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let n=0;n<p;n++,l+=e,b+=m)for(let r=0;r<k;r++,l+=4,b++){var h=c.data[l+3]*g.data[b]*
d/25500|0;let u,v;if(h){let x=h+(u=a.data[l+3])-(h*u/255|0)|0,C=h*u/255|0,J=h*(255^u)/255|0,H=(255^h)*u/255|0;h=c.data[l];v=a.data[l];a.data[l]=(J*h+H*v+C*(v>=2*h?2*h:v<=2*h-255?2*h-255:v))/x|0;h=c.data[l+1];v=a.data[l+1];a.data[l+1]=(J*h+H*v+C*(v>=2*h?2*h:v<=2*h-255?2*h-255:v))/x|0;h=c.data[l+2];v=a.data[l+2];a.data[l+2]=(J*h+H*v+C*(v>=2*h?2*h:v<=2*h-255?2*h-255:v))/x|0;a.data[l+3]=x}}};S.passthroughOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*
(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3],h=d/100,n=1-h,r=m*h+255*n;a.data[b]=(c.data[b]*m*h+255*a.data[b]*n)/r|0;a.data[b+1]=(c.data[b+1]*m*h+255*a.data[b+1]*n)/r|0;a.data[b+2]=(c.data[b+2]*m*h+255*a.data[b+2]*n)/r|0;a.data[b+3]=r}};S.passthroughOntoOpaqueFusionWithOpaqueLayer=S.passthroughOntoOpaqueFusionWithTransparentLayer;S.passthroughOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=
0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3],h=a.data[b+3],n=d/100,r=1-n,u=m*n+h*r;a.data[b]=(c.data[b]*m*n+a.data[b]*h*r)/u|0;a.data[b+1]=(c.data[b+1]*m*n+a.data[b+1]*h*r)/u|0;a.data[b+2]=(c.data[b+2]*m*n+a.data[b+2]*h*r)/u|0;a.data[b+3]=u}};S.passthroughOntoTransparentFusionWithOpaqueLayer=S.passthroughOntoTransparentFusionWithTransparentLayer;S.passthroughOntoOpaqueFusionWithTransparentLayerMasked=function(a,
c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3],u=g.data[b]*d/25500,v=1-u,x=r*u+255*v;a.data[l]=(c.data[l]*r*u+255*a.data[l]*v)/x|0;a.data[l+1]=(c.data[l+1]*r*u+255*a.data[l+1]*v)/x|0;a.data[l+2]=(c.data[l+2]*r*u+255*a.data[l+2]*v)/x|0;a.data[l+3]=x}};S.passthroughOntoOpaqueFusionWithOpaqueLayerMasked=S.passthroughOntoOpaqueFusionWithTransparentLayerMasked;
S.passthroughOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+3],u=a.data[l+3],v=g.data[b]*d/25500,x=1-v,C=r*v+u*x;a.data[l]=(c.data[l]*r*v+a.data[l]*u*x)/C|0;a.data[l+1]=(c.data[l+1]*r*v+a.data[l+1]*u*x)/C|0;a.data[l+2]=(c.data[l+2]*r*v+a.data[l+2]*u*x)/C|0;a.data[l+
3]=C}};S.passthroughOntoTransparentFusionWithOpaqueLayerMasked=S.passthroughOntoTransparentFusionWithTransparentLayerMasked;S.replaceOntoFusionWithTransparentLayer=function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0;a.data[b]=c.data[b];a.data[b+1]=c.data[b+1];a.data[b+2]=c.data[b+2];a.data[b+3]=m}};S.replaceOntoFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();
let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3];a.data[b]=c.data[b];a.data[b+1]=c.data[b+1];a.data[b+2]=c.data[b+2];a.data[b+3]=l}};S.replaceOntoFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++){let r=c.data[l+
3]*g.data[b]*d/25500|0;a.data[l]=c.data[l];a.data[l+1]=c.data[l+1];a.data[l+2]=c.data[l+2];a.data[l+3]=r}};S.replaceOntoFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++){let n=c.data[e+3]*g.data[b]/255|0;a.data[e]=c.data[e];a.data[e+1]=c.data[e+1];a.data[e+2]=c.data[e+2];a.data[e+3]=n}};S.replaceAlphaOntoFusionWithTransparentLayer=
function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4)a.data[b+3]=c.data[b+3]*d/100|0};S.replaceAlphaOntoFusionWithTransparentLayerMasked=function(a,c,d,b,g){let p=0|b.getHeight(),k=0|b.getWidth(),e=4*(c.width-k)|0,l=0|c.offsetOfPixel(b.left,b.top),m=g.width-k|0;b=0|g.offsetOfPixel(b.left,b.top);for(let h=0;h<p;h++,l+=e,b+=m)for(let n=0;n<k;n++,l+=4,b++)a.data[l+3]=c.data[l+3]*g.data[b]*d/25500|
0};S.replaceAlphaOntoFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4)a.data[b+3]=c.data[b+3]};S.replaceAlphaOntoFusionWithOpaqueLayerMasked=function(a,c,d,b,g){d=0|b.getHeight();let p=0|b.getWidth(),k=4*(c.width-p)|0,e=0|c.offsetOfPixel(b.left,b.top),l=g.width-p|0;b=0|g.offsetOfPixel(b.left,b.top);for(let m=0;m<d;m++,e+=k,b+=l)for(let h=0;h<p;h++,e+=4,b++)a.data[e+3]=
c.data[e+3]*g.data[b]/255|0};S.upgradeMultiplyOfOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();let g=0|b.getWidth(),p=4*(c.width-g)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let k=0;k<d;k++,b+=p)for(let e=0;e<g;e++,b+=4){let l=c.data[b+3],m,h;l&&(m=c.data[b],h=a.data[b],c.data[b]=m+Math.ceil((255-m)*h*l%65025/(h*l)),m=c.data[b+1],h=a.data[b+1],c.data[b+1]=m+Math.ceil((255-m)*h*l%65025/(h*l)),m=c.data[b+2],h=a.data[b+2],c.data[b+2]=m+Math.ceil((255-m)*h*l%65025/(h*l)))}};S.upgradeMultiplyOfTransparentLayer=
function(a,c,d,b){let g=0|b.getHeight(),p=0|b.getWidth(),k=4*(c.width-p)|0;b=0|c.offsetOfPixel(b.left,b.top);for(let e=0;e<g;e++,b+=k)for(let l=0;l<p;l++,b+=4){let m=c.data[b+3]*d/100|0,h,n;m&&(h=c.data[b],n=a.data[b],c.data[b]=h+Math.ceil((255-h)*n*m%65025/(n*m)),h=c.data[b+1],n=a.data[b+1],c.data[b+1]=h+Math.ceil((255-h)*n*m%65025/(n*m)),h=c.data[b+2],n=a.data[b+2],c.data[b+2]=h+Math.ceil((255-h)*n*m%65025/(n*m)))}};S._normalFuseImageOntoImageAtPosition=function(a,c,d,b,g,p){d=0|b.getHeight();let k=
0|b.getWidth(),e=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);let l=4*(a.width-k)|0;g=0|a.offsetOfPixel(g,p);for(p=0;p<d;p++,b+=e,g+=l)for(let h=0;h<k;h++,b+=4,g+=4){var m=c.data[b+3];let n;if(m){let r=m+(n=a.data[g+3])-(m*n/255|0)|0;m=255*m/r|0;let u=255-m;a.data[g]=(c.data[b]*m+a.data[g]*u)/255|0;a.data[g+1]=(c.data[b+1]*m+a.data[g+1]*u)/255|0;a.data[g+2]=(c.data[b+2]*m+a.data[g+2]*u)/255|0;a.data[g+3]=r}}};S.LM_NORMAL=0;S.LM_MULTIPLY=1;S.LM_ADD=2;S.LM_SCREEN=3;S.LM_LIGHTEN=4;S.LM_DARKEN=5;
S.LM_SUBTRACT=6;S.LM_DODGE=7;S.LM_BURN=8;S.LM_OVERLAY=9;S.LM_HARDLIGHT=10;S.LM_SOFTLIGHT=11;S.LM_VIVIDLIGHT=12;S.LM_LINEARLIGHT=13;S.LM_PINLIGHT=14;S.LM_PASSTHROUGH=15;S.LM_MULTIPLY2=16;S.LM_FIRST=0;S.LM_LAST=16;S.LM_LAST_CHIBIPAINT=S.LM_PINLIGHT;S.BLEND_MODE_CODENAMES="normal multiply add screen lighten darken subtract dodge burn overlay hardLight softLight vividLight linearLight pinLight passthrough multiply2".split(" ");S.BLEND_MODE_DISPLAY_NAMES="Normal;Multiply;Add;Screen;Lighten;Darken;Subtract;Dodge;Burn;Overlay;Hard Light;Soft Light;Vivid Light;Linear Light;Pin Light;Passthrough;Multiply".split(";");
(function(){for(var a=0;256>a;a++){var c=a/255;Yb[a]=255*(c-c*c)|0}for(a=0;256>a;a++)c=a/255,Zb[a]=255*(Math.sqrt(c)-c)|0})();tb.prototype.copyFrom=function(a){this.name=a.name;this.blendMode=a.blendMode;this.useLegacyMultiply=a.useLegacyMultiply;this.alpha=a.alpha;this.visible=a.visible;this.parent=a.parent;this.lockAlpha=a.lockAlpha;a.mask?this.mask?this.mask.copyPixelsFrom(a.mask):this.mask=a.mask.clone():this.mask=null;this.maskLinked=a.maskLinked;this.maskVisible=a.maskVisible;a.maskThumbnail?
this.maskThumbnail?this.maskThumbnail.copyPixelsFrom(a.maskThumbnail):this.maskThumbnail=a.maskThumbnail.clone():this.maskThumbnail=null};tb.prototype.setMask=function(a){(this.mask=a)||(this.maskThumbnail=null)};tb.prototype.setAlpha=function(a){this.alpha=a};tb.prototype.getAlpha=function(){return this.alpha};tb.prototype.getEffectiveAlpha=function(){return this.visible?this.alpha:0};tb.prototype.getEffectiveMask=function(){return this.maskVisible?this.mask:null};tb.prototype.setName=function(a){this.name=
a};tb.prototype.getName=function(){return this.name};tb.prototype.setBlendMode=function(a){this.blendMode=a;a===S.LM_MULTIPLY?this.useLegacyMultiply=!0:a===S.LM_MULTIPLY2&&(this.useLegacyMultiply=!1)};tb.prototype.getBlendMode=function(){return this.blendMode};tb.prototype.getLockAlpha=function(){return this.lockAlpha};tb.prototype.setLockAlpha=function(a){this.lockAlpha=a};tb.prototype.setVisible=function(a){this.visible=a};tb.prototype.getVisible=function(){return this.visible};tb.prototype.isVisible=
tb.prototype.getVisible;tb.prototype.setMaskLinked=function(a){this.maskLinked=a};tb.prototype.getMaskLinked=function(){return this.maskLinked};tb.prototype.setMaskVisible=function(a){this.maskVisible=a};tb.prototype.getMaskVisible=function(){return this.maskVisible};tb.prototype.getMemoryUsed=function(){return 0};tb.prototype.getDepth=function(){return null==this.parent?0:this.parent.getDepth()+1};tb.prototype.ancestorsAreVisible=function(){return null==this.parent||this.parent.visible&&this.parent.ancestorsAreVisible()};
tb.prototype.hasAncestor=function(a){return this.parent==a||this.parent&&this.parent.hasAncestor(a)};tb.prototype.clone=function(){throw"Pure virtual CPLayer.clone() call";};tb.prototype.getNonTransparentBounds=function(a){return new Ia(0,0,0,0)};tb.prototype.rebuildMaskThumbnail=function(){if(this.mask){if(!this.maskThumbnail){var a=Math.ceil(Math.max(this.mask.width/tb.LAYER_THUMBNAIL_WIDTH,this.mask.height/tb.LAYER_THUMBNAIL_HEIGHT));this.maskThumbnail=new gb(Math.floor(this.mask.width/a),Math.floor(this.mask.height/
a),8)}this.maskThumbnail.createThumbnailFrom(this.mask)}else this.maskThumbnail=null};tb.prototype.getMaskThumbnail=function(){return!this.maskThumbnail&&this.mask&&this.rebuildMaskThumbnail(),this.maskThumbnail};tb.LAYER_THUMBNAIL_WIDTH=80;tb.LAYER_THUMBNAIL_HEIGHT=50;Na.prototype=Object.create(tb.prototype);Na.prototype.constructor=Na;Na.createFromImage=function(a,c){c=new Na(0,0,c);return c.image=a,c};Na.prototype.clone=function(){var a=new Na(0,0,this.name);return a.copyFrom(this),a};Na.prototype.copyFrom=
function(a){tb.prototype.copyFrom.call(this,a);this.clip=a.clip;this.image?this.image.copyPixelsFrom(a.image):this.image=a.image.clone()};Na.prototype.hasAlpha=function(){return 100!=this.alpha||this.image.hasAlpha()};Na.prototype.hasAlphaInRect=function(a){return 100!=this.alpha||this.image.hasAlphaInRect(a)};Na.prototype.copyImageFrom=function(a){this.image.copyPixelsFrom(a)};Na.prototype.getClippingBase=function(){if(this.clip&&this.parent)for(var a=this.parent.indexOf(this)-1;0<=a&&this.parent.layers[a]instanceof
Na;a--)if(!this.parent.layers[a].clip)return this.parent.layers[a];return null};Na.prototype.getClip=function(){return this.clip};Na.prototype.setClip=function(a){this.clip=a};Na.prototype.getNonTransparentBounds=function(a){return this.image.getNonTransparentBounds(a)};Na.prototype.getBounds=function(){return new Ia(0,0,this.image.width,this.image.height)};Na.prototype.getMemoryUsed=function(){return this.image?this.image.getMemorySize():0};Na.prototype.rebuildImageThumbnail=function(){if(!this.imageThumbnail){var a=
Math.ceil(Math.max(this.image.width/tb.LAYER_THUMBNAIL_WIDTH,this.image.height/tb.LAYER_THUMBNAIL_HEIGHT));this.imageThumbnail=new I(Math.floor(this.image.width/a),Math.floor(this.image.height/a))}this.imageThumbnail.createThumbnailFrom(this.image)};Na.prototype.getImageThumbnail=function(){return this.imageThumbnail||this.rebuildImageThumbnail(),this.imageThumbnail};S.blendFunctionNameForParameters=function(a,c,d,b){d=S.BLEND_MODE_CODENAMES[d]+"Onto";return a?d+="TransparentFusion":d+="OpaqueFusion",
100==c?d+="WithOpaqueLayer":d+="WithTransparentLayer",b&&(d+="Masked"),d};S.fuseImageOntoImage=function(a,c,d,b,g,p,k){0>=b||(c=S.blendFunctionNameForParameters(c,b,g,null!=k),p=a.getBounds().clipTo(p),this[c](a,d,b,p,k))};S.normalFuseImageOntoImageAtPosition=function(a,c,d,b,g){g=g.clone();d=new Ia(d,b,0,0);a.getBounds().clipSourceDest(g,d);this._normalFuseImageOntoImageAtPosition(a,c,100,g,d.left,d.top)};S.multiplyAlphaBy=function(a,c){if(100>c)if(0==c)a.clearAll(0);else{a=a.data;for(var d=3;d<
a.length;d+=4)a[d]=Math.round(a[d]*c/100)}};S.multiplyAlphaByMask=function(a,c,d){c/=25500;for(var b=I.ALPHA_BYTE_OFFSET,g=0;b<a.data.length;b+=I.BYTES_PER_PIXEL,g++)a.data[b]=Math.round(a.data[b]*d.data[g]*c)};S.copyAndMultiplyAlphaBy=function(a,c,d,b){if(100==d)a.copyBitmapRect(c,b.left,b.top,b);else if(0==d)a.clearRect(b,0);else for(a=c.data,c=0;c<a.length;c+=4)a[c]=a[c],a[c+1]=a[c+1],a[c+2]=a[c+2],a[c+3]=Math.round(a[c+3]*d/100)};Vf.prototype.addChildren=function(a){null!=a&&(Array.isArray(a)?
(a.forEach(c=>c.parent=this),this.layers=this.layers.concat(a)):(a.parent=this,this.layers.push(a)))};var ic={};!function(a){function c(){}function d(k,e){for(var l=k.length;l--;)if(k[l].listener===e)return l;return-1}function b(k){return function(){return this[k].apply(this,arguments)}}var g=c.prototype,p=a.EventEmitter;g.getListeners=function(k){var e,l,m=this._getEvents();if(k instanceof RegExp)for(l in e={},m)m.hasOwnProperty(l)&&k.test(l)&&(e[l]=m[l]);else e=m[k]||(m[k]=[]);return e};g.flattenListeners=
function(k){var e,l=[];for(e=0;e<k.length;e+=1)l.push(k[e].listener);return l};g.getListenersAsObject=function(k){var e,l=this.getListeners(k);return l instanceof Array&&((e={})[k]=l),e||l};g.addListener=function(k,e){if(!function r(n){return"function"==typeof n||n instanceof RegExp||!!n&&"object"==typeof n&&r(n.listener)}(e))throw TypeError("listener must be a function");var l;k=this.getListenersAsObject(k);var m="object"==typeof e;for(l in k)k.hasOwnProperty(l)&&-1===d(k[l],e)&&k[l].push(m?e:{listener:e,
once:!1});return this};g.on=b("addListener");g.addOnceListener=function(k,e){return this.addListener(k,{listener:e,once:!0})};g.once=b("addOnceListener");g.defineEvent=function(k){return this.getListeners(k),this};g.defineEvents=function(k){for(var e=0;e<k.length;e+=1)this.defineEvent(k[e]);return this};g.removeListener=function(k,e){var l,m;k=this.getListenersAsObject(k);for(m in k)k.hasOwnProperty(m)&&-1!==(l=d(k[m],e))&&k[m].splice(l,1);return this};g.off=b("removeListener");g.addListeners=function(k,
e){return this.manipulateListeners(!1,k,e)};g.removeListeners=function(k,e){return this.manipulateListeners(!0,k,e)};g.manipulateListeners=function(k,e,l){var m,h,n=k?this.removeListener:this.addListener;k=k?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(m=l.length;m--;)n.call(this,e,l[m]);else for(m in e)e.hasOwnProperty(m)&&(h=e[m])&&("function"==typeof h?n.call(this,m,h):k.call(this,m,h));return this};g.removeEvent=function(k){var e,l=typeof k,m=this._getEvents();
if("string"===l)delete m[k];else if(k instanceof RegExp)for(e in m)m.hasOwnProperty(e)&&k.test(e)&&delete m[e];else delete this._events;return this};g.removeAllListeners=b("removeEvent");g.emitEvent=function(k,e){var l,m,h,n=this.getListenersAsObject(k);for(h in n)if(n.hasOwnProperty(h)){var r=0;for(l=n[h].slice(0);r<l.length;r++)!0===(m=l[r]).once&&this.removeListener(k,m.listener),m.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(k,m.listener)}return this};g.trigger=
b("emitEvent");g.emit=function(k){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(k,e)};g.setOnceReturnValue=function(k){return this._onceReturnValue=k,this};g._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue};g._getEvents=function(){return this._events||(this._events={})};c.noConflict=function(){return a.EventEmitter=p,c};"function"==typeof define&&define.amd?define(function(){return c}):ic?ic=c:a.EventEmitter=c}("undefined"!=
typeof window?window:ic||{});class Vo extends X(ic){close(){this.layer=this.buffer=null;this.emitEvent("changeLayer")}setLayer(a){this.layer=a;this.invalidRect=a.getBounds();this.emitEvent("changeLayer")}isOpen(){return null!=this.layer}invalidateRect(a){this.invalidRect.union(a)}getImageData(){this.prepareMask();if(!this.invalidRect.isEmpty()&&this.layer&&this.layer.mask){var a=this.buffer,c=this.layer.mask,d=this.invalidRect,b=d.top*c.width+d.left,g=b*I.BYTES_PER_PIXEL,p=d.getWidth();d=d.getHeight();
var k=c.width-p,e=k*I.BYTES_PER_PIXEL;for(let l=0;l<d;l++,b+=k,g+=e)for(let m=0;m<p;m++,b++,g+=I.BYTES_PER_PIXEL)a.data[g+I.RED_BYTE_OFFSET]=c.data[b],a.data[g+I.GREEN_BYTE_OFFSET]=c.data[b],a.data[g+I.BLUE_BYTE_OFFSET]=c.data[b],a.data[g+I.ALPHA_BYTE_OFFSET]=255;this.invalidRect.makeEmpty()}return this.buffer}constructor(a,c){super();this.layer=a;this.buffer=a.mask.getImageData(0,0,a.mask.width,a.mask.height);this.invalidRect=new Ia(0,0,0,0);this.prepareMask=c}}class Pc{merge(a){return!1}noChange(){return!1}getMemoryUsed(a,
c){return 0}compact(){}}Gb.prototype.getRgb=function(){return this.rgb};Gb.prototype.getSaturation=function(){return this.saturation};Gb.prototype.getHue=function(){return this.hue};Gb.prototype.getValue=function(){return this.value};Gb.prototype.setRgbComponents=function(a,c,d){this.setRgb(a<<16|c<<8|d)};Gb.prototype.setRgb=function(a){this.rgb=a;var c=a>>16&255,d=a>>8&255;a&=255;this.value=Math.max(c,Math.max(d,a));var b=Math.min(c,Math.min(d,a));if(0==this.value?this.saturation=0:this.saturation=
~~((this.value-b)/this.value*255),0==this.saturation)this.hue=0;else{var g=(this.value-c)/(this.value-b),p=(this.value-d)/(this.value-b);b=(this.value-a)/(this.value-b);var k=0;this.value==c&&(k=b-p);this.value==d&&(k=2+g-b);this.value==a&&(k=4+p-g);0>(k*=60)&&(k+=360);this.hue=~~k}};Gb.prototype.setHsv=function(a,c,d){this.hue=a;this.saturation=c;this.value=d;this.rgb=Kg(this)};Gb.prototype.setHue=function(a){this.hue=a;this.rgb=Kg(this)};Gb.prototype.setSaturation=function(a){this.saturation=a;
this.rgb=Kg(this)};Gb.prototype.setValue=function(a){this.value=a;this.rgb=Kg(this)};Gb.prototype.setGreyscale=function(a){this.rgb=Gb.greyToRGB(a);this.saturation=this.hue=0;this.value=a};Gb.prototype.clone=function(){var a=new Gb(0);return a.copyFrom(this),a};Gb.prototype.copyFrom=function(a){this.rgb=a.rgb;this.hue=a.hue;this.saturation=a.saturation;this.value=a.value};Gb.prototype.isEqual=function(a){return this.rgb==a.rgb&&this.hue==a.hue&&this.saturation==a.saturation&&this.value==a.value};
Gb.greyToRGB=function(a){return a|a<<8|a<<16};Tb.prototype.setToIdentity=function(){this.m=[1,0,0,1,0,0]};Tb.prototype.multiply=function(a){var c=this.m[1]*a.m[0]+this.m[3]*a.m[1],d=this.m[0]*a.m[2]+this.m[2]*a.m[3],b=this.m[1]*a.m[2]+this.m[3]*a.m[3],g=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],p=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];this.m[0]=this.m[0]*a.m[0]+this.m[2]*a.m[1];this.m[1]=c;this.m[2]=d;this.m[3]=b;this.m[4]=g;this.m[5]=p};Tb.prototype.preMultiply=function(a){var c=a.m[1]*this.m[0]+
a.m[3]*this.m[1],d=a.m[0]*this.m[2]+a.m[2]*this.m[3],b=a.m[1]*this.m[2]+a.m[3]*this.m[3],g=a.m[0]*this.m[4]+a.m[2]*this.m[5]+a.m[4],p=a.m[1]*this.m[4]+a.m[3]*this.m[5]+a.m[5];this.m[0]=a.m[0]*this.m[0]+a.m[2]*this.m[1];this.m[1]=c;this.m[2]=d;this.m[3]=b;this.m[4]=g;this.m[5]=p};Tb.prototype.invert=function(){var a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),c=-this.m[1]*a,d=-this.m[2]*a,b=this.m[0]*a,g=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),p=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=
this.m[3]*a;this.m[1]=c;this.m[2]=d;this.m[3]=b;this.m[4]=g;this.m[5]=p};Tb.prototype.getInverted=function(){var a=new Tb;return a.m[0]=this.m[0],a.m[1]=this.m[1],a.m[2]=this.m[2],a.m[3]=this.m[3],a.m[4]=this.m[4],a.m[5]=this.m[5],a.invert(),a};Tb.prototype.rotate=function(a){var c=Math.cos(a);a=Math.sin(a);var d=this.m[1]*c+this.m[3]*a,b=-(this.m[0]*a)+this.m[2]*c,g=-(this.m[1]*a)+this.m[3]*c;this.m[0]=this.m[0]*c+this.m[2]*a;this.m[1]=d;this.m[2]=b;this.m[3]=g};Tb.prototype.rotateAroundPoint=function(a,
c,d){this.translate(c,d);this.rotate(a);this.translate(-c,-d)};Tb.prototype.translate=function(a,c){this.m[4]+=this.m[0]*a+this.m[2]*c;this.m[5]+=this.m[1]*a+this.m[3]*c};Tb.prototype.scale=function(a,c){this.m[0]*=a;this.m[1]*=a;this.m[2]*=c;this.m[3]*=c};Tb.prototype.scaleAroundPoint=function(a,c,d,b){this.translate(d,b);this.scale(a,c);this.translate(-d,-b)};Tb.prototype.shear=function(a,c){var d=this.m[1]+this.m[3]*c,b=this.m[2]+this.m[0]*a;a=this.m[3]+this.m[1]*a;this.m[0]+=this.m[2]*c;this.m[1]=
d;this.m[2]=b;this.m[3]=a};Tb.prototype.getTransformedPoint=function(a){return{x:a.x*this.m[0]+a.y*this.m[2]+this.m[4],y:a.x*this.m[1]+a.y*this.m[3]+this.m[5]}};Tb.prototype.transformPoints=function(a){for(var c=0;c<a.length;c++)a[c]=this.getTransformedPoint(a[c])};Tb.prototype.getTranslateX=function(){return this.m[4]};Tb.prototype.getTranslateY=function(){return this.m[5]};Tb.prototype.clone=function(){var a=new Tb;return a.m[0]=this.m[0],a.m[1]=this.m[1],a.m[2]=this.m[2],a.m[3]=this.m[3],a.m[4]=
this.m[4],a.m[5]=this.m[5],a};Tb.prototype.getDeterminant=function(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]};Tb.prototype.decompose=function(){var a=this.getDeterminant(),c=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return{translate:{x:this.m[4],y:this.m[5]},rotate:Math.sign(this.m[1])*Math.acos(this.m[0]/c),scale:{x:c,y:a/c},shear:{x:Math.atan((this.m[0]*this.m[2]+this.m[1]*this.m[3])/(c*c)),y:0}}};Tb.prototype.toString=function(){return"["+this.m[0].toFixed(2)+" "+this.m[2].toFixed(2)+
" "+this.m[4].toFixed(2)+"]\n["+this.m[1].toFixed(2)+" "+this.m[3].toFixed(2)+" "+this.m[5].toFixed(2)+"]\n[0.00 0.00 1.00]"};Math.sign=Math.sign||function(a){return 0==(a=+a)||isNaN(a)?a:0<a?1:-1};Nd.prototype.toInt=function(){return Math.max(0,Math.min(255,Math.round(255*this.r)))<<16|Math.max(0,Math.min(255,Math.round(255*this.g)))<<8|Math.max(0,Math.min(255,Math.round(255*this.b)))};Nd.prototype.mixWith=function(a,c){this.r=this.r*(1-c)+a.r*c;this.g=this.g*(1-c)+a.g*c;this.b=this.b*(1-c)+a.b*
c};Nd.prototype.clone=function(){return new Nd(this.r,this.g,this.b)};Nd.createFromInt=function(a){return new Nd((a>>>16&255)/255,(a>>>8&255)/255,(255&a)/255)};class ff{paintDab(a,c,d,b,g,p,k){a=Math.max(1,Math.ceil(p.alpha*b.alphaScale));switch(b.paintMode){case Ca.PAINT_MODE_FLOW:this._paintFlow(g,c,p.brush,p.width,a);break;case Ca.PAINT_MODE_OPACITY:this._paintOpacity(g,c,p.brush,p.width,a)}}mergeOntoImage(a,c,d){let b=this._strokeBuffer.data;var g=this._strokedRegion;c=c.data;let p=a.data,k=d>>
16&255,e=d>>8&255;d&=255;let l=0|g.getWidth(),m=0|g.getHeight(),h=this._strokeBuffer.offsetOfPixel(g.left,g.top);g=a.offsetOfPixel(g.left,g.top);let n=this._strokeBuffer.width-l|0;a=(a.width-l)*I.BYTES_PER_PIXEL|0;for(let u=0;u<m;u++,h+=n,g+=a)for(let v=0;v<l;v++,h++,g+=I.BYTES_PER_PIXEL){var r=b[h]/255+.5|0;if(0<r){let x=r+c[g+I.ALPHA_BYTE_OFFSET]*(255-r)/255|0;r=255*r/x|0;let C=255-r;p[g]=(k*r+c[g]*C)/255&255;p[g+1]=(e*r+c[g+1]*C)/255&255;p[g+2]=(d*r+c[g+2]*C)/255&255;p[g+3]=x}}}mergeOntoMask(a,
c,d){let b=this._strokeBuffer.data;var g=this._strokedRegion;c=c.data;let p=a.data,k=0|g.getWidth(),e=0|g.getHeight(),l=a.offsetOfPixel(g.left,g.top);g=this._strokeBuffer.offsetOfPixel(g.left,g.top);let m=this._strokeBuffer.width-k|0;a=a.width-k|0;for(let h=0;h<e;h++,g+=m,l+=a)for(let n=0;n<k;n++,g++,l++){let r=b[g]/255|0;0<r&&(p[l]=(d*r+c[l]*(255-r))/255)}}_paintFlow(a,c,d,b,g){let p=this._strokeBuffer.data;a=a.left+a.top*b;let k=this._strokeBuffer.offsetOfPixel(c.left,c.top),e=c.getHeight(),l=c.getWidth();
b-=l;let m=this._strokeBuffer.width-l;this._strokedRegion.union(c);for(c=0;c<e;c++,a+=b,k+=m)for(let h=0;h<l;h++,a++,k++){let n=d[a]*g;0!=n&&(p[k]=Math.min(65025,p[k]+(255-p[k]/255)*n/255))}}_paintOpacity(a,c,d,b,g){let p=this._strokeBuffer.data;a=a.left+a.top*b;let k=this._strokeBuffer.offsetOfPixel(c.left,c.top),e=c.getWidth();b-=e;let l=this._strokeBuffer.width-e;g=Math.min(255,g);this._strokedRegion.union(c);for(let m=c.top;m<c.bottom;m++,a+=b,k+=l)for(let h=0;h<e;h++,a++,k++)p[k]=Math.max(d[a]*
g,p[k])}beginStroke(){}endStroke(){}constructor(a,c){this._strokeBuffer=a;this._strokedRegion=c;this.wantsOutputAsInput=!0}}class Wo extends ff{mergeOntoImage(a,c,d){d=this._strokeBuffer.data;let b=this._strokedRegion;c=c.data;let g=a.data;for(let p=b.top;p<b.bottom;p++){let k=a.offsetOfPixel(b.left,p)+I.ALPHA_BYTE_OFFSET,e=this._strokeBuffer.offsetOfPixel(b.left,p);for(let l=b.left;l<b.right;l++,k+=I.BYTES_PER_PIXEL){let m=d[e++]/255|0;0<m&&(g[k]=c[k]*(255-m)/255)}}}}class Xo extends ff{mergeOntoImage(a,
c,d){d=this._strokeBuffer.data;var b=this._strokedRegion;let g=b.getWidth(),p=b.getHeight(),k=a.offsetOfPixel(b.left,b.top);b=this._strokeBuffer.offsetOfPixel(b.left,b.top);let e=(a.width-g)*I.BYTES_PER_PIXEL,l=this._strokeBuffer.width-g;c=c.data;a=a.data;for(let h=0;h<p;h++,b+=l,k+=e)for(let n=0;n<g;n++,b++,k+=I.BYTES_PER_PIXEL){var m=d[b]/255|0;0<m&&0!=c[k+I.ALPHA_BYTE_OFFSET]&&(m=(m+255)/255,a[k+I.RED_BYTE_OFFSET]=c[k+I.RED_BYTE_OFFSET]*m,a[k+I.GREEN_BYTE_OFFSET]=c[k+I.GREEN_BYTE_OFFSET]*m,a[k+
I.BLUE_BYTE_OFFSET]=c[k+I.BLUE_BYTE_OFFSET]*m)}}mergeOntoMask(a,c,d){d=this._strokeBuffer.data;var b=this._strokedRegion;let g=b.getWidth(),p=b.getHeight(),k=a.offsetOfPixel(b.left,b.top);b=this._strokeBuffer.offsetOfPixel(b.left,b.top);let e=a.width-g,l=this._strokeBuffer.width-g;c=c.data;a=a.data;for(let m=0;m<p;m++,b+=l,k+=e)for(let h=0;h<g;h++,b++,k++){let n=d[b]/255|0;0<n&&(a[k]=Math.min((n+255)/255*c[k],255))}}}class Yo extends ff{mergeOntoImage(a,c,d){d=this._strokeBuffer.data;var b=this._strokedRegion;
let g=b.getWidth(),p=b.getHeight(),k=a.offsetOfPixel(b.left,b.top);b=this._strokeBuffer.offsetOfPixel(b.left,b.top);let e=(a.width-g)*I.BYTES_PER_PIXEL,l=this._strokeBuffer.width-g;c=c.data;a=a.data;for(let m=0;m<p;m++,b+=l,k+=e)for(let h=0;h<g;h++,b++,k+=I.BYTES_PER_PIXEL){let n=d[b]/255|0;0<n&&0!=c[k+I.ALPHA_BYTE_OFFSET]&&(a[k+I.RED_BYTE_OFFSET]=c[k+I.RED_BYTE_OFFSET]-(260-c[k+I.RED_BYTE_OFFSET])*n/255|0,a[k+I.GREEN_BYTE_OFFSET]=c[k+I.GREEN_BYTE_OFFSET]-(260-c[k+I.GREEN_BYTE_OFFSET])*n/255|0,a[k+
I.BLUE_BYTE_OFFSET]=c[k+I.BLUE_BYTE_OFFSET]-(260-c[k+I.BLUE_BYTE_OFFSET])*n/255|0)}}mergeOntoMask(a,c,d){d=this._strokeBuffer.data;var b=this._strokedRegion;let g=b.getWidth(),p=b.getHeight(),k=a.offsetOfPixel(b.left,b.top);b=this._strokeBuffer.offsetOfPixel(b.left,b.top);let e=a.width-g,l=this._strokeBuffer.width-g;c=c.data;a=a.data;for(let m=0;m<p;m++,b+=l,k+=e)for(let h=0;h<g;h++,b++,k++){let n=d[b]/255|0;0<n&&(a[k]=Math.max(c[k]-(260-c[k])*n/255,0))}}}class Zo extends ff{mergeOntoImage(a,c,d){d=
this._strokeBuffer.data;let b=this._strokedRegion,g=c.data;a=a.data;var p=b.getWidth();let k=c.width*I.BYTES_PER_PIXEL,e=c.offsetOfPixel(b.left,b.top),l=this._strokeBuffer.offsetOfPixel(b.left,b.top),m=(c.width-p)*I.BYTES_PER_PIXEL;p=this._strokeBuffer.width-p;let h,n,r,u,v=function(C){h+=g[C+I.RED_BYTE_OFFSET];n+=g[C+I.GREEN_BYTE_OFFSET];r+=g[C+I.BLUE_BYTE_OFFSET];u+=g[C+I.ALPHA_BYTE_OFFSET]};for(let C=b.top;C<b.bottom;C++,e+=m,l+=p)for(let J=b.left;J<b.right;J++,e+=I.BYTES_PER_PIXEL,l++){var x=
d[l]/255|0;if(0<x){x=64+-63*x/255|0;let H=x+4;h=x*g[e+I.RED_BYTE_OFFSET];n=x*g[e+I.GREEN_BYTE_OFFSET];r=x*g[e+I.BLUE_BYTE_OFFSET];u=x*g[e+I.ALPHA_BYTE_OFFSET];v(0<C?e-k:e);v(C<c.height-1?e+k:e);v(0<J?e-I.BYTES_PER_PIXEL:e);v(J<c.width-1?e+I.BYTES_PER_PIXEL:e);u/=H;h/=H;n/=H;r/=H;a[e+I.RED_BYTE_OFFSET]=0|h;a[e+I.GREEN_BYTE_OFFSET]=0|n;a[e+I.BLUE_BYTE_OFFSET]=0|r;a[e+I.ALPHA_BYTE_OFFSET]=0|u}}}mergeOntoMask(a,c,d){d=this._strokeBuffer.data;let b=this._strokedRegion,g=c.data;a=a.data;var p=b.getWidth();
let k=c.width,e=c.offsetOfPixel(b.left,b.top),l=this._strokeBuffer.offsetOfPixel(b.left,b.top),m=c.width-p;p=this._strokeBuffer.width-p;for(let r=b.top;r<b.bottom;r++,e+=m,l+=p)for(let u=b.left;u<b.right;u++,e++,l++){var h=d[l]/255|0;if(0<h){var n=64+-63*h/255|0;h=n+4;n=n*g[e]+g[0<r?e-k:e]+g[r<c.height-1?e+k:e]+g[0<u?e-1:e]+g[u<c.width-1?e+1:e];a[e]=n/h|0}}}}class Ik extends ff{mergeOntoImage(a,c,d){d=this._strokeBuffer.data;var b=this._strokedRegion;c=c.data;let g=a.data,p=this._strokeBuffer.offsetOfPixel(b.left,
b.top),k=a.offsetOfPixel(b.left,b.top),e=0|b.getWidth();b=0|b.getHeight();let l=this._strokeBuffer.width-e|0;a=(a.width-e)*I.BYTES_PER_PIXEL|0;for(let n=0;n<b;n++,p+=l,k+=a)for(let r=0;r<e;r++,p++,k+=I.BYTES_PER_PIXEL){let u=d[p];var m=u>>>24;if(0<m){var h=c[k+I.ALPHA_BYTE_OFFSET];h=m+h-m*h/255|0;m=255*m/h|0;let v=255-m;g[k]=((u>>16&255)*m+c[k]*v)/255|0;g[k+1]=((u>>8&255)*m+c[k+1]*v)/255|0;g[k+2]=((255&u)*m+c[k+2]*v)/255|0;g[k+3]=h}}}mergeOntoMask(a,c,d){d=this._strokeBuffer.data;var b=this._strokedRegion;
c=c.data;let g=a.data,p=this._strokeBuffer.offsetOfPixel(b.left,b.top),k=a.offsetOfPixel(b.left,b.top),e=0|b.getWidth();b=0|b.getHeight();let l=this._strokeBuffer.width-e|0;a=a.width-e|0;for(let m=0;m<b;m++,p+=l,k+=a)for(let h=0;h<e;h++,p++,k++){let n=d[p],r=n>>8;0<r&&(g[k]=((255&n)*r+c[k]*(255-r))/255|0)}}}let Co=2/6;class Wf extends Ik{static _sampleGrey(a,c,d,b,g){c|=0;d|=0;let p=[{x:c,y:d}];for(let k=.25;1.001>k;k+=.25)Array.prototype.push.apply(p,[{x:~~(c+k*b),y:d},{x:~~(c-k*b),y:d},{x:c,y:~~(d+
k*g)},{x:c,y:~~(d-k*g)},{x:~~(c+.7*k*b),y:~~(d+.7*k*g)},{x:~~(c+.7*k*b),y:~~(d-.7*k*g)},{x:~~(c-.7*k*b),y:~~(d+.7*k*g)},{x:~~(c-.7*k*b),y:~~(d-.7*k*g)}]);return Nk(p.map(k=>a.getPixel(k.x,k.y)))}static _sampleRGB(a,c,d,b,g){c|=0;d|=0;let p=[{x:c,y:d}];for(let k=.25;1.001>k;k+=.25)Array.prototype.push.apply(p,[{x:~~(c+k*b),y:d},{x:~~(c-k*b),y:d},{x:c,y:~~(d+k*g)},{x:c,y:~~(d-k*g)},{x:~~(c+.7*k*b),y:~~(d+.7*k*g)},{x:~~(c+.7*k*b),y:~~(d-.7*k*g)},{x:~~(c-.7*k*b),y:~~(d+.7*k*g)},{x:~~(c-.7*k*b),y:~~(d-
.7*k*g)}]);return Ok(p.map(k=>Nd.createFromInt(a.getPixel(k.x,k.y))))}_paintToColorStrokeBuffer(a,c,d,b,g,p){let k=this._strokeBuffer.data,e=c.getWidth(),l=c.getHeight(),m=this._strokeBuffer.width-e,h=b-e;a=a.left+a.top*b;b=this._strokeBuffer.offsetOfPixel(c.left,c.top);this._strokedRegion.union(c);for(c=0;c<l;c++,a+=h,b+=m)for(let u=0;u<e;u++,a++,b++){var n=d[a]*g/255|0;if(0<n){let v=k[b];var r=v>>>24;r=n+r-n*r/255|0;n=255-(255*n/r|0);k[b]=r<<24|(p>>16&255)+((v>>16&255)*n-(p>>16&255)*n)/255<<16|
(p>>8&255)+((v>>8&255)*n-(p>>8&255)*n)/255<<8|(255&p)+((255&v)*n-(255&p)*n)/255}}}_paintToGreyscaleStrokeBuffer(a,c,d,b,g,p){let k=this._strokeBuffer.data;this._strokedRegion.union(c);for(let m=c.top,h=a.top;m<c.bottom;m++,h++){let n=a.left+h*b,r=this._strokeBuffer.offsetOfPixel(c.left,m);for(let u=c.left;u<c.right;u++,n++,r++){var e=d[n]*g/255|0;if(0>=e)continue;let v=k[r];var l=v>>8;l=e+l-e*l/255|0;0<l&&(e=255-(255*e/l|0),k[r]=l<<8|p+((255&v)*e-p*e)/255)}}}beginStroke(){this._previousSamples=null}paintDab(a,
c,d,b,g,p,k){var e,l;a=Math.max(1,p.alpha/4);var m=(c.left+c.right)/2,h=(c.top+c.bottom)/2,n=Math.max(1,Math.min(64,c.getWidth()*Co)),r=Math.max(1,Math.min(64,c.getHeight()*Co));if(d instanceof gb){null==this._previousSamples&&(this._previousSamples=Array(50),this._previousSamples.fill(Wf._sampleGrey(d,m,h,n,r)));let v=Nk(this._previousSamples);var u=v;k=u=v=u*(1-(e=b.resat*b.resat))+(255&k)*e;d=Wf._sampleGrey(d,m,h,n,r);v=k*(1-(l=b.bleed))+d*l;this._previousSamples.push(v);this._previousSamples.shift();
this._paintToGreyscaleStrokeBuffer(g,c,p.brush,p.width,a,Math.round(u))}else null==this._previousSamples&&(this._previousSamples=Array(50),this._previousSamples.fill(Wf._sampleRGB(d,m,h,n,r))),l=Ok(this._previousSamples),l.mixWith(Nd.createFromInt(k),b.resat*b.resat),k=l.toInt(),l.mixWith(Wf._sampleRGB(d,m,h,n,r),b.bleed),this._previousSamples.push(l),this._previousSamples.shift(),this._paintToColorStrokeBuffer(g,c,p.brush,p.width,a,k)}constructor(a,c){super(a,c);this.wantsOutputAsInput=!0}}class ap extends Ik{_accumulatePaintFromMask(a,
c,d,b){let g=this._brushBuffer.data,p=a.data,k=d.getWidth(),e=d.getHeight();c=c.left+c.top*this._brushBuffer.width;d=a.offsetOfPixel(d.left,d.top);let l=this._brushBuffer.width-k;a=a.width-k;if(!(0>=b))for(let h=0;h<e;h++,c+=l,d+=a)for(let n=0;n<k;n++,c++,d++){let r=p[d],u=g[c];var m=u>>8;m=b+m-b*m/255|0;let v=255-(255*b/m|0);g[c]=m<<8|r+((255&u)*v-r*v)/255}}_resaturateBrushWithGrey(a,c,d){if(!(0>=c)){var b=this._brushBuffer.data,g=a.getWidth(),p=a.getHeight();a=a.left+a.top*this._brushBuffer.width;
var k=this._brushBuffer.width-g;for(let l=0;l<p;l++,a+=k)for(let m=0;m<g;m++,a++){let h=b[a];var e=h>>8;e=c+e-c*e/255|0;let n=255-(255*c/e|0);b[a]=e<<8|d+((255&h)*n-d*n)/255}}}_paintToGreyscaleStrokeBuffer(a,c,d,b,g){let p=this._strokeBuffer.data,k=this._brushBuffer.data,e=a.data;this._strokedRegion.union(d);for(let m=d.top,h=c.top;m<d.bottom;m++,h++){let n=this._brushBuffer.offsetOfPixel(c.left,h),r=this._strokeBuffer.offsetOfPixel(d.left,m),u=a.offsetOfPixel(d.left,m);for(let v=d.left;v<d.right;v++,
n++,u++,r++){let x=k[n];var l=(x>>8)*b[n]*g/65025|0;0<l&&(l=255-l,p[r]=65280|(255&x)+(e[u]*l-(255&x)*l)/255)}}}_accumulatePaintFromImage(a,c,d,b){let g=this._brushBuffer.data,p=a.data,k=d.getWidth(),e=d.getHeight();c=c.left+c.top*this._brushBuffer.width;d=a.offsetOfPixel(d.left,d.top);let l=this._brushBuffer.width-k;a=(a.width-k)*I.BYTES_PER_PIXEL;for(let n=0;n<e;n++,c+=l,d+=a)for(let r=0;r<k;r++,c++,d+=I.BYTES_PER_PIXEL){var m=p[d+I.ALPHA_BYTE_OFFSET]*b/255|0;if(0<m){let u=g[c];var h=u>>>24;h=m+
h-m*h/255|0;m=255-(255*m/h|0);let v=p[d+I.RED_BYTE_OFFSET],x=p[d+I.GREEN_BYTE_OFFSET],C=p[d+I.BLUE_BYTE_OFFSET];g[c]=h<<24|v+((u>>16&255)*m-v*m)/255<<16|x+((u>>8&255)*m-x*m)/255<<8|C+((255&u)*m-C*m)/255}}}_resaturateBrushWithColor(a,c,d){if(!(0>=c)){var b=this._brushBuffer.data,g=a.getWidth(),p=a.getHeight();a=a.left+a.top*this._brushBuffer.width;var k=this._brushBuffer.width-g;for(let l=0;l<p;l++,a+=k)for(let m=0;m<g;m++,a++){let h=b[a];var e=h>>>24;e=c+e-c*e/255|0;let n=255-(255*c/e|0);b[a]=e<<
24|(d>>>16&255)+((h>>>16&255)*n-(d>>>16&255)*n)/255<<16|(d>>>8&255)+((h>>>8&255)*n-(d>>>8&255)*n)/255<<8|(255&d)+((255&h)*n-(255&d)*n)/255}}}_paintToColorStrokeBuffer(a,c,d,b,g){let p=this._strokeBuffer.data,k=this._brushBuffer.data,e=a.data;this._strokedRegion.union(d);for(let h=d.top,n=c.top;h<d.bottom;h++,n++){let r=this._brushBuffer.offsetOfPixel(c.left,n),u=this._strokeBuffer.offsetOfPixel(d.left,h),v=a.offsetOfPixel(d.left,h);for(let x=d.left;x<d.right;x++,r++,v+=I.BYTES_PER_PIXEL,u++){let C=
k[r];var l=(C>>>24)*b[r]*g/65025|0;if(0<l){var m=e[v+I.ALPHA_BYTE_OFFSET];m=l+m-l*m/255|0;l=255-(255*l/m|0);p[u]=m<<24|(C>>16&255)+(e[v+I.RED_BYTE_OFFSET]*l-(C>>16&255)*l)/255<<16|(C>>8&255)+(e[v+I.GREEN_BYTE_OFFSET]*l-(C>>8&255)*l)/255<<8|(255&C)+(e[v+I.BLUE_BYTE_OFFSET]*l-(255&C)*l)/255}}}}paintDab(a,c,d,b,g,p,k){a instanceof I?null==this._brushBuffer?(this._brushBuffer=new gb(p.width,p.height,32),this._accumulatePaintFromImage(d,g,c,255)):(this._resaturateBrushWithColor(g,~~(0>=b.resat?0:Math.max(1,
b.resat*b.resat*255)),16777215&k),this._paintToColorStrokeBuffer(a,g,c,p.brush,p.alpha),this._accumulatePaintFromImage(d,g,c,~~(255*b.bleed))):null==this._brushBuffer?(this._brushBuffer=new gb(p.width,p.height,16),this._accumulatePaintFromMask(d,g,c,255)):(this._resaturateBrushWithGrey(g,~~(0>=b.resat?0:Math.max(1,b.resat*b.resat*255)),255&k),this._paintToGreyscaleStrokeBuffer(a,g,c,p.brush,p.alpha),this._accumulatePaintFromMask(d,g,c,~~(255*b.bleed)))}endStroke(){this._brushBuffer=null}constructor(a,
c){super(a,c);this.wantsOutputAsInput=!0}}class $o extends Ik{_sampleFromMask(a,c,d,b){let g=this._brushBuffer.data,p=c.getWidth(),k=c.getHeight(),e=this._brushBuffer.offsetOfPixel(c.left,c.top);d=a.offsetOfPixel(d.left,d.top);let l=this._brushBuffer.width-p,m=a.width-p,h=255-b;if(255!=b){for(let n=0;n<k;n++,e+=l,d+=m)for(let r=0;r<p;r++,e++,d++){let u=a.data[d],v=g[e],x=(u*h+(255&v)*b)/255,C=(255*h+(v>>8)*b)/255<<8|x;C==v&&(u>x?C++:u<x&&C--);g[e]=C}Pk(this._brushBuffer,c)}}_paintToMask(a,c,d,b){let g=
c.getWidth(),p=c.getHeight();c=this._brushBuffer.offsetOfPixel(c.left,c.top);d=a.offsetOfPixel(d.left,d.top);let k=this._brushBuffer.width-g,e=a.width-g;a=a.data;let l=this._brushBuffer.data;for(let m=0;m<p;m++,d+=e,c+=k)for(let h=0;h<g;h++,c++,d++){let n=l[c],r=255&n;0<((n>>8)*b[c]/255|0)&&(a[d]=r)}}_sampleFromImage(a,c,d,b){let g=this._brushBuffer.data,p=c.getWidth(),k=c.getHeight(),e=this._brushBuffer.offsetOfPixel(c.left,c.top);d=a.offsetOfPixel(d.left,d.top);let l=this._brushBuffer.width-p,m=
(a.width-p)*I.BYTES_PER_PIXEL,h=255-b;if(255!=b){for(let r=0;r<k;r++,e+=l,d+=m)for(let u=0;u<p;u++,e++,d+=I.BYTES_PER_PIXEL){let v=a.data[d+I.RED_BYTE_OFFSET],x=a.data[d+I.GREEN_BYTE_OFFSET],C=a.data[d+I.BLUE_BYTE_OFFSET];var n=g[e];let J=(a.data[d+I.ALPHA_BYTE_OFFSET]*h+(n>>24&255)*b)/255<<24&4278190080|(v*h+(n>>16&255)*b)/255<<16&16711680|(x*h+(n>>8&255)*b)/255<<8&65280|(C*h+(255&n)*b)/255&255;if(J==n){n=(16711680&J)>>16;let H=(65280&J)>>8,G=255&J;v>n?J+=65536:v<n&&(J-=65536);x>H?J+=256:x<H&&(J-=
256);C>G?J+=1:C<G&&--J}g[e]=J}Pk(this._brushBuffer,c)}}_paintToImage(a,c,d,b){let g=c.getWidth(),p=c.getHeight();c=this._brushBuffer.offsetOfPixel(c.left,c.top);d=a.offsetOfPixel(d.left,d.top);let k=this._brushBuffer.width-g,e=(a.width-g)*I.BYTES_PER_PIXEL;a=a.data;let l=this._brushBuffer.data;for(let m=0;m<p;m++,d+=e,c+=k)for(let h=0;h<g;h++,c++,d+=I.BYTES_PER_PIXEL){let n=l[c];0<((n>>>24)*b[c]/255|0)&&(a[d+I.RED_BYTE_OFFSET]=n>>16&255,a[d+I.GREEN_BYTE_OFFSET]=n>>8&255,a[d+I.BLUE_BYTE_OFFSET]=255&
n,a[d+I.ALPHA_BYTE_OFFSET]=n>>24&255)}}paintDab(a,c,d,b,g,p,k){a instanceof I?null==this._brushBuffer?(this._brushBuffer=new gb(p.width,p.height,32),this._sampleFromImage(d,g,c,0)):(this._sampleFromImage(d,g,c,p.alpha),this._paintToImage(a,g,c,p.brush)):null==this._brushBuffer?(this._brushBuffer=new gb(p.width,p.height,16),this._sampleFromMask(d,g,c,0)):(this._sampleFromMask(d,g,c,p.alpha),this._paintToMask(a,g,c,p.brush))}mergeOntoImage(a,c,d){}mergeOntoMask(a,c,d){}beginStroke(){this._brushBuffer=
null}endStroke(){this._brushBuffer=null}constructor(a,c){super(a,c);this._brushBuffer=null;this.noMergePhase=this.wantsOutputAsInput=!0}}Vc.prototype=Object.create(X(ic).prototype);Vc.prototype.constructor=Vc;Vc.prototype.getBounds=function(){return new Ia(0,0,this.width,this.height)};Vc.prototype.isPointWithin=function(a,c){return 0<=a&&0<=c&&a<this.width&&c<this.height};Vc.EDITING_MODE_IMAGE=0;Vc.EDITING_MODE_MASK=1;zb.prototype.readChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos++]):
(this.eof=!0,-1)};zb.prototype.readByte=function(){return this.pos<this.end?this.data[this.pos++]:(this.eof=!0,-1)};zb.prototype.readU8=zb.prototype.readByte;zb.prototype.readS8=function(){var a;return 128&(a=this.readByte())?4294967040|a:a};zb.prototype.unreadChar=function(a){this.pos--};zb.prototype.peekChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos]):(this.eof=!0,-1)};zb.prototype.readString=function(a){var c,d=Array(a);for(c=0;c<a;c++)d[c]=this.readChar();return d.join("")};
zb.prototype.readS16=function(){var a;return 32768&(a=this.readByte()<<8|this.readByte())?4294901760|a:a};zb.prototype.readU16BE=function(){return this.readByte()<<8|this.readByte()};zb.prototype.readU16LE=function(){var a=this.readByte();return this.readByte()<<8|a};zb.prototype.readU32BE=function(){return(this.readByte()<<24|this.readByte()<<16|this.readByte()<<8|this.readByte())>>>0};zb.prototype.readU32LE=function(){var a=this.readByte(),c=this.readByte(),d=this.readByte();return(this.readByte()<<
24|d<<16|c<<8|a)>>>0};zb.prototype.readBytes=function(a){var c=this.data.subarray(this.pos,this.pos+a);return this.pos+=a,this.pos>this.end&&(this.eof=!0),c};zb.prototype.skip=function(a){this.pos+=a;this.pos>this.end&&(this.eof=!0)};zb.prototype.seek=function(a){this.pos=a};zb.prototype.writeBytes=function(a){for(var c=0;c<a.length;c++)this.data[this.pos++]=a[c]};zb.prototype.writeByte=function(a){this.data[this.pos++]=a};zb.prototype.writeU8=zb.prototype.writeByte;zb.prototype.writeU16LE=function(a){this.data[this.pos++]=
a;this.data[this.pos++]=a>>8};zb.prototype.writeU16BE=function(a){this.data[this.pos++]=a>>8;this.data[this.pos++]=a};zb.prototype.writeU32BE=function(a){this.data[this.pos++]=a>>24;this.data[this.pos++]=a>>16;this.data[this.pos++]=a>>8;this.data[this.pos++]=a};zb.prototype.writeU32LE=function(a){this.data[this.pos++]=a;this.data[this.pos++]=a>>8;this.data[this.pos++]=a>>16;this.data[this.pos++]=a>>24};zb.prototype.writeDoubleBE=function(a){a=new Uint8Array((new Float64Array([a])).buffer);for(var c=
a.length-1;0<=c;c--)this.writeByte(a[c])};zb.prototype.writeFloatBE=function(a){a=new Uint8Array((new Float32Array([a])).buffer);for(var c=a.length-1;0<=c;c--)this.writeByte(a[c])};zb.prototype.writeString=function(a){for(var c=0;c<a.length;c++)this.data[this.pos++]=a.charCodeAt(c)};zb.prototype.writeUnsignedIntBE=function(a,c){switch(void 0===c&&(c=this.measureUnsignedInt(a)),c){case 5:this.writeU8(Math.floor(a/4294967296));case 4:this.writeU8(a>>24);case 3:this.writeU8(a>>16);case 2:this.writeU8(a>>
8);case 1:this.writeU8(a);break;default:throw"Bad UINT size "+c;}};zb.prototype.measureUnsignedInt=function(a){return 256>a?1:65536>a?2:16777216>a?3:4294967296>a?4:5};zb.prototype.getAsDataArray=function(){if(this.pos<this.data.byteLength)return this.data.subarray(0,this.pos);if(this.pos==this.data.byteLength)return this.data;throw"ArrayDataStream's pos lies beyond end of buffer";};zb.prototype.EOF=-1;var xi={},ab={},Vs="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=
typeof Int32Array;ab.assign=function(a){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if("object"!=typeof d)throw TypeError(d+"must be non-object");for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])}}return a};ab.shrinkBuf=function(a,c){return a.length===c?a:a.subarray?a.subarray(0,c):(a.length=c,a)};var Ws={arraySet:function(a,c,d,b,g){if(c.subarray&&a.subarray)a.set(c.subarray(d,d+b),g);else for(var p=0;p<b;p++)a[g+p]=c[d+p]},flattenChunks:function(a){var c,
d;var b=c=0;for(d=a.length;c<d;c++)b+=a[c].length;c=0;var g=new Uint8Array(b);b=0;for(d=a.length;c<d;c++){var p=a[c];g.set(p,b);b+=p.length}return g}},Xs={arraySet:function(a,c,d,b,g){for(var p=0;p<b;p++)a[g+p]=c[d+p]},flattenChunks:function(a){return[].concat.apply([],a)}};ab.setTyped=function(a){a?(ab.Buf8=Uint8Array,ab.Buf16=Uint16Array,ab.Buf32=Int32Array,ab.assign(ab,Ws)):(ab.Buf8=Array,ab.Buf16=Array,ab.Buf32=Array,ab.assign(ab,Xs))};ab.setTyped(Vs);var Ys=ab.assign,Gg={};ie(Gg,"Deflate",function(){return Do},
function(a){return Do=a});ie(Gg,"deflate",function(){return Eo},function(a){return Eo=a});ie(Gg,"deflateRaw",function(){return Fo},function(a){return Fo=a});ie(Gg,"gzip",function(){return Go},function(a){return Go=a});var ni=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Mg=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Zs=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ho=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ge=Array(576);gf(ge);var Hg=Array(60);gf(Hg);var Xf=
Array(512);gf(Xf);var Zf=Array(256);gf(Zf);var oi=Array(29);gf(oi);var Ng=Array(30);gf(Ng);var Io=!1;var dp=function(a){if(!Io){var c,d,b=Array(16);for(c=d=0;28>d;d++){var g=0;for(oi[d]=c;g<1<<ni[d];g++)Zf[c++]=d}Zf[c-1]=d;for(d=c=0;16>d;d++)for(g=0,Ng[d]=c;g<1<<Mg[d];g++)Xf[c++]=d;for(c>>=7;30>d;d++)for(g=0,Ng[d]=c<<7;g<1<<Mg[d]-7;g++)Xf[256+c++]=d;for(g=0;15>=g;g++)b[g]=0;for(g=0;143>=g;)ge[2*g+1]=8,g++,b[8]++;for(;255>=g;)ge[2*g+1]=9,g++,b[9]++;for(;279>=g;)ge[2*g+1]=7,g++,b[7]++;for(;287>=g;)ge[2*
g+1]=8,g++,b[8]++;Tk(ge,287,b);for(g=0;30>g;g++)Hg[2*g+1]=5,Hg[2*g]=Sk(g,5);Cl=new ki(ge,ni,257,286,15);Dl=new ki(Hg,Mg,0,30,15);El=new ki([],Zs,0,19,7);Io=!0}a.l_desc=new li(a.dyn_ltree,Cl);a.d_desc=new li(a.dyn_dtree,Dl);a.bl_desc=new li(a.bl_tree,El);a.bi_buf=0;a.bi_valid=0;Uk(a)};var bp=function(a,c,d,b){var g,p,k=0;0<a.level?(2===a.strm.data_type&&(a.strm.data_type=function(e){var l,m=4093624447;for(l=0;31>=l;l++,m>>>=1)if(1&m&&0!==e.dyn_ltree[2*l])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||
0!==e.dyn_ltree[26])return 1;for(l=32;256>l;l++)if(0!==e.dyn_ltree[2*l])return 1;return 0}(a)),pi(a,a.l_desc),pi(a,a.d_desc),k=function(e){var l;Yk(e,e.dyn_ltree,e.l_desc.max_code);Yk(e,e.dyn_dtree,e.d_desc.max_code);pi(e,e.bl_desc);for(l=18;3<=l&&0===e.bl_tree[2*Ho[l]+1];l--);return e.opt_len+=3*(l+1)+14,l}(a),g=a.opt_len+3+7>>>3,(p=a.static_len+3+7>>>3)<=g&&(g=p)):g=p=d+5;d+4<=g&&-1!==c?$k(a,c,d,b):4===a.strategy||p===g?(Wc(a,2+(b?1:0),3),Xk(a,ge,Hg)):(Wc(a,4+(b?1:0),3),function(e,l,m,h){var n;
Wc(e,l-257,5);Wc(e,m-1,5);Wc(e,h-4,4);for(n=0;n<h;n++)Wc(e,e.bl_tree[2*Ho[n]+1],3);Zk(e,e.dyn_ltree,l-1);Zk(e,e.dyn_dtree,m-1)}(a,a.l_desc.max_code+1,a.d_desc.max_code+1,k+1),Xk(a,a.dyn_ltree,a.dyn_dtree));Uk(a);b&&Vk(a)};var me=function(a,c,d){return a.pending_buf[a.d_buf+2*a.last_lit]=c>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&c,a.pending_buf[a.l_buf+a.last_lit]=255&d,a.last_lit++,0===c?a.dyn_ltree[2*d]++:(a.matches++,c--,a.dyn_ltree[2*(Zf[d]+256+1)]++,a.dyn_dtree[2*Rk(c)]++),a.last_lit===
a.lit_bufsize-1};var $s=function(a){Wc(a,2,3);Gd(a,256,ge);16===a.bi_valid?(Yf(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)};var hf={};hf=function(a,c,d,b){var g=65535&a|0;a=a>>>16&65535|0;for(var p;0!==d;){p=2E3<d?2E3:d;d-=p;do a=a+(g=g+c[b++]|0)|0;while(--p);g%=65521;a%=65521}return g|a<<16|0};var sc={},at=function(){for(var a,c=[],d=0;256>d;d++){a=d;for(var b=0;8>b;b++)a=1&a?3988292384^a>>>1:a>>>1;c[d]=a}return c}();sc=
function(a,c,d,b){d=b+d;for(a^=-1;b<d;b++)a=a>>>8^at[(a^c[b])&255];return-1^a};var Ee={};Ee={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var ag=[new Hd(0,0,0,0,function(a,c){var d=65535;for(65535>a.pending_buf_size-5&&(d=a.pending_buf_size-5);;){if(1>=a.lookahead){if(Fe(a),0===a.lookahead&&0===c)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead;a.lookahead=0;var b=
a.block_start+d;if((0===a.strstart||a.strstart>=b)&&(a.lookahead=a.strstart-b,a.strstart=b,Ac(a,!1),0===a.strm.avail_out)||a.strstart-a.block_start>=a.w_size-262&&(Ac(a,!1),0===a.strm.avail_out))return 1}return(a.insert=0,4===c)?(Ac(a,!0),0===a.strm.avail_out)?3:4:(a.strstart>a.block_start&&(Ac(a,!1),a.strm.avail_out),1)}),new Hd(4,4,8,4,qi),new Hd(4,5,16,8,qi),new Hd(4,6,32,32,qi),new Hd(4,4,16,16,jf),new Hd(8,16,32,32,jf),new Hd(8,16,128,128,jf),new Hd(8,32,128,256,jf),new Hd(32,128,258,1024,jf),
new Hd(32,258,258,4096,jf)];var ep=function(a,c){return a&&a.state&&2===a.state.wrap?(a.state.gzhead=c,0):-2};var bt=function(a,c){if(!a||!a.state||5<c||0>c)return a?je(a,-2):-2;if(b=a.state,!a.output||!a.input&&0!==a.avail_in||666===b.status&&4!==c)return je(a,0===a.avail_out?-5:-2);if(b.strm=a,d=b.last_flush,b.last_flush=c,42===b.status)if(2===b.wrap)a.adler=0,Jb(b,31),Jb(b,139),Jb(b,8),b.gzhead?(Jb(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?
16:0)),Jb(b,255&b.gzhead.time),Jb(b,b.gzhead.time>>8&255),Jb(b,b.gzhead.time>>16&255),Jb(b,b.gzhead.time>>24&255),Jb(b,9===b.level?2:2<=b.strategy||2>b.level?4:0),Jb(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(Jb(b,255&b.gzhead.extra.length),Jb(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(a.adler=sc(a.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(Jb(b,0),Jb(b,0),Jb(b,0),Jb(b,0),Jb(b,0),Jb(b,9===b.level?2:2<=b.strategy||2>b.level?4:0),Jb(b,3),b.status=113);else{var d,
b;var g=8+(b.w_bits-8<<4)<<8;g|=(2<=b.strategy||2>b.level?0:6>b.level?1:6===b.level?2:3)<<6;0!==b.strstart&&(g|=32);b.status=113;$f(b,g+(31-g%31));0!==b.strstart&&($f(b,a.adler>>>16),$f(b,65535&a.adler));a.adler=1}if(69===b.status)if(b.gzhead.extra){for(g=b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>g&&(a.adler=sc(a.adler,b.pending_buf,b.pending-g,g)),le(a),g=b.pending,b.pending!==b.pending_buf_size));)Jb(b,255&b.gzhead.extra[b.gzindex]),
b.gzindex++;b.gzhead.hcrc&&b.pending>g&&(a.adler=sc(a.adler,b.pending_buf,b.pending-g,g));b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(73===b.status)if(b.gzhead.name){g=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>g&&(a.adler=sc(a.adler,b.pending_buf,b.pending-g,g)),le(a),g=b.pending,b.pending===b.pending_buf_size)){var p=1;break}p=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0;Jb(b,p)}while(0!==p);b.gzhead.hcrc&&
b.pending>g&&(a.adler=sc(a.adler,b.pending_buf,b.pending-g,g));0===p&&(b.gzindex=0,b.status=91)}else b.status=91;if(91===b.status)if(b.gzhead.comment){g=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>g&&(a.adler=sc(a.adler,b.pending_buf,b.pending-g,g)),le(a),g=b.pending,b.pending===b.pending_buf_size)){p=1;break}p=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0;Jb(b,p)}while(0!==p);b.gzhead.hcrc&&b.pending>g&&(a.adler=sc(a.adler,b.pending_buf,
b.pending-g,g));0===p&&(b.status=103)}else b.status=103;if(103===b.status&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&le(a),b.pending+2<=b.pending_buf_size&&(Jb(b,255&a.adler),Jb(b,a.adler>>8&255),a.adler=0,b.status=113)):b.status=113),0!==b.pending){if(le(a),0===a.avail_out)return b.last_flush=-1,0}else if(0===a.avail_in&&(c<<1)-(4<c?9:0)<=(d<<1)-(4<d?9:0)&&4!==c)return je(a,-5);if(666===b.status&&0!==a.avail_in)return je(a,-5);if(0!==a.avail_in||0!==b.lookahead||0!==c&&666!==b.status){d=2===
b.strategy?function(k,e){for(var l;;){if(0===k.lookahead&&(Fe(k),0===k.lookahead)){if(0===e)return 1;break}if(k.match_length=0,l=me(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++,l&&(Ac(k,!1),0===k.strm.avail_out))return 1}return(k.insert=0,4===e)?(Ac(k,!0),0===k.strm.avail_out)?3:4:k.last_lit&&(Ac(k,!1),0===k.strm.avail_out)?1:2}(b,c):3===b.strategy?function(k,e){for(var l,m,h,n,r=k.window;;){if(258>=k.lookahead){if(Fe(k),258>=k.lookahead&&0===e)return 1;if(0===k.lookahead)break}if(k.match_length=
0,3<=k.lookahead&&0<k.strstart&&(m=r[h=k.strstart-1])===r[++h]&&m===r[++h]&&m===r[++h]){for(n=k.strstart+258;m===r[++h]&&m===r[++h]&&m===r[++h]&&m===r[++h]&&m===r[++h]&&m===r[++h]&&m===r[++h]&&m===r[++h]&&h<n;);k.match_length=258-(n-h);k.match_length>k.lookahead&&(k.match_length=k.lookahead)}if(3<=k.match_length?(l=me(k,1,k.match_length-3),k.lookahead-=k.match_length,k.strstart+=k.match_length,k.match_length=0):(l=me(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++),l&&(Ac(k,!1),0===k.strm.avail_out))return 1}return(k.insert=
0,4===e)?(Ac(k,!0),0===k.strm.avail_out)?3:4:k.last_lit&&(Ac(k,!1),0===k.strm.avail_out)?1:2}(b,c):ag[b.level].func(b,c);if((3===d||4===d)&&(b.status=666),1===d||3===d)return 0===a.avail_out&&(b.last_flush=-1),0;if(2===d&&(1===c?$s(b):5!==c&&($k(b,0,0,!1),3===c&&(ke(b.head),0===b.lookahead&&(b.strstart=0,b.block_start=0,b.insert=0))),le(a),0===a.avail_out))return b.last_flush=-1,0}return 4!==c?0:0>=b.wrap?1:(2===b.wrap?(Jb(b,255&a.adler),Jb(b,a.adler>>8&255),Jb(b,a.adler>>16&255),Jb(b,a.adler>>24&
255),Jb(b,255&a.total_in),Jb(b,a.total_in>>8&255),Jb(b,a.total_in>>16&255),Jb(b,a.total_in>>24&255)):($f(b,a.adler>>>16),$f(b,65535&a.adler)),le(a),0<b.wrap&&(b.wrap=-b.wrap),0!==b.pending?0:1)};var ct=function(a){var c;return a&&a.state?42!==(c=a.state.status)&&69!==c&&73!==c&&91!==c&&103!==c&&113!==c&&666!==c?je(a,-2):(a.state=null,113===c?je(a,-3):0):-2};var fp=function(a,c){var d,b,g;var p=c.length;if(!a||!a.state||2===(b=(d=a.state).wrap)||1===b&&42!==d.status||d.lookahead)return-2;1===b&&(a.adler=
hf(a.adler,c,p,0));d.wrap=0;p>=d.w_size&&(0===b&&(ke(d.head),d.strstart=0,d.block_start=0,d.insert=0),g=new ab.Buf8(d.w_size),ab.arraySet(g,c,p-d.w_size,d.w_size,0),c=g,p=d.w_size);g=a.avail_in;var k=a.next_in;var e=a.input;a.avail_in=p;a.next_in=0;a.input=c;for(Fe(d);3<=d.lookahead;){c=d.strstart;p=d.lookahead-2;do d.ins_h=(d.ins_h<<d.hash_shift^d.window[c+3-1])&d.hash_mask,d.prev[c&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=c,c++;while(--p);d.strstart=c;d.lookahead=2;Fe(d)}return d.strstart+=d.lookahead,
d.block_start=d.strstart,d.insert=d.lookahead,d.lookahead=0,d.match_length=d.prev_length=2,d.match_available=0,a.next_in=k,a.input=e,a.avail_in=g,d.wrap=b,0};var dl=!0,cl=!0;try{String.fromCharCode.apply(null,[0])}catch(a){dl=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){cl=!1}for(var Ig=new ab.Buf8(256),Ce=0;256>Ce;Ce++)Ig[Ce]=252<=Ce?6:248<=Ce?5:240<=Ce?4:224<=Ce?3:192<=Ce?2:1;Ig[254]=Ig[254]=1;var si=function(a){var c,d,b,g=a.length,p=0;for(b=0;b<g;b++)55296==(64512&(c=a.charCodeAt(b)))&&
b+1<g&&56320==(64512&(d=a.charCodeAt(b+1)))&&(c=65536+(c-55296<<10)+(d-56320),b++),p+=128>c?1:2048>c?2:65536>c?3:4;var k=0;var e=new ab.Buf8(p);for(b=0;k<p;b++)55296==(64512&(c=a.charCodeAt(b)))&&b+1<g&&56320==(64512&(d=a.charCodeAt(b+1)))&&(c=65536+(c-55296<<10)+(d-56320),b++),128>c?e[k++]=c:(2048>c?e[k++]=192|c>>>6:(65536>c?e[k++]=224|c>>>12:(e[k++]=240|c>>>18,e[k++]=128|c>>>12&63),e[k++]=128|c>>>6&63),e[k++]=128|63&c);return e};var dt=function(a){return bl(a,a.length)};var et=function(a){for(var c=
new ab.Buf8(a.length),d=0,b=c.length;d<b;d++)c[d]=a.charCodeAt(d);return c};var ft=function(a,c){var d,b,g,p=c||a.length,k=Array(2*p);for(c=d=0;c<p;)if(128>(b=a[c++]))k[d++]=b;else if(4<(g=Ig[b]))k[d++]=65533,c+=g-1;else{for(b&=2===g?31:3===g?15:7;1<g&&c<p;)b=b<<6|63&a[c++],g--;1<g?k[d++]=65533:65536>b?k[d++]=b:(b-=65536,k[d++]=55296|b>>10&1023,k[d++]=56320|1023&b)}return bl(k,d)};var gt=function(a,c){var d;(c=c||a.length)>a.length&&(c=a.length);for(d=c-1;0<=d&&128==(192&a[d]);)d--;return 0>d||0===
d?c:d+Ig[a[d]]>c?d:c};var ri={};ri=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0};var el=Object.prototype.toString;Ge.prototype.push=function(a,c){var d,b=this.strm,g=this.options.chunkSize;if(this.ended)return!1;c=c===~~c?c:!0===c?4:0;"string"==typeof a?b.input=si(a):"[object ArrayBuffer]"===el.call(a)?b.input=new Uint8Array(a):b.input=a;b.next_in=0;b.avail_in=
b.input.length;do{if(0===b.avail_out&&(b.output=new ab.Buf8(g),b.next_out=0,b.avail_out=g),1!==(d=bt(b,c))&&0!==d)return this.onEnd(d),this.ended=!0,!1;(0===b.avail_out||0===b.avail_in&&(4===c||2===c))&&("string"===this.options.to?this.onData(dt(ab.shrinkBuf(b.output,b.next_out))):this.onData(ab.shrinkBuf(b.output,b.next_out)))}while((0<b.avail_in||0===b.avail_out)&&1!==d);return 4===c?(d=ct(this.strm),this.onEnd(d),this.ended=!0,0===d):(2===c&&(this.onEnd(0),b.avail_out=0),!0)};Ge.prototype.onData=
function(a){this.chunks.push(a)};Ge.prototype.onEnd=function(a){0===a&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ab.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var Do=Ge;var Eo=ti;var Fo=function(a,c){return(c=c||{}).raw=!0,ti(a,c)};var Go=function(a,c){return(c=c||{}).gzip=!0,ti(a,c)};var Jg={};ie(Jg,"Inflate",function(){return Jo},function(a){return Jo=a});ie(Jg,"inflate",function(){return Ko},function(a){return Ko=a});ie(Jg,"inflateRaw",
function(){return Lo},function(a){return Lo=a});ie(Jg,"ungzip",function(){return Mo},function(a){return Mo=a});var No={};No=function(a,c){var d,b,g,p;var k=a.state;var e=a.next_in;var l=a.input;var m=e+(a.avail_in-5);var h=a.next_out;var n=a.output;c=h-(c-a.avail_out);var r=h+(a.avail_out-257);var u=k.dmax;var v=k.wsize;var x=k.whave;var C=k.wnext;var J=k.window;var H=k.hold;var G=k.bits;var L=k.lencode;var U=k.distcode;var T=(1<<k.lenbits)-1;var Y=(1<<k.distbits)-1;a:do for(15>G&&(H+=l[e++]<<G,G+=
8,H+=l[e++]<<G,G+=8),d=L[H&T];;){if(H>>>=b=d>>>24,G-=b,0==(b=d>>>16&255))n[h++]=65535&d;else if(16&b){var ea=65535&d;(b&=15)&&(G<b&&(H+=l[e++]<<G,G+=8),ea+=H&(1<<b)-1,H>>>=b,G-=b);15>G&&(H+=l[e++]<<G,G+=8,H+=l[e++]<<G,G+=8);for(d=U[H&Y];;){if(H>>>=b=d>>>24,G-=b,16&(b=d>>>16&255)){if(g=65535&d,G<(b&=15)&&(H+=l[e++]<<G,(G+=8)<b&&(H+=l[e++]<<G,G+=8)),(g+=H&(1<<b)-1)>u){a.msg="invalid distance too far back";k.mode=30;break a}if(H>>>=b,G-=b,g>(b=h-c)){if((b=g-b)>x&&k.sane){a.msg="invalid distance too far back";
k.mode=30;break a}if(d=0,p=J,0===C){if(d+=v-b,b<ea){ea-=b;do n[h++]=J[d++];while(--b);d=h-g;p=n}}else if(C<b){if(d+=v+C-b,(b-=C)<ea){ea-=b;do n[h++]=J[d++];while(--b);if(d=0,C<ea){ea-=b=C;do n[h++]=J[d++];while(--b);d=h-g;p=n}}}else if(d+=C-b,b<ea){ea-=b;do n[h++]=J[d++];while(--b);d=h-g;p=n}for(;2<ea;)n[h++]=p[d++],n[h++]=p[d++],n[h++]=p[d++],ea-=3;ea&&(n[h++]=p[d++],1<ea&&(n[h++]=p[d++]))}else{d=h-g;do n[h++]=n[d++],n[h++]=n[d++],n[h++]=n[d++],ea-=3;while(2<ea);ea&&(n[h++]=n[d++],1<ea&&(n[h++]=
n[d++]))}}else if(0==(64&b)){d=U[(65535&d)+(H&(1<<b)-1)];continue}else{a.msg="invalid distance code";k.mode=30;break a}break}}else if(0==(64&b)){d=L[(65535&d)+(H&(1<<b)-1)];continue}else{32&b?k.mode=12:(a.msg="invalid literal/length code",k.mode=30);break a}break}while(e<m&&h<r);e-=ea=G>>3;G-=ea<<3;a.next_in=e;a.next_out=h;a.avail_in=e<m?5+(m-e):5-(e-m);a.avail_out=h<r?257+(r-h):257-(h-r);k.hold=H&(1<<G)-1;k.bits=G};var Uf={},ht=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,
163,195,227,258,0,0],it=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],jt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],kt=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Uf=function(a,c,d,b,g,p,k,e){var l,m,h,n,r,u,v=e.bits,x,C,J,H,G,L=0,U,T=null,Y=0,ea=new ab.Buf16(16);var ja=new ab.Buf16(16);var ra=null,Oa=0;for(x=0;15>=x;x++)ea[x]=
0;for(C=0;C<b;C++)ea[c[d+C]]++;var V=15;for(J=v;1<=V&&0===ea[V];V--);if(J>V&&(J=V),0===V)return g[p++]=20971520,g[p++]=20971520,e.bits=1,0;for(v=1;v<V&&0===ea[v];v++);J<v&&(J=v);for(x=l=1;15>=x;x++)if(l<<=1,0>(l-=ea[x]))return-1;if(0<l&&(0===a||1!==V))return-1;x=1;for(ja[1]=0;15>x;x++)ja[x+1]=ja[x]+ea[x];for(C=0;C<b;C++)0!==c[d+C]&&(k[ja[c[d+C]]++]=C);if(0===a?(T=ra=k,n=19):1===a?(T=ht,Y-=257,ra=it,Oa-=257,n=256):(T=jt,ra=kt,n=-1),U=0,C=0,x=v,ja=p,H=J,G=0,h=-1,b=(L=1<<J)-1,1===a&&852<L||2===a&&592<
L)return 1;for(;;){var Ga=x-G;k[C]<n?(r=0,u=k[C]):k[C]>n?(r=ra[Oa+k[C]],u=T[Y+k[C]]):(r=96,u=0);l=1<<x-G;v=m=1<<H;do g[ja+(U>>G)+(m-=l)]=Ga<<24|r<<16|u|0;while(0!==m);for(l=1<<x-1;U&l;)l>>=1;if(0!==l?(U&=l-1,U+=l):U=0,C++,0==--ea[x]){if(x===V)break;x=c[d+k[C]]}if(x>J&&(U&b)!==h){0===G&&(G=J);ja+=v;for(l=1<<(H=x-G);H+G<V&&!(0>=(l-=ea[H+G]));)H++,l<<=1;if(L+=1<<H,1===a&&852<L||2===a&&592<L)return 1;g[h=U&b]=J<<24|H<<16|ja-p|0}}return 0!==U&&(g[ja+U]=x-G<<24|4194304),e.bits=J,0};var Oo=!0;var lt=function(a,
c){var d,b,g,p,k,e,l,m,h=0,n=new ab.Buf8(4),r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;12===(d=a.state).mode&&(d.mode=13);var u=a.next_out;var v=a.output;var x=a.avail_out;var C=a.next_in;var J=a.input;var H=a.avail_in;var G=d.hold;var L=d.bits;var U=H;var T=x;var Y=0;a:for(;;)switch(d.mode){case 1:if(0===d.wrap){d.mode=13;break}for(;16>L;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}if(2&d.wrap&&35615===G){d.check=0;n[0]=255&G;n[1]=
G>>>8&255;d.check=sc(d.check,n,2,0);L=G=0;d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&G)<<8)+(G>>8))%31){a.msg="incorrect header check";d.mode=30;break}if(8!=(15&G)){a.msg="unknown compression method";d.mode=30;break}if(G>>>=4,L-=4,l=(15&G)+8,0===d.wbits)d.wbits=l;else if(l>d.wbits){a.msg="invalid window size";d.mode=30;break}d.dmax=1<<l;a.adler=d.check=1;d.mode=512&G?10:12;L=G=0;break;case 2:for(;16>L;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}if(d.flags=G,8!=(255&d.flags)){a.msg=
"unknown compression method";d.mode=30;break}if(57344&d.flags){a.msg="unknown header flags set";d.mode=30;break}d.head&&(d.head.text=G>>8&1);512&d.flags&&(n[0]=255&G,n[1]=G>>>8&255,d.check=sc(d.check,n,2,0));L=G=0;d.mode=3;case 3:for(;32>L;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}d.head&&(d.head.time=G);512&d.flags&&(n[0]=255&G,n[1]=G>>>8&255,n[2]=G>>>16&255,n[3]=G>>>24&255,d.check=sc(d.check,n,4,0));L=G=0;d.mode=4;case 4:for(;16>L;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}d.head&&(d.head.xflags=255&
G,d.head.os=G>>8);512&d.flags&&(n[0]=255&G,n[1]=G>>>8&255,d.check=sc(d.check,n,2,0));L=G=0;d.mode=5;case 5:if(1024&d.flags){for(;16>L;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}d.length=G;d.head&&(d.head.extra_len=G);512&d.flags&&(n[0]=255&G,n[1]=G>>>8&255,d.check=sc(d.check,n,2,0));L=G=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&((b=d.length)>H&&(b=H),b&&(d.head&&(l=d.head.extra_len-d.length,d.head.extra||(d.head.extra=Array(d.head.extra_len)),ab.arraySet(d.head.extra,J,C,b,
l)),512&d.flags&&(d.check=sc(d.check,J,b,C)),H-=b,C+=b,d.length-=b),d.length))break a;d.length=0;d.mode=7;case 7:if(2048&d.flags){if(0===H)break a;b=0;do l=J[C+b++],d.head&&l&&65536>d.length&&(d.head.name+=String.fromCharCode(l));while(l&&b<H);if(512&d.flags&&(d.check=sc(d.check,J,b,C)),H-=b,C+=b,l)break a}else d.head&&(d.head.name=null);d.length=0;d.mode=8;case 8:if(4096&d.flags){if(0===H)break a;b=0;do l=J[C+b++],d.head&&l&&65536>d.length&&(d.head.comment+=String.fromCharCode(l));while(l&&b<H);
if(512&d.flags&&(d.check=sc(d.check,J,b,C)),H-=b,C+=b,l)break a}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;16>L;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}if(G!==(65535&d.check)){a.msg="header crc mismatch";d.mode=30;break}L=G=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0);a.adler=d.check=0;d.mode=12;break;case 10:for(;32>L;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}a.adler=d.check=fl(G);L=G=0;d.mode=11;case 11:if(0===d.havedict)return a.next_out=u,a.avail_out=x,a.next_in=
C,a.avail_in=H,d.hold=G,d.bits=L,2;a.adler=d.check=1;d.mode=12;case 12:if(5===c||6===c)break a;case 13:if(d.last){G>>>=7&L;L-=7&L;d.mode=27;break}for(;3>L;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}switch(d.last=1&G,--L,3&(G>>>=1)){case 0:d.mode=14;break;case 1:var ea=d;if(Oo){Ii=new ab.Buf32(512);Ji=new ab.Buf32(32);for(p=0;144>p;)ea.lens[p++]=8;for(;256>p;)ea.lens[p++]=9;for(;280>p;)ea.lens[p++]=7;for(;288>p;)ea.lens[p++]=8;Uf(1,ea.lens,0,288,Ii,0,ea.work,{bits:9});for(p=0;32>p;)ea.lens[p++]=5;Uf(2,
ea.lens,0,32,Ji,0,ea.work,{bits:5});Oo=!1}ea.lencode=Ii;ea.lenbits=9;ea.distcode=Ji;ea.distbits=5;if(d.mode=20,6===c){G>>>=2;L-=2;break a}break;case 2:d.mode=17;break;case 3:a.msg="invalid block type",d.mode=30}G>>>=2;L-=2;break;case 14:G>>>=7&L;for(L-=7&L;32>L;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}if((65535&G)!=(G>>>16^65535)){a.msg="invalid stored block lengths";d.mode=30;break}if(d.length=65535&G,G=0,L=0,d.mode=15,6===c)break a;case 15:d.mode=16;case 16:if(b=d.length){if(b>H&&(b=H),b>x&&(b=
x),0===b)break a;ab.arraySet(v,J,C,b,u);H-=b;C+=b;x-=b;u+=b;d.length-=b;break}d.mode=12;break;case 17:for(;14>L;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}if(d.nlen=(31&G)+257,G>>>=5,L-=5,d.ndist=(31&G)+1,G>>>=5,L-=5,d.ncode=(15&G)+4,G>>>=4,L-=4,286<d.nlen||30<d.ndist){a.msg="too many length or distance symbols";d.mode=30;break}d.have=0;d.mode=18;case 18:for(;d.have<d.ncode;){for(;3>L;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}d.lens[r[d.have++]]=7&G;G>>>=3;L-=3}for(;19>d.have;)d.lens[r[d.have++]]=0;
if(d.lencode=d.lendyn,d.lenbits=7,m={bits:d.lenbits},Y=Uf(0,d.lens,0,19,d.lencode,0,d.work,m),d.lenbits=m.bits,Y){a.msg="invalid code lengths set";d.mode=30;break}d.have=0;d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;k=(h=d.lencode[G&(1<<d.lenbits)-1])>>>24,ea=65535&h,!(k<=L);){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}if(16>ea)G>>>=k,L-=k,d.lens[d.have++]=ea;else{if(16===ea){for(p=k+2;L<p;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}if(G>>>=k,L-=k,0===d.have){a.msg="invalid bit length repeat";d.mode=
30;break}l=d.lens[d.have-1];b=3+(3&G);G>>>=2;L-=2}else if(17===ea){for(p=k+3;L<p;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}G>>>=k;L-=k;l=0;b=3+(7&G);G>>>=3;L-=3}else{for(p=k+7;L<p;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}G>>>=k;L-=k;l=0;b=11+(127&G);G>>>=7;L-=7}if(d.have+b>d.nlen+d.ndist){a.msg="invalid bit length repeat";d.mode=30;break}for(;b--;)d.lens[d.have++]=l}}if(30===d.mode)break;if(0===d.lens[256]){a.msg="invalid code -- missing end-of-block";d.mode=30;break}if(d.lenbits=9,m={bits:d.lenbits},
Y=Uf(1,d.lens,0,d.nlen,d.lencode,0,d.work,m),d.lenbits=m.bits,Y){a.msg="invalid literal/lengths set";d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,m={bits:d.distbits},Y=Uf(2,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,m),d.distbits=m.bits,Y){a.msg="invalid distances set";d.mode=30;break}if(d.mode=20,6===c)break a;case 20:d.mode=21;case 21:if(6<=H&&258<=x){a.next_out=u;a.avail_out=x;a.next_in=C;a.avail_in=H;d.hold=G;d.bits=L;No(a,T);u=a.next_out;v=a.output;x=a.avail_out;C=a.next_in;J=a.input;
H=a.avail_in;G=d.hold;L=d.bits;12===d.mode&&(d.back=-1);break}for(d.back=0;k=(h=d.lencode[G&(1<<d.lenbits)-1])>>>24,p=h>>>16&255,ea=65535&h,!(k<=L);){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}if(p&&0==(240&p)){var ja=k;var ra=p;for(e=ea;k=(h=d.lencode[e+((G&(1<<ja+ra)-1)>>ja)])>>>24,p=h>>>16&255,ea=65535&h,!(ja+k<=L);){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}G>>>=ja;L-=ja;d.back+=ja}if(G>>>=k,L-=k,d.back+=k,d.length=ea,0===p){d.mode=26;break}if(32&p){d.back=-1;d.mode=12;break}if(64&p){a.msg="invalid literal/length code";
d.mode=30;break}d.extra=15&p;d.mode=22;case 22:if(d.extra){for(p=d.extra;L<p;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}d.length+=G&(1<<d.extra)-1;G>>>=d.extra;L-=d.extra;d.back+=d.extra}d.was=d.length;d.mode=23;case 23:for(;k=(h=d.distcode[G&(1<<d.distbits)-1])>>>24,p=h>>>16&255,ea=65535&h,!(k<=L);){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}if(0==(240&p)){ja=k;ra=p;for(e=ea;k=(h=d.distcode[e+((G&(1<<ja+ra)-1)>>ja)])>>>24,p=h>>>16&255,ea=65535&h,!(ja+k<=L);){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}G>>>=
ja;L-=ja;d.back+=ja}if(G>>>=k,L-=k,d.back+=k,64&p){a.msg="invalid distance code";d.mode=30;break}d.offset=ea;d.extra=15&p;d.mode=24;case 24:if(d.extra){for(p=d.extra;L<p;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}d.offset+=G&(1<<d.extra)-1;G>>>=d.extra;L-=d.extra;d.back+=d.extra}if(d.offset>d.dmax){a.msg="invalid distance too far back";d.mode=30;break}d.mode=25;case 25:if(0===x)break a;if(b=T-x,d.offset>b){if((b=d.offset-b)>d.whave&&d.sane){a.msg="invalid distance too far back";d.mode=30;break}b>d.wnext?
(b-=d.wnext,g=d.wsize-b):g=d.wnext-b;b>d.length&&(b=d.length);p=d.window}else p=v,g=u-d.offset,b=d.length;b>x&&(b=x);x-=b;d.length-=b;do v[u++]=p[g++];while(--b);0===d.length&&(d.mode=21);break;case 26:if(0===x)break a;v[u++]=d.length;x--;d.mode=21;break;case 27:if(d.wrap){for(;32>L;){if(0===H)break a;H--;G|=J[C++]<<L;L+=8}if(T-=x,a.total_out+=T,d.total+=T,T&&(a.adler=d.check=d.flags?sc(d.check,v,T,u-T):hf(d.check,v,T,u-T)),T=x,(d.flags?G:fl(G))!==d.check){a.msg="incorrect data check";d.mode=30;break}L=
G=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;32>L;){if(0===H)break a;H--;G+=J[C++]<<L;L+=8}if(G!==(4294967295&d.total)){a.msg="incorrect length check";d.mode=30;break}L=G=0}d.mode=29;case 29:Y=1;break a;case 30:Y=-3;break a;case 31:return-4;default:return-2}return(a.next_out=u,a.avail_out=x,a.next_in=C,a.avail_in=H,d.hold=G,d.bits=L,(d.wsize||T!==a.avail_out&&30>d.mode&&(27>d.mode||4!==c))&&gl(a,a.output,a.next_out,T-a.avail_out))?(d.mode=31,-4):(U-=a.avail_in,T-=a.avail_out,a.total_in+=U,a.total_out+=
T,d.total+=T,d.wrap&&T&&(a.adler=d.check=d.flags?sc(d.check,v,T,a.next_out-T):hf(d.check,v,T,a.next_out-T)),a.data_type=d.bits+(d.last?64:0)+(12===d.mode?128:0)+(20===d.mode||15===d.mode?256:0),(0===U&&0===T||4===c)&&0===Y&&(Y=-5),Y)};var mt=function(a){if(!a||!a.state)return-2;var c=a.state;return c.window&&(c.window=null),a.state=null,0};var hp=function(a,c){var d;return a&&a.state&&0!=(2&(d=a.state).wrap)?(d.head=c,c.done=!1,0):-2};var jl=function(a,c){var d,b=c.length;return a&&a.state&&(0===
(d=a.state).wrap||11===d.mode)?11===d.mode&&hf(1,c,b,0)!==d.check?-3:gl(a,c,b,b)?(d.mode=31,-4):(d.havedict=1,0):-2};var dc={};dc={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};
var hl={};hl=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1};var il=Object.prototype.toString;He.prototype.push=function(a,c){var d,b,g,p,k=this.strm,e=this.options.chunkSize,l=this.options.dictionary,m=!1;if(this.ended)return!1;c=c===~~c?c:!0===c?dc.Z_FINISH:dc.Z_NO_FLUSH;"string"==typeof a?k.input=et(a):"[object ArrayBuffer]"===il.call(a)?k.input=new Uint8Array(a):k.input=a;k.next_in=0;k.avail_in=k.input.length;
do{if(0===k.avail_out&&(k.output=new ab.Buf8(e),k.next_out=0,k.avail_out=e),(d=lt(k,dc.Z_NO_FLUSH))===dc.Z_NEED_DICT&&l&&(d=jl(this.strm,l)),d===dc.Z_BUF_ERROR&&!0===m&&(d=dc.Z_OK,m=!1),d!==dc.Z_STREAM_END&&d!==dc.Z_OK)return this.onEnd(d),this.ended=!0,!1;k.next_out&&(0===k.avail_out||d===dc.Z_STREAM_END||0===k.avail_in&&(c===dc.Z_FINISH||c===dc.Z_SYNC_FLUSH))&&("string"===this.options.to?(b=gt(k.output,k.next_out),g=k.next_out-b,p=ft(k.output,b),k.next_out=g,k.avail_out=e-g,g&&ab.arraySet(k.output,
k.output,b,g,0),this.onData(p)):this.onData(ab.shrinkBuf(k.output,k.next_out)));0===k.avail_in&&0===k.avail_out&&(m=!0)}while((0<k.avail_in||0===k.avail_out)&&d!==dc.Z_STREAM_END);return(d===dc.Z_STREAM_END&&(c=dc.Z_FINISH),c===dc.Z_FINISH)?(d=mt(this.strm),this.onEnd(d),this.ended=!0,d===dc.Z_OK):(c===dc.Z_SYNC_FLUSH&&(this.onEnd(dc.Z_OK),k.avail_out=0),!0)};He.prototype.onData=function(a){this.chunks.push(a)};He.prototype.onEnd=function(a){a===dc.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):
this.result=ab.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var Jo=He;var Ko=ui;var Lo=function(a,c){return(c=c||{}).raw=!0,ui(a,c)};var Mo=ui;var Po={};Ys(Po,Gg,Jg,dc);xi=Po;vi.FIXED_HEADER_LENGTH=16;Og.HEADER_LENGTH=8;class Qo{readFixedHeader(a){this.payloadOffset=a.readU32BE();this.blendMode=a.readU32BE();this.alpha=a.readU32BE();let c=a.readU32BE();this.visible=0!=(1&c);this.clip=0!=(2&c);this.hasMask=0!=(4&c);this.maskLinked=0!=(8&c);this.maskVisible=0!=(16&c);
this.expanded=0!=(32&c);this.lockAlpha=0!=(64&c);this.blendMode===S.LM_MULTIPLY&&0!=(128&c)&&(this.blendMode=S.LM_MULTIPLY2);this.nameLength=a.readU32BE()}getFixedHeaderLen(){return 20}getVariableHeaderLen(){return this.nameLength}readVariableSizeHeader(a){this.name=a.readString(this.nameLength)}decode(a){for(var c;;){if(0<this.skipBytes){if(this.skipBytes>=a.length)return this.skipBytes-=a.length,null;a=a.subarray(this.skipBytes);this.skipBytes=0}switch(this.state){case 0:if(a.length<this.getFixedHeaderLen())break;
c=new zb(a);this.readFixedHeader(c);a=a.subarray(c.pos);this.state=1;continue;case 1:if(a.length<this.getVariableHeaderLen())break;c=new zb(a);this.readVariableSizeHeader(c);this.layer=this.createLayer();this.hasMask&&(this.layer.setMask(new gb(this.width,this.height,8)),this.maskDecoder=new nt(this.layer.mask));this.layer instanceof Na&&(this.colorDecoder=new ot(this.layer.image));this.skipBytes=this.payloadOffset-this.getFixedHeaderLen();this.colorDecoder?this.state=3:this.maskDecoder?this.state=
4:this.state=5;continue;case 3:if(a=this.colorDecoder.decode(a),this.colorDecoder.done){this.maskDecoder?this.state=4:this.state=5;continue}break;case 4:if(a=this.maskDecoder.decode(a),this.maskDecoder.done){this.state=5;continue}break;case 5:c=this.payloadOffset;this.colorDecoder&&(c+=this.colorDecoder.bytesTotal);this.maskDecoder&&(c+=this.maskDecoder.bytesTotal);this.state=6;this.skipBytes=this.chunkHeader.chunkSize-c;continue;case 6:this.done=!0}break}return a}constructor(a,c,d){this.chunkHeader=
a;this.width=c;this.height=d;this.nameLength=this.skipBytes=this.payloadOffset=this.state=0;this.done=!1;this.maskDecoder=this.colorDecoder=null}}class ip extends Qo{createLayer(){let a=new Na(this.width,this.height,this.name);return a.setBlendMode(this.blendMode),a.setAlpha(this.alpha),a.setVisible(this.visible),a.setClip(this.clip),a.setMaskLinked(this.maskLinked),a.setMaskVisible(this.maskVisible),a.setLockAlpha(this.lockAlpha),a}}class jp extends Qo{readFixedHeader(a){super.readFixedHeader.call(this,
a);this.childLayers=a.readU32BE()}getFixedHeaderLen(){return super.getFixedHeaderLen.call(this)+4}createLayer(){let a=new rb(this.name,this.blendMode);return a.setAlpha(this.alpha),a.setVisible(this.visible),a.setExpanded(this.expanded),a.setMaskLinked(this.maskLinked),a.setMaskVisible(this.maskVisible),a}constructor(a,c,d){super(a,c,d);this.childLayers=0}}class ot{decode(a){if(null==a)return null;var c=this.bytesRead%I.BYTES_PER_PIXEL,d=this.bytesRead-c;let b=0,g=[I.ALPHA_BYTE_OFFSET,I.RED_BYTE_OFFSET,
I.GREEN_BYTE_OFFSET,I.BLUE_BYTE_OFFSET];for(;c<I.BYTES_PER_PIXEL&&b<a.length;c++)this.output[d+g[c]]=a[b],b++;this.bytesRead+=b;var p=0|Math.min(a.length-b,this.bytesTotal-this.bytesRead);c=p/I.BYTES_PER_PIXEL|0;p%=I.BYTES_PER_PIXEL;for(d=0;d<c;d++)this.output[this.bytesRead+I.ALPHA_BYTE_OFFSET]=a[b],this.output[this.bytesRead+I.RED_BYTE_OFFSET]=a[b+1],this.output[this.bytesRead+I.GREEN_BYTE_OFFSET]=a[b+2],this.output[this.bytesRead+I.BLUE_BYTE_OFFSET]=a[b+3],this.bytesRead+=I.BYTES_PER_PIXEL,b+=
I.BYTES_PER_PIXEL;c=0;for(d=this.bytesRead;c<p;c++)this.output[d+g[c]]=a[b],b++;return(this.bytesRead+=p,this.bytesRead>=this.bytesTotal&&(this.done=!0),b<a.length)?a.subarray(b):null}constructor(a){this.bytesRead=0;this.bytesTotal=a.width*a.height*I.BYTES_PER_PIXEL;this.output=a.data;this.done=!1}}class nt{decode(a){if(null==a)return null;let c=0|Math.min(a.length,this.bytesTotal-this.bytesRead),d=this.bytesRead,b;for(b=0;b<c;b++,d++)this.output[d]=a[b];return(this.bytesRead=d,this.bytesRead>=this.bytesTotal&&
(this.done=!0),b<a.length)?a.subarray(b):null}constructor(a){this.bytesRead=0;this.bytesTotal=a.width*a.height;this.output=a.data;this.done=!1}}kf.prototype.read=function(a){if(null==a)return null;var c=new zb(new Uint8Array(a)),d=[];if(1!=c.readU16BE())return null;a=c.readU16BE();for(var b=0;b<a;b++)if(0==c.readU16BE()){var g=255*c.readU16BE()/65535,p=255*c.readU16BE()/65535,k=255*c.readU16BE()/65535;c.readU16BE();d.push(g<<16|p<<8|k)}return d};kf.prototype.write=function(a){var c=new zb(new Uint8Array(4+
10*a.length));c.writeU16BE(1);c.writeU16BE(a.length);for(var d=0;d<a.length;d++){var b=a[d];c.writeU16BE(0);c.writeU16BE(257*(b>>16&255));c.writeU16BE(257*(b>>8&255));c.writeU16BE(257*(255&b));c.writeU16BE(0)}return c.getAsDataArray()};Pg.prototype=Object.create(X(ic).prototype);Pg.prototype.constructor=Pg;var cg={};var Ro=function(){function a(k,e,l){var m=new XMLHttpRequest;m.open("GET",k);m.responseType="blob";m.onload=function(){p(m.response,e,l)};m.onerror=function(){console.error("could not download file")};
m.send()}function c(k){var e=new XMLHttpRequest;e.open("HEAD",k,!1);try{e.send()}catch(l){}return 200<=e.status&&299>=e.status}function d(k){try{k.dispatchEvent(new MouseEvent("click"))}catch(l){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null);k.dispatchEvent(e)}}var b="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof qf&&qf.global===qf?qf:void 0,g=b.navigator&&/Macintosh/.test(navigator.userAgent)&&
/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=b.saveAs||("object"!=typeof window||window!==b?function(){}:"download"in HTMLAnchorElement.prototype&&!g?function(k,e,l){var m=b.URL||b.webkitURL,h=document.createElement("a");e=e||k.name||"download";h.download=e;h.rel="noopener";"string"==typeof k?(h.href=k,h.origin===location.origin?d(h):c(h.href)?a(k,e,l):d(h,h.target="_blank")):(h.href=m.createObjectURL(k),setTimeout(function(){m.revokeObjectURL(h.href)},4E4),setTimeout(function(){d(h)},
0))}:"msSaveOrOpenBlob"in navigator?function(k,e,l){if(e=e||k.name||"download","string"!=typeof k){var m;navigator.msSaveOrOpenBlob((void 0===(m=l)?m={autoBom:!1}:"object"!=typeof m&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(k.type)?new Blob(["\ufeff",k],{type:k.type}):k),e)}else if(c(k))a(k,e,l);else{var h=document.createElement("a");h.href=k;h.target="_blank";setTimeout(function(){d(h)})}}:
function(k,e,l,m){if((m=m||open("","_blank"))&&(m.document.title=m.document.body.innerText="downloading..."),"string"==typeof k)return a(k,e,l);e="application/octet-stream"===k.type;l=/constructor/i.test(b.HTMLElement)||b.safari;var h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||e&&l||g)&&"undefined"!=typeof FileReader){var n=new FileReader;n.onloadend=function(){var v=n.result;v=h?v:v.replace(/^data:[^;]*;/,"data:attachment/file;");m?m.location.href=v:location=v;m=null};n.readAsDataURL(k)}else{var r=
b.URL||b.webkitURL,u=r.createObjectURL(k);m?m.location=u:location.href=u;m=null;setTimeout(function(){r.revokeObjectURL(u)},4E4)}});cg=b.saveAs=p.saveAs=p};"function"==typeof define&&define.amd?define([],Ro):Ro();var Rg={};Rg=JSON.parse('{"Dodge (tool)":"Dodge","Burn (tool)":"Burn","Color (picker)":"Color","Color swatches (shorter)":"Swatches"}');let zi={ja:JSON.parse('{"File":"\u30d5\u30a1\u30a4\u30eb","Save to my computer":"PC\u306b\u4fdd\u5b58","Post Oekaki":"\u304a\u7d75\u304b\u304d\u3092\u6295\u7a3f","Edit":"\u7de8\u96c6","Undo":"\u53d6\u308a\u6d88\u3057","Redo":"\u3084\u308a\u76f4\u3057","Cut":"\u5207\u308a\u53d6\u308a","Copy":"\u30b3\u30d4\u30fc","Clear history":"\u5c65\u6b74\u6d88\u53bb","Copy merged":"\u7d50\u5408\u30b3\u30d4\u30fc","Paste":"\u8cbc\u308a\u4ed8\u3051","Select all":"\u3059\u3079\u3066\u9078\u629e","Deselect":"\u9078\u629e\u89e3\u9664","Transform":"\u5909\u5f62","Layers":"\u30ec\u30a4\u30e4\u30fc","Duplicate":"\u8907\u88fd","Merge down":"\u4e0b\u306e\u30ec\u30a4\u30e4\u30fc\u3068\u7d50\u5408","Merge group":"\u30b0\u30eb\u30fc\u30d7\u7d50\u5408","Merge all layers":"\u5168\u30ec\u30a4\u30e4\u30fc\u7d50\u5408","Add layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u8ffd\u52a0","Delete mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u524a\u9664","Delete layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u524a\u9664","Apply mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u9069\u7528","Apply layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u9069\u7528","Disable mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u7121\u52b9\u5316","Enable mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u6709\u52b9\u5316","Clip to the layer below":"\u4e0b\u306e\u30ec\u30a4\u30e4\u30fc\u3067\u30af\u30ea\u30c3\u30d4\u30f3\u30b0","Unclip from the layer below":"\u30af\u30ea\u30c3\u30d4\u30f3\u30b0\u89e3\u9664","Effects":"\u52b9\u679c","Clear":"\u6d88\u53bb","Fill":"\u5857\u308a\u6f70\u3057","Flip horizontal":"\u5de6\u53f3\u53cd\u8ee2","Flip vertical":"\u4e0a\u4e0b\u53cd\u8ee2","Invert":"\u30cd\u30ac\u30dd\u30b8\u53cd\u8ee2","Box blur...":"\u307c\u304b\u3057","Box blur":"\u307c\u304b\u3057","Blur amount (pixels)":"\u307c\u304b\u3057\u91cf(\u30d4\u30af\u30bb\u30eb\u5358\u4f4d)","Iterations (1-8, larger gives smoother blur)":"\u53cd\u5fa9(1-8,\u5927\u304d\u3044\u307b\u3069\u307c\u304b\u3057\u304c\u6ed1\u3089\u304b)","Monochromatic noise":"\u5358\u8272\u30ce\u30a4\u30ba","Color noise":"\u30ab\u30e9\u30fc\u30ce\u30a4\u30ba","View":"\u8868\u793a","Full-screen mode":"\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3\u30e2\u30fc\u30c9","Zoom in":"\u62e1\u5927","Zoom out":"\u7e2e\u5c0f","Zoom 100%":"100%","Smooth-out zoomed canvas":"\u30ba\u30fc\u30e0\u3092\u306a\u3081\u3089\u304b\u306b\u8868\u793a\u3059\u308b","Show grid":"\u30b0\u30ea\u30c3\u30c9\u3092\u8868\u793a","Grid options...":"\u30b0\u30ea\u30c3\u30c9\u306e\u8a2d\u5b9a","Palettes":"\u30d1\u30ec\u30c3\u30c8","Rearrange":"\u521d\u671f\u5316","Toggle palettes":"\u8868\u793a\u975e\u8868\u793a\u5207\u308a\u66ff\u3048","Use old icons":"\u53e4\u3044\u30a2\u30a4\u30b3\u30f3","Show tool options":"\u30c4\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3","Show color":"\u30ab\u30e9\u30fc","Show layers":"\u30ec\u30a4\u30e4\u30fc","Show misc":"\u64cd\u4f5c","Show stroke":"\u30b9\u30c8\u30ed\u30fc\u30af","Show swatches":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Show textures":"\u30c6\u30af\u30b9\u30c1\u30e3","Show tools":"\u30c4\u30fc\u30eb","Help":"\u30d8\u30eb\u30d7","Tablet support":"\u30bf\u30d6\u30ec\u30c3\u30c8\u30b5\u30dd\u30fc\u30c8","Shortcuts":"\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8","About":"ChickenPaint Be\u306b\u3064\u3044\u3066","Removes all undo/redo information to regain memory":"\u5c65\u6b74\u3092\u30af\u30ea\u30a2\u3057\u3066\u30e1\u30e2\u30ea\u3092\u958b\u653e\u3057\u307e\u3059","Clears the selected area":"\u6d88\u53bb","Invert the image colors":"\u30cd\u30ac\u30dd\u30b8\u53cd\u8ee2","Blur effect":"\u307c\u304b\u3057\u30d5\u30a3\u30eb\u30bf","Fills the selection with noise":"\u5358\u8272\u30ce\u30a4\u30ba\u3067\u5857\u308a\u6f70\u3057","Fills the selection with colored noise":"\u30ab\u30e9\u30fc\u30ce\u30a4\u30ba\u3067\u5857\u308a\u6f70\u3057","Linear interpolation is used to give a smoothed looked to the picture when zoomed in":"\u753b\u50cf\u306e\u62e1\u5927\u6642\u306b\u88dc\u5b8c\u3057\u3066\u6ed1\u3089\u304b\u306b\u8868\u793a\u3057\u307e\u3059","Rearrange the palette windows":"\u30d1\u30ec\u30c3\u30c8\u3092\u518d\u914d\u7f6e","Hides or shows all palettes":"\u30d1\u30ec\u30c3\u30c8\u306e\u8868\u793a/\u975e\u8868\u793a","You\'re about to clear the current Undo/Redo history.\\nThis operation cannot be undone, are you sure you want to do that?":"\u30a2\u30f3\u30c9\u30a5\u30fb\u30ea\u30c9\u30a5\u306e\u5c65\u6b74\u3092\u6d88\u53bb\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002\\n\u3053\u306e\u64cd\u4f5c\u306f\u5143\u306b\u623b\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u672c\u5f53\u306b\u5b9f\u884c\u3057\u307e\u3059\u304b?","Misc":"\u64cd\u4f5c","Round Pixelated":"\u5186\u30d4\u30af\u30bb\u30eb","Round Hard Edge":"\u5186\u30cf\u30fc\u30c9\u30a8\u30c3\u30b8","Round Soft":"\u5186\u30bd\u30d5\u30c8","Square Pixelated":"\u89d2\u30d4\u30af\u30bb\u30eb","Square Hard Edge":"\u89d2\u30cf\u30fc\u30c9\u30a8\u30c3\u30b8","Color (picker)":"\u30ab\u30e9\u30fc","Tool options":"\u30c4\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3","Brush size":"\u30d6\u30e9\u30b7\u30b5\u30a4\u30ba","Opacity":"\u4e0d\u900f\u660e\u5ea6","Color":"\u8272\u88dc\u5145","Blend":"\u6df7\u8272","Spacing":"\u9593\u9694","Scattering":"\u6563\u4e71","Smoothing":"\u624b\u3076\u308c\u88dc\u6b63","Color swatches":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Color swatches (shorter)":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Remove":"\u524a\u9664","Replace with current color":"\u9078\u629e\u4e2d\u306e\u8272\u306b\u7f6e\u304d\u63db\u3048","Save swatches to your computer...":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8\u3092PC\u306b\u4fdd\u5b58","Load swatches from your computer...":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8\u3092PC\u304b\u3089\u8aad\u307f\u8fbc\u307f","Add the current brush color as a new swatch":"\u9078\u629e\u4e2d\u306e\u8272\u3092\u8ffd\u52a0","Sample all layers":"\u5168\u30ec\u30a4\u30e4\u30fc\u6df7\u5408","Lock transparency":"\u900f\u660e\u90e8\u5206\u3092\u4fdd\u8b77","Textures":"\u30c6\u30af\u30b9\u30c1\u30e3","Customize":"\u30ab\u30b9\u30bf\u30de\u30a4\u30ba","Inverse":"\u30cd\u30ac\u30dd\u30b8\u53cd\u8ee2","Mirror":"\u5de6\u53f3\u53cd\u8ee2","Brightness":"\u8f1d\u5ea6","Contrast":"\u30b3\u30f3\u30c8\u30e9\u30b9\u30c8","Reset":"\u30ea\u30bb\u30c3\u30c8","Layer blending mode":"\u5408\u6210\u30e2\u30fc\u30c9","Normal":"\u901a\u5e38","Multiply":"\u4e57\u7b97","Add":"\u52a0\u7b97","Screen":"\u30b9\u30af\u30ea\u30fc\u30f3","Lighten":"\u6bd4\u8f03(\u660e)","Darken":"\u6bd4\u8f03(\u6697)","Subtract":"\u6e1b\u7b97","Dodge":"\u8986\u3044\u713c\u304d","Burn":"\u713c\u304d\u8fbc\u307f","Overlay":"\u30aa\u30fc\u30d0\u30fc\u30ec\u30a4","Hard Light":"\u30cf\u30fc\u30c9\u30e9\u30a4\u30c8","Soft Light":"\u30bd\u30d5\u30c8\u30e9\u30a4\u30c8","Vivid Light":"\u30d3\u30d3\u30c3\u30c9\u30e9\u30a4\u30c8","Linear Light":"\u30ea\u30cb\u30a2\u30e9\u30a4\u30c8","Pin Light":"\u30d4\u30f3\u30e9\u30a4\u30c8","Passthrough":"\u901a\u904e","Stroke":"\u30b9\u30c8\u30ed\u30fc\u30af","Free-hand":"\u30d5\u30ea\u30fc\u30cf\u30f3\u30c9","Straight line":"\u76f4\u7dda","Bezier curve":"Bz\uff08\u30d9\u30b8\u30a7\uff09\u66f2\u7dda","Tools":"\u30c4\u30fc\u30eb","Marquee":"\u9078\u629e\u7bc4\u56f2","Move tool":"\u79fb\u52d5","Flood fill":"\u5857\u308a\u6f70\u3057","Gradient fill":"\u30b0\u30e9\u30c7\u30fc\u30b7\u30e7\u30f3","Color picker":"\u30b9\u30dd\u30a4\u30c8","Rotate canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u56de\u8ee2","Grab canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u4f4d\u7f6e","Pencil":"\u925b\u7b46","Pen":"\u30da\u30f3","Airbrush":"\u30a8\u30a2\u30d6\u30e9\u30b7","Waterpaint":"\u6c34\u5f69","Eraser":"\u6d88\u3057\u30b4\u30e0","Soft eraser":"\u8584\u6d88\u3057","Smudge":"\u6307\u5148","Blender":"\u6df7\u8272","Dodge (tool)":"\u8986\u3044\u713c\u304d","Burn (tool)":"\u713c\u304d\u8fbc\u307f","Blur":"\u307c\u304b\u3057","Grid options":"\u30b0\u30ea\u30c3\u30c9\u306e\u8a2d\u5b9a","Grid size":"\u30b0\u30ea\u30c3\u30c9\u30b5\u30a4\u30ba","Rename...":"\u540d\u524d\u3092\u5909\u66f4","Add layer":"\u65b0\u898f\u30ec\u30a4\u30e4\u30fc","Delete layer":"\u30ec\u30a4\u30e4\u30fc\u524a\u9664","Add group":"\u65b0\u898f\u30b0\u30eb\u30fc\u30d7","Delete group":"\u30b0\u30eb\u30fc\u30d7\u524a\u9664","Add mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u8ffd\u52a0","Gradient":"\u30b0\u30e9\u30c7\u30fc\u30b7\u30e7\u30f3\u4f5c\u6210","Transform style":"\u5909\u5f62\u30b9\u30bf\u30a4\u30eb","Apply transform":"\u5909\u5f62\u78ba\u5b9a","Complete transform":"\u5909\u5f62\u3092\u5b8c\u4e86","Undo transform":"\u53d6\u308a\u6d88\u3057","You need to finish transforming this layer before you can do that. What would you like to do with the transform?":"\u7d9a\u884c\u3059\u308b\u305f\u3081\u306b\u5909\u5f62\u3092\u5b8c\u4e86\u3057\u307e\u3059\u3002","Smooth":"\u30b9\u30e0\u30fc\u30ba","Sharp":"\u30b7\u30e3\u30fc\u30d7","Opacity: ":"\u4e0d\u900f\u660e\u5ea6:","Please enter a color in hex format":"16\u9032\u5f62\u5f0f\u3067\u8272\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\uff08#xxxxxx\u306e\u5f62\uff09","Cancel":"\u30ad\u30e3\u30f3\u30bb\u30eb","Ok":"OK","Okay":"OK","OK":"OK","Whoops! This layer is currently hidden":"\u975e\u8868\u793a\u30ec\u30a4\u30e4\u30fc\u3067\u3059\u3002","Whoops! This layer\'s opacity is currently 0%":"\u30ec\u30a4\u30e4\u30fc\u306e\u4e0d\u900f\u660e\u5ea6\u304c0%\u3067\u3059","Whoops! You can\'t draw on a group":"\u30b0\u30eb\u30fc\u30d7\u30d5\u30a9\u30eb\u30c0\u306b\u306f\u63cf\u3051\u307e\u305b\u3093","Whoops! All of the selected pixels are transparent!":"\u30ec\u30a4\u30e4\u30fc\u304c\u7a7a\u3067\u3059","Image":"\u753b\u50cf","Layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af","Sorry, you can\'t remove the last remaining layer in the drawing.":"\u6700\u5f8c\u306e1\u3064\u306a\u306e\u3067\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3002","Are you sure you want to send your drawing to the server and finish drawing now?":"\u304a\u7d75\u304b\u304d\u3092\u30b5\u30fc\u30d0\u30fc\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\u7d42\u4e86\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","Your drawing has unsaved changes! Are you sure to want to navigate away?":"\u304a\u7d75\u304b\u304d\u306b\u672a\u4fdd\u5b58\u306e\u5909\u66f4\u304c\u3042\u308a\u307e\u3059\u3002\u7d42\u4e86\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","Many of the menu options and painting tools have keyboard shortcuts which are written next to them or appear when you hover.":"\u5229\u7528\u53ef\u80fd\u306a\u30ad\u30fc\u30dc\u30fc\u30c9\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u306e\u3044\u304f\u3064\u304b\u306f\u30e1\u30cb\u30e5\u30fc\u306e\u6a2a\u3084\u30c4\u30fc\u30eb\u30c1\u30c3\u30d7\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002","Here are some other shortcuts which are not as obvious!":"\u3053\u306e\u4e00\u89a7\u306f\u305d\u308c\u4ee5\u5916\u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3067\u3059\u3002","Right":"\u53f3","Left":"\u5de6","Middle":"\u4e2d","or":"\u307e\u305f\u306f","Double click":"\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af","Color swatches palette":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Use as the drawing color":"\u30d1\u30ec\u30c3\u30c8\u306e\u8272\u3092\u53d6\u5f97","Remove or replace a color swatch":"\u30d1\u30ec\u30c3\u30c8\u306e\u5909\u66f4\uff65\u524a\u9664","Line drawing mode":"\u76f4\u7dda\u30e2\u30fc\u30c9","Snap line to nearest 45 degrees":"45\u00b0\u5358\u4f4d\u3067\u30b9\u30ca\u30c3\u30d7","Painting tools":"\u30c4\u30fc\u30eb","Change brush opacity":"\u30d6\u30e9\u30b7\u306e\u4e0d\u900f\u660e\u5ea6","Change brush size":"\u30d6\u30e9\u30b7\u30b5\u30a4\u30ba","Brush palette":"\u30d6\u30e9\u30b7\u30d1\u30ec\u30c3\u30c8","Adjust brush sliders more precisely":"\u30d6\u30e9\u30b7\u30b9\u30e9\u30a4\u30c0\u30fc\u3092\u3088\u308a\u7d30\u304b\u304f\u8abf\u6574","Drawing canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9","Move the canvas around":"\u30ad\u30e3\u30f3\u30d0\u30b9\u3092\u79fb\u52d5","Rotate the canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u56de\u8ee2","Sample the color under the cursor":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u8272\u3092\u30b9\u30dd\u30a4\u30c8","Layers palette":"\u30ec\u30a4\u30e4\u30fc\u30d1\u30ec\u30c3\u30c8","Rename layer":"\u30ec\u30a4\u30e4\u30fc\u540d\u5909\u66f4","Toggle mask enable/disable":"\u30de\u30b9\u30af\u306e\u6709\u52b9/\u7121\u52b9\u5207\u308a\u66ff\u3048","Toggle mask View":"\u30de\u30b9\u30af\u306e\u8868\u793a/\u975e\u8868\u793a\u5207\u308a\u66ff\u3048","Save Oekaki":"\u4fdd\u5b58","Saving drawing...":"\u304a\u7d75\u304b\u304d\u3092\u4fdd\u5b58\u4e2d\u2026","Preparing your drawing to be saved, please wait...":"\u304a\u7d75\u304b\u304d\u3092\u4fdd\u5b58\u3059\u308b\u6e96\u5099\u3092\u3057\u3066\u3044\u307e\u3059\u3002\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u2026","Drawing saved!":"\u304a\u7d75\u304b\u304d\u3092\u4fdd\u5b58\u3057\u307e\u3057\u305f\uff01","Your drawing has been saved, would you like to post it to the forum now?":"\u304a\u7d75\u304b\u304d\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\u3002\u30d5\u30a9\u30fc\u30e9\u30e0\u3078\u6295\u7a3f\u3057\u307e\u3059\u304b\uff1f","Yes, post it now":"\u306f\u3044\u3001\u6295\u7a3f\u3057\u307e\u3059","No, keep drawing":"\u307e\u3060\u63cf\u304d\u307e\u3059","No, quit and I\'ll finish it later":"\u30a2\u30d7\u30ea\u3092\u7d42\u4e86\u3057\u3066\u7d9a\u304d\u3092\u5f8c\u3067\u63cf\u304f","Your drawing has been saved, would you like to view it on the forum now?":"\u304a\u7d75\u304b\u304d\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\u3002\u30d5\u30a9\u30fc\u30e9\u30e0\u3078\u6295\u7a3f\u3057\u307e\u3059\u304b\uff1f","Yes, view the post":"\u306f\u3044\u3001\u6295\u7a3f\u3057\u307e\u3059\u3002","Your drawing has been saved, redirecting you to view your new post now...":"\u304a\u7d75\u304b\u304d\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\u3002\u6295\u7a3f\u5148\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002","Sorry, your drawing could not be saved, please try again later.":"\u304a\u7d75\u304b\u304d\u304c\u4fdd\u5b58\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u518d\u5ea6\u6295\u7a3f\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002","The error returned from the server was":"\u30b5\u30fc\u30d0\u304b\u3089\u8fd4\u3063\u3066\u6765\u305f\u30a8\u30e9\u30fc"}'),
en:Rg},Qg=Rg,Ai="en";bg.prototype=Object.create(X(ic).prototype);bg.prototype.constructor=bg;var ac={};for(let a of(!function(c){function d(H,G){for(var L=H.length;L--;)if(H[L]===G)return L;return-1}function b(H,G,L){var U=p(H);void 0===L&&(L=G,G="all");for(var T=0;T<U.length;T++){var Y=[];1<(H=U[T].split("+")).length&&(Y=k(H),H=[H[H.length-1]]);(H=v(H=H[0]))in m||(m[H]=[]);m[H].push({shortcut:U[T],scope:G,method:L,key:U[T],mods:Y})}}function g(){return n||"all"}function p(H){var G;return""==(G=H.replace(/\s/g,
"").split(","))[G.length-1]&&(G[G.length-2]+=","),G}function k(H){H=H.slice(0,H.length-1);for(var G=0;G<H.length;G++)H[G]=r[H[G]];return H}function e(H,G,L){H.addEventListener&&H.addEventListener(G,L,!1)}var l,m={},h={16:!1,18:!1,17:!1,91:!1},n="all",r={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},u={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,
pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},v=function(H){H=u[H]||H.toUpperCase().charCodeAt(0);return"function"==typeof H?H():H},x=[];for(l=1;20>l;l++)u["f"+l]=111+l;var C={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(l in r)b[l]=!1;e(document,"keydown",function(H){!function(G){var L,U,T,Y,ea;if(-1==d(x,L=ll(G.key))&&x.push(L),L in h)for(T in h[L]=!0,r)r[T]==L&&(b[T]=!0);else{for(l in h)h[l]=G[C[l]];if(b.filter.call(this,G)&&L in
m){var ja=0;for(ea=g();ja<m[L].length;ja++)if((U=m[L][ja]).scope==ea||"all"==U.scope){for(T in Y=0<U.mods.length,h)(!h[T]&&-1<d(U.mods,+T)||h[T]&&-1==d(U.mods,+T))&&(Y=!1);(0!=U.mods.length||h[16]||h[18]||h[17]||h[91])&&!Y||!1!==U.method(G,U)||(G.preventDefault?G.preventDefault():G.returnValue=!1,G.stopPropagation&&G.stopPropagation(),G.cancelBubble&&(G.cancelBubble=!0))}}}}(H)});e(document,"keyup",function(H){var G;H=ll(H.key);var L=d(x,H);if(0<=L&&x.splice(L,1),H in h)for(G in h[H]=!1,r)r[G]==H&&
(b[G]=!1)});e(window,"focus",function(){for(l in h)h[l]=!1;for(l in r)b[l]=!1});var J=c.key;c.key=b;c.key.setScope=function(H){n=H||"all"};c.key.getScope=g;c.key.deleteScope=function(H){var G,L;for(G in m){var U=0;for(L=m[G];U<L.length;)L[U].scope===H?L.splice(U,1):U++}};c.key.filter=function(H){H=(H.target||H.srcElement).tagName;return!("INPUT"==H||"SELECT"==H||"TEXTAREA"==H)};c.key.isPressed=function(H){return"string"==typeof H&&(H=v(H)),-1!=d(x,H)};c.key.getPressedKeyCodes=function(){return x.slice(0)};
c.key.noConflict=function(){var H=c.key;return c.key=J,H};c.key.unbind=function(H,G){var L,U,T,Y,ea=[];var ja=0;for(L=p(H);ja<L.length&&(1<(U=L[ja].split("+")).length&&(ea=k(U)),H=v(H=U[U.length-1]),void 0===G&&(G=g()),m[H]);ja++)for(T=0;T<m[H].length;T++){var ra;if(ra=(Y=m[H][T]).scope===G)a:if(Y=Y.mods,Y.length!=ea.length)ra=!1;else{for(ra=0;ra<Y.length;ra++)if(Y[ra]!==ea[ra]){ra=!1;break a}ra=!0}ra&&(m[H][T]={})}};ac=b}(ac||{}),Od.getRef=function(){return null==Od.instance&&(Od.instance=new Od),
Od.instance},window.onWacomPluginLoaded=function(){Od.getRef().pluginLoaded()},Ie.prototype.clone=function(){for(var c=new Ie(Array(this.points.length)),d=0;d<this.points.length;d++)c.points[d]={x:this.points[d].x,y:this.points[d].y};return c},Ie.prototype.getTransformed=function(c){for(var d=new Ie(Array(this.points.length)),b=0;b<this.points.length;b++)d.points[b]=c.getTransformedPoint(this.points[b]);return d},Ie.prototype.getCenter=function(){for(var c=this.points[0].x,d=this.points[0].y,b=1;b<
this.points.length;b++)c+=this.points[b].x,d+=this.points[b].y;return{x:c/this.points.length,y:d/this.points.length}},Ie.prototype.containsPoint=function(c){var d,b=!1;var g=0;for(d=this.points.length-1;g<this.points.length;d=g++)this.points[g].y>c.y!=this.points[d].y>c.y&&c.x<(this.points[d].x-this.points[g].x)*(c.y-this.points[g].y)/(this.points[d].y-this.points[g].y)+this.points[g].x&&(b=!b);return b},Vb.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Vb.prototype.normalize=
function(){var c=this.getLength();return this.x/=c,this.y/=c,this},Vb.prototype.getDotProduct=function(c){return this.x*c.x+this.y*c.y},Vb.prototype.scale=function(c){return this.x*=c,this.y*=c,this},Vb.prototype.getScaled=function(c){var d=new Vb(this.x,this.y);return d.scale(c),d},Vb.prototype.getRounded=function(){return new Vb(Math.round(this.x),Math.round(this.y))},Vb.prototype.getTruncated=function(){return new Vb(~~this.x,~~this.y)},Vb.prototype.getPerpendicular=function(){return new Vb(-this.y,
this.x)},Vb.prototype.add=function(c){return this.x+=c.x,this.y+=c.y,this},Vb.prototype.subtract=function(c){return this.x-=c.x,this.y-=c.y,this},Vb.prototype.getSum=function(c){return new Vb(this.x+c.x,this.y+c.y)},Vb.subtractPoints=function(c,d){return new Vb(c.x-d.x,c.y-d.y)},dg.prototype=Object.create(X(ic).prototype),dg.prototype.constructor=dg,Bc.MODE_INDEX_DEFAULT=0,Bc.MODE_INDEX_USER=1,Bc.prototype.setMode=function(c,d){var b=this.modes[c];b!=d&&(b&&b.leave(),this.modes[c]=d,d.enter())},Bc.prototype.setDefaultMode=
function(c){c.transient=!1;c.capture=!1;this.setMode(Bc.MODE_INDEX_DEFAULT,c)},Bc.prototype.setUserMode=function(c){for(var d=this.modes.length-1;d>Bc.MODE_INDEX_USER;d--)this.modes[d].leave(),this.modes.splice(d,1);c.transient=!1;c.capture=!1;this.setMode(Bc.MODE_INDEX_USER,c)},Bc.prototype.deliverEvent=function(c,d){for(var b=this.modes.length-1;0<=b;b--){var g=this.modes[b];if(g[c].apply(g,d)||g.capture&&"paint"!=c)return!0}return!1},["mouseDown","mouseUp"]))Bc.prototype[a]=function(c,d,b){this.deliverEvent(a,
[c,d,b])};for(let a of["mouseDrag","mouseMove"])Bc.prototype[a]=function(c,d){this.deliverEvent(a,[c,d])};for(let a of["keyDown","keyUp"])Bc.prototype[a]=function(c){this.deliverEvent(a,[c])&&c.preventDefault()};Bc.prototype.paint=function(a){this.deliverEvent("paint",[a])};Bc.prototype.push=function(a,c){var d=this.peek();d&&d.suspend();a.transient=c;a.capture=!1;a.enter();this.modes.push(a)};Bc.prototype.peek=function(){return 0<this.modes.length?this.modes[this.modes.length-1]:null};Bc.prototype.pop=
function(){var a=this.modes.pop(),c=this.peek();return a&&a.leave(),c&&c.resume(),c};Tg.prototype=Object.create(X(ic).prototype);Tg.prototype.constructor=Tg;yc.prototype=Object.create(X(ic).prototype);yc.prototype.constructor=X(ic);Ug.prototype=Object.create(yc.prototype);Ug.prototype.constructor=Ug;Vg.prototype=Object.create(yc.prototype);Vg.prototype.constructor=Vg;Wg.prototype=Object.create(yc.prototype);Wg.prototype.constructor=Wg;let fi=window.devicePixelRatio||1,df=Math.round(128*fi),ef=Math.round(128*
fi);class pl{_makeBitmap(){if(this._bitmapInvalid){var a=0,c=this._imageData.data;if(this._greyscale)for(var d=0;d<ef;d++){var b=255-Math.round(d/(ef-1)*255);for(var g=0;g<df;g++)c[a+I.RED_BYTE_OFFSET]=b,c[a+I.GREEN_BYTE_OFFSET]=b,c[a+I.BLUE_BYTE_OFFSET]=b,c[a+I.ALPHA_BYTE_OFFSET]=255,a+=I.BYTES_PER_PIXEL}else for(d=this.color.clone(),b=0;b<ef;b++)for(d.setValue(255-~~(b/(ef-1)*255)),g=0;g<df;g++)d.setSaturation(Math.round(g/(df-1)*255)),c[a+I.RED_BYTE_OFFSET]=d.rgb>>16&255,c[a+I.GREEN_BYTE_OFFSET]=
d.rgb>>8&255,c[a+I.BLUE_BYTE_OFFSET]=255&d.rgb,c[a+I.ALPHA_BYTE_OFFSET]=255,a+=I.BYTES_PER_PIXEL;this._bitmapInvalid=!1}}paint(){this._makeBitmap();this._canvasContext.putImageData(this._imageData,0,0);let a=this.color.getSaturation()/255*(df-1),c=(255-this.color.getValue())/255*(ef-1);Sg(this._canvasContext,"stroke");this._canvasContext.lineWidth=1.5*fi;this._canvasContext.beginPath();this._greyscale?(this._canvasContext.moveTo(0,c),this._canvasContext.lineTo(df,c)):this._canvasContext.arc(a,c,5*
fi,0,2*Math.PI);this._canvasContext.stroke();this._canvasContext.globalCompositeOperation="source-over"}_mousePickColor(a){var c=a.pageX-X(ia)(this._canvas).offset().left;a=Math.max(Math.min(255-~~(255*(a.pageY-X(ia)(this._canvas).offset().top)/127),255),0);this._greyscale?this.color.setGreyscale(a):(c=Math.max(Math.min(~~(255*c/127),255),0),this.color.setHsv(this.color.getHue(),c,a));this.paint();this._controller.setCurColor(this.color)}_endDrag(a){this._canvas.releasePointerCapture(a.pointerId);
this._capturedMouse=!1;this._canvas.removeEventListener("pointerup",this._handleEndDrag);this._canvas.removeEventListener("pointermove",this._handleMousePickColor)}_startDrag(a){this._capturedMouse||(this._capturedMouse=!0,this._canvas.setPointerCapture(a.pointerId),this._canvas.addEventListener("pointerup",this._handleEndDrag),this._canvas.addEventListener("pointermove",this._handleMousePickColor));this._handleMousePickColor(a)}setHue(a){this.color.getHue()!=a&&(this.color.setHue(a),this._controller.setCurColor(this.color))}getElement(){return this._canvas}constructor(a,
c){Rc(this,"_controller",void 0);Rc(this,"_canvas",void 0);Rc(this,"_canvasContext",void 0);Rc(this,"_imageData",void 0);Rc(this,"_bitmapInvalid",!0);Rc(this,"_capturedMouse",!1);Rc(this,"_greyscale",!1);Rc(this,"color",new Gb(0));this._controller=a;let d=document.createElement("canvas");this._canvas=d;d.className="chickenpaint-colorpicker-select";d.setAttribute("touch-action","none");d.width=df;d.height=ef;d.style.width="128px";d.style.height="128px";this._canvasContext=d.getContext("2d");this._imageData=
this._canvasContext.createImageData(df,ef);this._canvasContext.getImageData(0,0,1,1);this._handleEndDrag=this._endDrag.bind(this);this._handleMousePickColor=this._mousePickColor.bind(this);d.addEventListener("pointerdown",b=>this._startDrag(b));c&&this.color.copyFrom(c);a.on("colorChange",b=>{this.color.copyFrom(b);this._bitmapInvalid=!0;this.paint()});a.on("colorModeChange",b=>{this._greyscale="greyscale"==b;this._bitmapInvalid=!0;this.paint()});this.paint()}}class ql{paint(){this._canvasContext.putImageData(this._imageData,
0,0);let a=128*this.hue/360;Sg(this._canvasContext,"stroke");this._canvasContext.lineWidth=1.5;this._canvasContext.beginPath();this._canvasContext.moveTo(0,a);this._canvasContext.lineTo(24,a);this._canvasContext.stroke();this._canvasContext.globalCompositeOperation="source-over"}_mousePickColor(a){a=a.pageY-X(ia)(this._canvas).offset().top;this.hue=Math.max(0,Math.min(359,~~(360*a/128)));this.paint();this.selecter&&this.selecter.setHue(this.hue)}_endDrag(a){this._canvas.releasePointerCapture(a.pointerId);
this._capturedMouse=!1;this._canvas.removeEventListener("pointerup",this._handleEndDrag);this._canvas.removeEventListener("pointermove",this._handleMousePickColor)}_startDrag(a){this._capturedMouse||(this._capturedMouse=!0,this._canvas.setPointerCapture(a.pointerId),this._canvas.addEventListener("pointerup",this._handleEndDrag),this._canvas.addEventListener("pointermove",this._handleMousePickColor));this._handleMousePickColor(a)}getElement(){return this._canvas}setHue(a){this.hue=a;this.paint()}constructor(a,
c,d){Rc(this,"hue",void 0);Rc(this,"selecter",void 0);Rc(this,"_canvas",void 0);Rc(this,"_canvasContext",void 0);Rc(this,"_imageData",void 0);Rc(this,"_capturedMouse",!1);this.selecter=c;this.hue=d||0;let b=document.createElement("canvas");this._canvas=b;a.on("colorChange",g=>{this.setHue(g.getHue())});a.on("colorModeChange",g=>{b.style.display="greyscale"==g?"none":"block"});b.setAttribute("touch-action","none");b.addEventListener("pointerdown",g=>this._startDrag(g));b.width=24;b.height=128;b.className=
"chickenpaint-colorpicker-slider";this._canvasContext=b.getContext("2d");this._imageData=this._canvasContext.createImageData(24,128);this._canvasContext.getImageData(0,0,1,1);this._handleEndDrag=this._endDrag.bind(this);this._handleMousePickColor=this._mousePickColor.bind(this);(function(g){let p=new Gb(65535),k=0,e=g.data;for(let l=0;l<g.height;l++){p.setHue(359*l/g.height);for(let m=0;m<g.width;m++)e[k+I.RED_BYTE_OFFSET]=p.rgb>>16&255,e[k+I.GREEN_BYTE_OFFSET]=p.rgb>>8&255,e[k+I.BLUE_BYTE_OFFSET]=
255&p.rgb,e[k+I.ALPHA_BYTE_OFFSET]=255,k+=I.BYTES_PER_PIXEL}})(this._imageData);this.paint()}}Xg.prototype=Object.create(yc.prototype);Xg.prototype.constructor=Xg;lf.prototype=Object.create(X(ic).prototype);lf.prototype.constructor=lf;Xc.prototype=Object.create(X(ic).prototype);Xc.prototype.constructor=Xc;eg.prototype=Object.create(X(ic).prototype);eg.prototype.constructor=eg;mf.prototype=Object.create(yc.prototype);mf.prototype.constructor=mf;mf.CPBrushPreview=function(a){function c(){k.clearRect(0,
0,p.width,p.height);k.beginPath();k.arc(p.width/2,p.height/2,g/2*window.devicePixelRatio,0,2*Math.PI);k.stroke()}function d(l){let m=X(ia)(p).offset();var h=l.pageY-m.top;l=l.pageX-m.left-X(ia)(p).width()/2;h-=X(ia)(p).height()/2;g=Math.max(1,Math.min(200,Math.round(2*Math.sqrt(l*l+h*h))));c();a.setBrushSize(g)}function b(l){e&&(e=!1,window.removeEventListener("mouseup",b),window.removeEventListener("mousemove",d))}let g=16,p=document.createElement("canvas"),k=p.getContext("2d"),e=!1;this.getElement=
function(){return p};p.addEventListener("mousedown",function(l){e||(e=!0,window.addEventListener("mouseup",b),window.addEventListener("mousemove",d),d(l))});a.on("toolChange",function(l,m){m.size!=g&&(g=m.size,c())});p.width=64;p.height=64;1<window.devicePixelRatio&&(p.style.width=p.width+"px",p.style.height=p.height+"px",p.width*=window.devicePixelRatio,p.height*=window.devicePixelRatio);p.className="chickenpaint-brush-preview";k.strokeStyle="black";k.lineWidth=1*window.devicePixelRatio;c()};Yg.prototype=
Object.create(yc.prototype);Yg.prototype.constructor=Yg;Zg.prototype=Object.create(yc.prototype);Zg.prototype.constructor=Zg;$g.prototype=Object.create(yc.prototype);$g.prototype.constructor=$g;ah.prototype=Object.create(X(ic).prototype);ah.prototype.constructor=ah;let ul=[{name:"File",mnemonic:"F",children:[{name:"Save to my computer",action:"CPSave",mnemonic:"S",shortcut:"ctrl+s"},{name:"Save Oekaki",action:"CPSend",mnemonic:"S",shortcut:"ctrl+s"}]},{name:"Edit",mnemonic:"E",children:[{name:"Undo",
action:"CPUndo",mnemonic:"U",shortcut:"ctrl+z"},{name:"Redo",action:"CPRedo",mnemonic:"R",shortcut:"ctrl+y"},{name:"Clear history",action:"CPClearHistory",mnemonic:"H",title:ma("Removes all undo/redo information to regain memory")},{name:"-"},{name:"Cut",action:"CPCut",mnemonic:"T",shortcut:"ctrl+x"},{name:"Copy",action:"CPCopy",mnemonic:"C",shortcut:"ctrl+c"},{name:"Copy merged",action:"CPCopyMerged",mnemonic:"Y",shortcut:"shift+ctrl+c"},{name:"Paste",action:"CPPaste",mnemonic:"P",shortcut:"ctrl+v"},
{name:"-"},{name:"Select all",action:"CPSelectAll",mnemonic:"A",shortcut:"ctrl+a"},{name:"Deselect",action:"CPDeselectAll",mnemonic:"D",shortcut:"ctrl+d"},{name:"-"},{name:"Transform",action:"CPTransform",mnemonic:"T",shortcut:"ctrl+h"}]},{name:"Layers",mnemonic:"L",children:[{name:"Duplicate",action:"CPLayerDuplicate",mnemonic:"D",shortcut:"shift+ctrl+d"},{name:"-"},{name:"Merge down",action:"CPLayerMergeDown",mnemonic:"E",shortcut:"ctrl+e"},{name:"Merge group",action:"CPGroupMerge",mnemonic:"G",
shortcut:"shift+ctrl+g"},{name:"Merge all layers",action:"CPLayerMergeAll",shortcut:"shift+ctrl+e",mnemonic:"A"},{name:"-"},{hideIfNotAvailable:!0,name:"Add layer mask",action:"CPAddLayerMask"},{hideIfNotAvailable:!0,name:"Delete layer mask",action:"CPRemoveLayerMask",shortcut:"shift+m"},{hideIfNotAvailable:!0,name:"Apply layer mask",action:"CPApplyLayerMask",shortcut:"ctrl+m"},{name:"-"},{hideIfNotAvailable:!0,name:"Clip to the layer below",action:"CPCreateClippingMask"},{hideIfNotAvailable:!0,name:"Unclip from the layer below",
action:"CPReleaseClippingMask"}]},{name:"Effects",mnemonic:"E",children:[{name:"Clear",action:"CPClear",mnemonic:"D",shortcut:"del,backspace"},{name:"Fill",action:"CPFill",mnemonic:"F",shortcut:"ctrl+f"},{name:"Flip horizontal",action:"CPHFlip",mnemonic:"H",shortcut:"h"},{name:"Flip vertical",action:"CPVFlip",mnemonic:"V"},{name:"Invert",action:"CPFXInvert",mnemonic:"I",shortcut:"ctrl+i",title:ma("Invert the image colors")},{name:"-"},{name:"Box blur...",action:"CPFXBoxBlur",mnemonic:"B"},{name:"-"},
{name:"Monochromatic noise",action:"CPMNoise",mnemonic:"M",title:ma("Fills the selection with noise")},{name:"Color noise",action:"CPCNoise",mnemonic:"C",title:ma("Fills the selection with colored noise")}]},{name:"View",mnemonic:"V",children:[{name:"Full-screen mode",action:"CPFullScreen",mnemonic:"F",checkbox:!0,checked:!1},{name:"-"},{name:"Zoom in",action:"CPZoomIn",mnemonic:"I",shortcut:"ctrl+="},{name:"Zoom out",action:"CPZoomOut",mnemonic:"O",shortcut:"ctrl+-"},{name:"Zoom 100%",action:"CPZoom100",
mnemonic:"1",shortcut:"ctrl+0"},{action:"CPLinearInterpolation",name:"-"},{name:"Smooth-out zoomed canvas",action:"CPLinearInterpolation",mnemonic:"L",title:ma("Linear interpolation is used to give a smoothed looked to the picture when zoomed in"),checkbox:!0,checked:!0},{name:"-"},{name:"Show grid",action:"CPToggleGrid",mnemonic:"G",shortcut:"ctrl+g",checkbox:!0,checked:!1},{name:"Grid options...",action:"CPGridOptions",mnemonic:"D"}]},{name:"Palettes",mnemonic:"P",children:[{name:"Rearrange",action:"CPArrangePalettes",
title:ma("Rearrange the palette windows")},{name:"Toggle palettes",action:"CPTogglePalettes",mnemonic:"P",shortcut:"tab",title:ma("Hides or shows all palettes")},{name:"-"},{name:"Show tools",action:"CPPalTool",mnemonic:"T",checkbox:!0,checked:!0},{name:"Show color",action:"CPPalColor",mnemonic:"C",checkbox:!0,checked:!0},{name:"Show stroke",action:"CPPalStroke",mnemonic:"S",checkbox:!0,checked:!0},{name:"Show misc",action:"CPPalMisc",mnemonic:"M",checkbox:!0,checked:!0},{name:"Show swatches",action:"CPPalSwatches",
mnemonic:"W",checkbox:!0,checked:!0},{name:"Show textures",action:"CPPalTextures",mnemonic:"X",checkbox:!0,checked:!0},{name:"Show tool options",action:"CPPalBrush",mnemonic:"B",checkbox:!0,checked:!0},{name:"Show layers",action:"CPPalLayers",mnemonic:"L",checkbox:!0,checked:!0}]},{name:"Help",mnemonic:"H",children:[{name:"Tablet support",mnemonic:"T",action:"CPTabletSupport"},{name:"Shortcuts",mnemonic:"S",action:"CPShortcuts"},{name:"-"},{name:"About",mnemonic:"A",action:"CPAbout"}]}];bh.prototype=
Object.create(X(ic).prototype);bh.prototype.constructor=bh;ch.prototype=Object.create(X(ic).prototype);ch.prototype.constructor=ch;let vl=navigator.userAgent.toLowerCase().includes("mac os")?"\u2318":"Ctrl";dh.prototype=Object.create(X(ic).prototype);dh.prototype.constructor=dh;let he={toolbarStyle:"new"};class yp extends X(ic){setDefaults(){for(let a in he)he.hasOwnProperty(a)&&this.set(a,he[a])}load(){let a={};try{a=JSON.parse(localStorage.getItem("chickenpaint-prefs"))}catch(c){console.error(c)}for(let c in a&&
"object"==typeof a||(a={}),he)if(he.hasOwnProperty(c))try{this.set(c,a.hasOwnProperty(c)?a[c]:he[c])}catch(d){console.error(d)}}save(){try{let a=!1;for(let c in he)if(he.hasOwnProperty(c)&&this[c]!=he[c]){a=!0;break}a?localStorage.setItem("chickenpaint-prefs",JSON.stringify({toolbarStyle:this.toolbarStyle})):localStorage.removeItem("chickenpaint-prefs")}catch(a){console.error(a)}}set(a,c){this[a]=c;this.emitEvent(a,[c])}get(a){return this[a]}constructor(){super();Rc(this,"toolbarStyle",void 0);this.setDefaults()}}
window.PointerEvent&&(window.hasNativePointerEvents=!0);na.prototype=Object.create(X(ic).prototype);na.prototype.constructor=na;na.UnsupportedBrowserException=function(a){this.message=a};na.UnsupportedBrowserException.prototype.toString=function(){let a="Sorry, your web browser does not support ChickenPaint.";return this.message?a+=" "+this.message:a+=" Please try a modern browser like Chrome, Safari, Firefox, or Edge.",a};na.M_DRAW=0;na.M_FLOODFILL=1;na.M_RECT_SELECTION=2;na.M_MOVE_TOOL=3;na.M_ROTATE_CANVAS=
4;na.M_COLOR_PICKER=5;na.M_GRADIENTFILL=6;na.M_TRANSFORM=7;na.M_PAN_CANVAS=8;na.T_PENCIL=0;na.T_ERASER=1;na.T_PEN=2;na.T_SOFTERASER=3;na.T_AIRBRUSH=4;na.T_DODGE=5;na.T_BURN=6;na.T_WATER=7;na.T_BLUR=8;na.T_SMUDGE=9;na.T_BLENDER=10;na.T_MAX=11;na.COLOR_MODE_RGB=0;na.COLOR_MODE_GREYSCALE=1;window.ChickenPaint=na;window.bootstrap=Bo}();
