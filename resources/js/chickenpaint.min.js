/*
    ChickenPaint Be
    https://github.com/satopian/ChickenPaint_Be
    by satopian
    Customized from ChickenPaint by Nicholas Sherlock.
    GNU GENERAL PUBLIC LICENSE
    Version 3, 29 June 2007
    <http://www.gnu.org/licenses/>
*/
/*
    ChickenPaint

    ChickenPaint is a translation of ChibiPaint from Java to JavaScript
    by Nicholas Sherlock / Chicken Smoothie.

    ChibiPaint is Copyright (c) 2006-2008 Marc Schefer

    ChickenPaint is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    ChickenPaint is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with ChickenPaint. If not, see <http://www.gnu.org/licenses/>.
*/
/*
    jQuery JavaScript Library
    (c) OpenJS Foundation and other contributors | https://jquery.com/license/
    PEP v0.4.3 | https://github.com/jquery/PEP
    (c) OpenJS Foundation and other contributors | https://jquery.com/license/
    EventEmitter v5.2.9 - git.io/ee
    Unlicense - http://unlicense.org/
    Oliver Caldwell - https://oli.me.uk/
*/
/*
 Bootstrap v5.3.3 (https://getbootstrap.com/)
 Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
 Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
 jQuery throttle / debounce - v1.1 - 3/7/2010
 http://benalman.com/projects/jquery-throttle-debounce-plugin/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
*/
!function(){function fa(a){return a&&a.__esModule?a.default:a}function Ke(a,c,d,b){Object.defineProperty(a,c,{get:d,set:b,enumerable:!0,configurable:!0})}function Vd(a){return a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a}function zi(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ib(a,c){if(!(a instanceof c))throw TypeError("Cannot call a class as a function");}function el(a,c){for(var d=0;d<c.length;d++){var b=
c[d];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}function Jb(a,c,d){return c&&el(a.prototype,c),d&&el(a,d),a}function Sc(a){return(Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)})(a)}function hd(a,c,d){return(hd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(b,f,k){var l;for(l=b;!Object.prototype.hasOwnProperty.call(l,f)&&null!==(l=Sc(l)););if(l)return f=Object.getOwnPropertyDescriptor(l,
f),f.get?f.get.call(k||b):f.value})(a,c,d||a)}function fl(a,c){return(fl=Object.setPrototypeOf||function(d,b){return d.__proto__=b,d})(a,c)}function gc(a,c){if("function"!=typeof c&&null!==c)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,writable:!0,configurable:!0}});c&&fl(a,c)}function id(a,c,d){return c in a?Object.defineProperty(a,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[c]=d,a}function Le(a){for(var c=
1;c<arguments.length;c++){var d=null!=arguments[c]?arguments[c]:{},b=Object.keys(d);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(d).filter(function(f){return Object.getOwnPropertyDescriptor(d,f).enumerable})));b.forEach(function(f){id(a,f,d[f])})}return a}function Ai(a,c){return c=null!=c?c:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):function(d,b){b=Object.keys(d);Object.getOwnPropertySymbols&&(d=Object.getOwnPropertySymbols(d),
b.push.apply(b,d));return b}(Object(c)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))}),a}function od(a,c){return!c||"object"!==Vd(c)&&"function"!=typeof c?zi(a):c}function Bi(a,c){(null==c||c>a.length)&&(c=a.length);for(var d=0,b=Array(c);d<c;d++)b[d]=a[d];return b}function gl(a,c){if(a){if("string"==typeof a)return Bi(a,c);var d=Object.prototype.toString.call(a).slice(8,-1);if("Object"===d&&a.constructor&&(d=a.constructor.name),"Map"===d||"Set"===d)return Array.from(d);
if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Bi(a,c)}}function te(a,c){if(!(a=function(d){if(Array.isArray(d))return d}(a)||function(d,b){var f,k=null==d?null:"undefined"!=typeof Symbol&&d[Symbol.iterator]||d["@@iterator"];if(null!=k){var l=[],h=!0,e=!1;try{for(k=k.call(d);!(h=(f=k.next()).done)&&(l.push(f.value),!b||l.length!==b);h=!0);}catch(p){e=!0;var g=p}finally{try{h||null==k.return||k.return()}finally{if(e)throw g;}}return l}}(a,c)||gl(a,c)))throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
return a}function ce(a){var c=Array.isArray(a)?Bi(a):void 0;c||(c="undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"]?Array.from(a):void 0);if(!(a=c||gl(a)))throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return a}function hl(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(c){}return(hl=function(){return!!a})()}function hc(a){var c=
hl();return function(){var d,b=Sc(a);return d=c?Reflect.construct(b,arguments,Sc(this).constructor):b.apply(this,arguments),od(this,d)}}function Pa(a){for(var c in Pa.DEFAULTS)Pa.DEFAULTS.hasOwnProperty(c)&&(this[c]=Pa.DEFAULTS[c]);for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])}function Va(a,c,d,b){this.left=a;this.top=c;this.right=d;this.bottom=b}function hf(a,c){this.width=0|a;this.height=0|c}function de(a,c){var d=document.createElement("canvas");return d.width=a,d.height=c,d}function Ci(a,c){return document.createElement("canvas").getContext("2d").createImageData(a,
c)}function J(a,c){"number"==typeof a?(hf.call(this,a,c),this.imageData=Ci(this.width,this.height)):(hf.call(this,a.width,a.height),this.imageData=a);this.data=this.imageData.data}function il(a,c,d,b){var f,k,l=0,h=[0,0,0,0];for(k=f=0;k<b&&k<d;k++){for(var e=0;e<J.BYTES_PER_PIXEL;e++)h[e]+=a[f++];l++}for(e=k=0;e<d;e++){if(e+b<d){f=(e+b)*J.BYTES_PER_PIXEL;for(var g=0;g<J.BYTES_PER_PIXEL;g++)h[g]+=a[f++];l++}for(f=0;f<J.BYTES_PER_PIXEL;f++)c[k++]=Math.round(h[f]/l);if(0<=e-b){f=(e-b)*J.BYTES_PER_PIXEL;
for(g=0;g<J.BYTES_PER_PIXEL;g++)h[g]-=a[f++];l--}}}function jl(a,c){if(0==(c%=4))return a;var d=de(0,0),b=d.getContext("2d");switch(0==c%2?(d.width=a.width,d.height=a.height):(d.width=a.height,d.height=a.width),c){case 1:b.rotate(Math.PI/2);b.drawImage(a,0,-a.height);break;case 2:b.rotate(Math.PI);b.drawImage(a,-a.width,-a.height);break;case 3:b.rotate(-Math.PI/2);b.drawImage(a,-a.width,0);break;default:return a}return d}function Kb(a,c){Ob.call(this,a);this.layers=[];this.expanded=!0;this.blendMode=
c}function ip(a,c){return a+c}function pb(a,c,d){hf.call(this,a,c);this.createBitmap(a,c,d)}function kl(a,c,d,b){var f,k=0,l=0;for(f=0;f<b&&f<d;f++)l+=a[f],k++;for(var h=f=0;h<d;h++)h+b<d&&(l+=a[h+b],k++),c[f++]=Math.round(l/k),0<=h-b&&(l-=a[h-b],k--)}function W(){}function Ob(a){this.name=a||"";this.parent=null;this.lockAlpha=!1;this.alpha=100;this.visible=!0;this.blendMode=W.LM_NORMAL;this.mask=null;this.maskVisible=this.maskLinked=!0;this.maskThumbnail=null;this.useLegacyMultiply=!1}function Ya(a,
c,d){Ob.call(this,d);0<a&&0<c?this.image=new J(a,c):this.image=null;this.clip=!1;this.imageThumbnail=null}function og(a,c,d){d?(this.isGroup=d instanceof Kb,this.image=d.image,this.mask=d.getEffectiveMask(),this.layer=d,this.blendMode=d.blendMode,this.alpha=d.alpha,this.visible=d.visible):(this.isGroup=!0,this.image=null,this.mask=null,this.layer=null,this.blendMode=W.LM_PASSTHROUGH,this.alpha=100,this.visible=!0);this.dirtyRect=new Va(0,0,a,c);this.layers=[];this.parent=null;this.clip=!1}function ll(a,
c,d,b){function f(){return 0<g.length?g.pop():new J(c,d)}function k(m){if(0==m.layers.length)return null;if(1==m.layers.length&&(null==m.mask||null==m.layers[0].mask)){var n=m.layers[0];return n.alpha=Math.round(m.alpha*n.alpha/100),m.blendMode!=W.LM_PASSTHROUGH&&(n.blendMode=m.blendMode),n.mask=m.mask||n.mask,m.layer&&p.set(m.layer,n),n}return m.blendMode==W.LM_PASSTHROUGH&&100==m.alpha&&null==m.mask?m.layers:(m.image=f(),m)}function l(m){var n=new og(c,d,m);return p.set(m,n),n}function h(m,n){m&&
(m.dirtyRect.union(n),h(m.parent,n))}var e,g=[],p=new Map;this.invalidateLayerRect=function(m,n){h(p.get(m),n)};this.buildTree=function(){if(!e){if(e=function u(r){if(0==r.getEffectiveAlpha())return null;for(var w=l(r),z=0;z<r.layers.length;z++){var G=r.layers[z],L=r.layers[z+1];if(G instanceof Ya&&L&&L.clip){L=new og(c,d,null);L.blendMode=G.blendMode;L.alpha=100;L.clip=!0;L.addChildren(l(G));for(z+=1;z<r.layers.length&&r.layers[z].clip;z++)0<r.layers[z].getEffectiveAlpha()&&L.addChildren(l(r.layers[z]));
0<G.getEffectiveAlpha()&&w.addChildren(k(L));--z}else G instanceof Kb?w.addChildren(u(G)):0<G.getEffectiveAlpha()&&w.addChildren(l(G))}return k(w)}(a)){if(Array.isArray(e)||b&&(100>e.alpha||e.mask)){var m=e;(e=new og(c,d)).blendMode=Array.isArray(m)?W.LM_NORMAL:m.blendMode;e.alpha=100;e.image=f();e.addChildren(m)}}else(e=new og(c,d,{image:f(),blendMode:W.LM_NORMAL,alpha:100,getEffectiveMask:function(){return null},visible:!0})).image.clearAll(0);g=[]}};this.resetTree=function(){e&&(function r(n){if(n.isGroup){n.image&&
g.push(n.image);var u=!0,w=!1,z=void 0;try{for(var G,L=n.layers[Symbol.iterator]();!(u=(G=L.next()).done);u=!0)r(G.value)}catch(O){w=!0,z=O}finally{try{u||null==L.return||L.return()}finally{if(w)throw z;}}}}(e),e=null,p.clear())};this.layerPropertyChanged=function(m,n){var r=p.get(m);r&&r.visible==m.visible&&r.alpha==m.alpha&&null==r.mask==(null==m.getEffectiveMask())&&r.blendMode==W.LM_PASSTHROUGH==(m.blendMode==W.LM_PASSTHROUGH)&&"clip"!==n?(r.blendMode=m.blendMode,h(r,new Va(0,0,c,d))):this.resetTree()};
this.blendTree=function(){return function r(n){if(!n||!n.isGroup)return n;var u,w,z=n.dirtyRect,G=!0,L=!0;if(n.blendMode==W.LM_PASSTHROUGH&&n.parent&&z.union(n.parent.dirtyRect),z.isEmpty())return n;n.blendMode==W.LM_PASSTHROUGH&&n.parent&&(G=!1,u=n.image,w=n.parent.image,z.getWidth()==u.width&&z.getHeight()==u.height?u.copyPixelsFrom(w):W.replaceOntoFusionWithOpaqueLayer(u,w,100,z));for(u=0;u<n.layers.length;u++){var O=r(n.layers[u]);if(G){G=n.image;w=O.image;var N=O.alpha,ea=z;O=O.mask;if(100!=
N||O||ea.getWidth()!=G.width||ea.getHeight()!=G.height){var Y="replaceOntoFusionWith";100==N?Y+="OpaqueLayer":Y+="TransparentLayer";O&&(Y+="Masked");W[Y](G,w,N,ea,O)}else G.copyPixelsFrom(w);G=!1}else L=L&&n.image.hasAlphaInRect(z),W.fuseImageOntoImage(n.image,L,O.image,O.alpha,O.blendMode,z,O.mask)}n.clip&&(L=n.layers[0],100>L.alpha?L.mask?W.replaceAlphaOntoFusionWithTransparentLayerMasked(n.image,L.image,L.alpha,z,L.mask):W.replaceAlphaOntoFusionWithTransparentLayer(n.image,L.image,L.alpha,z):L.mask?
W.replaceAlphaOntoFusionWithOpaqueLayerMasked(n.image,L.image,100,z,L.mask):W.replaceAlphaOntoFusionWithOpaqueLayer(n.image,L.image,100,z));return n.dirtyRect.makeEmpty(),n}(e)}}function jp(){function a(p){if(null!=e&&p.curSize==c&&p.curSqueeze==d&&p.curAngle==b&&p.tip==f)return e;switch(p.tip){case Pa.TIP_ROUND_AIRBRUSH:!function(m,n){var r=Math.ceil(n.curSize),u=r/2,w=n.curSize/2*(n.curSize/2),z=1+10*n.curSqueeze,G=Math.cos(n.curAngle);n=Math.sin(n.curAngle);for(var L=0,O=0;O<r;O++)for(var N=0;N<
r;N++){var ea=N+.5-u,Y=O+.5-u,ka=(ea*G-Y*n)*z;ea=Y*G+ea*n;ka=ka*ka+ea*ea;ka<=w?m[L++]=~~(255*(1-ka/w)):m[L++]=0}}(k,p);break;case Pa.TIP_ROUND_AA:!function(m,n){var r=Math.ceil(n.curSize),u=r/2,w=n.curSize/2*(n.curSize/2),z=(n.curSize-2)/2*((n.curSize-2)/2),G=(n.curSize+2)/2*((n.curSize+2)/2),L=1+10*n.curSqueeze,O=Math.cos(n.curAngle);n=Math.sin(n.curAngle);for(var N=0,ea=0;ea<r;ea++)for(var Y=0;Y<r;Y++){var ka=Y+.5-u,ha=ea+.5-u,qa=(ka*O-ha*n)*L,Da=ha*O+ka*n,La=qa*qa+Da*Da;if(La<=z)m[N++]=255;else if(La>
G)m[N++]=0;else{for(var Ka=La=0;4>Ka;Ka++)for(var V=0;4>V;V++)(qa=((ka=Y+.25*V-u)*O-(ha=ea+.25*Ka-u)*n)*L)*qa+(Da=ha*O+ka*n)*Da<=w&&(La+=1);m[N++]=Math.min(16*La,255)}}}(k,p);break;case Pa.TIP_ROUND_PIXEL:!function(m,n){var r=Math.ceil(n.curSize),u=r/2,w=n.curSize/2*(n.curSize/2),z=1+10*n.curSqueeze,G=Math.cos(n.curAngle);n=Math.sin(n.curAngle);for(var L=0,O=0;O<r;O++)for(var N=0;N<r;N++){var ea=N+.5-u,Y=O+.5-u,ka=(ea*G-Y*n)*z;ea=Y*G+ea*n;ka*ka+ea*ea<=w?m[L++]=255:m[L++]=0}}(k,p);break;case Pa.TIP_SQUARE_AA:!function(m,
n){var r=Math.ceil(n.curSize),u=r/2,w=n.curSize*Math.sin(Math.PI/4),z=w/2/(1+10*n.curSqueeze);w/=2;var G=z-1,L=w-1,O=z+1,N=w+1,ea=Math.cos(n.curAngle);n=Math.sin(n.curAngle);for(var Y=0,ka=0;ka<r;ka++)for(var ha=0;ha<r;ha++){var qa=ha+.5-u,Da=ka+.5-u,La=Math.abs(qa*ea-Da*n);qa=Math.abs(Da*ea+qa*n);if(La<=G&&qa<=L)m[Y++]=255;else if(La>O||qa>N)m[Y++]=0;else{for(var Ka=0,V=0;4>V;V++)for(var Na=0;4>Na;Na++)La=Math.abs((qa=ha+.25*Na-u)*ea-(Da=ka+.25*V-u)*n),qa=Math.abs(Da*ea+qa*n),La<=z&&qa<=w&&Ka++;
m[Y++]=Math.min(16*Ka,255)}}}(k,p);break;case Pa.TIP_SQUARE_PIXEL:!function(m,n){var r=Math.ceil(n.curSize),u=r/2,w=n.curSize*Math.sin(Math.PI/4),z=w/2/(1+10*n.curSqueeze);w/=2;var G=Math.cos(n.curAngle);n=Math.sin(n.curAngle);for(var L=0,O=0;O<r;O++)for(var N=0;N<r;N++){var ea=N+.5-u,Y=O+.5-u,ka=Math.abs(Y*G+ea*n);Math.abs(ea*G-Y*n)<=z&&ka<=w?m[L++]=255:m[L++]=0}}(k,p)}return e=k,c=p.curSize,f=p.tip,d=p.curSqueeze,b=p.curAngle,k}var c,d,b,f,k=new Uint8Array(160801),l=new Uint8Array(161604),h=[new Float32Array(402),
new Float32Array(402)],e=null,g=this;this.getDab=function(p,m,n){var r={alpha:n.curAlpha,width:Math.ceil(n.curSize),height:Math.ceil(n.curSize)},u=n.isAA&&n.tip!=Pa.TIP_ROUND_PIXEL;u&&(r.width++,r.height++);p=p-r.width/2+.5;m=m-r.height/2+.5;var w=Math.floor(p),z=Math.floor(m);return u?r.brush=function(G,L,O){var N=a(G),ea=Math.ceil(G.curSize);G=Math.ceil(G.curSize)+1;var Y=(1-L)*(1-O),ka=L*(1-O),ha=L*O,qa=(1-L)*O,Da=0;L=0;O=h[0];var La=h[1];O.fill(0);for(var Ka=0;Ka<ea;Ka++){var V=0;for(La[0]=0;V<
ea;V++,Da++,L++){var Na=N[Da];l[L]=O[V]+Na*Y+.5|0;O[V+1]+=Na*ka;La[V]+=Na*qa;La[V+1]=Na*ha}l[L++]=O[V]+.5|0;V=O;O=La;La=V}for(N=0;N<G;N++,L++)l[L]=O[N]+.5|0;return l}(n,p-w,m-z):r.brush=a(n),r.x=w,r.y=z,0<n.texture&&null!=this.texture&&(r.brush==k&&(l.set(k),r.brush=l),function(G,L){var O=Math.floor(255*L),N=g.texture,ea=G.x%N.width,Y=G.y%N.height,ka=0;0>ea&&(ea+=N.width);0>Y&&(Y+=N.height);for(var ha=0;ha<G.height;ha++){L=Y*N.width+ea;var qa=Y*N.width+N.width;for(var Da=0;Da<G.width;Da++)G.brush[ka]=
~~(G.brush[ka]*(N.data[L]*O/255^255)/255),ka++,++L==qa&&(L-=N.width);++Y==N.height&&(Y=0)}}(r,n.texture)),r};this.setTexture=function(p){this.texture=p}}function Di(a,c,d){this.bmp=a;this.x=c;this.y=d}function ch(a){if(0==a.saturation)return a.value<<16|a.value<<8|a.value;var c=a.hue/60;c-=Math.floor(c);var d=a.saturation/255,b=~~(a.value*(1-d)),f=~~(a.value*(1-d*c));c=~~(a.value*(1-d*(1-c)));switch(~~(a.hue/60)){case 0:return a.value<<16|c<<8|b;case 1:return f<<16|a.value<<8|b;case 2:return b<<16|
a.value<<8|c;case 3:return b<<16|f<<8|a.value;case 4:return c<<16|b<<8|a.value;case 5:return a.value<<16|b<<8|f;default:return 0}}function bc(a){this.value=this.saturation=this.hue=this.rgb=0;this.setRgb(a||0)}function kp(){var a,c=!1;this.nextGaussian=function(){if(c)return c=!1,a;do var d=(b=2*Math.random()-1)*b+(f=2*Math.random()-1)*f;while(1<=d||0==d);var b,f;d=Math.sqrt(-2*Math.log(d)/d);return a=f*d,c=!0,b*d}}function pc(){this.setToIdentity()}function Ei(a){for(var c=["imageSmoothingEnabled",
"mozImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled"],d=0;d<c.length;d++)if(c[d]in a)return c[d];return null}function Fi(a,c){var d=Ei(a);d&&(a[d]=c)}function ue(a,c,d){this.r=a;this.g=c;this.b=d}function ml(a){for(var c=0,d=0;d<a.length;d++)c+=a[d];return c/a.length}function nl(a){for(var c=new ue(0,0,0),d=0;d<a.length;d++){var b=a[d];c.r+=b.r;c.g+=b.g;c.b+=b.b}return c.r/=a.length,c.g/=a.length,c.b/=a.length,c}function ol(a,c){var d=a.data;if(0<c.left)for(var b=c.top;b<
c.bottom;b++){var f=b*a.width,k=f;f=d[f+c.left];for(var l=0;l<c.left;l++,k++)d[k]=f}if(c.right<a.width)for(b=c.top;b<c.bottom;b++)for(k=b*a.width+c.right,f=d[k-1],l=c.right;l<a.width;l++,k++)d[k]=f;for(k=b=0;k<c.top;k++)for(f=c.top*a.width,l=0;l<a.width;l++,f++,b++)d[b]=d[f];b=c.bottom*a.width;for(k=c.bottom;k<a.width;k++)for(f=(c.bottom-1)*a.width,l=0;l<a.width;l++,f++,b++)d[b]=d[f]}function dh(a,c){return a+c}function pl(a){return a?a.width*a.height*4:0}function ud(a,c){function d(K){yc=!1;(0<lb.size||
0<Ec.size)&&(K?h():$a||setTimeout(h,1E3))}function b(){Z.emitEvent("changeSelection",[])}function f(K){Z.emitEvent("updateRegion",[K])}function k(){Z.emitEvent("changeStructure");wb.resetTree();w();f(Z.getBounds())}function l(K,aa,xa){Z.emitEvent("changeLayer",[K]);xa||(wb.layerPropertyChanged(K,aa),f(Z.getBounds()))}function h(){var K=!0,aa=!1,xa=void 0;try{for(var S,F=lb[Symbol.iterator]();!(K=(S=F.next()).done);K=!0){var Q=S.value;Q.rebuildImageThumbnail();Z.emitEvent("changeLayerImageThumb",[Q])}}catch(Fa){aa=
!0,xa=Fa}finally{try{K||null==F.return||F.return()}finally{if(aa)throw xa;}}K=!0;aa=!1;xa=void 0;try{for(var ca,ua=Ec[Symbol.iterator]();!(K=(ca=ua.next()).done);K=!0){var Ea=ca.value;Ea.rebuildMaskThumbnail();Z.emitEvent("changeLayerMaskThumb",[Ea])}}catch(Fa){aa=!0,xa=Fa}finally{try{K||null==ua.return||ua.return()}finally{if(aa)throw xa;}}lb.clear();$a&&(clearTimeout($a),$a=null)}function e(K,aa,xa,S){Array.isArray(K)||(K=[K]);K.forEach(function(Qa){return wb.invalidateLayerRect(Qa,aa)});var F=
!1;if(xa){Tb.union(aa);xa=!0;var Q=!1,ca=void 0;try{for(var ua,Ea=K[Symbol.iterator]();!(xa=(ua=Ea.next()).done);xa=!0){var Fa=ua.value;Fa instanceof Ya&&(lb.add(Fa),F=!0)}}catch(Qa){Q=!0,ca=Qa}finally{try{xa||null==Ea.return||Ea.return()}finally{if(Q)throw ca;}}}S&&(Sa.union(aa),K.forEach(function(Qa){Ec.add(Qa);oa&&oa.layer==Qa&&oa.invalidateRect(aa)}),F=!0);F&&($a&&(clearTimeout($a),$a=null),yc||($a=setTimeout(h,1E3)));f(aa)}function g(K,aa){e(K,aa,!T,T)}function p(){return T?A.mask:A.image}function m(){if(!cc.isEmpty()){if(T){var K=
A.mask;qb.brushMode==Pa.BRUSH_MODE_ERASE?za[Pa.BRUSH_MODE_PAINT].mergeOntoMask(K,Fb,4278190080):za[qb.brushMode].mergeOntoMask(K,Fb,255&Zc)}else{K=A.image;var aa=A.getLockAlpha();qb.brushMode==Pa.BRUSH_MODE_ERASE&&aa?za[Pa.BRUSH_MODE_PAINT].mergeOntoImage(K,ib,16777215):za[qb.brushMode].mergeOntoImage(K,ib,Zc);aa&&K.copyAlphaFrom(ib,cc)}cc.makeEmpty()}}function n(){A instanceof Ya&&!Tb.isEmpty()&&(ib.copyBitmapRect(A.image,Tb.left,Tb.top,Tb),Tb.makeEmpty())}function r(){A.mask&&!Sa.isEmpty()&&(Fb.copyBitmapRect(A.mask,
Sa.left,Sa.top,Sa),Sa.makeEmpty())}function u(){T?r():n()}function w(){var K=Z.getBounds();Tb.set(K);Sa.set(K)}function z(K){Z.setHasUnsavedChanges(!0);0<qc.length&&(qc=[]);0!==Cb.length&&Cb[Cb.length-1].merge(K)?Cb[Cb.length-1].noChange()&&Cb.pop():(30<=Cb.length&&Cb.shift(),Z.compactUndo(),Cb.push(K))}function G(K,aa){K||aa||(K=!T,aa=T);var xa=ma.clone(),S=K?ib.copyRectXOR(A.image,xa):null,F=aa?Fb.copyRectXOR(A.mask,xa):null;this.layer=A;ma.makeEmpty();this.redo=this.undo=function(){S&&this.layer.image.setRectXOR(S,
xa);F&&this.layer.mask.setRectXOR(F,xa);e(this.layer,xa,null!=S,null!=F)};this.getMemoryUsed=function(Q,ca){return(S?S.length:0)+(F?F.length:0)}}function L(K){var aa=K.maskLinked,xa=K.maskVisible;this.undo=function(){K.setMask(null);K.maskLinked=aa;K.maskVisible=xa;k();Z.setActiveLayer(K,!1)};this.redo=function(){var S=new pb(Z.width,Z.height,8);S.clearAll(255);K.maskLinked=!0;K.maskVisible=!0;K.setMask(S);k();Z.setActiveLayer(K,!0)};this.redo()}function O(K,aa){var xa=K.mask,S=!1;var F=aa&&K instanceof
Ya?K.image.clone():null;S=A==K&&T;this.undo=function(){K.setMask(xa);F&&(K.image.copyPixelsFrom(F),e(K,K.image.getBounds(),!0,!1));S&&Z.setActiveLayer(K,!0);k()};this.redo=function(){F&&(W.multiplyAlphaByMask(K.image,100,K.mask),e(K,Z.getBounds(),!0,!1));S&&Z.setActiveLayer(K,!1);K.setMask(null);k()};this.redo()}function N(K,aa,xa){var S=xa instanceof Ya&&xa.clip,F=K.layers[aa],Q=F instanceof Ya&&F.clip,ca=T;this.undo=function(){K.removeLayer(xa);var ua=K.layers[aa-1]||K.layers[0]||K;F instanceof
Ya&&(F.clip=Q);xa instanceof Ya&&(xa.clip=S);k();Z.setActiveLayer(ua,ca)};this.redo=function(){K.insertLayer(aa,xa);Q&&(xa instanceof Ya?xa.clip=!0:F.clip=!1);k();Z.setActiveLayer(xa,!1)};this.redo()}function ea(K){var aa=K.clone(),xa=T;this.undo=function(){aa.parent.removeLayer(aa);k();Z.setActiveLayer(K,xa)};this.redo=function(){var S=K.name;S.endsWith(" Copy")||(S+=" Copy");aa.name=S;K.parent.insertLayer(K.parent.indexOf(K)+1,aa);k();Z.setActiveLayer(aa,!1)};this.redo()}function Y(K){var aa=K.parent,
xa=aa.indexOf(K),S=T,F=0;if(K instanceof Ya&&!K.clip)for(var Q=xa+1;Q<aa.layers.length&&aa.layers[Q]instanceof Ya&&aa.layers[Q].clip;Q++)F++;this.undo=function(){aa.insertLayer(xa,K);for(var ca=0;ca<F;ca++)aa.layers[ca+xa+1].clip=!0;k();Z.setActiveLayer(K,S)};this.redo=function(){var ca;for(ca=0;ca<F;ca++)aa.layers[ca+xa+1].clip=!1;aa.removeLayerAtIndex(xa);ca=0==aa.layers.length?K.parent:aa.layers[Math.max(xa-1,0)];k();Z.setActiveLayer(ca,!1)};this.getMemoryUsed=function(ca,ua){return ca?0:K.getMemoryUsed()};
this.redo()}function ka(K){var aa=K.parent.indexOf(K),xa=T,S=new Ya(Z.width,Z.height,"");this.undo=function(){K.parent.setLayerAtIndex(aa,K);k();Z.setActiveLayer(K,xa)};this.redo=function(){K.parent.setLayerAtIndex(aa,S);k();Z.setActiveLayer(S,!1)};this.getMemoryUsed=function(Q,ca){return Q?0:K.getMemoryUsed()};var F=new ll(K,Z.width,Z.height,!1);F.buildTree();F=F.blendTree();S.name=K.name;S.alpha=F.alpha;S.image=F.image;S.blendMode=F.blendMode;S.mask=F.mask;S.blendMode==W.LM_PASSTHROUGH&&(S.blendMode=
W.LM_NORMAL);this.redo()}function ha(K){var aa=K.parent,xa=aa.layers[aa.indexOf(K)-1],S=new Ya(Z.width,Z.height,""),F=T;this.undo=function(){var Q=aa.indexOf(S);aa.removeLayerAtIndex(Q);aa.insertLayer(Q,K);aa.insertLayer(Q,xa);k();Z.setActiveLayer(K,F)};this.redo=function(){S.copyFrom(xa);0<K.getEffectiveAlpha()&&(S.mask?(W.multiplyAlphaByMask(S.image,S.alpha,S.mask),S.mask=null):W.multiplyAlphaBy(S.image,S.alpha),S.alpha=100,W.fuseImageOntoImage(S.image,!0,K.image,K.alpha,K.blendMode,K.getBounds(),
K.mask));var Q=aa.indexOf(xa);aa.removeLayerAtIndex(Q);aa.removeLayerAtIndex(Q);aa.insertLayer(Q,S);k();Z.setActiveLayer(S,!1)};this.getMemoryUsed=function(Q,ca){return Q?0:K.getMemoryUsed()+S.getMemoryUsed()};this.redo()}function qa(){var K=Z.getActiveLayer(),aa=ya.layers.slice(0),xa=new Ya(Z.width,Z.height,"");this.undo=function(){ya.layers=aa.slice(0);k();Z.setActiveLayer(K,!1)};this.redo=function(){var S=Z.fusionLayers();xa.copyImageFrom(S);ya.clearLayers();xa.setName(Z.getDefaultLayerName(!1));
ya.addLayer(xa);k();Z.setActiveLayer(xa,!1)};this.getMemoryUsed=function(S,F){return aa.map(function(Q){return Q.getMemoryUsed()}).reduce(dh,0)};this.redo()}function Da(K,aa,xa){var S=K.parent,F=K.parent.indexOf(K),Q=T,ca=S.layers[S.indexOf(K)+1],ua=aa.layers[xa],Ea=K instanceof Ya&&K.clip,Fa=!!Ea&&K.getClippingBase(),Qa=0,vb=0;if(K instanceof Ya&&!K.clip)for(var Ha=F+1;Ha<S.layers.length&&S.layers[Ha]instanceof Ya&&S.layers[Ha].clip;Ha++)Qa++;else if(K instanceof Kb)for(Ha=xa;Ha<aa.layers.length&&
aa.layers[Ha]instanceof Ya&&aa.layers[Ha].clip;Ha++)vb++;this.undo=function(){K.parent.removeLayer(K);var xb=ca?S.indexOf(ca):S.layers.length;S.insertLayer(xb,K);K instanceof Ya&&(K.clip=Ea);for(xb=0;xb<Qa;xb++)S.layers[xb+F+1].clip=!0;for(xb=0;xb<vb;xb++)aa.layers[xb+xa].clip=!0;k();Z.setActiveLayer(K,Q)};this.redo=function(){for(var xb=0;xb<Qa;xb++)S.layers[xb+F+1].clip=!1;K.parent.removeLayer(K);xb=ua?aa.indexOf(ua):aa.layers.length;aa.insertLayer(xb,K);for(var Fc=0;Fc<vb;Fc++)aa.layers[Fc+xb+
1].clip=!1;K instanceof Ya&&(K.clip&&K.getClippingBase()!=Fa&&(K.clip=!1),ua instanceof Ya&&ua.clip&&(K.clip=!0));for(Fc=0;Fc<vb;Fc++)aa.layers[Fc+xb+1].clip=!1;k();Z.setActiveLayer(K,!1)};this.redo()}function La(K,aa){var xa=K.substring(0,1).toUpperCase()+K.substring(1),S=function(F,Q){Array.isArray(F)||(F=[F]);this.layers=F;this.from=this.layers.map(function(ca){return ca["get"+xa]()});this.to=Q;this.redo()};return S.prototype=Object.create(pd.prototype),S.prototype.constructor=S,S.prototype.undo=
function(){var F=this;this.layers.forEach(function(Q,ca){return Q["set"+xa](F.from[ca])});this.layers.forEach(function(Q){return l(Q,K,!aa)})},S.prototype.redo=function(){var F=this;this.layers.forEach(function(Q){return Q["set"+xa](F.to)});this.layers.forEach(function(Q){return l(Q,K,!aa)})},S.prototype.merge=function(F){var Q;if(Q=F instanceof S)a:{Q=this.layers;var ca=F.layers;if(Q.length!=ca.length)Q=!1;else{for(var ua=0;ua<Q.length;ua++)if(Q[ua]!=ca[ua]){Q=!1;break a}Q=!0}}return!!Q&&(this.to=
F.to,!0)},S.prototype.noChange=function(){for(var F=0;F<this.from.length;F++)if(this.from[F]!=this.to)return!1;return!0},S}function Ka(K,aa){K=K.clone();aa=aa.clone();this.undo=function(){Z.setSelection(K);f(Z.getBounds())};this.redo=function(){Z.setSelection(aa);f(Z.getBounds())};this.noChange=function(){return K.equals(aa)}}function V(K,aa,xa){var S=aa?K.mask:K.image,F=S.cloneRect(xa);xa=xa.clone();this.undo=function(){S.copyBitmapRect(F,xa.left,xa.top,F.getBounds());Z.setActiveLayer(K,aa);Z.setSelection(xa);
e(K,xa,!aa,aa)};this.redo=function(){aa?S.clearRect(xa,0):S.clearRect(xa,16777215);Kc=new Di(F,xa.left,xa.top);Z.setActiveLayer(K,aa);Z.emptySelection();e(K,xa,!aa,aa)};this.getMemoryUsed=function(Q,ca){return F==ca?0:F.getMemorySize()};this.redo()}function Na(K){var aa=Z.getSelection(),xa=T,S=new Ya(Z.width,Z.height,Z.getDefaultLayerName(!1)),F=A,Q=F.parent;this.undo=function(){Q.removeLayer(S);Z.setSelection(aa);k();Z.setActiveLayer(F,xa)};this.redo=function(){var ca,ua,Ea=Q.indexOf(F),Fa=K.bmp.getBounds();
(Q.insertLayer(Ea+1,S),Fa.isInside(Z.getBounds())?(ca=K.x,ua=K.y):(ca=(Z.width-K.bmp.width)/2|0,ua=(Z.height-K.bmp.height)/2|0),K.bmp instanceof pb)?(Ea=new J(K.bmp.width,K.bmp.height),Ea.copyPixelsFromGreyscale(K.bmp),S.image.copyBitmapRect(Ea,ca,ua,Fa)):S.image.copyBitmapRect(K.bmp,ca,ua,Fa);Z.emptySelection();k();Z.setActiveLayer(S,!1)};this.getMemoryUsed=function(ca,ua){return K.bmp==ua?0:K.bmp.getMemorySize()};this.redo()}a|=0;c|=0;var ya=new Kb("Root",W.LM_NORMAL),wb=new ll(ya,a,c,!0),ib=new J(a,
c),Tb=new Va(0,0,a,c),Fb=new pb(a,c,8),Sa=new Va(0,0,a,c),sc=new pb(a,c,32),cc=new Va(0,0,0,0),Ca=new jp,Z=this,za=[],A=ya,T=!1,oa=null,ma=new Va(0,0,0,0),rb=!1,zb=new Va(0,0,0,0),dc=null,Lc=new kp,gb=null,Kc=null,Cb=[],qc=[],qb=null,Ab=0,$c=0,ac=0,xc=!1,yc=!1,Ec=new Set,lb=new Set,$a=null,Zc=0,mb="smooth";this.getLayersRoot=function(){return ya};this.getSelectionAutoSelect=function(){return zb.isEmpty()?this.getBounds():this.getSelection()};this.getSelection=function(){return zb.clone()};this.setHasUnsavedChanges=
function(K){K!=rb&&(rb=K,this.emitEvent("unsavedChanges",[K]))};this.getHasUnsavedChanges=function(){return rb};this.isAddLayerMaskAllowed=function(){return!A.mask};this.addLayerMask=function(){this.isAddLayerMaskAllowed()&&z(new L(A))};this.isRemoveLayerMaskAllowed=function(){return null!==A.mask};this.removeLayerMask=function(){this.isRemoveLayerMaskAllowed()&&z(new O(A,!1))};this.isApplyLayerMaskAllowed=function(){return null!==A.mask&&A instanceof Ya};this.applyLayerMask=function(K){this.isApplyLayerMaskAllowed()&&
z(new O(A,!0))};this.addLayer=function(K){var aa,xa;if(A instanceof Kb&&A.expanded?(aa=A,xa=A.layers.length):xa=(aa=A.parent).layers.indexOf(A)+1,"group"===K){for(;aa.layers[xa]instanceof Ya&&aa.layers[xa].clip;)xa++;K=new Kb(this.getDefaultLayerName(!0),W.LM_PASSTHROUGH)}else(K=new Ya(this.width,this.height,this.getDefaultLayerName(!1))).image.clearAll(16777215);return z(new N(aa,xa,K)),K};this.addLayerObject=function(K,aa){K.addLayer(aa);K==ya&&1==ya.layers.length&&(A=aa);k()};this.addLayerGroupObject=
function(K,aa,xa){for(var S=[],F=0;F<xa;F++)S.unshift(K.layers.pop());S.forEach(function(Q){return aa.addLayer(Q)});this.addLayerObject(K,aa)};this.isRemoveLayerAllowed=function(){return A instanceof Ya?ya.getLinearizedLayerList(!1).some(function(K){return K instanceof Ya&&K!=A}):A instanceof Kb&&ya.getLinearizedLayerList(!1).some(function(K){return K instanceof Ya&&!K.hasAncestor(A)})};this.removeLayer=function(){return!!this.isRemoveLayerAllowed()&&(z(new Y(A)),!0)};this.duplicateLayer=function(){z(new ea(A))};
this.isMergeDownAllowed=function(){var K=A.parent.indexOf(A);return 0<K&&A instanceof Ya&&A.parent.layers[K-1]instanceof Ya};this.mergeDown=function(){this.isMergeDownAllowed()&&z(new ha(A))};this.isMergeGroupAllowed=function(){return A instanceof Kb&&0<A.getEffectiveAlpha()};this.mergeGroup=function(){this.isMergeGroupAllowed()&&z(new ka(A))};this.isMergeAllLayersAllowed=function(){return 1<ya.getLinearizedLayerList(!1).length};this.mergeAllLayers=function(){this.isMergeAllLayersAllowed()&&z(new qa)};
this.relocateLayer=function(K,aa,xa){K&&aa&&K!=aa&&!aa.hasAncestor(K)&&z(new Da(K,aa,xa))};this.setLayerVisibility=function(K,aa){var xa=[];if(K.ancestorsAreVisible())K.visible!=aa&&z(new B(K,aa));else{for(;null!=K;K=K.parent)K.visible||xa.push(K);z(new B(xa,!0))}};this.expandLayerGroup=function(K,aa){K.expanded!=aa&&(K.expanded=aa,!aa&&A.hasAncestor(K)&&this.setActiveLayer(K,!1),l(K,"expanded",!0))};this.setLayerAlpha=function(K){A.getAlpha()!=K&&z(new yb(A,K))};this.setLayerMaskLinked=function(K){A.maskLinked!=
K&&z(new Fd(A,K))};this.setLayerMaskVisible=function(K,aa){K.maskVisible!=aa&&z(new ee(K,aa))};this.setLayerBlendMode=function(K){A.getBlendMode()!=K&&(K!=W.LM_PASSTHROUGH||A instanceof Kb)&&z(new Gd(A,K))};this.setLayerName=function(K,aa){K.getName()!=aa&&z(new Ja(K,aa))};this.paintDab=function(K,aa,xa){qb.applyPressure(xa);0<qb.scattering&&(K+=Lc.nextGaussian()*qb.curScattering/4,aa+=Lc.nextGaussian()*qb.curScattering/4);xa=za[qb.brushMode];K=Ca.getDab(K,aa,qb);aa=new Va(0,0,K.width,K.height);var S=
new Va(0,0,K.width,K.height);if(S.translate(K.x,K.y),Z.getBounds().clipSourceDest(aa,S),!S.isEmpty()){ma.union(S);var F=T?A.mask:A.image;xa.paintDab(F,S,xc&&!T?dc:F,qb,aa,K,Zc);!T&&xa.noMergePhase&&A.getLockAlpha()&&F.copyAlphaFrom(ib,S);xa.wantsOutputAsInput&&(m(),xc&&!T&&Z.fusionLayers());g(A,S)}};this.getDefaultLayerName=function(K){var aa=K?"Group ":"Layer ";K=K?/^Group [0-9]+$/:/^Layer [0-9]+$/;for(var xa=0,S=ya.getLinearizedLayerList(!1),F=0;F<S.length;F++){var Q=S[F];K.test(Q.name)&&(xa=Math.max(xa,
parseInt(Q.name.substring(aa.length),10)))}return aa+(xa+1)};this.addBackgroundLayer=function(){var K=new Ya(Z.width,Z.height,this.getDefaultLayerName(!1));K.image.clearAll(4294967295);this.addLayerObject(this.getLayersRoot(),K)};this.addDefaultLayer=function(){var K=new Ya(Z.width,Z.height,this.getDefaultLayerName(!1));K.image.clearAll(16777215);this.addLayerObject(this.getLayersRoot(),K);this.setActiveLayer(K,!1)};this.fusionLayers=function(){m();wb.buildTree();return dc=wb.blendTree().image};this.upgradeMultiplyLayers=
function(K){for(var aa=this.getLayersRoot().getLinearizedLayerList(!1,[]),xa=-1,S=0;S<aa.length;S++){var F=aa[S];if(!(F instanceof Ya)||F.mask||F.blendMode>W.LM_LAST_CHIBIPAINT)throw Error("Bad layer type during multiply upgrade");F.blendMode===W.LM_MULTIPLY&&(xa=S)}if(-1!==xa){S=new J(this.width,this.height);var Q=F=!0,ca=this.getBounds();S.clearAll(ca,16777215);for(var ua=0;ua<=xa;ua++){var Ea=aa[ua];Q||(F=F&&S.hasAlphaInRect(ca));Ea.blendMode===W.LM_MULTIPLY&&("bake"===K?!F&&0<Ea.getEffectiveAlpha()&&
(100===Ea.alpha?W.upgradeMultiplyOfOpaqueLayer(S,Ea.image,100,ca):W.upgradeMultiplyOfTransparentLayer(S,Ea.image,Ea.alpha,ca),Ea.setBlendMode(W.LM_MULTIPLY2)):F&&Ea.setBlendMode(W.LM_MULTIPLY2));0<Ea.getEffectiveAlpha()&&(Q=!1,W.fuseImageOntoImage(S,F,Ea.image,Ea.alpha,Ea.blendMode,ca,null))}}};this.isCreateClippingMaskAllowed=function(){var K=A.parent.indexOf(A);K=A.parent.layers[K-1];return A instanceof Ya&&!A.clip&&K instanceof Ya};this.createClippingMask=function(){this.isCreateClippingMaskAllowed()&&
z(new fe(A,!0))};this.isReleaseClippingMaskAllowed=function(){return A instanceof Ya&&A.clip};this.releaseClippingMask=function(){this.isReleaseClippingMaskAllowed()&&z(new fe(A,!1))};this.setActiveLayer=function(K,aa){if(K){var xa=(aa=K.mask&&aa)!=T;if(A!=K||xa){var S=A;A=K;T=aa;w();this.emitEvent("changeActiveLayer",[S,K,T]);xa&&this.emitEvent("editModeChanged",[T?ud.EDITING_MODE_MASK:ud.EDITING_MODE_IMAGE]);oa&&oa.layer==S&&(aa?oa.setLayer(K):this.closeMaskView())}}};this.closeMaskView=function(){oa.close();
oa=null};this.toggleMaskView=function(){return null!=oa&&oa.isOpen()?this.closeMaskView():oa=A.mask?new lp(A,m):null,oa};this.selectTopmostVisibleLayer=function(){for(var K=ya.getLinearizedLayerList(!1),aa=K.length-1;0<=aa;aa--)if(K[aa]instanceof Ya&&0<K[aa].getEffectiveAlpha()){this.setActiveLayer(K[aa],!1);return}for(aa=K.length-1;0<=aa;aa--)if(K[aa]instanceof Ya){this.setActiveLayer(K[aa],!1);return}this.setActiveLayer(K[K.length-1],!1)};this.getActiveLayer=function(){return A};this.isEditingMask=
function(){return T};this.isActiveLayerDrawable=function(){return T&&A.mask||!T&&A instanceof Ya};this.getUndoMemoryUsed=function(){var K=0,aa=!0,xa=!1,S=void 0;try{for(var F,Q=qc[Symbol.iterator]();!(aa=(F=Q.next()).done);aa=!0)K+=F.value.getMemoryUsed(!0,null)}catch(Ea){xa=!0,S=Ea}finally{try{aa||null==Q.return||Q.return()}finally{if(xa)throw S;}}aa=!0;xa=!1;S=void 0;try{for(var ca,ua=Cb[Symbol.iterator]();!(aa=(ca=ua.next()).done);aa=!0)K+=ca.value.getMemoryUsed(!1,null)}catch(Ea){xa=!0,S=Ea}finally{try{aa||
null==ua.return||ua.return()}finally{if(xa)throw S;}}return K};this.isUndoAllowed=function(){return 0<Cb.length};this.isRedoAllowed=function(){return 0<qc.length};this.undo=function(){if(this.isUndoAllowed()){this.setHasUnsavedChanges(!0);var K=Cb.pop();K.undo();qc.push(K)}};this.redo=function(){if(this.isRedoAllowed()){this.setHasUnsavedChanges(!0);var K=qc.pop();K.redo();Cb.push(K)}};this.performIdleTasks=function(){u();m();wb.buildTree()};this.compactUndo=function(){0<Cb.length&&Cb[Cb.length-1].compact()};
this.clearHistory=function(){Cb=[];qc=[]};this.colorPicker=function(K,aa){return T&&A.mask?bc.greyToRGB(A.mask.getPixel(~~K,~~aa)):16777215&dc.getPixel(~~K,~~aa)};this.setSelection=function(K){zb.set(K);zb.roundNearest();zb.clipTo(this.getBounds())};this.emptySelection=function(){zb.makeEmpty()};this.floodFill=function(K,aa){var xa=p();xa&&(u(),ma=this.getBounds(),xa.floodFill(~~K,~~aa,4278190080|Zc),z(new G),g(A,this.getBounds()))};this.gradientFill=function(K,aa,xa,S,F){var Q=this.getSelectionAutoSelect(),
ca=p();ca&&(u(),ma=Q.clone(),ca.gradient(Q,K,aa,xa,S,F,!1),this.getLayerLockAlpha()&&ca instanceof J&&ca.copyAlphaFrom(ib,Q),z(new G),g(A,Q))};this.fill=function(K){var aa=this.getSelectionAutoSelect(),xa=p();xa&&(u(),ma=aa.clone(),xa.clearRect(aa,K),z(new G),g(A,aa))};this.clear=function(){T?this.fill(0):this.fill(16777215)};this.flip=function(K){var aa=this.getSelection(),xa=aa.isEmpty(),S=xa&&A instanceof Ya&&A.mask&&A.maskLinked,F=(!T||S)&&A instanceof Ya;S=(T||S)&&A.mask;K=K?"copyRegionHFlip":
"copyRegionVFlip";(F||S)&&(xa&&(aa=this.getBounds()),ma=aa.clone(),F&&(n(),A.image[K](aa,ib)),S&&(r(),A.mask[K](aa,Fb)),z(new G(F,S)),e(A,aa,F,S))};this.hFlip=function(){this.flip(!0)};this.vFlip=function(){this.flip(!1)};this.monochromaticNoise=function(){var K=this.getSelectionAutoSelect(),aa=p();aa&&(u(),ma=K.clone(),aa.fillWithNoise(K),z(new G),g(A,K))};this.isColorNoiseAllowed=function(){return!this.isEditingMask()&&this.isActiveLayerDrawable()};this.colorNoise=function(){if(this.isColorNoiseAllowed()){var K=
this.getSelectionAutoSelect();u();ma=K.clone();A.image.fillWithColorNoise(K);z(new G(!0,!1));e(A,K,!0,!1)}};this.invert=function(){var K=this.getSelectionAutoSelect(),aa=p();aa&&(u(),ma=K.clone(),aa.invert(K),z(new G),g(A,K))};this.boxBlur=function(K,aa,xa){var S=this.getSelectionAutoSelect(),F=p();if(F){u();ma=S.clone();for(var Q=0;Q<xa;Q++)F.boxBlur(S,K,aa);z(new G);g(A,S)}};this.rectangleSelection=function(K){K=K.clone();K.clipTo(this.getBounds());z(new Ka(this.getSelection(),K));this.setSelection(K)};
this.move=function(K,aa,xa){if(aa|=0,0!=(K|=0)||0!=aa){var S=0<Cb.length?Cb[Cb.length-1]:null;!xa&&S instanceof jb&&S.layer==this.getActiveLayer()?(S.amend(K,aa),qc=[],this.setHasUnsavedChanges(!0)):(K=new jb(K,aa,xa),z(K),K.redo())}};this.setTransformInterpolation=function(K){mb=K;gb instanceof qd&&gb.setInterpolation(K)};this.transformAffineAbort=function(){gb instanceof qd&&(gb.undo(),gb=null,d(!0))};this.transformAffineBegin=function(){if(gb instanceof qd)return{transform:gb.getTransform(),rect:gb.getInitialTransformRect(),
selection:gb.getInitialSelectionRect()};var K,aa=new pc;return(K=new qd(aa,mb)).getInitialTransformRect().isEmpty()?null:(gb=K,yc=!0,{transform:aa,rect:K.getInitialTransformRect(),selection:K.getInitialSelectionRect()})};this.transformAffineFinish=function(){gb instanceof qd&&(z(gb),gb=null,d(!0))};this.transformAffineAmend=function(K){gb instanceof qd&&gb.amend(K)};this.isCopySelectionAllowed=this.isCutSelectionAllowed=function(){return!this.getSelection().isEmpty()&&null!==p()};this.cutSelection=
function(){this.isCutSelectionAllowed()&&z(new V(A,T,this.getSelection()))};this.copySelection=function(){if(this.isCopySelectionAllowed()){var K=Z.getSelection();Kc=new Di(p().cloneRect(K),K.left,K.top)}};this.isCopySelectionMergedAllowed=function(){return!this.getSelection().isEmpty()};this.copySelectionMerged=function(){if(this.isCopySelectionMergedAllowed()){var K=Z.getSelection();Kc=new Di(this.fusionLayers().cloneRect(K),K.left,K.top)}};this.isPasteClipboardAllowed=function(){return!this.isClipboardEmpty()};
this.pasteClipboard=function(){this.isPasteClipboardAllowed()&&z(new Na(Kc))};this.getClipboard=function(){return Kc};this.setClipboard=function(K){Kc=K};this.isClipboardEmpty=function(){return null==Kc};this.setSampleAllLayers=function(K){xc=K};this.getLayerLockAlpha=function(){return this.getActiveLayer().getLockAlpha()};this.setLayerLockAlpha=function(K){A.getLockAlpha()!=K&&z(new Oc(A,K))};this.setForegroundColor=function(K){Zc=K};this.setBrush=function(K){qb=K};this.setBrushTexture=function(K){Ca.setTexture(K)};
this.beginStroke=function(K,aa,xa){return!(null===qb||!this.isActiveLayerDrawable())&&(u(),ma.makeEmpty(),sc.clearAll(0),cc.makeEmpty(),Ab=K,$c=aa,ac=xa,yc=!0,za[qb.brushMode].beginStroke(),this.paintDab(K,aa,xa),!0)};this.continueStroke=function(K,aa,xa){if(null!=qb){var S=Math.sqrt((Ab-K)*(Ab-K)+($c-aa)*($c-aa)),F=Math.max(qb.minSpacing,qb.curSize*qb.spacing);if(S>F){var Q=Ab,ca=$c,ua=ac;for(F=S=(F-.001)/S;1>=F;F+=S)Q=F*K+(1-F)*Ab,ca=F*aa+(1-F)*$c,ua=F*xa+(1-F)*ac,this.paintDab(Q,ca,ua);Ab=Q;$c=
ca;ac=ua}}};this.endStroke=function(){null!=qb&&(m(),za[qb.brushMode].endStroke(),ma.clipTo(this.getBounds()),ma.isEmpty()||(z(new G),u()),d(!1))};this.hasAlpha=function(){return dc.hasAlpha()};this.getFlatPNG=function(K){return this.fusionLayers(),dc.getAsPNG(K)};this.getFlatPNGBuffer=function(K){return this.fusionLayers(),dc.getAsPNGBuffer(K)};this.isSimpleDrawing=function(){return 1==ya.layers.length&&ya.layers[0]instanceof Ya&&!ya.layers[0].mask&&100==ya.layers[0].getEffectiveAlpha()};G.prototype=
Object.create(pd.prototype);G.prototype.constructor=G;L.prototype=Object.create(pd.prototype);L.prototype.constructor=L;O.prototype=Object.create(pd.prototype);O.prototype.constructor=O;N.prototype=Object.create(pd.prototype);N.prototype.constructor=N;ea.prototype=Object.create(pd.prototype);ea.prototype.constructor=ea;Y.prototype=Object.create(pd.prototype);Y.prototype.constructor=Y;ka.prototype=Object.create(pd.prototype);ka.prototype.constructor=ka;ha.prototype=Object.create(pd.prototype);ha.prototype.constructor=
ha;qa.prototype=Object.create(pd.prototype);qa.prototype.constructor=qa;Da.prototype=Object.create(pd.prototype);Da.prototype.constructor=Da;var yb=La("alpha",!0),Gd=La("blendMode",!0),B=La("visible",!0),fe=La("clip",!0),ee=La("maskVisible",!0),Ja=La("name",!1),Oc=La("lockAlpha",!1),Fd=La("maskLinked",!1);Ka.prototype=Object.create(pd.prototype);Ka.prototype.constructor=Ka;var zc=function(K){function aa(){Ib(this,aa);(S=xa.call(this)).layer=A;S.fromSelection=Z.getSelection();S.fromMaskMode=T;S.movingWholeLayer=
S.fromSelection.isEmpty();S.movingImage=!T||S.movingWholeLayer&&S.layer.maskLinked;S.movingMask=T||S.movingWholeLayer&&S.layer.maskLinked;S.hasFullUndo=!1;S.erasesSourceRect=!1;S.dstRect=new Va(0,0,0,0);S.movingLayers=[{layer:S.layer,moveImage:S.layer instanceof Ya&&S.movingImage,moveMask:null!==S.layer.mask&&S.movingMask,imageRect:new Map,maskRect:new Map}];S.layer instanceof Kb&&S.movingImage&&S.movingWholeLayer&&(S.movingLayers=S.movingLayers.concat(S.layer.getLinearizedLayerList(!1).map(function(ua){return{layer:ua,
moveImage:ua instanceof Ya,moveMask:null!==ua.mask&&ua.maskLinked,imageRect:new Map,maskRect:new Map}})));var S,F=new Va(0,0,0,0);if(S.movingWholeLayer){S.srcRect=Z.getBounds();for(var Q=0;Q<S.movingLayers.length&&!F.equals(S.srcRect);Q++){var ca=S.movingLayers[Q];ca.moveMask&&F.union(ca.layer.mask.getValueBounds(S.srcRect,255));ca.moveImage&&F.union(ca.layer.image.getNonTransparentBounds(S.srcRect))}}else for(S.srcRect=S.fromSelection.clone(),Q=0;Q<S.movingLayers.length&&!F.equals(S.srcRect);Q++)ca=
S.movingLayers[Q],ca.moveMask&&F.union(ca.layer.mask.getValueBounds(S.srcRect,0)),ca.moveImage&&F.union(ca.layer.image.getNonTransparentBounds(S.srcRect));return S.srcRect=F,S}gc(aa,K);var xa=hc(aa);return Jb(aa,[{key:"undo",value:function(){var S=this,F=[];this.dstRect.isEmpty()||F.push(this.dstRect);this.erasesSourceRect&&(F.push(this.srcRect),F=Va.union(F));this.movingLayers.forEach(function(Q){S.hasFullUndo?F.forEach(function(ca){Q.moveImage&&Q.layer.image.copyBitmapRect(Q.imageUndo,ca.left,ca.top,
ca);Q.moveMask&&Q.layer.mask.copyBitmapRect(Q.maskUndo,ca.left,ca.top,ca)}):(Q.moveImage&&Q.imageRect.forEach(function(ca,ua){Q.layer.image.copyBitmapRect(ca,ua.left,ua.top,ca.getBounds())}),Q.moveMask&&Q.maskRect.forEach(function(ca,ua){Q.layer.mask.copyBitmapRect(ca,ua.left,ua.top,ca.getBounds())}))});e(this.movingLayers.map(function(Q){return Q.layer}),F.reduce(function(Q,ca){return Q.getUnion(ca)},new Va(0,0,0,0)),!0,!0);this.dstRect.makeEmpty();Z.setSelection(this.fromSelection);Z.setActiveLayer(this.layer,
this.fromMaskMode);b()}},{key:"getMemoryUsed",value:function(S,F){return this.movingLayers.map(function(Q){return[Q.imageUndo,Q.maskUndo,Q.imageRect,Q.maskRect].map(function(ca){return ca?ca.getMemorySize():0}).reduce(dh,0)}).reduce(dh,0)}},{key:"buildFullUndo",value:function(){this.hasFullUndo||(this.movingLayers.forEach(function(S){S.moveImage&&(S.imageUndo=S.layer.image.clone());S.moveMask&&(S.maskUndo=S.layer.mask.clone());S.imageRect.clear();S.maskRect.clear()}),this.hasFullUndo=!0)}},{key:"compact",
value:function(){if(this.hasFullUndo){var S=[];this.dstRect.isEmpty()||S.push(this.dstRect);this.erasesSourceRect&&(S.push(this.srcRect),S=Va.union(S));this.movingLayers.forEach(function(F){F.imageRect.clear();F.maskRect.clear();S.forEach(function(Q){F.moveImage&&F.imageRect.set(Q,F.imageUndo.cloneRect(Q));F.moveMask&&F.maskRect.set(Q,F.maskUndo.cloneRect(Q))});F.imageUndo=null;F.maskUndo=null});this.hasFullUndo=!1}}}]),aa}(pd),qd=function(K){function aa(S,F){var Q;return Ib(this,aa),(Q=xa.call(this)).erasesSourceRect=
!0,Q.affineTransform=S.clone(),Q.interpolation=F||"smooth",Q.composeCanvas=null,Q.composeCanvasContext=null,Q}gc(aa,K);var xa=hc(aa);return Jb(aa,[{key:"buildFullUndo",value:function(){var S=this;this.hasFullUndo||(hd(Sc(aa.prototype),"buildFullUndo",this).call(this),this.movingLayers.forEach(function(F){if(F.moveImage){var Q=de(S.srcRect.getWidth(),S.srcRect.getHeight());Q.getContext("2d").putImageData(F.layer.image.getImageData(),-S.srcRect.left,-S.srcRect.top,S.srcRect.left,S.srcRect.top,S.srcRect.getWidth(),
S.srcRect.getHeight());F.imageSourceCanvas=Q}F.moveMask&&(Q=de(S.srcRect.getWidth(),S.srcRect.getHeight()),Q.getContext("2d").putImageData(F.layer.mask.getImageData(S.srcRect.left,S.srcRect.top,S.srcRect.getWidth(),S.srcRect.getHeight()),0,0),F.maskSourceCanvas=Q)}),this.composeCanvas=de(Z.width,Z.height),this.composeCanvasContext=this.composeCanvas.getContext("2d",{willReadFrequently:!0}),Fi(this.composeCanvasContext,"smooth"==this.interpolation),this.junk=this.composeCanvasContext.getImageData(0,
0,1,1))}},{key:"redo",value:function(){var S=this;this.buildFullUndo();var F=this.dstRect.clone(),Q=this.srcRect.toPoints();this.affineTransform.transformPoints(Q);this.dstRect.set(Va.createBoundingBox(Q).roundContain().clipTo(Z.getBounds()));var ca=Va.subtract(this.dstRect,this.srcRect),ua=Va.subtract(F.isEmpty()?this.srcRect:this.srcRect.getIntersection(F),this.dstRect),Ea=this.srcRect.getIntersection(this.dstRect),Fa=Va.subtract(F,[this.dstRect,this.srcRect]);F=this.srcRect.getUnion(this.dstRect).getUnion(F);
(this.movingLayers.forEach(function(Qa){if(ua.forEach(function(Ha){Qa.moveImage&&Qa.layer.image.clearRect(Ha,16777215);Qa.moveMask&&(S.movingWholeLayer?Qa.layer.mask.clearRect(Ha,255):Qa.layer.mask.clearRect(Ha,0))}),!S.dstRect.isEmpty()){if(Qa.moveImage){var vb=Qa.imageUndo.getImageData();ca.forEach(function(Ha){S.composeCanvasContext.putImageData(vb,0,0,Ha.left,Ha.top,Ha.getWidth(),Ha.getHeight())});S.composeCanvasContext.clearRect(Ea.left,Ea.top,Ea.getWidth(),Ea.getHeight());S.composeCanvasContext.save();
S.composeCanvasContext.setTransform(S.affineTransform.m[0],S.affineTransform.m[1],S.affineTransform.m[2],S.affineTransform.m[3],S.affineTransform.m[4],S.affineTransform.m[5]);S.composeCanvasContext.drawImage(Qa.imageSourceCanvas,S.srcRect.left,S.srcRect.top);S.composeCanvasContext.restore();Qa.layer.image.copyBitmapRect(new J(S.composeCanvasContext.getImageData(S.dstRect.left,S.dstRect.top,S.dstRect.getWidth(),S.dstRect.getHeight())),S.dstRect.left,S.dstRect.top,new Va(0,0,S.dstRect.getWidth(),S.dstRect.getHeight()))}Qa.moveMask&&
(ca.forEach(function(Ha){S.composeCanvasContext.putImageData(Qa.layer.mask.getImageData(Ha.left,Ha.top,Ha.getWidth(),Ha.getHeight()),Ha.left,Ha.top)}),S.movingWholeLayer?S.composeCanvasContext.fillStyle="#FFF":S.composeCanvasContext.fillStyle="#000",S.composeCanvasContext.fillRect(Ea.left,Ea.top,Ea.getWidth(),Ea.getHeight()),S.composeCanvasContext.save(),S.composeCanvasContext.setTransform(S.affineTransform.m[0],S.affineTransform.m[1],S.affineTransform.m[2],S.affineTransform.m[3],S.affineTransform.m[4],
S.affineTransform.m[5]),S.composeCanvasContext.drawImage(Qa.maskSourceCanvas,S.srcRect.left,S.srcRect.top),S.composeCanvasContext.restore(),Qa.layer.mask.pasteImageData(S.composeCanvasContext.getImageData(S.dstRect.left,S.dstRect.top,S.dstRect.getWidth(),S.dstRect.getHeight()),S.dstRect.left,S.dstRect.top))}Fa.forEach(function(Ha){Qa.moveImage&&Qa.layer.image.copyBitmapRect(Qa.imageUndo,Ha.left,Ha.top,Ha);Qa.moveMask&&Qa.layer.mask.copyBitmapRect(Qa.maskUndo,Ha.left,Ha.top,Ha)})}),e(this.movingLayers.map(function(Qa){return Qa.layer}),
F,!0,!0),this.fromSelection.isEmpty())||(F=this.fromSelection.toPoints(),this.affineTransform.transformPoints(F),(F=Va.createBoundingBox(F)).roundNearest(),Z.setSelection(F),b());Z.setActiveLayer(this.layer,this.fromMaskMode)}},{key:"amend",value:function(S){this.hasFullUndo||this.undo();this.affineTransform=S.clone();this.redo()}},{key:"setInterpolation",value:function(S){S!=this.interpolation&&(this.interpolation=S,this.composeCanvasContext&&Fi(this.composeCanvasContext,"smooth"==this.interpolation),
this.undo(),this.redo())}},{key:"compact",value:function(){hd(Sc(aa.prototype),"compact",this).call(this);this.composeCanvasContext=this.composeCanvas=null;this.movingLayers.forEach(function(S){return S.imageSourceCanvas=null})}},{key:"getMemoryUsed",value:function(S,F){S=hd(Sc(aa.prototype),"getMemoryUsed",this).call(this,S,F);return S+=pl(this.composeCanvas),S+=this.movingLayers.map(function(Q){return pl(Q.imageSourceCanvas)}).reduce(dh,0)}},{key:"getTransform",value:function(){return this.affineTransform.clone()}},
{key:"getInitialTransformRect",value:function(){return this.srcRect.clone()}},{key:"getInitialSelectionRect",value:function(){return this.fromSelection.clone()}}]),aa}(zc),jb=function(K){function aa(S,F,Q){var ca;return Ib(this,aa),(ca=xa.call(this)).offsetX=S,ca.offsetY=F,ca.erasesSourceRect=!Q,ca}gc(aa,K);var xa=hc(aa);return Jb(aa,[{key:"redo",value:function(){var S,F,Q=this,ca=this.dstRect.clone(),ua=ca.clone(),Ea=null;(this.buildFullUndo(),this.dstRect.set(this.srcRect),this.dstRect.translate(this.offsetX,
this.offsetY),S=this.dstRect.clone(),this.dstRect.clipTo(Z.getBounds()),this.erasesSourceRect?(Ea=ca.isEmpty()?this.srcRect:this.srcRect.getIntersection(ca),ua.union(Ea),F=ca.subtract(this.srcRect)):F=[ca],this.movingLayers.forEach(function(Fa){Ea&&(Fa.moveImage&&Fa.layer.image.clearRect(Ea,16777215),Fa.moveMask&&Fa.layer.mask.clearRect(Ea,Q.movingWholeLayer?255:0));F.forEach(function(Qa){Fa.moveImage&&Fa.layer.image.copyBitmapRect(Fa.imageUndo,Qa.left,Qa.top,Qa);Fa.moveMask&&Fa.layer.mask.copyBitmapRect(Fa.maskUndo,
Qa.left,Qa.top,Qa)});Fa.moveImage&&W.normalFuseImageOntoImageAtPosition(Fa.layer.image,Fa.imageUndo,S.left,S.top,Q.srcRect);Fa.moveMask&&Fa.layer.mask.copyBitmapRect(Fa.maskUndo,S.left,S.top,Q.srcRect)}),ua.union(this.dstRect),e(this.movingLayers.map(function(Fa){return Fa.layer}),ua,!0,!0),this.fromSelection.isEmpty())||(ca=this.fromSelection.clone(),ca.translate(this.offsetX,this.offsetY),Z.setSelection(ca),b())}},{key:"amend",value:function(S,F){this.hasFullUndo||this.undo();this.offsetX+=S;this.offsetY+=
F;this.redo()}}]),aa}(zc);V.prototype=Object.create(pd.prototype);V.prototype.constructor=V;Na.prototype=Object.create(pd.prototype);Na.prototype.constructor=Na;za=[If,mp,np,op,pp,qp,rp,sp].map(function(K){return new K(sc,cc)});this.width=a;this.height=c}function Rb(a,c,d){this.data=a;this.eof=!1;this.start=void 0===c?0:c;this.end=void 0===d?a.length:d;this.pos=this.start}function Jf(a){for(var c=a.length;0<=--c;)a[c]=0}function Gi(a,c,d,b,f){this.static_tree=a;this.extra_bits=c;this.extra_base=d;
this.elems=b;this.max_length=f;this.has_stree=a&&a.length}function Hi(a,c){this.dyn_tree=a;this.max_code=0;this.stat_desc=c}function ql(a){return 256>a?pg[a]:pg[256+(a>>>7)]}function qg(a,c){a.pending_buf[a.pending++]=255&c;a.pending_buf[a.pending++]=c>>>8&255}function vd(a,c,d){a.bi_valid>16-d?(a.bi_buf|=c<<a.bi_valid&65535,qg(a,a.bi_buf),a.bi_buf=c>>16-a.bi_valid,a.bi_valid+=d-16):(a.bi_buf|=c<<a.bi_valid&65535,a.bi_valid+=d)}function ge(a,c,d){vd(a,d[2*c],d[2*c+1])}function rl(a,c){var d=0;do d|=
1&a,a>>>=1,d<<=1;while(0<--c);return d>>>1}function sl(a,c,d){var b,f=Array(16),k=0;for(b=1;15>=b;b++)f[b]=k=k+d[b-1]<<1;for(d=0;d<=c;d++)b=a[2*d+1],0!==b&&(a[2*d]=rl(f[b]++,b))}function tl(a){var c;for(c=0;286>c;c++)a.dyn_ltree[2*c]=0;for(c=0;30>c;c++)a.dyn_dtree[2*c]=0;for(c=0;19>c;c++)a.bl_tree[2*c]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function ul(a){8<a.bi_valid?qg(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function vl(a,
c,d,b){var f=2*c,k=2*d;return a[f]<a[k]||a[f]===a[k]&&b[c]<=b[d]}function Ii(a,c,d){for(var b=a.heap[d],f=d<<1;f<=a.heap_len&&(f<a.heap_len&&vl(c,a.heap[f+1],a.heap[f],a.depth)&&f++,!vl(c,b,a.heap[f],a.depth));)a.heap[d]=a.heap[f],d=f,f<<=1;a.heap[d]=b}function wl(a,c,d){var b,f,k=0;if(0!==a.last_lit){do{var l=a.pending_buf[a.d_buf+2*k]<<8|a.pending_buf[a.d_buf+2*k+1];var h=a.pending_buf[a.l_buf+k];k++;0===l?ge(a,h,c):(ge(a,(b=rg[h])+256+1,c),0!==(f=Ji[b])&&vd(a,h-Ki[b],f),ge(a,b=ql(--l),d),0!==(f=
eh[b])&&vd(a,l-fh[b],f))}while(k<a.last_lit)}ge(a,256,c)}function Li(a,c){var d,b=c.dyn_tree;var f=c.stat_desc.static_tree;var k=c.stat_desc.has_stree,l=c.stat_desc.elems,h=-1;var e=0;a.heap_len=0;for(a.heap_max=573;e<l;e++)0!==b[2*e]?(a.heap[++a.heap_len]=h=e,a.depth[e]=0):b[2*e+1]=0;for(;2>a.heap_len;)b[2*(d=a.heap[++a.heap_len]=2>h?++h:0)]=1,a.depth[d]=0,a.opt_len--,k&&(a.static_len-=f[2*d+1]);c.max_code=h;for(e=a.heap_len>>1;1<=e;e--)Ii(a,b,e);d=l;do e=a.heap[1],a.heap[1]=a.heap[a.heap_len--],
Ii(a,b,1),f=a.heap[1],a.heap[--a.heap_max]=e,a.heap[--a.heap_max]=f,b[2*d]=b[2*e]+b[2*f],a.depth[d]=(a.depth[e]>=a.depth[f]?a.depth[e]:a.depth[f])+1,b[2*e+1]=b[2*f+1]=d,a.heap[1]=d++,Ii(a,b,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];var g,p,m,n,r;e=c.dyn_tree;d=c.max_code;f=c.stat_desc.static_tree;k=c.stat_desc.has_stree;l=c.stat_desc.extra_bits;var u=c.stat_desc.extra_base,w=c.stat_desc.max_length,z=0;for(m=0;15>=m;m++)a.bl_count[m]=0;e[2*a.heap[a.heap_max]+1]=0;for(c=a.heap_max+1;573>
c;c++)(m=e[2*e[2*(g=a.heap[c])+1]+1]+1)>w&&(m=w,z++),e[2*g+1]=m,g>d||(a.bl_count[m]++,n=0,g>=u&&(n=l[g-u]),r=e[2*g],a.opt_len+=r*(m+n),!k||(a.static_len+=r*(f[2*g+1]+n)));if(0!==z){do{for(m=w-1;0===a.bl_count[m];)m--;a.bl_count[m]--;a.bl_count[m+1]+=2;a.bl_count[w]--;z-=2}while(0<z);for(m=w;0!==m;m--)for(g=a.bl_count[m];0!==g;)(p=a.heap[--c])>d||(e[2*p+1]!==m&&(a.opt_len+=(m-e[2*p+1])*e[2*p],e[2*p+1]=m),g--)}sl(b,h,a.bl_count)}function xl(a,c,d){var b,f=-1,k=c[1],l=0,h=7,e=4;0===k&&(h=138,e=3);c[2*
(d+1)+1]=65535;for(b=0;b<=d;b++){var g=k;k=c[2*(b+1)+1];++l<h&&g===k||(l<e?a.bl_tree[2*g]+=l:0!==g?(g!==f&&a.bl_tree[2*g]++,a.bl_tree[32]++):10>=l?a.bl_tree[34]++:a.bl_tree[36]++,l=0,f=g,0===k?(h=138,e=3):g===k?(h=6,e=3):(h=7,e=4))}}function yl(a,c,d){var b,f,k=-1,l=c[1],h=0,e=7,g=4;0===l&&(e=138,g=3);for(b=0;b<=d;b++)if(f=l,l=c[2*(b+1)+1],!(++h<e)||f!==l){if(h<g){do ge(a,f,a.bl_tree);while(0!=--h)}else 0!==f?(f!==k&&(ge(a,f,a.bl_tree),h--),ge(a,16,a.bl_tree),vd(a,h-3,2)):10>=h?(ge(a,17,a.bl_tree),
vd(a,h-3,3)):(ge(a,18,a.bl_tree),vd(a,h-11,7));h=0;k=f;0===l?(e=138,g=3):f===l?(e=6,g=3):(e=7,g=4)}}function zl(a,c,d,b){vd(a,b?1:0,3);ul(a);qg(a,d);qg(a,~d);kb.arraySet(a.pending_buf,a.window,c,d,a.pending);a.pending+=d}function Me(a,c){return a.msg=jf[c],c}function Ne(a){for(var c=a.length;0<=--c;)a[c]=0}function Oe(a){var c=a.state,d=c.pending;d>a.avail_out&&(d=a.avail_out);0!==d&&(kb.arraySet(a.output,c.pending_buf,c.pending_out,d,a.next_out),a.next_out+=d,c.pending_out+=d,a.total_out+=d,a.avail_out-=
d,c.pending-=d,0===c.pending&&(c.pending_out=0))}function cd(a,c){tp(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,c);a.block_start=a.strstart;Oe(a.strm)}function ic(a,c){a.pending_buf[a.pending++]=c}function sg(a,c){a.pending_buf[a.pending++]=c>>>8&255;a.pending_buf[a.pending++]=255&c}function Al(a,c){var d,b,f=a.max_chain_length,k=a.strstart,l=a.prev_length,h=a.nice_match,e=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,g=a.window,p=a.w_mask,m=a.prev,n=a.strstart+258,r=g[k+l-
1],u=g[k+l];a.prev_length>=a.good_match&&(f>>=2);h>a.lookahead&&(h=a.lookahead);do if(g[(d=c)+l]===u&&g[d+l-1]===r&&g[d]===g[k]&&g[++d]===g[k+1]){k+=2;for(d++;g[++k]===g[++d]&&g[++k]===g[++d]&&g[++k]===g[++d]&&g[++k]===g[++d]&&g[++k]===g[++d]&&g[++k]===g[++d]&&g[++k]===g[++d]&&g[++k]===g[++d]&&k<n;);if(b=258-(n-k),k=n-258,b>l){if(a.match_start=c,l=b,b>=h)break;r=g[k+l-1];u=g[k+l]}}while((c=m[c&p])>e&&0!=--f);return l<=a.lookahead?l:a.lookahead}function kf(a){var c,d,b=a.w_size;do{if(d=a.window_size-
a.lookahead-a.strstart,a.strstart>=b+(b-262)){kb.arraySet(a.window,a.window,b,b,0);a.match_start-=b;a.strstart-=b;a.block_start-=b;var f=c=a.hash_size;do{var k=a.head[--f];a.head[f]=k>=b?k-b:0}while(--c);f=c=b;do k=a.prev[--f],a.prev[f]=k>=b?k-b:0;while(--c);d+=b}if(0===a.strm.avail_in)break;f=a.strm;k=a.window;var l=a.strstart+a.lookahead,h=f.avail_in;if(c=(h>d&&(h=d),0===h)?0:(f.avail_in-=h,kb.arraySet(k,f.input,f.next_in,h,l),1===f.state.wrap?f.adler=Kf(f.adler,k,h,l):2===f.state.wrap&&(f.adler=
Tc(f.adler,k,h,l)),f.next_in+=h,f.total_in+=h,h),a.lookahead+=c,3<=a.lookahead+a.insert)for(d=a.strstart-a.insert,a.ins_h=a.window[d],a.ins_h=(a.ins_h<<a.hash_shift^a.window[d+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[d+3-1])&a.hash_mask,a.prev[d&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=d,d++,a.insert--,!(3>a.lookahead+a.insert)););}while(262>a.lookahead&&0!==a.strm.avail_in)}function Mi(a,c){for(var d,b;;){if(262>a.lookahead){if(kf(a),262>a.lookahead&&0===c)return 1;if(0===
a.lookahead)break}if(d=0,3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==d&&a.strstart-d<=a.w_size-262&&(a.match_length=Al(a,d)),3<=a.match_length)if(b=Pe(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&
a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!=--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else b=Pe(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(b&&(cd(a,!1),0===a.strm.avail_out))return 1}return(a.insert=2>a.strstart?a.strstart:2,4===c)?(cd(a,!0),0===a.strm.avail_out)?3:4:a.last_lit&&(cd(a,!1),0===a.strm.avail_out)?1:2}function Lf(a,c){for(var d,
b,f;;){if(262>a.lookahead){if(kf(a),262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}if(d=0,3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=2,0!==d&&a.prev_length<a.max_lazy_match&&a.strstart-d<=a.w_size-262&&(a.match_length=Al(a,d),5>=a.match_length&&(1===a.strategy||3===a.match_length&&4096<a.strstart-a.match_start)&&
(a.match_length=2)),3<=a.prev_length&&a.match_length<=a.prev_length){f=a.strstart+a.lookahead-3;b=Pe(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=f&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!=--a.prev_length);if(a.match_available=0,a.match_length=2,a.strstart++,b&&(cd(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if(Pe(a,
0,a.window[a.strstart-1])&&cd(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}return(a.match_available&&(Pe(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=2>a.strstart?a.strstart:2,4===c)?(cd(a,!0),0===a.strm.avail_out)?3:4:a.last_lit&&(cd(a,!1),0===a.strm.avail_out)?1:2}function he(a,c,d,b,f){this.good_length=a;this.max_lazy=c;this.nice_length=d;this.max_chain=b;this.func=f}function up(){this.strm=null;this.status=0;this.pending_buf=
null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=
this.hash_size=this.ins_h=0;this.dyn_ltree=new kb.Buf16(1146);this.dyn_dtree=new kb.Buf16(122);this.bl_tree=new kb.Buf16(78);Ne(this.dyn_ltree);Ne(this.dyn_dtree);Ne(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new kb.Buf16(16);this.heap=new kb.Buf16(573);Ne(this.heap);this.heap_max=this.heap_len=0;this.depth=new kb.Buf16(573);Ne(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=
0}function Bl(a,c){if(65534>c&&(a.subarray&&Cl||!a.subarray&&Dl))return String.fromCharCode.apply(null,kb.shrinkBuf(a,c));for(var d="",b=0;b<c;b++)d+=String.fromCharCode(a[b]);return d}function lf(a){if(!(this instanceof lf))return new lf(a);this.options=kb.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},a||{});var c;a=this.options;a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<a.windowBits&&16>a.windowBits&&(a.windowBits+=16);this.err=0;this.msg="";
this.ended=!1;this.chunks=[];this.strm=new Ni;this.strm.avail_out=0;var d=this.strm;var b=a.level;var f=a.method,k=a.windowBits,l=a.memLevel,h=a.strategy;if(d){var e,g,p,m=1;if(-1===b&&(b=6),0>k?(m=0,k=-k):15<k&&(m=2,k-=16),1>l||9<l||8!==f||8>k||15<k||0>b||9<b||0>h||4<h)b=Me(d,-2);else{8===k&&(k=9);var n=new up;b=(d.state=n,n.strm=d,n.wrap=m,n.gzhead=null,n.w_bits=k,n.w_size=1<<n.w_bits,n.w_mask=n.w_size-1,n.hash_bits=l+7,n.hash_size=1<<n.hash_bits,n.hash_mask=n.hash_size-1,n.hash_shift=~~((n.hash_bits+
3-1)/3),n.window=new kb.Buf8(2*n.w_size),n.head=new kb.Buf16(n.hash_size),n.prev=new kb.Buf16(n.w_size),n.lit_bufsize=1<<l+6,n.pending_buf_size=4*n.lit_bufsize,n.pending_buf=new kb.Buf8(n.pending_buf_size),n.d_buf=1*n.lit_bufsize,n.l_buf=3*n.lit_bufsize,n.level=b,n.strategy=h,n.method=f,0===(p=d&&d.state?(d.total_in=d.total_out=0,d.data_type=2,(e=d.state).pending=0,e.pending_out=0,0>e.wrap&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,d.adler=2===e.wrap?0:1,e.last_flush=0,vp(e),0):Me(d,-2))&&((g=d.state).window_size=
2*g.w_size,Ne(g.head),g.max_lazy_match=tg[g.level].max_lazy,g.good_match=tg[g.level].good_length,g.nice_match=tg[g.level].nice_length,g.max_chain_length=tg[g.level].max_chain,g.strstart=0,g.block_start=0,g.lookahead=0,g.insert=0,g.match_length=g.prev_length=2,g.match_available=0,g.ins_h=0),p)}}else b=-2;if(0!==b)throw Error(jf[b]);if(a.header&&wp(this.strm,a.header),a.dictionary){if(c="string"==typeof a.dictionary?Oi(a.dictionary):"[object ArrayBuffer]"===El.call(a.dictionary)?new Uint8Array(a.dictionary):
a.dictionary,0!==(b=xp(this.strm,c)))throw Error(jf[b]);this._dict_set=!0}}function Pi(a,c){c=new lf(c);if(c.push(a,!0),c.err)throw c.msg||jf[c.err];return c.result}function Fl(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function yp(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=
this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new kb.Buf16(320);this.work=new kb.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function Gl(a,c,d,b){var f;a=a.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new kb.Buf8(a.wsize)),b>=a.wsize?(kb.arraySet(a.window,c,d-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((f=a.wsize-a.wnext)>b&&(f=b),kb.arraySet(a.window,c,d-b,f,a.wnext),
(b-=f)?(kb.arraySet(a.window,c,d-b,b,0),a.wnext=b,a.whave=a.wsize):(a.wnext+=f,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=f))),0}function mf(a){if(!(this instanceof mf))return new mf(a);this.options=kb.assign({chunkSize:16384,windowBits:0,to:""},a||{});var c,d,b,f,k,l,h,e,g,p=this.options;p.raw&&0<=p.windowBits&&16>p.windowBits&&(p.windowBits=-p.windowBits,0===p.windowBits&&(p.windowBits=-15));0<=p.windowBits&&16>p.windowBits&&(!a||!a.windowBits)&&(p.windowBits+=32);15<p.windowBits&&
48>p.windowBits&&0==(15&p.windowBits)&&(p.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Ni;this.strm.avail_out=0;a=(b=this.strm,f=p.windowBits,b?(l=new yp,b.state=l,l.window=null,h=f,0!=(k=b&&b.state?(g=b.state,0>h?(e=0,h=-h):(e=(h>>4)+1,48>h&&(h&=15)),h&&(8>h||15<h))?-2:(null!==g.window&&g.wbits!==h&&(g.window=null),g.wrap=e,g.wbits=h,b&&b.state?((c=b.state).wsize=0,c.whave=0,c.wnext=0,b&&b.state?(d=b.state,b.total_in=b.total_out=d.total=0,b.msg="",d.wrap&&(b.adler=
1&d.wrap),d.mode=1,d.last=0,d.havedict=0,d.dmax=32768,d.head=null,d.hold=0,d.bits=0,d.lencode=d.lendyn=new kb.Buf32(852),d.distcode=d.distdyn=new kb.Buf32(592),d.sane=1,d.back=-1,0):-2):-2):-2)&&(b.state=null),k):-2);if(a!==Gc.Z_OK||(this.header=new Hl,zp(this.strm,this.header),p.dictionary&&("string"==typeof p.dictionary?p.dictionary=Oi(p.dictionary):"[object ArrayBuffer]"===Il.call(p.dictionary)&&(p.dictionary=new Uint8Array(p.dictionary)),p.raw&&(a=Jl(this.strm,p.dictionary))!==Gc.Z_OK)))throw Error(jf[a]);
}function Qi(a,c){c=new mf(c);if(c.push(a,!0),c.err)throw c.msg||jf[c.err];return c.result}function Ri(a){this.version=a.readU32BE();this.width=a.readU32BE();this.height=a.readU32BE();this.layersNb=a.readU32BE()}function gh(a){for(var c=[,,,,],d=0;d<c.length;d++)c[d]=String.fromCharCode(a.readByte());if(this.chunkType=c.join(""),this.chunkSize=a.readU32BE(),a.eof)throw"Truncated chunk";}function Kl(a){return{major:a>>16&65535,minor:65535&a}}function Si(a,c){var d=new Rb(new Uint8Array(gh.HEADER_LENGTH+
c));return d.writeString(a),d.writeU32BE(c),d}function Mf(){}function hh(a){function c(k,l){null===l?f.emitEvent("loadingProgress",[1,"Loading your "+k.friendly+"..."]):f.emitEvent("loadingProgress",[l,"Loading your "+k.friendly+" ("+Math.round(100*l)+"%)..."])}var d=[],b={},f=this;a.loadChibiFileUrl&&0<(""+a.loadChibiFileUrl).length?d.push({url:a.loadChibiFileUrl,friendly:"drawing layers",name:"layers",required:!0}):a.loadImageUrl&&0<(""+a.loadImageUrl).length&&d.push({url:a.loadImageUrl,friendly:"drawing",
name:"flat",required:!0});a.loadSwatchesUrl&&d.push({url:a.loadSwatchesUrl,friendly:"color swatches",name:"swatches",required:!1,noProgress:!0});this.load=function(){function k(){l.required?f.emitEvent("loadingFailure",["Failed to load your "+l.friendly+", please try again later."]):f.load()}if(0==d.length)f.emitEvent("loadingComplete",[b]);else{var l=d.shift(),h=new XMLHttpRequest;h.addEventListener("progress",function(e){c(l,e.lengthComputable&&!l.noProgress?e.loaded/e.total:null)},!1);h.addEventListener("load",
function(e){if(200==this.status){var g=this.response;f.emitEvent("loadingProgress",[1,"Starting ChickenPaint..."]);setTimeout(function(){(function(p,m){switch(p.name){case "flat":return new Promise(function(n,r){var u=new Blob([m],{type:"image/png"}),w=window.URL.createObjectURL(u);if(w){var z=new Image;z.onload=function(){var G=new ud(this.width,this.height),L=new Ya(0,0,"Layer 1");L.image=J.createFromImage(z);G.addLayerObject(G.getLayersRoot(),L);z=null;window.URL.revokeObjectURL(w);n(G)};z.src=
w}else r(null)});case "swatches":return(p=(new Mf).read(m))?Promise.resolve(p):Promise.reject(null);case "layers":return function(n,r){function u(ha){var qa;var Da=ka;if(null!==Da&&0!==Da.length)if(null===ha||0===ha.length)ha=Da;else{var La=new Uint8Array(Da.length+ha.length);ha=(La.set(Da,0),La.set(ha,Da.length),La)}for(ka=ha;ka;){if(N<ka.length)ka=ka.subarray(N),N=0;else{N-=ka.length;ka=null;break}switch(G){case 0:if(ka.length<gh.HEADER_LENGTH)break;if(Y=new gh(qa=new Rb(ka)),ka=ka.subarray(qa.pos),
ea)if("ZEND"==Y.chunkType)G=45;else{"LAYR"==Y.chunkType?(G=2,w=new Ap(Y,ea.width,ea.height)):"GRUP"==Y.chunkType?(G=3,w=new Bp(Y,ea.width,ea.height)):(console.log("Unknown chunk type '"+Y.chunkType+"', attempting to skip..."),N=Y.chunkSize);continue}else if("HEAD"==Y.chunkType){G=1;continue}else G=5;break;case 1:if(ka.length<Y.chunkSize)break;if(0<Kl((ea=new Ri(qa=new Rb(ka))).version).major){G=5;break}O=(L=new ud(ea.width,ea.height)).getLayersRoot();N=Y.chunkSize;G=0;continue;case 2:if(ka=w.decode(ka),
w.done){L.addLayerObject(O,w.layer);G=0;continue}break;case 3:if(ka=w.decode(ka),w.done){L.addLayerGroupObject(O,w.layer,w.childLayers);G=0;continue}}break}}r=r||{};var w,z=new (fa(Ti).Inflate)({}),G=0,L=null,O=null,N=0,ea=null,Y=null,ka=null;return(new Promise(function(ha){if(n instanceof ArrayBuffer)ha(n);else{var qa=new FileReader;qa.onload=function(){ha(this.result)};qa.readAsArrayBuffer(n)}})).then(function(ha){return new Promise(function(qa,Da){var La=new Uint8Array(ha);(function(Ka){for(var V=
0;8>V;V++)if(Ka[V]!="CHIBIOEK".charCodeAt(V))return!1;return!0})(La)?(La=La.subarray(8),z.onData=u,z.onEnd=function(Ka){0===Ka&&45==G?(!1!==r.upgradeMultiplyLayers&&10>ea.version&&L.upgradeMultiplyLayers(r.upgradeMultiplyLayers),L.selectTopmostVisibleLayer(),qa(L)):Da("Fatal error decoding ChibiFile: "+Ka)},z.push(La,!0)):Da("This doesn't appear to be a ChibiPaint layers file, is it damaged?")})})}(m);default:return Promise.reject("Unexpected resource type '"+p.name+"'")}})(l,g).then(function(p){b[l.name]=
p;f.load()},function(){f.emitEvent("loadingFailure",["Failed to read your "+l.friendly])})},0)}else k()},!1);h.addEventListener("error",k);c(l,l.noProgress?null:0);h.open("GET",l.url,!0);h.responseType="arraybuffer";h.send()}}}function Ui(a){(a=a.split(/[-_]/,1)[0].toLowerCase())in Vi?(ih=Vi[a],Wi=a):(ih=jh,Wi="en")}function wa(a){return a in ih?ih[a]:a}function ug(a){function c(f){null===f?d.emitEvent("savingProgress",[1,wa("Saving drawing...")]):d.emitEvent("savingProgress",[f,wa("Saving drawing...")+
" ("+Math.round(100*f)+"%)"])}var d=this,b=!1;a.rotation=a.rotation||0;this.save=function(){var f,k,l,h,e;(f=new Blob([function(g){for(var p=new Uint8Array(g.length),m=0;m<g.length;m++)p[m]=g.charCodeAt(m);return p}(a.artwork.getFlatPNG(a.rotation))],{type:"image/png"}),a.artwork.isSimpleDrawing())?l=Promise.resolve(null):(h=a.artwork,e=e||{},l=Promise.resolve().then(function(){var g=new (fa(Ti).Deflate)({level:7}),p=[],m=new Uint8Array(8),n=h.getLayersRoot().getLinearizedLayerList(!1),r=e.forceOldVersion?
0:function(ea){var Y=!0,ka=!1,ha=void 0;try{for(var qa,Da=ea.getLayersRoot().getLinearizedLayerList(!1)[Symbol.iterator]();!(Y=(qa=Da.next()).done);Y=!0){var La=qa.value;if(La instanceof Kb||La.mask||La.clip||La.blendMode>W.LM_LAST_CHIBIPAINT||La.blendMode===W.LM_MULTIPLY)return 10}}catch(Ka){ka=!0,ha=Ka}finally{try{Y||null==Da.return||Da.return()}finally{if(ka)throw ha;}}return 0}(h),u=0===(z=Kl(r)).major&&0===z.minor?"ChibiPaint v0.0":"ChickenPaint v"+z.major+"."+z.minor,w=Promise.resolve();g.onData=
function(ea){p.push(ea)};for(z=0;8>z;z++)m[z]="CHIBIOEK".charCodeAt(z);p.push(m);g.push((G=n.length,(L=Si("HEAD",Ri.FIXED_HEADER_LENGTH)).writeU32BE(r),L.writeU32BE(h.width),L.writeU32BE(h.height),L.writeU32BE(G),L.getAsDataArray()),!1);m=!0;r=!1;G=void 0;try{for(var z,G,L,O,N=n[Symbol.iterator]();!(m=(O=N.next()).done);m=!0)!function(){var ea=O.value;w=w.then(function(){return new Promise(function(Y){var ka=g.push,ha,qa,Da=ea instanceof Ya,La=4*(Da?5:6),Ka=ea.name.length,V=Si(Da?"LAYR":"GRUP",La+
Ka+((Da?ea.image.data.length:0)+(ea.mask?ea.mask.data.length:0))),Na=0;ea.visible&&(Na|=1);Da&&ea.clip&&(Na|=2);ea.mask&&(Na|=4);ea.maskLinked&&(Na|=8);ea.maskVisible&&(Na|=16);ea.lockAlpha&&(Na|=64);!Da&&ea.expanded&&(Na|=32);ea.blendMode===W.LM_MULTIPLY2?(ha=W.LM_MULTIPLY,Na|=128):ha=ea.blendMode;V.writeU32BE(La+Ka);V.writeU32BE(ha);V.writeU32BE(ea.alpha);V.writeU32BE(Na);V.writeU32BE(ea.name.length);Da||V.writeU32BE(ea.layers.length);V.writeString(ea.name);if(Da){ha=V.pos;Da=V.data;La=ea.image.data;
for(Ka=0;Ka<La.length;Ka+=J.BYTES_PER_PIXEL)Da[ha++]=La[Ka+J.ALPHA_BYTE_OFFSET],Da[ha++]=La[Ka+J.RED_BYTE_OFFSET],Da[ha++]=La[Ka+J.GREEN_BYTE_OFFSET],Da[ha++]=La[Ka+J.BLUE_BYTE_OFFSET];V.pos=ha}ha=(ea.mask&&(qa=ea.mask,V.data.set(qa.data,V.pos),V.pos+=qa.data.length),V.getAsDataArray());ka.call(g,ha,!1);setTimeout(Y,10)})})}()}catch(ea){r=!0,G=ea}finally{try{m||null==N.return||N.return()}finally{if(r)throw G;}}return w.then(function(){return new Promise(function(ea,Y){g.onEnd=function(ka){if(0===
ka)if("undefined"!=typeof Blob)ea({bytes:new Blob(p,{type:"application/octet-stream"}),version:u});else{ka=new Uint8Array(p.map(function(ya){return ya.byteLength}).reduce(function(ya,wb){return ya+wb},0));var ha=0,qa=!0,Da=!1,La=void 0;try{for(var Ka,V=p[Symbol.iterator]();!(qa=(Ka=V.next()).done);qa=!0){var Na=Ka.value;ka.set(Na,ha);ha+=Na.byteLength}}catch(ya){Da=!0,La=ya}finally{try{qa||null==V.return||V.return()}finally{if(Da)throw La;}}ea({bytes:ka,version:u})}else Y(ka)};g.push(Si("ZEND",0).getAsDataArray(),
!0)})})}));l.then(function(g){if(b)d.emitEvent("savingFailure");else if(k=a.swatches?new Blob([(new Mf).write(a.swatches)],{type:"application/octet-stream"}):null,a.url){var p=new FormData;p.append("beginMarker","This marker ensures the upload wasn't truncated");p.append("painter","ChickenPaint v2.0");p.append("picture",f);f=null;g?(p.append("chibifileFormat",g.version),p.append("chibifile",g.bytes),g=null,p.append("rotation",""+a.rotation)):p.append("rotation","0");k&&(p.append("swatches",k),k=null);
p.append("endMarker","This marker ensures the upload wasn't truncated");c(.5);fetch(a.url,{method:"POST",mode:"same-origin",headers:{"X-Requested-With":"chickenpaint"},body:p}).then(function(m){if(!m.ok)throw Error("Network response was not ok (".concat(m.status,")"));return m.text()}).then(function(m){/^CHIBIOK/.test(m)?(c(1),d.emitEvent("savingComplete")):d.emitEvent("savingFailure",[m])}).catch(function(m){d.emitEvent("savingFailure",[m.message])})}else p="oekaki_"+(new Date).toISOString().split(".")[0].replace(/[^0-9]/g,
"_"),fa(vg).saveAs(f,p+".png"),g&&fa(vg).saveAs(g.bytes,p+".chi"),k&&fa(vg).saveAs(k,p+".aco")}).catch(function(g){d.emitEvent("savingFailure")})};this.cancel=function(){b=!0}}function Cp(a,c,d){function b(){var ka=g.width/2,ha=g.height/2;if(p.fillStyle="white",p.fillRect(0,0,g.width,g.height),O==L.length){var qa=u.width,Da=u.height,La=Math.round(ka-qa/2),Ka=Math.round(ha-Da/2);p.drawImage(u,La,Ka);var V=N;k||((k=document.createElement("canvas")).width=qa,k.height=Da,h=k.getContext("2d"));h.globalCompositeOperation=
"copy";h.drawImage(m,0,0);l||((l=document.createElement("canvas")).width=qa,l.height=Da,e=l.getContext("2d"));e.globalCompositeOperation="copy";e.drawImage(G,0,0);e.globalCompositeOperation="source-in";e.drawImage(G,0,Math.round(170*V));h.globalCompositeOperation="source-over";h.drawImage(l,0,0);h.drawImage(n,0,0);h.globalCompositeOperation="screen";h.drawImage(z,0,0);h.globalCompositeOperation="multiply";h.drawImage(w,0,0);p.globalAlpha=.88;p.drawImage(k,La,Ka);p.globalAlpha=1;p.drawImage(r,La,Ka);
ha=Math.round(ha+Da/2+2)}if(""!=ea)for(p.fillStyle="black",V=ea.split("\n"),qa=0;qa<V.length;qa++)Da=V[qa],La=p.measureText(Da).width,ha+=28,p.fillText(Da,ka-La/2,ha)}function f(){g.width=g.clientWidth;g.height=g.clientHeight;p.font="14pt sans-serif";b()}var k,l,h,e,g=document.createElement("canvas"),p=g.getContext("2d"),m=new Image,n=new Image,r=new Image,u=new Image,w=new Image,z=new Image,G=new Image,L=[m,n,r,u,w,z,G],O=0,N=0,ea="";d+="splash/";for(var Y=0;Y<L.length;Y++)L[Y].onload=function(){++O==
L.length&&b()};m.src=d+"cup.png";z.src=d+"highlights.png";n.src=d+"lid.png";r.src=d+"lines.png";w.src=d+"shading.png";G.src=d+"smoothie.png";u.src=d+"text.png";c.on("loadingProgress",function(ka,ha){N=ka;ea=ha;b()});c.on("loadingFailure",function(ka){N=0;ea=ka;b()});c.on("loadingComplete",function(){window.removeEventListener("resize",f);a.removeChild(g)});window.addEventListener("resize",f);g.className="chickenpaint-splash-screen";a.appendChild(g);f()}function Ll(a){for(var c={DELETE:46,BACKSPACE:8,
TAB:9,ENTER:13,ESCAPE:27," ":32,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,SHIFT:16,"[":219,"]":221,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,0:48,"-":189,"=":187,"+":187,";":187,META:91,LEFTMETA:91,RIGHTMETA:91,ALT:18,ALTGRAPH:18,OPTION:18,CONTROL:17},d=65;90>=d;d++)c[String.fromCharCode(d)]=d;if((a=a.toUpperCase())in c)return c[a]}function ve(){var a,c=null,d=this;this.isPen=function(){var b;return!!c&&(1==(b=c.pointerType)||3==b)};this.getPressure=function(){return c?c.pressure:1};this.pluginLoaded=
function(){console.log("Wacom tablet support loaded!");c=a.penAPI};this.isTabletPresent=function(){return!!c};this.detectTablet=function(){if(/Chrome/i.test(navigator.userAgent)&&!/OPR/.test(navigator.userAgent))console.log("Not attempting to load Wacom tablet plugin, since this is Chrome");else{if(console.log("Attempting to load Wacom tablet support..."),"classid"in(a=document.createElement("object")))a.classid="CLSID:092dfa86-5807-5a94-bf3b-5a53ba9e5308";else{var b=document.createElement("param");
b.name="onload";b.value="onWacomPluginLoaded";a.appendChild(b);a.type="application/x-wacomtabletplugin"}a.style.position="absolute";a.style.visibility="hidden";a.onload="onWacomPluginLoaded";document.body.appendChild(a);setTimeout(function(){d.isTabletPresent()||console.log("Looks like the Wacom plugin isn't installed, or failed to load.")},5E3)}}}function Ml(){var a,c,d,b,f,k,l,h,e=this;this.x0=this.y0=this.x1=this.y1=this.x2=this.y2=this.x3=this.y3=0;this.compute=function(g,p,m){var n=1/m,r=3*n,
u=r*n;n*=n*n;var w=2*u,z=6*n,G=e.x0-2*e.x1+e.x2,L=e.y0-2*e.y1+e.y2,O=3*(e.x1-e.x2)-e.x0+e.x3,N=3*(e.y1-e.y2)-e.y0+e.y3;a=e.x0;f=e.y0;c=(e.x1-e.x0)*r+G*u+O*n;k=(e.y1-e.y0)*r+L*u+N*n;d=G*w+O*z;l=L*w+N*z;b=O*z;h=N*z;g[0]=a;p[0]=f;for(r=1;r<m;r++)a+=c,f+=k,c+=d,k+=l,d+=b,l+=h,g[r]=a,p[r]=f}}function Nl(a,c,d,b){var f,k=0;return"boolean"!=typeof c&&(b=d,d=c,c=void 0),function(){function l(){k=+new Date;d.apply(h,g)}var h=this,e=+new Date-k,g=arguments;b&&!f&&l();f&&clearTimeout(f);void 0===b&&e>a?l():
!0!==c&&(f=setTimeout(b?function(){f=void 0}:l,void 0===b?a-e:a))}}function nf(a){this.points=a||[]}function tc(a,c){this.x=a;this.y=c}function Ol(a){for(var c=document.createElement("canvas"),d=c.getContext("2d"),b=d.createImageData(64,64),f=b.data,k=0,l=0;64>l;l++)for(var h=0;64>h;h++)0!=(8&h)^0!=(8&l)?(f[k++]=255,f[k++]=255,f[k++]=255):(f[k++]=204,f[k++]=204,f[k++]=204),f[k++]=255;return c.width=64,c.height=64,d.putImageData(b,0,0),a.createPattern(c,"repeat")}function kh(a,c){c+="Style";a.globalCompositeOperation=
"exclusion";"exclusion"==a.globalCompositeOperation?a[c]="white":(a.globalCompositeOperation="difference",a[c]="#888","difference"!=a.globalCompositeOperation&&(a[c]="black"))}function wg(a){function c(){var w=a?fa(ta)(b).height():fa(ta)(b).width();n=g/(h-l)*w;w=(e-l)/(h-l)*(w-n);k.style[a?"height":"width"]=n+"px";f.style[a?"height":"width"]=n+"px";f.style[a?"top":"left"]=w+"px"}var d,b=document.createElement("div"),f=document.createElement("div"),k=document.createElement("div"),l=0,h=1,e=0,g=1,p=
10,m=!1,n=1,r=!1,u=this;this.setValues=function(w,z,G,L){e=w;g=z;l=G;h=L;c()};this.setBlockIncrement=function(w){p=w};this.setUnitIncrement=function(w){};this.getElement=function(){return b};this.getValueIsAdjusting=function(){return m};b.className="chickenpaint-scrollbar "+(a?"chickenpaint-scrollbar-vertical":"chickenpaint-scrollbar-horizontal");f.className="chickenpaint-scrollbar-handle";f.setAttribute("touch-action","none");k.className="chickenpaint-scrollbar-handle-inner";f.appendChild(k);b.appendChild(f);
f.addEventListener("pointerdown",function(w){w.stopPropagation();d=a?w.pageY-fa(ta)(b).offset().top:w.pageX-fa(ta)(b).offset().left;f.setPointerCapture(w.pointerId);fa(ta)(f).addClass("dragging");r=!0});f.addEventListener("pointermove",function(w){if(r){m=!0;var z=a?fa(ta)(b).height():fa(ta)(b).width();w=a?w.pageY-fa(ta)(b).offset().top:w.pageX-fa(ta)(b).offset().left;e+=(w-d)*(h-l)/(z-n);e=Math.min(Math.max(e,l),h);d=w;u.emitEvent("valueChanged",[e]);c();m=!1}});f.addEventListener("pointerup",function(w){if(w.stopPropagation(),
r){try{f.releasePointerCapture(w.pointerId)}catch(z){}fa(ta)(f).removeClass("dragging");r=!1}});f.addEventListener("click",function(w){w.stopPropagation()});b.addEventListener("click",function(w){this==b&&((a?w.pageY-fa(ta)(b).offset().top:w.pageX-fa(ta)(b).offset().left)<parseInt(f.style[a?"top":"left"],10)?e-=p:e+=p,u.emitEvent("valueChanged",[e]),c())})}function dd(){this.modes=[]}function lh(a){function c(){}function d(){}function b(){this.shouldPaintBrushPreview=!1;this.oldPreviewRect=null}function f(){b.call(this);
this.smoothMouse={x:0,y:0}}function k(){var F,Q;this.mouseDown=function(ca,ua,Ea){if(!this.capture&&0==ua&&!ca.altKey&&!fa(Dc).isPressed("space")&&G())return this.capture=!0,F=Q={x:qb+.5,y:Ab+.5},this.eraseBrushPreview(),!0};this.mouseDrag=function(ca){if(this.capture){var ua=new Va(Math.min(F.x,Q.x)-1-1,Math.min(F.y,Q.y)-1-1,Math.max(F.x,Q.x)+1+1+1,Math.max(F.y,Q.y)+1+1+1);if(Q={x:qb+.5,y:Ab+.5},ca.shiftKey){var Ea=Math.PI/4;ca=Math.round(Math.atan2(Q.y-F.y,Q.x-F.x)/Ea);switch(ca){case 0:case 4:Q.y=
F.y;break;case 2:case 6:Q.x=F.x;break;default:ca*=Ea,Ea=Math.sqrt((Q.y-F.y)*(Q.y-F.y)+(Q.x-F.x)*(Q.x-F.x)),Q.x=F.x+Ea*Math.cos(ca),Q.y=F.y+Ea*Math.sin(ca)}}return ua.union(new Va(Math.min(F.x,Q.x)-1-1,Math.min(F.y,Q.y)-1-1,Math.max(F.x,Q.x)+1+1+1,Math.max(F.y,Q.y)+1+1+1)),wb(ua),!0}this.mouseMove.call(this,ca)};this.mouseUp=function(ca,ua,Ea){if(this.capture&&0==ua)return ca=N(F),ua=N(Q),this.capture=!1,this.drawLine(ca,ua),wb(new Va(Math.min(F.x,Q.x)-1-1,Math.min(F.y,Q.y)-1-1,Math.max(F.x,Q.x)+1+
1+1,Math.max(F.y,Q.y)+1+1+1)),!0};this.paint=function(){this.capture?(za.lineWidth=1,za.beginPath(),za.moveTo(F.x,F.y),za.lineTo(Q.x,Q.y),za.stroke()):b.prototype.paint.call(this)};b.call(this)}function l(){var F,Q,ca,ua,Ea=0;this.mouseDown=function(Fa,Qa,vb){if(!this.capture&&0==Qa&&!Fa.altKey&&!fa(Dc).isPressed("space")&&G())return Fa=N({x:qb,y:Ab}),Ea=0,F=Q=ca=ua=Fa,this.capture=!0,this.eraseBrushPreview(),!0};this.mouseDrag=function(Fa){if(this.capture&&0===Ea)return ca=ua=N({x:qb,y:Ab}),Sa.repaintAll(),
!0;this.mouseMove.call(this,Fa)};this.mouseUp=function(Fa,Qa,vb){if(this.capture&&0==Qa){switch(Ea){case 0:Ea=1;break;case 1:Ea=2;break;case 2:this.capture=!1;Qa=F;vb=Q;var Ha=ca,xb=ua;Fa=new Ml;Fa.x0=Qa.x;Fa.y0=Qa.y;Fa.x1=vb.x;Fa.y1=vb.y;Fa.x2=Ha.x;Fa.y2=Ha.y;Fa.x3=xb.x;Fa.y3=xb.y;Qa=Array(500);vb=Array(500);Fa.compute(Qa,vb,500);ma.beginStroke(Qa[0],vb[0],1);for(Fa=1;500>Fa;Fa++)ma.continueStroke(Qa[Fa],vb[Fa],1);ma.endStroke();Sa.repaintAll()}return!0}};this.mouseMove=function(Fa,Qa){if(this.capture)return Fa=
N({x:qb,y:Ab}),1==Ea?Q=Fa:2==Ea&&(ca=Fa),Sa.repaintAll(),!0;b.prototype.mouseMove.call(this,Fa,Qa)};this.paint=function(){if(this.capture){var Fa=new Ml,Qa=Y(F),vb=Y(Q),Ha=Y(ca),xb=Y(ua);Fa.x0=Qa.x;Fa.y0=Qa.y;Fa.x1=vb.x;Fa.y1=vb.y;Fa.x2=Ha.x;Fa.y2=Ha.y;Fa.x3=xb.x;Fa.y3=xb.y;var Fc=Array(100),jd=Array(100);Fa.compute(Fc,jd,100);za.beginPath();za.moveTo(Fc[0],jd[0]);for(Fa=1;100>Fa;Fa++)za.lineTo(Fc[Fa],jd[Fa]);za.moveTo(~~Qa.x,~~Qa.y);za.lineTo(~~vb.x,~~vb.y);za.moveTo(~~Ha.x,~~Ha.y);za.lineTo(~~xb.x,
~~xb.y);za.stroke()}else b.prototype.paint.call(this)};b.call(this)}function h(){var F;this.mouseDown=function(Q,ca,ua){return!!this.capture||(fa(Dc).isPressed("space")||(0!=ca||this.transient&&!Q.altKey)&&2!=ca?void(this.transient&&yb.pop()):(F=ca,this.capture=!0,w("crosshair"),this.mouseDrag(Q),!0))};this.mouseDrag=function(Q){if(this.capture)return Q=N({x:qb,y:Ab}),ma.isPointWithin(Q.x,Q.y)&&a.setCurColor(new bc(ma.colorPicker(Q.x,Q.y))),!0};this.mouseUp=function(Q,ca,ua){if(this.capture&&ca==
F)return F=-1,this.capture=!1,w("default"),this.transient&&yb.pop(),!0};this.enter=function(){c.prototype.enter.call(this);F=-1}}function e(){var F,Q,ca,ua;this.keyDown=function(Ea){if(" "===Ea.key)return this.capture||w("grab"),!0};this.keyUp=function(Ea){if(this.transient&&1!=ua&&" "===Ea.key)return w("default"),yb.pop(),!0};this.mouseDown=function(Ea,Fa,Qa){return!!this.capture||(1==Fa||fa(Dc).isPressed("space")&&0==Fa||!this.transient&&0==Fa?(this.capture=!0,ua=Fa,F=Ea.pageX,Q=Ea.pageY,ca=Sa.getOffset(),
w("grabbing"),!0):void(this.transient&&yb.pop()))};this.mouseDrag=function(Ea){if(this.capture)return Sa.setOffset(ca.x+Ea.pageX-F,ca.y+Ea.pageY-Q),!0};this.mouseUp=function(Ea,Fa,Qa){if(this.capture&&Fa==ua)return ua=-1,this.capture=!1,this.transient&&!fa(Dc).isPressed("space")&&(w("default"),yb.pop()),!0};this.enter=function(){w("grab")}}function g(){}function p(){var F,Q=new Va(0,0,0,0),ca=-1;this.mouseDown=function(ua,Ea,Fa){if(!this.capture&&0==Ea&&!ua.altKey&&!fa(Dc).isPressed("space"))return ua=
ea({x:qb,y:Ab}),ca=Ea,Q.makeEmpty(),F=ua,Sa.repaintAll(),this.capture=!0,!0};this.mouseDrag=function(ua){if(!this.capture)return!1;var Ea=ea({x:qb,y:Ab});ua=ua.shiftKey;var Fa=~~Math.max(Math.abs(Ea.x-F.x),Math.abs(Ea.y-F.y));return Ea.x>=F.x?(Q.left=F.x,Q.right=(ua?F.x+Fa:Ea.x)+1):(Q.left=ua?F.x-Fa:Ea.x,Q.right=F.x+1),Ea.y>=F.y?(Q.top=F.y,Q.bottom=(ua?F.y+Fa:Ea.y)+1):(Q.top=ua?F.y-Fa:Ea.y,Q.bottom=F.y+1),Sa.repaintAll(),!0};this.mouseUp=function(ua,Ea,Fa){if(this.capture&&Ea==ca)return ma.rectangleSelection(Q),
Q.makeEmpty(),Sa.repaintAll(),this.capture=!1,ca=-1,!0};this.paint=function(){Q.isEmpty()||(za.lineWidth=1,qa(za,Q))}}function m(){var F,Q,ca=!1;this.mouseDown=function(ua,Ea,Fa){if(!this.capture&&0==Ea&&!fa(Dc).isPressed("space")&&z())return F=N({x:qb,y:Ab}),Q=ua.altKey,ca=!0,this.capture=!0,!0};this.mouseDrag=Nl(25,function(ua){if(this.capture){ua=N({x:qb,y:Ab});var Ea=ua.x-F.x,Fa=ua.y-F.y,Qa=~~Ea,vb=~~Fa;return(0!=Qa||0!=vb)&&(ma.move(Qa,vb,Q&&ca),ca=!1),F.x=ua.x-(Ea-Qa),F.y=ua.y-(Fa-vb),!0}});
this.mouseUp=function(ua,Ea,Fa){if(this.capture&&0==Ea)return this.capture=!1,this.transient&&yb.pop(),!0}}function n(){function F(Wa,bb){return{x:(Wa.x+bb.x)/2,y:(Wa.y+bb.y)/2}}function Q(Wa){return{x:Math.round(Wa.x),y:Math.round(Wa.y)}}function ca(Wa,bb){for(var cb=0;cb<Wa.points.length;cb++)if(49>=(bb.x-Wa.points[cb].x)*(bb.x-Wa.points[cb].x)+(bb.y-Wa.points[cb].y)*(bb.y-Wa.points[cb].y))return 2*cb;for(cb=0;cb<Wa.points.length;cb++){var Db=Wa.points[cb],Sb=Wa.points[(cb+1)%Wa.points.length];
Sb=new tc(Sb.x-Db.x,Sb.y-Db.y);Db=new tc(bb.x-Db.x,bb.y-Db.y);var wd=Sb.getLength(),Qd=Sb.getScaled(1/wd);wd=Db.getScaled(1/wd);Qd=Qd.getDotProduct(wd);if(0<=Qd&&1>=Qd&&(Sb.scale(Qd),49>=(Sb.x-Db.x)*(Sb.x-Db.x)+(Sb.y-Db.y)*(Sb.y-Db.y)))return 2*cb+1}return Wa.containsPoint(bb)?-3:-2}function ua(){var Wa=vb.getTransformed(gb),bb=ca(Wa,{x:qb,y:Ab});switch(bb){case 0:case 2:case 4:case 6:bb=~~(bb/2);var cb=Wa.points[bb],Db=Wa.points[(bb+1)%4];Ea(tc.subtractPoints(Wa.points[(bb+3)%4],cb).normalize().add(tc.subtractPoints(Db,
cb).normalize()));break;case 1:case 3:case 5:case 7:Ea(tc.subtractPoints(Wa.points[(~~(bb/2)+1)%4],Wa.points[~~(bb/2)]).getPerpendicular());break;case -3:w("move");break;default:w("default")}}function Ea(Wa){Wa=Math.floor(Math.atan2(-Wa.y,Wa.x)/(Math.PI/4)+.5);switch(0>Wa&&(Wa+=4),Wa){default:Wa="ew-resize";break;case 1:Wa="nesw-resize";break;case 2:Wa="ns-resize";break;case 3:Wa="nwse-resize"}w(Wa)}var Fa,Qa,vb,Ha,xb,Fc,jd=-1;this.mouseDown=function(Wa,bb,cb){if(!this.capture&&0==bb&&!Wa.altKey&&
!fa(Dc).isPressed("space"))return jd=ca(vb.getTransformed(gb),{x:qb,y:Ab}),xb=N(Ha={x:qb,y:Ab}),this.capture=!0,ua(),!0};this.mouseDrag=Nl(40,function(Wa){if(this.capture){var bb={x:qb,y:Ab};switch(jd){case -3:Wa=Q(N(bb));var cb=tc.subtractPoints(Wa,xb);bb=cb.getTruncated();cb=cb.subtract(bb);var Db=new pc;Db.translate(bb.x,bb.y);Fa.preMultiply(Db);xb=tc.subtractPoints(Wa,cb);break;case -2:Db=Math.PI/4;cb=vb.getCenter();var Sb=Y(cb),wd=Math.atan2(bb.y-Sb.y,bb.x-Sb.x)-Math.atan2(Ha.y-Sb.y,Ha.x-Sb.x);
Sb=new pc;Fc+=wd;Wa=Wa.shiftKey?-Fa.decompose().rotate+Math.round(Fc/Db)*Db:wd;Sb.rotateAroundPoint(Wa,cb.x,cb.y);Fa.preMultiply(Sb);Ha=bb;break;case 0:case 2:case 4:case 6:Db=~~(jd/2);cb=Qa.points[Db];Sb=Fa.getInverted().getTransformedPoint(Q(N(bb)));bb=Qa.points[(Db+2)%4];Db=(Sb.x-bb.x)/(cb.x-bb.x);cb=(Sb.y-bb.y)/(cb.y-bb.y);if(.001>Math.abs(Db)||.001>Math.abs(cb)||isNaN(Db)||isNaN(cb))return!0;Wa.shiftKey&&(cb=Db=Wa=Math.max(Db,cb));Fa.scaleAroundPoint(Db,cb,bb.x,bb.y);break;case 1:case 5:case 3:case 7:Wa=
~~(jd/2);Sb=F(Qa.points[Wa],Qa.points[(Wa+1)%4]);bb=Fa.getInverted().getTransformedPoint(Q(N(bb)));Wa=F(Qa.points[(Wa+2)%4],Qa.points[(Wa+3)%4]);Sb=tc.subtractPoints(Sb,Wa);bb=tc.subtractPoints(bb,Wa);wd=Sb.getLength();bb=Sb.getDotProduct(bb)/wd/wd;if(.001>Math.abs(bb)||isNaN(bb))return!0;1==jd||5==jd?(cb=1,Db=bb):(cb=bb,Db=1);Fa.scaleAroundPoint(cb,Db,Wa.x,Wa.y)}return vb=Qa.getTransformed(Fa),ma.transformAffineAmend(Fa),Sa.repaintAll(),!0}});this.mouseUp=function(Wa,bb,cb){if(this.capture&&0==bb)return this.capture=
!1,jd=-1,!0};this.mouseMove=function(){this.capture||ua()};this.paint=function(){for(var Wa=vb.getTransformed(gb).points,bb=Array(2*Wa.length),cb=0;cb<Wa.length;cb++)bb[cb]=Wa[cb];for(cb=0;cb<Wa.length;cb++){var Db=Wa[cb],Sb=Wa[(cb+1)%Wa.length];bb[cb+Wa.length]={x:(Db.x+Sb.x)/2,y:(Db.y+Sb.y)/2}}kh(za,"fill");for(cb=0;cb<bb.length;cb++)za.fillRect(bb[cb].x-3,bb[cb].y-3,7,7);ha(za,Wa)};this.keyDown=function(Wa){return"Enter"===Wa.key?(a.actionPerformed({action:"CPTransformAccept"}),!0):"Escape"===
Wa.key?(a.actionPerformed({action:"CPTransformReject"}),!0):void 0};this.enter=function(){c.prototype.enter.call(this);var Wa,bb=ma.transformAffineBegin();Fa=bb.transform;bb.rect;(Wa=bb.selection).isEmpty()&&(Wa=bb.rect.clone());vb=(Qa=new nf(Wa.toPoints())).getTransformed(Fa);jd=-1;Fc=0;Sa.repaintAll()};this.leave=function(){c.prototype.leave.call(this);Sa.repaintAll()}}function r(){var F,Q,ca=0,ua=!1,Ea=-1;this.mouseDown=function(Fa,Qa,vb){return!!this.capture||(!this.transient&&0==Qa&&!Fa.altKey&&
!fa(Dc).isPressed("space")||0==Qa&&!Fa.altKey&&!fa(Dc).isPressed("space")&&fa(Dc).isPressed("r")?(F={x:qb,y:Ab},ca=Sa.getRotation(),Q=gb.clone(),ua=!1,this.capture=!0,Ea=Qa,!0):void(this.transient&&yb.pop()))};this.mouseDrag=function(Fa){if(this.capture){var Qa=qb,vb=Ab,Ha=fa(ta)(Z).width()/2,xb=fa(ta)(Z).height()/2;Fa=Z.width/2;var Fc=Z.height/2;Qa=Math.atan2(vb-xb,Qa-Ha)-Math.atan2(F.y-xb,F.x-Ha);vb=new pc;return vb.rotateAroundPoint(Qa,Fa,Fc),vb.multiply(Q),Sa.setRotation(ca+Qa),Sa.setOffset(~~vb.getTranslateX(),
~~vb.getTranslateY()),ua=!0,!0}};this.mouseUp=function(Fa,Qa,vb){if(this.capture&&Qa==Ea){if(ua){Fa=Math.round(Lc/(Math.PI/2))*Math.PI/2;if(Math.abs(Lc-Fa)<5/180*Math.PI){Fa-=ca;Qa=Z.width/2;vb=Z.height/2;var Ha=new pc;Ha.rotateAroundPoint(Fa,Qa,vb);Ha.multiply(Q);Sa.setRotation(ca+Fa);Sa.setOffset(~~Ha.getTranslateX(),~~Ha.getTranslateY());Sa.repaintAll()}Sa.emitEvent("canvasRotated90",[Sa.getRotation90()])}else Sa.resetRotation();return this.capture=!1,this.transient&&!fa(Dc).isPressed("r")&&yb.pop(),
!0}};this.keyUp=function(Fa){if(this.transient&&1!=Ea&&" "===Fa.key)return w("default"),yb.pop(),!0};this.keyDown=function(Fa){if("r"===Fa.key.toLowerCase())return!0}}function u(){k.call(this)}function w(F){Z.getAttribute("data-cursor")!=F&&Z.setAttribute("data-cursor",F)}function z(){var F=ma.getActiveLayer();return F.visible&&F.ancestorsAreVisible()?0!=F.alpha||(a.showLayerNotification(F,wa("Whoops! This layer's opacity is currently 0%"),"opacity"),!1):(a.showLayerNotification(F,wa("Whoops! This layer is currently hidden"),
"layer"),!1)}function G(){var F=ma.getActiveLayer();return F instanceof Kb&&!ma.isEditingMask()?(a.showLayerNotification(F,wa("Whoops! You can't draw on a group"),"layer"),!1):z()}function L(F,Q,ca,ua,Ea){F.setValues(-Ea,ua,Q-ua-Ea+ca/4,Q+ca-Ea-ca/4);F.setBlockIncrement(Math.max(1,~~(.66*ua)));F.setUnitIncrement(Math.max(1,~~(.05*ua)))}function O(){gb.setToIdentity();gb.translate(zb,dc);gb.scale(rb,rb);gb.rotate(Lc);if(null!=Gd&&null!=B&&!Gd.getValueIsAdjusting()&&!B.getValueIsAdjusting()){var F=
Da(new Va(0,0,A.width,A.height));L(Gd,F.left,F.getWidth(),fa(ta)(Z).width(),Sa.getOffset().x);L(B,F.top,F.getHeight(),fa(ta)(Z).height(),Sa.getOffset().y)}Sa.repaintAll()}function N(F){return gb.getInverted().getTransformedPoint(F)}function ea(F){F=N(F);return F.x=Math.floor(F.x),F.y=Math.floor(F.y),F}function Y(F){return gb.getTransformedPoint(F)}function ka(F){F=Y(F);return F.x=Math.round(F.x),F.y=Math.round(F.y),F}function ha(F,Q){F.beginPath();F.moveTo(Q[0].x,Q[0].y);for(var ca=1;ca<Q.length;ca++)F.lineTo(Q[ca].x,
Q[ca].y);F.lineTo(Q[0].x,Q[0].y);F.stroke()}function qa(F,Q){var ca=Y({x:(Q.left+Q.right)/2,y:(Q.top+Q.bottom)/2});Q=Q.toPoints();for(var ua=0;ua<Q.length;ua++)Q[ua]=ka(Q[ua]),Q[ua].x+=.5*Math.sign(ca.x-Q[ua].x),Q[ua].y+=.5*Math.sign(ca.y-Q[ua].y);ha(F,Q)}function Da(F){var Q=ka({x:F.left-1,y:F.top-1}),ca=ka({x:F.left-1,y:F.bottom}),ua=ka({x:F.right,y:F.top-1});F=ka({x:F.right,y:F.bottom});Q=new Va(Math.min(Math.min(Q.x,ca.x),Math.min(ua.x,F.x)),Math.min(Math.min(Q.y,ca.y),Math.min(ua.y,F.y)),Math.max(Math.max(Q.x,
ca.x),Math.max(ua.x,F.x))+1,Math.max(Math.max(Q.y,ca.y),Math.max(ua.y,F.y))+1);return Q.grow(2,2),Q}function La(){var F=Z.width,Q=Z.height,ca=Y({x:ma.width/2,y:ma.height/2});Sa.setOffset(Math.round(zb+F/2-ca.x),Math.round(dc+Q/2-ca.y))}function Ka(F,Q,ca){if(F=Math.max(.1,Math.min(16,F)),Sa.getZoom()!=F){var ua=Sa.getOffset();Sa.setOffset(ua.x+~~((Q-ua.x)*(1-F/Sa.getZoom())),ua.y+~~((ca-ua.y)*(1-F/Sa.getZoom())));Sa.setZoom(F);Sa.repaintAll()}}function V(F){var Q=fa(ta)(Z).width(),ca=fa(ta)(Z).height(),
ua=parseFloat(F);.01>Math.abs(ua-1)?F=1:.2>Math.abs(ua-2)?F=2:.08>Math.abs(ua-.5)&&(F=.5);Ka(F,Q/2,ca/2)}function Na(F){return xc?fe.getPressure():"mouse"===F.pointerType&&0!==F.buttons&&0===F.pressure?1:"touch"===F.pointerType?(0!==F.pressure&&(Ec=!0),Ec)?2*F.pressure:1:2*F.pressure}function ya(){Zc||(Zc=!0,window.requestAnimationFrame(function(){Sa.paint()}))}function wb(F){$a.union(F);ya()}function ib(){lb=ma.getBounds();Sa.repaintAll()}var Tb,Fb,Sa=this,sc=document.createElement("div"),cc=document.createElement("div"),
Ca=document.createElement("div"),Z=document.createElement("canvas"),za=Z.getContext("2d"),A=document.createElement("canvas"),T=A.getContext("2d"),oa=Ol(za),ma=a.getArtwork(),rb=1,zb=0,dc=0,Lc=0,gb=new pc,Kc=!1,Cb=!1,qc=32,qb=0,Ab=0,$c=!1,ac=[!1,!1,!1],xc=!1,yc=!1,Ec=!1,lb=ma.getBounds(),$a=new Va(0,0,0,0),Zc=!1,mb=[],yb=new dd,Gd=new wg(!1),B=new wg(!0),fe=ve.getRef();Math.sign=Math.sign||function(F){return 0==(F=+F)||isNaN(F)?F:0<F?1:-1};c.prototype.transient=!1;c.prototype.capture=!1;c.prototype.enter=
function(){w("default")};c.prototype.leave=function(){this.capture=!1};c.prototype.mouseMove=c.prototype.paint=c.prototype.mouseDown=c.prototype.mouseDrag=c.prototype.mouseUp=c.prototype.keyDown=c.prototype.suspend=c.prototype.resume=c.prototype.keyUp=function(){};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.mouseDown=function(F,Q,ca){var ua=fa(Dc).isPressed("space");!ua&&(2==Q||0==Q&&F.altKey)?(yb.push(Oc,!0),yb.peek().mouseDown(F,Q,ca)):ua||0!=Q||F.altKey||!fa(Dc).isPressed("r")?
(1==Q||!F.altKey&&ua&&0==Q)&&(yb.push(Fd,!0),yb.peek().mouseDown(F,Q,ca)):(yb.push(zc,!0),yb.peek().mouseDown(F,Q,ca))};d.prototype.keyDown=function(F){if("r"===F.key.toLowerCase()&&" "!==F.key)yb.push(zc,!0),yb.peek().keyDown(F);else if("r"!==F.key.toLowerCase()&&" "===F.key&&!F.altKey)return yb.push(Fd,!0),yb.peek().keyDown(F),!0};b.prototype=Object.create(c.prototype);b.prototype.constructor=b;b.prototype.getBrushPreviewOval=function(){var F=a.getBrushSize()*rb;return new Va(qb-F/2,Ab-F/2,qb+F/
2,Ab+F/2)};b.prototype.queueBrushPreview=function(){if(yb.peek()==this){this.shouldPaintBrushPreview=!0;var F=this.getBrushPreviewOval();F.grow(2,2);null!=this.oldPreviewRect&&(F.union(this.oldPreviewRect),this.oldPreviewRect=null);wb(F)}};b.prototype.eraseBrushPreview=function(){this.shouldPaintBrushPreview=!1;null!=this.oldPreviewRect&&(wb(this.oldPreviewRect),this.oldPreviewRect=null)};b.prototype.mouseMove=function(F,Q){this.queueBrushPreview()};b.prototype.enter=function(){c.prototype.enter.call(this);
$c&&this.queueBrushPreview()};b.prototype.leave=function(){c.prototype.leave.call(this);this.eraseBrushPreview()};b.prototype.suspend=b.prototype.leave;b.prototype.resume=b.prototype.enter;b.prototype.paint=function(){if(this.shouldPaintBrushPreview){this.shouldPaintBrushPreview=!1;var F=this.getBrushPreviewOval();za.beginPath();za.arc((F.left+F.right)/2,(F.top+F.bottom)/2,F.getWidth()/2,0,2*Math.PI);za.stroke();F.grow(2,2);null==this.oldPreviewRect?this.oldPreviewRect=F:this.oldPreviewRect.union(F)}};
f.prototype=Object.create(b.prototype);f.prototype.constructor=f;f.prototype.mouseDown=function(F,Q,ca){if(!this.capture&&0==Q&&!F.altKey&&!fa(Dc).isPressed("space")&&G()&&(F=N({x:qb,y:Ab}),this.eraseBrushPreview(),ma.beginStroke(F.x,F.y,ca)))return this.capture=!0,this.smoothMouse=F,!0};f.prototype.mouseDrag=function(F,Q){if(("number"!=typeof navigator.maxTouchPoints||3>navigator.maxTouchPoints)&&b.prototype.mouseMove.call(this,F,Q),this.capture){F=N({x:qb,y:Ab});var ca=Math.min(.999,Math.pow(a.getBrushInfo().smoothing,
.3));return this.smoothMouse.x=(1-ca)*F.x+ca*this.smoothMouse.x,this.smoothMouse.y=(1-ca)*F.y+ca*this.smoothMouse.y,ma.continueStroke(this.smoothMouse.x,this.smoothMouse.y,Q),!0}this.mouseMove(F)};f.prototype.mouseUp=function(F,Q,ca){if(this.capture)return 0==Q&&(this.capture=!1,ma.endStroke()),!0};k.prototype=Object.create(b.prototype);k.prototype.constructor=k;k.prototype.drawLine=function(F,Q){ma.beginStroke(F.x,F.y,1);ma.continueStroke(Q.x,Q.y,1);ma.endStroke()};l.prototype=Object.create(b.prototype);
l.prototype.constructor=l;h.prototype=Object.create(c.prototype);h.prototype.constructor=h;e.prototype=Object.create(c.prototype);e.prototype.constructor=e;g.prototype=Object.create(c.prototype);g.prototype.constructor=g;g.prototype.mouseDown=function(F,Q,ca){if(0==Q&&!F.altKey&&!fa(Dc).isPressed("space")&&G())return F=N({x:qb,y:Ab}),ma.isPointWithin(F.x,F.y)&&(ma.floodFill(F.x,F.y),Sa.repaintAll()),!0};p.prototype=Object.create(c.prototype);p.prototype.constructor=p;m.prototype=Object.create(c.prototype);
m.prototype.constructor=m;m.prototype.mouseMove=function(F){if(!fa(Dc).isPressed("r"))return w("move"),!0};m.prototype.enter=function(){w("move")};n.prototype=Object.create(c.prototype);n.prototype.constructor=n;r.prototype=Object.create(c.prototype);r.prototype.constructor=r;u.prototype=Object.create(k.prototype);u.prototype.constructor=u;u.prototype.drawLine=function(F,Q){ma.gradientFill(Math.round(F.x),Math.round(F.y),Math.round(Q.x),Math.round(Q.y),a.getCurGradient())};u.prototype.queueBrushPreview=
function(){};this.setZoom=function(F){rb=F;O()};this.getZoom=function(){return rb};this.setGridSize=function(F){qc=Math.max(Math.round(F),1);this.repaintAll()};this.getGridSize=function(){return qc};this.setOffset=function(F,Q){isNaN(F)||isNaN(Q)?console.log("Bad offset"):(zb=F,dc=Q,O())};this.getOffset=function(){return{x:zb,y:dc}};this.setInterpolation=function(F){Kc=F;Fi(za,F);this.repaintAll()};this.setRotation=function(F){Lc=F%(2*Math.PI);O()};this.getRotation=function(){return Lc};this.getRotation90=
function(){var F=Math.round(this.getRotation()/Math.PI*2);return 0>(F%=4)&&(F+=4),F};this.zoomIn=function(){V(1.41*this.getZoom())};this.zoomOut=function(){V(.7092*this.getZoom())};this.zoom100=function(){V(1);La()};this.resetRotation=function(){var F=Z.width/2,Q=Z.height/2,ca=new pc;ca.rotateAroundPoint(-this.getRotation(),F,Q);ca.multiply(gb);this.setOffset(~~ca.getTranslateX(),~~ca.getTranslateY());this.setRotation(0);Sa.emitEvent("canvasRotated90",[0])};var ee=!1;this.getElement=function(){return sc};
this.repaintAll=function(){$a.left=0;$a.top=0;$a.right=Z.width;$a.bottom=Z.height;ya()};this.paint=function(){var F,Q=!1;if(Zc=!1,$a.isEmpty()||(za.save(),za.clipTo&&(za.beginPath(),$a.left|=0,$a.top|=0,za.rect($a.left,$a.top,Math.ceil($a.getWidth()),Math.ceil($a.getHeight())),za.clip()),Q=!0),lb.isEmpty()||(F=Fb&&Fb.isOpen()?Fb.getImageData():ma.fusionLayers().getImageData(),T.putImageData(F,0,0,lb.left,lb.top,lb.getWidth(),lb.getHeight()),lb.makeEmpty()),za.fillStyle="#606060",za.fillRect(0,0,Z.width,
Z.height),za.save(),za.setTransform(gb.m[0],gb.m[1],gb.m[2],gb.m[3],gb.m[4],gb.m[5]),za.fillStyle=oa,za.fillRect(0,0,ma.width,ma.height),za.drawImage(A,0,0,A.width,A.height),za.restore(),kh(za,"stroke"),za.lineWidth=1,ma.getSelection().isEmpty()||yb.peek()instanceof p&&yb.peek().capture||(za.setLineDash([3,2]),qa(za,ma.getSelection()),za.setLineDash([])),Cb)if(F=ma.getBounds(),2<rb*qc){za.beginPath();for(var ca=qc-1;ca<F.right;ca+=qc){var ua=Y({x:ca,y:F.top}),Ea=Y({x:ca,y:F.bottom});za.moveTo(ua.x+
.5,ua.y+.5);za.lineTo(Ea.x+.5,Ea.y+.5)}for(ca=qc-1;ca<F.bottom;ca+=qc)ua=Y({x:0,y:ca}),Ea=Y({x:F.right,y:ca}),za.moveTo(ua.x+.5,ua.y+.5),za.lineTo(Ea.x+.5,Ea.y+.5);za.stroke()}yb.paint(za);za.globalCompositeOperation="source-over";Q&&($a.makeEmpty(),za.restore())};this.showGrid=function(F){Cb=F;this.repaintAll()};this.resize=function(F,Q){F-=fa(ta)(Ca).outerHeight();fa(ta)(Z).css("height",F+"px");Z.width=fa(ta)(Z).width();Z.height=F;Tb=null;Q||La();this.setInterpolation(Kc);this.repaintAll()};a.on("toolChange",
function(F,Q){F=mb[Q.strokeMode];for(Q=0;Q<yb.modes.length;Q++)if(yb.modes[Q]instanceof b){yb.modes[Q].leave();yb.modes[Q]=F;yb.modes[Q].enter();break}S=F});a.on("modeChange",function(F){switch(F){case Ba.M_DRAW:var Q=S;break;case Ba.M_FLOODFILL:Q=qd;break;case Ba.M_GRADIENTFILL:Q=jb;break;case Ba.M_RECT_SELECTION:Q=K;break;case Ba.M_MOVE_TOOL:Q=aa;break;case Ba.M_ROTATE_CANVAS:Q=zc;break;case Ba.M_PAN_CANVAS:Q=Fd;break;case Ba.M_COLOR_PICKER:Q=Oc;break;case Ba.M_TRANSFORM:Q=xa}yb.setUserMode(Q)});
a.on("maskViewOpened",function(F){Fb&&Fb.off("changeLayer",ib);(Fb=F).on("changeLayer",ib);ib()});var Ja=new d;var Oc=new h;var Fd=new e;var zc=new r;var qd=new g;var jb=new u;var K=new p;var aa=new m;var xa=new n;var S=(mb=[new f,new k,new l])[Pa.STROKE_MODE_FREEHAND];yb.setDefaultMode(Ja);yb.setUserMode(S);A.width=ma.width;A.height=ma.height;Z.width=800;Z.height=900;Z.className="chickenpaint-canvas";Z.setAttribute("touch-action","none");za.setLineDash||(za.setLineDash=function(){});Z.addEventListener("contextmenu",
function(F){F.preventDefault()});Z.addEventListener("mouseenter",function(){$c=!0});Z.addEventListener("mouseleave",function(){$c=!1;ac[0]||ac[2]||ac[1]||Sa.repaintAll()});Z.addEventListener("pointerdown",function(F){yc&&"touch"===F.pointerType||(Z.setPointerCapture(F.pointerId),Tb=Z.getBoundingClientRect(),qb=F.clientX-Tb.left,Ab=F.clientY-Tb.top,xc=fe.isPen(),ac[0]=!1,ac[2]=!1,ac[1]=!1,ac[F.button]=!0,yb.mouseDown(F,F.button,Na(F)))});Z.addEventListener("pointermove",function(F){if(Tb||=Z.getBoundingClientRect(),
!yc||"touch"!==F.pointerType){qb=F.clientX-Tb.left;Ab=F.clientY-Tb.top;var Q=0!==F.buttons,ca=Q?Na(F):0;if(0!=(1&F.buttons)!=ac[0]){if(.5===F.mozPressure)return;ac[0]=!ac[0];ac[0]?yb.mouseDown(F,0,ca):yb.mouseUp(F,0,ca)}0!=(2&F.buttons)!=ac[2]&&(ac[2]=!ac[2],ac[2]?yb.mouseDown(F,2,ca):yb.mouseUp(F,2,ca));0!=(4&F.buttons)!=ac[1]&&(ac[1]=!ac[1],ac[1]?yb.mouseDown(F,1,ca):yb.mouseUp(F,1,ca));Q?yb.mouseDrag(F,ca):yb.mouseMove(F,ca);yc||"pen"!==F.pointerType||(yc=!0)}});Z.addEventListener("pointerup",
function(F){ac[0]=!1;ac[2]=!1;xc=ac[1]=!1;yb.mouseUp(F,F.button,0);Z.releasePointerCapture(F.pointerId)});Z.addEventListener("wheel",function(F){if(0!=F.deltaY){if(!ee||20<Math.abs(F.deltaY)){var Q=0<F.deltaY?1/1.15:1.15;var ca,ua,Ea=(ca={x:F.pageX,y:F.pageY},ua=Z.getBoundingClientRect(),{x:ca.x-ua.left-window.pageXOffset,y:ca.y-ua.top-window.pageYOffset});ca=N(Ea);ma.isPointWithin(ca.x,ca.y)?Ka(Sa.getZoom()*Q,Ea.x,Ea.y):Ka(Sa.getZoom()*Q,zb+~~(ma.width*rb/2),dc+~~(ma.height*rb/2));ee=ee||setTimeout(function(){ee=
!1},50)}F.preventDefault()}},{passive:!1});document.addEventListener("keydown",function(F){yb.keyDown(F)});document.addEventListener("keyup",function(F){"alt"===F.key.toLowerCase()&&F.preventDefault();yb.keyUp(F)});document.addEventListener("visibilitychange",function(){var F=Z.height+fa(ta)(Ca).outerHeight();Z.width=1;Z.height=1;Sa.resize(F,!0)},!1);window.addEventListener("scroll",function(){Tb=null});Z.addEventListener("mousedown",function(F){1==F.button&&F.preventDefault()});ma.on("changeSelection",
function(){Sa.repaintAll()});ma.on("updateRegion",function(F){lb.union(F);wb(Da(lb))});Gd.on("valueChanged",function(F){var Q=Sa.getOffset();Sa.setOffset(-F,Q.y)});B.on("valueChanged",function(F){var Q=Sa.getOffset();Sa.setOffset(Q.x,-F)});this.setInterpolation(!0);Ja=document.createElement("div");Ja.className="chickenpaint-canvas-container-wrapper";Ja.appendChild(Z);cc.className="chickenpaint-canvas-container-top";cc.appendChild(Ja);cc.appendChild(B.getElement());Ca.className="chickenpaint-canvas-container-bottom";
Ca.appendChild(Gd.getElement());sc.appendChild(cc);sc.appendChild(Ca);a.setCanvas(this)}function ad(a,c,d,b){a.getSmallScreenMode()&&wa(d+" (shorter)")!==d+" (shorter)"?this.title=wa(d+" (shorter)"):this.title=wa(d);b=b||{};this.name=c;this.resizeVert=b.resizeVert||!1;this.resizeHorz=b.resizeHorz||!1;var f,k,l,h=document.createElement("div");d=document.createElement("div");var e=document.createElement("i"),g=document.createElement("button"),p=document.createElement("div"),m=null,n=null,r=this;this.getElement=
function(){return h};this.getBodyElement=function(){return p};this.getWidth=function(){return fa(ta)(h).outerWidth()};this.getHeight=function(){return fa(ta)(h).outerHeight()};this.getX=function(){return parseInt(h.style.left,10)||0};this.getY=function(){return parseInt(h.style.top,10)||0};this.setLocation=function(w,z){h.style.left=w+"px";h.style.top=z+"px"};this.setWidth=function(w){h.style.width=w+"px"};this.setHeight=function(w){h.style.height=w+"px"};this.setSize=function(w,z){this.setWidth(w);
this.setHeight(z)};this.setCollapseDownwards=function(w){b.collapseDownwards=w};this.toggleCollapse=function(w){var z=fa(ta)(h);if(void 0===w)w=!z.hasClass("collapsed");else if(z.hasClass("collapsed")==w)return;var G=z.parents(".chickenpaint").find(".chickenpaint-canvas").height(),L=this.getHeight();L=this.getY()+L;(z.toggleClass("collapsed",w),fa(ta)(e).toggleClass("icon-angle-down",!w).toggleClass("icon-angle-up",w),w)?b.collapseDownwards&&this.setLocation(this.getX(),Math.min(L,G)-this.getHeight()):
(w=this.getHeight(),b.collapseDownwards?this.setLocation(this.getX(),Math.max(L-w,0)):this.getY()+w>G&&this.setLocation(this.getX(),Math.max(G-w,0)))};this.userIsDoneWithUs=function(){a.getSmallScreenMode()&&this.toggleCollapse(!0)};e.className="collapse-icon fas icon-angle-down";g.type="button";g.className="btn btn-close";g.textContent="";g.tabIndex=-1;h.className="chickenpaint-palette chickenpaint-palette-"+c;d.className="chickenpaint-palette-head";d.setAttribute("touch-action","none");c=document.createElement("div");
var u=document.createElement("h5");c.className="modal-header";u.className="modal-title";u.appendChild(document.createTextNode(this.title));u.appendChild(e);c.appendChild(u);c.appendChild(g);d.appendChild(c);p.className="chickenpaint-palette-body";h.appendChild(d);h.appendChild(p);this.resizeVert&&((m=document.createElement("div")).className="chickenpaint-resize-handle-vert",m.addEventListener("pointerdown",function(w){k="vertResize";m.setPointerCapture(w.pointerId)}),m.addEventListener("pointermove",
function(w){"vertResize"==k&&r.setHeight(w.pageY-fa(ta)(h).offset().top)}),m.addEventListener("pointerup",function(w){m.releasePointerCapture(w.pointerId);k=!1}),h.appendChild(m));this.resizeHorz&&((n=document.createElement("div")).className="chickenpaint-resize-handle-horz",n.addEventListener("pointerdown",function(w){k="horzResize";n.setPointerCapture(w.pointerId)}),n.addEventListener("pointermove",function(w){"horzResize"==k&&r.setWidth(w.pageX-fa(ta)(h).offset().left)}),n.addEventListener("pointerup",
function(w){n.releasePointerCapture(w.pointerId);k=!1}),h.appendChild(n));d.addEventListener("pointerdown",function(w){0==w.button&&(w.stopPropagation(),w.preventDefault(),"BUTTON"==w.target.nodeName?r.emitEvent("paletteVisChange",[r,!1]):(f={x:parseInt(h.style.left,10)||0,y:parseInt(h.style.top,10)||0},l={x:w.pageX-fa(ta)(h).position().left,y:w.pageY-fa(ta)(h).position().top},k=a.getSmallScreenMode()?"dragStart":"dragging",w.target.setPointerCapture(w.pointerId)))});d.addEventListener("pointermove",
function(w){if(("dragStart"===k||"dragging"===k)&&0!==w.buttons){var z,G,L=w.pageX-l.x;w=w.pageY-l.y;"dragStart"==k&&(z={x:L,y:w},G=f,25<(z.x-G.x)*(z.x-G.x)+(z.y-G.y)*(z.y-G.y)&&(k="dragging"));"dragging"==k&&r.setLocation(L,w)}});d.addEventListener("pointerup",function(w){if("dragging"===k||"dragStart"===k){"dragStart"===k&&(w.stopPropagation(),w.preventDefault(),setTimeout(function(){r.setLocation(f.x,f.y);r.toggleCollapse()},100));k=!1;try{w.target.releasePointerCapture(w.pointerId)}catch(z){console.error(z)}}})}
function mh(a){function c(k){"LI"==this.nodeName&&(k=b[parseInt(this.getAttribute("data-buttonIndex"),10)],a.actionPerformed({action:k.command}))}ad.call(this,a,"tool","Tools");var d=this,b=[{className:"chickenpaint-tool-rect-selection",command:"CPRectSelection",toolTip:"Marquee",shortcut:"m",mode:Ba.M_RECT_SELECTION},{className:"chickenpaint-tool-move",command:"CPMoveTool",toolTip:"Move tool",shortcut:"v",mode:Ba.M_MOVE_TOOL},{className:"chickenpaint-tool-flood-fill",command:"CPFloodFill",toolTip:"Flood fill",
shortcut:"f",mode:Ba.M_FLOODFILL},{className:"chickenpaint-tool-gradient-fill",command:"CPGradientFill",toolTip:"Gradient fill",shortcut:"g",mode:Ba.M_GRADIENTFILL},{className:"chickenpaint-tool-color-picker",command:"CPColorPicker",toolTip:"Color picker",shortcut:"i",mode:Ba.M_COLOR_PICKER},{className:"chickenpaint-tool-blur",command:"CPBlur",toolTip:"Blur",shortcut:"u",mode:Ba.M_DRAW,tool:Ba.T_BLUR},{className:"chickenpaint-tool-pencil",command:"CPPencil",toolTip:"Pencil",shortcut:"n",mode:Ba.M_DRAW,
tool:Ba.T_PENCIL},{className:"chickenpaint-tool-pen",command:"CPPen",toolTip:"Pen",selected:!0,shortcut:"b",mode:Ba.M_DRAW,tool:Ba.T_PEN},{className:"chickenpaint-tool-airbrush",command:"CPAirbrush",toolTip:"Airbrush",shortcut:"a",mode:Ba.M_DRAW,tool:Ba.T_AIRBRUSH},{className:"chickenpaint-tool-water",command:"CPWater",toolTip:"Waterpaint",shortcut:"w",mode:Ba.M_DRAW,tool:Ba.T_WATER},{className:"chickenpaint-tool-eraser",command:"CPEraser",toolTip:"Eraser",shortcut:"e",mode:Ba.M_DRAW,tool:Ba.T_ERASER},
{className:"chickenpaint-tool-soft-eraser",command:"CPSoftEraser",toolTip:"Soft eraser",shortcut:"s",mode:Ba.M_DRAW,tool:Ba.T_SOFTERASER},{className:"chickenpaint-tool-smudge",command:"CPSmudge",toolTip:"Smudge",shortcut:"d",mode:Ba.M_DRAW,tool:Ba.T_SMUDGE},{className:"chickenpaint-tool-blender",command:"CPBlender",toolTip:"Blender",shortcut:"c",mode:Ba.M_DRAW,tool:Ba.T_BLENDER},{className:"chickenpaint-tool-dodge",command:"CPDodge",toolTip:"Dodge (tool)",shortcut:"o",mode:Ba.M_DRAW,tool:Ba.T_DODGE},
{className:"chickenpaint-tool-burn",command:"CPBurn",toolTip:"Burn (tool)",shortcut:"p",mode:Ba.M_DRAW,tool:Ba.T_BURN},{className:"chickenpaint-tool-rotate-canvas",command:"CPRotateCanvas",commandDoubleClick:"CPResetCanvasRotation",toolTip:"Rotate canvas",mode:Ba.M_ROTATE_CANVAS},{className:"chickenpaint-tool-pan-canvas",command:"CPPanCanvas",toolTip:"Grab canvas",mode:Ba.M_PAN_CANVAS}],f=document.createElement("ul");a.on("modeChange",function(k){var l=d.getBodyElement();fa(ta)("li",l).removeClass("selected");
k==Ba.M_DRAW?fa(ta)("li[data-tool="+a.getCurTool()+"]",l).addClass("selected"):fa(ta)("li[data-mode="+k+"]",l).addClass("selected")});a.on("toolChange",function(k){var l=d.getBodyElement();a.getCurMode()==Ba.M_DRAW&&(fa(ta)("li",l).removeClass("selected"),fa(ta)("li[data-tool="+k+"]",l).addClass("selected"))});(function(){var k=d.getBodyElement(),l;for(l in f.className="chickenpaint-tools list-unstyled",b)!function(h){var e=b[h],g=document.createElement("li"),p=document.createElement("div");g.className=
"chickenpaint-toolbar-button "+e.className;g.setAttribute("data-buttonIndex",h);g.setAttribute("data-mode",e.mode);void 0!==e.tool&&g.setAttribute("data-tool",e.tool);g.title=wa(e.toolTip);e.shortcut&&(g.title+=" ("+e.shortcut.toUpperCase()+")",fa(Dc)(e.shortcut,function(){return c.call(g),!1}));e.selected&&(g.className+=" selected");p.className="chickenpaint-toolbar-button-icon";g.appendChild(p);f.appendChild(g)}(l);fa(ta)(f).on("click","li",c).on("dblclick","li",function(h){h=b[parseInt(this.getAttribute("data-buttonIndex"),
10)];h.commandDoubleClick&&a.actionPerformed({action:h.commandDoubleClick})});k.appendChild(f)})()}function nh(a){ad.call(this,a,"misc","Misc");var c=this,d=[{className:"chickenpaint-tool-zoom-in",command:"CPZoomIn",toolTip:"Zoom in"},{className:"chickenpaint-tool-zoom-out",command:"CPZoomOut",toolTip:"Zoom out"},{className:"chickenpaint-tool-zoom-100",command:"CPZoom100",toolTip:"Zoom 100%"},{className:"chickenpaint-tool-flip-horizontal",command:"CPHFlip",toolTip:"Flip horizontal"},{className:"chickenpaint-tool-undo",
command:"CPUndo",toolTip:"Undo"},{className:"chickenpaint-tool-redo",command:"CPRedo",toolTip:"Redo"},{className:"chickenpaint-tool-send",command:"CPSend",toolTip:"Save Oekaki"}];!function(){var b=c.getBodyElement(),f=document.createElement("ul"),k;for(k in f.className="chickenpaint-misc-tools list-unstyled",d){var l=d[k],h=document.createElement("li"),e=document.createElement("div");"CPSend"!=l.command||a.isActionSupported("CPContinue")||(l.toolTip="Post Oekaki",l.className="chickenpaint-tool-send-and-end");
h.className="chickenpaint-toolbar-button "+l.className;h.setAttribute("data-buttonIndex",k);h.setAttribute("title",wa(l.toolTip));e.className="chickenpaint-toolbar-button-icon";h.appendChild(e);f.appendChild(h)}fa(ta)(f).on("mousedown","li",function(g){fa(ta)(this).addClass("selected")}).on("mouseup","li",function(g){fa(ta)(this).removeClass("selected")}).on("click","li",function(g){g=d[parseInt(this.getAttribute("data-buttonIndex"),10)];a.actionPerformed({action:g.command})});b.appendChild(f)}()}
function oh(a){ad.call(this,a,"stroke","Stroke");var c=[{className:"chickenpaint-tool-freehand",command:"CPFreeHand",toolTip:wa("Free-hand"),selected:!0},{className:"chickenpaint-tool-line",command:"CPLine",toolTip:wa("Straight line")},{className:"chickenpaint-tool-bezier",command:"CPBezier",toolTip:wa("Bezier curve")}],d=this.getBodyElement();!function(){var b=document.createElement("ul"),f;for(f in b.className="chickenpaint-stroke-tools list-unstyled",c){var k=c[f],l=document.createElement("li"),
h=document.createElement("div");l.className="chickenpaint-toolbar-button "+k.className;l.setAttribute("data-buttonIndex",f);l.setAttribute("title",k.toolTip);k.selected&&(l.className+=" selected");h.className="chickenpaint-toolbar-button-icon";l.appendChild(h);b.appendChild(l)}fa(ta)(b).on("click","li",function(e){e=c[parseInt(this.getAttribute("data-buttonIndex"),10)];fa(ta)("li",b).removeClass("selected");fa(ta)(this).addClass("selected");a.actionPerformed({action:e.command})});d.appendChild(b)}();
a.on("toolChange",function(b,f){fa(ta)(".chickenpaint-tool-freehand",d).toggleClass("selected",f.strokeMode==Pa.STROKE_MODE_FREEHAND);fa(ta)(".chickenpaint-tool-line",d).toggleClass("selected",f.strokeMode==Pa.STROKE_MODE_LINE);fa(ta)(".chickenpaint-tool-bezier",d).toggleClass("selected",f.strokeMode==Pa.STROKE_MODE_BEZIER)})}function ph(a){ad.call(this,a,"color","Color (picker)");var c=new Pl(a),d=new Ql(a,c);a=new Dp(a);var b=this.getBodyElement(),f=document.createElement("div");f.className="chickenpaint-colorpicker-top";
f.appendChild(c.getElement());f.appendChild(d.getElement());b.appendChild(f);b.appendChild(a.getElement())}function Dp(a){function c(k,l,h){for(;k.length<h;)k=l+k;return k}function d(){f.style.backgroundColor="#"+c(Number(b).toString(16),"0",6)}var b=0,f=document.createElement("div");this.getElement=function(){return f};a.on("colorChange",function(k){b=k.getRgb();d()});f.className="chickenpaint-colorpicker-show";f.addEventListener("click",function(k){k.preventDefault();k="#"+c(Number(b).toString(16),
"0",6);if(null!=(k=window.prompt(wa("Please enter a color in hex format"),k)))try{(k.match(/^#/)||k.match(/^$/))&&(k=k.substring(1));var l=parseInt(k,16);a.setCurColor(new bc(l))}catch(h){}});d()}function Nf(a,c){function d(){var l=b.width;f.clearRect(0,0,l,b.height);f.beginPath();f.arc(l/2+1,l/2+1,Math.max(l/2,1)-2,0,2*Math.PI);k.state?f.fill():f.stroke()}var b=document.createElement("canvas"),f=b.getContext("2d"),k=this;this.state=a||!1;this.setValue=function(l){this.state!=l&&(this.state=l,this.emitEvent("valueChange",
[l]),d())};this.getElement=function(){return b};b.addEventListener("mousedown",function(l){k.setValue(!k.state)});b.title=c||"";b.className="chickenpaint-checkbox";b.width=20;b.height=20;b.fillStyle="black";b.strokeStyle="black";d()}function xd(a,c,d,b){function f(){var w=g.width||e,z=g.height,G="string"==typeof u.title?wa(u.title):u.title(u.value),L=3*window.devicePixelRatio,O=.75*g.height;if(d)p.save(),p.fillStyle="white",p.fillRect(0,0,w,z),p.fillStyle="black",p.fillText(G,L,O),p.beginPath(),u.value>=
m/2?p.rect(w/2,0,(u.value-m/2)*w/m,z):p.rect(u.value*w/m,0,(m/2-u.value)*w/m,z),p.fill(),p.clip(),p.fillStyle="white";else{var N=(u.value-a)/m;b&&(N=Math.pow(N,.6666666666666666));N*=w;p.save();p.save();p.fillStyle="black";p.beginPath();p.rect(0,0,N,z);p.fill();p.clip();p.fillStyle="white";p.fillText(G,L,O);p.restore();p.fillStyle="white";p.beginPath();p.rect(N,0,w,z);p.fill();p.clip();p.fillStyle="black"}p.fillText(G,L,O);p.restore()}function k(w){var z=fa(ta)(g).width(),G=fa(ta)(g).offset().left;
w=(w.pageX-G)/z;b&&(w=Math.pow(Math.max(w,0),1.5));u.setValue(w*m+a)}function l(w){switch(n){case 1:return k(w);case 2:var z=u.title();if(!z.includes(wa("Brush size"))&&!z.includes(wa("Opacity")))return k(w);z=(w.pageX-h)/4;if(0!==z){z=u.value+z;var G=Math.floor(z);u.setValue(G);h=w.pageX-4*(z-G)}}}var h,e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:150,g=document.createElement("canvas"),p=g.getContext("2d"),m=c-a,n=0,r=!1,u=this;this.value=void 0;this.title="";d=d||!1;g.addEventListener("pointerup",
function(w){if(0===n)return g.releasePointerCapture(w.pointerId),g.removeEventListener("pointermove",l);if(0!==n)switch(n){case 1:0!==w.button||w.shiftKey||(n=0);break;case 2:(2==w.button||0===w.button&&w.shiftKey)&&(n=0);break;default:return}return g.releasePointerCapture(w.pointerId),g.removeEventListener("pointermove",l)});this.setValue=function(w){w=~~Math.max(a,Math.min(c,w));this.value!=w&&(this.value=w,this.emitEvent("valueChange",[this.value]),r?f():(r=!0,this.resize()))};this.getElement=
function(){return g};this.resize=function(){g.width=fa(ta)(g).width()||e;g.height=fa(ta)(g).height()||20;1<window.devicePixelRatio&&(g.style.height=g.height+"px",g.width*=window.devicePixelRatio,g.height*=window.devicePixelRatio);p.font=.47*g.height+"pt sans-serif";f()};g.addEventListener("pointerdown",function(w){0===n&&(2===w.button||0===w.button&&w.shiftKey?(n=2,h=w.pageX):(n=1,k(w)),g.setPointerCapture(w.pointerId),g.addEventListener("pointermove",l))});g.addEventListener("contextmenu",function(w){w.preventDefault()});
g.setAttribute("touch-action","none");g.className="chickenpaint-slider";"devicePixelRatio"in window||(window.devicePixelRatio=1)}function xg(a,c,d){function b(){for(var p=h.style,m=Number(k.getRgb()).toString(16);6>m.length;)m="0"+m;p.backgroundColor="#"+m}var f=this,k=new bc(0),l=255,h=document.createElement("div");this.getElement=function(){return h};this.setColor=function(p){k.isEqual(p)||(k.copyFrom(p),b(),this.emitEvent("colorChange",[k]))};this.setAlpha=function(p){p!=l&&(l=p,b(),this.emitEvent("alphaChange",
[l]))};this.getColorRgb=function(){return k.getRgb()};this.getAlpha=function(){return l};this.setCurColor=this.setColor;h.className="chickenpaint-color-pick-swatch";a&&k.copyFrom(a);c&&(l=c);var e=new bootstrap.Popover(h,{html:!0,content:function(){var p,m,n,r,u;return window.addEventListener("mousedown",g),p=document.createElement("div"),m=document.createElement("div"),n=new Pl(f,k),r=new Ql(f,n,k.getHue()),u=new xd(0,255),p.className="chickenpaint-color-pick-panel",m.className="chickenpaint-colorpicker-top",
m.appendChild(n.getElement()),m.appendChild(r.getElement()),p.appendChild(m),u.value=l,u.title=function(w){return wa("Opacity: ")+w},u.on("valueChange",function(w){f.setAlpha(w)}),p.appendChild(u.getElement()),setTimeout(function(){u.resize()},0),p},trigger:"manual",placement:"bottom",container:d||!1}),g=function(p){var m=p.target;m=m.closest(".popover-body")||m.classList.contains("chickenpaint-color-pick-panel")||m.classList.contains("chickenpaint-colorpicker-select")||m.classList.contains("chickenpaint-colorpicker-slider");
p.preventDefault();m||e.hide()};h.addEventListener("click",function(p){p.preventDefault();e.toggle()});h.addEventListener("hidden.bs.popover",function(){window.removeEventListener("mousedown",g)});b()}function Xi(a,c){var d=document.createElement("div");return d.className="chickenpaint-checkbox-slider-group",d.appendChild(a.getElement()),d.appendChild(c.getElement()),d}function Rl(a,c){for(var d in c)if(c.hasOwnProperty(d)){var b=document.createElement("option");b.appendChild(document.createTextNode(wa(c[d])));
b.value=d;a.appendChild(b)}}function Ep(a){function c(){k.gradient(k.getBounds(),0,0,k.width,0,e,!0);h.putImageData(k.imageData,0,0,0,0,150,32);b.fillRect(0,0,d.width,d.height);b.drawImage(l,0,0)}var d=document.createElement("canvas"),b=d.getContext("2d"),f=Ol(b),k=new J(150,32),l=document.createElement("canvas"),h=l.getContext("2d"),e=a.getCurGradient();this.getElement=function(){return d};a.on("gradientChange",function(g){e=g;c()});d.width=l.width=150;d.height=l.height=32;d.className="chickenpaint-gradient-preview";
b.fillStyle=f;c()}function Of(a){ad.call(this,a,"brush","Tool options");var c=new Fp(a),d=new Gp(a),b=new Hp(a),f=this.getBodyElement();f.appendChild(c.getElement());f.appendChild(d.getElement());f.appendChild(b.getElement());a.on("modeChange",function(k){switch(c.getElement().style.display="none",d.getElement().style.display="none",b.getElement().style.display="none",k){case Ba.M_GRADIENTFILL:d.getElement().style.display="block";break;case Ba.M_TRANSFORM:b.getElement().style.display="block";break;
default:c.getElement().style.display="block"}})}function Fp(a){var c=[1,2,3,4,5,6,7,8,9,10,15,20,25,30,35,40,45,50,60,70,80,90,100,125,150,175,200],d=document.createElement("div"),b=document.createElement("select"),f=new Nf(!1,wa("Control brush opacity with pen pressure")),k=new xd(1,255),l=new Nf(!0,wa("Control brush size with pen pressure")),h=new xd(1,200,!1,!0),e=new Nf(!1,wa("Control brush scattering with pen pressure")),g=new xd(0,1E3,!1,!0),p=new xd(0,100,!1,!0),m=new xd(0,100,!1,!0),n=new xd(0,
100,!1,!0),r=new xd(0,100,!1,!0),u=new Of.CPBrushPreview(a);this.getElement=function(){return d};k.title=function(w){return wa("Opacity")+": "+w};k.on("valueChange",function(w){a.setAlpha(w)});h.title=function(w){return wa("Brush size")+": "+w};h.on("valueChange",function(w){a.setBrushSize(w)});p.title=function(w){return wa("Color")+": "+w+"%"};p.on("valueChange",function(w){a.getBrushInfo().resat=w/100;a.callToolListeners()});m.title=function(w){return wa("Blend")+": "+w+"%"};m.on("valueChange",
function(w){a.getBrushInfo().bleed=w/100;a.callToolListeners()});n.title=function(w){return wa("Spacing")+": "+w+"%"};n.on("valueChange",function(w){a.getBrushInfo().spacing=w/100;a.callToolListeners()});g.title=function(w){return wa("Scattering")+": "+w+"%"};g.on("valueChange",function(w){a.getBrushInfo().scattering=w/100;a.callToolListeners()});r.title=function(w){return wa("Smoothing")+": "+w+"%"};r.on("valueChange",function(w){a.getBrushInfo().smoothing=w/100;a.callToolListeners()});e.on("valueChange",
function(w){a.getBrushInfo().pressureScattering=w;a.callToolListeners()});f.on("valueChange",function(w){a.getBrushInfo().pressureAlpha=w;a.callToolListeners()});l.on("valueChange",function(w){a.getBrushInfo().pressureSize=w;a.callToolListeners()});b.addEventListener("change",function(w){a.getBrushInfo().tip=parseInt(b.value,10);b.blur()});b.className="form-control form-control-sm";b.tabIndex=-1;Rl(b,["Round Pixelated","Round Hard Edge","Round Soft","Square Pixelated","Square Hard Edge"]);d.appendChild(b);
d.appendChild(u.getElement());d.appendChild(Xi(l,h));d.appendChild(Xi(f,k));d.appendChild(p.getElement());d.appendChild(m.getElement());d.appendChild(n.getElement());d.appendChild(Xi(e,g));d.appendChild(r.getElement());f.setValue(a.getBrushInfo().pressureAlpha);k.setValue(a.getAlpha());l.setValue(a.getBrushInfo().pressureSize);h.setValue(a.getBrushSize());e.setValue(a.getBrushInfo().pressureScattering);g.setValue(~~(100*a.getBrushInfo().scattering));b.value=a.getBrushInfo().tip;p.setValue(~~(100*
a.getBrushInfo().resat));m.setValue(~~(100*a.getBrushInfo().bleed));n.setValue(~~(100*a.getBrushInfo().spacing));r.setValue(~~(100*a.getBrushInfo().smoothing));a.on("toolChange",function(w,z){k.setValue(z.alpha);h.setValue(z.size);l.setValue(z.pressureSize);f.setValue(z.pressureAlpha);b.value=z.tip;e.setValue(z.pressureScattering);~~(100*z.resat)!=p.value&&p.setValue(~~(100*z.resat));~~(100*z.bleed)!=m.value&&m.setValue(~~(100*z.bleed));~~(100*z.spacing)!=n.value&&n.setValue(~~(100*z.spacing));~~(100*
z.scattering)!=g.value&&g.setValue(~~(100*z.scattering));~~(100*z.smoothing)!=r.value&&r.setValue(~~(100*z.smoothing))});fa(Dc)("1,2,3,4,5,6,7,8,9,0",function(w,z){w=parseInt(z.shortcut,10);0==w&&(w=10);a.setAlpha(Math.round(w/10*255))});fa(Dc)("{,[",function(){for(var w=a.getBrushSize(),z=c.length-1;0<=z;z--)if(w>c[z]){a.setBrushSize(c[z]);break}});fa(Dc)("},]",function(){for(var w=a.getBrushSize(),z=0;z<c.length;z++)if(w<c[z]){a.setBrushSize(c[z]);break}})}function Gp(a){function c(){var h=[k.getAlpha()<<
24|k.getColorRgb(),l.getAlpha()<<24|l.getColorRgb()];a.setCurGradient(h)}var d,b=document.createElement("div");var f=new Ep(a);var k=new xg(new bc(16777215&a.getCurGradient()[0]),a.getCurGradient()[0]>>>24,b),l=new xg(new bc(16777215&a.getCurGradient()[1]),a.getCurGradient()[1]>>>24,b);this.getElement=function(){return b};b.className="chickenpaint-gradient-panel";b.style.display="none";k.on("colorChange",c);k.on("alphaChange",c);l.on("colorChange",c);l.on("alphaChange",c);(d=document.createElement("p")).textContent=
wa("Gradient");b.appendChild(d);b.appendChild(f.getElement());(d=document.createElement("div")).className="chickenpaint-gradient-colors";(f=document.createElement("div")).className="chickenpaint-gradient-start-color";f.appendChild(k.getElement());d.appendChild(f);(f=document.createElement("div")).className="chickenpaint-gradient-end-color";f.appendChild(l.getElement());d.appendChild(f);b.appendChild(d)}function Hp(a){var c={smooth:wa("Smooth"),sharp:wa("Sharp")},d=document.createElement("div"),b=
document.createElement("button"),f=document.createElement("button"),k=document.createElement("select");if(this.getElement=function(){return d},d.className="chickenpaint-transform-panel",d.style.display="none",b.type="button",f.type="button",b.className="btn btn-primary btn-block",f.className="btn btn-light btn-block",b.textContent=wa("Apply transform"),f.textContent=wa("Cancel"),k.addEventListener("change",function(h){a.setTransformInterpolation(this.value)}),k.className="form-control chickenpaint-transform-interpolation",
Rl(k,c),Ei(de(0,0).getContext("2d"))){c=document.createElement("div");var l=document.createElement("label");l.textContent=wa("Transform style");c.className="form-group";c.appendChild(l);c.appendChild(k);d.appendChild(c)}k=document.createElement("div");k.appendChild(b);k.appendChild(f);k.className="form-group";d.appendChild(k);b.addEventListener("click",function(h){a.actionPerformed({action:"CPTransformAccept"});h.preventDefault()});f.addEventListener("click",function(h){a.actionPerformed({action:"CPTransformReject"});
h.preventDefault()})}function Ip(a){a.preventDefault();a.stopPropagation()}function Hd(a){var c=document.createElement("span");return c.className="fa "+a,c}function Yi(a){var c=document.createElement("span");return c.className="chickenpaint-icon chickenpaint-icon-"+a,c}function Sl(a,c){var d=document.createElement("div"),b=document.createElement("label");return b.tabIndex=-1,a.tabIndex=-1,d.className="form-check",a.className="form-check-input",b.className="form-check-label",b.setAttribute("for",a.id),
b.appendChild(a),b.appendChild(document.createTextNode(c)),d.appendChild(a),d.appendChild(b),d}function qh(a){function c(){var N=k.getActiveLayer();N.getAlpha()!=p.value&&p.setValue(N.getAlpha());(function(){for(var ea=k.getActiveLayer();m.lastChild;)m.removeChild(m.lastChild);for(var Y=W.LM_FIRST;Y<=W.LM_LAST;Y++)if(Y!=W.LM_MULTIPLY2&&(Y==ea.blendMode||Y===W.LM_PASSTHROUGH&&ea instanceof Kb||Y<=W.LM_LAST_CHIBIPAINT)){var ka=document.createElement("option");ka.appendChild(document.createTextNode(wa(W.BLEND_MODE_DISPLAY_NAMES[Y])));
Y!==W.LM_MULTIPLY||ea.blendMode===Y||ea.useLegacyMultiply?ka.value=Y:ka.value=W.LM_MULTIPLY2;m.appendChild(ka)}})();N.getBlendMode()!=parseInt(m.value,10)&&(m.value=N.getBlendMode());N.getLockAlpha()!=u.checked&&(u.checked=N.getLockAlpha());(function(){var ea={"image-layer":(Ka=k.getActiveLayer())instanceof Ya,"layer-group":Ka instanceof Kb,"clipping-mask":Ka instanceof Ya&&Ka.clip,"no-clipping-mask":Ka instanceof Ya&&!Ka.clip,"no-clipping-mask-or-is-group":!(Ka instanceof Ya)||!Ka.clip,mask:Ka&&
null!==Ka.mask,"no-mask":Ka&&null===Ka.mask,"mask-enabled":Ka&&null!==Ka.mask&&Ka.maskVisible,"mask-disabled":Ka&&null!==Ka.mask&&!Ka.maskVisible};Ka=0;for(var Y="mask no-mask clipping-mask no-clipping-mask-or-is-group image-layer layer-group".split(" ");Ka<Y.length;Ka++){var ka=Y[Ka],ha=O.getElementsByClassName("chickenpaint-action-require-"+ka),qa=!0,Da=!1,La=void 0;try{for(var Ka,V,Na=ha[Symbol.iterator]();!(qa=(V=Na.next()).done);qa=!0)V.value.style.display=ea[ka]?"inline-block":"none"}catch(ya){Da=
!0,La=ya}finally{try{qa||null==Na.return||Na.return()}finally{if(Da)throw La;}}}O.querySelectorAll("[data-action]").forEach(function(ya){var wb=ya.getAttribute("data-action");ya.classList.toggle("disabled",!a.isActionAllowed(wb))})})()}function d(){k=this;g.resize();c()}var b=this;ad.call(this,a,"layers","Layers",{resizeHorz:!0,resizeVert:!0});var f=this,k=a.getArtwork(),l=null,h=this.getBodyElement(),e=this.getElement(),g=new function(){function N(Ca){var Z=fa(ta)(".chickenpaint-layer",ib);return Z.get(Z.length-
1-Ca)}function ea(Ca){Ca=fa(ta)(Ca).closest(".chickenpaint-layer");if(!Ca.length)return-1;var Z=fa(ta)(".chickenpaint-layer",ib);return Z.length-1-Z.index(Ca)}function Y(){if(2===ya.state){var Ca=e.getBoundingClientRect(),Z=!0,za=!0;if(ya.dropTarget=function(ma,rb){var zb=fa(ta)(".chickenpaint-layer",ib);ma={layer:l[l.length-1],displayIndex:l.length-1,direction:"over"};for(var dc=0;dc<zb.length;dc++){var Lc=zb[zb.length-1-dc].getBoundingClientRect();if(0===dc&&rb>Lc.bottom){ma=k.getLayersRoot().layers[0];
ma={layer:ma,displayIndex:l.indexOf(ma),direction:"under"};break}if(rb>=Lc.top){zb=l[dc];var gb=Lc.bottom-Lc.top;ma={layer:zb,displayIndex:dc};zb instanceof Kb?rb>=Lc.top+.75*gb?zb.expanded&&0<zb.layers.length?(ma.layer=zb.layers[zb.layers.length-1],ma.displayIndex--,ma.direction="over"):ma.direction="under":rb>=Lc.top+.25*gb?zb.expanded&&0<zb.layers.length?(ma.layer=zb.layers[zb.layers.length-1],ma.displayIndex--,ma.direction="over"):ma.direction="inside":ma.direction="over":rb>=Lc.top+.5*gb?ma.direction=
"under":ma.direction="over";break}}return ma.layer.parent==ya.layer.parent&&("over"==ma.direction||"under"==ma.direction)&&(rb=ma.layer.parent,dc=rb.indexOf(ma.layer),"over"==ma.direction&&rb.layers[dc+1]==ya.layer||"under"==ma.direction&&rb.layers[dc-1]==ya.layer||ma.layer==ya.layer)?null:ya.layer instanceof Kb&&(ma.layer==ya.layer&&"inside"==ma.direction||ma.layer.hasAncestor(ya.layer))?null:ma}(ya.dragX,ya.dragY),ya.dropTarget){var A=N(ya.dropTarget.displayIndex);switch(ya.dropTarget.direction){case "over":case "under":ib.appendChild(ya.dropBetweenMarkerElem);
var T;Z=ya.dropTarget.layer.getDepth()-1;if(A=A.getBoundingClientRect(),"under"==ya.dropTarget.direction&&ya.dropTarget.layer instanceof Kb&&ya.dropTarget.layer.expanded){for(T=ya.dropTarget.displayIndex-1;0<=T&&l[T].hasAncestor(ya.dropTarget.layer);T--);T=N(T+1).getBoundingClientRect().bottom}else T=A.bottom;Z=A.left-Ca.left+(0<Z?26+16*Z:0);ya.dropBetweenMarkerElem.style.left=Z+"px";ya.dropBetweenMarkerElem.style.width=A.right-Ca.left-Z+"px";ya.dropBetweenMarkerElem.style.top=("over"==ya.dropTarget.direction?
A.top-1:T+1)-Ca.top+"px";fa(ta)(".chickenpaint-layer-drop-target",ib).removeClass("chickenpaint-layer-drop-target");Z=!1;break;case "inside":var oa=fa(ta)(".chickenpaint-layer",ib);oa.each(function(ma){fa(ta)(this).toggleClass("chickenpaint-layer-drop-target",oa.length-1-ma==ya.dropTarget.displayIndex)});za=!1}}za&&fa(ta)(".chickenpaint-layer-drop-target",ib).removeClass("chickenpaint-layer-drop-target");Z&&fa(ta)(ya.dropBetweenMarkerElem).remove();ya.frameElem.style.top=ya.dragY-Ca.top-parseInt(ya.frameElem.style.height,
10)/2+"px"}else fa(ta)(ya.dropBetweenMarkerElem).remove(),fa(ta)(ya.frameElem).remove()}function ka(Ca){var Z=Ca.getImageThumbnail().getAsCanvas(Tb);return Z.title=wa("Image"),Z.className="chickenpaint-layer-thumbnail chickenpaint-layer-image-thumbnail",Z.style.maxWidth=Z.width/Z.height*25+"px",Ca!=k.getActiveLayer()||k.isEditingMask()||(Z.className+=" active"),Z}function ha(Ca){var Z,za=Ca.getMaskThumbnail().getAsCanvas(Tb);return za.title=wa("Layer mask"),za.className="chickenpaint-layer-thumbnail chickenpaint-layer-mask-thumbnail",
za.style.maxWidth=za.width/za.height*25+"px",Ca==k.getActiveLayer()&&k.isEditingMask()&&(za.className+=" active"),Ca.maskVisible||(za.className+=" disabled",(Z=za.getContext("2d")).strokeStyle="red",Z.lineWidth=3,Z.moveTo(5,5),Z.lineTo(za.width-5,za.height-5),Z.moveTo(za.width-5,5),Z.lineTo(5,za.height-5),Z.stroke()),za}function qa(Ca,Z){var za=document.createElement("div"),A=document.createElement("div"),T=document.createElement("div"),oa=document.createElement("div"),ma=document.createElement("div"),
rb=document.createElement("div"),zb=document.createElement("div");if(za.className="chickenpaint-layer list-group-item",Z==k.getActiveLayer()&&(za.className+=" active"),A.className="chickenpaint-layer-eye",Z.ancestorsAreVisible()||(A.className+=" chickenpaint-layer-eye-hidden-ancestors"),A.style.marginRight=2+16*(Z.getDepth()-1)+"px",Z.visible?(za.className+=" chickenpaint-layer-visible",A.appendChild(Hd("icon-eye"))):(za.className+=" chickenpaint-layer-hidden",A.appendChild(Hd("icon-eye-slash"))),
za.appendChild(A),T.className="chickenpaint-layer-description",Z instanceof Ya){if(Z.clip&&(za.className+=" chickenpaint-layer-clipped",oa.appendChild(Hd("icon-level-down-alt fa-flip-horizontal"))),Z.lockAlpha)A=Yi("lock-alpha"),A.title=wa("Transparency locked"),rb.appendChild(A)}else Z instanceof Kb&&(za.className+=" chickenpaint-layer-group",Z.expanded?(za.className+=" chickenpaint-layer-group-expanded",oa.appendChild(Hd("icon-folder-open chickenpaint-layer-group-toggle"))):(za.className+=" chickenpaint-layer-group-collapsed",
oa.appendChild(Hd("icon-folder chickenpaint-layer-group-toggle"))));oa.childNodes.length&&(oa.className="chickenpaint-layer-icons",za.appendChild(oa));try{Z instanceof Ya&&za.appendChild(ka(Z)),Z.mask&&za.appendChild(ha(Z))}catch(dc){console.log("Failed to create layer thumb")}oa=Z.name&&0<Z.name.length?Z.name:"(unnamed "+(Z instanceof Kb?"group":"layer")+")";return ma.innerText=oa,ma.setAttribute("title",oa),ma.className="chickenpaint-layer-name",zb.innerText=wa(W.BLEND_MODE_DISPLAY_NAMES[Z.blendMode])+
": "+Z.alpha+"%",zb.className="chickenpaint-layer-blend",T.appendChild(ma),T.appendChild(zb),za.appendChild(T),rb.className="chickenpaint-layer-status",za.appendChild(rb),za.setAttribute("data-display-index",""+Ca),za}function Da(Ca){if(-1<Ca){var Z=l[Ca];Ca=N(Ca);Z&&Ca&&n.show(Z,Ca)}}function La(Ca){2===ya.state?(fa(ta)(ya.layerElem).removeClass("chickenpaint-layer-dragging"),ya.dropTarget&&("inside"==ya.dropTarget.direction?a.actionPerformed({action:"CPRelocateLayer",layer:ya.layer,toGroup:ya.dropTarget.layer,
toIndex:ya.dropTarget.layer.layers.length}):a.actionPerformed({action:"CPRelocateLayer",layer:ya.layer,toGroup:ya.dropTarget.layer.parent,toIndex:ya.dropTarget.layer.parent.indexOf(ya.dropTarget.layer)+("over"==ya.dropTarget.direction?1:0)})),ya.dropTarget=null,ya.state=0,Y()):ya.state=0;Sa&&(clearTimeout(Sa),Sa=null);ib.releasePointerCapture(Ca.pointerId);ib.removeEventListener("pointermove",V);ib.removeEventListener("pointerup",La)}function Ka(){ya.state=2;ya.frameElem=document.createElement("div");
ya.frameElem.className="chickenpaint-layer-drag-frame";ya.frameElem.style.width=fa(ta)(ya.layerElem).outerWidth(!1)+"px";ya.frameElem.style.height=fa(ta)(ya.layerElem).outerHeight(!1)+"px";ya.dropBetweenMarkerElem=document.createElement("div");ya.dropBetweenMarkerElem.className="chickenpaint-layer-drop-between-mark";ya.layerElem.className+=" chickenpaint-layer-dragging";ib.appendChild(ya.frameElem)}function V(Ca){Ca=Ca.clientY;switch(ya.state){case 3:if(5<Math.abs(Ca-ya.dragY))ya.state=4;else break;
case 4:ib.scrollTop=ya.initialScrollTop+ya.dragY-Ca;break;case 1:if(5<Math.abs(Ca-ya.dragY))Ka();else break;case 2:ya.dragY=Ca,Y()}}function Na(Ca,Z,za){try{za?fa(ta)(".chickenpaint-layer-mask-thumbnail",Ca).replaceWith(ha(Z)):fa(ta)(".chickenpaint-layer-image-thumbnail",Ca).replaceWith(ka(Z))}catch(A){}}var ya={state:0,layer:null,layerElem:null,dragX:0,dragY:0,initialScrollTop:0,dropTarget:null,dropBetweenMarkerElem:null,frameElem:null},wb=document.createElement("div"),ib=document.createElement("div"),
Tb=0,Fb=!1,Sa=null;this.buildLayers=function(){var Ca=(l=k.getLayersRoot().getLinearizedLayerList(!0)).map(function(A,T){return qa(T,A)}),Z=document.createDocumentFragment();fa(ta)(ib).empty();for(var za=Ca.length-1;0<=za;za--)Z.appendChild(Ca[za]);ib.appendChild(Z);Y()};this.layerChanged=function(Ca){var Z=l.indexOf(Ca),za=fa(ta)(N(Z));0===za.length||Ca instanceof Kb&&(Ca.expanded!=fa(ta)(za).hasClass("chickenpaint-layer-group-expanded")||Ca.visible!=fa(ta)(za).hasClass("chickenpaint-layer-visible"))?
this.buildLayers():za.replaceWith(qa(Z,Ca))};this.setRotation90=function(Ca){if(Tb!=Ca)for(Tb=Ca,Ca=0;Ca<l.length;Ca++){var Z=l[Ca],za=fa(ta)(N(Ca));0<za.length&&(Na(za,Z,!1),Z.mask&&Na(za,Z,!0))}};this.layerImageThumbChanged=function(Ca){var Z=l.indexOf(Ca);Z=fa(ta)(N(Z));0<Z.length&&Na(Z,Ca,!1)};this.layerMaskThumbChanged=function(Ca){var Z=l.indexOf(Ca);Z=fa(ta)(N(Z));0<Z.length&&(Ca.mask?Na(Z,Ca,!0):fa(ta)(".chickenpaint-layer-mask-thumbnail",Z).remove())};this.activeLayerChanged=function(Ca,
Z){fa(ta)(".active",ib).removeClass("active");Ca=fa(ta)(N(l.indexOf(Ca)));Ca.addClass("active");fa(ta)(".chickenpaint-layer-image-thumbnail",Ca).toggleClass("active",!Z);fa(ta)(".chickenpaint-layer-mask-thumbnail",Ca).toggleClass("active",Z)};this.resize=function(){f.dismissNotification();this.buildLayers()};this.getElement=function(){return wb};this.revealLayer=function(Ca){Ca=N(Ca);var Z=Ca.getBoundingClientRect(),za=ib.getBoundingClientRect();return ib.scrollTop=Math.max(Math.min(Math.max(ib.scrollTop,
ib.scrollTop+Z.bottom-za.bottom),ib.scrollTop+Z.top-za.top),0),Ca};e.id="chickenpaint-layer-pop";wb.className="chickenpaint-layers-widget";wb.addEventListener("contextmenu",function(Ca){return Ca.preventDefault()},!0);ib.className="list-group";ib.addEventListener("dblclick",function(Ca){0===Ca.button&&0<fa(ta)(Ca.target).closest(".chickenpaint-layer-description").length&&0===fa(ta)(Ca.target).closest("input").length&&(Da(ea(Ca.target)),Ca.preventDefault())});ib.addEventListener("pointerdown",function(Ca){var Z=
ea(fa(ta)(Ca.target).closest(".chickenpaint-layer")[0]);if(-1!=Z){var za=l[Z];if(0==Ca.button&&fa(ta)(Ca.target).closest(".chickenpaint-layer-eye").length)a.actionPerformed({action:"CPSetLayerVisibility",layer:za,visible:!za.visible});else if(0==Ca.button&&za instanceof Kb&&fa(ta)(Ca.target).closest(".chickenpaint-layer-group-toggle").length)a.actionPerformed({action:"CPExpandLayerGroup",group:za,expand:!za.expanded});else{var A,T,oa=k.getActiveLayer()!=za;(Fb=0<fa(ta)(Ca.target).closest(".chickenpaint-layer-mask-thumbnail").length||
za instanceof Kb&&null!==za.mask&&oa,0==Ca.button&&Ca.shiftKey&&!Ca.ctrlKey&&!Ca.metaKey&&Fb)?a.actionPerformed({action:"CPSetMaskVisible",layer:za,visible:!za.maskVisible}):(A=0==Ca.button||oa?Fb:k.isEditingMask(),T=k.isEditingMask()!=A,(oa||T)&&a.actionPerformed({action:"CPSetActiveLayer",layer:za,mask:A}),A&&Ca.altKey)?a.actionPerformed({action:"CPToggleMaskView"}):A&&!Ca.shiftKey&&(Ca.ctrlKey||Ca.metaKey)?a.actionPerformed({action:"CPApplyLayerMask"}):A&&Ca.shiftKey&&(Ca.ctrlKey||Ca.metaKey)?
a.actionPerformed({action:"CPRemoveLayerMask"}):0==Ca.button?("pen"===Ca.pointerType||"touch"===Ca.pointerType?(ya.state=3,ya.initialScrollTop=ib.scrollTop,Sa&&clearTimeout(Sa),Sa=setTimeout(function(){3===ya.state&&(Ka(),ya.dragY=Ca.clientY,Y())},800)):ya.state=1,ya.dropTarget=null,ya.layer=za,ya.layerElem=N(Z),ya.dragX=Ca.clientX,ya.dragY=Ca.clientY,ib.setPointerCapture(Ca.pointerId),ib.addEventListener("pointermove",V),ib.addEventListener("pointerup",La)):2!=Ca.button||oa||(Ca.preventDefault(),
-1!=ea(Ca.target)&&(Da(ea(Ca.target)),Ca.preventDefault()))}}});ib.setAttribute("touch-action","none");for(var sc=0,cc=["ontouchstart","ontouchmove","ontouchend","ontouchcancel"];sc<cc.length;sc++)ib.addEventListener(cc[sc],Ip);wb.appendChild(ib)},p=new xd(0,100,!1,!1,208),m=document.createElement("select"),n=new function(){var N=null,ea="",Y=document.createElement("input"),ka=this;this.hide=function(){N=null;var ha=fa(ta)(Y).parent();ha&&(fa(ta)(Y).remove(),ha.text(ea))};this.renameAndHide=function(){N&&
N.name!=Y.value&&a.actionPerformed({action:"CPSetLayerName",layer:N,name:Y.value});this.hide()};this.show=function(ha,qa){ea=(N=ha).name;Y.value=ea;(ha=qa.querySelector(".chickenpaint-layer-name"))&&ha.parentNode&&(qa=ha.firstChild)&&qa.nodeType===Node.TEXT_NODE&&(ha.removeChild(qa),ha.appendChild(Y));Y.select()};Y.type="text";Y.className="chickenpaint-layer-rename form-control input-sm";Y.addEventListener("keydown",function(ha){ha.stopPropagation()});Y.addEventListener("keydown",function(ha){"Enter"===
ha.key&&ka.renameAndHide();ha.stopPropagation()});Y.addEventListener("keyup",function(ha){"Escape"===ha.key&&ka.hide();ha.stopPropagation()});Y.addEventListener("blur",function(ha){N&&ka.renameAndHide()})},r=document.createElement("input"),u=document.createElement("input"),w=!1,z=this.setSize,G=this.setWidth,L=this.setHeight;this.setSize=function(N,ea){z.call(this,N,ea);this.dismissNotification();p.resize()};this.setWidth=function(N){G.call(this,N);p.resize();g.resize()};this.setHeight=function(N){L.call(this,
N);g.resize()};this.setRotation90=function(N){g.setRotation90(N)};this.dismissNotification=function(){fa(ta)(".chickenpaint-layer[aria-describedby],.chickenpaint-slider[aria-describedby]",h).each(function(N,ea){ea=fa(ta)(ea);(N=bootstrap.Popover.getInstance(ea[0]))&&N.dispose()});w&&(clearTimeout(w),w=!1)};this.showNotification=function(N,ea,Y){var ka=l.indexOf(N);N=k.getActiveLayer()==N&&"opacity"==Y?p.getElement():g.revealLayer(ka);b.dismissNotification();(new bootstrap.Popover(N,{html:!1,content:ea,
placement:"left",trigger:"manual",fallbackPlacement:[],boundary:"window",container:f.getElement()})).show();w=setTimeout(function(){w=!1;b.dismissNotification()},Math.max(Math.round(70*ea.length),3E3))};m.className="form-control form-control-sm";m.tabIndex=-1;m.title=wa("Layer blending mode");m.addEventListener("change",function(N){a.actionPerformed({action:"CPSetLayerBlendMode",blendMode:parseInt(m.value,10)});m.blur()});h.appendChild(m);p.title=function(N){return wa("Opacity")+": "+N+"%"};p.on("valueChange",
function(N){a.actionPerformed({action:"CPSetLayerAlpha",alpha:N})});h.appendChild(p.getElement());r.id="chickenpaint-chk-sample-all-layers";r.type="checkbox";r.addEventListener("click",function(N){k.setSampleAllLayers(r.checked);document.activeElement.blur()});h.appendChild(Sl(r,wa("Sample all layers")));u.id="chickenpaint-chk-lock-alpha";u.type="checkbox";u.addEventListener("click",function(N){a.actionPerformed({action:"CPSetLayerLockAlpha",lock:u.checked});document.activeElement.blur()});h.appendChild(Sl(u,
wa("Lock transparency")));h.appendChild(g.getElement());var O=function(){var N=[{title:"Add layer",icon:Hd("icon-file"),action:"CPAddLayer"},{title:"Add group",icon:Hd("icon-folder"),action:"CPAddGroup"},{title:"Merge down",icon:Hd("icon-download_FILL"),action:"CPLayerMergeDown",require:["image-layer"]},{title:"Merge group",icon:Hd("icon-collapse_all_FILL"),action:"CPGroupMerge",require:["layer-group"]},{title:"Clip to the layer below",icon:Hd("icon-level-down-alt fa-flip-horizontal"),action:"CPCreateClippingMask",
require:"no-clipping-mask-or-is-group"},{title:"Unclip from the layer below",icon:Hd("icon-level-down-alt fa-flip-horizontal"),action:"CPReleaseClippingMask",require:"clipping-mask"},{title:"Add layer mask",icon:Yi("mask"),action:"CPAddLayerMask",require:["no-mask"]},{title:"Apply mask",icon:Yi("mask"),action:"CPApplyLayerMask",require:["mask"]},{title:"Duplicate",icon:Hd("icon-clone"),action:"CPLayerDuplicate"},{title:"Delete layer",icon:Hd("icon-trash"),action:"CPRemoveLayer"}],ea=document.createElement("ul");
ea.className="chickenpaint-layer-buttons list-unstyled";var Y=!0,ka=!1,ha=void 0;try{for(var qa,Da=N[Symbol.iterator]();!(Y=(qa=Da.next()).done);Y=!0)!function(){var La=qa.value,Ka=document.createElement("li");Ka.setAttribute("data-action",La.action);Ka.className="chickenpaint-small-toolbar-button "+(La.require?"chickenpaint-action-require-"+La.require:"");Ka.title=wa(La.title);Ka.appendChild(La.icon);Ka.addEventListener("click",function(){a.actionPerformed({action:La.action})});ea.appendChild(Ka)}()}catch(La){ka=
!0,ha=La}finally{try{Y||null==Da.return||Da.return()}finally{if(ka)throw ha;}}return ea}();h.appendChild(O);k.on("changeActiveLayer",function(N,ea,Y){g.activeLayerChanged(ea,Y);c()});k.on("changeLayer",function(N){k=this;f.dismissNotification();g.layerChanged(N);c()});k.on("changeStructure",d);k.on("changeLayerMaskThumb",function(N){k=this;g.layerMaskThumbChanged(N)});k.on("changeLayerImageThumb",function(N){k=this;g.layerImageThumbChanged(N)});a.on("layerNotification",this.showNotification.bind(this));
d.call(k)}function Jp(){this.table=new Uint8Array(256);this.loadIdentity=function(){for(var a=0;256>a;a++)this.table[a]=a};this.loadBrightnessContrast=function(a,c){c=0<c?1/(1.0001-c):1+c;a=.5-.5*c+a;for(var d=0;256>d;d++)this.table[d]=Math.min(255,Math.max(~~(255*(d/255*c+a)),0))};this.invert=function(){for(var a=0;256>a;a++)this.table[a]=255-this.table[a]}}function Tl(a,c){var d=document.createElement("div"),b=document.createElement("label");return d.className="form-check",a.className="form-check-input",
b.className="form-check-label",b.setAttribute("for",a.id),b.appendChild(a),b.appendChild(document.createTextNode(c)),d.appendChild(a),d.appendChild(b),d}function rh(a){function c(Y){for(var ka=0;ka<Y.length;ka++){var ha=new h(Y[ka],32,32);ha.on("click",function(){p=this.texture;l()});z.appendChild(ha.getElement())}}function d(Y){for(var ka=new pb(Y,Y,8),ha=1;ha<Y*Y;ha++)ka.data[ha]=255;return ka}function b(Y){for(var ka=2*Y,ha=new pb(ka,ka,8),qa=0;qa<ka;qa++)for(var Da=0;Da<ka;Da++)ha.data[qa+Da*
ka]=0==(~~(qa/Y)+~~(Da/Y))%2?0:255;return ha}function f(Y,ka){for(var ha=new pb(ka,ka,8),qa=0;qa<ka*ka;qa++)~~(qa%ka)>=Y&&(ha.data[qa]=255);return ha}function k(Y,ka){for(var ha=new pb(ka,ka,8),qa=0;qa<ka*ka;qa++)qa/ka>=Y&&(ha.data[qa]=255);return ha}function l(){if(null!=p){m=p.clone();n&&m.mirrorHorizontally();var Y=new Jp;Y.loadBrightnessContrast(u,w);r&&Y.invert();m.applyLUT(Y)}else m=null;a.getArtwork().setBrushTexture(m);null!=L&&L.updateTexture()}function h(Y,ka,ha){var qa=document.createElement("canvas"),
Da=qa.getContext("2d"),La=this;this.setTexture=function(Ka){this.texture=Ka;this.paint()};this.getElement=function(){return qa};this.paint=function(){null!=this.texture?Da.fillStyle=Da.createPattern(this.texture.getAsCanvas(),"repeat"):Da.fillStyle="white";Da.fillRect(0,0,qa.width,qa.height)};qa.addEventListener("click",function(){La.emit("click")});qa.width=ka;qa.height=ha;this.setTexture(Y)}ad.call(this,a,"textures","Textures");var e,g,p,m,n=!1,r=!1,u=0,w=0,z=document.createElement("div"),G=this.getBodyElement();
h.prototype=Object.create(fa(Pc).prototype);h.prototype.constructor=h;var L=new function(){function Y(){qa.checked=r;Da.checked=n;La.setValue(100*u+100);Ka.setValue(100*w+100)}var ka,ha=document.createElement("div"),qa=document.createElement("input"),Da=document.createElement("input"),La=new xd(0,200,!0),Ka=new xd(0,200,!0),V=new h(null,64,64),Na=document.createElement("button"),ya=new bootstrap.Popover(Na,{html:!0,content:function(){return Tb},trigger:"manual",placement:"right",container:G});this.updateTexture=
function(){Na.disabled=null==m;V.setTexture(m)};this.getElement=function(){return ha};ha.className="chickenpaint-texture-options";ha.appendChild(V.getElement());Na.type="button";Na.className="btn btn-light btn-sm";Na.setAttribute("data-bs-toggle","popover");Na.setAttribute("data-bs-placement","right");Na.textContent=wa("Customize");(ka=document.createElement("div")).className="chickenpaint-texture-controls";qa.id="chickenpaint-chk-texture-invert";qa.type="checkbox";qa.addEventListener("click",function(Fb){r=
this.checked;l()});ka.appendChild(Tl(qa,wa("Inverse")));Da.id="chickenpaint-chk-texture-mirror";Da.type="checkbox";Da.addEventListener("click",function(Fb){n=this.checked;l()});ka.appendChild(Tl(Da,wa("Mirror")));La.title=function(Fb){return wa("Brightness")+": "+(Fb-100)+"%"};La.on("valueChange",function(Fb){u=(Fb-100)/100;l()});ka.appendChild(La.getElement());Ka.title=function(Fb){return wa("Contrast")+": "+(Fb-100)+"%"};Ka.on("valueChange",function(Fb){w=(Fb-100)/100;l()});ka.appendChild(Ka.getElement());
var wb=document.createElement("button");var ib=document.createElement("button");wb.textContent="Ok";wb.className="btn btn-primary btn-sm";wb.type="button";wb.addEventListener("click",function(Fb){ya.hide()});ka.appendChild(wb);ka.appendChild(document.createTextNode(" "));ib.textContent="Reset";ib.className="btn btn-secondary btn-sm";ib.type="button";ib.addEventListener("click",function(Fb){w=u=0;r=n=!1;Y();l()});ka.appendChild(ib);Y();var Tb=ka;Na.addEventListener("click",function(){ya.toggle()});
ha.appendChild(Na);this.updateTexture()};G.appendChild(L.getElement());z.className="chickenpaint-texture-swatches";G.appendChild(z);c((e=[null],(g=new pb(2,2,8)).data[0]=255,g.data[3]=255,e.push(g),e.push(d(2)),e.push(d(3)),e.push(d(4)),e.push(d(6)),e.push(d(8)),e.push(f(1,2)),e.push(f(2,4)),e.push(k(1,2)),e.push(k(2,4)),e.push(b(2)),e.push(b(4)),e.push(b(8)),e.push(b(16)),e));e=a.getResourcesRoot()+"gfx/textures32.png";var O=function(Y){c(Y)};var N=new Image;var ea=[];N.onload=function(){var Y=document.createElement("canvas"),
ka=Y.getContext("2d",{willReadFrequently:!0});Y.width=N.width;Y.height=N.height;for(Y=0;2>Y;Y++){ka.drawImage(N,0,32*Y,32,32,0,0,32,32);try{for(var ha=ka.getImageData(0,0,32,32),qa=new pb(32,32,8),Da=0;1024>Da;Da++)qa.data[Da]=ha.data[4*Da];ea.push(qa)}catch(La){console.log(La)}}O(ea)};N.src=e}function sh(a){function c(G){var L=document.createElement("div"),O=document.createElement("a"),N=document.createElement("ul"),ea=document.createElement("a"),Y=document.createElement("a"),ka=this;this.getElement=
function(){return L};this.setColor=function(qa){O.setAttribute("data-color",qa);var Da=O.style;for(qa=""+Number(qa).toString(16);6>qa.length;)qa="0"+qa;Da.backgroundColor="#"+qa};this.setColor(G);O.href="#";O.className="chickenpaint-color-swatch dropdown-toggle";ea.className="dropdown-item";ea.href="#";ea.textContent=wa("Remove");ea.addEventListener("click",function(qa){qa.preventDefault();fa(ta)(L).remove();l=!0});Y.className="dropdown-item";Y.href="#";Y.textContent=wa("Replace with current color");
Y.addEventListener("click",function(qa){qa.preventDefault();ka.setColor(a.getCurColor().getRgb());l=!0});N.className="dropdown-menu";G=document.createElement("li");var ha=document.createElement("li");G.appendChild(ea);ha.appendChild(Y);N.appendChild(G);N.appendChild(ha);L.className="chickenpaint-color-swatch-wrapper";L.appendChild(O);L.appendChild(N)}function d(G){G=new c(G);h.appendChild(G.getElement())}function b(G){var L=document.createElement("span");return L.className="fa icon-"+G,L}ad.call(this,
a,"swatches","Color swatches");var f,k=[16777215,0,16711680,65280,255,16776960],l=!1,h=document.createElement("ul"),e=document.createElement("div"),g=this;this.getSwatches=function(){for(var G=fa(ta)(".chickenpaint-color-swatch",h),L=Array(G.length),O=0;O<G.length;O++)L[O]=parseInt(G.get(O).getAttribute("data-color"),10);return L};this.setSwatches=function(G){for(;h.lastChild;)h.removeChild(h.lastChild);!0;for(var L=0;L<G.length;L++)d(G[L]);l=!0};this.isModified=function(){return l};(function(){h.className=
"chickenpaint-color-swatches list-unstyled";for(var G=0;G<k.length;G++)h.appendChild((new c(k[G])).getElement());h.addEventListener("click",function(L){var O=L.target;/^<a data-color=/i.test(O.outerHTML)&&/chickenpaint-color-swatch/.test(O.className)&&0==L.button&&void 0!==O.getAttribute("data-color")&&(a.setCurColor(new bc(parseInt(O.getAttribute("data-color"),10))),L.stopPropagation(),L.preventDefault())});h.addEventListener("contextmenu",function(L){var O=L.target;if(/^<a data-color=/i.test(O.outerHTML)&&
/chickenpaint-color-swatch/.test(O.className)){L.preventDefault();var N=new bootstrap.Dropdown(fa(ta)(O));N.toggle();document.addEventListener("click",function ka(Y){N.hide();document.removeEventListener("click",ka)})}})})();this.getBodyElement().appendChild(h);var p=document.createElement("button");var m=document.createElement("button");var n=document.createElement("ul");var r=document.createElement("a");var u=document.createElement("a");m.type="button";m.title=wa("Add the current brush color as a new swatch");
m.className="btn chickenpaint-small-toolbar-button chickenpaint-color-swatch-add";m.appendChild(b("plus"));p.type="button";p.className="btn dropdown-toggle chickenpaint-small-toolbar-button chickenpaint-color-swatch-settings";p.setAttribute("data-bs-toggle","dropdown");p.appendChild(b("cog"));r.className="dropdown-item";r.href="#";r.textContent=wa("Save swatches to your computer...");r.addEventListener("click",function(G){G.preventDefault();G=new Blob([(new Mf).write(g.getSwatches())],{type:"application/octet-stream"});
fa(vg).saveAs(G,"oekakiswatches.aco")});u.className="dropdown-item";u.href="#";u.textContent=wa("Load swatches from your computer...");u.addEventListener("click",function(G){G.preventDefault();f.onchange=function(){var L=this.files;if(!(1>L.length)){L=L[0];var O=new FileReader;O.onload=function(){var N=(new Mf).read(this.result);null!=N&&0<N.length?g.setSwatches(N):alert(wa("The swatches could not be read, did you select an .aco file?"))};O.readAsArrayBuffer(L)}};f.click()});n.className="dropdown-menu";
var w=document.createElement("li");var z=document.createElement("li");w.appendChild(r);z.appendChild(u);n.appendChild(w);n.appendChild(z);(r=document.createElement("div")).className="btn-group";r.appendChild(p);r.appendChild(n);m.addEventListener("click",function(G){d(a.getCurColor().getRgb());l=!0});e.className="chickenpaint-color-swatches-buttons";window.File&&window.FileReader&&window.FileList&&window.Blob&&((f=document.createElement("input")).type="file",f.multiple=!1,f.style.display="none",e.appendChild(r),
e.appendChild(f));e.appendChild(m);this.getBodyElement().appendChild(e)}function th(a){function c(){var u=fa(ta)(l).parents(".chickenpaint").find(".chickenpaint-canvas");return{width:u.width(),height:u.height()}}function d(u,w){var z=u.getElement();w?l.contains(z)||l.appendChild(z):l.contains(z)&&l.removeChild(z);h.emitEvent("paletteVisChange",[u.name,w])}var b={tool:new mh(a),misc:new nh(a),stroke:new oh(a),color:new ph(a),brush:new Of(a),layers:new qh(a),textures:new rh(a),swatches:new sh(a)},f=
{tool:!1,color:!1,misc:!1},k={color:!0,textures:!0,layers:!0},l=document.createElement("div"),h=this,e=[],g=[],p;for(p in this.palettes=b,this.showPaletteByName=function(u,w){(u=b[u])&&d(u,w)},this.togglePalettes=function(){if(0==g.length)fa(ta)("> .chickenpaint-palette",l).each(function(){h.showPaletteByName(this.getAttribute("data-paletteName"),!1);g.push(this)});else{for(var u=0;u<g.length;u++)h.showPaletteByName(g[u].getAttribute("data-paletteName"),!0);g=[]}},this.constrainPalettes=function(){var u=
c();for(z in b){var w=b[z];w.getX()+w.getWidth()/2>u.width&&w.setLocation(u.width-w.getWidth(),w.getY());w.getY()+w.getHeight()/2>u.height&&w.setLocation(w.getX(),u.height-w.getHeight())}var z=0<u.width-b.tool.getWidth()-b.misc.getWidth()-b.stroke.getWidth()-b.color.getWidth()-b.brush.getWidth()-15;b.swatches.getX()+b.swatches.getWidth()==b.brush.getX()+b.brush.getWidth()&&20>Math.abs(b.swatches.getY()-b.brush.getY())&&b.swatches.setLocation(b.brush.getX()-b.swatches.getWidth()-(z?5:1),0);b.layers.getY()+
b.layers.getHeight()>u.height&&b.layers.setHeight(Math.max(u.height-b.layers.getY(),200))},this.arrangePalettes=function(){var u=c();if(a.getSmallScreenMode()){b.tool.setLocation(0,0);b.misc.setLocation(b.tool.getX()+b.tool.getWidth()+1,0);var w=16>=u.width-(b.tool.getWidth()+b.misc.getWidth()+b.brush.getWidth())?b.misc.getY()+b.misc.getHeight()+1:0;b.brush.setLocation(u.width-b.brush.getWidth()-15,w);b.textures.setWidth(u.width-b.textures.getX());b.layers.setLocation(b.brush.getX()+b.brush.getWidth()-
b.layers.getWidth(),b.textures.getY()-b.layers.getHeight());w=Math.max(b.textures.getY()-330-1,370);b.layers.setHeight(w);b.layers.setWidth(218);b.stroke.setLocation(b.misc.getX(),b.misc.getY()+b.misc.getHeight()+1);b.swatches.setLocation(b.stroke.getX(),b.stroke.getY()+b.stroke.getHeight()+1)}else{w=0<u.width-b.tool.getWidth()-b.misc.getWidth()-b.stroke.getWidth()-b.color.getWidth()-b.brush.getWidth()-15;b.brush.setLocation(u.width-b.brush.getWidth()-15,0);var z=b.brush.getY()+b.brush.getHeight();
z=300<u.height-z?z+2:z;b.layers.setSize(b.brush.getWidth()+(w?30:0),u.height-z);b.layers.setLocation(b.brush.getX()+b.brush.getWidth()-b.layers.getWidth(),z);b.tool.setLocation(0,0);b.misc.setLocation(b.tool.getX()+b.tool.getWidth()+(w?5:1),0);w?b.stroke.setLocation(b.misc.getX()+b.misc.getWidth()+(w?5:1),0):b.stroke.setLocation(b.misc.getX(),b.misc.getY()+b.misc.getHeight()+1);b.swatches.setLocation(Math.max(b.brush.getX()-b.swatches.getWidth()-(w?5:1),b.tool.getX()+b.tool.getWidth()),0);b.textures.setWidth(Math.min(b.layers.getX()-
b.textures.getX(),490))}b.textures.setLocation(b.color.getX()+b.color.getWidth()+4,u.height-b.textures.getHeight());b.color.setLocation(0,Math.max(b.tool.getY()+b.tool.getHeight(),u.height-b.color.getHeight()))},a.on("smallScreen",function(u){if(u)for(var w in b)b[w].toggleCollapse(u&&(!(w in f)||f[w]))}),this.getElement=function(){return l},l.className="chickenpaint-palettes",b){var m=b[p],n=m.getElement();m.on("paletteVisChange",function(){d(this,!1)});p in k&&m.setCollapseDownwards(!0);n.setAttribute("data-paletteName",
p);e.push(n)}for(var r in b)k=b[r].getElement(),l.appendChild(k)}function Kp(a,c){function d(h){var e,g=h.data("action"),p=h.data("checkbox");a.isActionAllowed(g)&&(p?(h.toggleClass("selected"),e=h.hasClass("selected")):e=!1,a.actionPerformed({action:g,checkbox:p,selected:e}))}var b=fa(ta)('<nav class="navbar navbar-expand-md bg-light"><div class="navbar-upper"><a class="navbar-brand" href="#">ChickenPaint Be</a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#chickenpaint-main-menu-content" aria-controls="chickenpaint-main-menu-content" aria-expanded="false" aria-label="Toggle main menu"><span class="navbar-toggler-icon"></span></button></div><div class="collapse navbar-collapse" id="chickenpaint-main-menu-content"><div class="navbar-nav"></div></div><div class="widget-nav" id="chickenpaint-palette-toggler-content"></div></nav>'),
f=navigator.userAgent.toLowerCase().includes("mac os");this.getElement=function(){return b[0]};(function(h,e){h.append(e.map(function(g){var p=fa(ta)('<div class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+wa(g.name)+'</a><ul class="dropdown-menu"></ul></div>'),m=fa(ta)(".dropdown-toggle",p),n=fa(ta)(".dropdown-menu",p);return m[0].addEventListener("show.bs.dropdown",function(r){!function(u){fa(ta)("[data-action]",
u).each(function(){var L=fa(ta)(this),O=this.getAttribute("data-action");O=a.isActionAllowed(O);L.toggleClass("disabled",!O).toggleClass("hidden",!O&&!0===L.data("hideIfNotAvailable"))});fa(ta)(".dropdown-divider",u).removeClass("hidden");u=fa(ta)(".dropdown-item:not(.hidden),.dropdown-divider:not(.hidden)",u);for(var w=null,z=0;z<u.length;z++){var G=fa(ta)(u[z]);G.hasClass("dropdown-divider")?0===z||w?G.addClass("hidden"):w=G:w=null}w&&w.addClass("hidden")}(p)}),n.append(g.children.map(function(r){if(!r.action||
a.isActionSupported(r.action)){if("CPSend"!=r.action||a.isActionSupported("CPContinue")||(r.name=wa("Post Oekaki"),r.shortcut="ctrl+p"),"-"==r.name?w=fa(ta)('<hr class="dropdown-divider"></hr>'):(w=fa(ta)('<a class="dropdown-item" href="#" data-action="'+r.action+'"><span>'+wa(r.name)+"</span></a>"),r.checkbox&&fa(ta)(w).data("checkbox",!0).toggleClass("selected",!!r.checked),r.hideIfNotAvailable&&w.data("hideIfNotAvailable",!0)),r.title&&w.attr("title",wa(r.title)),r.shortcut){var u,w,z=w,G=document.createElement("small");
f&&(r.shortcut=r.shortcut.replace(/SHIFT/im,"\u21e7"),r.shortcut=r.shortcut.replace(/ALT/im,"\u2325"),r.shortcut=r.shortcut.replace(/CTRL/im,"\u2318"));G.className="chickenpaint-shortcut";G.textContent=(u=(u=(u=(u=(u=r.shortcut).toUpperCase()).replace(/(,.+)$/,"")).replace("CTRL+=","CTRL++")).replace("\u2318+=","\u2318++"),u=f?u.replace(/([^+])\+/g,"$1"):u.replace(/([^+])\+/g,"$1 "));z.append(G);fa(Dc)(r.shortcut,function(L){return d(z),L.preventDefault(),L.stopPropagation(),!1})}return fa(ta)("<li>").append(w)}})),
p}))})(fa(ta)(".navbar-nav",b),Ul);(function(h,e){h.append(e.filter(function(g){return!!g.mnemonic&&a.isActionSupported(g.action)}).map(function(g){var p=fa(ta)('<button class="widget-toggler selected" type="button" data-action="'.concat(g.action,'" data-checkbox="true" data-selected="').concat(!g.checked,'">')+"<span>"+g.mnemonic+"</span></button>");return p.on("click",function(m){d(p);m.preventDefault()}),p}))})(fa(ta)(".widget-nav",b),Ul[5].children);fa(ta)(b).on("click","a:not(.dropdown-toggle)",
function(h){d(fa(ta)(this));h.preventDefault()});fa(ta)(".navbar-toggler",b).on("click",function(h){h.preventDefault()});c.getPaletteManager().on("paletteVisChange",function(h,e){fa(ta)('[data-action="CPPal'+h.substring(0,1).toUpperCase()+h.substring(1)+'"]',b).toggleClass("selected",e)});var k=fa(ta)(".dropdown-item[data-action=CPFullScreen]",b),l=fa(ta)(".dropdown-item[data-action=CPToolbarStyle]",b);a.on("fullScreen",function(h){return k.toggleClass("selected",h)});k.toggleClass("selected",a.isFullScreen());
a.on("toolbarStyleChange",function(h){return l.toggleClass("selected","old"===h)});l.toggleClass("selected","old"===a.getToolbarStyle())}function uh(a,c){var d=this,b=document.createElement("div"),f=new lh(a),k=new th(a),l=!1,h=this;this.togglePalettes=function(){k.togglePalettes()};this.arrangePalettes=function(){setTimeout(k.arrangePalettes.bind(k),0)};this.constrainPalettes=function(){k.constrainPalettes()};this.showPalette=function(m,n){k.showPaletteByName(m,n)};this.getSwatches=function(){return k.palettes.swatches.getSwatches()};
this.setSwatches=function(m){k.palettes.swatches.setSwatches(m)};this.getPaletteManager=function(){return k};this.setRotation90=function(m){f.setRotation(m*Math.PI/2);k.palettes.layers.setRotation90(m)};this.setFullScreenMode=function(m){l!==m&&(l=m,h.resize(),h.arrangePalettes())};this.resize=function(){var m=window.innerHeight,n=e.getElement().getBoundingClientRect().height;f.resize(l?m-n:Math.min(Math.max(m-n-65,500),850),!1);h.constrainPalettes()};var e=new Kp(a,this);c.appendChild(e.getElement());
b.className="chickenpaint-main-section";b.appendChild(f.getElement());b.appendChild(k.getElement());c.appendChild(b);f.on("canvasRotated90",function(m){k.palettes.layers.setRotation90(m)});screen.orientation&&screen.orientation.addEventListener("change",function(m){d.resize();a.actionPerformed({action:"CPArrangePalettes"});setTimeout(function(){d.resize();a.actionPerformed({action:"CPArrangePalettes"})},10);Promise.resolve().then(function(){d.resize()}).then(function(){a.actionPerformed({action:"CPArrangePalettes"})})});
var g=document.getElementById("chickenpaint-main-menu-content");if(document.addEventListener("show.bs.modal",function(){g&&g.classList.contains("show")&&(new bootstrap.Collapse(g,{toggle:!1})).hide()}),g){var p=document.querySelector(".chickenpaint .widget-nav");p&&(g.addEventListener("show.bs.collapse",function(m){p.classList.add("hidden")}),g.addEventListener("hidden.bs.collapse",function(m){p.classList.remove("hidden")}));window.addEventListener("resize",function(){p.classList.remove("hidden")})}document.addEventListener("hidden.bs.collapse",
this.resize.bind(this));window.addEventListener("resize",this.resize.bind(this));a.on("fullScreen",function(m){return d.setFullScreenMode(m)});a.on("toolbarStyleChange",function(m){fa(ta)(c).toggleClass("chickenpaint-toolbar-style-old","old"===m)});a.on("unsavedChanges",function(m){fa(ta)(c).toggleClass("chickenpaint-unsaved",m)});setTimeout(this.resize.bind(this),0)}function Lp(a){var c=fa(ta)('<div class="modal fade chickenpaint-about-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">About ChickenPaint Be</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n\t\t\t\t\t\t<a class="chickenpaint-on-github" target="_blank" href="https://github.com/satopian/ChickenPaint_Be" rel="noopener"><span class="icon-github"></span> ChickenPaint Be on GitHub</a>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tCustomized from <a href="https://github.com/thenickdude/chickenpaint" target="_blank" rel="noopener">ChickenPaint</a>.<br>\n\t\t\t\t\t\tby satopian.<br>\n\t\t\t\t\t\t<a href="https://www.gnu.org/licenses/" target="_blank" rel="noopener">GNU General Public License</a></br>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<a class="chickenpaint-on-github" target="_blank" href="https://github.com/thenickdude/chickenpaint" rel="noopener"><span class="icon-github"></span> ChickenPaint on GitHub</a>\n                            \n                            <p>\n                                ChickenPaint is a translation of <a href="https://github.com/thenickdude/chibipaint" target="_blank" rel="noopener">ChibiPaint</a>\n                                from Java to JavaScript by Nicholas Sherlock / Chicken Smoothie\n                            </p>\n                            <p>\n                                ChibiPaint is Copyright (c) 2006-2008 Marc Schefer. All Rights Reserved\n                            </p>\n                            <p>\n                                ChickenPaint is free software: you can redistribute it and/or modify\n                                it under the terms of the GNU General Public License as published by\n                                the Free Software Foundation, either version 3 of the License, or\n                                (at your option) any later version.\n                            </p>\n        \n                            <p>\n                                ChickenPaint is distributed in the hope that it will be useful,\n                                but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n                                <a target="_blank" href="https://www.gnu.org/licenses/" rel="noopener">GNU General Public License</a> for more details.\n                            </p>\n        \n                            <pre class="pre-scrollable chickenpaint-third-party-licenses">Toolbar icons designed by <a target="_blank" href="https://github.com/Anteira" rel="noopener">Miglena Lapavicheva (Anteira)</a>\n    These icons are dual-licensed under <a target="_blank" href="https://spdx.org/licenses/GPL-3.0-or-later.html" rel="noopener">GPL-3.0-or-later</a> and <a target="_blank" href="https://creativecommons.org/licenses/by/3.0/" rel="noopener">CC-BY-3.0</a>\n\nIncludes icons from the <a target="_blank" href="https://extensions.libreoffice.org/en/extensions/show/tango-icon-theme-for-libreoffice" rel="noopener">Tango Icon Theme for LibreOffice</a>:\n    All artwork is licensed under the Creative Commons Attribution-Share Alike 3.0\n    United States License. To view a copy of this licence, visit\n    https://creativecommons.org/licenses/by-sa/3.0/ or send a letter to Creative\n    Commons, 171 Second Street, Suite 300, San Francisco, California 94105, USA.\n    \n    Credit for icons imported from git://git.gnome.org/gnome-icon-theme or derivatives\n    of these goes to the GNOME project (https://www.gnome.org)\n    Derivatives and new icons were created by Alexander Wilms &lt;f.alexander.wilms@gmail.com> \n    and Miroslav Mazel &lt;mazelm@gmail.com>\n    \nIncludes these MIT-licensed libraries:\n\n    Includes the <a target="_blank" href="https://github.com/eligrey/FileSaver.js" rel="noopener">FileSaver.js library</a>\n    FileSaver.js Copyright \u00a9 2015 <a target="_blank" href="https://eligrey.com/" rel="noopener">Eli Grey</a>\n\n    Includes the <a target="_blank" href="https://github.com/nodeca/pako" rel="noopener">Pako zlib compression library</a>\n    Copyright (C) 2014-2015 by Vitaly Puzrin\n    \n    Includes the <a target="_blank" href="https://github.com/madrobby/keymaster" rel="noopener">keymaster.js</a> keyboard library\n    Copyright (c) 2011-2013 Thomas Fuchs\n\n    Includes the <a target="_blank" href="https://github.com/stefanpenner/es6-promise" rel="noopener">es6-promise</a> library\n    Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors\n\n    Includes the <a target="_blank" href="https://benalman.com/projects/jquery-throttle-debounce-plugin/" rel="noopener">jQuery throttle-debounce</a> library\n    Copyright (c) 2010 "Cowboy" Ben Alman\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="https://jquery.com/" target="_blank" rel="noopener">jQuery library</a> \nCopyright <a href="https://jquery.com/license/" target="_blank" rel="noopener">OpenJS Foundation and other contributors</a>\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/jquery\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n    \n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="https://github.com/jquery/PEP/" target="_blank" rel="noopener">jQuery PEP library</a>\nCopyright OpenJS Foundation and other contributors, <a href="https://jquery.com/license/" target="_blank" rel="noopener">https://jquery.com/license/</a>\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/PEP\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation \n    files (the "Software"), to deal in the Software without \n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or \n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following \n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND \n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, \n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING \n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR \n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes Font Awesome by Fonticons, Inc. - <a href="https://fontawesome.com/" target="_blank" rel="noopener">https://fontawesome.com/</a>\nIncludes Material Design icons by Google - <a href="https://fonts.google.com/" target="_blank" rel="noopener">https://fonts.google.com/</a>\n                    </pre>\n                </div>\n            </div>\n        </div>\n    ');
c[0].addEventListener("hidden.bs.modal",function(b){c.remove()});var d=new bootstrap.Modal(c[0]);a.appendChild(c[0]);this.show=function(){d.show()}}function vh(a,c){var d=fa(ta)('<div class="modal fade" tabindex="-1" role="dialog">\n\t            <div class="modal-dialog">\n\t                <div class="modal-content">\n\t                    <div class="modal-header">\n\t                        <h5 class="modal-title">'.concat(wa("Complete transform"),'</h5>\n\t                        <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n\t                        </button>\n\t                    </div>\n\t                    <div class="modal-body">\n\t                        <p>\n\t\t\t\t\t\t\t').concat(wa("You need to finish transforming this layer before you can do that. What would you like to do with the transform?"),
'\n\t\t\t\t\t\t\t</p>\n\t                    </div>\n\t                    <div class="modal-footer">\n\t                        <button type="button" class="btn btn-light" data-bs-dismiss="modal">').concat(wa("Cancel"),'</button>\n\t                        <button type="button" class="btn btn-light chickenpaint-reject-transform" data-bs-dismiss="modal">').concat(wa("Undo transform"),'</button>\n\t                        <button type="button" class="btn btn-primary chickenpaint-accept-transform" data-bs-dismiss="modal">').concat(wa("Apply transform"),
"</button>\n\t                    </div>\n\t                </div>\n\t            </div>\n\t        </div>\n\t    ")),b=this,f=fa(ta)(".chickenpaint-accept-transform",d),k=fa(ta)(".chickenpaint-reject-transform",d);f.on("click",function(h){c.actionPerformed({action:"CPTransformAccept"});b.emitEvent("accept")});k.on("click",function(h){c.actionPerformed({action:"CPTransformReject"});b.emitEvent("reject")});var l=new bootstrap.Modal(d[0]);this.show=function(){l.show()};d[0].addEventListener("hidden.bs.modal",
function(h){d.remove()});a.addEventListener("keydown",function g(e){"Enter"===e.key&&(l.hide(),c.actionPerformed({action:"CPTransformAccept"}),b.emitEvent("accept"),a.removeEventListener("keydown",g))});a.appendChild(d[0])}function Mp(a){var c=fa(ta)('<div class="modal fade chickenpaint-shortcuts-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat(wa("Shortcuts"),
'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>\n                                ').concat(wa("Many of the menu options and painting tools have keyboard shortcuts which are written next to them or appear when you hover."),"\n                            </p>\n                            <p>\n                                ").concat(wa("Here are some other shortcuts which are not as obvious!"),
'\n                            </p>\n                            <div class="chickenpaint-shortcuts-sections">\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(wa("Color swatches palette"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(wa("Left"),
"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(wa("Use as the drawing color"),'\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(wa("Right"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(wa("Remove or replace a color swatch"),
'\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(wa("Line drawing mode"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ').concat(wa("Left"),
"</span>\n                                                </dt>\n                                                <dd>\n                                                   ").concat(wa("Snap line to nearest 45 degrees"),'\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(wa("Painting tools"),
'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">1</span> - <span class="chickenpaint-shortcut-key">9</span> , <span class="chickenpaint-shortcut-key">0</span></span>\n                                                </dt>\n                                                <dd>\n                                                    ').concat(wa("Change brush opacity"),
'\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">[</span> , <span class="chickenpaint-shortcut-key">]</span></span>\n                                                </dt>\n                                                <dd>\n                                                    ').concat(wa("Change brush size"),
'\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(wa("Brush palette"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(wa("Right"),
'</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut-alternate">').concat(wa("or"),'</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ').concat(wa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(wa("Adjust brush sliders more precisely"),
'\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(wa("Drawing canvas"),'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(wa("Middle"),
'</span> <span class="chickenpaint-shortcut-alternate">').concat(wa("or"),'</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Space</span> + <span class="fa icon-mouse-pointer"></span> ').concat(wa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(wa("Move the canvas around"),'\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">R</span> + <span class="fa icon-mouse-pointer"></span> ').concat(wa("Left"),
"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(wa("Rotate the canvas"),'\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(wa("Right"),'</span> <span class="chickenpaint-shortcut-alternate">').concat(wa("or"),
'</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa icon-mouse-pointer"></span> ').concat(wa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(wa("Sample the color under the cursor"),'\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>').concat(wa("Layers palette"),
'</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(wa("Double click"),'</span> <span class="chickenpaint-shortcut-alternate">').concat(wa("or"),'</span> <span class="chickenpaint-shortcut"><span class="fa icon-mouse-pointer"></span> ').concat(wa("Right"),
"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(wa("Rename layer"),'\n                                                </dd>\n                                                <dt>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa icon-mouse-pointer"></span> ').concat(wa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(wa("Toggle mask enable/disable"),
'\n                                                </dd>\n                                                <dt>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa icon-mouse-pointer"></span> ').concat(wa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(wa("Toggle mask View"),'\n                                                </dd>\n\t\t\t\t\t\t\t\t\t\t\t\t<dt>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">').concat(Vl,
'</span> + <span class="fa icon-mouse-pointer"></span> ').concat(wa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(wa("Apply layer mask"),'\n                                                </dd>\n\t\t\t\t\t\t\t\t\t\t\t\t<dt>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span></span> +\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">').concat(Vl,
'</span> + <span class="fa icon-mouse-pointer"></span> ').concat(wa("Left"),"</span>\n                                                </dt>\n                                                <dd>\n                                                    ").concat(wa("Delete layer mask"),"\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            "));
c[0].addEventListener("hidden.bs.modal",function(b){c.remove()});var d=new bootstrap.Modal(c[0]);a.appendChild(c[0]);this.show=function(){d.show()}}function Np(a,c){var d=fa(ta)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat(wa("Box blur"),'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <form>\n                                <div class="form-group">\n                                    <label>').concat(wa("Blur amount (pixels)"),
'</label>\n                                    <input type="number" class="form-control chickenpaint-blur-amount" value="3">\n                                </div>\n                                <div class="form-group">\n                                    <label>').concat(wa("Iterations (1-8, larger gives smoother blur)"),'</label>\n                                    <input type="number" class="form-control chickenpaint-blur-iterations" value="1" min="1" max="8">\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">').concat(wa("Cancel"),
'</button>\n                            <button type="button" class="btn btn-primary chickenpaint-apply-box-blur" data-bs-dismiss="modal">').concat(wa("Ok"),"</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")),b=fa(ta)(".chickenpaint-blur-amount",d),f=fa(ta)(".chickenpaint-blur-iterations",d),k=fa(ta)(".chickenpaint-apply-box-blur",d),l=new bootstrap.Modal(d[0]);this.show=function(){var h=document.getElementById("chickenpaint-main-menu-content");
h&&h.classList.contains("show")&&(new bootstrap.Collapse(h,{toggle:!1})).hide();l.show()};k[0].addEventListener("click",function(h){h=Math.max(parseInt(b.val(),10),1);var e=Math.min(Math.max(parseInt(f.val(),10),1),8);c.getArtwork().boxBlur(h,h,e);l.hide()});d[0].addEventListener("hidden.bs.modal",function(h){d[0].remove()});d[0].addEventListener("shown.bs.modal",function(h){b[0].focus()});d[0].addEventListener("keydown",function(h){"Enter"===h.key&&d.hasClass("show")&&(k[0].click(),h.preventDefault())});
a.appendChild(d[0])}function Op(a){var c=fa(ta)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing tablet support</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p class="chickenpaint-tablet-there-are-two-options">\n                                There are two ways you could use your tablet\'s pen pressure support with ChickenPaint.\n                            </p>\n                            <div class="chickenpaint-tablet-support chickenpaint-wacom-support">\n                                <h5>\n                                    Plugin for Wacom tablets\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-firefox"></span>\n                                        Firefox (32-bit only)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-safari"></span>\n                                        Safari\n                                    </div>\n                                        <div class="chickenpaint-supported-browser">\n                                        <span class="icon-opera"></span>\n                                        Opera\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-installed">\n                                    The plugin for Wacom tablets doesn\'t seem to be installed in your browser yet.\n                                </p>\n                                <p class="chickenpaint-not-installed">\n                                    Please make sure that you\'ve installed the latest drivers for your tablet from the \n                                    <a href="http://www.wacom.com/en-us/support/product-support/drivers" target="_blank">Wacom drivers page</a>,\n                                    then restart your browser.\n                                </p>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t support the Wacom tablet plugin, please \n                                    try one of the browsers listed above instead.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    The Wacom tablet plugin is installed and working.\n                                </p>\n                            </div>\n                            <div class="chickenpaint-tablet-support chickenpaint-pointerevents-support">\n                                <h5>\n                                    Built-in support for most tablets.\n                                    <small>macOS, Windows 10 or newer</small>\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n\t\t\t\t\t\t\t\t\t<div class="chickenpaint-supported-browser">\n\t\t\t\t\t\t\t\t\t<span class="icon-chrome"></span>\n\t\t\t\t\t\t\t\t\t\tChrome\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="chickenpaint-supported-browser">\n                                        <span class="icon-edge"></span>\n                                        Edge (Windows 10)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="icon-firefox"></span>\n                                        Firefox (<a href="https://github.com/satopian/ChickenPaint_Be/blob/main/help/Firefox%20pressure%20support.md" target="_blank" rel="noopener">help <i class="fa icon-external-link-alt"></i></a>)\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t have built-in support for drawing tablets, please try\n                                    one of the other browsers listed above.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    Your browser has built-in support for drawing tablets!\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n       '),
d=fa(ta)(".chickenpaint-wacom-support",c),b=fa(ta)(".chickenpaint-pointerevents-support",c),f=fa(ta)(".chickenpaint-tablet-there-are-two-options",c),k=ve.getRef().isTabletPresent(),l=!!window.hasNativePointerEvents;d.toggleClass("supported",k);k?(b.hide(),f.hide()):((/Chrome/i.test(navigator.userAgent)&&!/OPR/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent))&&d.addClass("not-supported"),l&&(d.hide(),f.hide()));b.toggleClass("supported",l);b.toggleClass("not-supported",
!l);c[0].addEventListener("hidden.bs.modal",function(e){c.remove()});var h=new bootstrap.Modal(c[0]);a.appendChild(c[0]);this.show=function(){h.show()}}function Pp(a,c){var d=fa(ta)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat(wa("Grid options"),'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <form>\n                                <div class="form-group">\n                                    <label>').concat(wa("Grid size"),
'</label>\n                                    <input type="number" class="form-control chickenpaint-grid-size" value="" autofocus>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">').concat(wa("Cancel"),'</button>\n                            <button type="button" class="btn btn-primary chickenpaint-apply-grid-settings" data-bs-dismiss="modal">').concat(wa("Ok"),
"</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")),b=fa(ta)(".chickenpaint-grid-size",d),f=fa(ta)(".chickenpaint-apply-grid-settings",d),k=new bootstrap.Modal(d[0]);this.show=function(){var l=document.getElementById("chickenpaint-main-menu-content");l&&l.classList.contains("show")&&(new bootstrap.Collapse(l,{toggle:!1})).hide();k.show()};b.val(c.getGridSize());d[0].addEventListener("hidden.bs.modal",function(l){d[0].remove()});
f[0].addEventListener("click",function(l){l=parseInt(b.val(),10);c.setGridSize(l);bootstrap.Modal.getInstance(d[0]).hide()});d[0].addEventListener("shown.bs.modal",function(l){b[0].focus()});d[0].addEventListener("keydown",function(l){"Enter"===l.key&&(l.preventDefault(),f[0].click())});a.appendChild(d[0])}function wh(a,c,d){var b=fa(ta)('<div class="modal fade chickenpaint-send-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content" data-stage="saving">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat(wa("Saving drawing..."),
'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p class="chickenpaint-saving-progress-message">').concat(wa("Preparing your drawing to be saved, please wait..."),'</p>\n                            <pre class="chickenpaint-saving-error-message pre-scrollable"></pre>\n                            <div class="progress">\n                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>\n                            </div>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light chickenpaint-send-cancel" data-bs-dismiss="modal">').concat(wa("Cancel"),
'</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-not-previously-posted" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">').concat(wa("Drawing saved!"),'</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>').concat(wa("Your drawing has been saved, would you like to post it to the forum now?"),
'</p>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-bs-dismiss="modal">').concat(wa("Yes, post it now"),'</button>\n                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-bs-dismiss="modal">').concat(wa("No, keep drawing"),'</button>\n                            <button type="button" class="btn btn-light chickenpaint-exit" data-bs-dismiss="modal">').concat(wa("No, quit and I'll finish it later"),
'</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-already-posted" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing saved!</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>').concat(wa("Your drawing has been saved, would you like to view it on the forum now?"),
'</p>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-bs-dismiss="modal">').concat(wa("Yes, view the post"),'</button>\n                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-bs-dismiss="modal">').concat(wa("No, keep drawing"),'</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-redirect" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing saved!</h5>\n                            <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="btn btn-close">\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>').concat(wa("Your drawing has been saved, redirecting you to view your new post now..."),
"</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")),f=fa(ta)(".chickenpaint-saving-progress-message",b),k=fa(ta)(".chickenpaint-saving-error-message",b),l=fa(ta)(".progress-bar",b),h=this;d.on("savingProgress",function(g,p){g*=100;f.text(p);fa(ta)(l).attr("aria-valuenow",g).css("width",g+"%")});d.on("savingComplete",function(){fa(ta)(".modal-content[data-stage='saving']",b).hide();a.isActionSupported("CPContinue")?a.isActionSupported("CPExit")?
fa(ta)(".modal-content[data-stage='success-not-previously-posted']",b).show():fa(ta)(".modal-content[data-stage='success-already-posted']",b).show():fa(ta)(".modal-content[data-stage='success-redirect']",b).show()});d.on("savingFailure",function(g){l.addClass("progress-bar-danger");var p=wa("Sorry, your drawing could not be saved, please try again later.");g&&(0<(g=g.replace(/^CHIBIERROR\s*/,"")).length&&(p+="<br><br>".concat(wa("The error returned from the server was"),":"),k.text(g).show()),f.html(p))});
fa(ta)(".chickenpaint-post-drawing",b).on("click",function(){a.actionPerformed({action:"CPPost"})});fa(ta)(".chickenpaint-exit",b).toggle(a.isActionSupported("CPExit")).on("click",function(){alert("When you want to come back and finish your drawing, just click the 'new drawing' button again and you can choose to continue this drawing.");a.actionPerformed({action:"CPExit"})});fa(ta)(".chickenpaint-send-cancel",b).on("click",function(){d.cancel()});b[0].addEventListener("hidden.bs.modal",function(g){b.remove()});
b.appendTo(c);var e=new bootstrap.Modal(b[0]);this.show=function(){e.show();h.emitEvent("shown")}}function Ba(a){function c(V){this.palName=V}function d(V){this.toolNum=V}function b(V){this.modeNum=V}function f(V){switch(O=V==ud.EDITING_MODE_IMAGE?Ba.COLOR_MODE_RGB:Ba.COLOR_MODE_GREYSCALE,z.emitEvent("colorModeChange",[V==ud.EDITING_MODE_IMAGE?"rgb":"greyscale"]),O){case Ba.COLOR_MODE_RGB:var Na=G.clone();break;case Ba.COLOR_MODE_GREYSCALE:Na=new bc(bc.greyToRGB(L))}z.artwork.setForegroundColor(Na.getRgb());
z.emitEvent("colorChange",[Na])}function k(){z.emitEvent("toolChange",[N,Da[N]])}function l(V){ea!=V&&(V==Ba.M_TRANSFORM&&(Y=ea),ea=V,z.emitEvent("modeChange",[ea]))}function h(V){l(Ba.M_DRAW);N=V;z.artwork.setBrush(Da[V]);k()}function e(V,Na){p&&(p.addEventListener("dblclick",function(ya){ya.preventDefault();ya.stopPropagation()}),z.artwork.on("editModeChanged",f),r=new uh(z,p),z.emitEvent("fullScreen",[qa]),z.emitEvent("smallScreen",[ha]),La.load(),h(Ba.T_PEN),r.arrangePalettes(),V&&r.setSwatches(V),
Na&&r.setRotation90(Na),ve.getRef().detectTablet(),function(ya){var wb=ya in window;wb||(wb=document.createElement("div"),wb.setAttribute(ya,"return;"),wb="function"==typeof wb[ya]);return wb}("onbeforeunload")?window.addEventListener("beforeunload",function(ya){if(z.artwork.getHasUnsavedChanges())return ya.preventDefault(),"Your drawing has unsaved changes!"}):fa(ta)("a").on("click",function(ya){if("#"!=this.getAttribute("href")&&z.artwork.getHasUnsavedChanges())return confirm("Your drawing has unsaved changes! Are you sure to want to navigate away?")}),
z.artwork.on("unsavedChanges",function(ya){a.allowMultipleSends&&z.emitEvent("unsavedChanges",[ya])}))}var g=this;!function(){try{if("undefined"!=typeof navigator){var V=navigator.languages;Array.isArray(V)||(V=[V]);var Na=!0,ya=!1,wb=void 0;try{for(var ib,Tb=V[Symbol.iterator]();!(Na=(ib=Tb.next()).done);Na=!0){var Fb=ib.value,Sa=/^(..)([-_].+)?$/.exec(Fb);if(Sa){if(Sa[1]=Sa[1].toLowerCase(),Sa[1]in Vi){Ui(Fb);break}if("en"===Sa[1]){Ui("en");break}}}}catch(sc){ya=!0,wb=sc}finally{try{Na||null==Tb.return||
Tb.return()}finally{if(ya)throw wb;}}}}catch(sc){console.error(sc)}}();a.language&&Ui(a.language);var p=a.uiElem;document.addEventListener("keydown",function(V){((V.ctrlKey||V.metaKey)&&"+;=-shro".split("").includes(V.key.toLowerCase())||"Enter"===V.key)&&V.preventDefault()});p.addEventListener("contextmenu",function(V){V.preventDefault();V.stopPropagation()},{passive:!1});var m,n,r,u,w,z=this,G=new bc(0),L=255,O=Ba.COLOR_MODE_RGB,N=Ba.T_PENCIL,ea=Ba.M_DRAW,Y=ea,ka=[4278190080,4294967295],ha=!1,qa=
!1,Da=((m=Array(Ba.T_MAX))[Ba.T_PENCIL]=new Pa({toolNb:Ba.T_PENCIL,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Pa.TIP_ROUND_AA,brushMode:Pa.BRUSH_MODE_PAINT,paintMode:Pa.PAINT_MODE_OPACITY}),m[Ba.T_ERASER]=new Pa({toolNb:Ba.T_ERASER,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!1,tip:Pa.TIP_ROUND_AA,brushMode:Pa.BRUSH_MODE_ERASE,paintMode:Pa.PAINT_MODE_OPACITY}),m[Ba.T_PEN]=new Pa({toolNb:Ba.T_PEN,size:2,alpha:128,isAA:!0,
minSpacing:.5,spacing:.05,pressureSize:!0,pressureAlpha:!1,tip:Pa.TIP_ROUND_AA,brushMode:Pa.BRUSH_MODE_PAINT,paintMode:Pa.PAINT_MODE_FLOW,alphaScale:.5}),m[Ba.T_SOFTERASER]=new Pa({toolNb:Ba.T_SOFTERASER,size:16,alpha:64,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Pa.TIP_ROUND_AIRBRUSH,brushMode:Pa.BRUSH_MODE_ERASE,paintMode:Pa.PAINT_MODE_FLOW,alphaScale:.125}),m[Ba.T_AIRBRUSH]=new Pa({toolNb:Ba.T_AIRBRUSH,size:50,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,
pressureAlpha:!0,tip:Pa.TIP_ROUND_AIRBRUSH,brushMode:Pa.BRUSH_MODE_PAINT,paintMode:Pa.PAINT_MODE_FLOW,alphaScale:.125}),m[Ba.T_DODGE]=new Pa({toolNb:Ba.T_DODGE,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Pa.TIP_ROUND_AIRBRUSH,brushMode:Pa.BRUSH_MODE_DODGE,paintMode:Pa.PAINT_MODE_FLOW,alphaScale:.125}),m[Ba.T_BURN]=new Pa({toolNb:Ba.T_BURN,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Pa.TIP_ROUND_AIRBRUSH,brushMode:Pa.BRUSH_MODE_BURN,
paintMode:Pa.PAINT_MODE_FLOW,alphaScale:.125}),m[Ba.T_WATER]=new Pa({toolNb:Ba.T_WATER,size:30,alpha:70,isAA:!1,minSpacing:.5,spacing:.02,pressureSize:!1,pressureAlpha:!0,tip:Pa.TIP_ROUND_AA,brushMode:Pa.BRUSH_MODE_WATER,paintMode:Pa.PAINT_MODE_FLOW,alphaScale:.125,resat:.3,bleed:.6}),m[Ba.T_BLUR]=new Pa({toolNb:Ba.T_BLUR,size:20,alpha:255,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:Pa.TIP_ROUND_PIXEL,brushMode:Pa.BRUSH_MODE_BLUR,paintMode:Pa.PAINT_MODE_FLOW,alphaScale:.125}),
m[Ba.T_SMUDGE]=new Pa({toolNb:Ba.T_SMUDGE,size:20,alpha:128,isAA:!1,minSpacing:.5,spacing:.01,pressureSize:!1,pressureAlpha:!0,tip:Pa.TIP_ROUND_AIRBRUSH,brushMode:Pa.BRUSH_MODE_SMUDGE,paintMode:Pa.PAINT_MODE_FLOW,alphaScale:.125,resat:0,bleed:1}),m[Ba.T_BLENDER]=new Pa({toolNb:Ba.T_BLENDER,size:20,alpha:60,isAA:!1,minSpacing:.5,spacing:.1,pressureSize:!1,pressureAlpha:!0,tip:Pa.TIP_ROUND_AIRBRUSH,brushMode:Pa.BRUSH_MODE_OIL,paintMode:Pa.PAINT_MODE_FLOW,alphaScale:.125,resat:0,bleed:.07}),m),La=new Qp,
Ka={CPFullScreen:{action:function(){z.setFullScreen(!qa)},isSupported:function(){return!("disable"===a.fullScreenMode||"force"===a.fullScreenMode||!1===a.allowFullScreen)},modifies:{gui:!0}},CPZoomIn:{action:function(){n.zoomIn()},modifies:{gui:!0}},CPZoomOut:{action:function(){n.zoomOut()},modifies:{gui:!0}},CPZoom100:{action:function(){n.zoom100()},modifies:{gui:!0}},CPToolbarStyle:{action:function(){z.setToolbarStyle("new"===La.toolbarStyle?"old":"new")},modifies:{gui:!0}},CPUndo:{action:function(){z.artwork.undo()},
modifies:{document:!0},allowed:"isUndoAllowed"},CPRedo:{action:function(){z.artwork.redo()},modifies:{document:!0},allowed:"isRedoAllowed"},CPClearHistory:{action:function(){confirm(wa("You're about to clear the current Undo/Redo history.\nThis operation cannot be undone, are you sure you want to do that?"))&&z.artwork.clearHistory()},modifies:{document:!0}},CPPencil:new d(Ba.T_PENCIL),CPPen:new d(Ba.T_PEN),CPEraser:new d(Ba.T_ERASER),CPSoftEraser:new d(Ba.T_SOFTERASER),CPAirbrush:new d(Ba.T_AIRBRUSH),
CPDodge:new d(Ba.T_DODGE),CPBurn:new d(Ba.T_BURN),CPWater:new d(Ba.T_WATER),CPBlur:new d(Ba.T_BLUR),CPSmudge:new d(Ba.T_SMUDGE),CPBlender:new d(Ba.T_BLENDER),CPFloodFill:new b(Ba.M_FLOODFILL),CPGradientFill:new b(Ba.M_GRADIENTFILL),CPRectSelection:new b(Ba.M_RECT_SELECTION),CPMoveTool:new b(Ba.M_MOVE_TOOL),CPRotateCanvas:new b(Ba.M_ROTATE_CANVAS),CPPanCanvas:new b(Ba.M_PAN_CANVAS),CPColorPicker:new b(Ba.M_COLOR_PICKER),CPTransform:{action:function(){var V=z.artwork.getActiveLayer();null==z.artwork.transformAffineBegin()?
z.showLayerNotification(V,wa("Whoops! All of the selected pixels are transparent!"),"layer"):l(Ba.M_TRANSFORM)},modifies:{mode:!0},allowed:function(){var V=z.artwork.getActiveLayer();if(V.visible)if(0==V.alpha)z.showLayerNotification(V,wa("Whoops! This layer's opacity is currently 0%"),"opacity");else{if(null!=z.artwork.transformAffineBegin())return 0!=V.getEffectiveAlpha();z.showLayerNotification(V,wa("Whoops! All of the selected pixels are transparent!"),"layer")}else z.showLayerNotification(V,
wa("Whoops! This layer is currently hidden"),"layer")}},CPTransformAccept:{action:function(){ea==Ba.M_TRANSFORM&&(z.artwork.transformAffineFinish(),l(Y))},modifies:{mode:!0}},CPTransformReject:{action:function(){ea==Ba.M_TRANSFORM&&(z.artwork.transformAffineAbort(),l(Y))},modifies:{document:!0,mode:!0}},CPFreeHand:{action:function(){Da[N].strokeMode=Pa.STROKE_MODE_FREEHAND;k()},modifies:{tool:!0}},CPLine:{action:function(){Da[N].strokeMode=Pa.STROKE_MODE_LINE;k()},modifies:{tool:!0}},CPBezier:{action:function(){Da[N].strokeMode=
Pa.STROKE_MODE_BEZIER;k()},modifies:{tool:!0}},CPAbout:{action:function(){(new Lp(p)).show()},modifies:{}},CPShortcuts:{action:function(){(new Mp(p)).show()},modifies:{}},CPTabletSupport:{action:function(){(new Op(p)).show()},modifies:{}},CPLayerDuplicate:{action:function(){z.artwork.duplicateLayer()},modifies:{document:!0}},CPLayerMergeDown:{action:function(){z.artwork.mergeDown()},modifies:{document:!0},allowed:"isMergeDownAllowed"},CPGroupMerge:{action:function(){z.artwork.mergeGroup()},modifies:{document:!0},
allowed:"isMergeGroupAllowed"},CPLayerMergeAll:{action:function(){z.artwork.mergeAllLayers()},modifies:{document:!0},allowed:"isMergeAllLayersAllowed"},CPExpandLayerGroup:{action:function(V){z.artwork.expandLayerGroup(V.group,V.expand)},modifies:{document:!0}},CPFill:{action:function(){z.artwork.fill(4278190080|z.getCurColor().getRgb())},modifies:{document:!0},requiresDrawable:!0},CPClear:{action:function(){z.artwork.clear()},modifies:{document:!0},requiresDrawable:!0},CPSelectAll:{action:function(){z.artwork.rectangleSelection(z.artwork.getBounds());
n.repaintAll()},modifies:{document:!0}},CPDeselectAll:{action:function(){z.artwork.rectangleSelection(new Va(0,0,0,0));n.repaintAll()},modifies:{document:!0}},CPHFlip:{action:function(){z.artwork.hFlip()},modifies:{document:!0},requiresDrawable:!0},CPVFlip:{action:function(){z.artwork.vFlip()},modifies:{document:!0},requiresDrawable:!0},CPMNoise:{action:function(){z.artwork.monochromaticNoise()},modifies:{document:!0},requiresDrawable:!0},CPCNoise:{action:function(){z.artwork.colorNoise()},modifies:{document:!0},
allowed:"isColorNoiseAllowed"},CPFXBoxBlur:{action:function(){u||=new Np(p,z);u.show()},modifies:{document:!0},requiresDrawable:!0},CPFXInvert:{action:function(){z.artwork.invert()},modifies:{document:!0},requiresDrawable:!0},CPCut:{action:function(){z.artwork.cutSelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCutSelectionAllowed"},CPCopy:{action:function(){z.artwork.copySelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCopySelectionAllowed"},CPCopyMerged:{action:function(){z.artwork.copySelectionMerged()},
modifies:{document:!0},allowed:"isCopySelectionMergedAllowed"},CPPaste:{action:function(){z.artwork.pasteClipboard()},modifies:{document:!0},allowed:"isPasteClipboardAllowed"},CPToggleGrid:{action:function(V){n.showGrid(V.selected)},modifies:{gui:!0}},CPGridOptions:{action:function(){w||=new Pp(p,n);w.show()},modifies:{gui:!0}},CPLinearInterpolation:{action:function(V){n.setInterpolation(V.selected)},modifies:{gui:!0},isSupported:function(){return!!Ei(de(0,0).getContext("2d"))}},CPResetCanvasRotation:{action:function(){n.resetRotation()},
modifies:{gui:!0}},CPAddLayer:{action:function(){z.artwork.addLayer("layer")},modifies:{document:!0}},CPAddGroup:{action:function(){z.artwork.addLayer("group")},modifies:{document:!0}},CPAddLayerMask:{action:function(){z.artwork.addLayerMask()},modifies:{document:!0},allowed:"isAddLayerMaskAllowed"},CPApplyLayerMask:{action:function(){z.artwork.applyLayerMask(!0)},modifies:{document:!0},allowed:"isApplyLayerMaskAllowed"},CPRemoveLayerMask:{action:function(){z.artwork.removeLayerMask(!1)},modifies:{document:!0},
allowed:"isRemoveLayerMaskAllowed"},CPRemoveLayer:{action:function(){z.artwork.removeLayer()||alert(wa("Sorry, you can't remove the last remaining layer in the drawing."))},modifies:{document:!0},allowed:"isRemoveLayerAllowed"},CPCreateClippingMask:{action:function(){z.artwork.createClippingMask()},modifies:{document:!0},allowed:"isCreateClippingMaskAllowed"},CPReleaseClippingMask:{action:function(){z.artwork.releaseClippingMask()},modifies:{document:!0},allowed:"isReleaseClippingMaskAllowed"},CPRelocateLayer:{action:function(V){z.artwork.relocateLayer(V.layer,
V.toGroup,V.toIndex)},modifies:{document:!0}},CPSetActiveLayer:{action:function(V){V.mask&&V.layer.mask&&!V.layer.maskVisible&&z.artwork.setLayerMaskVisible(V.layer,!0);z.artwork.setActiveLayer(V.layer,V.mask);z.artwork.performIdleTasks()},modifies:{document:!0}},CPToggleMaskView:{action:function(){var V=z.artwork.toggleMaskView();V&&z.emitEvent("maskViewOpened",[V])},modifies:{gui:!0}},CPSetMaskVisible:{action:function(V){z.artwork.setLayerMaskVisible(V.layer,V.visible)},modifies:{layerProp:!0}},
CPSetLayerVisibility:{action:function(V){z.artwork.setLayerVisibility(V.layer,V.visible)},modifies:{layerProp:!0}},CPSetLayerName:{action:function(V){z.artwork.setLayerName(V.layer,V.name)},modifies:{layerProp:!0}},CPSetLayerBlendMode:{action:function(V){z.artwork.setLayerBlendMode(V.blendMode)},modifies:{layerProp:!0}},CPSetLayerAlpha:{action:function(V){z.artwork.setLayerAlpha(V.alpha)},modifies:{layerProp:!0}},CPSetLayerLockAlpha:{action:function(V){z.artwork.setLayerLockAlpha(V.lock)},modifies:{layerProp:!0}},
CPPalColor:new c("color"),CPPalBrush:new c("brush"),CPPalLayers:new c("layers"),CPPalStroke:new c("stroke"),CPPalSwatches:new c("swatches"),CPPalTool:new c("tool"),CPPalMisc:new c("misc"),CPPalTextures:new c("textures"),CPTogglePalettes:{action:function(){r.togglePalettes()},modifies:{gui:!0}},CPArrangePalettes:{action:function(){r.arrangePalettes()},modifies:{gui:!0}},CPSave:{action:function(){var V;(V=new ug({artwork:z.getArtwork(),rotation:n.getRotation90(),swatches:r.getSwatches()})).on("savingComplete",
function(){z.artwork.setHasUnsavedChanges(!1)});V.on("savingFailure",function(){alert(wa("Sorry, your drawing could not be saved, please try again later."))});V.save()},isSupported:function(){return!1!==a.allowDownload},modifies:{document:!0}},CPSend:{action:function(){!function(){if(z.isActionSupported("CPContinue")||confirm(wa("Are you sure you want to send your drawing to the server and finish drawing now?"))){var V=new ug({artwork:z.getArtwork(),rotation:n.getRotation90(),swatches:r.getSwatches(),
url:a.saveUrl}),Na=new wh(z,p,V);V.on("savingComplete",function(){z.artwork.setHasUnsavedChanges(!1);!z.isActionSupported("CPContinue")&&z.isActionSupported("CPPost")&&z.actionPerformed({action:"CPPost"})});V.on("savingFailure",function(){alert(wa("Sorry, your drawing could not be saved, please try again later."))});Na.on("shown",function(){V.save()});Na.show()}}()},isSupported:function(){return!!a.saveUrl},modifies:{document:!0}},CPPost:{action:function(){if("function"==typeof handleExit)return handleExit();
window.location=a.postUrl},isSupported:function(){return!!a.postUrl},modifies:{document:!0}},CPContinue:{action:function(){},isSupported:function(){return!!a.allowMultipleSends}},CPExit:{action:function(){window.location=a.exitUrl},isSupported:function(){return!!a.exitUrl},modifies:{}}};switch(c.prototype.action=function(V){r.showPalette(this.palName,V.selected)},c.prototype.modifies={gui:!0},d.prototype.action=function(){h(this.toolNum)},d.prototype.modifies={mode:!0,tool:!0},d.prototype.requiresDrawable=
!0,b.prototype.action=function(){l(this.modeNum)},b.prototype.modifies={mode:!0},this.callToolListeners=function(){k()},this.getArtwork=function(){return this.artwork},this.setCanvas=function(V){n=V},this.setTransformInterpolation=function(V){this.artwork.setTransformInterpolation(V)},this.setCurColor=function(V){switch(O){case Ba.COLOR_MODE_RGB:G.isEqual(V)||(G.copyFrom(V),this.artwork.setForegroundColor(V.getRgb()),this.emitEvent("colorChange",[V]));break;case Ba.COLOR_MODE_GREYSCALE:if(V=V.getValue(),
L!=V){var Na=bc.greyToRGB(V);this.artwork.setForegroundColor(Na);L=V;this.emitEvent("colorChange",[new bc(Na)])}}},this.getCurColor=function(){switch(O){case Ba.COLOR_MODE_RGB:return G.clone();case Ba.COLOR_MODE_GREYSCALE:return new bc(bc.greyToRGB(L))}},this.setCurGradient=function(V){ka=V.slice(0);this.emitEvent("gradientChange",[ka])},this.getCurGradient=function(){return ka.slice(0)},this.setBrushSize=function(V){Da[N].size=Math.max(1,Math.min(200,V));k()},this.getBrushSize=function(){return Da[N].size},
this.setAlpha=function(V){Da[N].alpha=V;k()},this.getAlpha=function(){return Da[N].alpha},this.getCurMode=function(){return ea},this.getCurTool=function(){return N},this.getBrushInfo=function(){return Da[N]},this.isActionSupported=function(V){if(Ka[V]){var Na=Vd(Ka[V].isSupported);return"function"==Na?Ka[V].isSupported():"undefined"==Na||Ka[V].isSupported}return!1},this.isActionAllowed=function(V){V=Ka[V];return!!V&&("function"==typeof V.allowed?V.allowed():"string"==typeof V.allowed?this.artwork[V.allowed]():
!V.requiresDrawable||this.artwork.isActiveLayerDrawable())},this.showLayerNotification=function(V,Na,ya){this.emitEvent("layerNotification",[V,Na,ya])},this.actionPerformed=function(V){if(null!=this.artwork&&null!=n){var Na=Ka[V.action];Na&&(ea==Ba.M_TRANSFORM&&(Na.modifies.document||Na.modifies.mode)&&-1==["CPTransformAccept","CPTransformReject"].indexOf(V.action)?"CPUndo"==V.action?Ka.CPTransformReject.action():"CPTransform"!=V.action&&(Na=new vh(p,this),Na.on("accept",this.actionPerformed.bind(this,
V)),Na.on("reject",this.actionPerformed.bind(this,V)),Na.show()):Na.action(V))}},this.setSmallScreenMode=function(V){ha!==V&&(ha=V,fa(ta)(p).toggleClass("chickenpaint-small-screen",ha),z.emitEvent("smallScreen",[ha]))},this.getSmallScreenMode=function(){return ha},this.setFullScreen=function(V){qa!==V&&(qa=V,fa(ta)("body").toggleClass("chickenpaint-full-screen",qa),fa(ta)(p).toggleClass("chickenpaint-full-screen",qa),qa&&0===fa(ta)("head meta[name=viewport]").length?(fa(ta)("head").append('<meta name="viewport" content="width=device-width,user-scalable=no">'),
setTimeout(function(){return z.emitEvent("fullScreen",[qa])},200)):z.emitEvent("fullScreen",[qa]))},this.isFullScreen=function(){return qa},this.setToolbarStyle=function(V){La.set("toolbarStyle",V);La.save()},this.getToolbarStyle=function(){return La.get("toolbarStyle")},this.getResourcesRoot=function(){return a.resourcesRoot},!function(){if(!((V=de(0,0)).getContext&&V.getContext("2d")&&"Uint8Array"in window))throw new Ba.UnsupportedBrowserException;var V;V=(-1!=navigator.userAgent.indexOf("iPad")||
-1!=navigator.userAgent.indexOf("iPod")||-1!=navigator.userAgent.indexOf("iPhone"))&&-1!=navigator.userAgent.indexOf(" OS 8_0 ");var Na=-1==navigator.userAgent.indexOf("CriOS")&&-1!=navigator.userAgent.indexOf("Safari");if(V&&Na)throw new Ba.UnsupportedBrowserException("You are using Safari 8.0.0, which is unable to upload drawings. That bug was fixed in the iOS 8.0.2 update, or in Chrome for iOS.");}(),p&&(("string"!=typeof document.body.style.flexBasis&&"string"!=typeof document.body.style.msFlexDirection||
/Presto/.test(navigator.userAgent))&&(p.className+=" no-flexbox"),p.className+=" chickenpaint chickenpaint-lang-"+Wi),a.resourcesRoot=a.resourcesRoot||"chickenpaint/",a.disableBootstrapAPI&&fa(ta)(document).off(".data-api"),this.setSmallScreenMode(!!("number"==typeof navigator.maxTouchPoints&&2<navigator.maxTouchPoints&&(820>=window.screen.width||820>=window.screen.height))),a.fullScreenMode){case "force":this.setFullScreen(!0);break;case "auto":this.setFullScreen(ha)}(La.on("toolbarStyle",function(V){return g.emitEvent("toolbarStyleChange",
[V])}),a.loadImageUrl||a.loadChibiFileUrl)?(m=new hh(a),new Cp(p,m,a.resourcesRoot),m.on("loadingComplete",function(V){z.artwork=V.layers||V.flat;e(V.swatches,a.rotation);a.onLoaded&&a.onLoaded(this)}),m.load()):(a.artwork?this.artwork=a.artwork:(this.artwork=new ud(a.canvasWidth||800,a.canvasHeight||600),this.artwork.addBackgroundLayer(),this.artwork.addDefaultLayer()),e(),a.onLoaded&&a.onLoaded(this))}var Wl,Pf,Qe,xh,yh,we,Xl,Yl,yg,Qf,Zl,Zi,Rf,$i,aj,bj,$l,cj,am,yd,Sf,zh,bm,cm,dm,dj,ej,Tf="undefined"!=
typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},uc={},Xa={},Ah=function(a){return a&&a.Math===Math&&a};Xa=Ah("object"==typeof globalThis&&globalThis)||Ah("object"==typeof window&&window)||Ah("object"==typeof self&&self)||Ah("object"==typeof Tf&&Tf)||function(){return this}()||Xa||Function("return this")();var mc={},nc={};mc=!(nc=function(a){try{return!!a()}catch(c){return!0}})(function(){return 7!==Object.defineProperty({},
1,{get:function(){return 7}})[1]});var vc={},Uf={};Uf=!nc(function(){var a=function(){}.bind();return"function"!=typeof a||a.hasOwnProperty("prototype")});var Bh=Function.prototype.call;vc=Uf?Bh.bind(Bh):function(){return Bh.apply(Bh,arguments)};var em={}.propertyIsEnumerable,fm=Object.getOwnPropertyDescriptor;var fj=fm&&!em.call({1:2},1)?function(a){a=fm(this,a);return!!a&&a.enumerable}:em;var Rd={};Rd=function(a,c){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:c}};var Wd={},
gj={},Xb={},gm=Function.prototype,hj=gm.call,Rp=Uf&&gm.bind.bind(hj,hj),zd={},Sp=(Xb=Uf?Rp:function(a){return function(){return hj.apply(a,arguments)}})({}.toString),Tp=Xb("".slice);zd=function(a){return Tp(Sp(a),8,-1)};var ij=Object,Up=Xb("".split);gj=nc(function(){return!ij("z").propertyIsEnumerable(0)})?function(a){return"String"===zd(a)?Up(a,""):ij(a)}:ij;var zg={},of={};of=function(a){return null==a};var Vp=TypeError;zg=function(a){if(of(a))throw new Vp("Can't call method on "+a);return a};Wd=
function(a){return gj(zg(a))};var Re={},jj={},wc={},Pb={},Ch={},kj="object"==typeof document&&document.all,Wp=(Ch={all:kj,IS_HTMLDDA:void 0===kj&&void 0!==kj}).all;Pb=Ch.IS_HTMLDDA?function(a){return"function"==typeof a||a===Wp}:function(a){return"function"==typeof a};var Xp=Ch.all;wc=Ch.IS_HTMLDDA?function(a){return"object"==typeof a?null!==a:Pb(a)||a===Xp}:function(a){return"object"==typeof a?null!==a:Pb(a)};var pf={},kd={};kd=function(a,c){var d;return 2>arguments.length?(d=Xa[a],Pb(d)?d:void 0):
Xa[a]&&Xa[a][c]};var xe={};xe=Xb({}.isPrototypeOf);var lj={},Xd={},Se={},qf={};qf="undefined"!=typeof navigator&&String(navigator.userAgent)||"";var hm=Xa.process,im=Xa.Deno,jm=hm&&hm.versions||im&&im.version,km=jm&&jm.v8;km&&(xh=0<(Qe=km.split("."))[0]&&4>Qe[0]?1:+(Qe[0]+Qe[1]));!xh&&qf&&(!(Qe=qf.match(/Edge\/(\d+)/))||74<=Qe[1])&&(Qe=qf.match(/Chrome\/(\d+)/))&&(xh=+Qe[1]);Se=xh;var Yp=Xa.String;lj=(Xd=!!Object.getOwnPropertySymbols&&!nc(function(){var a=Symbol("symbol detection");return!Yp(a)||
!(Object(a)instanceof Symbol)||!Symbol.sham&&Se&&41>Se}))&&!Symbol.sham&&"symbol"==Vd(Symbol.iterator);var Zp=Object;pf=lj?function(a){return"symbol"==(void 0===a?"undefined":Vd(a))}:function(a){var c=kd("Symbol");return Pb(c)&&xe(c.prototype,Zp(a))};var Ag={},Sd={},rf={},$p=String;rf=function(a){try{return $p(a)}catch(c){return"Object"}};var aq=TypeError;Sd=function(a){if(Pb(a))return a;throw new aq(rf(a)+" is not a function");};Ag=function(a,c){a=a[c];return of(a)?void 0:Sd(a)};var lm={},bq=TypeError;
lm=function(a,c){var d,b;if("string"===c&&Pb(d=a.toString)&&!wc(b=vc(d,a))||Pb(d=a.valueOf)&&!wc(b=vc(d,a))||"string"!==c&&Pb(d=a.toString)&&!wc(b=vc(d,a)))return b;throw new bq("Can't convert object to primitive value");};var Ac={},ye={},ld={};ld=!1;var ze={},Dh={},cq=Object.defineProperty;Dh=function(a,c){try{cq(Xa,a,{value:c,configurable:!0,writable:!0})}catch(d){Xa[a]=c}return c};ze=Xa["__core-js_shared__"]||Dh("__core-js_shared__",{});(ye=function(a,c){return ze[a]||(ze[a]=void 0!==c?c:{})})("versions",
[]).push({version:"3.33.2",mode:ld?"pure":"global",copyright:"\u00a9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.2/LICENSE",source:"https://github.com/zloirock/core-js"});var sb={},sf={},dq=Object;sf=function(a){return dq(zg(a))};var eq=Xb({}.hasOwnProperty);sb=Object.hasOwn||function(a,c){return eq(sf(a),c)};var tf={},fq=0,gq=Math.random(),hq=Xb((1).toString);tf=function(a){return"Symbol("+(void 0===a?"":a)+")_"+hq(++fq+gq,36)};var Vf=Xa.Symbol,
mj=ye("wks"),iq=lj?Vf.for||Vf:Vf&&Vf.withoutSetter||tf,jq=TypeError,kq=(Ac=function(a){return sb(mj,a)||(mj[a]=Xd&&sb(Vf,a)?Vf[a]:iq("Symbol."+a)),mj[a]})("toPrimitive");jj=function(a,c){if(!wc(a)||pf(a))return a;var d,b=Ag(a,kq);if(b){if(void 0===c&&(c="default"),d=vc(b,a,c),!wc(d)||pf(d))return d;throw new jq("Can't convert object to primitive value");}return void 0===c&&(c="number"),lm(a,c)};Re=function(a){a=jj(a,"string");return pf(a)?a:a+""};var nj={},Wf={},oj=Xa.document,lq=wc(oj)&&wc(oj.createElement);
Wf=function(a){return lq?oj.createElement(a):{}};nj=!mc&&!nc(function(){return 7!==Object.defineProperty(Wf("div"),"a",{get:function(){return 7}}).a});var mm=Object.getOwnPropertyDescriptor,mq=Pf=mc?mm:function(a,c){if(a=Wd(a),c=Re(c),nj)try{return mm(a,c)}catch(d){}if(sb(a,c))return Rd(!vc(fj,a,c),a[c])},Id={},pj={};pj=mc&&nc(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype});var Uc={},nq=String,oq=TypeError;Uc=function(a){if(wc(a))return a;
throw new oq(nq(a)+" is not an object");};var pq=TypeError,qj=Object.defineProperty,qq=Object.getOwnPropertyDescriptor;var Jd=mc?pj?function(a,c,d){if(Uc(a),c=Re(c),Uc(d),"function"==typeof a&&"prototype"===c&&"value"in d&&"writable"in d&&!d.writable){var b=qq(a,c);b&&b.writable&&(a[c]=d.value,d={configurable:"configurable"in d?d.configurable:b.configurable,enumerable:"enumerable"in d?d.enumerable:b.enumerable,writable:!1})}return qj(a,c,d)}:qj:function(a,c,d){if(Uc(a),c=Re(c),Uc(d),nj)try{return qj(a,
c,d)}catch(b){}if("get"in d||"set"in d)throw new pq("Accessors not supported");return"value"in d&&(a[c]=d.value),a};Id=mc?function(a,c,d){return Jd(a,c,Rd(1,d))}:function(a,c,d){return a[c]=d,a};var Qc={},Eh={},rj={},nm=Function.prototype,rq=mc&&Object.getOwnPropertyDescriptor,sj=sb(nm,"name"),sq=sj&&(!mc||mc&&rq(nm,"name").configurable),tq=(rj={EXISTS:sj,PROPER:sj&&"something"===function(){}.name,CONFIGURABLE:sq}).CONFIGURABLE,Fh={},uq=Xb(Function.toString);Pb(ze.inspectSource)||(ze.inspectSource=
function(a){return uq(a)});Fh=ze.inspectSource;var Ad={},om={},pm=Xa.WeakMap;om=Pb(pm)&&/native code/.test(String(pm));var Bg={},qm=ye("keys");Bg=function(a){return qm[a]||(qm[a]=tf(a))};var uf={};uf={};var tj=Xa.TypeError,vq=Xa.WeakMap;if(om||ze.state){var ie=ze.state||(ze.state=new vq);ie.get=ie.get;ie.has=ie.has;ie.set=ie.set;var uj=function(a,c){if(ie.has(a))throw new tj("Object already initialized");return c.facade=a,ie.set(a,c),c};var Gh=function(a){return ie.get(a)||{}};var vj=function(a){return ie.has(a)}}else{var Xf=
Bg("state");uf[Xf]=!0;uj=function(a,c){if(sb(a,Xf))throw new tj("Object already initialized");return c.facade=a,Id(a,Xf,c),c};Gh=function(a){return sb(a,Xf)?a[Xf]:{}};vj=function(a){return sb(a,Xf)}}var wq=(Ad={set:uj,get:Gh,has:vj,enforce:function(a){return vj(a)?Gh(a):uj(a,{})},getterFor:function(a){return function(c){var d;if(!wc(c)||(d=Gh(c)).type!==a)throw new tj("Incompatible receiver, "+a+" required");return d}}}).enforce,xq=Ad.get,rm=String,Hh=Object.defineProperty,yq=Xb("".slice),zq=Xb("".replace),
Aq=Xb([].join),Bq=mc&&!nc(function(){return 8!==Hh(function(){},"length",{value:8}).length}),Cq=String(String).split("String"),Dq=Eh=function(a,c,d){"Symbol("===yq(rm(c),0,7)&&(c="["+zq(rm(c),/^Symbol\(([^)]*)\)/,"$1")+"]");d&&d.getter&&(c="get "+c);d&&d.setter&&(c="set "+c);(!sb(a,"name")||tq&&a.name!==c)&&(mc?Hh(a,"name",{value:c,configurable:!0}):a.name=c);Bq&&d&&sb(d,"arity")&&a.length!==d.arity&&Hh(a,"length",{value:d.arity});try{d&&sb(d,"constructor")&&d.constructor?mc&&Hh(a,"prototype",{writable:!1}):
a.prototype&&(a.prototype=void 0)}catch(b){}d=wq(a);return sb(d,"source")||(d.source=Aq(Cq,"string"==typeof c?c:"")),a};Function.prototype.toString=Dq(function(){return Pb(this)&&xq(this).source||Fh(this)},"toString");Qc=function(a,c,d,b){b||={};var f=b.enumerable,k=void 0!==b.name?b.name:c;if(Pb(d)&&Eh(d,k,b),b.global)f?a[c]=d:Dh(c,d);else{try{b.unsafe?a[c]&&(f=!0):delete a[c]}catch(l){}f?a[c]=d:Jd(a,c,{value:d,enumerable:!1,configurable:!b.nonConfigurable,writable:!b.nonWritable})}return a};var Ih=
{},sm={},wj={},Yf={},Jh={},tm={},Eq=Math.ceil,Fq=Math.floor;tm=Math.trunc||function(a){a=+a;return(0<a?Fq:Eq)(a)};Jh=function(a){a=+a;return a!=a||0===a?0:tm(a)};var Gq=Math.max,Hq=Math.min;Yf=function(a,c){a=Jh(a);return 0>a?Gq(a+c,0):Hq(a,c)};var vf={},xj={},Iq=Math.min;xj=function(a){return 0<a?Iq(Jh(a),9007199254740991):0};vf=function(a){return xj(a.length)};var um=function(a){return function(c,d,b){var f;c=Wd(c);var k=vf(c);b=Yf(b,k);if(a&&d!=d)for(;k>b;){if((f=c[b++])!=f)return!0}else for(;k>
b;b++)if((a||b in c)&&c[b]===d)return a||b||0;return!a&&-1}},Jq={includes:um(!0),indexOf:um(!1)}.indexOf,vm=Xb([].push);wj=function(a,c){var d;a=Wd(a);var b=0,f=[];for(d in a)!sb(uf,d)&&sb(a,d)&&vm(f,d);for(;c.length>b;)sb(a,d=c[b++])&&(~Jq(f,d)||vm(f,d));return f};var Kh={},Kq=(Kh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ")).concat("length","prototype");var Cg=Object.getOwnPropertyNames||function(a){return wj(a,Kq)};var Lh=Object.getOwnPropertySymbols;
var Lq=Xb([].concat);sm=kd("Reflect","ownKeys")||function(a){var c=Cg(Uc(a)),d=Lh;return d?Lq(c,d(a)):c};Ih=function(a,c,d){for(var b=sm(c),f=Jd,k=Pf,l=0;l<b.length;l++){var h=b[l];sb(a,h)||d&&sb(d,h)||f(a,h,k(c,h))}};var Dg={},Mq=/#|\.prototype\./,Eg=function(a,c){a=Nq[Oq(a)];return a===Pq||a!==Qq&&(Pb(c)?nc(c):!!c)},Oq=Eg.normalize=function(a){return String(a).replace(Mq,".").toLowerCase()},Nq=Eg.data={},Qq=Eg.NATIVE="N",Pq=Eg.POLYFILL="P";Dg=Eg;uc=function(a,c){var d,b,f,k,l,h=a.target,e=a.global,
g=a.stat;if(d=e?Xa:g?Xa[h]||Dh(h,{}):(Xa[h]||{}).prototype)for(b in c){if(k=c[b],f=a.dontCallGetSet?(l=mq(d,b))&&l.value:d[b],!Dg(e?b:h+(g?".":"#")+b,a.forced)&&void 0!==f){if((void 0===k?"undefined":Vd(k))==(void 0===f?"undefined":Vd(f)))continue;Ih(k,f)}(a.sham||f&&f.sham)&&Id(k,"sham",!0);Qc(d,b,k,a)}};var Zf={};Zf=Array.isArray||function(a){return"Array"===zd(a)};var yj={},Rq=TypeError;yj=function(a){if(9007199254740991<a)throw Rq("Maximum allowed index exceeded");return a};var Mh={};Mh=function(a,
c,d){c=Re(c);c in a?Jd(a,c,Rd(0,d)):a[c]=d};var zj={},wm={},Aj={},Ae={},Nh={},Sq=Ac("toStringTag"),xm={};xm[Sq]="z";Nh="[object z]"===String(xm);var Tq=Ac("toStringTag"),Uq=Object,Vq="Arguments"===zd(function(){return arguments}());Ae=Nh?zd:function(a){var c;if(void 0===a)var d="Undefined";else{if(null===a)var b="Null";else{a:{var f=a=Uq(a);try{b=f[Tq];break a}catch(k){}b=void 0}b="string"==typeof(d=b)?d:Vq?zd(a):"Object"===(c=zd(a))&&Pb(a.callee)?"Arguments":c}d=b}return d};var ym=function(){},Wq=
[],zm=kd("Reflect","construct"),Bj=/^\s*(?:class|function)\b/,Xq=Xb(Bj.exec),Yq=!Bj.test(ym),Fg=function(a){if(!Pb(a))return!1;try{return zm(ym,Wq,a),!0}catch(c){return!1}},Am=function(a){if(!Pb(a))return!1;switch(Ae(a)){case "AsyncFunction":case "GeneratorFunction":case "AsyncGeneratorFunction":return!1}try{return Yq||!!Xq(Bj,Fh(a))}catch(c){return!0}};Am.sham=!0;Aj=!zm||nc(function(){var a;return Fg(Fg.call)||!Fg(Object)||!Fg(function(){a=!0})||a})?Am:Fg;var Zq=Ac("species"),Bm=Array;wm=function(a){var c;
return Zf(a)&&(c=a.constructor,Aj(c)&&(c===Bm||Zf(c.prototype))?c=void 0:wc(c)&&null===(c=c[Zq])&&(c=void 0)),void 0===c?Bm:c};zj=function(a,c){return new (wm(a))(0===c?0:c)};var Cm={},$q=Ac("species");Cm=function(a){return 51<=Se||!nc(function(){var c=[];return(c.constructor={})[$q]=function(){return{foo:1}},1!==c[a](Boolean).foo})};var Dm=Ac("isConcatSpreadable"),ar=!(51<=Se||!nc(function(){var a=[];return a[Dm]=!1,a.concat()[0]!==a}))||!Cm("concat");uc({target:"Array",proto:!0,arity:1,forced:ar},
{concat:function(a){var c,d=sf(this),b=zj(d,0),f=0;var k=-1;for(c=arguments.length;k<c;k++){var l=-1===k?d:arguments[k];var h=l;if(wc(h)){var e=h[Dm];h=void 0!==e?!!e:Zf(h)}else h=!1;if(h)for(e=vf(l),yj(f+e),h=0;h<e;h++,f++)h in l&&Mh(b,f,l[h]);else yj(f+1),Mh(b,f++,l)}return b.length=f,b}});var Em={};Em=Nh?{}.toString:function(){return"[object "+Ae(this)+"]"};Nh||Qc(Object.prototype,"toString",Em,{unsafe:!0});var je={},br=String;je=function(a){if("Symbol"===Ae(a))throw TypeError("Cannot convert a Symbol value to a string");
return br(a)};var Td={},Oh={};Oh=Object.keys||function(a){return wj(a,Kh)};var Fm=mc&&!pj?Object.defineProperties:function(a,c){Uc(a);var d,b=Wd(c);c=Oh(c);for(var f=c.length,k=0;f>k;)Jd(a,d=c[k++],b[d]);return a};var Ph={};Ph=kd("document","documentElement");var Gm=Bg("IE_PROTO"),Cj=function(){},Hm=function(a){a.write("<script>\x3c/script>");a.close();return a.parentWindow.Object},Qh=function(){try{yh=new ActiveXObject("htmlfile")}catch(d){}var a;if("undefined"!=typeof document){if(document.domain&&
yh)var c=Hm(yh);else c=Wf("iframe"),c=(c.style.display="none",Ph.appendChild(c),c.src="javascript:",(a=c.contentWindow.document).open(),a.write("<script>document.F=Object\x3c/script>"),a.close(),a.F);a=c}else a=Hm(yh);Qh=a;for(a=Kh.length;a--;)delete Qh.prototype[Kh[a]];return Qh()};uf[Gm]=!0;Td=Object.create||function(a,c){var d;return null!==a?(Cj.prototype=Uc(a),d=new Cj,Cj.prototype=null,d[Gm]=a):d=Qh(),void 0===c?d:Fm(d,c)};var Im=Cg,Jm={},cr=Array,dr=Math.max;Jm=function(a,c,d){var b=vf(a);
c=Yf(c,b);d=Yf(void 0===d?b:d,b);b=cr(dr(d-c,0));for(var f=0;c<d;c++,f++)Mh(b,f,a[c]);return b.length=f,b};var Km="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var Dj=function(a){if(Km&&"Window"===zd(a))try{var c=Im(a)}catch(d){c=Jm(Km)}else c=Im(Wd(a));return c};var $f={};$f=function(a,c,d){return d.get&&Eh(d.get,c,{getter:!0}),d.set&&Eh(d.set,c,{setter:!0}),Jd(a,c,d)};var Lm=Ac;var rd={},wf={};wf=Xa;var er=Jd;rd=function(a){var c=wf.Symbol||(wf.Symbol=
{});sb(c,a)||er(c,a,{value:Lm(a)})};var Ej={};Ej=function(){var a=kd("Symbol"),c=(a=a&&a.prototype)&&a.valueOf,d=Ac("toPrimitive");a&&!a[d]&&Qc(a,d,function(b){return vc(c,this)},{arity:1})};var ke={},fr=Jd,Mm=Ac("toStringTag");ke=function(a,c,d){a&&!d&&(a=a.prototype);a&&!sb(a,Mm)&&fr(a,Mm,{configurable:!0,value:c})};var xf={},Rh={},gr=(Rh=function(a){if("Function"===zd(a))return Xb(a)})(Rh.bind);xf=function(a,c){return Sd(a),void 0===c?a:Uf?gr(a,c):function(){return a.apply(c,arguments)}};var Nm=
Xb([].push),Te=function(a){var c=1===a,d=2===a,b=3===a,f=4===a,k=6===a,l=7===a,h=5===a||k;return function(e,g,p,m){var n,r,u=sf(e),w=gj(u);g=xf(g,p);p=vf(w);var z=0;m=m||zj;for(e=c?m(e,p):d||l?m(e,0):void 0;p>z;z++)if((h||z in w)&&(r=g(n=w[z],z,u),a))if(c)e[z]=r;else if(r)switch(a){case 3:return!0;case 5:return n;case 6:return z;case 2:Nm(e,n)}else switch(a){case 4:return!1;case 7:Nm(e,n)}return k?-1:b||f?f:e}},Sh={forEach:Te(0),map:Te(1),filter:Te(2),some:Te(3),every:Te(4),find:Te(5),findIndex:Te(6),
filterReject:Te(7)}.forEach,Bd=Bg("hidden"),hr=Ad.set,Om=Ad.getterFor("Symbol"),Ud=Object.prototype,ag=Xa.Symbol,Gg=ag&&ag.prototype,ir=Xa.RangeError,jr=Xa.TypeError,Fj=Xa.QObject,Pm=Pf,yf=Jd,Qm=Dj,kr=fj,Rm=Xb([].push),Be=ye("symbols"),Hg=ye("op-symbols"),lr=ye("wks"),Gj=!Fj||!Fj.prototype||!Fj.prototype.findChild,Sm=function(a,c,d){var b=Pm(Ud,c);b&&delete Ud[c];yf(a,c,d);b&&a!==Ud&&yf(Ud,c,b)},Hj=mc&&nc(function(){return 7!==Td(yf({},"a",{get:function(){return yf(this,"a",{value:7}).a}})).a})?Sm:
yf,Ij=function(a,c){var d=Be[a]=Td(Gg);return hr(d,{type:"Symbol",tag:a,description:c}),mc||(d.description=c),d},Th=function(a,c,d){a===Ud&&Th(Hg,c,d);Uc(a);c=Re(c);return(Uc(d),sb(Be,c))?(d.enumerable?(sb(a,Bd)&&a[Bd][c]&&(a[Bd][c]=!1),d=Td(d,{enumerable:Rd(0,!1)})):(sb(a,Bd)||yf(a,Bd,Rd(1,{})),a[Bd][c]=!0),Hj(a,c,d)):yf(a,c,d)},Kj=function(a,c){Uc(a);var d=Wd(c);return Sh(Oh(d).concat(Tm(d)),function(b){mc&&!vc(Jj,d,b)||Th(a,b,d[b])}),a},Jj=function(a){a=Re(a);var c=vc(kr,this,a);return(!(this===
Ud&&sb(Be,a))||!!sb(Hg,a))&&(!(c||!sb(this,a)||!sb(Be,a)||sb(this,Bd)&&this[Bd][a])||c)},Um=function(a,c){a=Wd(a);c=Re(c);if(a!==Ud||!sb(Be,c)||sb(Hg,c)){var d=Pm(a,c);return d&&sb(Be,c)&&!(sb(a,Bd)&&a[Bd][c])&&(d.enumerable=!0),d}},Vm=function(a){a=Qm(Wd(a));var c=[];return Sh(a,function(d){sb(Be,d)||sb(uf,d)||Rm(c,d)}),c},Tm=function(a){var c=a===Ud;a=Qm(c?Hg:Wd(a));var d=[];return Sh(a,function(b){sb(Be,b)&&(!c||sb(Ud,b))&&Rm(d,Be[b])}),d};Xd||(Gg=(ag=function(){if(xe(Gg,this))throw new jr("Symbol is not a constructor");
var a=arguments.length&&void 0!==arguments[0]?je(arguments[0]):void 0,c=tf(a),d=function(b){var f=void 0===this?Xa:this;f===Ud&&vc(d,Hg,b);sb(f,Bd)&&sb(f[Bd],c)&&(f[Bd][c]=!1);b=Rd(1,b);try{Hj(f,c,b)}catch(k){if(!(k instanceof ir))throw k;Sm(f,c,b)}};return mc&&Gj&&Hj(Ud,c,{configurable:!0,set:d}),Ij(c,a)}).prototype,Qc(Gg,"toString",function(){return Om(this).tag}),Qc(ag,"withoutSetter",function(a){return Ij(tf(a),a)}),fj=Jj,Jd=Th,Fm=Kj,Pf=Um,Cg=Dj=Vm,Lh=Tm,Lm=function(a){return Ij(Ac(a),a)},mc&&
($f(Gg,"description",{configurable:!0,get:function(){return Om(this).description}}),ld||Qc(Ud,"propertyIsEnumerable",Jj,{unsafe:!0})));uc({global:!0,constructor:!0,wrap:!0,forced:!Xd,sham:!Xd},{Symbol:ag});Sh(Oh(lr),function(a){rd(a)});uc({target:"Symbol",stat:!0,forced:!Xd},{useSetter:function(){Gj=!0},useSimple:function(){Gj=!1}});uc({target:"Object",stat:!0,forced:!Xd,sham:!mc},{create:function(a,c){return void 0===c?Td(a):Kj(Td(a),c)},defineProperty:Th,defineProperties:Kj,getOwnPropertyDescriptor:Um});
uc({target:"Object",stat:!0,forced:!Xd},{getOwnPropertyNames:Vm});Ej();ke(ag,"Symbol");uf[Bd]=!0;var Lj={};Lj=Xd&&!!Symbol.for&&!!Symbol.keyFor;var Mj=ye("string-to-symbol-registry"),mr=ye("symbol-to-string-registry");uc({target:"Symbol",stat:!0,forced:!Lj},{for:function(a){a=je(a);if(sb(Mj,a))return Mj[a];var c=kd("Symbol")(a);return Mj[a]=c,mr[c]=a,c}});var Wm=ye("symbol-to-string-registry");uc({target:"Symbol",stat:!0,forced:!Lj},{keyFor:function(a){if(!pf(a))throw TypeError(rf(a)+" is not a symbol");
if(sb(Wm,a))return Wm[a]}});var Uh={},Xm=Function.prototype,Ym=Xm.apply,Zm=Xm.call;Uh="object"==typeof Reflect&&Reflect.apply||(Uf?Zm.bind(Ym):function(){return Zm.apply(Ym,arguments)});var Ig={};Ig=Xb([].slice);var $m={},an=Xb([].push);$m=function(a){if(Pb(a))return a;if(Zf(a)){for(var c=a.length,d=[],b=0;b<c;b++){var f=a[b];"string"==typeof f?an(d,f):("number"==typeof f||"Number"===zd(f)||"String"===zd(f))&&an(d,je(f))}var k=d.length,l=!0;return function(h,e){if(l)return l=!1,e;if(Zf(this))return e;
for(var g=0;g<k;g++)if(d[g]===h)return e}}};var nr=String,Ue=kd("JSON","stringify"),Vh=Xb(/./.exec),bn=Xb("".charAt),or=Xb("".charCodeAt),pr=Xb("".replace),qr=Xb((1).toString),rr=/[\uD800-\uDFFF]/g,cn=/^[\uD800-\uDBFF]$/,dn=/^[\uDC00-\uDFFF]$/,en=!Xd||nc(function(){var a=kd("Symbol")("stringify detection");return"[null]"!==Ue([a])||"{}"!==Ue({a})||"{}"!==Ue(Object(a))}),fn=nc(function(){return'"\udf06\ud834"'!==Ue("\udf06\ud834")||'"\udead"'!==Ue("\udead")}),sr=function(a,c){var d=Ig(arguments),b=
$m(c);if(Pb(b)||void 0!==a&&!pf(a))return d[1]=function(f,k){if(Pb(b)&&(k=vc(b,this,nr(f),k)),!pf(k))return k},Uh(Ue,null,d)},tr=function(a,c,d){var b=bn(d,c-1);c=bn(d,c+1);return Vh(cn,a)&&!Vh(dn,c)||Vh(dn,a)&&!Vh(cn,b)?"\\u"+qr(or(a,0),16):a};Ue&&uc({target:"JSON",stat:!0,arity:3,forced:en||fn},{stringify:function(a,c,d){var b=Ig(arguments);b=Uh(en?sr:Ue,null,b);return fn&&"string"==typeof b?pr(b,rr,tr):b}});var ur=!Xd||nc(function(){Lh(1)});uc({target:"Object",stat:!0,forced:ur},{getOwnPropertySymbols:function(a){var c=
Lh;return c?c(sf(a)):[]}});rd("asyncIterator");var Ce=Xa.Symbol,zf=Ce&&Ce.prototype;if(mc&&Pb(Ce)&&(!("description"in zf)||void 0!==Ce().description)){var gn={},Wh=function(){var a=1>arguments.length||void 0===arguments[0]?void 0:je(arguments[0]),c=xe(zf,this)?new Ce(a):void 0===a?Ce():Ce(a);return""===a&&(gn[c]=!0),c};Ih(Wh,Ce);Wh.prototype=zf;zf.constructor=Wh;var vr="Symbol(description detection)"===String(Ce("description detection")),wr=Xb(zf.valueOf),xr=Xb(zf.toString),yr=/^Symbol\((.*)\)[^)]+$/,
zr=Xb("".replace),Ar=Xb("".slice);$f(zf,"description",{configurable:!0,get:function(){var a=wr(this);if(sb(gn,a))return"";a=xr(a);a=vr?Ar(a,7,-1):zr(a,yr,"$1");return""===a?void 0:a}});uc({global:!0,constructor:!0,forced:!0},{Symbol:Wh})}rd("hasInstance");rd("isConcatSpreadable");rd("iterator");rd("match");rd("matchAll");rd("replace");rd("search");rd("species");rd("split");rd("toPrimitive");Ej();rd("toStringTag");ke(kd("Symbol"),"Symbol");rd("unscopables");ke(Xa.JSON,"JSON",!0);ke(Math,"Math",!0);
uc({global:!0},{Reflect:{}});ke(Xa.Reflect,"Reflect",!0);wf.Symbol;var Nj={};Nj={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,
StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};var hn={},Oj=Wf("span").classList,jn=Oj&&Oj.constructor&&Oj.constructor.prototype;hn=jn===Object.prototype?void 0:jn;var bg={},Jg={},Br=Jd,Pj=Ac("unscopables"),Qj=Array.prototype;void 0===Qj[Pj]&&Br(Qj,Pj,{configurable:!0,value:Td(null)});Jg=function(a){Qj[Pj][a]=!0};var Ve={};Ve={};var Cr=Jd,Xh={},kn={},Rj={},le={},ln={};ln=!nc(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype});
var mn=Bg("IE_PROTO"),Sj=Object,Dr=Sj.prototype;le=ln?Sj.getPrototypeOf:function(a){a=sf(a);if(sb(a,mn))return a[mn];var c=a.constructor;return Pb(c)&&a instanceof c?c.prototype:a instanceof Sj?Dr:null};var Tj=Ac("iterator"),nn=!1;[].keys&&("next"in(Yl=[].keys())?(Xl=le(le(Yl)))!==Object.prototype&&(we=Xl):nn=!0);!wc(we)||nc(function(){var a={};return we[Tj].call(a)!==a})?we={}:ld&&(we=Td(we));Pb(we[Tj])||Qc(we,Tj,function(){return this});var Er=(Rj={IteratorPrototype:we,BUGGY_SAFARI_ITERATORS:nn}).IteratorPrototype,
Fr=function(){return this};kn=function(a,c,d,b){c+=" Iterator";return a.prototype=Td(Er,{next:Rd(+!b,d)}),ke(a,c,!1,!0),Ve[c]=Fr,a};var ed={},on={};on=function(a,c,d){try{return Xb(Sd(Object.getOwnPropertyDescriptor(a,c)[d]))}catch(b){}};var pn={},Gr=String,Hr=TypeError;pn=function(a){if("object"==typeof a||Pb(a))return a;throw new Hr("Can't set "+Gr(a)+" as a prototype");};ed=Object.setPrototypeOf||("__proto__"in{}?function(){var a,c=!1,d={};try{(a=on(Object.prototype,"__proto__","set"))(d,[]),c=
d instanceof Array}catch(b){}return function(b,f){return Uc(b),pn(f),c?a(b,f):b.__proto__=f,b}}():void 0);var Ir=rj.PROPER,Jr=rj.CONFIGURABLE,qn=Rj.IteratorPrototype,Yh=Rj.BUGGY_SAFARI_ITERATORS,Kg=Ac("iterator"),rn=function(){return this};Xh=function(a,c,d,b,f,k,l){kn(d,c,b);var h,e,g;b=function(z){if(z===f&&u)return u;if(!Yh&&z&&z in n)return n[z];switch(z){case "keys":case "values":case "entries":return function(){return new d(this,z)}}return function(){return new d(this)}};var p=c+" Iterator",
m=!1,n=a.prototype,r=n[Kg]||n["@@iterator"]||f&&n[f],u=!Yh&&r||b(f),w="Array"===c&&n.entries||r;if(w&&(h=le(w.call(new a)))!==Object.prototype&&h.next&&(ld||le(h)===qn||(ed?ed(h,qn):Pb(h[Kg])||Qc(h,Kg,rn)),ke(h,p,!0,!0),ld&&(Ve[p]=rn)),Ir&&"values"===f&&r&&"values"!==r.name&&(!ld&&Jr?Id(n,"name","values"):(m=!0,u=function(){return vc(r,this)})),f)if(e={values:b("values"),keys:k?u:b("keys"),entries:b("entries")},l)for(g in e)!Yh&&!m&&g in n||Qc(n,g,e[g]);else uc({target:c,proto:!0,forced:Yh||m},e);
return(!ld||l)&&n[Kg]!==u&&Qc(n,Kg,u,{name:f}),Ve[c]=u,e};var Yd={};Yd=function(a,c){return{value:a,done:c}};var Kr=Ad.set,Lr=Ad.getterFor("Array Iterator");bg=Xh(Array,"Array",function(a,c){Kr(this,{type:"Array Iterator",target:Wd(a),index:0,kind:c})},function(){var a=Lr(this),c=a.target,d=a.index++;if(!c||d>=c.length)return a.target=void 0,Yd(void 0,!0);switch(a.kind){case "keys":return Yd(d,!1);case "values":return Yd(c[d],!1)}return Yd([d,c[d]],!1)},"values");var sn=Ve.Arguments=Ve.Array;if(Jg("keys"),
Jg("values"),Jg("entries"),!ld&&mc&&"values"!==sn.name)try{Cr(sn,"name",{value:"values"})}catch(a){}var Uj=Ac("iterator"),tn=Ac("toStringTag"),Vj=bg.values,un=function(a,c){if(a){if(a[Uj]!==Vj)try{Id(a,Uj,Vj)}catch(b){a[Uj]=Vj}if(a[tn]||Id(a,tn,c),Nj[c])for(var d in bg)if(a[d]!==bg[d])try{Id(a,d,bg[d])}catch(b){a[d]=bg[d]}}},Zh;for(Zh in Nj)un(Xa[Zh]&&Xa[Zh].prototype,Zh);un(hn,"DOMTokenList");var vn={};vn=function(a,c){wc(c)&&"cause"in c&&Id(a,"cause",c.cause)};var wn={},xn={},yn=Error,Mr=Xb("".replace),
Nr=String((new yn("zxcasd")).stack),zn=/\n\s*at [^:]*:[^\n]*/,Or=zn.test(Nr);xn=function(a,c){if(Or&&"string"==typeof a&&!yn.prepareStackTrace)for(;c--;)a=Mr(a,zn,"");return a};var An={};An=!nc(function(){var a=Error("a");return!("stack"in a)||(Object.defineProperty(a,"stack",Rd(1,7)),7!==a.stack)});var Bn=Error.captureStackTrace;wn=function(a,c,d,b){An&&(Bn?Bn(a,c):Id(a,"stack",xn(d,b)))};var We={},Cn={},Pr=Ac("iterator"),Qr=Array.prototype;Cn=function(a){return void 0!==a&&(Ve.Array===a||Qr[Pr]===
a)};var Dn={},Wj={},Rr=Ac("iterator");Wj=function(a){if(!of(a))return Ag(a,Rr)||Ag(a,"@@iterator")||Ve[Ae(a)]};var Sr=TypeError;Dn=function(a,c){var d=2>arguments.length?Wj(a):c;if(Sd(d))return Uc(vc(d,a));throw new Sr(rf(a)+" is not iterable");};var Xj={};Xj=function(a,c,d){var b;Uc(a);try{if(!(b=Ag(a,"return"))){if("throw"===c)throw d;return d}b=vc(b,a)}catch(k){var f=!0;b=k}if("throw"===c)throw d;if(f)throw b;return Uc(b),d};var Tr=TypeError,$h=function(a,c){this.stopped=a;this.result=c},En=$h.prototype;
We=function(a,c,d){var b,f=!(!d||!d.AS_ENTRIES);var k=!(!d||!d.IS_RECORD);var l=!(!d||!d.IS_ITERATOR);var h=!(!d||!d.INTERRUPTED),e=xf(c,d&&d.that),g=function(m){return p&&Xj(p,"normal",m),new $h(!0,m)};c=function(m){return f?(Uc(m),h?e(m[0],m[1],g):e(m[0],m[1])):h?e(m,g):e(m)};if(k)var p=a.iterator;else if(l)p=a;else{if(!(l=Wj(a)))throw new Tr(rf(a)+" is not iterable");if(Cn(l)){k=0;for(l=vf(a);l>k;k++)if((b=c(a[k]))&&xe(En,b))return b;return new $h(!1)}p=Dn(a,l)}for(a=k?a.next:p.next;!(k=vc(a,p)).done;){try{b=
c(k.value)}catch(m){Xj(p,"throw",m)}if("object"==typeof b&&b&&xe(En,b))return b}return new $h(!1)};var Fn={};Fn=function(a,c){return void 0===a?2>arguments.length?"":c:je(a)};var Ur=Ac("toStringTag"),ai=Error,Vr=[].push,cg=function(a,c){var d,b=xe(Yj,this);ed?d=ed(new ai,b?le(this):Yj):(d=b?this:Td(Yj),Id(d,Ur,"Error"));void 0!==c&&Id(d,"message",Fn(c));wn(d,cg,d.stack,1);2<arguments.length&&vn(d,arguments[2]);b=[];return We(a,Vr,{that:b}),Id(d,"errors",b),d};ed?ed(cg,ai):Ih(cg,ai,{name:!0});var Yj=
cg.prototype=Td(ai.prototype,{constructor:Rd(1,cg),message:Rd(1,""),name:Rd(1,"AggregateError")});uc({global:!0,constructor:!0,arity:2},{AggregateError:cg});var me={};me="process"===zd(Xa.process);var Zj={},Gn=Ac("species");Zj=function(a){a=kd(a);mc&&a&&!a[Gn]&&$f(a,Gn,{configurable:!0,get:function(){return this}})};var bi={},Wr=TypeError;bi=function(a,c){if(xe(c,a))return a;throw new Wr("Incorrect invocation");};var ci={},Hn={},Xr=TypeError;Hn=function(a){if(Aj(a))return a;throw new Xr(rf(a)+" is not a constructor");
};var Yr=Ac("species");ci=function(a,c){var d;a=Uc(a).constructor;return void 0===a||of(d=Uc(a)[Yr])?c:Hn(d)};var In={},Jn={},Zr=TypeError;Jn=function(a,c){if(a<c)throw new Zr("Not enough arguments");return a};var ak={};ak=/(?:ipad|iphone|ipod).*applewebkit/i.test(qf);var bk=Xa.setImmediate,ck=Xa.clearImmediate,$r=Xa.process,dk=Xa.Dispatch,as=Xa.Function,Kn=Xa.MessageChannel,bs=Xa.String,ek=0,Lg={};nc(function(){yg=Xa.location});var fk=function(a){if(sb(Lg,a)){var c=Lg[a];delete Lg[a];c()}},gk=function(a){return function(){fk(a)}},
Ln=function(a){fk(a.data)},Mn=function(a){Xa.postMessage(bs(a),yg.protocol+"//"+yg.host)};bk&&ck||(bk=function(a){Jn(arguments.length,1);var c=Pb(a)?a:as(a),d=Ig(arguments,1);return Lg[++ek]=function(){Uh(c,void 0,d)},Qf(ek),ek},ck=function(a){delete Lg[a]},me?Qf=function(a){$r.nextTick(gk(a))}:dk&&dk.now?Qf=function(a){dk.now(gk(a))}:Kn&&!ak?(Zi=(Zl=new Kn).port2,Zl.port1.onmessage=Ln,Qf=xf(Zi.postMessage,Zi)):Xa.addEventListener&&Pb(Xa.postMessage)&&!Xa.importScripts&&yg&&"file:"!==yg.protocol&&
!nc(Mn)?(Qf=Mn,Xa.addEventListener("message",Ln,!1)):Qf="onreadystatechange"in Wf("script")?function(a){Ph.appendChild(Wf("script")).onreadystatechange=function(){Ph.removeChild(this);fk(a)}}:function(a){setTimeout(gk(a),0)});var Nn=(In={set:bk,clear:ck}).set,di={},cs=Pf,hk=In.set,ik={},On=function(){this.tail=this.head=null};On.prototype={add:function(a){a={item:a,next:null};var c=this.tail;c?c.next=a:this.head=a;this.tail=a},get:function(){var a=this.head;if(a)return null===(this.head=a.next)&&
(this.tail=null),a.item}};ik=On;var Pn={};Pn=/ipad|iphone|ipod/i.test(qf)&&"undefined"!=typeof Pebble;var Qn={};Qn=/web0s(?!.*chrome)/i.test(qf);var Rn=Xa.MutationObserver||Xa.WebKitMutationObserver,Sn=Xa.document,Tn=Xa.process,ei=Xa.Promise,Un=cs(Xa,"queueMicrotask"),jk=Un&&Un.value;if(!jk){var fi=new ik,gi=function(){var a,c;for(me&&(a=Tn.domain)&&a.exit();c=fi.get();)try{c()}catch(d){throw fi.head&&Rf(),d;}a&&a.enter()};ak||me||Qn||!Rn||!Sn?!Pn&&ei&&ei.resolve?((bj=ei.resolve(void 0)).constructor=
ei,$l=xf(bj.then,bj),Rf=function(){$l(gi)}):me?Rf=function(){Tn.nextTick(gi)}:(hk=xf(hk,Xa),Rf=function(){hk(gi)}):($i=!0,aj=Sn.createTextNode(""),(new Rn(gi)).observe(aj,{characterData:!0}),Rf=function(){aj.data=$i=!$i});jk=function(a){fi.head||Rf();fi.add(a)}}di=jk;var Vn={};Vn=function(a,c){try{1==arguments.length?console.error(a):console.error(a,c)}catch(d){}};var dg={};dg=function(a){try{return{error:!1,value:a()}}catch(c){return{error:!0,value:c}}};var Vc={};Vc=Xa.Promise;var Wn={},Xn={};Wn=
!(Xn="object"==typeof Deno&&Deno&&"object"==typeof Deno.version)&&!me&&"object"==typeof window&&"object"==typeof document;var Yn=Vc&&Vc.prototype,ds=Ac("species"),Zn=!1,$n=Pb(Xa.PromiseRejectionEvent);var Af=Dg("Promise",function(){var a=Fh(Vc),c=a!==String(Vc);if(!c&&66===Se||ld&&(!Yn.catch||!Yn.finally))return!0;if(!Se||51>Se||!/native code/.test(a)){a=new Vc(function(b){b(1)});var d=function(b){b(function(){},function(){})};if((a.constructor={})[ds]=d,!(Zn=a.then(function(){})instanceof d))return!0}return!c&&
(Wn||Xn)&&!$n});var es=Zn;var fs=TypeError,gs=function(a){var c,d;this.promise=new a(function(b,f){if(void 0!==c||void 0!==d)throw new fs("Bad Promise constructor");c=b;d=f});this.resolve=Sd(c);this.reject=Sd(d)};var Xe=function(a){return new gs(a)};var kk=Ad.getterFor("Promise"),hs=Ad.set,eg=Vc&&Vc.prototype,fg=Vc,hi=eg,ao=Xa.TypeError,lk=Xa.document,mk=Xa.process,nk=Xe,is=nk,js=!!(lk&&lk.createEvent&&Xa.dispatchEvent),bo=function(a){var c;return!(!wc(a)||!Pb(c=a.then))&&c},co=function(a,c){var d,
b,f,k=c.value,l=1===c.state,h=l?a.ok:a.fail,e=a.resolve,g=a.reject,p=a.domain;try{h?(l||(2===c.rejection&&ks(c),c.rejection=1),!0===h?d=k:(p&&p.enter(),d=h(k),p&&(p.exit(),f=!0)),d===a.promise?g(new ao("Promise-chain cycle")):(b=bo(d))?vc(b,d,e,g):e(d)):g(k)}catch(m){p&&!f&&p.exit(),g(m)}},eo=function(a,c){a.notified||(a.notified=!0,di(function(){for(var d,b=a.reactions;d=b.get();)co(d,a);a.notified=!1;c&&!a.rejection&&ls(a)}))},fo=function(a,c,d){var b,f;js?((b=lk.createEvent("Event")).promise=c,
b.reason=d,b.initEvent(a,!1,!0),Xa.dispatchEvent(b)):b={promise:c,reason:d};!$n&&(f=Xa["on"+a])?f(b):"unhandledrejection"===a&&Vn("Unhandled promise rejection",d)},ls=function(a){vc(Nn,Xa,function(){var c,d=a.facade,b=a.value;if(1!==a.rejection&&!a.parent&&(c=dg(function(){me?mk.emit("unhandledRejection",b,d):fo("unhandledrejection",d,b)}),a.rejection=me||1!==a.rejection&&!a.parent?2:1,c.error))throw c.value;})},ks=function(a){vc(Nn,Xa,function(){var c=a.facade;me?mk.emit("rejectionHandled",c):fo("rejectionhandled",
c,a.value)})},gg=function(a,c,d){return function(b){a(c,b,d)}},hg=function(a,c,d){a.done||(a.done=!0,d&&(a=d),a.value=c,a.state=2,eo(a,!0))},ok=function(a,c,d){if(!a.done){a.done=!0;d&&(a=d);try{if(a.facade===c)throw new ao("Promise can't be resolved itself");var b=bo(c);b?di(function(){var f={done:!1};try{vc(b,c,gg(ok,f,a),gg(hg,f,a))}catch(k){hg(f,k,a)}}):(a.value=c,a.state=1,eo(a,!1))}catch(f){hg({done:!1},f,a)}}};if(Af&&(hi=(fg=function(a){bi(this,hi);Sd(a);vc(cj,this);var c=kk(this);try{a(gg(ok,
c),gg(hg,c))}catch(d){hg(c,d)}}).prototype,(cj=function(a){hs(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new ik,rejection:!1,state:0,value:void 0})}).prototype=Qc(hi,"then",function(a,c){var d=kk(this),b=nk(ci(this,fg));return d.parent=!0,b.ok=!Pb(a)||a,b.fail=Pb(c)&&c,b.domain=me?mk.domain:void 0,0===d.state?d.reactions.add(b):di(function(){co(b,d)}),b.promise}),am=function(){var a=new cj,c=kk(a);this.promise=a;this.resolve=gg(ok,c);this.reject=gg(hg,c)},Xe=nk=function(a){return a===
fg||void 0===a?new am(a):is(a)},!ld&&Pb(Vc)&&eg!==Object.prototype)){var ms=eg.then;es||Qc(eg,"then",function(a,c){var d=this;return(new fg(function(b,f){vc(ms,d,b,f)})).then(a,c)},{unsafe:!0});try{delete eg.constructor}catch(a){}ed&&ed(eg,hi)}uc({global:!0,constructor:!0,wrap:!0,forced:Af},{Promise:fg});ke(fg,"Promise",!1,!0);Zj("Promise");var Mg={},pk={},go=Ac("iterator"),ho=!1;try{var ns=0,io={next:function(){return{done:!!ns++}},return:function(){ho=!0}};io[go]=function(){return this};Array.from(io,
function(){throw 2;})}catch(a){}pk=function(a,c){if(!c&&!ho)return!1;var d=!1;try{c={},c[go]=function(){return{next:function(){return{done:d=!0}}}},a(c)}catch(b){}return d};Mg=Af||!pk(function(a){Vc.all(a).then(void 0,function(){})});uc({target:"Promise",stat:!0,forced:Mg},{all:function(a){var c=this,d=Xe(c),b=d.resolve,f=d.reject,k=dg(function(){var l=Sd(c.resolve),h=[],e=0,g=1;We(a,function(p){var m=e++,n=!1;g++;vc(l,c,p).then(function(r){!n&&(n=!0,h[m]=r,--g||b(h))},f)});--g||b(h)});return k.error&&
f(k.value),d.promise}});var jo=Vc&&Vc.prototype;if(uc({target:"Promise",proto:!0,forced:Af,real:!0},{catch:function(a){return this.then(void 0,a)}}),!ld&&Pb(Vc)){var ko=kd("Promise").prototype.catch;jo.catch!==ko&&Qc(jo,"catch",ko,{unsafe:!0})}uc({target:"Promise",stat:!0,forced:Mg},{race:function(a){var c=this,d=Xe(c),b=d.reject,f=dg(function(){var k=Sd(c.resolve);We(a,function(l){vc(k,c,l).then(d.resolve,b)})});return f.error&&b(f.value),d.promise}});uc({target:"Promise",stat:!0,forced:Af},{reject:function(a){var c=
Xe(this);return vc(c.reject,void 0,a),c.promise}});var ii={};ii=function(a,c){if(Uc(a),wc(c)&&c.constructor===a)return c;a=Xe(a);return(0,a.resolve)(c),a.promise};var os=kd("Promise"),ps=ld&&!Af;uc({target:"Promise",stat:!0,forced:ld||Af},{resolve:function(a){return ii(ps&&this===os?Vc:this,a)}});uc({target:"Promise",stat:!0,forced:Mg},{allSettled:function(a){var c=this,d=Xe(c),b=d.resolve,f=d.reject,k=dg(function(){var l=Sd(c.resolve),h=[],e=0,g=1;We(a,function(p){var m=e++,n=!1;g++;vc(l,c,p).then(function(r){!n&&
(n=!0,h[m]={status:"fulfilled",value:r},--g||b(h))},function(r){!n&&(n=!0,h[m]={status:"rejected",reason:r},--g||b(h))})});--g||b(h)});return k.error&&f(k.value),d.promise}});uc({target:"Promise",stat:!0,forced:Mg},{any:function(a){var c=this,d=kd("AggregateError"),b=Xe(c),f=b.resolve,k=b.reject,l=dg(function(){var h=Sd(c.resolve),e=[],g=0,p=1,m=!1;We(a,function(n){var r=g++,u=!1;p++;vc(h,c,n).then(function(w){u||m||(m=!0,f(w))},function(w){!u&&!m&&(u=!0,e[r]=w,--p||k(new d(e,"No one promise resolved")))})});
--p||k(new d(e,"No one promise resolved"))});return l.error&&k(l.value),b.promise}});var qk=Vc&&Vc.prototype,qs=!!Vc&&nc(function(){qk.finally.call({then:function(){}},function(){})});if(uc({target:"Promise",proto:!0,real:!0,forced:qs},{finally:function(a){var c=ci(this,kd("Promise")),d=Pb(a);return this.then(d?function(b){return ii(c,a()).then(function(){return b})}:a,d?function(b){return ii(c,a()).then(function(){throw b;})}:a)}}),!ld&&Pb(Vc)){var lo=kd("Promise").prototype.finally;qk.finally!==
lo&&Qc(qk,"finally",lo,{unsafe:!0})}var rs=Xb("".charAt),mo=Xb("".charCodeAt),ss=Xb("".slice),no=function(a){return function(c,d){var b,f;c=je(zg(c));d=Jh(d);var k=c.length;return 0>d||d>=k?a?"":void 0:55296>(b=mo(c,d))||56319<b||d+1===k||56320>(f=mo(c,d+1))||57343<f?a?rs(c,d):b:a?ss(c,d,d+2):(b-55296<<10)+(f-56320)+65536}},ts={codeAt:no(!1),charAt:no(!0)}.charAt,us=Ad.set,vs=Ad.getterFor("String Iterator");Xh(String,"String",function(a){us(this,{type:"String Iterator",string:je(a),index:0})},function(){var a,
c=vs(this),d=c.string,b=c.index;return b>=d.length?Yd(void 0,!0):(a=ts(d,b),c.index+=a.length,Yd(a,!1))});wf.Promise;var rk={},sk={},ws=Jd,ji={},tk={};tk=nc(function(){if("function"==typeof ArrayBuffer){var a=new ArrayBuffer(8);Object.isExtensible(a)&&Object.defineProperty(a,"a",{value:8})}});var ki=Object.isExtensible;ji=nc(function(){ki(1)})||tk?function(a){return!!wc(a)&&(!tk||"ArrayBuffer"!==zd(a))&&(!ki||ki(a))}:ki;var oo={};oo=!nc(function(){return Object.isExtensible(Object.preventExtensions({}))});
var po=!1,De=tf("meta"),xs=0,uk=function(a){ws(a,De,{value:{objectID:"O"+xs++,weakData:{}}})},ys=sk={enable:function(){ys.enable=function(){};po=!0;var a=Cg,c=Xb([].splice),d={};d[De]=1;a(d).length&&(Cg=function(b){b=a(b);for(var f=0,k=b.length;f<k;f++)if(b[f]===De){c(b,f,1);break}return b},uc({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Dj}))},fastKey:function(a,c){if(!wc(a))return"symbol"==(void 0===a?"undefined":Vd(a))?a:("string"==typeof a?"S":"P")+a;if(!sb(a,De)){if(!ji(a))return"F";
if(!c)return"E";uk(a)}return a[De].objectID},getWeakData:function(a,c){if(!sb(a,De)){if(!ji(a))return!0;if(!c)return!1;uk(a)}return a[De].weakData},onFreeze:function(a){return oo&&po&&ji(a)&&!sb(a,De)&&uk(a),a}};uf[De]=!0;var qo={};qo=function(a,c,d){var b,f;return ed&&Pb(b=c.constructor)&&b!==d&&wc(f=b.prototype)&&f!==d.prototype&&ed(a,f),a};rk=function(a,c,d){var b=-1!==a.indexOf("Map"),f=-1!==a.indexOf("Weak"),k=b?"set":"add",l=Xa[a],h=l&&l.prototype,e=l,g={},p=function(z){var G=Xb(h[z]);Qc(h,
z,"add"===z?function(L){return G(this,0===L?0:L),this}:"delete"===z?function(L){return(!f||!!wc(L))&&G(this,0===L?0:L)}:"get"===z?function(L){return f&&!wc(L)?void 0:G(this,0===L?0:L)}:"has"===z?function(L){return(!f||!!wc(L))&&G(this,0===L?0:L)}:function(L,O){return G(this,0===L?0:L,O),this})};if(Dg(a,!Pb(l)||!(f||h.forEach&&!nc(function(){(new l).entries().next()}))))e=d.getConstructor(c,a,b,k),sk.enable();else if(Dg(a,!0)){var m=new e,n=m[k](f?{}:-0,1)!==m,r=nc(function(){m.has(1)}),u=pk(function(z){new l(z)}),
w=!f&&nc(function(){for(var z=new l,G=5;G--;)z[k](G,G);return!z.has(-0)});u||((e=c(function(z,G){bi(z,h);z=qo(new l,z,e);return of(G)||We(G,z[k],{that:z,AS_ENTRIES:b}),z})).prototype=h,h.constructor=e);(r||w)&&(p("delete"),p("has"),b&&p("get"));(w||n)&&p(k);f&&h.clear&&delete h.clear}return g[a]=e,uc({global:!0,constructor:!0,forced:e!==l},g),ke(e,a),f||d.setStrong(e,a,b),e};var ro={},vk={};vk=function(a,c,d){for(var b in c)Qc(a,b,c[b],d);return a};var so=sk.fastKey,to=Ad.set,wk=Ad.getterFor;rk("Map",
function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},ro={getConstructor:function(a,c,d,b){a=a(function(e,g){bi(e,f);to(e,{type:c,index:Td(null),first:void 0,last:void 0,size:0});mc||(e.size=0);of(g)||We(g,e[b],{that:e,AS_ENTRIES:d})});var f=a.prototype,k=wk(c),l=function(e,g,p){var m,n,r=k(e),u=h(e,g);return u?u.value=p:(r.last=u={index:n=so(g,!0),key:g,value:p,previous:m=r.last,next:void 0,removed:!1},r.first||(r.first=u),m&&(m.next=u),mc?r.size++:e.size++,"F"!==n&&
(r.index[n]=u)),e},h=function(e,g){e=k(e);var p=so(g);if("F"!==p)return e.index[p];for(e=e.first;e;e=e.next)if(e.key===g)return e};return vk(f,{clear:function(){for(var e=k(this),g=e.index,p=e.first;p;)p.removed=!0,p.previous&&(p.previous=p.previous.next=void 0),delete g[p.index],p=p.next;e.first=e.last=void 0;mc?e.size=0:this.size=0},delete:function(e){var g=k(this);if(e=h(this,e)){var p=e.next,m=e.previous;delete g.index[e.index];e.removed=!0;m&&(m.next=p);p&&(p.previous=m);g.first===e&&(g.first=
p);g.last===e&&(g.last=m);mc?g.size--:this.size--}return!!e},forEach:function(e){for(var g,p=k(this),m=xf(e,1<arguments.length?arguments[1]:void 0);g=g?g.next:p.first;)for(m(g.value,g.key,this);g&&g.removed;)g=g.previous},has:function(e){return!!h(this,e)}}),vk(f,d?{get:function(e){return(e=h(this,e))&&e.value},set:function(e,g){return l(this,0===e?0:e,g)}}:{add:function(e){return l(this,e=0===e?0:e,e)}}),mc&&$f(f,"size",{configurable:!0,get:function(){return k(this).size}}),a},setStrong:function(a,
c,d){var b=c+" Iterator",f=wk(c),k=wk(b);Xh(a,c,function(l,h){to(this,{type:b,target:l,state:f(l),kind:h,last:void 0})},function(){for(var l=k(this),h=l.kind,e=l.last;e&&e.removed;)e=e.previous;return l.target&&(l.last=e=e?e.next:l.state.first)?"keys"===h?Yd(e.key,!1):"values"===h?Yd(e.value,!1):Yd([e.key,e.value],!1):(l.target=void 0,Yd(void 0,!0))},d?"entries":"values",!d,!0);Zj(c)}});wf.Map;rk("Set",function(a){return function(){return a(this,arguments.length?arguments[0]:void 0)}},ro);wf.Set;
var ig={},uo={};uo="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView;var vo=Ad.enforce,zs=Ad.get,li=Xa.Int8Array,xk=li&&li.prototype,wo=Xa.Uint8ClampedArray,xo=wo&&wo.prototype,ne=li&&le(li),Zd=xk&&le(xk),As=Object.prototype,yk=Xa.TypeError,yo=Ac("toStringTag"),zk=tf("TYPED_ARRAY_TAG"),Ee=uo&&!!ed&&"Opera"!==Ae(Xa.opera),zo=!1,Fe={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ak={BigInt64Array:8,BigUint64Array:8},
Ao=function(a){a=le(a);if(wc(a)){var c=zs(a);return c&&sb(c,"TypedArrayConstructor")?c.TypedArrayConstructor:Ao(a)}},Bo=function(a){if(!wc(a))return!1;a=Ae(a);return sb(Fe,a)||sb(Ak,a)};for(yd in Fe)(zh=(Sf=Xa[yd])&&Sf.prototype)?vo(zh).TypedArrayConstructor=Sf:Ee=!1;for(yd in Ak)(zh=(Sf=Xa[yd])&&Sf.prototype)&&(vo(zh).TypedArrayConstructor=Sf);if((!Ee||!Pb(ne)||ne===Function.prototype)&&(ne=function(){throw new yk("Incorrect invocation");},Ee))for(yd in Fe)Xa[yd]&&ed(Xa[yd],ne);if((!Ee||!Zd||Zd===
As)&&(Zd=ne.prototype,Ee))for(yd in Fe)Xa[yd]&&ed(Xa[yd].prototype,Zd);if(Ee&&le(xo)!==Zd&&ed(xo,Zd),mc&&!sb(Zd,yo))for(yd in zo=!0,$f(Zd,yo,{configurable:!0,get:function(){return wc(this)?this[zk]:void 0}}),Fe)Xa[yd]&&Id(Xa[yd],zk,yd);var Co={},Bs=(ig={NATIVE_ARRAY_BUFFER_VIEWS:Ee,TYPED_ARRAY_TAG:zo&&zk,aTypedArray:function(a){if(Bo(a))return a;throw new yk("Target is not a typed array");},aTypedArrayConstructor:function(a){if(Pb(a)&&(!ed||xe(ne,a)))return a;throw new yk(rf(a)+" is not a typed array constructor");
},exportTypedArrayMethod:function(a,c,d,b){if(mc){if(d)for(var f in Fe){var k=Xa[f];if(k&&sb(k.prototype,a))try{delete k.prototype[a]}catch(l){try{k.prototype[a]=c}catch(h){}}}Zd[a]&&!d||Qc(Zd,a,d?c:Ee&&xk[a]||c,b)}},exportTypedArrayStaticMethod:function(a,c,d){var b,f;if(mc){if(ed){if(d)for(b in Fe)if((f=Xa[b])&&sb(f,a))try{delete f[a]}catch(k){}if(ne[a]&&!d)return;try{return Qc(ne,a,d?c:Ee&&ne[a]||c)}catch(k){}}for(b in Fe)(f=Xa[b])&&(!f[a]||d)&&Qc(f,a,c)}},getTypedArrayConstructor:Ao,isView:function(a){if(!wc(a))return!1;
a=Ae(a);return"DataView"===a||sb(Fe,a)||sb(Ak,a)},isTypedArray:Bo,TypedArray:ne,TypedArrayPrototype:Zd}).aTypedArrayConstructor,Cs=ig.getTypedArrayConstructor;Co=function(a){return Bs(ci(a,Cs(a)))};var Ds=ig.aTypedArray;(0,ig.exportTypedArrayMethod)("slice",function(a,c){a=Ig(Ds(this),a,c);var d=Co(this);c=0;var b=a.length;for(d=new d(b);b>c;)d[c]=a[c++];return d},nc(function(){(new Int8Array(1)).slice()}));var Bk={};Bk=function(a){var c=sf(this),d=vf(c),b=arguments.length,f=Yf(1<b?arguments[1]:void 0,
d);b=2<b?arguments[2]:void 0;for(d=void 0===b?d:Yf(b,d);d>f;)c[f++]=a;return c};var Do={},Es=TypeError;Do=function(a){a=jj(a,"number");if("number"==typeof a)throw new Es("Can't convert number to bigint");return BigInt(a)};var Fs=ig.aTypedArray,Gs=ig.exportTypedArrayMethod,Hs=Xb("".slice);Gs("fill",function(a){var c=arguments.length;Fs(this);var d="Big"===Hs(Ae(this),0,3)?Do(a):+a;return vc(Bk,this,d,1<c?arguments[1]:void 0,2<c?arguments[2]:void 0)},nc(function(){var a=0;return(new Int8Array(2)).fill({valueOf:function(){return a++}}),
1!==a}));var Ck={};(Ck=function(a,c){return Xb(Xa[a].prototype[c])})("Array","values");uc({target:"Array",proto:!0},{fill:Bk});Jg("fill");Ck("Array","fill");var Is=Pf,Eo={},Fo={},Js=Ac("match");Fo=function(a){var c;return wc(a)&&(void 0!==(c=a[Js])?!!c:"RegExp"===zd(a))};var Ks=TypeError;Eo=function(a){if(Fo(a))throw new Ks("The method doesn't accept regular expressions");return a};var Go={},Ls=Ac("match");Go=function(a){var c=/./;try{"/./"[a](c)}catch(d){try{return c[Ls]=!1,"/./"[a](c)}catch(b){}}return!1};
var Ho=Rh("".endsWith),Ms=Rh("".slice),Ns=Math.min,Io=Go("endsWith"),Os=!ld&&!Io&&!(!(Wl=Is(String.prototype,"endsWith"))||Wl.writable);uc({target:"String",proto:!0,forced:!Os&&!Io},{endsWith:function(a){var c=je(zg(this));Eo(a);var d=1<arguments.length?arguments[1]:void 0,b=c.length;d=void 0===d?b:Ns(xj(d),b);b=je(a);return Ho?Ho(c,b,d):Ms(c,d-b.length,d)===b}});Ck("String","endsWith");var ta={};var Dk="undefined"!=typeof window?window:void 0;var Yk=function(a,c){function d(q,v,x){var D,H,M=(x=x||
mb).createElement("script");if(M.text=q,v)for(D in yb)(H=v[D]||v.getAttribute&&v.getAttribute(D))&&M.setAttribute(D,H);x.head.appendChild(M).parentNode.removeChild(M)}function b(q){return null==q?q+"":"object"==typeof q||"function"==typeof q?$c[ac.call(q)]||"object":void 0===q?"undefined":Vd(q)}function f(q){var v=!!q&&"length"in q&&q.length,x=b(q);return!($a(q)||Zc(q))&&("array"===x||0===v||"number"==typeof v&&0<v&&v-1 in q)}function k(q,v){return q.nodeName&&q.nodeName.toLowerCase()===v.toLowerCase()}
function l(q,v){return v?"\x00"===q?"\ufffd":q.slice(0,-1)+"\\"+q.charCodeAt(q.length-1).toString(16)+" ":"\\"+q}function h(q,v,x){return $a(v)?B.grep(q,function(D,H){return!!v.call(D,H,D)!==x}):v.nodeType?B.grep(q,function(D){return D===v!==x}):"string"!=typeof v?B.grep(q,function(D){return-1<Ab.call(v,D)!==x}):B.filter(v,q,x)}function e(q,v){for(;(q=q[v])&&1!==q.nodeType;);return q}function g(q){return q}function p(q){throw q;}function m(q,v,x,D){var H;try{q&&$a(H=q.promise)?H.call(q).done(v).fail(x):
q&&$a(H=q.then)?H.call(q,v,x):v.apply(void 0,[q].slice(D))}catch(M){x.apply(void 0,[M])}}function n(){mb.removeEventListener("DOMContentLoaded",n);a.removeEventListener("load",n);B.ready()}function r(q,v){return v.toUpperCase()}function u(q){return q.replace(Fa,"ms-").replace(Qa,r)}function w(){this.expando=B.expando+w.uid++}function z(q,v,x){var D;if(void 0===x&&1===q.nodeType)if(D="data-"+v.replace(jd,"-$&").toLowerCase(),"string"==typeof(x=q.getAttribute(D))){try{var H=x;x="true"===H||"false"!==
H&&("null"===H?null:H===+H+""?+H:Fc.test(H)?JSON.parse(H):H)}catch(M){}xb.set(q,v,x)}else x=void 0;return x}function G(q,v,x,D){var H,M,R=20,X=D?function(){return D.cur()}:function(){return B.css(q,v,"")},ba=X(),ra=x&&x[3]||(B.cssNumber[v]?"":"px"),Ga=q.nodeType&&(B.cssNumber[v]||"px"!==ra&&+ba)&&bb.exec(B.css(q,v));if(Ga&&Ga[3]!==ra){ba/=2;ra=ra||Ga[3];for(Ga=+ba||1;R--;)B.style(q,v,Ga+ra),0>=(1-M)*(1-(M=X()/ba||.5))&&(R=0),Ga/=M;Ga*=2;B.style(q,v,Ga+ra);x=x||[]}return x&&(Ga=+Ga||+ba||0,H=x[1]?
Ga+(x[1]+1)*x[2]:+x[2],D&&(D.unit=ra,D.start=Ga,D.end=H)),H}function L(q,v){for(var x,D,H=[],M=0,R=q.length;M<R;M++)if((D=q[M]).style)if(x=D.style.display,v){if("none"!==x||(H[M]=Ha.get(D,"display")||null,H[M]||(D.style.display="")),""===D.style.display&&Qd(D)){x=M;var X=void 0;var ba=D.ownerDocument;D=D.nodeName;var ra=mi[D];ba=(ra||(X=ba.body.appendChild(ba.createElement(D)),ra=B.css(X,"display"),X.parentNode.removeChild(X),"none"===ra&&(ra="block"),mi[D]=ra),ra);H[x]=ba}}else"none"!==x&&(H[M]=
"none",Ha.set(D,"display",x));for(M=0;M<R;M++)null!=H[M]&&(q[M].style.display=H[M]);return q}function O(q,v){var x;return(x=void 0!==q.getElementsByTagName?q.getElementsByTagName(v||"*"):void 0!==q.querySelectorAll?q.querySelectorAll(v||"*"):[],void 0===v||v&&k(q,v))?B.merge([q],x):x}function N(q,v){for(var x=0,D=q.length;x<D;x++)Ha.set(q[x],"globalEval",!v||Ha.get(v[x],"globalEval"))}function ea(q,v,x,D,H){for(var M,R,X,ba,ra=v.createDocumentFragment(),Ga=[],na=0,Ta=q.length;na<Ta;na++)if((M=q[na])||
0===M)if("object"===b(M))B.merge(Ga,M.nodeType?[M]:M);else if(Ek.test(M)){R=R||ra.appendChild(v.createElement("div"));X=Cd[(ni.exec(M)||["",""])[1].toLowerCase()]||Cd._default;R.innerHTML=X[1]+B.htmlPrefilter(M)+X[2];for(X=X[0];X--;)R=R.lastChild;B.merge(Ga,R.childNodes);(R=ra.firstChild).textContent=""}else Ga.push(v.createTextNode(M));ra.textContent="";for(na=0;M=Ga[na++];)if(D&&-1<B.inArray(M,D))H&&H.push(M);else if(ba=Sb(M),R=O(ra.appendChild(M),"script"),ba&&N(R),x)for(X=0;M=R[X++];)oi.test(M.type||
"")&&x.push(M);return ra}function Y(){return!0}function ka(){return!1}function ha(q,v,x,D,H,M){var R,X;if("object"==typeof v){for(X in"string"!=typeof x&&(D=D||x,x=void 0),v)ha(q,X,x,D,v[X],M);return q}if(null==D&&null==H?(H=x,D=x=void 0):null==H&&("string"==typeof x?(H=D,D=void 0):(H=D,D=x,x=void 0)),!1===H)H=ka;else if(!H)return q;return 1===M&&(R=H,(H=function(ba){return B().off(ba),R.apply(this,arguments)}).guid=R.guid||(R.guid=B.guid++)),q.each(function(){B.event.add(this,v,H,D,x)})}function qa(q,
v,x){x?(Ha.set(q,v,!1),B.event.add(q,v,{namespace:!1,handler:function(D){var H,M=Ha.get(this,v);if(1&D.isTrigger&&this[v])if(M)(B.event.special[v]||{}).delegateType&&D.stopPropagation();else{if(M=Cb.call(arguments),Ha.set(this,v,M),this[v](),H=Ha.get(this,v),Ha.set(this,v,!1),M!==H)return D.stopImmediatePropagation(),D.preventDefault(),H}else M&&(Ha.set(this,v,B.event.trigger(M[0],M.slice(1),this)),D.stopPropagation(),D.isImmediatePropagationStopped=Y)}})):void 0===Ha.get(q,v)&&B.event.add(q,v,Y)}
function Da(q,v){return k(q,"table")&&k(11!==v.nodeType?v:v.firstChild,"tr")&&B(q).children("tbody")[0]||q}function La(q){return q.type=(null!==q.getAttribute("type"))+"/"+q.type,q}function Ka(q){return"true/"===(q.type||"").slice(0,5)?q.type=q.type.slice(5):q.removeAttribute("type"),q}function V(q,v){var x,D,H,M,R;if(1===v.nodeType){if(Ha.hasData(q)&&(R=Ha.get(q).events))for(D in Ha.remove(v,"handle events"),R){var X=0;for(x=R[D].length;X<x;X++)B.event.add(v,D,R[D][X])}xb.hasData(q)&&(H=xb.access(q),
M=B.extend({},H),xb.set(v,M))}}function Na(q,v,x,D){v=qc(v);var H,M,R,X=0,ba=q.length,ra=ba-1,Ga=v[0],na=$a(Ga);if(na||1<ba&&"string"==typeof Ga&&!lb.checkClone&&Ng.test(Ga))return q.each(function(Za){var db=q.eq(Za);na&&(v[0]=Ga.call(this,Za,db.html()));Na(db,v,x,D)});if(ba&&(M=(H=ea(v,q[0].ownerDocument,!1,q,D)).firstChild,1===H.childNodes.length&&(H=M),M||D)){for(R=(M=B.map(O(H,"script"),La)).length;X<ba;X++){var Ta=H;X!==ra&&(Ta=B.clone(Ta,!0,!0),R&&B.merge(M,O(Ta,"script")));x.call(q[X],Ta,X)}if(R)for(H=
M[M.length-1].ownerDocument,B.map(M,Ka),X=0;X<R;X++)Ta=M[X],oi.test(Ta.type||"")&&!Ha.access(Ta,"globalEval")&&B.contains(H,Ta)&&(Ta.src&&"module"!==(Ta.type||"").toLowerCase()?B._evalUrl&&!Ta.noModule&&B._evalUrl(Ta.src,{nonce:Ta.nonce||Ta.getAttribute("nonce")},H):d(Ta.textContent.replace(Ye,""),Ta,H))}return q}function ya(q,v,x){for(var D=v?B.filter(v,q):q,H=0;null!=(v=D[H]);H++)x||1!==v.nodeType||B.cleanData(O(v)),v.parentNode&&(x&&Sb(v)&&N(O(v,"script")),v.parentNode.removeChild(v));return q}
function wb(q,v,x){var D,H,M,R,X=Bf.test(v),ba=q.style;return(x=x||Cf(q))&&(R=x.getPropertyValue(v)||x[v],X&&R&&(R=R.replace(Oc,"$1")||void 0),""!==R||Sb(q)||(R=B.style(q,v)),!lb.pixelBoxStyles()&&Df.test(R)&&Kd.test(v)&&(D=ba.width,H=ba.minWidth,M=ba.maxWidth,ba.minWidth=ba.maxWidth=ba.width=R,R=x.width,ba.width=D,ba.minWidth=H,ba.maxWidth=M)),void 0!==R?R+"":R}function ib(q,v){return{get:function(){if(q())delete this.get;else return(this.get=v).apply(this,arguments)}}}function Tb(q){var v;if(!(v=
B.cssProps[q]||Og[q])){if(!(q in Ge)){a:{v=q;for(var x=v[0].toUpperCase()+v.slice(1),D=$d.length;D--;)if((v=$d[D]+x)in Ge)break a;v=void 0}q=Og[q]=v||q}v=q}return v}function Fb(q,v,x){return(q=bb.exec(v))?Math.max(0,q[2]-(x||0))+(q[3]||"px"):v}function Sa(q,v,x,D,H,M){var R="width"===v?1:0,X=0,ba=0,ra=0;if(x===(D?"border":"content"))return 0;for(;4>R;R+=2)"margin"===x&&(ra+=B.css(q,x+cb[R],!0,H)),D?("content"===x&&(ba-=B.css(q,"padding"+cb[R],!0,H)),"margin"!==x&&(ba-=B.css(q,"border"+cb[R]+"Width",
!0,H))):(ba+=B.css(q,"padding"+cb[R],!0,H),"padding"!==x?ba+=B.css(q,"border"+cb[R]+"Width",!0,H):X+=B.css(q,"border"+cb[R]+"Width",!0,H));return!D&&0<=M&&(ba+=Math.max(0,Math.ceil(q["offset"+v[0].toUpperCase()+v.slice(1)]-M-ba-X-.5))||0),ba+ra}function sc(q,v,x){var D=Cf(q),H=(!lb.boxSizingReliable()||x)&&"border-box"===B.css(q,"boxSizing",!1,D),M=H,R=wb(q,v,D),X="offset"+v[0].toUpperCase()+v.slice(1);if(Df.test(R)){if(!x)return R;R="auto"}return(!lb.boxSizingReliable()&&H||!lb.reliableTrDimensions()&&
k(q,"tr")||"auto"===R||!parseFloat(R)&&"inline"===B.css(q,"display",!1,D))&&q.getClientRects().length&&(H="border-box"===B.css(q,"boxSizing",!1,D),(M=X in q)&&(R=q[X])),(R=parseFloat(R)||0)+Sa(q,v,x||(H?"border":"content"),M,D,R)+"px"}function cc(q,v,x,D,H){return new cc.prototype.init(q,v,x,D,H)}function Ca(){return a.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function Z(q,v){var x,D=0,H={height:q};for(v=v?1:0;4>D;D+=2-v)H["margin"+(x=cb[D])]=H["padding"+x]=q;return v&&(H.opacity=H.width=q),
H}function za(q,v,x){for(var D,H=(A.tweeners[v]||[]).concat(A.tweeners["*"]),M=0,R=H.length;M<R;M++)if(D=H[M].call(x,v,q))return D}function A(q,v,x){var D,H=0,M=A.prefilters.length,R=B.Deferred().always(function(){delete X.elem}),X=function(){if(D)return!1;var ra=Ze||Ca();ra=Math.max(0,ba.startTime+ba.duration-ra);for(var Ga=1-(ra/ba.duration||0),na=0,Ta=ba.tweens.length;na<Ta;na++)ba.tweens[na].run(Ga);return(R.notifyWith(q,[ba,Ga,ra]),1>Ga&&Ta)?ra:(Ta||R.notifyWith(q,[ba,1,0]),R.resolveWith(q,[ba]),
!1)},ba=R.promise({elem:q,props:B.extend({},v),opts:B.extend(!0,{specialEasing:{},easing:B.easing._default},x),originalProperties:v,originalOptions:x,startTime:Ze||Ca(),duration:x.duration,tweens:[],createTween:function(ra,Ga){ra=B.Tween(q,ba.opts,ra,Ga,ba.opts.specialEasing[ra]||ba.opts.easing);return ba.tweens.push(ra),ra},stop:function(ra){var Ga=0,na=ra?ba.tweens.length:0;if(D)return this;for(D=!0;Ga<na;Ga++)ba.tweens[Ga].run(1);return ra?(R.notifyWith(q,[ba,1,0]),R.resolveWith(q,[ba,ra])):R.rejectWith(q,
[ba,ra]),this}});x=ba.props;(function(ra,Ga){var na,Ta,Za,db,Lb;for(na in ra)if(Za=Ga[Ta=u(na)],Array.isArray(db=ra[na])&&(Za=db[1],db=ra[na]=db[0]),na!==Ta&&(ra[Ta]=db,delete ra[na]),(Lb=B.cssHooks[Ta])&&"expand"in Lb)for(na in db=Lb.expand(db),delete ra[Ta],db)na in ra||(ra[na]=db[na],Ga[na]=Za);else Ga[Ta]=Za})(x,ba.opts.specialEasing);for(;H<M;H++)if(v=A.prefilters[H].call(ba,q,x,ba.opts))return $a(v.stop)&&(B._queueHooks(ba.elem,ba.opts.queue).stop=v.stop.bind(v)),v;return B.map(x,za,ba),$a(ba.opts.start)&&
ba.opts.start.call(q,ba),ba.progress(ba.opts.progress).done(ba.opts.done,ba.opts.complete).fail(ba.opts.fail).always(ba.opts.always),B.fx.timer(B.extend(X,{elem:q,anim:ba,queue:ba.opts.queue})),ba}function T(q){return(q.match(Q)||[]).join(" ")}function oa(q){return q.getAttribute&&q.getAttribute("class")||""}function ma(q){return Array.isArray(q)?q:"string"==typeof q&&q.match(Q)||[]}function rb(q){return function(v,x){"string"!=typeof v&&(x=v,v="*");var D=0,H=v.toLowerCase().match(Q)||[];if($a(x))for(;v=
H[D++];)"+"===v[0]?(q[v=v.slice(1)||"*"]=q[v]||[]).unshift(x):(q[v]=q[v]||[]).push(x)}}function zb(q,v,x,D){function H(X){var ba;return M[X]=!0,B.each(q[X]||[],function(ra,Ga){ra=Ga(v,x,D);return"string"!=typeof ra||R||M[ra]?R?!(ba=ra):void 0:(v.dataTypes.unshift(ra),H(ra),!1)}),ba}var M={},R=q===Pg;return H(v.dataTypes[0])||!M["*"]&&H("*")}function dc(q,v){var x,D,H=B.ajaxSettings.flatOptions||{};for(x in v)void 0!==v[x]&&((H[x]?q:D||={})[x]=v[x]);return D&&B.extend(!0,q,D),q}var Lc,gb=[],Kc=Object.getPrototypeOf,
Cb=gb.slice,qc=gb.flat?function(q){return gb.flat.call(q)}:function(q){return gb.concat.apply([],q)},qb=gb.push,Ab=gb.indexOf,$c={},ac=$c.toString,xc=$c.hasOwnProperty,yc=xc.toString,Ec=yc.call(Object),lb={},$a=function(q){return"function"==typeof q&&"number"!=typeof q.nodeType&&"function"!=typeof q.item},Zc=function(q){return null!=q&&q===q.window},mb=a.document,yb={type:!0,src:!0,nonce:!0,noModule:!0},Gd=/HTML$/i,B=function(q,v){return new B.fn.init(q,v)};B.fn=B.prototype={jquery:"3.7.1",constructor:B,
length:0,toArray:function(){return Cb.call(this)},get:function(q){return null==q?Cb.call(this):0>q?this[q+this.length]:this[q]},pushStack:function(q){q=B.merge(this.constructor(),q);return q.prevObject=this,q},each:function(q){return B.each(this,q)},map:function(q){return this.pushStack(B.map(this,function(v,x){return q.call(v,x,v)}))},slice:function(){return this.pushStack(Cb.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(B.grep(this,
function(q,v){return(v+1)%2}))},odd:function(){return this.pushStack(B.grep(this,function(q,v){return v%2}))},eq:function(q){var v=this.length;q=+q+(0>q?v:0);return this.pushStack(0<=q&&q<v?[this[q]]:[])},end:function(){return this.prevObject||this.constructor()},push:qb,sort:gb.sort,splice:gb.splice};B.extend=B.fn.extend=function(){var q,v,x,D,H,M=arguments[0]||{},R=1,X=arguments.length,ba=!1;"boolean"==typeof M&&(ba=M,M=arguments[R]||{},R++);"object"==typeof M||$a(M)||(M={});for(R===X&&(M=this,
R--);R<X;R++)if(null!=(q=arguments[R]))for(v in q){var ra=q[v];"__proto__"!==v&&M!==ra&&(ba&&ra&&(B.isPlainObject(ra)||(D=Array.isArray(ra)))?(x=M[v],H=D&&!Array.isArray(x)?[]:D||B.isPlainObject(x)?x:{},D=!1,M[v]=B.extend(ba,H,ra)):void 0!==ra&&(M[v]=ra))}return M};B.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(q){throw Error(q);},noop:function(){},isPlainObject:function(q){var v,x;return!!q&&"[object Object]"===ac.call(q)&&(!(v=Kc(q))||"function"==
typeof(x=xc.call(v,"constructor")&&v.constructor)&&yc.call(x)===Ec)},isEmptyObject:function(q){for(var v in q)return!1;return!0},globalEval:function(q,v,x){d(q,{nonce:v&&v.nonce},x)},each:function(q,v){var x,D=0;if(f(q))for(x=q.length;D<x&&!1!==v.call(q[D],D,q[D]);D++);else for(D in q)if(!1===v.call(q[D],D,q[D]))break;return q},text:function(q){var v,x="",D=0,H=q.nodeType;if(!H)for(;v=q[D++];)x+=B.text(v);return 1===H||11===H?q.textContent:9===H?q.documentElement.textContent:3===H||4===H?q.nodeValue:
x},makeArray:function(q,v){v=v||[];return null!=q&&(f(Object(q))?B.merge(v,"string"==typeof q?[q]:q):qb.call(v,q)),v},inArray:function(q,v,x){return null==v?-1:Ab.call(v,q,x)},isXMLDoc:function(q){var v=q&&(q.ownerDocument||q).documentElement;return!Gd.test(q&&q.namespaceURI||v&&v.nodeName||"HTML")},merge:function(q,v){for(var x=+v.length,D=0,H=q.length;D<x;D++)q[H++]=v[D];return q.length=H,q},grep:function(q,v,x){var D=[],H=0,M=q.length;for(x=!x;H<M;H++)!v(q[H],H)!==x&&D.push(q[H]);return D},map:function(q,
v,x){var D,H,M=0,R=[];if(f(q))for(D=q.length;M<D;M++)null!=(H=v(q[M],M,x))&&R.push(H);else for(M in q)null!=(H=v(q[M],M,x))&&R.push(H);return qc(R)},guid:1,support:lb});"function"==typeof Symbol&&(B.fn[Symbol.iterator]=gb[Symbol.iterator]);B.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(q,v){$c["[object "+v+"]"]=v.toLowerCase()});var fe=gb.pop,ee=gb.sort,Ja=gb.splice,Oc=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$",
"g");B.contains=function(q,v){v=v&&v.parentNode;return q===v||!!(v&&1===v.nodeType&&(q.contains?q.contains(v):q.compareDocumentPosition&&16&q.compareDocumentPosition(v)))};var Fd=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;B.escapeSelector=function(q){return(q+"").replace(Fd,l)};(function(){function q(U,ja,la,Ia){var Ua,nb,fb,Mb,hb=ja&&ja.ownerDocument;var Yb=ja?ja.nodeType:9;if(la=la||[],"string"!=typeof U||!U||1!==Yb&&9!==Yb&&11!==Yb)return la;if(!Ia&&(X(ja),ja=ja||Qb,lc)){if(11!==Yb&&(Mb=Fk.exec(U)))if(Ua=
Mb[1])if(9===Yb){if(!(nb=ja.getElementById(Ua)))return la;if(nb.id===Ua)return Hc.call(la,nb),la}else{if(hb&&(nb=hb.getElementById(Ua))&&q.contains(ja,nb)&&nb.id===Ua)return Hc.call(la,nb),la}else{if(Mb[2])return Hc.apply(la,ja.getElementsByTagName(U)),la;if((Ua=Mb[3])&&ja.getElementsByClassName)return Hc.apply(la,ja.getElementsByClassName(Ua)),la}if(!(fd[U+" "]||Rc&&Rc.test(U))){if(Ua=U,hb=ja,1===Yb&&(Ic.test(U)||rc.test(U))){(hb=Qg.test(U)&&R(ja.parentNode)||ja)==ja&&lb.scope||((fb=ja.getAttribute("id"))?
fb=B.escapeSelector(fb):ja.setAttribute("id",fb=oc));for(Yb=(Ua=ra(U)).length;Yb--;)Ua[Yb]=(fb?"#"+fb:":scope")+" "+Ga(Ua[Yb]);Ua=Ua.join(",")}try{return Hc.apply(la,hb.querySelectorAll(Ua)),la}catch(Ub){fd(U,!0)}finally{fb===oc&&ja.removeAttribute("id")}}}return Lb(U.replace(Oc,"$1"),ja,la,Ia)}function v(){var U=[];return function Ua(la,Ia){return U.push(la+" ")>Eb.cacheLength&&delete Ua[U.shift()],Ua[la+" "]=Ia}}function x(U){return U[oc]=!0,U}function D(U){var ja=Qb.createElement("fieldset");try{return!!U(ja)}catch(la){return!1}finally{ja.parentNode&&
ja.parentNode.removeChild(ja)}}function H(U){return function(ja){return"form"in ja?ja.parentNode&&!1===ja.disabled?"label"in ja?"label"in ja.parentNode?ja.parentNode.disabled===U:ja.disabled===U:ja.isDisabled===U||!U!==ja.isDisabled&&Gk(ja)===U:ja.disabled===U:"label"in ja&&ja.disabled===U}}function M(U){return x(function(ja){return ja=+ja,x(function(la,Ia){for(var Ua,nb=U([],la.length,ja),fb=nb.length;fb--;)la[Ua=nb[fb]]&&(la[Ua]=!(Ia[Ua]=la[Ua]))})})}function R(U){return U&&void 0!==U.getElementsByTagName&&
U}function X(U){var ja;U=U?U.ownerDocument||U:mb;return U!=Qb&&9===U.nodeType&&U.documentElement&&(Bb=(Qb=U).documentElement,lc=!B.isXMLDoc(Qb),Ld=Bb.matches||Bb.webkitMatchesSelector||Bb.msMatchesSelector,Bb.msMatchesSelector&&mb!=Qb&&(ja=Qb.defaultView)&&ja.top!==ja&&ja.addEventListener("unload",Hk),lb.getById=D(function(la){return Bb.appendChild(la).id=B.expando,!Qb.getElementsByName||!Qb.getElementsByName(B.expando).length}),lb.disconnectedMatch=D(function(la){return Ld.call(la,"*")}),lb.scope=
D(function(){return Qb.querySelectorAll(":scope")}),lb.cssHas=D(function(){try{return Qb.querySelector(":has(*,:jqfake)"),!1}catch(la){return!0}}),lb.getById?(Eb.filter.ID=function(la){var Ia=la.replace(ae,Md);return function(Ua){return Ua.getAttribute("id")===Ia}},Eb.find.ID=function(la,Ia){if(void 0!==Ia.getElementById&&lc)return(la=Ia.getElementById(la))?[la]:[]}):(Eb.filter.ID=function(la){var Ia=la.replace(ae,Md);return function(Ua){return(Ua=void 0!==Ua.getAttributeNode&&Ua.getAttributeNode("id"))&&
Ua.value===Ia}},Eb.find.ID=function(la,Ia){if(void 0!==Ia.getElementById&&lc){var Ua,nb=Ia.getElementById(la);if(nb){if((Ua=nb.getAttributeNode("id"))&&Ua.value===la)return[nb];var fb=Ia.getElementsByName(la);for(Ia=0;nb=fb[Ia++];)if((Ua=nb.getAttributeNode("id"))&&Ua.value===la)return[nb]}return[]}}),Eb.find.TAG=function(la,Ia){return void 0!==Ia.getElementsByTagName?Ia.getElementsByTagName(la):Ia.querySelectorAll(la)},Eb.find.CLASS=function(la,Ia){if(void 0!==Ia.getElementsByClassName&&lc)return Ia.getElementsByClassName(la)},
Rc=[],D(function(la){var Ia;Bb.appendChild(la).innerHTML="<a id='"+oc+"' href='' disabled='disabled'></a><select id='"+oc+"-\r\\' disabled='disabled'><option selected=''></option></select>";la.querySelectorAll("[selected]").length||Rc.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");la.querySelectorAll("[id~="+oc+"-]").length||Rc.push("~=");la.querySelectorAll("a#"+oc+"+*").length||Rc.push(".#.+[+~]");
la.querySelectorAll(":checked").length||Rc.push(":checked");(Ia=Qb.createElement("input")).setAttribute("type","hidden");la.appendChild(Ia).setAttribute("name","D");Bb.appendChild(la).disabled=!0;2!==la.querySelectorAll(":disabled").length&&Rc.push(":enabled",":disabled");(Ia=Qb.createElement("input")).setAttribute("name","");la.appendChild(Ia);la.querySelectorAll("[name='']").length||Rc.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")")}),lb.cssHas||Rc.push(":has"),
Rc=Rc.length&&new RegExp(Rc.join("|")),be=function(la,Ia){if(la===Ia)return Nb=!0,0;var Ua=!la.compareDocumentPosition-!Ia.compareDocumentPosition;return Ua||(1&(Ua=(la.ownerDocument||la)==(Ia.ownerDocument||Ia)?la.compareDocumentPosition(Ia):1)||!lb.sortDetached&&Ia.compareDocumentPosition(la)===Ua?la===Qb||la.ownerDocument==mb&&q.contains(mb,la)?-1:Ia===Qb||Ia.ownerDocument==mb&&q.contains(mb,Ia)?1:sd?Ab.call(sd,la)-Ab.call(sd,Ia):0:4&Ua?-1:1)}),Qb}function ba(){}function ra(U,ja){var la,Ia,Ua,
nb,fb,Mb;if(fb=td[U+" "])return ja?0:fb.slice(0);fb=U;var hb=[];for(Mb=Eb.preFilter;fb;){for(nb in(!la||(Ia=gd.exec(fb)))&&(Ia&&(fb=fb.slice(Ia[0].length)||fb),hb.push(Ua=[])),la=!1,(Ia=rc.exec(fb))&&(la=Ia.shift(),Ua.push({value:la,type:Ia[0].replace(Oc," ")}),fb=fb.slice(la.length)),Eb.filter)(Ia=md[nb].exec(fb))&&(!Mb[nb]||(Ia=Mb[nb](Ia)))&&(la=Ia.shift(),Ua.push({value:la,type:nb,matches:Ia}),fb=fb.slice(la.length));if(!la)break}return ja?fb.length:fb?q.error(U):td(U,hb).slice(0)}function Ga(U){for(var ja=
0,la=U.length,Ia="";ja<la;ja++)Ia+=U[ja].value;return Ia}function na(U,ja,la){var Ia=ja.dir,Ua=ja.next,nb=Ua||Ia,fb=la&&"parentNode"===nb,Mb=oe++;return ja.first?function(hb,Yb,Ub){for(;hb=hb[Ia];)if(1===hb.nodeType||fb)return U(hb,Yb,Ub);return!1}:function(hb,Yb,Ub){var Wc,$b,jc=[nd,Mb];if(Ub)for(;hb=hb[Ia];){if((1===hb.nodeType||fb)&&U(hb,Yb,Ub))return!0}else for(;hb=hb[Ia];)if(1===hb.nodeType||fb)if($b=hb[oc]||(hb[oc]={}),Ua&&k(hb,Ua))hb=hb[Ia]||hb;else{if((Wc=$b[nb])&&Wc[0]===nd&&Wc[1]===Mb)return jc[2]=
Wc[2];if($b[nb]=jc,jc[2]=U(hb,Yb,Ub))return!0}return!1}}function Ta(U){return 1<U.length?function(ja,la,Ia){for(var Ua=U.length;Ua--;)if(!U[Ua](ja,la,Ia))return!1;return!0}:U[0]}function Za(U,ja,la,Ia,Ua){for(var nb,fb=[],Mb=0,hb=U.length,Yb=null!=ja;Mb<hb;Mb++)(nb=U[Mb])&&(!la||la(nb,Ia,Ua))&&(fb.push(nb),Yb&&ja.push(Mb));return fb}function db(U,ja){var la,Ia,Ua,nb,fb=[],Mb=[],hb=Xc[U+" "];if(!hb){ja||=ra(U);for(nb=ja.length;nb--;)(hb=function Wc(Ub){var $b,jc,Jc=Ub.length,Dd=Eb.relative[Ub[0].type];
var Yc=Dd||Eb.relative[" "];for(var Vb=Dd?1:0,Nd=na(function(E){return E===$b},Yc,!0),Od=na(function(E){return-1<Ab.call($b,E)},Yc,!0),y=[function(E,P,t){E=!Dd&&(t||P!=Nc)||(($b=P).nodeType?Nd(E,P,t):Od(E,P,t));return $b=null,E}];Vb<Jc;Vb++)if(Yc=Eb.relative[Ub[Vb].type])y=[na(Ta(y),Yc)];else{if((Yc=Eb.filter[Ub[Vb].type].apply(null,Ub[Vb].matches))[oc]){for(jc=++Vb;jc<Jc&&!Eb.relative[Ub[jc].type];jc++);return function pa(P,t,C,I,da,ia){return I&&!I[oc]&&(I=pa(I)),da&&!da[oc]&&(da=pa(da,ia)),x(function(va,
sa,Aa,Ma){var Oa,Ra,tb=[],ob=[],ab=sa.length,ub;if(!(ub=va)){ub=t||"*";for(var Gb=Aa.nodeType?[Aa]:Aa,eb=[],Hb=0,Zb=Gb.length;Hb<Zb;Hb++)q(ub,Gb[Hb],eb);ub=eb}ub=!P||!va&&t?ub:Za(ub,tb,P,Aa,Ma);if(C?C(ub,Ra=da||(va?P:ab||I)?[]:sa,Aa,Ma):Ra=ub,I){var Wb=Za(Ra,ob);I(Wb,[],Aa,Ma);for(Aa=Wb.length;Aa--;)(Oa=Wb[Aa])&&(Ra[ob[Aa]]=!(ub[ob[Aa]]=Oa))}if(va){if(da||P){if(da){Wb=[];for(Aa=Ra.length;Aa--;)(Oa=Ra[Aa])&&Wb.push(ub[Aa]=Oa);da(null,Ra=[],Wb,Ma)}for(Aa=Ra.length;Aa--;)(Oa=Ra[Aa])&&-1<(Wb=da?Ab.call(va,
Oa):tb[Aa])&&(va[Wb]=!(sa[Wb]=Oa))}}else Ra=Za(Ra===sa?Ra.splice(ab,Ra.length):Ra),da?da(null,sa,Ra,Ma):Hc.apply(sa,Ra)})}(1<Vb&&Ta(y),1<Vb&&Ga(Ub.slice(0,Vb-1).concat({value:" "===Ub[Vb-2].type?"*":""})).replace(Oc,"$1"),Yc,Vb<jc&&Wc(Ub.slice(Vb,jc)),jc<Jc&&Wc(Ub=Ub.slice(jc)),jc<Jc&&Ga(Ub))}y.push(Yc)}return Ta(y)}(ja[nb]))[oc]?fb.push(hb):Mb.push(hb);(hb=Xc(U,(la=0<fb.length,Ia=0<Mb.length,Ua=function(Yb,Ub,Wc,$b,jc){var Jc,Dd,Yc=0,Vb="0",Nd=Yb&&[],Od=[],y=Nc,E=Yb||Ia&&Eb.find.TAG("*",jc),P=nd+=
null==y?1:Math.random()||.1,t=E.length;for(jc&&(Nc=Ub==Qb||Ub||jc);Vb!==t&&null!=(Jc=E[Vb]);Vb++){if(Ia&&Jc){var C=0;for(Ub||Jc.ownerDocument==Qb||(X(Jc),Wc=!lc);Dd=Mb[C++];)if(Dd(Jc,Ub||Qb,Wc)){Hc.call($b,Jc);break}jc&&(nd=P)}la&&((Jc=!Dd&&Jc)&&Yc--,Yb&&Nd.push(Jc))}if(Yc+=Vb,la&&Vb!==Yc){for(C=0;Dd=fb[C++];)Dd(Nd,Od,Ub,Wc);if(Yb){if(0<Yc)for(;Vb--;)Nd[Vb]||Od[Vb]||(Od[Vb]=fe.call($b));Od=Za(Od)}Hc.apply($b,Od);jc&&!Yb&&0<Od.length&&1<Yc+fb.length&&B.uniqueSort($b)}return jc&&(nd=P,Nc=y),Nd},la?
x(Ua):Ua))).selector=U}return hb}function Lb(U,ja,la,Ia){var Ua,nb,fb,Mb,hb,Yb="function"==typeof U&&U,Ub=!Ia&&ra(U=Yb.selector||U);if(la=la||[],1===Ub.length){if(2<(nb=Ub[0]=Ub[0].slice(0)).length&&"ID"===(fb=nb[0]).type&&9===ja.nodeType&&lc&&Eb.relative[nb[1].type]){if(!(ja=(Eb.find.ID(fb.matches[0].replace(ae,Md),ja)||[])[0]))return la;Yb&&(ja=ja.parentNode);U=U.slice(nb.shift().value.length)}for(Ua=md.needsContext.test(U)?0:nb.length;Ua--&&(fb=nb[Ua],!Eb.relative[Mb=fb.type]);)if((hb=Eb.find[Mb])&&
(Ia=hb(fb.matches[0].replace(ae,Md),Qg.test(nb[0].type)&&R(ja.parentNode)||ja))){if(nb.splice(Ua,1),!(U=Ia.length&&Ga(nb)))return Hc.apply(la,Ia),la;break}}return(Yb||db(U,Ub))(Ia,ja,!lc,la,!ja||Qg.test(U)&&R(ja.parentNode)||ja),la}var kc,Eb,Nc,sd,Nb,Qb,Bb,lc,Rc,Ld,Hc=qb,oc=B.expando,nd=0,oe=0,He=v(),td=v(),Xc=v(),fd=v(),be=function(U,ja){return U===ja&&(Nb=!0),0},pe=RegExp("[\\x20\\t\\r\\n\\f]+","g"),gd=RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),rc=RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),
Ic=RegExp("[\\x20\\t\\r\\n\\f]|>"),Pd=RegExp(":((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
Mc=RegExp("^(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+$"),md={ID:RegExp("^#((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)"),CLASS:RegExp("^\\.((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)"),TAG:RegExp("^((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+|[*])"),ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\]"),
PSEUDO:RegExp("^:((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},$e=/^(?:input|select|textarea|button)$/i,jg=/^h\d$/i,Fk=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Qg=/[+~]/,ae=RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),Md=function(U,ja){U="0x"+U.slice(1)-65536;return ja||(0>U?String.fromCharCode(U+65536):String.fromCharCode(U>>10|55296,1023&U|56320))},Hk=function(){X()},Gk=na(function(U){return!0===U.disabled&&k(U,"fieldset")},{dir:"parentNode",next:"legend"});try{Hc.apply(gb=Cb.call(mb.childNodes),mb.childNodes),gb[mb.childNodes.length].nodeType}catch(U){Hc=
{apply:function(ja,la){qb.apply(ja,Cb.call(la))},call:function(ja){qb.apply(ja,Cb.call(arguments,1))}}}for(kc in q.matches=function(U,ja){return q(U,null,null,ja)},q.matchesSelector=function(U,ja){if(X(U),!(!lc||fd[ja+" "]||Rc&&Rc.test(ja)))try{var la=Ld.call(U,ja);if(la||lb.disconnectedMatch||U.document&&11!==U.document.nodeType)return la}catch(Ia){fd(ja,!0)}return 0<q(ja,Qb,null,[U]).length},q.contains=function(U,ja){return(U.ownerDocument||U)!=Qb&&X(U),B.contains(U,ja)},q.attr=function(U,ja){(U.ownerDocument||
U)!=Qb&&X(U);var la=Eb.attrHandle[ja.toLowerCase()];la=la&&xc.call(Eb.attrHandle,ja.toLowerCase())?la(U,ja,!lc):void 0;return void 0!==la?la:U.getAttribute(ja)},q.error=function(U){throw Error("Syntax error, unrecognized expression: "+U);},B.uniqueSort=function(U){var ja,la=[],Ia=0,Ua=0;if(Nb=!lb.sortStable,sd=!lb.sortStable&&Cb.call(U,0),ee.call(U,be),Nb){for(;ja=U[Ua++];)ja===U[Ua]&&(Ia=la.push(Ua));for(;Ia--;)Ja.call(U,la[Ia],1)}return sd=null,U},B.fn.uniqueSort=function(){return this.pushStack(B.uniqueSort(Cb.apply(this)))},
(Eb=B.expr={cacheLength:50,createPseudo:x,match:md,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(U){return U[1]=U[1].replace(ae,Md),U[3]=(U[3]||U[4]||U[5]||"").replace(ae,Md),"~="===U[2]&&(U[3]=" "+U[3]+" "),U.slice(0,4)},CHILD:function(U){return U[1]=U[1].toLowerCase(),"nth"===U[1].slice(0,3)?(U[3]||q.error(U[0]),U[4]=+(U[4]?U[5]+(U[6]||1):2*("even"===U[3]||"odd"===
U[3])),U[5]=+(U[7]+U[8]||"odd"===U[3])):U[3]&&q.error(U[0]),U},PSEUDO:function(U){var ja,la=!U[6]&&U[2];return md.CHILD.test(U[0])?null:(U[3]?U[2]=U[4]||U[5]||"":la&&Pd.test(la)&&(ja=ra(la,!0))&&(ja=la.indexOf(")",la.length-ja)-la.length)&&(U[0]=U[0].slice(0,ja),U[2]=la.slice(0,ja)),U.slice(0,3))}},filter:{TAG:function(U){var ja=U.replace(ae,Md).toLowerCase();return"*"===U?function(){return!0}:function(la){return k(la,ja)}},CLASS:function(U){var ja=He[U+" "];return ja||(ja=RegExp("(^|[\\x20\\t\\r\\n\\f])"+
U+"([\\x20\\t\\r\\n\\f]|$)"),He(U,function(la){return ja.test("string"==typeof la.className&&la.className||void 0!==la.getAttribute&&la.getAttribute("class")||"")}))},ATTR:function(U,ja,la){return function(Ia){Ia=q.attr(Ia,U);return null==Ia?"!="===ja:!ja||((Ia+="","="===ja)?Ia===la:"!="===ja?Ia!==la:"^="===ja?la&&0===Ia.indexOf(la):"*="===ja?la&&-1<Ia.indexOf(la):"$="===ja?la&&Ia.slice(-la.length)===la:"~="===ja?-1<(" "+Ia.replace(pe," ")+" ").indexOf(la):"|="===ja&&(Ia===la||Ia.slice(0,la.length+
1)===la+"-"))}},CHILD:function(U,ja,la,Ia,Ua){var nb="nth"!==U.slice(0,3),fb="last"!==U.slice(-4),Mb="of-type"===ja;return 1===Ia&&0===Ua?function(hb){return!!hb.parentNode}:function(hb,Yb,Ub){var Wc,$b,jc;Yb=nb!==fb?"nextSibling":"previousSibling";var Jc=hb.parentNode,Dd=Mb&&hb.nodeName.toLowerCase(),Yc=!Ub&&!Mb,Vb=!1;if(Jc){if(nb){for(;Yb;){for($b=hb;$b=$b[Yb];)if(Mb?k($b,Dd):1===$b.nodeType)return!1;var Nd=Yb="only"===U&&!Nd&&"nextSibling"}return!0}if(Nd=[fb?Jc.firstChild:Jc.lastChild],fb&&Yc)for(Vb=
(jc=(Wc=(Ub=Jc[oc]||(Jc[oc]={}))[U]||[])[0]===nd&&Wc[1])&&Wc[2],$b=jc&&Jc.childNodes[jc];$b=++jc&&$b&&$b[Yb]||(Vb=jc=0)||Nd.pop();){if(1===$b.nodeType&&++Vb&&$b===hb){Ub[U]=[nd,jc,Vb];break}}else if(Yc&&(Vb=jc=(Wc=(hb[oc]||(hb[oc]={}))[U]||[])[0]===nd&&Wc[1]),!1===Vb)for(;($b=++jc&&$b&&$b[Yb]||(Vb=jc=0)||Nd.pop())&&((Mb?!k($b,Dd):1!==$b.nodeType)||!++Vb||(Yc&&((Ub=$b[oc]||($b[oc]={}))[U]=[nd,Vb]),$b!==hb)););return(Vb-=Ua)===Ia||0==Vb%Ia&&0<=Vb/Ia}}},PSEUDO:function(U,ja){var la,Ia=Eb.pseudos[U]||
Eb.setFilters[U.toLowerCase()]||q.error("unsupported pseudo: "+U);return Ia[oc]?Ia(ja):1<Ia.length?(la=[U,U,"",ja],Eb.setFilters.hasOwnProperty(U.toLowerCase())?x(function(Ua,nb){for(var fb,Mb=Ia(Ua,ja),hb=Mb.length;hb--;)fb=Ab.call(Ua,Mb[hb]),Ua[fb]=!(nb[fb]=Mb[hb])}):function(Ua){return Ia(Ua,0,la)}):Ia}},pseudos:{not:x(function(U){var ja=[],la=[],Ia=db(U.replace(Oc,"$1"));return Ia[oc]?x(function(Ua,nb,fb,Mb){var hb;fb=Ia(Ua,null,Mb,[]);for(Mb=Ua.length;Mb--;)(hb=fb[Mb])&&(Ua[Mb]=!(nb[Mb]=hb))}):
function(Ua,nb,fb){return ja[0]=Ua,Ia(ja,null,fb,la),ja[0]=null,!la.pop()}}),has:x(function(U){return function(ja){return 0<q(U,ja).length}}),contains:x(function(U){return U=U.replace(ae,Md),function(ja){return-1<(ja.textContent||B.text(ja)).indexOf(U)}}),lang:x(function(U){return Mc.test(U||"")||q.error("unsupported lang: "+U),U=U.replace(ae,Md).toLowerCase(),function(ja){var la;do if(la=lc?ja.lang:ja.getAttribute("xml:lang")||ja.getAttribute("lang"))return(la=la.toLowerCase())===U||0===la.indexOf(U+
"-");while((ja=ja.parentNode)&&1===ja.nodeType);return!1}}),target:function(U){var ja=a.location&&a.location.hash;return ja&&ja.slice(1)===U.id},root:function(U){return U===Bb},focus:function(U){a:{try{var ja=Qb.activeElement;break a}catch(la){}ja=void 0}return U===ja&&Qb.hasFocus()&&!!(U.type||U.href||~U.tabIndex)},enabled:H(!1),disabled:H(!0),checked:function(U){return k(U,"input")&&!!U.checked||k(U,"option")&&!!U.selected},selected:function(U){return U.parentNode&&U.parentNode.selectedIndex,!0===
U.selected},empty:function(U){for(U=U.firstChild;U;U=U.nextSibling)if(6>U.nodeType)return!1;return!0},parent:function(U){return!Eb.pseudos.empty(U)},header:function(U){return jg.test(U.nodeName)},input:function(U){return $e.test(U.nodeName)},button:function(U){return k(U,"input")&&"button"===U.type||k(U,"button")},text:function(U){var ja;return k(U,"input")&&"text"===U.type&&(null==(ja=U.getAttribute("type"))||"text"===ja.toLowerCase())},first:M(function(){return[0]}),last:M(function(U,ja){return[ja-
1]}),eq:M(function(U,ja,la){return[0>la?la+ja:la]}),even:M(function(U,ja){for(var la=0;la<ja;la+=2)U.push(la);return U}),odd:M(function(U,ja){for(var la=1;la<ja;la+=2)U.push(la);return U}),lt:M(function(U,ja,la){for(ja=0>la?la+ja:la>ja?ja:la;0<=--ja;)U.push(ja);return U}),gt:M(function(U,ja,la){for(la=0>la?la+ja:la;++la<ja;)U.push(la);return U})}}).pseudos.nth=Eb.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Eb.pseudos[kc]=function(U){return function(ja){return k(ja,"input")&&ja.type===
U}}(kc);for(kc in{submit:!0,reset:!0})Eb.pseudos[kc]=function(U){return function(ja){return(k(ja,"input")||k(ja,"button"))&&ja.type===U}}(kc);ba.prototype=Eb.filters=Eb.pseudos;Eb.setFilters=new ba;lb.sortStable=oc.split("").sort(be).join("")===oc;X();lb.sortDetached=D(function(U){return 1&U.compareDocumentPosition(Qb.createElement("fieldset"))});B.find=q;B.expr[":"]=B.expr.pseudos;B.unique=B.uniqueSort;q.compile=db;q.select=Lb;q.setDocument=X;q.tokenize=ra;q.escape=B.escapeSelector;q.getText=B.text;
q.isXML=B.isXMLDoc;q.selectors=B.expr;q.support=B.support;q.uniqueSort=B.uniqueSort})();var zc=function(q,v,x){for(var D=[],H=void 0!==x;(q=q[v])&&9!==q.nodeType;)if(1===q.nodeType){if(H&&B(q).is(x))break;D.push(q)}return D},qd=function(q,v){for(var x=[];q;q=q.nextSibling)1===q.nodeType&&q!==v&&x.push(q);return x},jb=B.expr.match.needsContext,K=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;B.filter=function(q,v,x){var D=v[0];return(x&&(q=":not("+q+")"),1===v.length&&1===D.nodeType)?
B.find.matchesSelector(D,q)?[D]:[]:B.find.matches(q,B.grep(v,function(H){return 1===H.nodeType}))};B.fn.extend({find:function(q){var v,x=this.length,D=this;if("string"!=typeof q)return this.pushStack(B(q).filter(function(){for(H=0;H<x;H++)if(B.contains(D[H],this))return!0}));var H=0;for(v=this.pushStack([]);H<x;H++)B.find(q,D[H],v);return 1<x?B.uniqueSort(v):v},filter:function(q){return this.pushStack(h(this,q||[],!1))},not:function(q){return this.pushStack(h(this,q||[],!0))},is:function(q){return!!h(this,
"string"==typeof q&&jb.test(q)?B(q):q||[],!1).length}});var aa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(B.fn.init=function(q,v,x){var D,H;if(!q)return this;if(x=x||xa,"string"==typeof q){if((D="<"===q[0]&&">"===q[q.length-1]&&3<=q.length?[null,q,null]:aa.exec(q))&&(D[1]||!v)){if(!D[1])return(H=mb.getElementById(D[2]))&&(this[0]=H,this.length=1),this;if(v=v instanceof B?v[0]:v,B.merge(this,B.parseHTML(D[1],v&&v.nodeType?v.ownerDocument||v:mb,!0)),K.test(D[1])&&B.isPlainObject(v))for(D in v)$a(this[D])?
this[D](v[D]):this.attr(D,v[D]);return this}return!v||v.jquery?(v||x).find(q):this.constructor(v).find(q)}return q.nodeType?(this[0]=q,this.length=1,this):$a(q)?void 0!==x.ready?x.ready(q):q(B):B.makeArray(q,this)}).prototype=B.fn;var xa=B(mb);var S=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};B.fn.extend({has:function(q){var v=B(q,this),x=v.length;return this.filter(function(){for(var D=0;D<x;D++)if(B.contains(this,v[D]))return!0})},closest:function(q,v){var x,D=0,
H=this.length,M=[],R="string"!=typeof q&&B(q);if(!jb.test(q))for(;D<H;D++)for(x=this[D];x&&x!==v;x=x.parentNode)if(11>x.nodeType&&(R?-1<R.index(x):1===x.nodeType&&B.find.matchesSelector(x,q))){M.push(x);break}return this.pushStack(1<M.length?B.uniqueSort(M):M)},index:function(q){return q?"string"==typeof q?Ab.call(B(q),this[0]):Ab.call(this,q.jquery?q[0]:q):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(q,v){return this.pushStack(B.uniqueSort(B.merge(this.get(),B(q,v))))},
addBack:function(q){return this.add(null==q?this.prevObject:this.prevObject.filter(q))}});B.each({parent:function(q){return(q=q.parentNode)&&11!==q.nodeType?q:null},parents:function(q){return zc(q,"parentNode")},parentsUntil:function(q,v,x){return zc(q,"parentNode",x)},next:function(q){return e(q,"nextSibling")},prev:function(q){return e(q,"previousSibling")},nextAll:function(q){return zc(q,"nextSibling")},prevAll:function(q){return zc(q,"previousSibling")},nextUntil:function(q,v,x){return zc(q,"nextSibling",
x)},prevUntil:function(q,v,x){return zc(q,"previousSibling",x)},siblings:function(q){return qd((q.parentNode||{}).firstChild,q)},children:function(q){return qd(q.firstChild)},contents:function(q){return null!=q.contentDocument&&Kc(q.contentDocument)?q.contentDocument:(k(q,"template")&&(q=q.content||q),B.merge([],q.childNodes))}},function(q,v){B.fn[q]=function(x,D){var H=B.map(this,v,x);return"Until"!==q.slice(-5)&&(D=x),D&&"string"==typeof D&&(H=B.filter(D,H)),1<this.length&&(F[q]||B.uniqueSort(H),
S.test(q)&&H.reverse()),this.pushStack(H)}});var Q=/[^\x20\t\r\n\f]+/g;B.Callbacks=function(q){q="string"==typeof q?(v=q,x={},B.each(v.match(Q)||[],function(Ta,Za){x[Za]=!0}),x):B.extend({},q);var v,x,D,H,M,R,X=[],ba=[],ra=-1,Ga=function(){R=R||q.once;for(M=D=!0;ba.length;ra=-1)for(H=ba.shift();++ra<X.length;)!1===X[ra].apply(H[0],H[1])&&q.stopOnFalse&&(ra=X.length,H=!1);q.memory||(H=!1);D=!1;R&&(X=H?[]:"")},na={add:function(){return X&&(H&&!D&&(ra=X.length-1,ba.push(H)),function db(Za){B.each(Za,
function(Lb,kc){$a(kc)?q.unique&&na.has(kc)||X.push(kc):kc&&kc.length&&"string"!==b(kc)&&db(kc)})}(arguments),H&&!D&&Ga()),this},remove:function(){return B.each(arguments,function(Ta,Za){for(var db;-1<(db=B.inArray(Za,X,db));)X.splice(db,1),db<=ra&&ra--}),this},has:function(Ta){return Ta?-1<B.inArray(Ta,X):0<X.length},empty:function(){return X&&=[],this},disable:function(){return R=ba=[],X=H="",this},disabled:function(){return!X},lock:function(){return R=ba=[],H||D||(X=H=""),this},locked:function(){return!!R},
fireWith:function(Ta,Za){return R||(Za=[Ta,(Za=Za||[]).slice?Za.slice():Za],ba.push(Za),D||Ga()),this},fire:function(){return na.fireWith(this,arguments),this},fired:function(){return!!M}};return na};B.extend({Deferred:function(q){var v=[["notify","progress",B.Callbacks("memory"),B.Callbacks("memory"),2],["resolve","done",B.Callbacks("once memory"),B.Callbacks("once memory"),0,"resolved"],["reject","fail",B.Callbacks("once memory"),B.Callbacks("once memory"),1,"rejected"]],x="pending",D={state:function(){return x},
always:function(){return H.done(arguments).fail(arguments),this},catch:function(M){return D.then(null,M)},pipe:function(){var M=arguments;return B.Deferred(function(R){B.each(v,function(X,ba){var ra=$a(M[ba[4]])&&M[ba[4]];H[ba[1]](function(){var Ga=ra&&ra.apply(this,arguments);Ga&&$a(Ga.promise)?Ga.promise().progress(R.notify).done(R.resolve).fail(R.reject):R[ba[0]+"With"](this,ra?[Ga]:arguments)})});M=null}).promise()},then:function(M,R,X){function ba(Ga,na,Ta,Za){return function(){var db=this,Lb=
arguments,kc=function(){var Nc,sd;if(!(Ga<ra)){if((Nc=Ta.apply(db,Lb))===na.promise())throw TypeError("Thenable self-resolution");$a(sd=Nc&&("object"==typeof Nc||"function"==typeof Nc)&&Nc.then)?Za?sd.call(Nc,ba(ra,na,g,Za),ba(ra,na,p,Za)):(ra++,sd.call(Nc,ba(ra,na,g,Za),ba(ra,na,p,Za),ba(ra,na,g,na.notifyWith))):(Ta!==g&&(db=void 0,Lb=[Nc]),(Za||na.resolveWith)(db,Lb))}},Eb=Za?kc:function(){try{kc()}catch(Nc){B.Deferred.exceptionHook&&B.Deferred.exceptionHook(Nc,Eb.error),Ga+1>=ra&&(Ta!==p&&(db=
void 0,Lb=[Nc]),na.rejectWith(db,Lb))}};Ga?Eb():(B.Deferred.getErrorHook?Eb.error=B.Deferred.getErrorHook():B.Deferred.getStackHook&&(Eb.error=B.Deferred.getStackHook()),a.setTimeout(Eb))}}var ra=0;return B.Deferred(function(Ga){v[0][3].add(ba(0,Ga,$a(X)?X:g,Ga.notifyWith));v[1][3].add(ba(0,Ga,$a(M)?M:g));v[2][3].add(ba(0,Ga,$a(R)?R:p))}).promise()},promise:function(M){return null!=M?B.extend(M,D):D}},H={};return B.each(v,function(M,R){var X=R[2],ba=R[5];D[R[1]]=X.add;ba&&X.add(function(){x=ba},v[3-
M][2].disable,v[3-M][3].disable,v[0][2].lock,v[0][3].lock);X.add(R[3].fire);H[R[0]]=function(){return H[R[0]+"With"](this===H?void 0:this,arguments),this};H[R[0]+"With"]=X.fireWith}),D.promise(H),q&&q.call(H,H),H},when:function(q){var v=arguments.length,x=v,D=Array(x),H=Cb.call(arguments),M=B.Deferred(),R=function(X){return function(ba){D[X]=this;H[X]=1<arguments.length?Cb.call(arguments):ba;--v||M.resolveWith(D,H)}};if(1>=v&&(m(q,M.done(R(x)).resolve,M.reject,!v),"pending"===M.state()||$a(H[x]&&
H[x].then)))return M.then();for(;x--;)m(H[x],R(x),M.reject);return M.promise()}});var ca=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;B.Deferred.exceptionHook=function(q,v){a.console&&a.console.warn&&q&&ca.test(q.name)&&a.console.warn("jQuery.Deferred exception: "+q.message,q.stack,v)};B.readyException=function(q){a.setTimeout(function(){throw q;})};var ua=B.Deferred();B.fn.ready=function(q){return ua.then(q).catch(function(v){B.readyException(v)}),this};B.extend({isReady:!1,readyWait:1,
ready:function(q){(!0===q?!--B.readyWait:!B.isReady)&&(B.isReady=!0,!0!==q&&0<--B.readyWait||ua.resolveWith(mb,[B]))}});B.ready.then=ua.then;"complete"===mb.readyState||"loading"!==mb.readyState&&!mb.documentElement.doScroll?a.setTimeout(B.ready):(mb.addEventListener("DOMContentLoaded",n),a.addEventListener("load",n));var Ea=function(q,v,x,D,H,M,R){var X=0,ba=q.length,ra=null==x;if("object"===b(x))for(X in H=!0,x)Ea(q,v,X,x[X],!0,M,R);else if(void 0!==D&&(H=!0,$a(D)||(R=!0),ra&&(R?(v.call(q,D),v=
null):(ra=v,v=function(Ga,na,Ta){return ra.call(B(Ga),Ta)})),v))for(;X<ba;X++)v(q[X],x,R?D:D.call(q[X],X,v(q[X],x)));return H?q:ra?v.call(q):ba?v(q[0],x):M},Fa=/^-ms-/,Qa=/-([a-z])/g,vb=function(q){return 1===q.nodeType||9===q.nodeType||!+q.nodeType};w.uid=1;w.prototype={cache:function(q){var v=q[this.expando];return!v&&(v={},vb(q)&&(q.nodeType?q[this.expando]=v:Object.defineProperty(q,this.expando,{value:v,configurable:!0}))),v},set:function(q,v,x){var D;q=this.cache(q);if("string"==typeof v)q[u(v)]=
x;else for(D in v)q[u(D)]=v[D];return q},get:function(q,v){return void 0===v?this.cache(q):q[this.expando]&&q[this.expando][u(v)]},access:function(q,v,x){return void 0===v||v&&"string"==typeof v&&void 0===x?this.get(q,v):(this.set(q,v,x),void 0!==x?x:v)},remove:function(q,v){var x=q[this.expando];if(void 0!==x){if(void 0!==v){var D=(v=Array.isArray(v)?v.map(u):(v=u(v))in x?[v]:v.match(Q)||[]).length;for(;D--;)delete x[v[D]]}(void 0===v||B.isEmptyObject(x))&&(q.nodeType?q[this.expando]=void 0:delete q[this.expando])}},
hasData:function(q){q=q[this.expando];return void 0!==q&&!B.isEmptyObject(q)}};var Ha=new w,xb=new w,Fc=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,jd=/[A-Z]/g;B.extend({hasData:function(q){return xb.hasData(q)||Ha.hasData(q)},data:function(q,v,x){return xb.access(q,v,x)},removeData:function(q,v){xb.remove(q,v)},_data:function(q,v,x){return Ha.access(q,v,x)},_removeData:function(q,v){Ha.remove(q,v)}});B.fn.extend({data:function(q,v){var x,D,H,M=this[0],R=M&&M.attributes;if(void 0===q){if(this.length&&(H=xb.get(M),
1===M.nodeType&&!Ha.get(M,"hasDataAttrs"))){for(x=R.length;x--;)R[x]&&0===(D=R[x].name).indexOf("data-")&&z(M,D=u(D.slice(5)),H[D]);Ha.set(M,"hasDataAttrs",!0)}return H}return"object"==typeof q?this.each(function(){xb.set(this,q)}):Ea(this,function(X){var ba;if(M&&void 0===X)return void 0!==(ba=xb.get(M,q))||void 0!==(ba=z(M,q))?ba:void 0;this.each(function(){xb.set(this,q,X)})},null,v,1<arguments.length,null,!0)},removeData:function(q){return this.each(function(){xb.remove(this,q)})}});B.extend({queue:function(q,
v,x){var D;if(q)return v=(v||"fx")+"queue",D=Ha.get(q,v),x&&(!D||Array.isArray(x)?D=Ha.access(q,v,B.makeArray(x)):D.push(x)),D||[]},dequeue:function(q,v){v=v||"fx";var x=B.queue(q,v),D=x.length,H=x.shift(),M=B._queueHooks(q,v);"inprogress"===H&&(H=x.shift(),D--);H&&("fx"===v&&x.unshift("inprogress"),delete M.stop,H.call(q,function(){B.dequeue(q,v)},M));!D&&M&&M.empty.fire()},_queueHooks:function(q,v){var x=v+"queueHooks";return Ha.get(q,x)||Ha.access(q,x,{empty:B.Callbacks("once memory").add(function(){Ha.remove(q,
[v+"queue",x])})})}});B.fn.extend({queue:function(q,v){var x=2;return("string"!=typeof q&&(v=q,q="fx",x--),arguments.length<x)?B.queue(this[0],q):void 0===v?this:this.each(function(){var D=B.queue(this,q,v);B._queueHooks(this,q);"fx"===q&&"inprogress"!==D[0]&&B.dequeue(this,q)})},dequeue:function(q){return this.each(function(){B.dequeue(this,q)})},clearQueue:function(q){return this.queue(q||"fx",[])},promise:function(q,v){var x,D=1,H=B.Deferred(),M=this,R=this.length,X=function(){--D||H.resolveWith(M,
[M])};"string"!=typeof q&&(v=q,q=void 0);for(q=q||"fx";R--;)(x=Ha.get(M[R],q+"queueHooks"))&&x.empty&&(D++,x.empty.add(X));return X(),H.promise(v)}});var Wa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,bb=RegExp("^(?:([+-])=|)("+Wa+")([a-z%]*)$","i"),cb=["Top","Right","Bottom","Left"],Db=mb.documentElement,Sb=function(q){return B.contains(q.ownerDocument,q)},wd={composed:!0};Db.getRootNode&&(Sb=function(q){return B.contains(q.ownerDocument,q)||q.getRootNode(wd)===q.ownerDocument});var Qd=function(q,
v){return"none"===(q=v||q).style.display||""===q.style.display&&Sb(q)&&"none"===B.css(q,"display")},mi={};B.fn.extend({show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(q){return"boolean"==typeof q?q?this.show():this.hide():this.each(function(){Qd(this)?B(this).show():B(this).hide()})}});var qe=/^(?:checkbox|radio)$/i,ni=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,oi=/^$|^module$|\/(?:java|ecma)script/i;var af=mb.createDocumentFragment().appendChild(mb.createElement("div"));
(bf=mb.createElement("input")).setAttribute("type","radio");bf.setAttribute("checked","checked");bf.setAttribute("name","t");af.appendChild(bf);lb.checkClone=af.cloneNode(!0).cloneNode(!0).lastChild.checked;af.innerHTML="<textarea>x</textarea>";lb.noCloneChecked=!!af.cloneNode(!0).lastChild.defaultValue;af.innerHTML="<option></option>";lb.option=!!af.lastChild;var Cd={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,
"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Cd.tbody=Cd.tfoot=Cd.colgroup=Cd.caption=Cd.thead;Cd.th=Cd.td;lb.option||(Cd.optgroup=Cd.option=[1,"<select multiple='multiple'>","</select>"]);var Ek=/<|&#?\w+;/,pi=/^([^.]*)(?:\.(.+)|)/;B.event={global:{},add:function(q,v,x,D,H){var M,R,X,ba,ra,Ga,na,Ta;var Za=Ha.get(q);if(vb(q))for(x.handler&&(x=(M=x).handler,H=M.selector),H&&B.find.matchesSelector(Db,H),x.guid||(x.guid=B.guid++),(ba=Za.events)||(ba=Za.events=Object.create(null)),
(R=Za.handle)||(R=Za.handle=function(Lb){return B.event.triggered!==Lb.type?B.event.dispatch.apply(q,arguments):void 0}),Za=(v=(v||"").match(Q)||[""]).length;Za--;){var db=Ta=(X=pi.exec(v[Za])||[])[1];X=(X[2]||"").split(".").sort();db&&(Ga=B.event.special[db]||{},db=(H?Ga.delegateType:Ga.bindType)||db,Ga=B.event.special[db]||{},ra=B.extend({type:db,origType:Ta,data:D,handler:x,guid:x.guid,selector:H,needsContext:H&&B.expr.match.needsContext.test(H),namespace:X.join(".")},M),(na=ba[db])||((na=ba[db]=
[]).delegateCount=0,(!Ga.setup||!1===Ga.setup.call(q,D,X,R))&&q.addEventListener&&q.addEventListener(db,R)),Ga.add&&(Ga.add.call(q,ra),ra.handler.guid||(ra.handler.guid=x.guid)),H?na.splice(na.delegateCount++,0,ra):na.push(ra),B.event.global[db]=!0)}},remove:function(q,v,x,D,H){var M,R,X,ba,ra,Ga,na,Ta,Za=Ha.hasData(q)&&Ha.get(q);if(Za&&(ba=Za.events)){for(ra=(v=(v||"").match(Q)||[""]).length;ra--;)if(Ga=Ta=(X=pi.exec(v[ra])||[])[1],na=(X[2]||"").split(".").sort(),Ga){var db=B.event.special[Ga]||
{};var Lb=ba[Ga=(D?db.delegateType:db.bindType)||Ga]||[];X=X[2]&&RegExp("(^|\\.)"+na.join("\\.(?:.*\\.|)")+"(\\.|$)");for(R=M=Lb.length;M--;){var kc=Lb[M];!H&&Ta!==kc.origType||x&&x.guid!==kc.guid||X&&!X.test(kc.namespace)||D&&D!==kc.selector&&("**"!==D||!kc.selector)||(Lb.splice(M,1),kc.selector&&Lb.delegateCount--,!db.remove||db.remove.call(q,kc))}R&&!Lb.length&&(db.teardown&&!1!==db.teardown.call(q,na,Za.handle)||B.removeEvent(q,Ga,Za.handle),delete ba[Ga])}else for(Ga in ba)B.event.remove(q,Ga+
v[ra],x,D,!0);B.isEmptyObject(ba)&&Ha.remove(q,"handle events")}},dispatch:function(q){var v,x,D,H=Array(arguments.length),M=B.event.fix(q);var R=(Ha.get(this,"events")||Object.create(null))[M.type]||[];var X=B.event.special[M.type]||{};var ba=1;for(H[0]=M;ba<arguments.length;ba++)H[ba]=arguments[ba];if(M.delegateTarget=this,!X.preDispatch||!1!==X.preDispatch.call(this,M)){var ra=B.event.handlers.call(this,M,R);for(ba=0;(x=ra[ba++])&&!M.isPropagationStopped();)for(M.currentTarget=x.elem,R=0;(D=x.handlers[R++])&&
!M.isImmediatePropagationStopped();)M.rnamespace&&!1!==D.namespace&&!M.rnamespace.test(D.namespace)||(M.handleObj=D,M.data=D.data,void 0===(v=((B.event.special[D.origType]||{}).handle||D.handler).apply(x.elem,H))||!1!==(M.result=v)||(M.preventDefault(),M.stopPropagation()));return X.postDispatch&&X.postDispatch.call(this,M),M.result}},handlers:function(q,v){var x,D,H,M=[],R=v.delegateCount,X=q.target;if(R&&X.nodeType&&!("click"===q.type&&1<=q.button))for(;X!==this;X=X.parentNode||this)if(1===X.nodeType&&
("click"!==q.type||!0!==X.disabled)){var ba=0;var ra=[];for(H={};ba<R;ba++)void 0===H[D=(x=v[ba]).selector+" "]&&(H[D]=x.needsContext?-1<B(D,this).index(X):B.find(D,this,null,[X]).length),H[D]&&ra.push(x);ra.length&&M.push({elem:X,handlers:ra})}return X=this,R<v.length&&M.push({elem:X,handlers:v.slice(R)}),M},addProp:function(q,v){Object.defineProperty(B.Event.prototype,q,{enumerable:!0,configurable:!0,get:$a(v)?function(){if(this.originalEvent)return v(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[q]},
set:function(x){Object.defineProperty(this,q,{enumerable:!0,configurable:!0,writable:!0,value:x})}})},fix:function(q){return q[B.expando]?q:new B.Event(q)},special:{load:{noBubble:!0},click:{setup:function(q){q=this||q;return qe.test(q.type)&&q.click&&k(q,"input")&&qa(q,"click",!0),!1},trigger:function(q){q=this||q;return qe.test(q.type)&&q.click&&k(q,"input")&&qa(q,"click"),!0},_default:function(q){q=q.target;return qe.test(q.type)&&q.click&&k(q,"input")&&Ha.get(q,"click")||k(q,"a")}},beforeunload:{postDispatch:function(q){void 0!==
q.result&&q.originalEvent&&(q.originalEvent.returnValue=q.result)}}}};B.removeEvent=function(q,v,x){q.removeEventListener&&q.removeEventListener(v,x)};B.Event=function(q,v){if(!(this instanceof B.Event))return new B.Event(q,v);q&&q.type?(this.originalEvent=q,this.type=q.type,this.isDefaultPrevented=q.defaultPrevented||void 0===q.defaultPrevented&&!1===q.returnValue?Y:ka,this.target=q.target&&3===q.target.nodeType?q.target.parentNode:q.target,this.currentTarget=q.currentTarget,this.relatedTarget=q.relatedTarget):
this.type=q;v&&B.extend(this,v);this.timeStamp=q&&q.timeStamp||Date.now();this[B.expando]=!0};B.Event.prototype={constructor:B.Event,isDefaultPrevented:ka,isPropagationStopped:ka,isImmediatePropagationStopped:ka,isSimulated:!1,preventDefault:function(){var q=this.originalEvent;this.isDefaultPrevented=Y;q&&!this.isSimulated&&q.preventDefault()},stopPropagation:function(){var q=this.originalEvent;this.isPropagationStopped=Y;q&&!this.isSimulated&&q.stopPropagation()},stopImmediatePropagation:function(){var q=
this.originalEvent;this.isImmediatePropagationStopped=Y;q&&!this.isSimulated&&q.stopImmediatePropagation();this.stopPropagation()}};B.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},B.event.addProp);
B.each({focus:"focusin",blur:"focusout"},function(q,v){function x(D){if(mb.documentMode){var H=Ha.get(this,"handle"),M=B.event.fix(D);M.type="focusin"===D.type?"focus":"blur";M.isSimulated=!0;H(D);M.target===M.currentTarget&&H(M)}else B.event.simulate(v,D.target,B.event.fix(D))}B.event.special[q]={setup:function(){var D;if(qa(this,q,!0),!mb.documentMode)return!1;(D=Ha.get(this,v))||this.addEventListener(v,x);Ha.set(this,v,(D||0)+1)},trigger:function(){return qa(this,q),!0},teardown:function(){var D;
if(!mb.documentMode)return!1;(D=Ha.get(this,v)-1)?Ha.set(this,v,D):(this.removeEventListener(v,x),Ha.remove(this,v))},_default:function(D){return Ha.get(D.target,q)},delegateType:v};B.event.special[v]={setup:function(){var D=this.ownerDocument||this.document||this,H=mb.documentMode?this:D,M=Ha.get(H,v);M||(mb.documentMode?this.addEventListener(v,x):D.addEventListener(q,x,!0));Ha.set(H,v,(M||0)+1)},teardown:function(){var D=this.ownerDocument||this.document||this,H=mb.documentMode?this:D,M=Ha.get(H,
v)-1;M?Ha.set(H,v,M):(mb.documentMode?this.removeEventListener(v,x):D.removeEventListener(q,x,!0),Ha.remove(H,v))}}});B.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(q,v){B.event.special[q]={delegateType:v,bindType:v,handle:function(x){var D,H=x.relatedTarget,M=x.handleObj;return H&&(H===this||B.contains(this,H))||(x.type=M.origType,D=M.handler.apply(this,arguments),x.type=v),D}}});B.fn.extend({on:function(q,v,x,D){return ha(this,
q,v,x,D)},one:function(q,v,x,D){return ha(this,q,v,x,D,1)},off:function(q,v,x){var D,H;if(q&&q.preventDefault&&q.handleObj)return D=q.handleObj,B(q.delegateTarget).off(D.namespace?D.origType+"."+D.namespace:D.origType,D.selector,D.handler),this;if("object"==typeof q){for(H in q)this.off(H,v,q[H]);return this}return(!1===v||"function"==typeof v)&&(x=v,v=void 0),!1===x&&(x=ka),this.each(function(){B.event.remove(this,q,x,v)})}});var Ik=/<script|<style|<link/i,Ng=/checked\s*(?:[^=]|=\s*.checked.)/i,
Ye=/^\s*<!\[CDATA\[|\]\]>\s*$/g;B.extend({htmlPrefilter:function(q){return q},clone:function(q,v,x){var D,H,M=q.cloneNode(!0),R=Sb(q);if(!(lb.noCloneChecked||1!==q.nodeType&&11!==q.nodeType||B.isXMLDoc(q))){var X=0;var ba=O(M);for(D=(H=O(q)).length;X<D;X++){var ra=H[X],Ga=ba[X],na=Ga.nodeName.toLowerCase();"input"===na&&qe.test(ra.type)?Ga.checked=ra.checked:("input"===na||"textarea"===na)&&(Ga.defaultValue=ra.defaultValue);!0}}if(v)if(x)for(X=0,H=H||O(q),ba=ba||O(M),D=H.length;X<D;X++)V(H[X],ba[X]);
else V(q,M);return 0<(ba=O(M,"script")).length&&N(ba,!R&&O(q,"script")),M},cleanData:function(q){for(var v,x,D,H=B.event.special,M=0;void 0!==(x=q[M]);M++)if(vb(x)){if(v=x[Ha.expando]){if(v.events)for(D in v.events)H[D]?B.event.remove(x,D):B.removeEvent(x,D,v.handle);x[Ha.expando]=void 0}x[xb.expando]&&(x[xb.expando]=void 0)}}});B.fn.extend({detach:function(q){return ya(this,q,!0)},remove:function(q){return ya(this,q)},text:function(q){return Ea(this,function(v){return void 0===v?B.text(this):this.empty().each(function(){1!==
this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=v)})},null,q,arguments.length)},append:function(){return Na(this,arguments,function(q){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Da(this,q).appendChild(q)})},prepend:function(){return Na(this,arguments,function(q){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var v=Da(this,q);v.insertBefore(q,v.firstChild)}})},before:function(){return Na(this,arguments,function(q){this.parentNode&&this.parentNode.insertBefore(q,
this)})},after:function(){return Na(this,arguments,function(q){this.parentNode&&this.parentNode.insertBefore(q,this.nextSibling)})},empty:function(){for(var q,v=0;null!=(q=this[v]);v++)1===q.nodeType&&(B.cleanData(O(q,!1)),q.textContent="");return this},clone:function(q,v){return q=null!=q&&q,v=null==v?q:v,this.map(function(){return B.clone(this,q,v)})},html:function(q){return Ea(this,function(v){var x=this[0]||{},D=0,H=this.length;if(void 0===v&&1===x.nodeType)return x.innerHTML;if("string"==typeof v&&
!Ik.test(v)&&!Cd[(ni.exec(v)||["",""])[1].toLowerCase()]){v=B.htmlPrefilter(v);try{for(;D<H;D++)x=this[D]||{},1===x.nodeType&&(B.cleanData(O(x,!1)),x.innerHTML=v);x=0}catch(M){}}x&&this.empty().append(v)},null,q,arguments.length)},replaceWith:function(){var q=[];return Na(this,arguments,function(v){var x=this.parentNode;0>B.inArray(this,q)&&(B.cleanData(O(this)),x&&x.replaceChild(v,this))},q)}});B.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},
function(q,v){B.fn[q]=function(x){for(var D=[],H=B(x),M=H.length-1,R=0;R<=M;R++)x=R===M?this:this.clone(!0),B(H[R])[v](x),qb.apply(D,x.get());return this.pushStack(D)}});var Df=RegExp("^("+Wa+")(?!px)[a-z%]+$","i"),Bf=/^--/,Cf=function(q){var v=q.ownerDocument.defaultView;return v&&v.opener||(v=a),v.getComputedStyle(q)},kg=function(q,v,x){var D,H={};for(D in v)H[D]=q.style[D],q.style[D]=v[D];for(D in x=x.call(q),v)q.style[D]=H[D];return x},Kd=RegExp(cb.join("|"),"i");!function(){function q(){if(ba){X.style.cssText=
"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";ba.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";Db.appendChild(X).appendChild(ba);var ra=a.getComputedStyle(ba);v="1%"!==ra.top;R=12===Math.round(parseFloat(ra.marginLeft));ba.style.right="60%";H=36===Math.round(parseFloat(ra.right));x=36===Math.round(parseFloat(ra.width));ba.style.position="absolute";D=12===Math.round(parseFloat(ba.offsetWidth/
3));Db.removeChild(X);ba=null}}var v,x,D,H,M,R,X=mb.createElement("div"),ba=mb.createElement("div");ba.style&&(ba.style.backgroundClip="content-box",ba.cloneNode(!0).style.backgroundClip="",lb.clearCloneStyle="content-box"===ba.style.backgroundClip,B.extend(lb,{boxSizingReliable:function(){return q(),x},pixelBoxStyles:function(){return q(),H},pixelPosition:function(){return q(),v},reliableMarginLeft:function(){return q(),R},scrollboxSize:function(){return q(),D},reliableTrDimensions:function(){var ra,
Ga,na,Ta;return null==M&&(ra=mb.createElement("table"),Ga=mb.createElement("tr"),na=mb.createElement("div"),ra.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ga.style.cssText="box-sizing:content-box;border:1px solid",Ga.style.height="1px",na.style.height="9px",na.style.display="block",Db.appendChild(ra).appendChild(Ga).appendChild(na),M=parseInt((Ta=a.getComputedStyle(Ga)).height,10)+parseInt(Ta.borderTopWidth,10)+parseInt(Ta.borderBottomWidth,10)===Ga.offsetHeight,Db.removeChild(ra)),
M}}))}();var $d=["Webkit","Moz","ms"],Ge=mb.createElement("div").style,Og={},Jk=/^(none|table(?!-c[ea]).+)/,Rg={position:"absolute",visibility:"hidden",display:"block"},Ef={letterSpacing:"0",fontWeight:"400"};B.extend({cssHooks:{opacity:{get:function(q,v){if(v)return q=wb(q,"opacity"),""===q?"1":q}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,
gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(q,v,x,D){if(q&&3!==q.nodeType&&8!==q.nodeType&&q.style){var H,M,R,X=u(v),ba=Bf.test(v),ra=q.style;if(ba||(v=Tb(X)),R=B.cssHooks[v]||B.cssHooks[X],void 0===x)return R&&"get"in R&&void 0!==(H=R.get(q,!1,D))?H:ra[v];"string"===(M=void 0===x?"undefined":Vd(x))&&(H=bb.exec(x))&&H[1]&&
(x=G(q,v,H),M="number");null!=x&&x==x&&("number"!==M||ba||(x+=H&&H[3]||(B.cssNumber[X]?"":"px")),lb.clearCloneStyle||""!==x||0!==v.indexOf("background")||(ra[v]="inherit"),R&&"set"in R&&void 0===(x=R.set(q,x,D))||(ba?ra.setProperty(v,x):ra[v]=x))}},css:function(q,v,x,D){var H,M,R,X=u(v);return(Bf.test(v)||(v=Tb(X)),(R=B.cssHooks[v]||B.cssHooks[X])&&"get"in R&&(H=R.get(q,!0,x)),void 0===H&&(H=wb(q,v,D)),"normal"===H&&v in Ef&&(H=Ef[v]),""===x||x)?(M=parseFloat(H),!0===x||isFinite(M)?M||0:H):H}});B.each(["height",
"width"],function(q,v){B.cssHooks[v]={get:function(x,D,H){if(D)return!Jk.test(B.css(x,"display"))||x.getClientRects().length&&x.getBoundingClientRect().width?sc(x,v,H):kg(x,Rg,function(){return sc(x,v,H)})},set:function(x,D,H){var M,R=Cf(x),X=!lb.scrollboxSize()&&"absolute"===R.position,ba=(X||H)&&"border-box"===B.css(x,"boxSizing",!1,R);H=H?Sa(x,v,H,ba,R):0;return ba&&X&&(H-=Math.ceil(x["offset"+v[0].toUpperCase()+v.slice(1)]-parseFloat(R[v])-Sa(x,v,"border",!1,R)-.5)),H&&(M=bb.exec(D))&&"px"!==
(M[3]||"px")&&(x.style[v]=D,D=B.css(x,v)),Fb(x,D,H)}}});B.cssHooks.marginLeft=ib(lb.reliableMarginLeft,function(q,v){if(v)return(parseFloat(wb(q,"marginLeft"))||q.getBoundingClientRect().left-kg(q,{marginLeft:0},function(){return q.getBoundingClientRect().left}))+"px"});B.each({margin:"",padding:"",border:"Width"},function(q,v){B.cssHooks[q+v]={expand:function(x){var D=0,H={};for(x="string"==typeof x?x.split(" "):[x];4>D;D++)H[q+cb[D]+v]=x[D]||x[D-2]||x[0];return H}};"margin"!==q&&(B.cssHooks[q+v].set=
Fb)});B.fn.extend({css:function(q,v){return Ea(this,function(x,D,H){var M,R={},X=0;if(Array.isArray(D)){H=Cf(x);for(M=D.length;X<M;X++)R[D[X]]=B.css(x,D[X],!1,H);return R}return void 0!==H?B.style(x,D,H):B.css(x,D)},q,v,1<arguments.length)}});B.Tween=cc;cc.prototype={constructor:cc,init:function(q,v,x,D,H,M){this.elem=q;this.prop=x;this.easing=H||B.easing._default;this.options=v;this.start=this.now=this.cur();this.end=D;this.unit=M||(B.cssNumber[x]?"":"px")},cur:function(){var q=cc.propHooks[this.prop];
return q&&q.get?q.get(this):cc.propHooks._default.get(this)},run:function(q){var v,x=cc.propHooks[this.prop];return this.options.duration?this.pos=v=B.easing[this.easing](q,this.options.duration*q,0,1,this.options.duration):this.pos=v=q,this.now=(this.end-this.start)*v+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),x&&x.set?x.set(this):cc.propHooks._default.set(this),this}};cc.prototype.init.prototype=cc.prototype;cc.propHooks={_default:{get:function(q){var v;return 1!==
q.elem.nodeType||null!=q.elem[q.prop]&&null==q.elem.style[q.prop]?q.elem[q.prop]:(v=B.css(q.elem,q.prop,""))&&"auto"!==v?v:0},set:function(q){B.fx.step[q.prop]?B.fx.step[q.prop](q):1!==q.elem.nodeType||!B.cssHooks[q.prop]&&null==q.elem.style[Tb(q.prop)]?q.elem[q.prop]=q.now:B.style(q.elem,q.prop,q.now+q.unit)}}};cc.propHooks.scrollTop=cc.propHooks.scrollLeft={set:function(q){q.elem.nodeType&&q.elem.parentNode&&(q.elem[q.prop]=q.now)}};B.easing={linear:function(q){return q},swing:function(q){return.5-
Math.cos(q*Math.PI)/2},_default:"swing"};B.fx=cc.prototype.init;B.fx.step={};var bf,Ze,lg,qi=/^(?:toggle|show|hide)$/,ri=/queueHooks$/;B.Animation=B.extend(A,{tweeners:{"*":[function(q,v){var x=this.createTween(q,v);return G(x.elem,q,bb.exec(v),x),x}]},tweener:function(q,v){$a(q)?(v=q,q=["*"]):q=q.match(Q);for(var x,D=0,H=q.length;D<H;D++)x=q[D],A.tweeners[x]=A.tweeners[x]||[],A.tweeners[x].unshift(v)},prefilters:[function(q,v,x){var D,H,M,R,X,ba,ra,Ga="width"in v||"height"in v,na=this,Ta={},Za=q.style,
db=q.nodeType&&Qd(q),Lb=Ha.get(q,"fxshow");for(D in x.queue||(null==(R=B._queueHooks(q,"fx")).unqueued&&(R.unqueued=0,X=R.empty.fire,R.empty.fire=function(){R.unqueued||X()}),R.unqueued++,na.always(function(){na.always(function(){R.unqueued--;B.queue(q,"fx").length||R.empty.fire()})})),v)if(H=v[D],qi.test(H)){if(delete v[D],M=M||"toggle"===H,H===(db?"hide":"show")){if("show"!==H||!Lb||void 0===Lb[D])continue;db=!0}Ta[D]=Lb&&Lb[D]||B.style(q,D)}if((v=!B.isEmptyObject(v))||!B.isEmptyObject(Ta))for(D in Ga&&
1===q.nodeType&&(x.overflow=[Za.overflow,Za.overflowX,Za.overflowY],null==(ba=Lb&&Lb.display)&&(ba=Ha.get(q,"display")),"none"===(ra=B.css(q,"display"))&&(ba?ra=ba:(L([q],!0),ba=q.style.display||ba,ra=B.css(q,"display"),L([q]))),("inline"===ra||"inline-block"===ra&&null!=ba)&&"none"===B.css(q,"float")&&(v||(na.done(function(){Za.display=ba}),null!=ba||(ba="none"===(ra=Za.display)?"":ra)),Za.display="inline-block")),x.overflow&&(Za.overflow="hidden",na.always(function(){Za.overflow=x.overflow[0];Za.overflowX=
x.overflow[1];Za.overflowY=x.overflow[2]})),v=!1,Ta)v||(Lb?"hidden"in Lb&&(db=Lb.hidden):Lb=Ha.access(q,"fxshow",{display:ba}),M&&(Lb.hidden=!db),db&&L([q],!0),na.done(function(){for(D in db||L([q]),Ha.remove(q,"fxshow"),Ta)B.style(q,D,Ta[D])})),v=za(db?Lb[D]:0,D,na),D in Lb||(Lb[D]=v.start,db&&(v.end=v.start,v.start=0))}],prefilter:function(q,v){v?A.prefilters.unshift(q):A.prefilters.push(q)}});B.speed=function(q,v,x){var D=q&&"object"==typeof q?B.extend({},q):{complete:x||!x&&v||$a(q)&&q,duration:q,
easing:x&&v||v&&!$a(v)&&v};return B.fx.off?D.duration=0:"number"!=typeof D.duration&&(D.duration in B.fx.speeds?D.duration=B.fx.speeds[D.duration]:D.duration=B.fx.speeds._default),(null==D.queue||!0===D.queue)&&(D.queue="fx"),D.old=D.complete,D.complete=function(){$a(D.old)&&D.old.call(this);D.queue&&B.dequeue(this,D.queue)},D};B.fn.extend({fadeTo:function(q,v,x,D){return this.filter(Qd).css("opacity",0).show().end().animate({opacity:v},q,x,D)},animate:function(q,v,x,D){var H=B.isEmptyObject(q),M=
B.speed(v,x,D);v=function(){var R=A(this,B.extend({},q),M);(H||Ha.get(this,"finish"))&&R.stop(!0)};return v.finish=v,H||!1===M.queue?this.each(v):this.queue(M.queue,v)},stop:function(q,v,x){var D=function(H){var M=H.stop;delete H.stop;M(x)};return"string"!=typeof q&&(x=v,v=q,q=void 0),v&&this.queue(q||"fx",[]),this.each(function(){var H=!0,M=null!=q&&q+"queueHooks",R=B.timers,X=Ha.get(this);if(M)X[M]&&X[M].stop&&D(X[M]);else for(M in X)X[M]&&X[M].stop&&ri.test(M)&&D(X[M]);for(M=R.length;M--;)R[M].elem!==
this||null!=q&&R[M].queue!==q||(R[M].anim.stop(x),H=!1,R.splice(M,1));!H&&x||B.dequeue(this,q)})},finish:function(q){return!1!==q&&(q=q||"fx"),this.each(function(){var v=Ha.get(this),x=v[q+"queue"];var D=v[q+"queueHooks"];var H=B.timers,M=x?x.length:0;v.finish=!0;B.queue(this,q,[]);D&&D.stop&&D.stop.call(this,!0);for(D=H.length;D--;)H[D].elem===this&&H[D].queue===q&&(H[D].anim.stop(!0),H.splice(D,1));for(D=0;D<M;D++)x[D]&&x[D].finish&&x[D].finish.call(this);delete v.finish})}});B.each(["toggle","show",
"hide"],function(q,v){var x=B.fn[v];B.fn[v]=function(D,H,M){return null==D||"boolean"==typeof D?x.apply(this,arguments):this.animate(Z(v,!0),D,H,M)}});B.each({slideDown:Z("show"),slideUp:Z("hide"),slideToggle:Z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(q,v){B.fn[q]=function(x,D,H){return this.animate(v,x,D,H)}});B.timers=[];B.fx.tick=function(){var q,v=0,x=B.timers;for(Ze=Date.now();v<x.length;v++)(q=x[v])()||x[v]!==q||x.splice(v--,1);x.length||
B.fx.stop();Ze=void 0};B.fx.timer=function(q){B.timers.push(q);B.fx.start()};B.fx.interval=13;B.fx.start=function(){lg||(lg=!0,function v(){lg&&(!1===mb.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(v):a.setTimeout(v,B.fx.interval),B.fx.tick())}())};B.fx.stop=function(){lg=null};B.fx.speeds={slow:600,fast:200,_default:400};B.fn.delay=function(q,v){return q=B.fx&&B.fx.speeds[q]||q,v=v||"fx",this.queue(v,function(x,D){var H=a.setTimeout(x,q);D.stop=function(){a.clearTimeout(H)}})};var cf=
mb.createElement("input");var Sg=mb.createElement("select").appendChild(mb.createElement("option"));cf.type="checkbox";lb.checkOn=""!==cf.value;lb.optSelected=Sg.selected;(cf=mb.createElement("input")).value="t";cf.type="radio";lb.radioValue="t"===cf.value;var df=B.expr.attrHandle;B.fn.extend({attr:function(q,v){return Ea(this,B.attr,q,v,1<arguments.length)},removeAttr:function(q){return this.each(function(){B.removeAttr(this,q)})}});B.extend({attr:function(q,v,x){var D,H,M=q.nodeType;if(3!==M&&8!==
M&&2!==M){if(void 0===q.getAttribute)return B.prop(q,v,x);if(1===M&&B.isXMLDoc(q)||(H=B.attrHooks[v.toLowerCase()]||(B.expr.match.bool.test(v)?si:void 0)),void 0!==x){if(null===x){B.removeAttr(q,v);return}return H&&"set"in H&&void 0!==(D=H.set(q,x,v))?D:(q.setAttribute(v,x+""),x)}return H&&"get"in H&&null!==(D=H.get(q,v))?D:null==(D=B.find.attr(q,v))?void 0:D}},attrHooks:{type:{set:function(q,v){if(!lb.radioValue&&"radio"===v&&k(q,"input")){var x=q.value;return q.setAttribute("type",v),x&&(q.value=
x),v}}}},removeAttr:function(q,v){var x=0,D=v&&v.match(Q);if(D&&1===q.nodeType)for(;v=D[x++];)q.removeAttribute(v)}});var si={set:function(q,v,x){return!1===v?B.removeAttr(q,x):q.setAttribute(x,x),x}};B.each(B.expr.match.bool.source.match(/\w+/g),function(q,v){var x=df[v]||B.find.attr;df[v]=function(D,H,M){var R,X,ba=H.toLowerCase();return M||(X=df[ba],df[ba]=R,R=null!=x(D,H,M)?ba:null,df[ba]=X),R}});var Kk=/^(?:input|select|textarea|button)$/i,Lk=/^(?:a|area)$/i;B.fn.extend({prop:function(q,v){return Ea(this,
B.prop,q,v,1<arguments.length)},removeProp:function(q){return this.each(function(){delete this[B.propFix[q]||q]})}});B.extend({prop:function(q,v,x){var D,H,M=q.nodeType;if(3!==M&&8!==M&&2!==M)return(1===M&&B.isXMLDoc(q)||(v=B.propFix[v]||v,H=B.propHooks[v]),void 0!==x)?H&&"set"in H&&void 0!==(D=H.set(q,x,v))?D:q[v]=x:H&&"get"in H&&null!==(D=H.get(q,v))?D:q[v]},propHooks:{tabIndex:{get:function(q){var v=B.find.attr(q,"tabindex");return v?parseInt(v,10):Kk.test(q.nodeName)||Lk.test(q.nodeName)&&q.href?
0:-1}}},propFix:{for:"htmlFor",class:"className"}});lb.optSelected||(B.propHooks.selected={get:function(q){q=q.parentNode;return q&&q.parentNode&&q.parentNode.selectedIndex,null},set:function(q){q=q.parentNode;q&&(q.selectedIndex,q.parentNode&&q.parentNode.selectedIndex)}});B.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){B.propFix[this.toLowerCase()]=this});B.fn.extend({addClass:function(q){var v,x,D,H,M,R;return $a(q)?
this.each(function(X){B(this).addClass(q.call(this,X,oa(this)))}):(v=ma(q)).length?this.each(function(){if(D=oa(this),x=1===this.nodeType&&" "+T(D)+" "){for(M=0;M<v.length;M++)H=v[M],0>x.indexOf(" "+H+" ")&&(x+=H+" ");D!==(R=T(x))&&this.setAttribute("class",R)}}):this},removeClass:function(q){var v,x,D,H,M,R;return $a(q)?this.each(function(X){B(this).removeClass(q.call(this,X,oa(this)))}):arguments.length?(v=ma(q)).length?this.each(function(){if(D=oa(this),x=1===this.nodeType&&" "+T(D)+" "){for(M=
0;M<v.length;M++)for(H=v[M];-1<x.indexOf(" "+H+" ");)x=x.replace(" "+H+" "," ");D!==(R=T(x))&&this.setAttribute("class",R)}}):this:this.attr("class","")},toggleClass:function(q,v){var x,D,H,M,R=void 0===q?"undefined":Vd(q),X="string"===R||Array.isArray(q);return $a(q)?this.each(function(ba){B(this).toggleClass(q.call(this,ba,oa(this),v),v)}):"boolean"==typeof v&&X?v?this.addClass(q):this.removeClass(q):(x=ma(q),this.each(function(){if(X)for(H=0,M=B(this);H<x.length;H++)D=x[H],M.hasClass(D)?M.removeClass(D):
M.addClass(D);else(void 0===q||"boolean"===R)&&((D=oa(this))&&Ha.set(this,"__className__",D),this.setAttribute&&this.setAttribute("class",D||!1===q?"":Ha.get(this,"__className__")||""))}))},hasClass:function(q){var v,x=0;for(q=" "+q+" ";v=this[x++];)if(1===v.nodeType&&-1<(" "+T(oa(v))+" ").indexOf(q))return!0;return!1}});var Tg=/\r/g;B.fn.extend({val:function(q){var v,x,D,H=this[0];return arguments.length?(D=$a(q),this.each(function(M){var R;1!==this.nodeType||(null==(R=D?q.call(this,M,B(this).val()):
q)?R="":"number"==typeof R?R+="":Array.isArray(R)&&(R=B.map(R,function(X){return null==X?"":X+""})),(v=B.valHooks[this.type]||B.valHooks[this.nodeName.toLowerCase()])&&"set"in v&&void 0!==v.set(this,R,"value")||(this.value=R))})):H?(v=B.valHooks[H.type]||B.valHooks[H.nodeName.toLowerCase()])&&"get"in v&&void 0!==(x=v.get(H,"value"))?x:"string"==typeof(x=H.value)?x.replace(Tg,""):null==x?"":x:void 0}});B.extend({valHooks:{option:{get:function(q){var v=B.find.attr(q,"value");return null!=v?v:T(B.text(q))}},
select:{get:function(q){var v,x,D=q.options,H=q.selectedIndex,M="select-one"===q.type,R=M?null:[],X=M?H+1:D.length;for(x=0>H?X:M?H:0;x<X;x++)if(!(!(v=D[x]).selected&&x!==H||v.disabled||v.parentNode.disabled&&k(v.parentNode,"optgroup"))){if(q=B(v).val(),M)return q;R.push(q)}return R},set:function(q,v){var x,D,H=q.options;v=B.makeArray(v);for(var M=H.length;M--;)((D=H[M]).selected=-1<B.inArray(B.valHooks.option.get(D),v))&&(x=!0);return x||(q.selectedIndex=-1),v}}}});B.each(["radio","checkbox"],function(){B.valHooks[this]=
{set:function(q,v){if(Array.isArray(v))return q.checked=-1<B.inArray(B(q).val(),v)}};lb.checkOn||(B.valHooks[this].get=function(q){return null===q.getAttribute("value")?"on":q.value})});var ef=a.location,ti=Date.now(),Ug=/\?/;B.parseXML=function(q){var v;if(!q||"string"!=typeof q)return null;try{var x=(new a.DOMParser).parseFromString(q,"text/xml")}catch(D){}return v=x&&x.getElementsByTagName("parsererror")[0],(!x||v)&&B.error("Invalid XML: "+(v?B.map(v.childNodes,function(D){return D.textContent}).join("\n"):
q)),x};var ui=/^(?:focusinfocus|focusoutblur)$/,vi=function(q){q.stopPropagation()};B.extend(B.event,{trigger:function(q,v,x,D){var H,M,R,X,ba,ra,Ga=[x||mb],na=xc.call(q,"type")?q.type:q;var Ta=xc.call(q,"namespace")?q.namespace.split("."):[];if(H=ra=M=x=x||mb,3!==x.nodeType&&8!==x.nodeType&&!ui.test(na+B.event.triggered)&&(-1<na.indexOf(".")&&(na=(Ta=na.split(".")).shift(),Ta.sort()),R=0>na.indexOf(":")&&"on"+na,(q=q[B.expando]?q:new B.Event(na,"object"==typeof q&&q)).isTrigger=D?2:3,q.namespace=
Ta.join("."),q.rnamespace=q.namespace?RegExp("(^|\\.)"+Ta.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,q.result=void 0,q.target||(q.target=x),v=null==v?[q]:B.makeArray(v,[q]),ba=B.event.special[na]||{},D||!ba.trigger||!1!==ba.trigger.apply(x,v))){if(!D&&!ba.noBubble&&!Zc(x)){var Za=ba.delegateType||na;for(ui.test(Za+na)||(H=H.parentNode);H;H=H.parentNode)Ga.push(H),M=H;M===(x.ownerDocument||mb)&&Ga.push(M.defaultView||M.parentWindow||a)}for(Ta=0;(H=Ga[Ta++])&&!q.isPropagationStopped();)ra=H,q.type=1<Ta?
Za:ba.bindType||na,(X=(Ha.get(H,"events")||Object.create(null))[q.type]&&Ha.get(H,"handle"))&&X.apply(H,v),(X=R&&H[R])&&X.apply&&vb(H)&&(q.result=X.apply(H,v),!1===q.result&&q.preventDefault());return q.type=na,!D&&!q.isDefaultPrevented()&&(!ba._default||!1===ba._default.apply(Ga.pop(),v))&&vb(x)&&R&&$a(x[na])&&!Zc(x)&&((M=x[R])&&(x[R]=null),B.event.triggered=na,q.isPropagationStopped()&&ra.addEventListener(na,vi),x[na](),q.isPropagationStopped()&&ra.removeEventListener(na,vi),B.event.triggered=void 0,
M&&(x[R]=M)),q.result}},simulate:function(q,v,x){q=B.extend(new B.Event,x,{type:q,isSimulated:!0});B.event.trigger(q,null,v)}});B.fn.extend({trigger:function(q,v){return this.each(function(){B.event.trigger(q,v,this)})},triggerHandler:function(q,v){var x=this[0];if(x)return B.event.trigger(q,v,x,!0)}});var wi=/\[\]$/,Vg=/\r?\n/g,Mk=/^(?:submit|button|image|reset|file)$/i,Nk=/^(?:input|select|textarea|keygen)/i;B.param=function(q,v){var x,D=[],H=function(M,R){R=$a(R)?R():R;D[D.length]=encodeURIComponent(M)+
"="+encodeURIComponent(null==R?"":R)};if(null==q)return"";if(Array.isArray(q)||q.jquery&&!B.isPlainObject(q))B.each(q,function(){H(this.name,this.value)});else for(x in q)!function Ga(R,X,ba,ra){var na;if(Array.isArray(X))B.each(X,function(Ta,Za){ba||wi.test(R)?ra(R,Za):Ga(R+"["+("object"==typeof Za&&null!=Za?Ta:"")+"]",Za,ba,ra)});else if(ba||"object"!==b(X))ra(R,X);else for(na in X)Ga(R+"["+na+"]",X[na],ba,ra)}(x,q[x],v,H);return D.join("&")};B.fn.extend({serialize:function(){return B.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var q=B.prop(this,"elements");return q?B.makeArray(q):this}).filter(function(){var q=this.type;return this.name&&!B(this).is(":disabled")&&Nk.test(this.nodeName)&&!Mk.test(q)&&(this.checked||!qe.test(q))}).map(function(q,v){q=B(this).val();return null==q?null:Array.isArray(q)?B.map(q,function(x){return{name:v.name,value:x.replace(Vg,"\r\n")}}):{name:v.name,value:q.replace(Vg,"\r\n")}}).get()}});var Ok=/%20/g,Pk=/#.*$/,Qk=/([?&])_=[^&]*/,Rk=/^(.*?):[ \t]*([^\r\n]*)$/mg,
Sk=/^(?:GET|HEAD)$/,Tk=/^\/\//,xi={},Pg={},re="*/".concat("*"),mg=mb.createElement("a");mg.href=ef.href;B.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ef.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ef.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":re,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,
html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":B.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(q,v){return v?dc(dc(q,B.ajaxSettings),v):dc(B.ajaxSettings,q)},ajaxPrefilter:rb(xi),ajaxTransport:rb(Pg),ajax:function(q,v){function x(Bb,lc,Rc,Ld){var Hc,oc,nd,oe,He,td=lc;Qb||(Qb=!0,X&&a.clearTimeout(X),D=void 0,M=Ld||"",Nb.readyState=0<Bb?4:0,Hc=200<=
Bb&&300>Bb||304===Bb,Rc&&(oe=function(Xc,fd,be){for(var pe,gd,rc,Ic,Pd=Xc.contents,Mc=Xc.dataTypes;"*"===Mc[0];)Mc.shift(),void 0===pe&&(pe=Xc.mimeType||fd.getResponseHeader("Content-Type"));if(pe)for(gd in Pd)if(Pd[gd]&&Pd[gd].test(pe)){Mc.unshift(gd);break}if(Mc[0]in be)rc=Mc[0];else{for(gd in be){if(!Mc[0]||Xc.converters[gd+" "+Mc[0]]){rc=gd;break}Ic||=gd}rc=rc||Ic}if(rc)return rc!==Mc[0]&&Mc.unshift(rc),be[rc]}(na,Nb,Rc)),!Hc&&-1<B.inArray("script",na.dataTypes)&&0>B.inArray("json",na.dataTypes)&&
(na.converters["text script"]=function(){}),oe=function(Xc,fd,be,pe){var gd,rc,Ic,Pd,Mc,md={},$e=Xc.dataTypes.slice();if($e[1])for(Ic in Xc.converters)md[Ic.toLowerCase()]=Xc.converters[Ic];for(rc=$e.shift();rc;)if(Xc.responseFields[rc]&&(be[Xc.responseFields[rc]]=fd),!Mc&&pe&&Xc.dataFilter&&(fd=Xc.dataFilter(fd,Xc.dataType)),Mc=rc,rc=$e.shift())if("*"===rc)rc=Mc;else if("*"!==Mc&&Mc!==rc){if(!(Ic=md[Mc+" "+rc]||md["* "+rc]))for(gd in md)if((Pd=gd.split(" "))[1]===rc&&(Ic=md[Mc+" "+Pd[0]]||md["* "+
Pd[0]])){!0===Ic?Ic=md[gd]:!0!==md[gd]&&(rc=Pd[0],$e.unshift(Pd[1]));break}if(!0!==Ic)if(Ic&&Xc.throws)fd=Ic(fd);else try{fd=Ic(fd)}catch(jg){return{state:"parsererror",error:Ic?jg:"No conversion from "+Mc+" to "+rc}}}return{state:"success",data:fd}}(na,oe,Nb,Hc),Hc?(na.ifModified&&((He=Nb.getResponseHeader("Last-Modified"))&&(B.lastModified[H]=He),(He=Nb.getResponseHeader("etag"))&&(B.etag[H]=He)),204===Bb||"HEAD"===na.type?td="nocontent":304===Bb?td="notmodified":(td=oe.state,oc=oe.data,Hc=!(nd=
oe.error))):(nd=td,(Bb||!td)&&(td="error",0>Bb&&(Bb=0))),Nb.status=Bb,Nb.statusText=(lc||td)+"",Hc?db.resolveWith(Ta,[oc,td,Nb]):db.rejectWith(Ta,[Nb,td,nd]),Nb.statusCode(kc),kc=void 0,ba&&Za.trigger(Hc?"ajaxSuccess":"ajaxError",[Nb,na,Hc?oc:nd]),Lb.fireWith(Ta,[Nb,td]),!ba||(Za.trigger("ajaxComplete",[Nb,na]),--B.active||B.event.trigger("ajaxStop")))}"object"==typeof q&&(v=q,q=void 0);v=v||{};var D,H,M,R,X,ba,ra,Ga,na=B.ajaxSetup({},v),Ta=na.context||na,Za=na.context&&(Ta.nodeType||Ta.jquery)?B(Ta):
B.event,db=B.Deferred(),Lb=B.Callbacks("once memory"),kc=na.statusCode||{},Eb={},Nc={},sd="canceled",Nb={readyState:0,getResponseHeader:function(Bb){var lc;if(Qb){if(!R)for(R={};lc=Rk.exec(M);)R[lc[1].toLowerCase()+" "]=(R[lc[1].toLowerCase()+" "]||[]).concat(lc[2]);lc=R[Bb.toLowerCase()+" "]}return null==lc?null:lc.join(", ")},getAllResponseHeaders:function(){return Qb?M:null},setRequestHeader:function(Bb,lc){return null==Qb&&(Eb[Bb=Nc[Bb.toLowerCase()]=Nc[Bb.toLowerCase()]||Bb]=lc),this},overrideMimeType:function(Bb){return null==
Qb&&(na.mimeType=Bb),this},statusCode:function(Bb){var lc;if(Bb)if(Qb)Nb.always(Bb[Nb.status]);else for(lc in Bb)kc[lc]=[kc[lc],Bb[lc]];return this},abort:function(Bb){Bb=Bb||sd;return D&&D.abort(Bb),x(0,Bb),this}};if(db.promise(Nb),na.url=((q||na.url||ef.href)+"").replace(Tk,ef.protocol+"//"),na.type=v.method||v.type||na.method||na.type,na.dataTypes=(na.dataType||"*").toLowerCase().match(Q)||[""],null==na.crossDomain){q=mb.createElement("a");try{q.href=na.url,q.href=q.href,na.crossDomain=mg.protocol+
"//"+mg.host!=q.protocol+"//"+q.host}catch(Bb){na.crossDomain=!0}}if(na.data&&na.processData&&"string"!=typeof na.data&&(na.data=B.param(na.data,na.traditional)),zb(xi,na,v,Nb),Qb)return Nb;for(ra in(ba=B.event&&na.global)&&0==B.active++&&B.event.trigger("ajaxStart"),na.type=na.type.toUpperCase(),na.hasContent=!Sk.test(na.type),H=na.url.replace(Pk,""),na.hasContent?na.data&&na.processData&&0===(na.contentType||"").indexOf("application/x-www-form-urlencoded")&&(na.data=na.data.replace(Ok,"+")):(Ga=
na.url.slice(H.length),na.data&&(na.processData||"string"==typeof na.data)&&(H+=(Ug.test(H)?"&":"?")+na.data,delete na.data),!1===na.cache&&(H=H.replace(Qk,"$1"),Ga=(Ug.test(H)?"&":"?")+"_="+ti++ +Ga),na.url=H+Ga),na.ifModified&&(B.lastModified[H]&&Nb.setRequestHeader("If-Modified-Since",B.lastModified[H]),B.etag[H]&&Nb.setRequestHeader("If-None-Match",B.etag[H])),(na.data&&na.hasContent&&!1!==na.contentType||v.contentType)&&Nb.setRequestHeader("Content-Type",na.contentType),Nb.setRequestHeader("Accept",
na.dataTypes[0]&&na.accepts[na.dataTypes[0]]?na.accepts[na.dataTypes[0]]+("*"!==na.dataTypes[0]?", "+re+"; q=0.01":""):na.accepts["*"]),na.headers)Nb.setRequestHeader(ra,na.headers[ra]);if(na.beforeSend&&(!1===na.beforeSend.call(Ta,Nb,na)||Qb))return Nb.abort();if(sd="abort",Lb.add(na.complete),Nb.done(na.success),Nb.fail(na.error),D=zb(Pg,na,v,Nb)){if(Nb.readyState=1,ba&&Za.trigger("ajaxSend",[Nb,na]),Qb)return Nb;na.async&&0<na.timeout&&(X=a.setTimeout(function(){Nb.abort("timeout")},na.timeout));
try{var Qb=!1;D.send(Eb,x)}catch(Bb){if(Qb)throw Bb;x(-1,Bb)}}else x(-1,"No Transport");return Nb},getJSON:function(q,v,x){return B.get(q,v,x,"json")},getScript:function(q,v){return B.get(q,void 0,v,"script")}});B.each(["get","post"],function(q,v){B[v]=function(x,D,H,M){return $a(D)&&(M=M||H,H=D,D=void 0),B.ajax(B.extend({url:x,type:v,dataType:M,data:D,success:H},B.isPlainObject(x)&&x))}});B.ajaxPrefilter(function(q){for(var v in q.headers)"content-type"===v.toLowerCase()&&(q.contentType=q.headers[v]||
"")});B._evalUrl=function(q,v,x){return B.ajax({url:q,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(D){B.globalEval(D,v,x)}})};B.fn.extend({wrapAll:function(q){var v;return this[0]&&($a(q)&&(q=q.call(this[0])),v=B(q,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&v.insertBefore(this[0]),v.map(function(){for(var x=this;x.firstElementChild;)x=x.firstElementChild;return x}).append(this)),this},wrapInner:function(q){return $a(q)?
this.each(function(v){B(this).wrapInner(q.call(this,v))}):this.each(function(){var v=B(this),x=v.contents();x.length?x.wrapAll(q):v.append(q)})},wrap:function(q){var v=$a(q);return this.each(function(x){B(this).wrapAll(v?q.call(this,x):q)})},unwrap:function(q){return this.parent(q).not("body").each(function(){B(this).replaceWith(this.childNodes)}),this}});B.expr.pseudos.hidden=function(q){return!B.expr.pseudos.visible(q)};B.expr.pseudos.visible=function(q){return!!(q.offsetWidth||q.offsetHeight||
q.getClientRects().length)};B.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(q){}};var Uk={0:200,1223:204},Ff=B.ajaxSettings.xhr();lb.cors=!!Ff&&"withCredentials"in Ff;lb.ajax=Ff=!!Ff;B.ajaxTransport(function(q){var v,x;if(lb.cors||Ff&&!q.crossDomain)return{send:function(D,H){var M,R=q.xhr();if(R.open(q.type,q.url,q.async,q.username,q.password),q.xhrFields)for(M in q.xhrFields)R[M]=q.xhrFields[M];for(M in q.mimeType&&R.overrideMimeType&&R.overrideMimeType(q.mimeType),q.crossDomain||
D["X-Requested-With"]||(D["X-Requested-With"]="XMLHttpRequest"),D)R.setRequestHeader(M,D[M]);v=function(X){return function(){v&&(v=x=R.onload=R.onerror=R.onabort=R.ontimeout=R.onreadystatechange=null,"abort"===X?R.abort():"error"===X?"number"!=typeof R.status?H(0,"error"):H(R.status,R.statusText):H(Uk[R.status]||R.status,R.statusText,"text"!==(R.responseType||"text")||"string"!=typeof R.responseText?{binary:R.response}:{text:R.responseText},R.getAllResponseHeaders()))}};R.onload=v();x=R.onerror=R.ontimeout=
v("error");void 0!==R.onabort?R.onabort=x:R.onreadystatechange=function(){4===R.readyState&&a.setTimeout(function(){v&&x()})};v=v("abort");try{R.send(q.hasContent&&q.data||null)}catch(X){if(v)throw X;}},abort:function(){v&&v()}}});B.ajaxPrefilter(function(q){q.crossDomain&&(q.contents.script=!1)});B.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(q){return B.globalEval(q),
q}}});B.ajaxPrefilter("script",function(q){void 0===q.cache&&(q.cache=!1);q.crossDomain&&(q.type="GET")});B.ajaxTransport("script",function(q){if(q.crossDomain||q.scriptAttrs){var v,x;return{send:function(D,H){v=B("<script>").attr(q.scriptAttrs||{}).prop({charset:q.scriptCharset,src:q.url}).on("load error",x=function(M){v.remove();x=null;M&&H("error"===M.type?404:200,M.type)});mb.head.appendChild(v[0])},abort:function(){x&&x()}}}});var Wg=[],Xg=/(=)\?(?=&|$)|\?\?/;B.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var q=
Wg.pop()||B.expando+"_"+ti++;return this[q]=!0,q}});B.ajaxPrefilter("json jsonp",function(q,v,x){var D,H,M,R=!1!==q.jsonp&&(Xg.test(q.url)?"url":"string"==typeof q.data&&0===(q.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xg.test(q.data)&&"data");if(R||"jsonp"===q.dataTypes[0])return D=q.jsonpCallback=$a(q.jsonpCallback)?q.jsonpCallback():q.jsonpCallback,R?q[R]=q[R].replace(Xg,"$1"+D):!1!==q.jsonp&&(q.url+=(Ug.test(q.url)?"&":"?")+q.jsonp+"="+D),q.converters["script json"]=function(){return M||
B.error(D+" was not called"),M[0]},q.dataTypes[0]="json",H=a[D],a[D]=function(){M=arguments},x.always(function(){void 0===H?B(a).removeProp(D):a[D]=H;q[D]&&(q.jsonpCallback=v.jsonpCallback,Wg.push(D));M&&$a(H)&&H(M[0]);M=H=void 0}),"script"});lb.createHTMLDocument=((Lc=mb.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Lc.childNodes.length);B.parseHTML=function(q,v,x){var D,H,M;return"string"!=typeof q?[]:("boolean"==typeof v&&(x=v,v=!1),v||(lb.createHTMLDocument?
((D=(v=mb.implementation.createHTMLDocument("")).createElement("base")).href=mb.location.href,v.head.appendChild(D)):v=mb),H=K.exec(q),M=!x&&[],H)?[v.createElement(H[1])]:(H=ea([q],v,M),M&&M.length&&B(M).remove(),B.merge([],H.childNodes))};B.fn.load=function(q,v,x){var D,H,M,R=this,X=q.indexOf(" ");return-1<X&&(D=T(q.slice(X)),q=q.slice(0,X)),$a(v)?(x=v,v=void 0):v&&"object"==typeof v&&(H="POST"),0<R.length&&B.ajax({url:q,type:H||"GET",dataType:"html",data:v}).done(function(ba){M=arguments;R.html(D?
B("<div>").append(B.parseHTML(ba)).find(D):ba)}).always(x&&function(ba,ra){R.each(function(){x.apply(this,M||[ba.responseText,ra,ba])})}),this};B.expr.pseudos.animated=function(q){return B.grep(B.timers,function(v){return q===v.elem}).length};B.offset={setOffset:function(q,v,x){var D,H,M,R=B.css(q,"position"),X=B(q),ba={};"static"===R&&(q.style.position="relative");var ra=X.offset();var Ga=B.css(q,"top");var na=B.css(q,"left");("absolute"===R||"fixed"===R)&&-1<(Ga+na).indexOf("auto")?(M=(D=X.position()).top,
H=D.left):(M=parseFloat(Ga)||0,H=parseFloat(na)||0);$a(v)&&(v=v.call(q,x,B.extend({},ra)));null!=v.top&&(ba.top=v.top-ra.top+M);null!=v.left&&(ba.left=v.left-ra.left+H);"using"in v?v.using.call(q,ba):X.css(ba)}};B.fn.extend({offset:function(q){if(arguments.length)return void 0===q?this:this.each(function(H){B.offset.setOffset(this,q,H)});var v,x,D=this[0];if(D)return D.getClientRects().length?(v=D.getBoundingClientRect(),x=D.ownerDocument.defaultView,{top:v.top+x.pageYOffset,left:v.left+x.pageXOffset}):
{top:0,left:0}},position:function(){if(this[0]){var q,v=this[0],x={top:0,left:0};if("fixed"===B.css(v,"position"))var D=v.getBoundingClientRect();else{D=this.offset();var H=v.ownerDocument;for(q=v.offsetParent||H.documentElement;q&&(q===H.body||q===H.documentElement)&&"static"===B.css(q,"position");)q=q.parentNode;q&&q!==v&&1===q.nodeType&&(x=B(q).offset(),x.top+=B.css(q,"borderTopWidth",!0),x.left+=B.css(q,"borderLeftWidth",!0))}return{top:D.top-x.top-B.css(v,"marginTop",!0),left:D.left-x.left-B.css(v,
"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var q=this.offsetParent;q&&"static"===B.css(q,"position");)q=q.offsetParent;return q||Db})}});B.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(q,v){var x="pageYOffset"===v;B.fn[q]=function(D){return Ea(this,function(H,M,R){var X;if(Zc(H)?X=H:9===H.nodeType&&(X=H.defaultView),void 0===R)return X?X[v]:H[M];X?X.scrollTo(x?X.pageXOffset:R,x?R:X.pageYOffset):H[M]=R},q,D,arguments.length)}});B.each(["top","left"],
function(q,v){B.cssHooks[v]=ib(lb.pixelPosition,function(x,D){if(D)return D=wb(x,v),Df.test(D)?B(x).position()[v]+"px":D})});B.each({Height:"height",Width:"width"},function(q,v){B.each({padding:"inner"+q,content:v,"":"outer"+q},function(x,D){B.fn[D]=function(H,M){var R=arguments.length&&(x||"boolean"!=typeof H),X=x||(!0===H||!0===M?"margin":"border");return Ea(this,function(ba,ra,Ga){var na;return Zc(ba)?0===D.indexOf("outer")?ba["inner"+q]:ba.document.documentElement["client"+q]:9===ba.nodeType?
(na=ba.documentElement,Math.max(ba.body["scroll"+q],na["scroll"+q],ba.body["offset"+q],na["offset"+q],na["client"+q])):void 0===Ga?B.css(ba,ra,X):B.style(ba,ra,Ga,X)},v,R?H:void 0,R)}})});B.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(q,v){B.fn[v]=function(x){return this.on(v,x)}});B.fn.extend({bind:function(q,v,x){return this.on(q,null,v,x)},unbind:function(q,v){return this.off(q,null,v)},delegate:function(q,v,x,D){return this.on(v,q,x,D)},undelegate:function(q,
v,x){return 1==arguments.length?this.off(q,"**"):this.off(v,q||"**",x)},hover:function(q,v){return this.on("mouseenter",q).on("mouseleave",v||q)}});B.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(q,v){B.fn[v]=function(x,D){return 0<arguments.length?this.on(v,null,x,D):this.trigger(v)}});var Vk=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;
B.proxy=function(q,v){var x,D,H;if("string"==typeof v&&(x=q[v],v=q,q=x),$a(q))return D=Cb.call(arguments,2),(H=function(){return q.apply(v||this,D.concat(Cb.call(arguments)))}).guid=q.guid=q.guid||B.guid++,H};B.holdReady=function(q){q?B.readyWait++:B.ready(!0)};B.isArray=Array.isArray;B.parseJSON=JSON.parse;B.nodeName=k;B.isFunction=$a;B.isWindow=Zc;B.camelCase=u;B.type=b;B.now=Date.now;B.isNumeric=function(q){var v=B.type(q);return("number"===v||"string"===v)&&!isNaN(q-parseFloat(q))};B.trim=function(q){return null==
q?"":(q+"").replace(Vk,"$1")};"function"==typeof define&&define.amd&&define("jquery",[],function(){return B});var Wk=a.jQuery,Xk=a.$;return B.noConflict=function(q){return a.$===B&&(a.$=Xk),q&&a.jQuery===B&&(a.jQuery=Wk),B},void 0===c&&(a.jQuery=a.$=B),B};"object"==typeof ta?ta=Dk.document?Yk(Dk,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return Yk(a)}:Yk(Dk);var Jo={};Jo=function(){function a(y,E){return E&&"".concat(E,"::").concat(B++)||y.uidEvent||B++}
function c(y){var E=a(y);return y.uidEvent=E,Gd[E]=Gd[E]||{},Gd[E]}function d(y,E){var P=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Object.values(y).find(function(t){return t.callable===E&&t.delegationSelector===P})}function b(y,E,P){var t="string"==typeof E,C=l(y);return ee.has(C)||(C=y),[t,t?P:E||P,C]}function f(y,E,P,t,C){if("string"==typeof E&&y){var I,da,ia,pa=te(b(E,P,t),3);t=pa[0];var va=pa[1];pa=pa[2];E in fe&&(I=va,va=function(Ma){if(!Ma.relatedTarget||Ma.relatedTarget!==
Ma.delegateTarget&&!Ma.delegateTarget.contains(Ma.relatedTarget))return I.call(this,Ma)});var sa=c(y);sa=sa[pa]||(sa[pa]={});var Aa=d(sa,va,t?P:null);if(Aa)return void(Aa.oneOff=Aa.oneOff&&C);E=a(va,E.replace(Zc,""));Aa=t?(da=va,function Ra(Oa){for(var tb=y.querySelectorAll(P),ob=!0,ab=!1,ub=void 0,Gb=Oa.target;Gb&&Gb!==this;Gb=Gb.parentNode)try{for(var eb,Hb=tb[Symbol.iterator]();!(ob=(eb=Hb.next()).done);ob=!0)if(eb.value===Gb)return h(Oa,{delegateTarget:Gb}),Ra.oneOff&&Ja.off(y,Oa.type,P,da),da.apply(Gb,
[Oa])}catch(Zb){ab=!0,ub=Zb}finally{try{ob||null==Hb.return||Hb.return()}finally{if(ab)throw ub;}}}):(ia=va,function tb(Ra){return h(Ra,{delegateTarget:y}),tb.oneOff&&Ja.off(y,Ra.type,ia),ia.apply(y,[Ra])});Aa.delegationSelector=t?P:null;Aa.callable=va;Aa.oneOff=C;Aa.uidEvent=E;sa[E]=Aa;y.addEventListener(pa,Aa,t)}}function k(y,E,P,t,C){(t=d(E[P],t,C))&&(y.removeEventListener(P,t,!!C),delete E[P][t.uidEvent])}function l(y){return fe[y=y.replace(mb,"")]||y}function h(y){var E=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:{},P=!0,t=!1,C=void 0;try{for(var I,da=Object.entries(E)[Symbol.iterator]();!(P=(I=da.next()).done);P=!0)!function(){var ia=te(I.value,2),pa=ia[0],va=ia[1];try{y[pa]=va}catch(sa){Object.defineProperty(y,pa,{configurable:!0,get:function(){return va}})}}()}catch(ia){t=!0,C=ia}finally{try{P||null==da.return||da.return()}finally{if(t)throw C;}}return y}function e(y){if("true"===y)return!0;if("false"===y)return!1;if(y===Number(y).toString())return Number(y);if(""===y||"null"===
y)return null;if("string"!=typeof y)return y;try{return JSON.parse(decodeURIComponent(y))}catch(E){return y}}function g(y){return y.replace(/[A-Z]/g,function(E){return"-".concat(E.toLowerCase())})}function p(y){return y?(y.nodeName||"").toLowerCase():null}function m(y){return null==y?window:"[object Window]"!==y.toString()?(y=y.ownerDocument)&&y.defaultView||window:y}function n(y){return y instanceof m(y).Element||y instanceof Element}function r(y){return y instanceof m(y).HTMLElement||y instanceof
HTMLElement}function u(y){return"undefined"!=typeof ShadowRoot&&(y instanceof m(y).ShadowRoot||y instanceof ShadowRoot)}function w(y){return y.split("-")[0]}function z(){var y=navigator.userAgentData;return null!=y&&y.brands&&Array.isArray(y.brands)?y.brands.map(function(E){return E.brand+"/"+E.version}).join(" "):navigator.userAgent}function G(){return!/^((?!chrome|android).)*safari/i.test(z())}function L(y,E,P){void 0===E&&(E=!1);void 0===P&&(P=!1);var t=y.getBoundingClientRect(),C=1,I=1;E&&r(y)&&
(C=0<y.offsetWidth&&Ge(t.width)/y.offsetWidth||1,I=0<y.offsetHeight&&Ge(t.height)/y.offsetHeight||1);y=(n(y)?m(y):window).visualViewport;E=!G()&&P;P=(t.left+(E&&y?y.offsetLeft:0))/C;y=(t.top+(E&&y?y.offsetTop:0))/I;C=t.width/C;t=t.height/I;return{width:C,height:t,top:y,right:P+C,bottom:y+t,left:P,x:P,y}}function O(y){var E=L(y),P=y.offsetWidth,t=y.offsetHeight;return 1>=Math.abs(E.width-P)&&(P=E.width),1>=Math.abs(E.height-t)&&(t=E.height),{x:y.offsetLeft,y:y.offsetTop,width:P,height:t}}function N(y,
E){var P=E.getRootNode&&E.getRootNode();if(y.contains(E))return!0;if(P&&u(P)){do{if(E&&y.isSameNode(E))return!0;E=E.parentNode||E.host}while(E)}return!1}function ea(y){return m(y).getComputedStyle(y)}function Y(y){return((n(y)?y.ownerDocument:y.document)||window.document).documentElement}function ka(y){return"html"===p(y)?y:y.assignedSlot||y.parentNode||(u(y)?y.host:null)||Y(y)}function ha(y){return r(y)&&"fixed"!==ea(y).position?y.offsetParent:null}function qa(y){for(var E=m(y),P=ha(y);P&&0<=["table",
"td","th"].indexOf(p(P))&&"static"===ea(P).position;)P=ha(P);if(!P||"html"!==p(P)&&("body"!==p(P)||"static"!==ea(P).position)){if(!P)a:{P=/firefox/i.test(z());if(!/Trident/i.test(z())||!r(y)||"fixed"!==ea(y).position)for(y=ka(y),u(y)&&(y=y.host);r(y)&&0>["html","body"].indexOf(p(y));){var t=ea(y);if("none"!==t.transform||"none"!==t.perspective||"paint"===t.contain||-1!==["transform","perspective"].indexOf(t.willChange)||P&&"filter"===t.willChange||P&&t.filter&&"none"!==t.filter){P=y;break a}y=y.parentNode}P=
null}E=P||E}return E}function Da(y){return 0<=["top","bottom"].indexOf(y)?"x":"y"}function La(y){return Object.assign({},{top:0,right:0,bottom:0,left:0},y)}function Ka(y,E){return E.reduce(function(P,t){return P[t]=y,P},{})}function V(y){return y.split("-")[1]}function Na(y){var E,P=y.popper,t=y.popperRect,C=y.placement,I=y.variation,da=y.offsets,ia=y.position,pa=y.gpuAcceleration,va=y.adaptive,sa=y.roundOffsets,Aa=y.isFixed;y=da.x;y=void 0===y?0:y;var Ma=da.y;Ma=void 0===Ma?0:Ma;Ma="function"==typeof sa?
sa({x:y,y:Ma}):{x:y,y:Ma};y=Ma.x;Ma=Ma.y;var Oa=da.hasOwnProperty("x");da=da.hasOwnProperty("y");var Ra="left",tb="top",ob=window;if(va){var ab=qa(P),ub="clientHeight",Gb="clientWidth";ab===m(P)&&"static"!==ea(ab=Y(P)).position&&"absolute"===ia&&(ub="scrollHeight",Gb="scrollWidth");("top"===C||("left"===C||"right"===C)&&"end"===I)&&(tb="bottom",Ma-=(Aa&&ab===ob&&ob.visualViewport?ob.visualViewport.height:ab[ub])-t.height,Ma*=pa?1:-1);"left"!==C&&("top"!==C&&"bottom"!==C||"end"!==I)||(Ra="right",y-=
(Aa&&ab===ob&&ob.visualViewport?ob.visualViewport.width:ab[Gb])-t.width,y*=pa?1:-1)}var eb,Hb,Zb,Wb,ec,fc;t=Object.assign({position:ia},va&&Jk);sa=!0===sa?(eb={x:y,y:Ma},Hb=m(P),Zb=eb.x,Wb=eb.y,{x:Ge(Zb*(ec=Hb.devicePixelRatio||1))/ec||0,y:Ge(Wb*ec)/ec||0}):{x:y,y:Ma};return y=sa.x,Ma=sa.y,pa?Object.assign({},t,((fc={})[tb]=da?"0":"",fc[Ra]=Oa?"0":"",fc.transform=1>=(ob.devicePixelRatio||1)?"translate("+y+"px, "+Ma+"px)":"translate3d("+y+"px, "+Ma+"px, 0)",fc)):Object.assign({},t,((E={})[tb]=da?Ma+
"px":"",E[Ra]=Oa?y+"px":"",E.transform="",E))}function ya(y){return y.replace(/left|right|bottom|top/g,function(E){return Ze[E]})}function wb(y){return y.replace(/start|end/g,function(E){return lg[E]})}function ib(y){y=m(y);return{scrollLeft:y.pageXOffset,scrollTop:y.pageYOffset}}function Tb(y){return L(Y(y)).left+ib(y).scrollLeft}function Fb(y){y=ea(y);return/auto|scroll|overlay|hidden/.test(y.overflow+y.overflowY+y.overflowX)}function Sa(y,E){void 0===E&&(E=[]);var P,t=function da(I){return 0<=
["html","body","#document"].indexOf(p(I))?I.ownerDocument.body:r(I)&&Fb(I)?I:da(ka(I))}(y);y=t===(null==(P=y.ownerDocument)?void 0:P.body);P=m(t);t=y?[P].concat(P.visualViewport||[],Fb(t)?t:[]):t;E=E.concat(t);return y?E:E.concat(Sa(ka(t)))}function sc(y){return Object.assign({},y,{left:y.x,top:y.y,right:y.x+y.width,bottom:y.y+y.height})}function cc(y,E,P){var t,C,I,da,ia,pa,va;if("viewport"===E){E=m(y);var sa=Y(y);E=E.visualViewport;var Aa=sa.clientWidth;sa=sa.clientHeight;var Ma=t=0;E&&(Aa=E.width,
sa=E.height,((C=G())||!C&&"fixed"===P)&&(t=E.offsetLeft,Ma=E.offsetTop));y={width:Aa,height:sa,x:t+Tb(y),y:Ma};P=sc(y)}else P=n(E)?((Aa=L(E,!1,"fixed"===P)).top=Aa.top+E.clientTop,Aa.left+=E.clientLeft,Aa.bottom=Aa.top+E.clientHeight,Aa.right=Aa.left+E.clientWidth,Aa.width=E.clientWidth,Aa.height=E.clientHeight,Aa.x=Aa.left,Aa.y=Aa.top,Aa):sc((sa=Y(y),Ma=Y(sa),C=ib(sa),I=null==(t=sa.ownerDocument)?void 0:t.body,da=Kd(Ma.scrollWidth,Ma.clientWidth,I?I.scrollWidth:0,I?I.clientWidth:0),ia=Kd(Ma.scrollHeight,
Ma.clientHeight,I?I.scrollHeight:0,I?I.clientHeight:0),pa=-C.scrollLeft+Tb(sa),va=-C.scrollTop,"rtl"===ea(I||Ma).direction&&(pa+=Kd(Ma.clientWidth,I?I.clientWidth:0)-da),{width:da,height:ia,x:pa,y:va}));return P}function Ca(y){var E=y.reference,P=y.element,t=(y=y.placement)?w(y):null;y=y?V(y):null;var C=E.x+E.width/2-P.width/2;var I=E.y+E.height/2-P.height/2;switch(t){case "top":C={x:C,y:E.y-P.height};break;case "bottom":C={x:C,y:E.y+E.height};break;case "right":C={x:E.x+E.width,y:I};break;case "left":C=
{x:E.x-P.width,y:I};break;default:C={x:E.x,y:E.y}}t=t?Da(t):null;if(null!=t)switch(I="y"===t?"height":"width",y){case "start":C[t]-=E[I]/2-P[I]/2;break;case "end":C[t]+=E[I]/2-P[I]/2}return C}function Z(y,E){void 0===E&&(E={});var P,t,C,I,da,ia,pa=E;E=pa.placement;E=void 0===E?y.placement:E;var va=pa.strategy,sa=void 0===va?y.strategy:va;va=pa.boundary;var Aa=void 0===va?"clippingParents":va,Ma=pa.rootBoundary;va=pa.elementContext;va=void 0===va?"popper":va;var Oa=pa.altBoundary;pa=pa.padding;pa=
void 0===pa?0:pa;pa=La("number"!=typeof pa?pa:Ka(pa,Ye));var Ra=y.rects.popper;Oa=y.elements[void 0!==Oa&&Oa?"popper"===va?"reference":"popper":va];Oa=(P=n(Oa)?Oa:Oa.contextElement||Y(y.elements.popper),da=(I=[].concat("clippingParents"===Aa?(t=Sa(ka(P)),n(C=0<=["absolute","fixed"].indexOf(ea(P).position)&&r(P)?qa(P):P)?t.filter(function(ab){return n(ab)&&N(ab,C)&&"body"!==p(ab)}):[]):[].concat(Aa),[void 0===Ma?"viewport":Ma]))[0],(ia=I.reduce(function(ab,ub){ub=cc(P,ub,sa);return ab.top=Kd(ub.top,
ab.top),ab.right=$d(ub.right,ab.right),ab.bottom=$d(ub.bottom,ab.bottom),ab.left=Kd(ub.left,ab.left),ab},cc(P,da,sa))).width=ia.right-ia.left,ia.height=ia.bottom-ia.top,ia.x=ia.left,ia.y=ia.top,ia);t=L(y.elements.reference);I=Ca({reference:t,element:Ra,strategy:"absolute",placement:E});I=sc(Object.assign({},Ra,I));t="popper"===va?I:t;var tb={top:Oa.top-t.top+pa.top,bottom:t.bottom-Oa.bottom+pa.bottom,left:Oa.left-t.left+pa.left,right:t.right-Oa.right+pa.right};y=y.modifiersData.offset;if("popper"===
va&&y){var ob=y[E];Object.keys(tb).forEach(function(ab){var ub=0<=["right","bottom"].indexOf(ab)?1:-1,Gb=0<=["top","bottom"].indexOf(ab)?"y":"x";tb[ab]+=ob[Gb]*ub})}return tb}function za(y,E,P){return void 0===P&&(P={x:0,y:0}),{top:y.top-E.height-P.y,right:y.right-E.width+P.x,bottom:y.bottom-E.height+P.y,left:y.left-E.width-P.x}}function A(y){return["top","right","bottom","left"].some(function(E){return 0<=y[E]})}function T(){for(var y=arguments.length,E=Array(y),P=0;P<y;P++)E[P]=arguments[P];return!E.some(function(t){return!(t&&
"function"==typeof t.getBoundingClientRect)})}function oa(y){void 0===y&&(y={});var E=y.defaultModifiers,P=void 0===E?[]:E;y=y.defaultOptions;var t=void 0===y?si:y;return function(C,I,da){function ia(){Aa.forEach(function(Ra){return Ra()});Aa=[]}void 0===da&&(da=t);var pa,va,sa={placement:"bottom",orderedModifiers:[],options:Object.assign({},si,t),modifiersData:{},elements:{reference:C,popper:I},attributes:{},styles:{}},Aa=[],Ma=!1,Oa={state:sa,setOptions:function(Ra){Ra="function"==typeof Ra?Ra(sa.options):
Ra;ia();sa.options=Object.assign({},t,sa.options,Ra);sa.scrollParents={reference:n(C)?Sa(C):C.contextElement?Sa(C.contextElement):[],popper:Sa(I)};var tb,ob,ab,ub,Gb;Ra=(tb=Object.keys(Gb=[].concat(P,sa.options.modifiers).reduce(function(eb,Hb){var Zb=eb[Hb.name];return eb[Hb.name]=Zb?Object.assign({},Zb,Hb,{options:Object.assign({},Zb.options,Hb.options),data:Object.assign({},Zb.data,Hb.data)}):Hb,eb},{})).map(function(eb){return Gb[eb]}),ob=new Map,ab=new Set,ub=[],tb.forEach(function(eb){ob.set(eb.name,
eb)}),tb.forEach(function(eb){ab.has(eb.name)||function Wb(Zb){ab.add(Zb.name);[].concat(Zb.requires||[],Zb.requiresIfExists||[]).forEach(function(ec){ab.has(ec)||(ec=ob.get(ec))&&Wb(ec)});ub.push(Zb)}(eb)}),Cf.reduce(function(eb,Hb){return eb.concat(ub.filter(function(Zb){return Zb.phase===Hb}))},[]));return sa.orderedModifiers=Ra.filter(function(eb){return eb.enabled}),sa.orderedModifiers.forEach(function(eb){var Hb=eb.name,Zb=eb.options;eb=eb.effect;"function"==typeof eb&&(Hb=eb({state:sa,name:Hb,
instance:Oa,options:void 0===Zb?{}:Zb}),Aa.push(Hb||function(){}))}),Oa.update()},forceUpdate:function(){if(!Ma){var Ra=sa.elements,tb=Ra.reference;Ra=Ra.popper;if(T(tb,Ra)){sa.rects={reference:(ob=qa(Ra),ab="fixed"===sa.options.strategy,Hb=r(ob),Zb=r(ob)&&(Gb=Ge((ub=ob.getBoundingClientRect()).width)/ob.offsetWidth||1,eb=Ge(ub.height)/ob.offsetHeight||1,1!==Gb||1!==eb),Wb=Y(ob),ec=L(tb,Zb,ab),fc={scrollLeft:0,scrollTop:0},bd={x:0,y:0},(Hb||!Hb&&!ab)&&(("body"!==p(ob)||Fb(Wb))&&(fc=ob!==m(ob)&&r(ob)?
{scrollLeft:ob.scrollLeft,scrollTop:ob.scrollTop}:ib(ob)),r(ob)?((bd=L(ob,!0)).x+=ob.clientLeft,bd.y+=ob.clientTop):Wb&&(bd.x=Tb(Wb))),{x:ec.left+fc.scrollLeft-bd.x,y:ec.top+fc.scrollTop-bd.y,width:ec.width,height:ec.height}),popper:O(Ra)};sa.reset=!1;sa.placement=sa.options.placement;sa.orderedModifiers.forEach(function(se){return sa.modifiersData[se.name]=Object.assign({},se.data)});var ob,ab,ub,Gb,eb,Hb,Zb,Wb,ec,fc,bd;for(tb=0;tb<sa.orderedModifiers.length;tb++)!0!==sa.reset?(ab=sa.orderedModifiers[tb],
ob=ab.fn,ub=ab.options,ub=void 0===ub?{}:ub,ab=ab.name,"function"==typeof ob&&(sa=ob({state:sa,options:ub,name:ab,instance:Oa})||sa)):(sa.reset=!1,tb=-1)}}},update:(pa=function(){return new Promise(function(Ra){Oa.forceUpdate();Ra(sa)})},function(){return va||=new Promise(function(Ra){Promise.resolve().then(function(){va=void 0;Ra(pa())})}),va}),destroy:function(){ia();Ma=!0}};return T(C,I)?(Oa.setOptions(da).then(function(Ra){!Ma&&da.onFirstUpdate&&da.onFirstUpdate(Ra)}),Oa):Oa}}var ma,rb,zb=new Map,
dc={set:function(y,E,P){zb.has(y)||zb.set(y,new Map);y=zb.get(y);y.has(E)||0===y.size?y.set(E,P):console.error("Bootstrap doesn't allow more than one instance per element. Bound instance: ".concat(Array.from(y.keys())[0],"."))},get:function(y,E){return zb.has(y)&&zb.get(y).get(E)||null},remove:function(y,E){if(zb.has(y)){var P=zb.get(y);P.delete(E);0===P.size&&zb.delete(y)}}},Lc=function(y){return y&&window.CSS&&window.CSS.escape&&(y=y.replace(/#([^\s"#']+)/g,function(E,P){return"#".concat(CSS.escape(P))})),
y},gb=function(y){return!(!y||"object"!=typeof y)&&(void 0!==y.jquery&&(y=y[0]),void 0!==y.nodeType)},Kc=function(y){return gb(y)?y.jquery?y[0]:y:"string"==typeof y&&0<y.length?document.querySelector(Lc(y)):null},Cb=function(y){if(!gb(y)||0===y.getClientRects().length)return!1;var E="visible"===getComputedStyle(y).getPropertyValue("visibility"),P=y.closest("details:not([open])");return P?P!==y&&((y=y.closest("summary"))&&y.parentNode!==P||null===y)?!1:E:E},qc=function(y){return!y||y.nodeType!==Node.ELEMENT_NODE||
!!y.classList.contains("disabled")||(void 0!==y.disabled?y.disabled:y.hasAttribute("disabled")&&"false"!==y.getAttribute("disabled"))},qb=function(y){return document.documentElement.attachShadow?"function"==typeof y.getRootNode?(y=y.getRootNode(),y instanceof ShadowRoot?y:null):y instanceof ShadowRoot?y:y.parentNode?qb(y.parentNode):null:null},Ab=function(){},$c=function(){return window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null},ac=[],xc=function(){return"rtl"===
document.documentElement.dir},yc=function(y){var E=function(){var P=$c();if(P){var t=y.NAME,C=P.fn[t];P.fn[t]=y.jQueryInterface;P.fn[t].Constructor=y;P.fn[t].noConflict=function(){return P.fn[t]=C,y.jQueryInterface}}};"loading"===document.readyState?(ac.length||document.addEventListener("DOMContentLoaded",function(){var P=!0,t=!1,C=void 0;try{for(var I,da=ac[Symbol.iterator]();!(P=(I=da.next()).done);P=!0)(0,I.value)()}catch(ia){t=!0,C=ia}finally{try{P||null==da.return||da.return()}finally{if(t)throw C;
}}}),ac.push(E)):E()},Ec=function(y){var E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],P=2<arguments.length&&void 0!==arguments[2]?arguments[2]:y;return"function"==typeof y?y.apply(void 0,ce(E)):P},lb=function(y,E){if(2<arguments.length&&void 0!==arguments[2]&&!arguments[2])return void Ec(y);var P=function(I){if(!I)return 0;var da=window.getComputedStyle(I);I=da.transitionDuration;da=da.transitionDelay;var ia=Number.parseFloat(I),pa=Number.parseFloat(da);return ia||pa?(I=I.split(",")[0],
da=da.split(",")[0],1E3*(Number.parseFloat(I)+Number.parseFloat(da))):0}(E)+5,t=!1,C=function(I){I.target===E&&(t=!0,E.removeEventListener("transitionend",C),Ec(y))};E.addEventListener("transitionend",C);setTimeout(function(){t||E.dispatchEvent(new Event("transitionend"))},P)},$a=function(y,E,P,t){var C=y.length;E=y.indexOf(E);return-1===E?!P&&t?y[C-1]:y[0]:(E+=P?1:-1,t&&(E=(E+C)%C),y[Math.max(0,Math.min(E,C-1))])},Zc=/[^.]*(?=\..*)\.|.*/,mb=/\..*/,yb=/::\d+$/,Gd={},B=1,fe={mouseenter:"mouseover",
mouseleave:"mouseout"},ee=new Set("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange touchstart touchmove touchend touchcancel pointerdown pointermove pointerup pointerleave pointercancel gesturestart gesturechange gestureend focus blur change reset select submit focusin focusout load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll".split(" ")),Ja={on:function(y,
E,P,t){f(y,E,P,t,!1)},one:function(y,E,P,t){f(y,E,P,t,!0)},off:function(y,E,P,t){if("string"==typeof E&&y){t=te(b(E,P,t),3);var C=t[0],I=t[1];t=t[2];var da=t!==E,ia=c(y),pa=ia[t]||{},va=E.startsWith(".");if(void 0===I){P=!0;C=!1;I=void 0;if(va)try{for(var sa,Aa=Object.keys(ia)[Symbol.iterator]();!(P=(sa=Aa.next()).done);P=!0){va=void 0;var Ma=y,Oa=ia,Ra=sa.value,tb=E.slice(1),ob=Oa[Ra]||{},ab=!0,ub=!1,Gb=void 0;try{for(var eb=Object.entries(ob)[Symbol.iterator]();!(ab=(va=eb.next()).done);ab=!0){var Hb=
te(va.value,2),Zb=Hb[1];Hb[0].includes(tb)&&k(Ma,Oa,Ra,Zb.callable,Zb.delegationSelector)}}catch(Ed){ub=!0,Gb=Ed}finally{try{ab||null==eb.return||eb.return()}finally{if(ub)throw Gb;}}!0}}catch(Ed){C=!0,I=Ed}finally{try{P||null==Aa.return||Aa.return()}finally{if(C)throw I;}}sa=!0;Aa=!1;Ra=void 0;try{for(var Wb,ec=Object.entries(pa)[Symbol.iterator]();!(sa=(Wb=ec.next()).done);sa=!0){var fc=te(Wb.value,2),bd=fc[1],se=fc[0].replace(yb,"");da&&!E.includes(se)||k(y,ia,t,bd.callable,bd.delegationSelector)}}catch(Ed){Aa=
!0,Ra=Ed}finally{try{sa||null==ec.return||ec.return()}finally{if(Aa)throw Ra;}}}else Object.keys(pa).length&&k(y,ia,t,I,C?P:null)}},trigger:function(y,E,P){if("string"!=typeof E||!y)return null;var t=$c(),C=null,I=!0,da=!0,ia=!1;E!==l(E)&&t&&(C=t.Event(E,P),t(y).trigger(C),I=!C.isPropagationStopped(),da=!C.isImmediatePropagationStopped(),ia=C.isDefaultPrevented());E=h(new Event(E,{bubbles:I,cancelable:!0}),P);return ia&&E.preventDefault(),da&&y.dispatchEvent(E),E.defaultPrevented&&C&&C.preventDefault(),
E}},Oc={setDataAttribute:function(y,E,P){y.setAttribute("data-bs-".concat(g(E)),P)},removeDataAttribute:function(y,E){y.removeAttribute("data-bs-".concat(g(E)))},getDataAttributes:function(y){if(!y)return{};var E={},P=Object.keys(y.dataset).filter(function(sa){return sa.startsWith("bs")&&!sa.startsWith("bsConfig")}),t=!0,C=!1,I=void 0;try{for(var da,ia=P[Symbol.iterator]();!(t=(da=ia.next()).done);t=!0){var pa=da.value,va=pa.replace(/^bs/,"");E[va=va.charAt(0).toLowerCase()+va.slice(1,va.length)]=
e(y.dataset[pa])}}catch(sa){C=!0,I=sa}finally{try{t||null==ia.return||ia.return()}finally{if(C)throw I;}}return E},getDataAttribute:function(y,E){return e(y.getAttribute("data-bs-".concat(g(E))))}},Fd=function(){function y(){Ib(this,y)}return Jb(y,[{key:"_getConfig",value:function(E){return E=this._mergeConfigObj(E),E=this._configAfterMerge(E),this._typeCheckConfig(E),E}},{key:"_configAfterMerge",value:function(E){return E}},{key:"_mergeConfigObj",value:function(E,P){var t=gb(P)?Oc.getDataAttribute(P,
"config"):{};return Le({},this.constructor.Default,"object"==typeof t?t:{},gb(P)?Oc.getDataAttributes(P):{},"object"==typeof E?E:{})}},{key:"_typeCheckConfig",value:function(E){var P=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.constructor.DefaultType,t=!0,C=!1,I=void 0;try{for(var da,ia=Object.entries(P)[Symbol.iterator]();!(t=(da=ia.next()).done);t=!0){var pa=te(da.value,2),va=pa[0],sa=pa[1],Aa=E[va],Ma=gb(Aa)?"element":null==Aa?"".concat(Aa):Object.prototype.toString.call(Aa).match(/\s([a-z]+)/i)[1].toLowerCase();
if(!(new RegExp(sa)).test(Ma))throw TypeError("".concat(this.constructor.NAME.toUpperCase(),': Option "').concat(va,'" provided type "').concat(Ma,'" but expected type "').concat(sa,'".'));}}catch(Oa){C=!0,I=Oa}finally{try{t||null==ia.return||ia.return()}finally{if(C)throw I;}}}}],[{key:"Default",get:function(){return{}}},{key:"DefaultType",get:function(){return{}}},{key:"NAME",get:function(){throw Error('You have to implement the static method "NAME", for each component!');}}]),y}(),zc=function(y){function E(t,
C){var I;return Ib(this,E),I=P.call(this),(t=Kc(t))&&(I._element=t,I._config=I._getConfig(C),dc.set(I._element,I.constructor.DATA_KEY,zi(I))),od(I)}gc(E,y);var P=hc(E);return Jb(E,[{key:"dispose",value:function(){dc.remove(this._element,this.constructor.DATA_KEY);Ja.off(this._element,this.constructor.EVENT_KEY);var t=!0,C=!1,I=void 0;try{for(var da,ia=Object.getOwnPropertyNames(this)[Symbol.iterator]();!(t=(da=ia.next()).done);t=!0)this[da.value]=null}catch(pa){C=!0,I=pa}finally{try{t||null==ia.return||
ia.return()}finally{if(C)throw I;}}}},{key:"_queueCallback",value:function(t,C){lb(t,C,!(2<arguments.length)||void 0===arguments[2]||arguments[2])}},{key:"_getConfig",value:function(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}}],[{key:"getInstance",value:function(t){return dc.get(Kc(t),this.DATA_KEY)}},{key:"getOrCreateInstance",value:function(t){var C=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(t)||
new this(t,"object"==typeof C?C:null)}},{key:"VERSION",get:function(){return"5.3.3"}},{key:"DATA_KEY",get:function(){return"bs.".concat(this.NAME)}},{key:"EVENT_KEY",get:function(){return".".concat(this.DATA_KEY)}},{key:"eventName",value:function(t){return"".concat(t).concat(this.EVENT_KEY)}}]),E}(Fd),qd=function(y){var E=y.getAttribute("data-bs-target");if(!E||"#"===E){y=y.getAttribute("href");if(!y||!y.includes("#")&&!y.startsWith("."))return null;y.includes("#")&&!y.startsWith("#")&&(y="#".concat(y.split("#")[1]));
E=y&&"#"!==y?y.trim():null}return E?E.split(",").map(function(P){return Lc(P)}).join(","):null},jb={find:function(y){var E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement;return(ma=[]).concat.apply(ma,ce(Element.prototype.querySelectorAll.call(E,y)))},findOne:function(y){return Element.prototype.querySelector.call(1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement,y)},children:function(y,E){return(rb=[]).concat.apply(rb,ce(y.children)).filter(function(P){return P.matches(E)})},
parents:function(y,E){var P=[];for(y=y.parentNode.closest(E);y;)P.push(y),y=y.parentNode.closest(E);return P},prev:function(y,E){for(y=y.previousElementSibling;y;){if(y.matches(E))return[y];y=y.previousElementSibling}return[]},next:function(y,E){for(y=y.nextElementSibling;y;){if(y.matches(E))return[y];y=y.nextElementSibling}return[]},focusableChildren:function(y){var E='a button input textarea select details [tabindex] [contenteditable="true"]'.split(" ").map(function(P){return"".concat(P,':not([tabindex^="-"])')}).join(",");
return this.find(E,y).filter(function(P){return!qc(P)&&Cb(P)})},getSelectorFromElement:function(y){return(y=qd(y))&&jb.findOne(y)?y:null},getElementFromSelector:function(y){return(y=qd(y))?jb.findOne(y):null},getMultipleElementsFromSelector:function(y){return(y=qd(y))?jb.find(y):[]}},K=function(y){var E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"hide",P="click.dismiss".concat(y.EVENT_KEY),t=y.NAME;Ja.on(document,P,'[data-bs-dismiss="'.concat(t,'"]'),function(C){(["A","AREA"].includes(this.tagName)&&
C.preventDefault(),qc(this))||(C=jb.getElementFromSelector(this)||this.closest(".".concat(t)),y.getOrCreateInstance(C)[E]())})},aa="close".concat(".bs.alert"),xa="closed".concat(".bs.alert"),S=function(y){function E(){return Ib(this,E),P.apply(this,arguments)}gc(E,y);var P=hc(E);return Jb(E,[{key:"close",value:function(){var t=this;if(!Ja.trigger(this._element,aa).defaultPrevented){this._element.classList.remove("show");var C=this._element.classList.contains("fade");this._queueCallback(function(){return t._destroyElement()},
this._element,C)}}},{key:"_destroyElement",value:function(){this._element.remove();Ja.trigger(this._element,xa);this.dispose()}}],[{key:"NAME",get:function(){return"alert"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var C=E.getOrCreateInstance(this);if("string"==typeof t){if(void 0===C[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));C[t](this)}})}}]),E}(zc);K(S,"close");yc(S);var F=function(y){function E(){return Ib(this,E),P.apply(this,
arguments)}gc(E,y);var P=hc(E);return Jb(E,[{key:"toggle",value:function(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}}],[{key:"NAME",get:function(){return"button"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var C=E.getOrCreateInstance(this);"toggle"===t&&C[t]()})}}]),E}(zc);Ja.on(document,"click.bs.button.data-api",'[data-bs-toggle="button"]',function(y){y.preventDefault();y=y.target.closest('[data-bs-toggle="button"]');F.getOrCreateInstance(y).toggle()});
yc(F);var Q="touchstart".concat(".bs.swipe"),ca="touchmove".concat(".bs.swipe"),ua="touchend".concat(".bs.swipe"),Ea="pointerdown".concat(".bs.swipe"),Fa="pointerup".concat(".bs.swipe"),Qa={endCallback:null,leftCallback:null,rightCallback:null},vb={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},Ha=function(y){function E(t,C){var I;return Ib(this,E),(I=P.call(this))._element=t,t&&E.isSupported()&&(I._config=I._getConfig(C),I._deltaX=0,I._supportPointerEvents=
!!window.PointerEvent,I._initEvents()),od(I)}gc(E,y);var P=hc(E);return Jb(E,[{key:"dispose",value:function(){Ja.off(this._element,".bs.swipe")}},{key:"_start",value:function(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}},{key:"_end",value:function(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX);this._handleSwipe();Ec(this._config.endCallback)}},{key:"_move",value:function(t){this._deltaX=t.touches&&
1<t.touches.length?0:t.touches[0].clientX-this._deltaX}},{key:"_handleSwipe",value:function(){var t=Math.abs(this._deltaX);40>=t||(t/=this._deltaX,this._deltaX=0,t&&Ec(0<t?this._config.rightCallback:this._config.leftCallback))}},{key:"_initEvents",value:function(){var t=this;this._supportPointerEvents?(Ja.on(this._element,Ea,function(C){return t._start(C)}),Ja.on(this._element,Fa,function(C){return t._end(C)}),this._element.classList.add("pointer-event")):(Ja.on(this._element,Q,function(C){return t._start(C)}),
Ja.on(this._element,ca,function(C){return t._move(C)}),Ja.on(this._element,ua,function(C){return t._end(C)}))}},{key:"_eventIsPointerPenTouch",value:function(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}}],[{key:"Default",get:function(){return Qa}},{key:"DefaultType",get:function(){return vb}},{key:"NAME",get:function(){return"swipe"}},{key:"isSupported",value:function(){return"ontouchstart"in document.documentElement||0<navigator.maxTouchPoints}}]),E}(Fd),
xb="slide".concat(".bs.carousel"),Fc="slid".concat(".bs.carousel"),jd="keydown".concat(".bs.carousel"),Wa="mouseenter".concat(".bs.carousel"),bb="mouseleave".concat(".bs.carousel"),cb="dragstart".concat(".bs.carousel"),Db="load".concat(".bs.carousel").concat(".data-api"),Sb="click".concat(".bs.carousel").concat(".data-api"),wd={ArrowLeft:"right",ArrowRight:"left"},Qd={interval:5E3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},mi={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",
ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},qe=function(y){function E(t,C){var I;return Ib(this,E),(I=P.call(this,t,C))._interval=null,I._activeElement=null,I._isSliding=!1,I.touchTimeout=null,I._swipeHelper=null,I._indicatorsElement=jb.findOne(".carousel-indicators",I._element),I._addEventListeners(),"carousel"===I._config.ride&&I.cycle(),od(I)}gc(E,y);var P=hc(E);return Jb(E,[{key:"next",value:function(){this._slide("next")}},{key:"nextWhenVisible",value:function(){!document.hidden&&
Cb(this._element)&&this.next()}},{key:"prev",value:function(){this._slide("prev")}},{key:"pause",value:function(){this._isSliding&&this._element.dispatchEvent(new Event("transitionend"));this._clearInterval()}},{key:"cycle",value:function(){var t=this;this._clearInterval();this._updateInterval();this._interval=setInterval(function(){return t.nextWhenVisible()},this._config.interval)}},{key:"_maybeEnableCycle",value:function(){var t=this;this._config.ride&&(this._isSliding?Ja.one(this._element,Fc,
function(){return t.cycle()}):this.cycle())}},{key:"to",value:function(t){var C=this,I=this._getItems();if(!(t>I.length-1||0>t)){if(this._isSliding)return void Ja.one(this._element,Fc,function(){return C.to(t)});var da=this._getItemIndex(this._getActive());da!==t&&this._slide(t>da?"next":"prev",I[t])}}},{key:"dispose",value:function(){this._swipeHelper&&this._swipeHelper.dispose();hd(Sc(E.prototype),"dispose",this).call(this)}},{key:"_configAfterMerge",value:function(t){return t.defaultInterval=t.interval,
t}},{key:"_addEventListeners",value:function(){var t=this;this._config.keyboard&&Ja.on(this._element,jd,function(C){return t._keydown(C)});"hover"===this._config.pause&&(Ja.on(this._element,Wa,function(){return t.pause()}),Ja.on(this._element,bb,function(){return t._maybeEnableCycle()}));this._config.touch&&Ha.isSupported()&&this._addTouchEventListeners()}},{key:"_addTouchEventListeners",value:function(){var t=this,C=!0,I=!1,da=void 0;try{for(var ia,pa=jb.find(".carousel-item img",this._element)[Symbol.iterator]();!(C=
(ia=pa.next()).done);C=!0)Ja.on(ia.value,cb,function(va){return va.preventDefault()})}catch(va){I=!0,da=va}finally{try{C||null==pa.return||pa.return()}finally{if(I)throw da;}}this._swipeHelper=new Ha(this._element,{leftCallback:function(){return t._slide(t._directionToOrder("left"))},rightCallback:function(){return t._slide(t._directionToOrder("right"))},endCallback:function(){"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(){return t._maybeEnableCycle()},
500+t._config.interval))}})}},{key:"_keydown",value:function(t){if(!/input|textarea/i.test(t.target.tagName)){var C=wd[t.key];C&&(t.preventDefault(),this._slide(this._directionToOrder(C)))}}},{key:"_getItemIndex",value:function(t){return this._getItems().indexOf(t)}},{key:"_setActiveIndicatorElement",value:function(t){if(this._indicatorsElement){var C=jb.findOne(".active",this._indicatorsElement);C.classList.remove("active");C.removeAttribute("aria-current");(t=jb.findOne('[data-bs-slide-to="'.concat(t,
'"]'),this._indicatorsElement))&&(t.classList.add("active"),t.setAttribute("aria-current","true"))}}},{key:"_updateInterval",value:function(){var t=this._activeElement||this._getActive();t&&(t=Number.parseInt(t.getAttribute("data-bs-interval"),10),this._config.interval=t||this._config.defaultInterval)}},{key:"_slide",value:function(t){var C=this,I=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(!this._isSliding){var da=this._getActive(),ia="next"===t,pa=I||$a(this._getItems(),da,ia,
this._config.wrap);if(pa!==da){var va=this._getItemIndex(pa),sa=function(Oa){return Ja.trigger(C._element,Oa,{relatedTarget:pa,direction:C._orderToDirection(t),from:C._getItemIndex(da),to:va})};if(!sa(xb).defaultPrevented&&da&&pa){I=!!this._interval;this.pause();this._isSliding=!0;this._setActiveIndicatorElement(va);this._activeElement=pa;var Aa=ia?"carousel-item-start":"carousel-item-end",Ma=ia?"carousel-item-next":"carousel-item-prev";pa.classList.add(Ma);pa.offsetHeight;da.classList.add(Aa);pa.classList.add(Aa);
this._queueCallback(function(){pa.classList.remove(Aa,Ma);pa.classList.add("active");da.classList.remove("active",Ma,Aa);C._isSliding=!1;sa(Fc)},da,this._isAnimated());I&&this.cycle()}}}}},{key:"_isAnimated",value:function(){return this._element.classList.contains("slide")}},{key:"_getActive",value:function(){return jb.findOne(".active.carousel-item",this._element)}},{key:"_getItems",value:function(){return jb.find(".carousel-item",this._element)}},{key:"_clearInterval",value:function(){this._interval&&
(clearInterval(this._interval),this._interval=null)}},{key:"_directionToOrder",value:function(t){return xc()?"left"===t?"prev":"next":"left"===t?"next":"prev"}},{key:"_orderToDirection",value:function(t){return xc()?"prev"===t?"left":"right":"prev"===t?"right":"left"}}],[{key:"Default",get:function(){return Qd}},{key:"DefaultType",get:function(){return mi}},{key:"NAME",get:function(){return"carousel"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var C=E.getOrCreateInstance(this,
t);if("number"!=typeof t){if("string"==typeof t){if(void 0===C[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));C[t]()}}else C.to(t)})}}]),E}(zc);Ja.on(document,Sb,"[data-bs-slide], [data-bs-slide-to]",function(y){var E=jb.getElementFromSelector(this);if(E&&E.classList.contains("carousel"))return y.preventDefault(),y=qe.getOrCreateInstance(E),E=this.getAttribute("data-bs-slide-to"),E?y.to(E):"next"===Oc.getDataAttribute(this,"slide")?y.next():y.prev(),void y._maybeEnableCycle()});
Ja.on(window,Db,function(){var y=jb.find('[data-bs-ride="carousel"]'),E=!0,P=!1,t=void 0;try{for(var C,I=y[Symbol.iterator]();!(E=(C=I.next()).done);E=!0)qe.getOrCreateInstance(C.value)}catch(da){P=!0,t=da}finally{try{E||null==I.return||I.return()}finally{if(P)throw t;}}});yc(qe);var ni="show".concat(".bs.collapse"),oi="shown".concat(".bs.collapse"),af="hide".concat(".bs.collapse"),Cd="hidden".concat(".bs.collapse"),Ek=":scope .".concat("collapse"," .").concat("collapse"),pi={parent:null,toggle:!0},
Ik={parent:"(null|element)",toggle:"boolean"},Ng=function(y){function E(t,C){Ib(this,E);(ia=P.call(this,t,C))._isTransitioning=!1;ia._triggerArray=[];t=jb.find('[data-bs-toggle="collapse"]');C=!0;var I=!1,da=void 0;try{for(var ia,pa,va=t[Symbol.iterator]();!(C=(pa=va.next()).done);C=!0){var sa=pa.value,Aa=jb.getSelectorFromElement(sa),Ma=jb.find(Aa).filter(function(Oa){return Oa===ia._element});null!==Aa&&Ma.length&&ia._triggerArray.push(sa)}}catch(Oa){I=!0,da=Oa}finally{try{C||null==va.return||va.return()}finally{if(I)throw da;
}}return ia._initializeChildren(),ia._config.parent||ia._addAriaAndCollapsedClass(ia._triggerArray,ia._isShown()),ia._config.toggle&&ia.toggle(),od(ia)}gc(E,y);var P=hc(E);return Jb(E,[{key:"toggle",value:function(){this._isShown()?this.hide():this.show()}},{key:"show",value:function(){var t=this;if(!this._isTransitioning&&!this._isShown()){var C=[];if(this._config.parent&&(C=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(function(Aa){return Aa!==t._element}).map(function(Aa){return E.getOrCreateInstance(Aa,
{toggle:!1})})),!(C.length&&C[0]._isTransitioning||Ja.trigger(this._element,ni).defaultPrevented)){var I=!0,da=!1,ia=void 0;try{for(var pa,va=C[Symbol.iterator]();!(I=(pa=va.next()).done);I=!0)pa.value.hide()}catch(Aa){da=!0,ia=Aa}finally{try{I||null==va.return||va.return()}finally{if(da)throw ia;}}var sa=this._getDimension();this._element.classList.remove("collapse");this._element.classList.add("collapsing");this._element.style[sa]=0;this._addAriaAndCollapsedClass(this._triggerArray,!0);this._isTransitioning=
!0;C="scroll".concat(sa[0].toUpperCase()+sa.slice(1));this._queueCallback(function(){t._isTransitioning=!1;t._element.classList.remove("collapsing");t._element.classList.add("collapse","show");t._element.style[sa]="";Ja.trigger(t._element,oi)},this._element,!0);this._element.style[sa]="".concat(this._element[C],"px")}}}},{key:"hide",value:function(){var t=this;if(!this._isTransitioning&&this._isShown()&&!Ja.trigger(this._element,af).defaultPrevented){var C=this._getDimension();this._element.style[C]=
"".concat(this._element.getBoundingClientRect()[C],"px");this._element.offsetHeight;this._element.classList.add("collapsing");this._element.classList.remove("collapse","show");var I=!0,da=!1,ia=void 0;try{for(var pa,va=this._triggerArray[Symbol.iterator]();!(I=(pa=va.next()).done);I=!0){var sa=pa.value,Aa=jb.getElementFromSelector(sa);Aa&&!this._isShown(Aa)&&this._addAriaAndCollapsedClass([sa],!1)}}catch(Ma){da=!0,ia=Ma}finally{try{I||null==va.return||va.return()}finally{if(da)throw ia;}}this._isTransitioning=
!0;this._element.style[C]="";this._queueCallback(function(){t._isTransitioning=!1;t._element.classList.remove("collapsing");t._element.classList.add("collapse");Ja.trigger(t._element,Cd)},this._element,!0)}}},{key:"_isShown",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains("show")}},{key:"_configAfterMerge",value:function(t){return t.toggle=!!t.toggle,t.parent=Kc(t.parent),t}},{key:"_getDimension",value:function(){return this._element.classList.contains("collapse-horizontal")?
"width":"height"}},{key:"_initializeChildren",value:function(){if(this._config.parent){var t=this._getFirstLevelChildren('[data-bs-toggle="collapse"]'),C=!0,I=!1,da=void 0;try{for(var ia,pa=t[Symbol.iterator]();!(C=(ia=pa.next()).done);C=!0){var va=ia.value,sa=jb.getElementFromSelector(va);sa&&this._addAriaAndCollapsedClass([va],this._isShown(sa))}}catch(Aa){I=!0,da=Aa}finally{try{C||null==pa.return||pa.return()}finally{if(I)throw da;}}}}},{key:"_getFirstLevelChildren",value:function(t){var C=jb.find(Ek,
this._config.parent);return jb.find(t,this._config.parent).filter(function(I){return!C.includes(I)})}},{key:"_addAriaAndCollapsedClass",value:function(t,C){var I=!0,da=!1,ia=void 0;if(t.length)try{for(var pa,va=t[Symbol.iterator]();!(I=(pa=va.next()).done);I=!0){var sa=pa.value;sa.classList.toggle("collapsed",!C);sa.setAttribute("aria-expanded",C)}}catch(Aa){da=!0,ia=Aa}finally{try{I||null==va.return||va.return()}finally{if(da)throw ia;}}}}],[{key:"Default",get:function(){return pi}},{key:"DefaultType",
get:function(){return Ik}},{key:"NAME",get:function(){return"collapse"}},{key:"jQueryInterface",value:function(t){var C={};return"string"==typeof t&&/show|hide/.test(t)&&(C.toggle=!1),this.each(function(){var I=E.getOrCreateInstance(this,C);if("string"==typeof t){if(void 0===I[t])throw TypeError('No method named "'.concat(t,'"'));I[t]()}})}}]),E}(zc);Ja.on(document,"click".concat(".bs.collapse",".data-api"),'[data-bs-toggle="collapse"]',function(y){("A"===y.target.tagName||y.delegateTarget&&"A"===
y.delegateTarget.tagName)&&y.preventDefault();y=!0;var E=!1,P=void 0;try{for(var t,C=jb.getMultipleElementsFromSelector(this)[Symbol.iterator]();!(y=(t=C.next()).done);y=!0)Ng.getOrCreateInstance(t.value,{toggle:!1}).toggle()}catch(I){E=!0,P=I}finally{try{y||null==C.return||C.return()}finally{if(E)throw P;}}});yc(Ng);var Ye=["top","bottom","right","left"],Df=Ye.reduce(function(y,E){return y.concat([E+"-start",E+"-end"])},[]),Bf=[].concat(Ye,["auto"]).reduce(function(y,E){return y.concat([E,E+"-start",
E+"-end"])},[]),Cf="beforeRead read afterRead beforeMain main afterMain beforeWrite write afterWrite".split(" "),kg={name:"applyStyles",enabled:!0,phase:"write",fn:function(y){var E=y.state;Object.keys(E.elements).forEach(function(P){var t=E.styles[P]||{},C=E.attributes[P]||{},I=E.elements[P];r(I)&&p(I)&&(Object.assign(I.style,t),Object.keys(C).forEach(function(da){var ia=C[da];!1===ia?I.removeAttribute(da):I.setAttribute(da,!0===ia?"":ia)}))})},effect:function(y){var E=y.state,P={popper:{position:E.options.strategy,
left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(E.elements.popper.style,P.popper),E.styles=P,E.elements.arrow&&Object.assign(E.elements.arrow.style,P.arrow),function(){Object.keys(E.elements).forEach(function(t){var C=E.elements[t],I=E.attributes[t]||{};t=Object.keys(E.styles.hasOwnProperty(t)?E.styles[t]:P[t]).reduce(function(da,ia){return da[ia]="",da},{});r(C)&&p(C)&&(Object.assign(C.style,t),Object.keys(I).forEach(function(da){C.removeAttribute(da)}))})}},
requires:["computeStyles"]},Kd=Math.max,$d=Math.min,Ge=Math.round,Og={name:"arrow",enabled:!0,phase:"main",fn:function(y){var E,P=y.state,t=y.name,C=y.options,I=P.elements.arrow,da=P.modifiersData.popperOffsets,ia=w(P.placement);y=Da(ia);ia=0<=["left","right"].indexOf(ia)?"height":"width";if(I&&da){var pa;C=La("number"!=typeof(pa="function"==typeof(pa=C.padding)?pa(Object.assign({},P.rects,{placement:P.placement})):pa)?pa:Ka(pa,Ye));pa=O(I);var va="y"===y?"top":"left",sa="y"===y?"bottom":"right",
Aa=P.rects.reference[ia]+P.rects.reference[y]-da[y]-P.rects.popper[ia];da=da[y]-P.rects.reference[y];I=(I=qa(I))?"y"===y?I.clientHeight||0:I.clientWidth||0:0;da=I/2-pa[ia]/2+(Aa/2-da/2);ia=Kd(C[va],$d(da,I-pa[ia]-C[sa]));P.modifiersData[t]=((E={})[y]=ia,E.centerOffset=ia-da,E)}},effect:function(y){var E=y.state;y=y.options.element;y=void 0===y?"[data-popper-arrow]":y;null!=y&&("string"!=typeof y||(y=E.elements.popper.querySelector(y)))&&N(E.elements.popper,y)&&(E.elements.arrow=y)},requires:["popperOffsets"],
requiresIfExists:["preventOverflow"]},Jk={top:"auto",right:"auto",bottom:"auto",left:"auto"},Rg={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(y){var E=y.state,P=y.options,t=P.gpuAcceleration;y=P.adaptive;P=P.roundOffsets;P=void 0===P||P;t={placement:w(E.placement),variation:V(E.placement),popper:E.elements.popper,popperRect:E.rects.popper,gpuAcceleration:void 0===t||t,isFixed:"fixed"===E.options.strategy};null!=E.modifiersData.popperOffsets&&(E.styles.popper=Object.assign({},E.styles.popper,
Na(Object.assign({},t,{offsets:E.modifiersData.popperOffsets,position:E.options.strategy,adaptive:void 0===y||y,roundOffsets:P}))));null!=E.modifiersData.arrow&&(E.styles.arrow=Object.assign({},E.styles.arrow,Na(Object.assign({},t,{offsets:E.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:P}))));E.attributes.popper=Object.assign({},E.attributes.popper,{"data-popper-placement":E.placement})},data:{}},Ef={passive:!0},bf={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},
effect:function(y){var E=y.state,P=y.instance;y=y.options;var t=y.scroll,C=void 0===t||t;y=y.resize;var I=void 0===y||y,da=m(E.elements.popper),ia=[].concat(E.scrollParents.reference,E.scrollParents.popper);return C&&ia.forEach(function(pa){pa.addEventListener("scroll",P.update,Ef)}),I&&da.addEventListener("resize",P.update,Ef),function(){C&&ia.forEach(function(pa){pa.removeEventListener("scroll",P.update,Ef)});I&&da.removeEventListener("resize",P.update,Ef)}},data:{}},Ze={left:"right",right:"left",
bottom:"top",top:"bottom"},lg={start:"end",end:"start"},qi={name:"flip",enabled:!0,phase:"main",fn:function(y){var E=y.state,P=y.options;y=y.name;if(!E.modifiersData[y]._skip){var t=P.mainAxis;t=void 0===t||t;var C=P.altAxis;C=void 0===C||C;var I=P.fallbackPlacements,da=P.padding,ia=P.boundary,pa=P.rootBoundary,va=P.altBoundary,sa=P.flipVariations,Aa=void 0===sa||sa,Ma=P.allowedAutoPlacements;P=E.options.placement;sa=w(P);I=I||(sa!==P&&Aa?function(Wb){if("auto"===w(Wb))return[];var ec=ya(Wb);return[wb(Wb),
ec,wb(ec)]}(P):[ya(P)]);var Oa=[P].concat(I).reduce(function(Wb,ec){var fc,bd,se,Ed,Ko,Lo,Mo,No,Oo,Po,Zk,$k;return Wb.concat("auto"===w(ec)?(bd=(fc={placement:ec,boundary:ia,rootBoundary:pa,padding:da,flipVariations:Aa,allowedAutoPlacements:Ma}).placement,se=fc.boundary,Ed=fc.rootBoundary,Ko=fc.padding,Lo=fc.flipVariations,No=void 0===(Mo=fc.allowedAutoPlacements)?Bf:Mo,0===(Zk=(Po=(Oo=V(bd))?Lo?Df:Df.filter(function(ff){return V(ff)===Oo}):Ye).filter(function(ff){return 0<=No.indexOf(ff)})).length&&
(Zk=Po),Object.keys($k=Zk.reduce(function(ff,Yg){return ff[Yg]=Z(E,{placement:Yg,boundary:se,rootBoundary:Ed,padding:Ko})[w(Yg)],ff},{})).sort(function(ff,Yg){return $k[ff]-$k[Yg]})):ec)},[]);P=E.rects.reference;I=E.rects.popper;var Ra=new Map;sa=!0;for(var tb=Oa[0],ob=0;ob<Oa.length;ob++){var ab=Oa[ob],ub=w(ab),Gb="start"===V(ab),eb=0<=["top","bottom"].indexOf(ub),Hb=eb?"width":"height",Zb=Z(E,{placement:ab,boundary:ia,rootBoundary:pa,altBoundary:va,padding:da});Gb=eb?Gb?"right":"left":Gb?"bottom":
"top";P[Hb]>I[Hb]&&(Gb=ya(Gb));Hb=ya(Gb);eb=[];if(t&&eb.push(0>=Zb[ub]),C&&eb.push(0>=Zb[Gb],0>=Zb[Hb]),eb.every(function(Wb){return Wb})){tb=ab;sa=!1;break}Ra.set(ab,eb)}if(sa)for(t=function(Wb){var ec=Oa.find(function(fc){if(fc=Ra.get(fc))return fc.slice(0,Wb).every(function(bd){return bd})});if(ec)return tb=ec,"break"},C=Aa?3:1;0<C&&"break"!==t(C);C--);E.placement!==tb&&(E.modifiersData[y]._skip=!0,E.placement=tb,E.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},ri={name:"hide",enabled:!0,
phase:"main",requiresIfExists:["preventOverflow"],fn:function(y){var E=y.state;y=y.name;var P=E.rects.reference,t=E.rects.popper,C=E.modifiersData.preventOverflow,I=Z(E,{elementContext:"reference"}),da=Z(E,{altBoundary:!0});P=za(I,P);t=za(da,t,C);C=A(P);da=A(t);E.modifiersData[y]={referenceClippingOffsets:P,popperEscapeOffsets:t,isReferenceHidden:C,hasPopperEscaped:da};E.attributes.popper=Object.assign({},E.attributes.popper,{"data-popper-reference-hidden":C,"data-popper-escaped":da})}},cf={name:"offset",
enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(y){var E=y.state,P=y.name;y=y.options.offset;var t=void 0===y?[0,0]:y;y=Bf.reduce(function(da,ia){var pa,va,sa,Aa,Ma,Oa;return da[ia]=(pa=E.rects,sa=0<=["left","top"].indexOf(va=w(ia))?-1:1,Ma=(Aa="function"==typeof t?t(Object.assign({},pa,{placement:ia})):t)[0],Oa=Aa[1],Ma=Ma||0,Oa=(Oa||0)*sa,0<=["left","right"].indexOf(va)?{x:Oa,y:Ma}:{x:Ma,y:Oa}),da},{});var C=y[E.placement],I=C.x;C=C.y;null!=E.modifiersData.popperOffsets&&(E.modifiersData.popperOffsets.x+=
I,E.modifiersData.popperOffsets.y+=C);E.modifiersData[P]=y}},Sg={name:"popperOffsets",enabled:!0,phase:"read",fn:function(y){var E=y.state;E.modifiersData[y.name]=Ca({reference:E.rects.reference,element:E.rects.popper,strategy:"absolute",placement:E.placement})},data:{}},df={name:"preventOverflow",enabled:!0,phase:"main",fn:function(y){var E=y.state,P=y.options;y=y.name;var t=P.mainAxis,C=P.altAxis,I=P.tether;I=void 0===I||I;var da=P.tetherOffset,ia=void 0===da?0:da,pa=Z(E,{boundary:P.boundary,rootBoundary:P.rootBoundary,
padding:P.padding,altBoundary:P.altBoundary}),va=w(E.placement),sa=V(E.placement),Aa=!sa,Ma=Da(va);P="x"===Ma?"y":"x";da=E.modifiersData.popperOffsets;var Oa=E.rects.reference,Ra=E.rects.popper;ia="function"==typeof ia?ia(Object.assign({},E.rects,{placement:E.placement})):ia;var tb="number"==typeof ia?{mainAxis:ia,altAxis:ia}:Object.assign({mainAxis:0,altAxis:0},ia),ob=E.modifiersData.offset?E.modifiersData.offset[E.placement]:null;ia={x:0,y:0};if(da){if(void 0===t||t){var ab,ub="y"===Ma?"top":"left",
Gb="y"===Ma?"bottom":"right",eb="y"===Ma?"height":"width";t=da[Ma];var Hb=t+pa[ub],Zb=t-pa[Gb],Wb=I?-Ra[eb]/2:0,ec="start"===sa?Oa[eb]:Ra[eb];sa="start"===sa?-Ra[eb]:-Oa[eb];var fc=E.elements.arrow;fc=I&&fc?O(fc):{width:0,height:0};var bd=E.modifiersData["arrow#persistent"]?E.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0};ub=bd[ub];Gb=bd[Gb];fc=Kd(0,$d(Oa[eb],fc[eb]));ec=Aa?Oa[eb]/2-Wb-fc-ub-tb.mainAxis:ec-fc-ub-tb.mainAxis;Aa=Aa?-Oa[eb]/2+Wb+fc+Gb+tb.mainAxis:sa+fc+Gb+
tb.mainAxis;Wb=(eb=E.elements.arrow&&qa(E.elements.arrow))?"y"===Ma?eb.clientTop||0:eb.clientLeft||0:0;eb=null!=(ab=null==ob?void 0:ob[Ma])?ab:0;ab=I?$d(Hb,t+ec-eb-Wb):Hb;Zb=I?Kd(Zb,t+Aa-eb):Zb;ab=Kd(ab,$d(t,Zb));da[Ma]=ab;ia[Ma]=ab-t}if(void 0!==C&&C){var se,Ed;C=da[P];t="y"===P?"height":"width";ab=C+pa["x"===Ma?"top":"left"];pa=C-pa["x"===Ma?"bottom":"right"];va=-1!==["top","left"].indexOf(va);Ma=null!=(Ed=null==ob?void 0:ob[P])?Ed:0;Ed=va?ab:C-Oa[t]-Ra[t]-Ma+tb.altAxis;Oa=va?C+Oa[t]+Ra[t]-Ma-tb.altAxis:
pa;Ra=I&&va?(se=Kd(Ed,$d(C,Oa)))>Oa?Oa:se:Kd(I?Ed:ab,$d(C,I?Oa:pa));da[P]=Ra;ia[P]=Ra-C}E.modifiersData[y]=ia}},requiresIfExists:["offset"]},si={placement:"bottom",modifiers:[],strategy:"absolute"},Kk=oa(),Lk=oa({defaultModifiers:[bf,Sg,Rg,kg]}),Tg=oa({defaultModifiers:[bf,Sg,Rg,kg,cf,qi,df,Og,ri]}),ef=Object.freeze(Object.defineProperty({__proto__:null,afterMain:"afterMain",afterRead:"afterRead",afterWrite:"afterWrite",applyStyles:kg,arrow:Og,auto:"auto",basePlacements:Ye,beforeMain:"beforeMain",
beforeRead:"beforeRead",beforeWrite:"beforeWrite",bottom:"bottom",clippingParents:"clippingParents",computeStyles:Rg,createPopper:Tg,createPopperBase:Kk,createPopperLite:Lk,detectOverflow:Z,end:"end",eventListeners:bf,flip:qi,hide:ri,left:"left",main:"main",modifierPhases:Cf,offset:cf,placements:Bf,popper:"popper",popperGenerator:oa,popperOffsets:Sg,preventOverflow:df,read:"read",reference:"reference",right:"right",start:"start",top:"top",variationPlacements:Df,viewport:"viewport",write:"write"},
Symbol.toStringTag,{value:"Module"})),ti="hide".concat(".bs.dropdown"),Ug="hidden".concat(".bs.dropdown"),ui="show".concat(".bs.dropdown"),vi="shown".concat(".bs.dropdown"),wi="click".concat(".bs.dropdown").concat(".data-api"),Vg="keydown".concat(".bs.dropdown").concat(".data-api"),Mk="keyup".concat(".bs.dropdown").concat(".data-api"),Nk="".concat('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',".").concat("show"),Ok=xc()?"top-end":"top-start",Pk=xc()?"top-start":"top-end",Qk=xc()?"bottom-end":
"bottom-start",Rk=xc()?"bottom-start":"bottom-end",Sk=xc()?"left-start":"right-start",Tk=xc()?"right-start":"left-start",xi={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Pg={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},re=function(y){function E(t,C){var I;return Ib(this,E),(I=P.call(this,t,C))._popper=
null,I._parent=I._element.parentNode,I._menu=jb.next(I._element,".dropdown-menu")[0]||jb.prev(I._element,".dropdown-menu")[0]||jb.findOne(".dropdown-menu",I._parent),I._inNavbar=I._detectNavbar(),od(I)}gc(E,y);var P=hc(E);return Jb(E,[{key:"toggle",value:function(){return this._isShown()?this.hide():this.show()}},{key:"show",value:function(){if(!qc(this._element)&&!this._isShown()){var t={relatedTarget:this._element};if(!Ja.trigger(this._element,ui,t).defaultPrevented){var C=!0,I=!1,da=void 0;if(this._createPopper(),
"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))try{for(var ia,pa,va=(ia=[]).concat.apply(ia,ce(document.body.children))[Symbol.iterator]();!(C=(pa=va.next()).done);C=!0)Ja.on(pa.value,"mouseover",Ab)}catch(sa){I=!0,da=sa}finally{try{C||null==va.return||va.return()}finally{if(I)throw da;}}this._element.focus();this._element.setAttribute("aria-expanded",!0);this._menu.classList.add("show");this._element.classList.add("show");Ja.trigger(this._element,vi,t)}}}},{key:"hide",
value:function(){!qc(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}},{key:"dispose",value:function(){this._popper&&this._popper.destroy();hd(Sc(E.prototype),"dispose",this).call(this)}},{key:"update",value:function(){this._inNavbar=this._detectNavbar();this._popper&&this._popper.update()}},{key:"_completeHide",value:function(t){if(!Ja.trigger(this._element,ti,t).defaultPrevented){var C=!0,I=!1,da=void 0;if("ontouchstart"in document.documentElement)try{for(var ia,
pa,va=(ia=[]).concat.apply(ia,ce(document.body.children))[Symbol.iterator]();!(C=(pa=va.next()).done);C=!0)Ja.off(pa.value,"mouseover",Ab)}catch(sa){I=!0,da=sa}finally{try{C||null==va.return||va.return()}finally{if(I)throw da;}}this._popper&&this._popper.destroy();this._menu.classList.remove("show");this._element.classList.remove("show");this._element.setAttribute("aria-expanded","false");Oc.removeDataAttribute(this._menu,"popper");Ja.trigger(this._element,Ug,t)}}},{key:"_getConfig",value:function(t){if("object"==
typeof(t=hd(Sc(E.prototype),"_getConfig",this).call(this,t)).reference&&!gb(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw TypeError("".concat("DROPDOWN",': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'));return t}},{key:"_createPopper",value:function(){if(void 0===ef)throw TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var t=this._element;"parent"===this._config.reference?t=this._parent:gb(this._config.reference)?
t=Kc(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);var C=this._getPopperConfig();this._popper=Tg(t,this._menu,C)}},{key:"_isShown",value:function(){return this._menu.classList.contains("show")}},{key:"_getPlacement",value:function(){var t=this._parent;if(t.classList.contains("dropend"))return Sk;if(t.classList.contains("dropstart"))return Tk;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";
var C="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?C?Pk:Ok:C?Rk:Qk}},{key:"_detectNavbar",value:function(){return null!==this._element.closest(".navbar")}},{key:"_getOffset",value:function(){var t=this,C=this._config.offset;return"string"==typeof C?C.split(",").map(function(I){return Number.parseInt(I,10)}):"function"==typeof C?function(I){return C(I,t._element)}:C}},{key:"_getPopperConfig",value:function(){var t={placement:this._getPlacement(),
modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Oc.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),Le({},t,Ec(this._config.popperConfig,[t]))}},{key:"_selectMenuItem",value:function(t){var C=t.key;t=t.target;var I=jb.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(function(da){return Cb(da)});
I.length&&$a(I,t,"ArrowDown"===C,!I.includes(t)).focus()}}],[{key:"Default",get:function(){return xi}},{key:"DefaultType",get:function(){return Pg}},{key:"NAME",get:function(){return"dropdown"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var C=E.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===C[t])throw TypeError('No method named "'.concat(t,'"'));C[t]()}})}},{key:"clearMenus",value:function(t){if(2!==t.button&&("keyup"!==t.type||"Tab"===t.key)){var C=jb.find(Nk),
I=!0,da=!1,ia=void 0;try{for(var pa,va=C[Symbol.iterator]();!(I=(pa=va.next()).done);I=!0){var sa=E.getInstance(pa.value);if(sa&&!1!==sa._config.autoClose){var Aa=t.composedPath(),Ma=Aa.includes(sa._menu);if(!(Aa.includes(sa._element)||"inside"===sa._config.autoClose&&!Ma||"outside"===sa._config.autoClose&&Ma||sa._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))){var Oa={relatedTarget:sa._element};"click"===t.type&&(Oa.clickEvent=
t);sa._completeHide(Oa)}}}}catch(Ra){da=!0,ia=Ra}finally{try{I||null==va.return||va.return()}finally{if(da)throw ia;}}}}},{key:"dataApiKeydownHandler",value:function(t){var C=/input|textarea/i.test(t.target.tagName),I="Escape"===t.key,da=["ArrowUp","ArrowDown"].includes(t.key);if((da||I)&&(!C||I)){t.preventDefault();C=this.matches('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)')?this:jb.prev(this,'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)')[0]||jb.next(this,'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)')[0]||
jb.findOne('[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',t.delegateTarget.parentNode);I=E.getOrCreateInstance(C);if(da)return t.stopPropagation(),I.show(),void I._selectMenuItem(t);I._isShown()&&(t.stopPropagation(),I.hide(),C.focus())}}}]),E}(zc);Ja.on(document,Vg,'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',re.dataApiKeydownHandler);Ja.on(document,Vg,".dropdown-menu",re.dataApiKeydownHandler);Ja.on(document,wi,re.clearMenus);Ja.on(document,Mk,re.clearMenus);Ja.on(document,
wi,'[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',function(y){y.preventDefault();re.getOrCreateInstance(this).toggle()});yc(re);var mg="mousedown.bs.".concat("backdrop"),Uk={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ff={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},Wg=function(y){function E(t){var C;return Ib(this,E),(C=P.call(this))._config=C._getConfig(t),
C._isAppended=!1,C._element=null,od(C)}gc(E,y);var P=hc(E);return Jb(E,[{key:"show",value:function(t){if(!this._config.isVisible)return void Ec(t);this._append();var C=this._getElement();this._config.isAnimated&&C.offsetHeight;C.classList.add("show");this._emulateAnimation(function(){Ec(t)})}},{key:"hide",value:function(t){var C=this;this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(function(){C.dispose();Ec(t)})):Ec(t)}},{key:"dispose",value:function(){this._isAppended&&
(Ja.off(this._element,mg),this._element.remove(),this._isAppended=!1)}},{key:"_getElement",value:function(){if(!this._element){var t=document.createElement("div");t.className=this._config.className;this._config.isAnimated&&t.classList.add("fade");this._element=t}return this._element}},{key:"_configAfterMerge",value:function(t){return t.rootElement=Kc(t.rootElement),t}},{key:"_append",value:function(){var t=this;if(!this._isAppended){var C=this._getElement();this._config.rootElement.append(C);Ja.on(C,
mg,function(){Ec(t._config.clickCallback)});this._isAppended=!0}}},{key:"_emulateAnimation",value:function(t){lb(t,this._getElement(),this._config.isAnimated)}}],[{key:"Default",get:function(){return Uk}},{key:"DefaultType",get:function(){return Ff}},{key:"NAME",get:function(){return"backdrop"}}]),E}(Fd),Xg="focusin".concat(".bs.focustrap"),Vk="keydown.tab".concat(".bs.focustrap"),Wk={autofocus:!0,trapElement:null},Xk={autofocus:"boolean",trapElement:"element"},q=function(y){function E(t){var C;return Ib(this,
E),(C=P.call(this))._config=C._getConfig(t),C._isActive=!1,C._lastTabNavDirection=null,od(C)}gc(E,y);var P=hc(E);return Jb(E,[{key:"activate",value:function(){var t=this;this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Ja.off(document,".bs.focustrap"),Ja.on(document,Xg,function(C){return t._handleFocusin(C)}),Ja.on(document,Vk,function(C){return t._handleKeydown(C)}),this._isActive=!0)}},{key:"deactivate",value:function(){this._isActive&&(this._isActive=!1,Ja.off(document,
".bs.focustrap"))}},{key:"_handleFocusin",value:function(t){var C=this._config.trapElement;t.target===document||t.target===C||C.contains(t.target)||(t=jb.focusableChildren(C),0===t.length?C.focus():"backward"===this._lastTabNavDirection?t[t.length-1].focus():t[0].focus())}},{key:"_handleKeydown",value:function(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?"backward":"forward")}}],[{key:"Default",get:function(){return Wk}},{key:"DefaultType",get:function(){return Xk}},{key:"NAME",get:function(){return"focustrap"}}]),
E}(Fd),v=function(){function y(){Ib(this,y);this._element=document.body}return Jb(y,[{key:"getWidth",value:function(){return Math.abs(window.innerWidth-document.documentElement.clientWidth)}},{key:"hide",value:function(){var E=this.getWidth();this._disableOverFlow();this._setElementAttributes(this._element,"padding-right",function(P){return P+E});this._setElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top","padding-right",function(P){return P+E});this._setElementAttributes(".sticky-top",
"margin-right",function(P){return P-E})}},{key:"reset",value:function(){this._resetElementAttributes(this._element,"overflow");this._resetElementAttributes(this._element,"padding-right");this._resetElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top","padding-right");this._resetElementAttributes(".sticky-top","margin-right")}},{key:"isOverflowing",value:function(){return 0<this.getWidth()}},{key:"_disableOverFlow",value:function(){this._saveInitialAttribute(this._element,"overflow");
this._element.style.overflow="hidden"}},{key:"_setElementAttributes",value:function(E,P,t){var C=this,I=this.getWidth();this._applyManipulationCallback(E,function(da){if(da===C._element||!(window.innerWidth>da.clientWidth+I)){C._saveInitialAttribute(da,P);var ia=window.getComputedStyle(da).getPropertyValue(P);da.style.setProperty(P,"".concat(t(Number.parseFloat(ia)),"px"))}})}},{key:"_saveInitialAttribute",value:function(E,P){var t=E.style.getPropertyValue(P);t&&Oc.setDataAttribute(E,P,t)}},{key:"_resetElementAttributes",
value:function(E,P){this._applyManipulationCallback(E,function(t){var C=Oc.getDataAttribute(t,P);null!==C?(Oc.removeDataAttribute(t,P),t.style.setProperty(P,C)):t.style.removeProperty(P)})}},{key:"_applyManipulationCallback",value:function(E,P){var t=!0,C=!1,I=void 0;if(gb(E))P(E);else try{for(var da,ia=jb.find(E,this._element)[Symbol.iterator]();!(t=(da=ia.next()).done);t=!0)P(da.value)}catch(pa){C=!0,I=pa}finally{try{t||null==ia.return||ia.return()}finally{if(C)throw I;}}}}]),y}(),x="hide".concat(".bs.modal"),
D="hidePrevented".concat(".bs.modal"),H="hidden".concat(".bs.modal"),M="show".concat(".bs.modal"),R="shown".concat(".bs.modal"),X="resize".concat(".bs.modal"),ba="click.dismiss".concat(".bs.modal"),ra="mousedown.dismiss".concat(".bs.modal"),Ga="keydown.dismiss".concat(".bs.modal"),na="click".concat(".bs.modal",".data-api"),Ta={backdrop:!0,focus:!0,keyboard:!0},Za={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},db=function(y){function E(t,C){var I;return Ib(this,E),(I=P.call(this,
t,C))._dialog=jb.findOne(".modal-dialog",I._element),I._backdrop=I._initializeBackDrop(),I._focustrap=I._initializeFocusTrap(),I._isShown=!1,I._isTransitioning=!1,I._scrollBar=new v,I._addEventListeners(),od(I)}gc(E,y);var P=hc(E);return Jb(E,[{key:"toggle",value:function(t){return this._isShown?this.hide():this.show(t)}},{key:"show",value:function(t){var C=this;this._isShown||this._isTransitioning||Ja.trigger(this._element,M,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=
!0,this._scrollBar.hide(),document.body.classList.add("modal-open"),this._adjustDialog(),this._backdrop.show(function(){return C._showElement(t)}))}},{key:"hide",value:function(){var t=this;this._isShown&&!this._isTransitioning&&(Ja.trigger(this._element,x).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(function(){return t._hideModal()},this._element,this._isAnimated())))}},{key:"dispose",value:function(){Ja.off(window,
".bs.modal");Ja.off(this._dialog,".bs.modal");this._backdrop.dispose();this._focustrap.deactivate();hd(Sc(E.prototype),"dispose",this).call(this)}},{key:"handleUpdate",value:function(){this._adjustDialog()}},{key:"_initializeBackDrop",value:function(){return new Wg({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}},{key:"_initializeFocusTrap",value:function(){return new q({trapElement:this._element})}},{key:"_showElement",value:function(t){var C=this;document.body.contains(this._element)||
document.body.append(this._element);this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.setAttribute("aria-modal",!0);this._element.setAttribute("role","dialog");this._element.scrollTop=0;var I=jb.findOne(".modal-body",this._dialog);I&&(I.scrollTop=0);this._element.offsetHeight;this._element.classList.add("show");this._queueCallback(function(){C._config.focus&&C._focustrap.activate();C._isTransitioning=!1;Ja.trigger(C._element,R,{relatedTarget:t})},this._dialog,
this._isAnimated())}},{key:"_addEventListeners",value:function(){var t=this;Ja.on(this._element,Ga,function(C){"Escape"===C.key&&(t._config.keyboard?t.hide():t._triggerBackdropTransition())});Ja.on(window,X,function(){t._isShown&&!t._isTransitioning&&t._adjustDialog()});Ja.on(this._element,ra,function(C){Ja.one(t._element,ba,function(I){t._element===C.target&&t._element===I.target&&("static"!==t._config.backdrop?t._config.backdrop&&t.hide():t._triggerBackdropTransition())})})}},{key:"_hideModal",
value:function(){var t=this;this._element.style.display="none";this._element.setAttribute("aria-hidden",!0);this._element.removeAttribute("aria-modal");this._element.removeAttribute("role");this._isTransitioning=!1;this._backdrop.hide(function(){document.body.classList.remove("modal-open");t._resetAdjustments();t._scrollBar.reset();Ja.trigger(t._element,H)})}},{key:"_isAnimated",value:function(){return this._element.classList.contains("fade")}},{key:"_triggerBackdropTransition",value:function(){var t=
this;if(!Ja.trigger(this._element,D).defaultPrevented){var C=this._element.scrollHeight>document.documentElement.clientHeight,I=this._element.style.overflowY;"hidden"===I||this._element.classList.contains("modal-static")||(C||(this._element.style.overflowY="hidden"),this._element.classList.add("modal-static"),this._queueCallback(function(){t._element.classList.remove("modal-static");t._queueCallback(function(){t._element.style.overflowY=I},t._dialog)},this._dialog),this._element.focus())}}},{key:"_adjustDialog",
value:function(){var t=this._element.scrollHeight>document.documentElement.clientHeight,C=this._scrollBar.getWidth(),I=0<C;if(I&&!t){var da=xc()?"paddingLeft":"paddingRight";this._element.style[da]="".concat(C,"px")}!I&&t&&(t=xc()?"paddingRight":"paddingLeft",this._element.style[t]="".concat(C,"px"))}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="";this._element.style.paddingRight=""}}],[{key:"Default",get:function(){return Ta}},{key:"DefaultType",get:function(){return Za}},
{key:"NAME",get:function(){return"modal"}},{key:"jQueryInterface",value:function(t,C){return this.each(function(){var I=E.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===I[t])throw TypeError('No method named "'.concat(t,'"'));I[t](C)}})}}]),E}(zc);Ja.on(document,na,'[data-bs-toggle="modal"]',function(y){var E=this,P=jb.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&y.preventDefault();Ja.one(P,M,function(t){t.defaultPrevented||Ja.one(P,H,function(){Cb(E)&&E.focus()})});
(y=jb.findOne(".modal.show"))&&db.getInstance(y).hide();db.getOrCreateInstance(P).toggle(this)});K(db);yc(db);var Lb="load".concat(".bs.offcanvas").concat(".data-api"),kc="show".concat(".bs.offcanvas"),Eb="shown".concat(".bs.offcanvas"),Nc="hide".concat(".bs.offcanvas"),sd="hidePrevented".concat(".bs.offcanvas"),Nb="hidden".concat(".bs.offcanvas"),Qb="click".concat(".bs.offcanvas").concat(".data-api"),Bb="keydown.dismiss".concat(".bs.offcanvas"),lc={backdrop:!0,keyboard:!0,scroll:!1},Rc={backdrop:"(boolean|string)",
keyboard:"boolean",scroll:"boolean"},Ld=function(y){function E(t,C){var I;return Ib(this,E),(I=P.call(this,t,C))._isShown=!1,I._backdrop=I._initializeBackDrop(),I._focustrap=I._initializeFocusTrap(),I._addEventListeners(),od(I)}gc(E,y);var P=hc(E);return Jb(E,[{key:"toggle",value:function(t){return this._isShown?this.hide():this.show(t)}},{key:"show",value:function(t){var C=this;this._isShown||Ja.trigger(this._element,kc,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),
this._config.scroll||(new v).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("showing"),this._queueCallback(function(){C._config.scroll&&!C._config.backdrop||C._focustrap.activate();C._element.classList.add("show");C._element.classList.remove("showing");Ja.trigger(C._element,Eb,{relatedTarget:t})},this._element,!0))}},{key:"hide",value:function(){var t=this;this._isShown&&(Ja.trigger(this._element,Nc).defaultPrevented||(this._focustrap.deactivate(),
this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(function(){t._element.classList.remove("show","hiding");t._element.removeAttribute("aria-modal");t._element.removeAttribute("role");t._config.scroll||(new v).reset();Ja.trigger(t._element,Nb)},this._element,!0)))}},{key:"dispose",value:function(){this._backdrop.dispose();this._focustrap.deactivate();hd(Sc(E.prototype),"dispose",this).call(this)}},{key:"_initializeBackDrop",value:function(){var t=
this,C=!!this._config.backdrop;return new Wg({className:"offcanvas-backdrop",isVisible:C,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:C?function(){"static"!==t._config.backdrop?t.hide():Ja.trigger(t._element,sd)}:null})}},{key:"_initializeFocusTrap",value:function(){return new q({trapElement:this._element})}},{key:"_addEventListeners",value:function(){var t=this;Ja.on(this._element,Bb,function(C){"Escape"===C.key&&(t._config.keyboard?t.hide():Ja.trigger(t._element,sd))})}}],[{key:"Default",
get:function(){return lc}},{key:"DefaultType",get:function(){return Rc}},{key:"NAME",get:function(){return"offcanvas"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var C=E.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===C[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));C[t](this)}})}}]),E}(zc);Ja.on(document,Qb,'[data-bs-toggle="offcanvas"]',function(y){var E=this,P=jb.getElementFromSelector(this);(["A","AREA"].includes(this.tagName)&&
y.preventDefault(),qc(this))||(Ja.one(P,Nb,function(){Cb(E)&&E.focus()}),(y=jb.findOne(".offcanvas.show"))&&y!==P&&Ld.getInstance(y).hide(),Ld.getOrCreateInstance(P).toggle(this))});Ja.on(window,Lb,function(){var y=!0,E=!1,P=void 0;try{for(var t,C=jb.find(".offcanvas.show")[Symbol.iterator]();!(y=(t=C.next()).done);y=!0)Ld.getOrCreateInstance(t.value).show()}catch(I){E=!0,P=I}finally{try{y||null==C.return||C.return()}finally{if(E)throw P;}}});Ja.on(window,"resize".concat(".bs.offcanvas"),function(){var y=
!0,E=!1,P=void 0;try{for(var t,C=jb.find("[aria-modal][class*=show][class*=offcanvas-]")[Symbol.iterator]();!(y=(t=C.next()).done);y=!0){var I=t.value;"fixed"!==getComputedStyle(I).position&&Ld.getOrCreateInstance(I).hide()}}catch(da){E=!0,P=da}finally{try{y||null==C.return||C.return()}finally{if(E)throw P;}}});K(Ld);yc(Ld);var Hc={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],
h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:"src srcset alt title width height".split(" "),li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},oc=new Set("background cite href itemtype longdesc poster src xlink:href".split(" ")),nd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,oe=function(y,E){var P=y.nodeName.toLowerCase();return E.includes(P)?!oc.has(P)||!!nd.test(y.nodeValue):E.filter(function(t){return t instanceof RegExp}).some(function(t){return t.test(P)})},
He={allowList:Hc,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},td={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Xc={entry:"(string|element|function|null)",selector:"(string|element)"},fd=function(y){function E(t){var C;return Ib(this,E),(C=P.call(this))._config=C._getConfig(t),od(C)}gc(E,y);var P=hc(E);return Jb(E,[{key:"getContent",value:function(){var t=
this;return Object.values(this._config.content).map(function(C){return t._resolvePossibleFunction(C)}).filter(Boolean)}},{key:"hasContent",value:function(){return 0<this.getContent().length}},{key:"changeContent",value:function(t){return this._checkContent(t),this._config.content=Le({},this._config.content,t),this}},{key:"toHtml",value:function(){var t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);var C=!0,I=!1,da=void 0;try{for(var ia,pa,va=Object.entries(this._config.content)[Symbol.iterator]();!(C=
(pa=va.next()).done);C=!0){var sa=te(pa.value,2);this._setContent(t,sa[1],sa[0])}}catch(Aa){I=!0,da=Aa}finally{try{C||null==va.return||va.return()}finally{if(I)throw da;}}t=t.children[0];C=this._resolvePossibleFunction(this._config.extraClass);return C&&(ia=t.classList).add.apply(ia,ce(C.split(" "))),t}},{key:"_typeCheckConfig",value:function(t){hd(Sc(E.prototype),"_typeCheckConfig",this).call(this,t);this._checkContent(t.content)}},{key:"_checkContent",value:function(t){var C=!0,I=!1,da=void 0;try{for(var ia,
pa=Object.entries(t)[Symbol.iterator]();!(C=(ia=pa.next()).done);C=!0){var va=te(ia.value,2),sa=va[0],Aa=va[1];hd(Sc(E.prototype),"_typeCheckConfig",this).call(this,{selector:sa,entry:Aa},Xc)}}catch(Ma){I=!0,da=Ma}finally{try{C||null==pa.return||pa.return()}finally{if(I)throw da;}}}},{key:"_setContent",value:function(t,C,I){(t=jb.findOne(I,t))&&((C=this._resolvePossibleFunction(C))?gb(C)?this._putElementInTemplate(Kc(C),t):this._config.html?t.innerHTML=this._maybeSanitize(C):t.textContent=C:t.remove())}},
{key:"_maybeSanitize",value:function(t){if(this._config.sanitize){var C=this._config.allowList;var I=this._config.sanitizeFn;if(t.length)if(I&&"function"==typeof I)C=I(t);else{t=(new window.DOMParser).parseFromString(t,"text/html");var da=(pa=[]).concat.apply(pa,ce(t.body.querySelectorAll("*")));pa=!0;I=!1;var ia=void 0;try{for(var pa,va,sa=da[Symbol.iterator]();!(pa=(va=sa.next()).done);pa=!0){var Aa=va.value,Ma=Aa.nodeName.toLowerCase();if(Object.keys(C).includes(Ma)){var Oa=(ab=[]).concat.apply(ab,
ce(Aa.attributes)),Ra=[].concat(C["*"]||[],C[Ma]||[]);da=!0;var tb=!1,ob=void 0;try{for(var ab,ub,Gb=Oa[Symbol.iterator]();!(da=(ub=Gb.next()).done);da=!0){var eb=ub.value;oe(eb,Ra)||Aa.removeAttribute(eb.nodeName)}}catch(Hb){tb=!0,ob=Hb}finally{try{da||null==Gb.return||Gb.return()}finally{if(tb)throw ob;}}}else Aa.remove()}}catch(Hb){I=!0,ia=Hb}finally{try{pa||null==sa.return||sa.return()}finally{if(I)throw ia;}}C=t.body.innerHTML}else C=t}else C=t;return C}},{key:"_resolvePossibleFunction",value:function(t){return Ec(t,
[this])}},{key:"_putElementInTemplate",value:function(t,C){if(this._config.html)return C.innerHTML="",void C.append(t);C.textContent=t.textContent}}],[{key:"Default",get:function(){return He}},{key:"DefaultType",get:function(){return td}},{key:"NAME",get:function(){return"TemplateFactory"}}]),E}(Fd),be=new Set(["sanitize","allowList","sanitizeFn"]),pe={AUTO:"auto",TOP:"top",RIGHT:xc()?"left":"right",BOTTOM:"bottom",LEFT:xc()?"right":"left"},gd={allowList:Hc,animation:!0,boundary:"clippingParents",
container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},rc={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",
html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},Ic=function(y){function E(t,C){var I;if(Ib(this,E),void 0===ef)throw TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");return(I=P.call(this,t,C))._isEnabled=!0,I._timeout=0,I._isHovered=null,I._activeTrigger={},I._popper=
null,I._templateFactory=null,I._newContent=null,I.tip=null,I._setListeners(),I._config.selector||I._fixTitle(),od(I)}gc(E,y);var P=hc(E);return Jb(E,[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}},{key:"dispose",value:function(){clearTimeout(this._timeout);
Ja.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler);this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title"));this._disposePopper();hd(Sc(E.prototype),"dispose",this).call(this)}},{key:"show",value:function(){var t=this;if("none"===this._element.style.display)throw Error("Please use show on visible elements");if(this._isWithContent()&&this._isEnabled){var C=Ja.trigger(this._element,this.constructor.eventName("show")),
I=(qb(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(!C.defaultPrevented&&I){this._disposePopper();C=this._getTipElement();this._element.setAttribute("aria-describedby",C.getAttribute("id"));I=this._config.container;var da=!0,ia=!1,pa=void 0;if(this._element.ownerDocument.documentElement.contains(this.tip)||(I.append(C),Ja.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(C),C.classList.add("show"),"ontouchstart"in
document.documentElement)try{for(var va,sa,Aa=(va=[]).concat.apply(va,ce(document.body.children))[Symbol.iterator]();!(da=(sa=Aa.next()).done);da=!0)Ja.on(sa.value,"mouseover",Ab)}catch(Ma){ia=!0,pa=Ma}finally{try{da||null==Aa.return||Aa.return()}finally{if(ia)throw pa;}}this._queueCallback(function(){Ja.trigger(t._element,t.constructor.eventName("shown"));!1===t._isHovered&&t._leave();t._isHovered=!1},this.tip,this._isAnimated())}}}},{key:"hide",value:function(){var t=this;if(this._isShown()&&!Ja.trigger(this._element,
this.constructor.eventName("hide")).defaultPrevented){var C=!0,I=!1,da=void 0;if(this._getTipElement().classList.remove("show"),"ontouchstart"in document.documentElement)try{for(var ia,pa,va=(ia=[]).concat.apply(ia,ce(document.body.children))[Symbol.iterator]();!(C=(pa=va.next()).done);C=!0)Ja.off(pa.value,"mouseover",Ab)}catch(sa){I=!0,da=sa}finally{try{C||null==va.return||va.return()}finally{if(I)throw da;}}this._activeTrigger.click=!1;this._activeTrigger.focus=!1;this._activeTrigger.hover=!1;this._isHovered=
null;this._queueCallback(function(){t._isWithActiveTrigger()||(t._isHovered||t._disposePopper(),t._element.removeAttribute("aria-describedby"),Ja.trigger(t._element,t.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}},{key:"update",value:function(){this._popper&&this._popper.update()}},{key:"_isWithContent",value:function(){return!!this._getTitle()}},{key:"_getTipElement",value:function(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),
this.tip}},{key:"_createTipElement",value:function(t){t=this._getTemplateFactory(t).toHtml();if(!t)return null;t.classList.remove("fade","show");t.classList.add("bs-".concat(this.constructor.NAME,"-auto"));var C=this.constructor.NAME;do C+=Math.floor(1E6*Math.random());while(document.getElementById(C));return t.setAttribute("id",C.toString()),this._isAnimated()&&t.classList.add("fade"),t}},{key:"setContent",value:function(t){this._newContent=t;this._isShown()&&(this._disposePopper(),this.show())}},
{key:"_getTemplateFactory",value:function(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new fd(Ai(Le({},this._config),{content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)})),this._templateFactory}},{key:"_getContentForTemplate",value:function(){return{".tooltip-inner":this._getTitle()}}},{key:"_getTitle",value:function(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}},
{key:"_initializeOnDelegatedTarget",value:function(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}},{key:"_isAnimated",value:function(){return this._config.animation||this.tip&&this.tip.classList.contains("fade")}},{key:"_isShown",value:function(){return this.tip&&this.tip.classList.contains("show")}},{key:"_createPopper",value:function(t){var C=pe[Ec(this._config.placement,[this,t,this._element]).toUpperCase()];return Tg(this._element,t,this._getPopperConfig(C))}},
{key:"_getOffset",value:function(){var t=this,C=this._config.offset;return"string"==typeof C?C.split(",").map(function(I){return Number.parseInt(I,10)}):"function"==typeof C?function(I){return C(I,t._element)}:C}},{key:"_resolvePossibleFunction",value:function(t){return Ec(t,[this._element])}},{key:"_getPopperConfig",value:function(t){var C=this;t={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",
options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:function(I){C._getTipElement().setAttribute("data-popper-placement",I.state.placement)}}]};return Le({},t,Ec(this._config.popperConfig,[t]))}},{key:"_setListeners",value:function(){var t=this,C=this._config.trigger.split(" "),I=!0,da=!1,ia=void 0;try{for(var pa,va=C[Symbol.iterator]();!(I=(pa=va.next()).done);I=!0){var sa=pa.value;
if("click"===sa)Ja.on(this._element,this.constructor.eventName("click"),this._config.selector,function(Oa){t._initializeOnDelegatedTarget(Oa).toggle()});else if("manual"!==sa){var Aa="hover"===sa?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),Ma="hover"===sa?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Ja.on(this._element,Aa,this._config.selector,function(Oa){var Ra=t._initializeOnDelegatedTarget(Oa);Ra._activeTrigger["focusin"===
Oa.type?"focus":"hover"]=!0;Ra._enter()});Ja.on(this._element,Ma,this._config.selector,function(Oa){var Ra=t._initializeOnDelegatedTarget(Oa);Ra._activeTrigger["focusout"===Oa.type?"focus":"hover"]=Ra._element.contains(Oa.relatedTarget);Ra._leave()})}}}catch(Oa){da=!0,ia=Oa}finally{try{I||null==va.return||va.return()}finally{if(da)throw ia;}}this._hideModalHandler=function(){t._element&&t.hide()};Ja.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler)}},{key:"_fixTitle",value:function(){var t=
this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}},{key:"_enter",value:function(){var t=this;this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(function(){t._isHovered&&t.show()},this._config.delay.show))}},{key:"_leave",value:function(){var t=this;this._isWithActiveTrigger()||
(this._isHovered=!1,this._setTimeout(function(){t._isHovered||t.hide()},this._config.delay.hide))}},{key:"_setTimeout",value:function(t,C){clearTimeout(this._timeout);this._timeout=setTimeout(t,C)}},{key:"_isWithActiveTrigger",value:function(){return Object.values(this._activeTrigger).includes(!0)}},{key:"_getConfig",value:function(t){var C=Oc.getDataAttributes(this._element),I=!0,da=!1,ia=void 0;try{for(var pa,va=Object.keys(C)[Symbol.iterator]();!(I=(pa=va.next()).done);I=!0){var sa=pa.value;be.has(sa)&&
delete C[sa]}}catch(Aa){da=!0,ia=Aa}finally{try{I||null==va.return||va.return()}finally{if(da)throw ia;}}return t=Le({},C,"object"==typeof t&&t?t:{}),t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}},{key:"_configAfterMerge",value:function(t){return t.container=!1===t.container?document.body:Kc(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),
t}},{key:"_getDelegateConfig",value:function(){var t={},C=!0,I=!1,da=void 0;try{for(var ia,pa=Object.entries(this._config)[Symbol.iterator]();!(C=(ia=pa.next()).done);C=!0){var va=te(ia.value,2),sa=va[0],Aa=va[1];this.constructor.Default[sa]!==Aa&&(t[sa]=Aa)}}catch(Ma){I=!0,da=Ma}finally{try{C||null==pa.return||pa.return()}finally{if(I)throw da;}}return t.selector=!1,t.trigger="manual",t}},{key:"_disposePopper",value:function(){this._popper&&(this._popper.destroy(),this._popper=null);this.tip&&(this.tip.remove(),
this.tip=null)}}],[{key:"Default",get:function(){return gd}},{key:"DefaultType",get:function(){return rc}},{key:"NAME",get:function(){return"tooltip"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var C=E.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===C[t])throw TypeError('No method named "'.concat(t,'"'));C[t]()}})}}]),E}(zc);yc(Ic);var Pd=Ai(Le({},Ic.Default),{content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',
trigger:"click"}),Mc=Ai(Le({},Ic.DefaultType),{content:"(null|string|element|function)"}),md=function(y){function E(){return Ib(this,E),P.apply(this,arguments)}gc(E,y);var P=hc(E);return Jb(E,[{key:"_isWithContent",value:function(){return this._getTitle()||this._getContent()}},{key:"_getContentForTemplate",value:function(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}},{key:"_getContent",value:function(){return this._resolvePossibleFunction(this._config.content)}}],
[{key:"Default",get:function(){return Pd}},{key:"DefaultType",get:function(){return Mc}},{key:"NAME",get:function(){return"popover"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var C=E.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===C[t])throw TypeError('No method named "'.concat(t,'"'));C[t]()}})}}]),E}(Ic);yc(md);var $e="activate".concat(".bs.scrollspy"),jg="click".concat(".bs.scrollspy"),Fk="".concat(".nav-link",", .nav-item > ").concat(".nav-link",", .list-group-item"),
Qg={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ae={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},Md=function(y){function E(t,C){var I;return Ib(this,E),(I=P.call(this,t,C))._targetLinks=new Map,I._observableSections=new Map,I._rootElement="visible"===getComputedStyle(I._element).overflowY?null:I._element,I._activeTarget=null,I._observer=null,I._previousScrollData={visibleEntryTop:0,parentScrollTop:0},
I.refresh(),od(I)}gc(E,y);var P=hc(E);return Jb(E,[{key:"refresh",value:function(){this._initializeTargetsAndObservables();this._maybeEnableSmoothScroll();this._observer?this._observer.disconnect():this._observer=this._getNewObserver();var t=!0,C=!1,I=void 0;try{for(var da,ia=this._observableSections.values()[Symbol.iterator]();!(t=(da=ia.next()).done);t=!0)this._observer.observe(da.value)}catch(pa){C=!0,I=pa}finally{try{t||null==ia.return||ia.return()}finally{if(C)throw I;}}}},{key:"dispose",value:function(){this._observer.disconnect();
hd(Sc(E.prototype),"dispose",this).call(this)}},{key:"_configAfterMerge",value:function(t){return t.target=Kc(t.target)||document.body,t.rootMargin=t.offset?"".concat(t.offset,"px 0px -30%"):t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map(function(C){return Number.parseFloat(C)})),t}},{key:"_maybeEnableSmoothScroll",value:function(){var t=this;this._config.smoothScroll&&(Ja.off(this._config.target,jg),Ja.on(this._config.target,jg,"[href]",function(C){var I=t._observableSections.get(C.target.hash);
if(I){C.preventDefault();C=t._rootElement||window;I=I.offsetTop-t._element.offsetTop;if(C.scrollTo)return void C.scrollTo({top:I,behavior:"smooth"});C.scrollTop=I}}))}},{key:"_getNewObserver",value:function(){var t=this;return new IntersectionObserver(function(C){return t._observerCallback(C)},{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}},{key:"_observerCallback",value:function(t){var C=this,I=function(tb){C._previousScrollData.visibleEntryTop=tb.target.offsetTop;
C._process(C._targetLinks.get("#".concat(tb.target.id)))},da=(this._rootElement||document.documentElement).scrollTop,ia=da>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=da;var pa=!0,va=!1,sa=void 0;try{for(var Aa,Ma=t[Symbol.iterator]();!(pa=(Aa=Ma.next()).done);pa=!0){var Oa=Aa.value;if(Oa.isIntersecting){var Ra=Oa.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ia&&Ra){if(I(Oa),!da)break}else ia||Ra||I(Oa)}else this._activeTarget=null,this._clearActiveClass(C._targetLinks.get("#".concat(Oa.target.id)))}}catch(tb){va=
!0,sa=tb}finally{try{pa||null==Ma.return||Ma.return()}finally{if(va)throw sa;}}}},{key:"_initializeTargetsAndObservables",value:function(){this._targetLinks=new Map;this._observableSections=new Map;var t=jb.find("[href]",this._config.target),C=!0,I=!1,da=void 0;try{for(var ia,pa=t[Symbol.iterator]();!(C=(ia=pa.next()).done);C=!0){var va=ia.value;if(va.hash&&!qc(va)){var sa=jb.findOne(decodeURI(va.hash),this._element);Cb(sa)&&(this._targetLinks.set(decodeURI(va.hash),va),this._observableSections.set(va.hash,
sa))}}}catch(Aa){I=!0,da=Aa}finally{try{C||null==pa.return||pa.return()}finally{if(I)throw da;}}}},{key:"_process",value:function(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add("active"),this._activateParents(t),Ja.trigger(this._element,$e,{relatedTarget:t}))}},{key:"_activateParents",value:function(t){var C=!0,I=!1,da=void 0,ia=!0,pa=!1,va=void 0;if(t.classList.contains("dropdown-item"))jb.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add("active");
else try{for(var sa,Aa=jb.parents(t,".nav, .list-group")[Symbol.iterator]();!(ia=(sa=Aa.next()).done);ia=!0){var Ma=sa.value;try{for(var Oa,Ra=jb.prev(Ma,Fk)[Symbol.iterator]();!(C=(Oa=Ra.next()).done);C=!0)Oa.value.classList.add("active")}catch(tb){I=!0,da=tb}finally{try{C||null==Ra.return||Ra.return()}finally{if(I)throw da;}}}}catch(tb){pa=!0,va=tb}finally{try{ia||null==Aa.return||Aa.return()}finally{if(pa)throw va;}}}},{key:"_clearActiveClass",value:function(t){t.classList.remove("active");t=jb.find("".concat("[href]",
".").concat("active"),t);var C=!0,I=!1,da=void 0;try{for(var ia,pa=t[Symbol.iterator]();!(C=(ia=pa.next()).done);C=!0)ia.value.classList.remove("active")}catch(va){I=!0,da=va}finally{try{C||null==pa.return||pa.return()}finally{if(I)throw da;}}}}],[{key:"Default",get:function(){return Qg}},{key:"DefaultType",get:function(){return ae}},{key:"NAME",get:function(){return"scrollspy"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var C=E.getOrCreateInstance(this,t);if("string"==
typeof t){if(void 0===C[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));C[t]()}})}}]),E}(zc);Ja.on(window,"load".concat(".bs.scrollspy",".data-api"),function(){var y=!0,E=!1,P=void 0;try{for(var t,C=jb.find('[data-bs-spy="scroll"]')[Symbol.iterator]();!(y=(t=C.next()).done);y=!0)Md.getOrCreateInstance(t.value)}catch(I){E=!0,P=I}finally{try{y||null==C.return||C.return()}finally{if(E)throw P;}}});yc(Md);var Hk="hide".concat(".bs.tab"),Gk="hidden".concat(".bs.tab"),
U="show".concat(".bs.tab"),ja="shown".concat(".bs.tab"),la="click".concat(".bs.tab"),Ia="keydown".concat(".bs.tab"),Ua="load".concat(".bs.tab"),nb=":not(".concat(".dropdown-toggle",")"),fb=".nav-link".concat(nb,", .list-group-item").concat(nb,', [role="tab"]').concat(nb,", ").concat('[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]'),Mb=".".concat("active",'[data-bs-toggle="tab"], .').concat("active",'[data-bs-toggle="pill"], .').concat("active",'[data-bs-toggle="list"]'),
hb=function(y){function E(t){var C;return Ib(this,E),(C=P.call(this,t))._parent=C._element.closest('.list-group, .nav, [role="tablist"]'),C._parent&&(C._setInitialAttributes(C._parent,C._getChildren()),Ja.on(C._element,Ia,function(I){return C._keydown(I)})),od(C)}gc(E,y);var P=hc(E);return Jb(E,[{key:"show",value:function(){var t=this._element;if(!this._elemIsActive(t)){var C=this._getActiveElem(),I=C?Ja.trigger(C,Hk,{relatedTarget:t}):null;Ja.trigger(t,U,{relatedTarget:C}).defaultPrevented||I&&I.defaultPrevented||
(this._deactivate(C,t),this._activate(t,C))}}},{key:"_activate",value:function(t,C){var I=this;t&&(t.classList.add("active"),this._activate(jb.getElementFromSelector(t)),this._queueCallback(function(){"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),I._toggleDropDown(t,!0),Ja.trigger(t,ja,{relatedTarget:C})):t.classList.add("show")},t,t.classList.contains("fade")))}},{key:"_deactivate",value:function(t,C){var I=this;t&&(t.classList.remove("active"),
t.blur(),this._deactivate(jb.getElementFromSelector(t)),this._queueCallback(function(){"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),I._toggleDropDown(t,!1),Ja.trigger(t,Gk,{relatedTarget:C})):t.classList.remove("show")},t,t.classList.contains("fade")))}},{key:"_keydown",value:function(t){if("ArrowLeft ArrowRight ArrowUp ArrowDown Home End".split(" ").includes(t.key)){t.stopPropagation();t.preventDefault();var C=this._getChildren().filter(function(da){return!qc(da)});
if(["Home","End"].includes(t.key))t=C["Home"===t.key?0:C.length-1];else{var I=["ArrowRight","ArrowDown"].includes(t.key);t=$a(C,t.target,I,!0)}t&&(t.focus({preventScroll:!0}),E.getOrCreateInstance(t).show())}}},{key:"_getChildren",value:function(){return jb.find(fb,this._parent)}},{key:"_getActiveElem",value:function(){var t=this;return this._getChildren().find(function(C){return t._elemIsActive(C)})||null}},{key:"_setInitialAttributes",value:function(t,C){this._setAttributeIfNotExists(t,"role","tablist");
t=!0;var I=!1,da=void 0;try{for(var ia,pa=C[Symbol.iterator]();!(t=(ia=pa.next()).done);t=!0)this._setInitialAttributesOnChild(ia.value)}catch(va){I=!0,da=va}finally{try{t||null==pa.return||pa.return()}finally{if(I)throw da;}}}},{key:"_setInitialAttributesOnChild",value:function(t){t=this._getInnerElement(t);var C=this._elemIsActive(t),I=this._getOuterElement(t);t.setAttribute("aria-selected",C);I!==t&&this._setAttributeIfNotExists(I,"role","presentation");C||t.setAttribute("tabindex","-1");this._setAttributeIfNotExists(t,
"role","tab");this._setInitialAttributesOnTargetPanel(t)}},{key:"_setInitialAttributesOnTargetPanel",value:function(t){var C=jb.getElementFromSelector(t);C&&(this._setAttributeIfNotExists(C,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(C,"aria-labelledby","".concat(t.id)))}},{key:"_toggleDropDown",value:function(t,C){var I=this._getOuterElement(t);I.classList.contains("dropdown")&&(t=function(da,ia){(da=jb.findOne(da,I))&&da.classList.toggle(ia,C)},t(".dropdown-toggle","active"),t(".dropdown-menu",
"show"),I.setAttribute("aria-expanded",C))}},{key:"_setAttributeIfNotExists",value:function(t,C,I){t.hasAttribute(C)||t.setAttribute(C,I)}},{key:"_elemIsActive",value:function(t){return t.classList.contains("active")}},{key:"_getInnerElement",value:function(t){return t.matches(fb)?t:jb.findOne(fb,t)}},{key:"_getOuterElement",value:function(t){return t.closest(".nav-item, .list-group-item")||t}}],[{key:"NAME",get:function(){return"tab"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var C=
E.getOrCreateInstance(this);if("string"==typeof t){if(void 0===C[t]||t.startsWith("_")||"constructor"===t)throw TypeError('No method named "'.concat(t,'"'));C[t]()}})}}]),E}(zc);Ja.on(document,la,'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(y){["A","AREA"].includes(this.tagName)&&y.preventDefault();qc(this)||hb.getOrCreateInstance(this).show()});Ja.on(window,Ua,function(){var y=!0,E=!1,P=void 0;try{for(var t,C=jb.find(Mb)[Symbol.iterator]();!(y=(t=C.next()).done);y=
!0)hb.getOrCreateInstance(t.value)}catch(I){E=!0,P=I}finally{try{y||null==C.return||C.return()}finally{if(E)throw P;}}});yc(hb);var Yb="mouseover".concat(".bs.toast"),Ub="mouseout".concat(".bs.toast"),Wc="focusin".concat(".bs.toast"),$b="focusout".concat(".bs.toast"),jc="hide".concat(".bs.toast"),Jc="hidden".concat(".bs.toast"),Dd="show".concat(".bs.toast"),Yc="shown".concat(".bs.toast"),Vb={animation:"boolean",autohide:"boolean",delay:"number"},Nd={animation:!0,autohide:!0,delay:5E3},Od=function(y){function E(t,
C){var I;return Ib(this,E),(I=P.call(this,t,C))._timeout=null,I._hasMouseInteraction=!1,I._hasKeyboardInteraction=!1,I._setListeners(),od(I)}gc(E,y);var P=hc(E);return Jb(E,[{key:"show",value:function(){var t=this;Ja.trigger(this._element,Dd).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.offsetHeight,this._element.classList.add("show","showing"),this._queueCallback(function(){t._element.classList.remove("showing");
Ja.trigger(t._element,Yc);t._maybeScheduleHide()},this._element,this._config.animation))}},{key:"hide",value:function(){var t=this;this.isShown()&&(Ja.trigger(this._element,jc).defaultPrevented||(this._element.classList.add("showing"),this._queueCallback(function(){t._element.classList.add("hide");t._element.classList.remove("showing","show");Ja.trigger(t._element,Jc)},this._element,this._config.animation)))}},{key:"dispose",value:function(){this._clearTimeout();this.isShown()&&this._element.classList.remove("show");
hd(Sc(E.prototype),"dispose",this).call(this)}},{key:"isShown",value:function(){return this._element.classList.contains("show")}},{key:"_maybeScheduleHide",value:function(){var t=this;this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(function(){t.hide()},this._config.delay)))}},{key:"_onInteraction",value:function(t,C){switch(t.type){case "mouseover":case "mouseout":this._hasMouseInteraction=C;break;case "focusin":case "focusout":this._hasKeyboardInteraction=
C}if(C)return void this._clearTimeout();t=t.relatedTarget;this._element===t||this._element.contains(t)||this._maybeScheduleHide()}},{key:"_setListeners",value:function(){var t=this;Ja.on(this._element,Yb,function(C){return t._onInteraction(C,!0)});Ja.on(this._element,Ub,function(C){return t._onInteraction(C,!1)});Ja.on(this._element,Wc,function(C){return t._onInteraction(C,!0)});Ja.on(this._element,$b,function(C){return t._onInteraction(C,!1)})}},{key:"_clearTimeout",value:function(){clearTimeout(this._timeout);
this._timeout=null}}],[{key:"Default",get:function(){return Nd}},{key:"DefaultType",get:function(){return Vb}},{key:"NAME",get:function(){return"toast"}},{key:"jQueryInterface",value:function(t){return this.each(function(){var C=E.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===C[t])throw TypeError('No method named "'.concat(t,'"'));C[t](this)}})}}]),E}(zc);return K(Od),yc(Od),{Alert:S,Button:F,Carousel:qe,Collapse:Ng,Dropdown:re,Modal:db,Offcanvas:Ld,Popover:md,ScrollSpy:Md,Tab:hb,
Toast:Od,Tooltip:Ic}}();(function(){for(var a=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,f){var k=(new Date).getTime(),l=Math.max(0,16-(k-a));f=window.setTimeout(function(){b(k+l)},l);return a=k+l,f});window.cancelAnimationFrame||
(window.cancelAnimationFrame=function(b){clearTimeout(b)})})();Pa.STROKE_MODE_FREEHAND=0;Pa.STROKE_MODE_LINE=1;Pa.STROKE_MODE_BEZIER=2;Pa.TIP_ROUND_PIXEL=0;Pa.TIP_ROUND_AA=1;Pa.TIP_ROUND_AIRBRUSH=2;Pa.TIP_SQUARE_PIXEL=3;Pa.TIP_SQUARE_AA=4;Pa.BRUSH_MODE_PAINT=0;Pa.BRUSH_MODE_ERASE=1;Pa.BRUSH_MODE_DODGE=2;Pa.BRUSH_MODE_BURN=3;Pa.BRUSH_MODE_WATER=4;Pa.BRUSH_MODE_BLUR=5;Pa.BRUSH_MODE_SMUDGE=6;Pa.BRUSH_MODE_OIL=7;Pa.PAINT_MODE_OPACITY=0;Pa.PAINT_MODE_FLOW=1;Pa.DEFAULTS={isAA:!1,minSpacing:0,spacing:0,
pressureSize:!0,pressureAlpha:!1,pressureScattering:!1,alphaScale:1,tip:Pa.TIP_ROUND_PIXEL,brushMode:Pa.BRUSH_MODE_PAINT,paintMode:Pa.PAINT_MODE_OPACITY,strokeMode:Pa.STROKE_MODE_FREEHAND,resat:1,bleed:0,texture:1,size:0,curSize:0,alpha:0,curAlpha:0,scattering:0,curScattering:0,squeeze:0,curSqueeze:0,angle:Math.PI,curAngle:0,smoothing:0};Pa.prototype.applyPressure=function(a){this.pressureSize&&this.brushMode!=Pa.BRUSH_MODE_SMUDGE&&this.brushMode!=Pa.BRUSH_MODE_OIL?this.curSize=Math.max(.1,this.size*
a):this.curSize=Math.max(.1,this.size);16<this.curSize&&(this.curSize=Math.floor(this.curSize));this.curSize=Math.min(this.curSize,400);this.curAlpha=this.pressureAlpha?Math.floor(this.alpha*Math.min(a,1)):this.alpha;this.curSqueeze=this.squeeze;this.curAngle=this.angle;this.curScattering=this.scattering*this.curSize*(this.pressureScattering?a:1)};Pa.prototype.clone=function(){return new Pa(this)};Va.prototype.makeEmpty=function(){this.bottom=this.right=this.top=this.left=0};Va.prototype.union=function(a){this.isEmpty()?
this.set(a):a.isEmpty()||(this.left=Math.min(this.left,a.left),this.top=Math.min(this.top,a.top),this.right=Math.max(this.right,a.right),this.bottom=Math.max(this.bottom,a.bottom))};Va.prototype.getUnion=function(a){var c=this.clone();return c.union(a),c};Va.prototype.getIntersection=function(a){return new Va(Math.max(this.left,a.left),Math.max(this.top,a.top),Math.min(this.right,a.right),Math.min(this.bottom,a.bottom))};Va.prototype.clipTo=function(a){return this.isEmpty()||(a.isEmpty()?this.makeEmpty():
(this.left=Math.min(Math.max(this.left,a.left),a.right),this.top=Math.min(Math.max(this.top,a.top),a.bottom),this.right=Math.max(Math.min(this.right,a.right),a.left),this.bottom=Math.max(Math.min(this.bottom,a.bottom),a.top))),this};Va.prototype.containsPoint=function(a){return!(a.x<this.left||a.y<this.top||a.x>=this.right||a.y>=this.bottom)};Va.prototype.isInside=function(a){return this.left>=a.left&&this.top>=a.top&&this.right<=a.right&&this.bottom<=a.bottom};Va.prototype.clipSourceDest=function(a,
c){c.right=c.left+a.getWidth();c.bottom=c.top+a.getHeight();this.isEmpty()||c.left>=this.right||c.top>=this.bottom||c.right<=this.left||c.bottom<=this.top?(a.makeEmpty(),c.makeEmpty()):(c.right>this.right&&(a.right-=c.right-this.right,c.right=this.right),c.bottom>this.bottom&&(a.bottom-=c.bottom-this.bottom,c.bottom=this.bottom),c.left<this.left&&(a.left+=this.left-c.left,c.left=this.left),c.top<this.top&&(a.top+=this.top-c.top,c.top=this.top))};Va.prototype.getWidth=function(){return this.right-
this.left};Va.prototype.getHeight=function(){return this.bottom-this.top};Va.prototype.getArea=function(){return this.getWidth()*this.getHeight()};Va.prototype.isEmpty=function(){return this.right<=this.left||this.bottom<=this.top};Va.prototype.set=function(a){this.left=a.left;this.top=a.top;this.right=a.right;this.bottom=a.bottom};Va.prototype.clone=function(){return new Va(this.left,this.top,this.right,this.bottom)};Va.prototype.translate=function(a,c){return this.left+=a,this.right+=a,this.top+=
c,this.bottom+=c,this};Va.prototype.getTranslated=function(a,c){var d=this.clone();return d.translate(a,c),d};Va.prototype.moveTo=function(a,c){this.translate(a-this.left,c-this.top)};Va.prototype.equals=function(a){return this.left==a.left&&this.right==a.right&&this.top==a.top&&this.bottom==a.bottom};Va.prototype.grow=function(a,c){this.left-=a;this.right+=a;this.top-=c;this.bottom+=c};Va.prototype.toString=function(){return"("+this.left+","+this.top+","+this.right+","+this.bottom+")"};Va.prototype.toPoints=
function(){return[{x:this.left,y:this.top},{x:this.right,y:this.top},{x:this.right,y:this.bottom},{x:this.left,y:this.bottom}]};Va.prototype.roundNearest=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this};Va.prototype.roundContain=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this};Va.createBoundingBox=
function(a){if(0===a.length)return new Va(0,0,0,0);for(var c=new Va(a[0].x,a[0].y,a[0].x,a[0].y),d=1;d<a.length;d++)c.left=Math.min(c.left,a[d].x),c.top=Math.min(c.top,a[d].y),c.right=Math.max(c.right,a[d].x),c.bottom=Math.max(c.bottom,a[d].y);return c};Va.prototype.subtract=function(a){return Va.subtract(this,a)};Va.subtract=function(a,c){a instanceof Va&&(a=[a]);c instanceof Va&&(c=[c]);var d=a.slice(0);for(a=0;a<c.length;a++)!function(b){var f=c[b];b=d.length;for(var k=0;k<b;k++)!function(l){var h=
d[l];if(h){var e=h.getIntersection(f);if(!e.isEmpty()){var g=[];if(h.top<f.top&&g.push(new Va(h.left,h.top,h.right,e.top)),h.bottom>f.bottom&&g.push(new Va(h.left,e.bottom,h.right,h.bottom)),h.left<f.left&&g.push(new Va(h.left,e.top,e.left,e.bottom)),h.right>f.right&&g.push(new Va(e.right,e.top,h.right,e.bottom)),0<(g=g.filter(function(p){return!p.isEmpty()})).length)for(d[l]=g[0],l=1;l<g.length;l++)d.push(g[l]);else d[l]=null}}}(k)}(a);return d.filter(function(b){return null!=b})};Va.union=function(a){if(a instanceof
Va)a=[a];else{a=a.slice(0);for(var c=0;c<a.length;c++){var d=a[c],b=a.length;if(d)for(var f=c+1;f<b;f++){var k=a[f];if(k&&!d.getIntersection(k).isEmpty()){k=Va.subtract(k,d);a[f]=k[0];for(var l=1;l<k.length;l++)a.push(k[l])}}}}return a.filter(function(h){return h&&!h.isEmpty()})};"object"==typeof window&&(window.cpRectGarbage=new Va(1.5,2.5,3.5,4.5));hf.prototype.getBounds=function(){return new Va(0,0,this.width,this.height)};hf.prototype.isInside=function(a,c){return 0<=a&&0<=c&&a<this.width&&c<
this.height};J.prototype=Object.create(hf.prototype);J.prototype.constructor=J;J.BYTES_PER_PIXEL=4;J.RED_BYTE_OFFSET=0;J.GREEN_BYTE_OFFSET=1;J.BLUE_BYTE_OFFSET=2;J.ALPHA_BYTE_OFFSET=3;J.prototype.clone=function(){return this.cloneRect(this.getBounds())};J.prototype.cloneRect=function(a){var c=new J(a.getWidth(),a.getHeight());return c.copyBitmapRect(this,0,0,a),c};J.prototype.getPixel=function(a,c){a=Math.max(0,Math.min(this.width-1,a));c=Math.max(0,Math.min(this.height-1,c));a=this.offsetOfPixel(a,
c);return this.data[a+J.ALPHA_BYTE_OFFSET]<<24|this.data[a+J.RED_BYTE_OFFSET]<<16|this.data[a+J.GREEN_BYTE_OFFSET]<<8|this.data[a+J.BLUE_BYTE_OFFSET]};J.prototype.copyRectXOR=function(a,c){var d=(c=this.getBounds().clipTo(c)).getWidth(),b=new Uint8Array(d*c.getHeight()*J.BYTES_PER_PIXEL),f=0,k=this.offsetOfPixel(c.left,c.top),l=a.offsetOfPixel(c.left,c.top),h=(this.width-d)*J.BYTES_PER_PIXEL,e=(a.width-d)*J.BYTES_PER_PIXEL;d*=J.BYTES_PER_PIXEL;for(var g=c.top;g<c.bottom;g++,k+=h,l+=e)for(var p=0;p<
d;p++,f++,k++,l++)b[f]=this.data[k]^a.data[l];return b};J.prototype.setRectXOR=function(a,c){var d=(c=this.getBounds().clipTo(c)).getWidth(),b=c.getHeight();c=this.offsetOfPixel(c.left,c.top);var f=0,k=(this.width-d)*J.BYTES_PER_PIXEL;d*=J.BYTES_PER_PIXEL;for(var l=0;l<b;l++){for(var h=0;h<d;h++)this.data[c++]^=a[f++];c+=k}};J.prototype.copyBitmapRect=function(a,c,d,b){var f=new Va(c,d,0,0);b=b.clone();this.getBounds().clipSourceDest(b,f);c=0|f.getWidth();d=0|f.getHeight();if(0==f.left&&0==f.top&&
c==this.width&&d==this.height&&c==a.width&&d==a.height)this.copyPixelsFrom(a);else{f=this.offsetOfPixel(f.left,f.top);var k=(this.width-c)*J.BYTES_PER_PIXEL;b=a.offsetOfPixel(b.left,b.top);for(var l=(a.width-c)*J.BYTES_PER_PIXEL,h=0;h<d;h++,b+=l,f+=k)for(var e=0;e<c;e++,b+=J.BYTES_PER_PIXEL,f+=J.BYTES_PER_PIXEL)this.data[f]=a.data[b],this.data[f+1]=a.data[b+1],this.data[f+2]=a.data[b+2],this.data[f+3]=a.data[b+3]}};J.prototype.copyAlphaFrom=function(a,c){var d=0|(c=this.getBounds().clipTo(c)).getWidth(),
b=0|c.getHeight();c=this.offsetOfPixel(c.left,c.top)+J.ALPHA_BYTE_OFFSET|0;for(var f=(this.width-d)*J.BYTES_PER_PIXEL|0,k=0;k<b;k++,c+=f)for(var l=0;l<d;l++,c+=J.BYTES_PER_PIXEL)this.data[c]=a.data[c]};J.prototype.setToSize=function(a){(a.width!=this.width||a.height!=this.height)&&(this.width=a.width,this.height=a.height,this.imageData=Ci(this.width,this.height),this.data=this.imageData.data)};J.prototype.copyPixelsFrom=function(a){if(this.setToSize(a),"set"in this.data)this.data.set(a.data);else for(var c=
0;c<this.data.length;c++)this.data[c]=a.data[c]};J.prototype.copyPixelsFromGreyscale=function(a){var c,d=0,b=a.width*a.height;this.setToSize(a);for(c=0;c<b;c++,d+=J.BYTES_PER_PIXEL)this.data[d+J.RED_BYTE_OFFSET]=a.data[c],this.data[d+J.GREEN_BYTE_OFFSET]=a.data[c],this.data[d+J.BLUE_BYTE_OFFSET]=a.data[c],this.data[d+J.ALPHA_BYTE_OFFSET]=255};J.prototype.copyScaledNearestNeighbor=function(a){for(var c,d=0,b=a.width/this.width,f=a.height/this.height,k=0,l=0;k<this.height;k++,l+=f){c=a.offsetOfPixel(0,
Math.round(l));for(var h=0,e=0;h<this.width;h++,d+=J.BYTES_PER_PIXEL,e+=b){var g=c+Math.round(e)*J.BYTES_PER_PIXEL;this.data[d]=a.data[g];this.data[d+1]=a.data[g+1];this.data[d+2]=a.data[g+2];this.data[d+J.ALPHA_BYTE_OFFSET]=a.data[g+J.ALPHA_BYTE_OFFSET]}}};J.prototype.createThumbnailFrom=function(a){var c=Math.min(Math.floor(a.width/this.width),3);if(2>c)this.copyScaledNearestNeighbor(a);else{var d=new Uint16Array(5*this.width),b=a.width*J.BYTES_PER_PIXEL,f=Math.floor(a.width/this.width)*J.BYTES_PER_PIXEL,
k=Math.floor(a.width/this.width/c)*J.BYTES_PER_PIXEL,l=f-k*c,h=Math.floor(a.height/this.height/c);f=h*b-f*this.width;b*=Math.floor(a.height/this.height)-h*c;for(var e=h=0,g=0;g<this.height;g++,h+=b){var p;d.fill(0);for(var m=0;m<c;m++,h+=f)for(var n=p=0;n<this.width;n++,p+=5,h+=l)for(var r=0;r<c;r++,h+=k){var u=a.data[h+J.ALPHA_BYTE_OFFSET],w=u/255;d[p]+=a.data[h]*w;d[p+1]+=a.data[h+1]*w;d[p+2]+=a.data[h+2]*w;d[p+J.ALPHA_BYTE_OFFSET]+=u;d[p+4]=Math.max(d[p+4],u)}for(m=p=0;m<this.width;m++,p+=5,e+=
J.BYTES_PER_PIXEL)n=d[p+4],0==n?this.data[e+J.ALPHA_BYTE_OFFSET]=0:(r=n/d[p+J.ALPHA_BYTE_OFFSET],this.data[e]=d[p]*r,this.data[e+1]=d[p+1]*r,this.data[e+2]=d[p+2]*r,this.data[e+J.ALPHA_BYTE_OFFSET]=n)}}};J.prototype.floodFill=function(a,c,d){if(this.isInside(a,c)){var b=this.getPixel(a,c),f=b>>24&255,k=b>>16&255,l=b>>8&255,h=255&b,e=d>>24&255,g=d>>16&255,p=d>>8&255,m=255&d,n=[],r=this.getBounds(),u=this.data;if(r.left*=J.BYTES_PER_PIXEL,r.right*=J.BYTES_PER_PIXEL,n.push({x1:a*J.BYTES_PER_PIXEL,x2:a*
J.BYTES_PER_PIXEL,y:c,dy:-1}),n.push({x1:a*J.BYTES_PER_PIXEL,x2:a*J.BYTES_PER_PIXEL,y:c+1,dy:1}),0==f){if(0!=e)for(;0<n.length;)if(k=n.pop(),!(k.y<r.top||k.y>=r.bottom)){l=this.offsetOfPixel(0,k.y);for(h=k.x1;h>=r.left&&0==u[h+l+J.ALPHA_BYTE_OFFSET];)u[h+l+J.RED_BYTE_OFFSET]=g,u[h+l+J.GREEN_BYTE_OFFSET]=p,u[h+l+J.BLUE_BYTE_OFFSET]=m,u[h+l+J.ALPHA_BYTE_OFFSET]=e,h-=J.BYTES_PER_PIXEL;if(h>=k.x1){for(;h<=k.x2&&u[h+l+J.ALPHA_BYTE_OFFSET]!=f;)h+=J.BYTES_PER_PIXEL;if(a=h+J.BYTES_PER_PIXEL,h>k.x2)continue}else(h+=
J.BYTES_PER_PIXEL)<k.x1&&n.push({x1:h,x2:k.x1-J.BYTES_PER_PIXEL,y:k.y-k.dy,dy:-k.dy}),a=k.x1+J.BYTES_PER_PIXEL;do{u[h+l+J.RED_BYTE_OFFSET]=g;u[h+l+J.GREEN_BYTE_OFFSET]=p;u[h+l+J.BLUE_BYTE_OFFSET]=m;for(u[h+l+J.ALPHA_BYTE_OFFSET]=e;a<r.right&&u[a+l+J.ALPHA_BYTE_OFFSET]==f;)u[a+l+J.RED_BYTE_OFFSET]=g,u[a+l+J.GREEN_BYTE_OFFSET]=p,u[a+l+J.BLUE_BYTE_OFFSET]=m,u[a+l+J.ALPHA_BYTE_OFFSET]=e,a+=J.BYTES_PER_PIXEL;n.push({x1:h,x2:a-J.BYTES_PER_PIXEL,y:k.y+k.dy,dy:k.dy});a-J.BYTES_PER_PIXEL>k.x2&&n.push({x1:k.x2+
J.BYTES_PER_PIXEL,x2:a-J.BYTES_PER_PIXEL,y:k.y-k.dy,dy:-k.dy});for(h=a+J.BYTES_PER_PIXEL;h<=k.x2&&u[h+l+J.ALPHA_BYTE_OFFSET]!=f;)h+=J.BYTES_PER_PIXEL;a=h+J.BYTES_PER_PIXEL}while(h<=k.x2)}}else if(d!=b)for(;0<n.length;)if(a=n.pop(),!(a.y<r.top||a.y>=r.bottom)){c=this.offsetOfPixel(0,a.y);for(d=a.x1;d>=r.left&&u[d+c+J.RED_BYTE_OFFSET]==k&&u[d+c+J.GREEN_BYTE_OFFSET]==l&&u[d+c+J.BLUE_BYTE_OFFSET]==h&&u[d+c+J.ALPHA_BYTE_OFFSET]==f;)u[d+c+J.RED_BYTE_OFFSET]=g,u[d+c+J.GREEN_BYTE_OFFSET]=p,u[d+c+J.BLUE_BYTE_OFFSET]=
m,u[d+c+J.ALPHA_BYTE_OFFSET]=e,d-=J.BYTES_PER_PIXEL;if(d>=a.x1){for(;d<=a.x2&&(u[d+c+J.RED_BYTE_OFFSET]!=k||u[d+c+J.GREEN_BYTE_OFFSET]!=l||u[d+c+J.BLUE_BYTE_OFFSET]!=h||u[d+c+J.ALPHA_BYTE_OFFSET]!=f);)d+=J.BYTES_PER_PIXEL;if(b=d+J.BYTES_PER_PIXEL,d>a.x2)continue}else(d+=J.BYTES_PER_PIXEL)<a.x1&&n.push({x1:d,x2:a.x1-J.BYTES_PER_PIXEL,y:a.y-a.dy,dy:-a.dy}),b=a.x1+J.BYTES_PER_PIXEL;do{u[d+c+J.RED_BYTE_OFFSET]=g;u[d+c+J.GREEN_BYTE_OFFSET]=p;u[d+c+J.BLUE_BYTE_OFFSET]=m;for(u[d+c+J.ALPHA_BYTE_OFFSET]=e;b<
r.right&&u[b+c+J.RED_BYTE_OFFSET]==k&&u[b+c+J.GREEN_BYTE_OFFSET]==l&&u[b+c+J.BLUE_BYTE_OFFSET]==h&&u[b+c+J.ALPHA_BYTE_OFFSET]==f;)u[b+c+J.RED_BYTE_OFFSET]=g,u[b+c+J.GREEN_BYTE_OFFSET]=p,u[b+c+J.BLUE_BYTE_OFFSET]=m,u[b+c+J.ALPHA_BYTE_OFFSET]=e,b+=J.BYTES_PER_PIXEL;n.push({x1:d,x2:b-J.BYTES_PER_PIXEL,y:a.y+a.dy,dy:a.dy});b-J.BYTES_PER_PIXEL>a.x2&&n.push({x1:a.x2+J.BYTES_PER_PIXEL,x2:b-J.BYTES_PER_PIXEL,y:a.y-a.dy,dy:-a.dy});for(d=b+J.BYTES_PER_PIXEL;d<=a.x2&&(u[d+c+J.RED_BYTE_OFFSET]!=k||u[d+c+J.GREEN_BYTE_OFFSET]!=
l||u[d+c+J.BLUE_BYTE_OFFSET]!=h||u[d+c+J.ALPHA_BYTE_OFFSET]!=f);)d+=J.BYTES_PER_PIXEL;b=d+J.BYTES_PER_PIXEL}while(d<=a.x2)}}};J.prototype.copyPixelColumnToArray=function(a,c,d,b){var f=(this.width-1)*J.BYTES_PER_PIXEL,k=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++){for(var l=0;l<J.BYTES_PER_PIXEL;l++)b[k++]=this.data[a++];a+=f}};J.prototype.copyArrayToPixelColumn=function(a,c,d,b){var f=(this.width-1)*J.BYTES_PER_PIXEL,k=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++){for(var l=0;l<J.BYTES_PER_PIXEL;l++)this.data[a++]=
b[k++];a+=f}};J.prototype.boxBlur=function(a,c,d){var b=(a=this.getBounds().clipTo(a)).getWidth(),f=b*J.BYTES_PER_PIXEL,k=a.getHeight(),l=Math.max(b,k),h=new Uint8Array(l*J.BYTES_PER_PIXEL);l=new Uint8Array(l*J.BYTES_PER_PIXEL);for(var e=a.top;e<a.bottom;e++){for(var g=this.offsetOfPixel(a.left,e),p=0;p<f;p++)h[p]=this.data[g++];(function(m,n){for(var r=0,u=0;u<n;u++){for(var w=m[r+J.ALPHA_BYTE_OFFSET],z=0;3>z;z++,r++)m[r]=Math.round(m[r]*w/255);r++}})(h,b);il(h,l,b,c);g=this.offsetOfPixel(a.left,
e);for(p=0;p<f;p++)this.data[g++]=l[p]}for(c=a.left;c<a.right;c++)this.copyPixelColumnToArray(c,a.top,k,h),il(h,l,k,d),function(m,n){for(var r=0,u=0;u<n;u++){var w=m[r+J.ALPHA_BYTE_OFFSET];if(0!=w){w=255/w;for(var z=0;3>z;z++,r++)m[r]=Math.min(Math.round(m[r]*w),255);r++}else r+=J.BYTES_PER_PIXEL}}(l,k),this.copyArrayToPixelColumn(c,a.top,k,l)};J.prototype.offsetOfPixel=function(a,c){return 4*(c*this.width+a)|0};J.prototype.getMemorySize=function(){return this.data.length};J.prototype.getImageData=
function(){return this.imageData};J.prototype.setImageData=function(a){this.width=a.width;this.height=a.height;this.imageData=a;this.data=a.data};J.prototype.clearAll=function(a){if(0==a&&"fill"in this.data)this.data.fill(0);else{var c=a>>24&255,d=a>>16&255,b=a>>8&255;a&=255;for(var f=0;f<this.width*this.height*J.BYTES_PER_PIXEL;)this.data[f++]=d,this.data[f++]=b,this.data[f++]=a,this.data[f++]=c}};J.prototype.clearRect=function(a,c){a=this.getBounds().clipTo(a);var d=c>>24&255,b=c>>16&255,f=c>>8&
255;c&=255;for(var k=(this.width-a.getWidth())*J.BYTES_PER_PIXEL,l=this.offsetOfPixel(a.left,a.top),h=a.top;h<a.bottom;h++,l+=k)for(var e=a.left;e<a.right;e++)this.data[l++]=b,this.data[l++]=f,this.data[l++]=c,this.data[l++]=d};J.prototype.copyRegionHFlip=function(a,c){a=this.getBounds().clipTo(a);for(var d=a.top;d<a.bottom;d++)for(var b=this.offsetOfPixel(a.left,d),f=c.offsetOfPixel(a.right-1,d),k=a.left;k<a.right;k++,f-=2*J.BYTES_PER_PIXEL)for(var l=0;l<J.BYTES_PER_PIXEL;l++)this.data[b++]=c.data[f++]};
J.prototype.copyRegionVFlip=function(a,c){for(var d=(a=this.getBounds().clipTo(a)).getWidth()*J.BYTES_PER_PIXEL,b=a.top;b<a.bottom;b++)for(var f=this.offsetOfPixel(a.left,b),k=c.offsetOfPixel(a.left,a.bottom-1-(b-a.top)),l=0;l<d;l++)this.data[f++]=c.data[k++]};J.prototype.fillWithNoise=function(a){a=this.getBounds().clipTo(a);for(var c,d=(this.width-a.getWidth())*J.BYTES_PER_PIXEL,b=this.offsetOfPixel(a.left,a.top),f=a.top;f<a.bottom;f++,b+=d)for(var k=a.left;k<a.right;k++,b+=J.BYTES_PER_PIXEL)c=
256*Math.random()|0,this.data[b+J.RED_BYTE_OFFSET]=c,this.data[b+J.GREEN_BYTE_OFFSET]=c,this.data[b+J.BLUE_BYTE_OFFSET]=c,this.data[b+J.ALPHA_BYTE_OFFSET]=255};J.prototype.gradientHorzReplace=function(a,c,d,b){var f={r:b[0]>>16&255,g:b[0]>>8&255,b:255&b[0],a:b[0]>>24&255};b={r:b[1]>>16&255,g:b[1]>>8&255,b:255&b[1],a:b[1]>>24&255};var k=(this.width-a.getWidth())*J.BYTES_PER_PIXEL,l=0|this.offsetOfPixel(a.left,a.top),h=a.bottom-a.top|0;if(d<c){var e=d;d=c;c=e;e=f;f=b;b=e}var g=d-c|0;e=(b.r-f.r)/g;var p=
(b.g-f.g)/g,m=(b.b-f.b)/g;g=(b.a-f.a)/g;for(var n=Math.max(a.left-c,0),r=0;r<h;r++,l+=k){for(var u=a.left,w=0|Math.min(c,a.right);u<w;u++,l+=J.BYTES_PER_PIXEL)this.data[l+J.RED_BYTE_OFFSET]=f.r,this.data[l+J.GREEN_BYTE_OFFSET]=f.g,this.data[l+J.BLUE_BYTE_OFFSET]=f.b,this.data[l+J.ALPHA_BYTE_OFFSET]=f.a;var z=f.r+e*n,G=f.g+p*n,L=f.b+m*n,O=f.a+g*n;for(w=0|Math.min(d,a.right);u<w;u++,l+=J.BYTES_PER_PIXEL)this.data[l+J.RED_BYTE_OFFSET]=z,this.data[l+J.GREEN_BYTE_OFFSET]=G,this.data[l+J.BLUE_BYTE_OFFSET]=
L,this.data[l+J.ALPHA_BYTE_OFFSET]=O,z+=e,G+=p,L+=m,O+=g;for(;u<a.right;u++,l+=J.BYTES_PER_PIXEL)this.data[l+J.RED_BYTE_OFFSET]=b.r,this.data[l+J.GREEN_BYTE_OFFSET]=b.g,this.data[l+J.BLUE_BYTE_OFFSET]=b.b,this.data[l+J.ALPHA_BYTE_OFFSET]=b.a}};J.prototype.gradientVertReplace=function(a,c,d,b){var f={r:b[0]>>16&255,g:b[0]>>8&255,b:255&b[0],a:b[0]>>24&255};b={r:b[1]>>16&255,g:b[1]>>8&255,b:255&b[1],a:b[1]>>24&255};var k=(this.width-a.getWidth())*J.BYTES_PER_PIXEL,l=0|this.offsetOfPixel(a.left,a.top),
h=a.right-a.left|0;if(d<c){var e=d;d=c;c=e;e=f;f=b;b=e}e=a.top;for(var g=0|Math.min(a.bottom,c);e<g;e++,l+=k)for(var p=0;p<h;p++,l+=J.BYTES_PER_PIXEL)this.data[l+J.RED_BYTE_OFFSET]=f.r,this.data[l+J.GREEN_BYTE_OFFSET]=f.g,this.data[l+J.BLUE_BYTE_OFFSET]=f.b,this.data[l+J.ALPHA_BYTE_OFFSET]=f.a;var m=d-c|0;g=(b.r-f.r)/m;p=(b.g-f.g)/m;var n=(b.b-f.b)/m;m=(b.a-f.a)/m;var r=Math.max(e-c,0);c=f.r+g*r;var u=f.g+p*r,w=f.b+n*r;f=f.a+m*r;for(d=0|Math.min(a.bottom,d);e<d;e++,l+=k){for(r=0;r<h;r++,l+=J.BYTES_PER_PIXEL)this.data[l+
J.RED_BYTE_OFFSET]=c,this.data[l+J.GREEN_BYTE_OFFSET]=u,this.data[l+J.BLUE_BYTE_OFFSET]=w,this.data[l+J.ALPHA_BYTE_OFFSET]=f;c+=g;u+=p;w+=n;f+=m}for(;e<a.bottom;e++,l+=k)for(d=0;d<h;d++,l+=J.BYTES_PER_PIXEL)this.data[l+J.RED_BYTE_OFFSET]=b.r,this.data[l+J.GREEN_BYTE_OFFSET]=b.g,this.data[l+J.BLUE_BYTE_OFFSET]=b.b,this.data[l+J.ALPHA_BYTE_OFFSET]=b.a};J.prototype.gradientReplace=function(a,c,d,b,f,k){var l=(this.width-a.getWidth())*J.BYTES_PER_PIXEL,h=0|this.offsetOfPixel(a.left,a.top),e=a.right-a.left|
0,g=k[0]>>16&255,p=k[0]>>8&255,m=255&k[0],n=k[0]>>24&255,r=k[1]>>16&255,u=k[1]>>8&255,w=255&k[1];k=k[1]>>24&255;var z=f-d+(b-c)*(b-c)/(f-d);b=b-c+(f-d)*(f-d)/(b-c);f=1/b;for(var G=a.top;G<a.bottom;G++,h+=l)for(var L=(a.left-c)/b+(G-d)/z,O=0;O<e;O++,h+=J.BYTES_PER_PIXEL){var N=Math.min(Math.max(L,0),1),ea=1-N;this.data[h+J.RED_BYTE_OFFSET]=g*ea+r*N;this.data[h+J.GREEN_BYTE_OFFSET]=p*ea+u*N;this.data[h+J.BLUE_BYTE_OFFSET]=m*ea+w*N;this.data[h+J.ALPHA_BYTE_OFFSET]=n*ea+k*N;L+=f}};J.prototype.gradientAlpha=
function(a,c,d,b,f,k){var l=(this.width-a.getWidth())*J.BYTES_PER_PIXEL,h=0|this.offsetOfPixel(a.left,a.top),e=a.right-a.left|0,g=k[0]>>16&255,p=k[0]>>8&255,m=255&k[0],n=k[0]>>24&255,r=k[1]>>16&255,u=k[1]>>8&255,w=255&k[1];k=k[1]>>24&255;var z=f-d+(b-c)*(b-c)/(f-d);b=b-c+(f-d)*(f-d)/(b-c);f=1/b;for(var G=a.top;G<a.bottom;G++,h+=l)for(var L=(a.left-c)/b+(G-d)/z,O=0;O<e;O++,h+=J.BYTES_PER_PIXEL){var N=Math.min(Math.max(L,0),1),ea=1-N,Y=g*ea+r*N,ka=p*ea+u*N,ha=m*ea+w*N;ea=n*ea+k*N;N=this.data[h+J.ALPHA_BYTE_OFFSET];
N=ea+N-ea*N/255|0;if(0<N){ea=255*ea/N|0;var qa=255-ea;this.data[h+J.RED_BYTE_OFFSET]=(Y*ea+this.data[h+J.RED_BYTE_OFFSET]*qa)/255|0;this.data[h+J.GREEN_BYTE_OFFSET]=(ka*ea+this.data[h+J.GREEN_BYTE_OFFSET]*qa)/255|0;this.data[h+J.BLUE_BYTE_OFFSET]=(ha*ea+this.data[h+J.BLUE_BYTE_OFFSET]*qa)/255|0;this.data[h+J.ALPHA_BYTE_OFFSET]=N}L+=f}};J.prototype.gradient=function(a,c,d,b,f,k,l){a=this.getBounds().clipTo(a);(c!=b||d!=f)&&(l||255==k[0]>>>24&&255==k[1]>>>24?c==b?this.gradientVertReplace(a,d,f,k):d==
f?this.gradientHorzReplace(a,c,b,k):this.gradientReplace(a,c,d,b,f,k):this.gradientAlpha(a,c,d,b,f,k))};J.prototype.fillWithColorNoise=function(a){a=this.getBounds().clipTo(a);for(var c,d=(this.width-a.getWidth())*J.BYTES_PER_PIXEL,b=this.offsetOfPixel(a.left,a.top),f=a.top;f<a.bottom;f++,b+=d)for(var k=a.left;k<a.right;k++,b+=J.BYTES_PER_PIXEL)c=16777216*Math.random()|0,this.data[b+J.RED_BYTE_OFFSET]=c>>16&255,this.data[b+J.GREEN_BYTE_OFFSET]=c>>8&255,this.data[b+J.BLUE_BYTE_OFFSET]=255&c,this.data[b+
J.ALPHA_BYTE_OFFSET]=255};J.prototype.invert=function(a){a=this.getBounds().clipTo(a);for(var c=(this.width-a.getWidth())*J.BYTES_PER_PIXEL,d=this.offsetOfPixel(a.left,a.top),b=a.top;b<a.bottom;b++,d+=c)for(var f=a.left;f<a.right;f++,d+=J.BYTES_PER_PIXEL)this.data[d+J.RED_BYTE_OFFSET]^=255,this.data[d+J.GREEN_BYTE_OFFSET]^=255,this.data[d+J.BLUE_BYTE_OFFSET]^=255};J.prototype.getNonTransparentBounds=function(a){var c,d,b=a.clone();var f=(this.width-b.getWidth())*J.BYTES_PER_PIXEL;a=this.offsetOfPixel(b.left,
b.top)+J.ALPHA_BYTE_OFFSET;for(d=b.top;d<b.bottom;d++,a+=f){var k=0;for(c=b.left;c<b.right;c++,a+=J.BYTES_PER_PIXEL)k|=this.data[a];if(0!=k)break}if(b.top=d,b.top==b.bottom)return b;a=this.offsetOfPixel(b.right-1,b.bottom-1)+J.ALPHA_BYTE_OFFSET;for(d=b.bottom-1;d>=b.top;d--,a-=f){k=0;for(c=b.right-1;c>=b.left;c--,a-=J.BYTES_PER_PIXEL)k|=this.data[a];if(0!=k)break}b.bottom=d+1;f=J.BYTES_PER_PIXEL*this.width;for(c=b.left;c<b.right;c++){a=this.offsetOfPixel(c,b.top)+J.ALPHA_BYTE_OFFSET;k=0;for(d=b.top;d<
b.bottom;d++,a+=f)k|=this.data[a];if(0!=k)break}b.left=c;for(c=b.right-1;c>=b.left;c--){a=this.offsetOfPixel(c,b.top)+J.ALPHA_BYTE_OFFSET;k=0;for(d=b.top;d<b.bottom;d++,a+=f)k|=this.data[a];if(0!=k)break}return b.right=c+1,b};J.prototype.getAsCanvas=function(a){var c=de(this.imageData.width,this.imageData.height);return c.getContext("2d").putImageData(this.imageData,0,0),jl(c,a||0)};J.prototype.getAsPNG=function(a){var c;return!("string"!=typeof(c=this.getAsCanvas(a).toDataURL("image/png"))||!c.match(/^data:image\/png;base64,/i))&&
window.atob(c.substring(22))};J.prototype.getAsPNGBuffer=function(a){return this.getAsCanvas(a).toBuffer("image/png")};J.prototype.hasAlphaInRect=function(a){a=this.getBounds().clipTo(a);for(var c=(this.width-a.getWidth())*J.BYTES_PER_PIXEL,d=this.offsetOfPixel(a.left,a.top)+J.ALPHA_BYTE_OFFSET,b=a.top;b<a.bottom;b++,d+=c){for(var f=255,k=a.left;k<a.right;k++,d+=J.BYTES_PER_PIXEL)f&=this.data[d];if(255!=f)return!0}return!1};J.prototype.hasAlpha=function(){return this.hasAlphaInRect(this.getBounds())};
J.createFromImage=function(a){var c=de(a.width,a.height).getContext("2d");return c.globalCompositeOperation="copy",c.drawImage(a,0,0),new J(c.getImageData(0,0,a.width,a.height))};J.prototype.equals=function(a){if(this.width!=a.width||this.height!=a.height)return!1;for(var c=0;c<this.data.length;c+=J.BYTES_PER_PIXEL)if(!(0==this.data[c+J.ALPHA_BYTE_OFFSET]&&0==a.data[c+J.ALPHA_BYTE_OFFSET]||this.data[c]==a.data[c]&&this.data[c+1]==a.data[c+1]&&this.data[c+2]==a.data[c+2]&&this.data[c+3]==a.data[c+
3]))return!1;return!0};Kb.prototype=Object.create(Ob.prototype);Kb.prototype.constructor=Kb;Kb.prototype.getLinearizedLayerList=function(a,c){c=c||[];var d=!0,b=!1,f=void 0;try{for(var k,l=this.layers[Symbol.iterator]();!(d=(k=l.next()).done);d=!0){var h=k.value;h instanceof Kb&&(h.expanded||!a)&&h.getLinearizedLayerList(a,c);c.push(h)}}catch(e){b=!0,f=e}finally{try{d||null==l.return||l.return()}finally{if(b)throw f;}}return c};Kb.prototype.clearLayers=function(){this.layers=[]};Kb.prototype.addLayer=
function(a){a.parent=this;this.layers.push(a)};Kb.prototype.insertLayer=function(a,c){c.parent=this;this.layers.splice(a,0,c)};Kb.prototype.removeLayer=function(a){a=this.layers.indexOf(a);-1<a&&this.layers.splice(a,1)};Kb.prototype.removeLayerAtIndex=function(a){var c=this.layers[a];return c&&this.layers.splice(a,1),c};Kb.prototype.setLayerAtIndex=function(a,c){var d=this.layers[a];return c.parent=this,this.layers[a]=c,d};Kb.prototype.setExpanded=function(a){this.expanded=a};Kb.prototype.getExpanded=
function(){return this.expanded};Kb.prototype.indexOf=function(a){return this.layers.indexOf(a)};Kb.prototype.getMemoryUsed=function(){return this.layers.map(function(a){return a.getMemoryUsed()}).reduce(ip,0)};Kb.prototype.clone=function(){var a=new Kb(this.name,this.blendMode);return Ob.prototype.copyFrom.call(a,this),a.expanded=this.expanded,a.layers=this.layers.map(function(c){return c.clone()}),a.layers.forEach(function(c){return c.parent=a}),a};Kb.prototype.getNonTransparentBounds=function(a){var c=
new Va(0,0,0,0);return this.layers.forEach(function(d){return c.union(d.getNonTransparentBounds(a))}),c};pb.prototype=Object.create(hf.prototype);pb.prototype.constructor=pb;pb.prototype.createBitmap=function(a,c,d){switch(this.bitDepth=d,d){case 32:this.data=new Uint32Array(a*c);break;case 16:this.data=new Uint16Array(a*c);break;default:this.data=new Uint8Array(a*c)}};pb.prototype.clone=function(){var a=new pb(this.width,this.height,this.bitDepth);return a.copyPixelsFrom(this),a};pb.prototype.cloneRect=
function(a){var c=new pb(a.getWidth(),a.getHeight(),this.bitDepth);return c.copyBitmapRect(this,0,0,a),c};pb.prototype.getPixel=function(a,c){return a=Math.max(0,Math.min(this.width-1,a)),c=Math.max(0,Math.min(this.height-1,c)),this.data[this.offsetOfPixel(a,c)]};pb.prototype.clearAll=function(a){this.data.fill(a)};pb.prototype.clearRect=function(a,c){if((a=this.getBounds().clipTo(a)).equals(this.getBounds()))this.clearAll(c);else for(var d=this.width,b=a.right-a.left,f=this.offsetOfPixel(a.left,
a.top),k=a.top;k<a.bottom;k++,f+=d)this.data.fill(c,f,f+b)};pb.prototype.copyScaledNearestNeighbor=function(a){for(var c,d=0,b=a.width/this.width,f=a.height/this.height,k=0,l=0;k<this.height;k++,l+=f){c=a.offsetOfPixel(0,Math.round(l));for(var h=0,e=0;h<this.width;h++,d++,e+=b)this.data[d]=a.data[c+Math.round(e)]}};pb.prototype.floodFill=function(a,c,d){if(this.isInside(a,c)){d&=255;var b=this.getPixel(a,c),f=[],k=this.getBounds(),l=this.data;if(f.push({x1:a,x2:a,y:c,dy:-1}),f.push({x1:a,x2:a,y:c+
1,dy:1}),d!=b)for(;0<f.length;)if(a=f.pop(),!(a.y<k.top||a.y>=k.bottom)){c=this.offsetOfPixel(0,a.y);for(var h=a.x1,e;h>=k.left&&l[h+c]==b;)l[h+c]=d,h--;if(h>=a.x1){for(;h<=a.x2&&l[h+c]!=b;)h++;if(e=h+1,h>a.x2)continue}else++h<a.x1&&f.push({x1:h,x2:a.x1-1,y:a.y-a.dy,dy:-a.dy}),e=a.x1+1;do{for(l[h+c]=d;e<k.right&&l[e+c]==b;)l[e+c]=d,e++;f.push({x1:h,x2:e-1,y:a.y+a.dy,dy:a.dy});e-1>a.x2&&f.push({x1:a.x2+1,x2:e-1,y:a.y-a.dy,dy:-a.dy});for(h=e+1;h<=a.x2&&l[h+c]!=b;)h++;e=h+1}while(h<=a.x2)}}};pb.prototype.createThumbnailFrom=
function(a){var c=Math.min(Math.floor(a.width/this.width),3);if(2>c)this.copyScaledNearestNeighbor(a);else{var d=new Uint16Array(this.width),b=a.width,f=Math.floor(a.width/this.width),k=Math.floor(a.width/this.width/c),l=f-k*c,h=Math.floor(a.height/this.height/c);f=h*b-f*this.width;b*=Math.floor(a.height/this.height)-h*c;for(var e=h=0,g=0;g<this.height;g++,h+=b){var p;d.fill(0);for(var m=0;m<c;m++,h+=f)for(var n=p=0;n<this.width;n++,p++,h+=l)for(var r=0;r<c;r++,h+=k)d[p]+=a.data[h];for(m=p=0;m<this.width;m++,
p++,e++)this.data[e]=d[p]/(c*c)}}};pb.prototype.mirrorHorizontally=function(){for(var a=this.width,c=this.height,d=new Uint8Array(a*c),b=0,f=a,k=0;k<c;k++,f+=a+a)for(var l=0;l<a;l++)d[b++]=this.data[--f];this.data=d};pb.prototype.applyLUT=function(a){for(var c=0;c<this.data.length;c++)this.data[c]=a.table[this.data[c]]};pb.prototype.getAsCanvas=function(a){var c=this.getImageData(0,0,this.width,this.height),d=de(this.width,this.height);return d.getContext("2d").putImageData(c,0,0),jl(d,a||0)};pb.prototype.getImageData=
function(a,c,d,b){var f=Ci(d,b);a=this.offsetOfPixel(a,c);c=0;for(var k=this.width-d,l=0;l<b;l++,a+=k)for(var h=0;h<d;h++,a++)f.data[c++]=this.data[a],f.data[c++]=this.data[a],f.data[c++]=this.data[a],f.data[c++]=255;return f};pb.prototype.pasteImageData=function(a,c,d){var b=0;c=this.offsetOfPixel(c,d);d=this.width-a.width;for(var f=0;f<a.height;f++,c+=d)for(var k=0;k<a.width;k++,b+=4,c++)this.data[c]=a.data[b];return a};pb.prototype.copyPixelsFrom=function(a){a.width!=this.width||a.height!=this.height||
a.bitDepth!=this.bitDepth?(this.data=a.data.slice(0),this.width=a.width,this.height=a.height,this.bitDepth=a.bitDepth):this.data.set(a.data)};pb.prototype.copyRectXOR=function(a,c){for(var d=(c=this.getBounds().clipTo(c)).getWidth(),b=new Uint8Array(d*c.getHeight()),f=0,k=this.offsetOfPixel(c.left,c.top),l=a.offsetOfPixel(c.left,c.top),h=this.width-d,e=a.width-d,g=c.top;g<c.bottom;g++,k+=h,l+=e)for(var p=0;p<d;p++,f++,k++,l++)b[f]=this.data[k]^a.data[l];return b};pb.prototype.setRectXOR=function(a,
c){var d=(c=this.getBounds().clipTo(c)).getWidth(),b=c.getHeight();c=this.offsetOfPixel(c.left,c.top);for(var f=0,k=this.width-d,l=0;l<b;l++){for(var h=0;h<d;h++)this.data[c++]^=a[f++];c+=k}};pb.prototype.copyBitmapRect=function(a,c,d,b){var f=new Va(c,d,0,0);b=b.clone();this.getBounds().clipSourceDest(b,f);c=0|f.getWidth();d=0|f.getHeight();if(0==f.left&&0==f.top&&c==this.width&&d==this.height&&c==a.width&&d==a.height)this.copyPixelsFrom(a);else{f=this.offsetOfPixel(f.left,f.top);var k=this.width-
c;b=a.offsetOfPixel(b.left,b.top);for(var l=a.width-c,h=0;h<d;h++,b+=l,f+=k)for(var e=0;e<c;e++,b++,f++)this.data[f]=a.data[b]}};pb.prototype.copyRegionHFlip=function(a,c){a=this.getBounds().clipTo(a);for(var d=a.top;d<a.bottom;d++)for(var b=this.offsetOfPixel(a.left,d),f=c.offsetOfPixel(a.right-1,d),k=a.left;k<a.right;k++,f-=2)this.data[b++]=c.data[f++]};pb.prototype.copyRegionVFlip=function(a,c){for(var d=(a=this.getBounds().clipTo(a)).getWidth(),b=a.top;b<a.bottom;b++)for(var f=this.offsetOfPixel(a.left,
b),k=c.offsetOfPixel(a.left,a.bottom-1-(b-a.top)),l=0;l<d;l++)this.data[f++]=c.data[k++]};pb.prototype.copyPixelColumnToArray=function(a,c,d,b){var f=this.width,k=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++)b[k]=this.data[a],a+=f,k++};pb.prototype.copyArrayToPixelColumn=function(a,c,d,b){var f=this.width,k=0;a=this.offsetOfPixel(a,c);for(c=0;c<d;c++)this.data[a]=b[k],a+=f,k++};pb.prototype.boxBlur=function(a,c,d){var b=(a=this.getBounds().clipTo(a)).getWidth(),f=a.getHeight(),k=Math.max(b,f),l=new this.data.constructor(k);
k=new this.data.constructor(k);for(var h=a.top;h<a.bottom;h++){for(var e=this.offsetOfPixel(a.left,h),g=0;g<b;g++)l[g]=this.data[e++];kl(l,k,b,c);e=this.offsetOfPixel(a.left,h);for(g=0;g<b;g++)this.data[e++]=k[g]}for(c=a.left;c<a.right;c++)this.copyPixelColumnToArray(c,a.top,f,l),kl(l,k,f,d),this.copyArrayToPixelColumn(c,a.top,f,k)};pb.prototype.offsetOfPixel=function(a,c){return c*this.width+a};pb.prototype.fillWithNoise=function(a){a=this.getBounds().clipTo(a);for(var c=this.width-a.getWidth(),
d=this.offsetOfPixel(a.left,a.top),b=a.top;b<a.bottom;b++,d+=c)for(var f=a.left;f<a.right;f++,d++)this.data[d]=256*Math.random()|0};pb.prototype.invert=function(a){a=this.getBounds().clipTo(a);for(var c=this.width-a.getWidth(),d=this.offsetOfPixel(a.left,a.top),b=a.top;b<a.bottom;b++,d+=c)for(var f=a.left;f<a.right;f++,d++)this.data[d]=~this.data[d]};pb.prototype.getValueBounds=function(a,c){var d,b,f=a.clone();var k=this.width-f.getWidth();a=this.offsetOfPixel(f.left,f.top);for(b=f.top;b<f.bottom;b++,
a+=k){var l=!1;for(d=f.left;d<f.right;d++,a++)if(this.data[a]!=c){l=!0;break}if(l)break}if(f.top=b,f.top==f.bottom)return f;a=this.offsetOfPixel(f.right-1,f.bottom-1);for(b=f.bottom-1;b>=f.top;b--,a-=k){l=!1;for(d=f.right-1;d>=f.left;d--,a--)if(this.data[a]!=c){l=!0;break}if(l)break}f.bottom=b+1;k=this.width;for(d=f.left;d<f.right;d++){a=this.offsetOfPixel(d,f.top);l=!1;for(b=f.top;b<f.bottom;b++,a+=k)if(this.data[a]!=c){l=!0;break}if(l)break}f.left=d;for(d=f.right-1;d>=f.left;d--){a=this.offsetOfPixel(d,
f.top);l=!1;for(b=f.top;b<f.bottom;b++,a+=k)if(this.data[a]!=c){l=!0;break}if(l)break}return f.right=d+1,f};pb.prototype.gradientHorzReplace=function(a,c,d,b){var f=255&b[0];b=255&b[1];var k=this.width-a.getWidth(),l=0|this.offsetOfPixel(a.left,a.top),h=a.bottom-a.top|0;if(d<c){var e=d;d=c;c=e;e=f;f=b;b=e}e=(b-f)/(d-c|0);for(var g=Math.max(a.left-c,0),p=0;p<h;p++,l+=k){for(var m=a.left,n=0|Math.min(c,a.right);m<n;m++,l++)this.data[l]=f;var r=f+e*g;for(n=0|Math.min(d,a.right);m<n;m++,l++)this.data[l]=
r,r+=e;for(;m<a.right;m++,l++)this.data[l]=b}};pb.prototype.gradientVertReplace=function(a,c,d,b){var f=255&b[0];b=255&b[1];var k=this.width-a.getWidth(),l=0|this.offsetOfPixel(a.left,a.top),h=a.right-a.left|0;if(d<c){var e=d;d=c;c=e;e=f;f=b;b=e}e=a.top;for(var g=0|Math.min(a.bottom,c);e<g;e++,l+=k)for(var p=0;p<h;p++,l++)this.data[l]=f;g=(b-f)/(d-c|0);c=f+g*Math.max(e-c,0);for(d=0|Math.min(a.bottom,d);e<d;e++,l+=k){for(f=0;f<h;f++,l++)this.data[l]=c;c+=g}for(;e<a.bottom;e++,l+=k)for(d=0;d<h;d++,
l++)this.data[l]=b};pb.prototype.gradientReplace=function(a,c,d,b,f,k){var l=this.width-a.getWidth(),h=0|this.offsetOfPixel(a.left,a.top),e=a.right-a.left|0,g=255&k[0];k=255&k[1];var p=f-d+(b-c)*(b-c)/(f-d);b=b-c+(f-d)*(f-d)/(b-c);f=1/b;for(var m=a.top;m<a.bottom;m++,h+=l)for(var n=(a.left-c)/b+(m-d)/p,r=0;r<e;r++,h++){var u=Math.min(Math.max(n,0),1);this.data[h]=g*(1-u)+k*u;n+=f}};pb.prototype.gradientAlpha=function(a,c,d,b,f,k){var l=this.width-a.getWidth(),h=0|this.offsetOfPixel(a.left,a.top),
e=a.right-a.left|0,g=255&k[0],p=k[0]>>24&255,m=255&k[1];k=k[1]>>24&255;var n=f-d+(b-c)*(b-c)/(f-d);b=b-c+(f-d)*(f-d)/(b-c);f=1/b;for(var r=a.top;r<a.bottom;r++,h+=l)for(var u=(a.left-c)/b+(r-d)/n,w=0;w<e;w++,h++){var z=Math.min(Math.max(u,0),1),G=1-z,L=p*G+k*z;this.data[h]=((g*G+m*z)*L+this.data[h]*(255-L))/255|0;u+=f}};pb.prototype.gradient=function(a,c,d,b,f,k,l){a=this.getBounds().clipTo(a);(c!=b||d!=f)&&(l||255==k[0]>>>24&&255==k[1]>>>24?c==b?this.gradientVertReplace(a,d,f,k):d==f?this.gradientHorzReplace(a,
c,b,k):this.gradientReplace(a,c,d,b,f,k):this.gradientAlpha(a,c,d,b,f,k))};pb.prototype.equals=function(a){if(this.width!=a.width||this.height!=a.height)return!1;for(var c=0;c<this.data.length;c++)if(this.data[c]!=a.data[c])return!1;return!0};var Bc=Array(256),Cc=Array(256);W.multiplyOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;
e&&(g=a.data[b],a.data[b]=g-((255^c.data[b])*g*e/65025|0),g=a.data[b+1],a.data[b+1]=g-((255^c.data[b+1])*g*e/65025|0),g=a.data[b+2],a.data[b+2]=g-((255^c.data[b+2])*g*e/65025|0))}};W.multiplyOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;g&&(p=a.data[b],a.data[b]=p-((255^c.data[b])*p*g/65025|0),p=a.data[b+1],a.data[b+
1]=p-((255^c.data[b+1])*p*g/65025|0),p=a.data[b+2],a.data[b+2]=p-((255^c.data[b+2])*p*g/65025|0))}};W.multiplyOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(e*n+g*r+(e*g*m/255|0))/p|0;e=c.data[b+1];
g=a.data[b+1];a.data[b+1]=(e*n+g*r+(e*g*m/255|0))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(e*n+g*r+(e*g*m/255|0))/p|0;a.data[b+3]=p}}};W.multiplyOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];
a.data[b]=(g*r+p*u+(g*p*n/255|0))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(g*r+p*u+(g*p*n/255|0))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(g*r+p*u+(g*p*n/255|0))/m|0;a.data[b+3]=m}}};W.multiplyOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;
m&&(n=a.data[h],a.data[h]=n-((255^c.data[h])*n*m/65025|0),n=a.data[h+1],a.data[h+1]=n-((255^c.data[h+1])*n*m/65025|0),n=a.data[h+2],a.data[h+2]=n-((255^c.data[h+2])*n*m/65025|0))}};W.multiplyOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;n&&
(r=a.data[e],a.data[e]=r-((255^c.data[e])*r*n/65025|0),r=a.data[e+1],a.data[e+1]=r-((255^c.data[e+1])*r*n/65025|0),r=a.data[e+2],a.data[e+2]=r-((255^c.data[e+2])*r*n/65025|0))}};W.multiplyOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=
m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(m*w+n*z+(m*n*u/255|0))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(m*w+n*z+(m*n*u/255|0))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(m*w+n*z+(m*n*u/255|0))/r|0;a.data[h+3]=r}}};W.multiplyOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,
b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(n*z+r*G+(n*r*w/255|0))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(n*z+r*G+(n*r*w/255|0))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(n*z+r*G+(n*r*w/255|0))/u|0;a.data[e+3]=u}}};W.multiply2OntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=
0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;e&&(g=a.data[b],a.data[b]=g-Math.ceil((255^c.data[b])*g*e/65025),g=a.data[b+1],a.data[b+1]=g-Math.ceil((255^c.data[b+1])*g*e/65025),g=a.data[b+2],a.data[b+2]=g-Math.ceil((255^c.data[b+2])*g*e/65025))}};W.multiply2OntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);
for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;g&&(p=a.data[b],a.data[b]=p-Math.ceil((255^c.data[b])*p*g/65025),p=a.data[b+1],a.data[b+1]=p-Math.ceil((255^c.data[b+1])*p*g/65025),p=a.data[b+2],a.data[b+2]=p-Math.ceil((255^c.data[b+2])*p*g/65025))}};W.multiply2OntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=
c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(e*n+g*r+(e*g*m/255|0))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(e*n+g*r+(e*g*m/255|0))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(e*n+g*r+(e*g*m/255|0))/p|0;a.data[b+3]=p}}};W.multiply2OntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<
f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(g*r+p*u+(g*p*n/255|0))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(g*r+p*u+(g*p*n/255|0))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(g*r+p*u+(g*p*n/255|0))/m|0;a.data[b+3]=m}}};W.multiply2OntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|
0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;m&&(n=a.data[h],a.data[h]=n-Math.ceil((255^c.data[h])*n*m/65025),n=a.data[h+1],a.data[h+1]=n-Math.ceil((255^c.data[h+1])*n*m/65025),n=a.data[h+2],a.data[h+2]=n-Math.ceil((255^c.data[h+2])*n*m/65025))}};W.multiply2OntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),
h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;n&&(r=a.data[e],a.data[e]=r-Math.ceil((255^c.data[e])*r*n/65025),r=a.data[e+1],a.data[e+1]=r-Math.ceil((255^c.data[e+1])*r*n/65025),r=a.data[e+2],a.data[e+2]=r-Math.ceil((255^c.data[e+2])*r*n/65025))}};W.multiply2OntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();
var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(m*w+n*z+(m*n*u/255|0))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(m*w+n*z+(m*n*u/255|0))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(m*w+n*z+(m*n*u/
255|0))/r|0;a.data[h+3]=r}}};W.multiply2OntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(n*z+r*G+(n*r*w/255|0))/
u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(n*z+r*G+(n*r*w/255|0))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(n*z+r*G+(n*r*w/255|0))/u|0;a.data[e+3]=u}}};W.normalOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e)if(255==e)a.data[b]=c.data[b],a.data[b+1]=c.data[b+1],a.data[b+2]=c.data[b+2];else{var g=255-e;var p=c.data[b];a.data[b]=
(p*e+a.data[b]*g)/255|0;p=c.data[b+1];a.data[b+1]=(p*e+a.data[b+1]*g)/255|0;p=c.data[b+2];a.data[b+2]=(p*e+a.data[b+2]*g)/255|0}}};W.normalOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255-g;var m=c.data[b];a.data[b]=(m*g+a.data[b]*p)/255|0;m=c.data[b+1];a.data[b+1]=(m*g+a.data[b+1]*p)/255|0;m=c.data[b+2];a.data[b+
2]=(m*g+a.data[b+2]*p)/255|0}}};W.normalOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0;e=255*e/p|0;g=255-e;a.data[b]=(c.data[b]*e+a.data[b]*g)/255|0;a.data[b+1]=(c.data[b+1]*e+a.data[b+1]*g)/255|0;a.data[b+2]=(c.data[b+2]*e+a.data[b+2]*g)/255|0;a.data[b+3]=p}}};W.normalOntoTransparentFusionWithTransparentLayer=
function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0;g=255*g/m|0;p=255-g;a.data[b]=(c.data[b]*g+a.data[b]*p)/255|0;a.data[b+1]=(c.data[b+1]*g+a.data[b+1]*p)/255|0;a.data[b+2]=(c.data[b+2]*g+a.data[b+2]*p)/255|0;a.data[b+3]=m}}};W.normalOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=
0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m)if(255==m)a.data[h]=c.data[h],a.data[h+1]=c.data[h+1],a.data[h+2]=c.data[h+2];else{var n=255-m;var r=c.data[h];a.data[h]=(r*m+a.data[h]*n)/255|0;r=c.data[h+1];a.data[h+1]=(r*m+a.data[h+1]*n)/255|0;r=c.data[h+2];a.data[h+2]=(r*m+a.data[h+2]*n)/255|0}}};W.normalOntoOpaqueFusionWithTransparentLayerMasked=
function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255-n;var u=c.data[e];a.data[e]=(u*n+a.data[e]*r)/255|0;u=c.data[e+1];a.data[e+1]=(u*n+a.data[e+1]*r)/255|0;u=c.data[e+2];a.data[e+2]=(u*n+a.data[e+2]*r)/255|0}}};W.normalOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=
0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0;m=255*m/r|0;n=255-m;a.data[h]=(c.data[h]*m+a.data[h]*n)/255|0;a.data[h+1]=(c.data[h+1]*m+a.data[h+1]*n)/255|0;a.data[h+2]=(c.data[h+2]*m+a.data[h+2]*n)/255|0;a.data[h+3]=r}}};W.normalOntoTransparentFusionWithTransparentLayerMasked=
function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0;n=255*n/u|0;r=255-n;a.data[e]=(c.data[e]*n+a.data[e]*r)/255|0;a.data[e+1]=(c.data[e+1]*n+a.data[e+1]*r)/255|0;a.data[e+2]=(c.data[e+2]*n+a.data[e+2]*r)/255|0;a.data[e+3]=u}}};W.addOntoOpaqueFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];e&&(a.data[b]=a.data[b]+e*c.data[b]/255|0,a.data[b+1]=a.data[b+1]+e*c.data[b+1]/255|0,a.data[b+2]=a.data[b+2]+e*c.data[b+2]/255|0)}};W.addOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<
k;e++,b+=4){var g=c.data[b+3]*d/100|0;g&&(a.data[b]=a.data[b]+g*c.data[b]/255|0,a.data[b+1]=a.data[b+1]+g*c.data[b+1]/255|0,a.data[b+2]=a.data[b+2]+g*c.data[b+2]/255|0)}};W.addOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0;a.data[b]=(g*a.data[b]+e*c.data[b])/p|0;a.data[b+1]=(g*a.data[b+
1]+e*c.data[b+1])/p|0;a.data[b+2]=(g*a.data[b+2]+e*c.data[b+2])/p|0;a.data[b+3]=p}}};W.addOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0;a.data[b]=(p*a.data[b]+g*c.data[b])/m|0;a.data[b+1]=(p*a.data[b+1]+g*c.data[b+1])/m|0;a.data[b+2]=(p*a.data[b+2]+g*c.data[b+2])/m|
0;a.data[b+3]=m}}};W.addOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;m&&(a.data[h]=a.data[h]+m*c.data[h]/255|0,a.data[h+1]=a.data[h+1]+m*c.data[h+1]/255|0,a.data[h+2]=a.data[h+2]+m*c.data[h+2]/255|0)}};W.addOntoOpaqueFusionWithTransparentLayerMasked=function(a,
c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;n&&(a.data[e]=a.data[e]+n*c.data[e]/255|0,a.data[e+1]=a.data[e+1]+n*c.data[e+1]/255|0,a.data[e+2]=a.data[e+2]+n*c.data[e+2]/255|0)}};W.addOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|
0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0;a.data[h]=(n*a.data[h]+m*c.data[h])/r|0;a.data[h+1]=(n*a.data[h+1]+m*c.data[h+1])/r|0;a.data[h+2]=(n*a.data[h+2]+m*c.data[h+2])/r|0;a.data[h+3]=r}}};W.addOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-
l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0;a.data[e]=(r*a.data[e]+n*c.data[e])/u|0;a.data[e+1]=(r*a.data[e+1]+n*c.data[e+1])/u|0;a.data[e+2]=(r*a.data[e+2]+n*c.data[e+2])/u|0;a.data[e+3]=u}}};W.subtractOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|
0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];e&&(a.data[b]=a.data[b]+e*c.data[b]/255-e|0,a.data[b+1]=a.data[b+1]+e*c.data[b+1]/255-e|0,a.data[b+2]=a.data[b+2]+e*c.data[b+2]/255-e|0)}};W.subtractOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;g&&(a.data[b]=a.data[b]+
g*c.data[b]/255-g|0,a.data[b+1]=a.data[b+1]+g*c.data[b+1]/255-g|0,a.data[b+2]=a.data[b+2]+g*c.data[b+2]/255-g|0)}};W.subtractOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g;a.data[b]=(g*a.data[b]+e*c.data[b]-m)/p|0;a.data[b+1]=(g*a.data[b+1]+e*c.data[b+1]-m)/p|0;a.data[b+2]=
(g*a.data[b+2]+e*c.data[b+2]-m)/p|0;a.data[b+3]=p}}};W.subtractOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p;a.data[b]=(p*a.data[b]+g*c.data[b]-n)/m|0;a.data[b+1]=(p*a.data[b+1]+g*c.data[b+1]-n)/m|0;a.data[b+2]=(p*a.data[b+2]+g*c.data[b+2]-n)/m|0;a.data[b+3]=m}}};
W.subtractOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;m&&(a.data[h]=a.data[h]+m*c.data[h]/255-m|0,a.data[h+1]=a.data[h+1]+m*c.data[h+1]/255-m|0,a.data[h+2]=a.data[h+2]+m*c.data[h+2]/255-m|0)}};W.subtractOntoOpaqueFusionWithTransparentLayerMasked=function(a,
c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;n&&(a.data[e]=a.data[e]+n*c.data[e]/255-n|0,a.data[e+1]=a.data[e+1]+n*c.data[e+1]/255-n|0,a.data[e+2]=a.data[e+2]+n*c.data[e+2]/255-n|0)}};W.subtractOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*
(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n;a.data[h]=(n*a.data[h]+m*c.data[h]-u)/r|0;a.data[h+1]=(n*a.data[h+1]+m*c.data[h+1]-u)/r|0;a.data[h+2]=(n*a.data[h+2]+m*c.data[h+2]-u)/r|0;a.data[h+3]=r}}};W.subtractOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),
l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r;a.data[e]=(r*a.data[e]+n*c.data[e]-w)/u|0;a.data[e+1]=(r*a.data[e+1]+n*c.data[e+1]-w)/u|0;a.data[e+2]=(r*a.data[e+2]+n*c.data[e+2]-w)/u|0;a.data[e+3]=u}}};W.screenOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();
var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=a.data[b];a.data[b]=255^((255^p)*g+(255^c.data[b])*(255^p)*e/255)/255;p=a.data[b+1];a.data[b+1]=255^((255^p)*g+(255^c.data[b+1])*(255^p)*e/255)/255;p=a.data[b+2];a.data[b+2]=255^((255^p)*g+(255^c.data[b+2])*(255^p)*e/255)/255}}};W.screenOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*
(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=a.data[b];a.data[b]=255^((255^m)*p+(255^c.data[b])*(255^m)*g/255)/255;m=a.data[b+1];a.data[b+1]=255^((255^m)*p+(255^c.data[b+1])*(255^m)*g/255)/255;m=a.data[b+2];a.data[b+2]=255^((255^m)*p+(255^c.data[b+2])*(255^m)*g/255)/255}}};W.screenOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|
c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=255^((255^e)*n+(255^g)*r+(255^e)*(255^g)*m/255)/p;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=255^((255^e)*n+(255^g)*r+(255^e)*(255^g)*m/255)/p;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=255^((255^e)*n+(255^g)*r+(255^e)*(255^g)*m/255)/p;a.data[b+3]=p}}};W.screenOntoTransparentFusionWithTransparentLayer=
function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=255^((255^g)*r+(255^p)*u+(255^g)*(255^p)*n/255)/m;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=255^((255^g)*r+(255^p)*u+(255^g)*(255^p)*n/255)/m;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=
255^((255^g)*r+(255^p)*u+(255^g)*(255^p)*n/255)/m;a.data[b+3]=m}}};W.screenOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=a.data[h];a.data[h]=255^((255^r)*n+(255^c.data[h])*(255^r)*m/255)/255;r=a.data[h+1];a.data[h+1]=255^((255^r)*n+
(255^c.data[h+1])*(255^r)*m/255)/255;r=a.data[h+2];a.data[h+2]=255^((255^r)*n+(255^c.data[h+2])*(255^r)*m/255)/255}}};W.screenOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=a.data[e];a.data[e]=255^((255^u)*r+(255^c.data[e])*
(255^u)*n/255)/255;u=a.data[e+1];a.data[e+1]=255^((255^u)*r+(255^c.data[e+1])*(255^u)*n/255)/255;u=a.data[e+2];a.data[e+2]=255^((255^u)*r+(255^c.data[e+2])*(255^u)*n/255)/255}}};W.screenOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=
m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=255^((255^m)*w+(255^n)*z+(255^m)*(255^n)*u/255)/r;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=255^((255^m)*w+(255^n)*z+(255^m)*(255^n)*u/255)/r;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=255^((255^m)*w+(255^n)*z+(255^m)*(255^n)*u/255)/r;a.data[h+3]=r}}};W.screenOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,
b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=255^((255^n)*z+(255^r)*G+(255^n)*(255^r)*w/255)/u;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=255^((255^n)*z+(255^r)*G+(255^n)*(255^r)*w/255)/u;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=255^((255^n)*z+(255^r)*G+(255^n)*
(255^r)*w/255)/u;a.data[e+3]=u}}};W.lightenOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=m>=p?m:(m*g+p*e)/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=m>=p?m:(m*g+p*e)/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=m>=p?m:(m*g+p*e)/255|0}}};W.lightenOntoOpaqueFusionWithTransparentLayer=
function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=n>=m?n:(n*p+m*g)/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=n>=m?n:(n*p+m*g)/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=n>=m?n:(n*p+m*g)/255|0}}};W.lightenOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),
k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=g*(255^e)/p|0,n=255^m,r=e*(255^g)/p|0,u=255^r;e=c.data[b];g=a.data[b];a.data[b]=(g>=e?e*r+g*u:g*m+e*n)/255|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(g>=e?e*r+g*u:g*m+e*n)/255|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(g>=e?e*r+g*u:g*m+e*n)/255|0;a.data[b+3]=p}}};W.lightenOntoTransparentFusionWithTransparentLayer=function(a,
c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=p*(255^g)/m|0,r=255^n,u=g*(255^p)/m|0,w=255^u;g=c.data[b];p=a.data[b];a.data[b]=(p>=g?g*u+p*w:p*n+g*r)/255|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(p>=g?g*u+p*w:p*n+g*r)/255|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(p>=g?g*u+p*w:p*n+g*r)/255|0;a.data[b+3]=m}}};W.lightenOntoOpaqueFusionWithOpaqueLayerMasked=
function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=u>=r?u:(u*n+r*m)/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=u>=r?u:(u*n+r*m)/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=u>=r?u:(u*n+r*m)/255|0}}};W.lightenOntoOpaqueFusionWithTransparentLayerMasked=
function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=w>=u?w:(w*r+u*n)/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=w>=u?w:(w*r+u*n)/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=w>=u?w:(w*r+u*n)/255|0}}};W.lightenOntoTransparentFusionWithOpaqueLayerMasked=
function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=n*(255^m)/r|0,w=255^u,z=m*(255^n)/r|0,G=255^z;m=c.data[h];n=a.data[h];a.data[h]=(n>=m?m*z+n*G:n*u+m*w)/255|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(n>=m?m*z+n*G:n*u+m*w)/255|0;m=c.data[h+2];n=
a.data[h+2];a.data[h+2]=(n>=m?m*z+n*G:n*u+m*w)/255|0;a.data[h+3]=r}}};W.lightenOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=r*(255^n)/u|0,z=255^w,G=n*(255^r)/u|0,L=255^G;n=c.data[e];r=a.data[e];
a.data[e]=(r>=n?n*G+r*L:r*w+n*z)/255|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(r>=n?n*G+r*L:r*w+n*z)/255|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(r>=n?n*G+r*L:r*w+n*z)/255|0;a.data[e+3]=u}}};W.darkenOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=m>=p?(m*g+p*e)/255|0:m;p=c.data[b+
1];m=a.data[b+1];a.data[b+1]=m>=p?(m*g+p*e)/255|0:m;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=m>=p?(m*g+p*e)/255|0:m}}};W.darkenOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=n>=m?(n*p+m*g)/255|0:n;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=n>=m?(n*p+m*g)/255|0:n;m=c.data[b+
2];n=a.data[b+2];a.data[b+2]=n>=m?(n*p+m*g)/255|0:n}}};W.darkenOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*(255^g)/p|0,n=255^m,r=g*(255^e)/p|0,u=255^r;e=c.data[b];g=a.data[b];a.data[b]=(g>=e?g*r+e*u:e*m+g*n)/255|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(g>=e?g*r+e*u:e*m+g*
n)/255|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(g>=e?g*r+e*u:e*m+g*n)/255|0;a.data[b+3]=p}}};W.darkenOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*(255^p)/m|0,r=255^n,u=p*(255^g)/m|0,w=255^u;g=c.data[b];p=a.data[b];a.data[b]=(p>=g?p*u+g*w:g*n+p*r)/255|0;g=c.data[b+
1];p=a.data[b+1];a.data[b+1]=(p>=g?p*u+g*w:g*n+p*r)/255|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(p>=g?p*u+g*w:g*n+p*r)/255|0;a.data[b+3]=m}}};W.darkenOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=
u>=r?(u*n+r*m)/255|0:u;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=u>=r?(u*n+r*m)/255|0:u;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=u>=r?(u*n+r*m)/255|0:u}}};W.darkenOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];
a.data[e]=w>=u?(w*r+u*n)/255|0:w;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=w>=u?(w*r+u*n)/255|0:w;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=w>=u?(w*r+u*n)/255|0:w}}};W.darkenOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+
3])-(m*n/255|0)|0,u=m*(255^n)/r|0,w=255^u,z=n*(255^m)/r|0,G=255^z;m=c.data[h];n=a.data[h];a.data[h]=(n>=m?n*z+m*G:m*u+n*w)/255|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(n>=m?n*z+m*G:m*u+n*w)/255|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(n>=m?n*z+m*G:m*u+n*w)/255|0;a.data[h+3]=r}}};W.darkenOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=
0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*(255^r)/u|0,z=255^w,G=r*(255^n)/u|0,L=255^G;n=c.data[e];r=a.data[e];a.data[e]=(r>=n?r*G+n*L:n*w+r*z)/255|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(r>=n?r*G+n*L:n*w+r*z)/255|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(r>=n?r*G+n*L:n*w+r*z)/255|0;a.data[e+3]=u}}};W.dodgeOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),
k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=(m*g+e*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(m*g+e*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=(m*g+e*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0}}};W.dodgeOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=
0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=(n*p+g*(255==m?255:Math.min(255,255*n/(255^m)|0)))/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=(n*p+g*(255==m?255:Math.min(255,255*n/(255^m)|0)))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(n*p+g*(255==m?255:Math.min(255,255*n/(255^m)|0)))/255|0}}};W.dodgeOntoTransparentFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(e*n+g*r+m*(255==e?255:Math.min(255,255*g/(255^e)|0)))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(e*n+g*r+m*(255==e?255:Math.min(255,255*g/(255^e)|0)))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+
2]=(e*n+g*r+m*(255==e?255:Math.min(255,255*g/(255^e)|0)))/p|0;a.data[b+3]=p}}};W.dodgeOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(g*r+p*u+n*(255==g?255:Math.min(255,255*p/(255^g)|0)))/
m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(g*r+p*u+n*(255==g?255:Math.min(255,255*p/(255^g)|0)))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(g*r+p*u+n*(255==g?255:Math.min(255,255*p/(255^g)|0)))/m|0;a.data[b+3]=m}}};W.dodgeOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*
f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=(u*n+m*(255==r?255:Math.min(255,255*u/(255^r)|0)))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(u*n+m*(255==r?255:Math.min(255,255*u/(255^r)|0)))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(u*n+m*(255==r?255:Math.min(255,255*u/(255^r)|0)))/255|0}}};W.dodgeOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-
l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(w*r+n*(255==u?255:Math.min(255,255*w/(255^u)|0)))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(w*r+n*(255==u?255:Math.min(255,255*w/(255^u)|0)))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=(w*r+n*(255==u?255:Math.min(255,255*w/(255^u)|0)))/255|0}}};W.dodgeOntoTransparentFusionWithOpaqueLayerMasked=function(a,
c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(m*w+n*z+u*(255==m?255:Math.min(255,255*n/(255^m)|0)))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(m*w+n*z+u*(255==m?255:Math.min(255,
255*n/(255^m)|0)))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(m*w+n*z+u*(255==m?255:Math.min(255,255*n/(255^m)|0)))/r|0;a.data[h+3]=r}}};W.dodgeOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|
0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(n*z+r*G+w*(255==n?255:Math.min(255,255*r/(255^n)|0)))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(n*z+r*G+w*(255==n?255:Math.min(255,255*r/(255^n)|0)))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(n*z+r*G+w*(255==n?255:Math.min(255,255*r/(255^n)|0)))/u|0;a.data[e+3]=u}}};W.burnOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);
for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=(m*g+e*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(m*g+e*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=(m*g+e*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0}}};W.burnOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=(n*p+g*(0==m?0:255^Math.min(255,255*(255^n)/m)))/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=(n*p+g*(0==m?0:255^Math.min(255,255*(255^n)/m)))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(n*p+g*(0==m?0:255^Math.min(255,255*(255^n)/m)))/255|0}}};W.burnOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-
f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(e*n+g*r+m*(0==e?0:255^Math.min(255,255*(255^g)/e)))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(e*n+g*r+m*(0==e?0:255^Math.min(255,255*(255^g)/e)))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(e*n+g*r+m*(0==e?0:255^Math.min(255,255*(255^g)/e)))/p|0;a.data[b+
3]=p}}};W.burnOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(g*r+p*u+n*(0==g?0:255^Math.min(255,255*(255^p)/g)))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(g*r+p*u+n*(0==g?0:255^Math.min(255,
255*(255^p)/g)))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(g*r+p*u+n*(0==g?0:255^Math.min(255,255*(255^p)/g)))/m|0;a.data[b+3]=m}}};W.burnOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=(u*n+m*(0==
r?0:255^Math.min(255,255*(255^u)/r)))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(u*n+m*(0==r?0:255^Math.min(255,255*(255^u)/r)))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(u*n+m*(0==r?0:255^Math.min(255,255*(255^u)/r)))/255|0}}};W.burnOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=
c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(w*r+n*(0==u?0:255^Math.min(255,255*(255^w)/u)))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(w*r+n*(0==u?0:255^Math.min(255,255*(255^w)/u)))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=(w*r+n*(0==u?0:255^Math.min(255,255*(255^w)/u)))/255|0}}};W.burnOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=
f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(m*w+n*z+u*(0==m?0:255^Math.min(255,255*(255^n)/m)))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(m*w+n*z+u*(0==m?0:255^Math.min(255,255*(255^n)/m)))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(m*w+n*z+u*(0==m?0:255^Math.min(255,
255*(255^n)/m)))/r|0;a.data[h+3]=r}}};W.burnOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(n*z+r*G+w*(0==n?
0:255^Math.min(255,255*(255^r)/n)))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(n*z+r*G+w*(0==n?0:255^Math.min(255,255*(255^r)/n)))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(n*z+r*G+w*(0==n?0:255^Math.min(255,255*(255^r)/n)))/u|0;a.data[e+3]=u}}};W.overlayOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];
var m=a.data[b];a.data[b]=(g*m+(127>=m?2*e*p*m/255:e*(2*(255^p)*(255^m)/255^255)))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(g*m+(127>=m?2*e*p*m/255:e*(2*(255^p)*(255^m)/255^255)))/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=(g*m+(127>=m?2*e*p*m/255:e*(2*(255^p)*(255^m)/255^255)))/255|0}}};W.overlayOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=
4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=(p*n+(127>=n?2*g*m*n/255:g*(2*(255^m)*(255^n)/255^255)))/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=(p*n+(127>=n?2*g*m*n/255:g*(2*(255^m)*(255^n)/255^255)))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(p*n+(127>=n?2*g*m*n/255:g*(2*(255^m)*(255^n)/255^255)))/255|0}}};W.overlayOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,
b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(n*e+r*g+(127>=g?2*m*e*g/255:m*(2*(255^e)*(255^g)/255^255)))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(n*e+r*g+(127>=g?2*m*e*g/255:m*(2*(255^e)*(255^g)/255^255)))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(n*e+r*g+(127>=g?2*m*e*g/255:m*(2*(255^e)*(255^g)/255^255)))/p|0;a.data[b+3]=p}}};
W.overlayOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(r*g+u*p+(127>=p?2*n*g*p/255:n*(2*(255^g)*(255^p)/255^255)))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(r*g+u*p+(127>=p?2*n*g*p/
255:n*(2*(255^g)*(255^p)/255^255)))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(r*g+u*p+(127>=p?2*n*g*p/255:n*(2*(255^g)*(255^p)/255^255)))/m|0;a.data[b+3]=m}}};W.overlayOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=
a.data[h];a.data[h]=(n*u+(127>=u?2*m*r*u/255:m*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(n*u+(127>=u?2*m*r*u/255:m*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(n*u+(127>=u?2*m*r*u/255:m*(2*(255^r)*(255^u)/255^255)))/255|0}}};W.overlayOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);
for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(r*w+(127>=w?2*n*u*w/255:n*(2*(255^u)*(255^w)/255^255)))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(r*w+(127>=w?2*n*u*w/255:n*(2*(255^u)*(255^w)/255^255)))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=(r*w+(127>=w?2*n*u*w/255:n*(2*(255^u)*(255^w)/255^255)))/255|0}}};W.overlayOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=
0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(w*m+z*n+(127>=n?2*u*m*n/255:u*(2*(255^m)*(255^n)/255^255)))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(w*m+z*n+(127>=n?2*u*m*n/255:u*
(2*(255^m)*(255^n)/255^255)))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(w*m+z*n+(127>=n?2*u*m*n/255:u*(2*(255^m)*(255^n)/255^255)))/r|0;a.data[h+3]=r}}};W.overlayOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+
3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(z*n+G*r+(127>=r?2*w*n*r/255:w*(2*(255^n)*(255^r)/255^255)))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(z*n+G*r+(127>=r?2*w*n*r/255:w*(2*(255^n)*(255^r)/255^255)))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(z*n+G*r+(127>=r?2*w*n*r/255:w*(2*(255^n)*(255^r)/255^255)))/u|0;a.data[e+3]=u}}};W.hardLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-
f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=(g*m+(127>=p?2*e*p*m/255:e*(2*(255^p)*(255^m)/255^255)))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(g*m+(127>=p?2*e*p*m/255:e*(2*(255^p)*(255^m)/255^255)))/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=(g*m+(127>=p?2*e*p*m/255:e*(2*(255^p)*(255^m)/255^255)))/255|0}}};W.hardLightOntoOpaqueFusionWithTransparentLayer=function(a,c,
d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=(p*n+(127>=m?2*g*m*n/255:g*(2*(255^m)*(255^n)/255^255)))/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=(p*n+(127>=m?2*g*m*n/255:g*(2*(255^m)*(255^n)/255^255)))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(p*n+(127>=m?2*g*m*n/255:g*(2*(255^m)*(255^n)/255^255)))/255|0}}};
W.hardLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(n*e+r*g+(127>=e?2*m*e*g/255:m*(2*(255^e)*(255^g)/255^255)))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(n*e+r*g+(127>=e?2*m*e*g/255:m*(2*(255^
e)*(255^g)/255^255)))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(n*e+r*g+(127>=e?2*m*e*g/255:m*(2*(255^e)*(255^g)/255^255)))/p|0;a.data[b+3]=p}}};W.hardLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=
a.data[b];a.data[b]=(r*g+u*p+(127>=g?2*n*g*p/255:n*(2*(255^g)*(255^p)/255^255)))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(r*g+u*p+(127>=g?2*n*g*p/255:n*(2*(255^g)*(255^p)/255^255)))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(r*g+u*p+(127>=g?2*n*g*p/255:n*(2*(255^g)*(255^p)/255^255)))/m|0;a.data[b+3]=m}}};W.hardLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,
b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=(n*u+(127>=r?2*m*r*u/255:m*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(n*u+(127>=r?2*m*r*u/255:m*(2*(255^r)*(255^u)/255^255)))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(n*u+(127>=r?2*m*r*u/255:m*(2*(255^r)*(255^u)/255^255)))/255|0}}};W.hardLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,
b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(r*w+(127>=u?2*n*u*w/255:n*(2*(255^u)*(255^w)/255^255)))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(r*w+(127>=u?2*n*u*w/255:n*(2*(255^u)*(255^w)/255^255)))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+
2]=(r*w+(127>=u?2*n*u*w/255:n*(2*(255^u)*(255^w)/255^255)))/255|0}}};W.hardLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];
a.data[h]=(w*m+z*n+(127>=m?2*u*m*n/255:u*(2*(255^m)*(255^n)/255^255)))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(w*m+z*n+(127>=m?2*u*m*n/255:u*(2*(255^m)*(255^n)/255^255)))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(w*m+z*n+(127>=m?2*u*m*n/255:u*(2*(255^m)*(255^n)/255^255)))/r|0;a.data[h+3]=r}}};W.hardLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,
b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(z*n+G*r+(127>=n?2*w*n*r/255:w*(2*(255^n)*(255^r)/255^255)))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(z*n+G*r+(127>=n?2*w*n*r/255:w*(2*(255^n)*(255^r)/255^255)))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(z*n+G*r+(127>=n?2*w*n*r/255:w*(2*(255^n)*(255^r)/255^
255)))/u|0;a.data[e+3]=u}}};W.softLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=(g*m+e*(127>=p?((2*p-255)*Bc[m]/255|0)+m:((2*p-255)*Cc[m]/255|0)+m))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(g*m+e*(127>=p?((2*p-255)*Bc[m]/255|0)+m:((2*p-255)*Cc[m]/255|0)+m))/255|0;p=
c.data[b+2];m=a.data[b+2];a.data[b+2]=(g*m+e*(127>=p?((2*p-255)*Bc[m]/255|0)+m:((2*p-255)*Cc[m]/255|0)+m))/255|0}}};W.softLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];a.data[b]=(p*n+g*(127>=m?((2*m-255)*Bc[n]/255|0)+n:((2*m-255)*Cc[n]/255|0)+n))/255|0;m=c.data[b+1];n=
a.data[b+1];a.data[b+1]=(p*n+g*(127>=m?((2*m-255)*Bc[n]/255|0)+n:((2*m-255)*Cc[n]/255|0)+n))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(p*n+g*(127>=m?((2*m-255)*Bc[n]/255|0)+n:((2*m-255)*Cc[n]/255|0)+n))/255|0}}};W.softLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/
255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(n*e+r*g+(127>=e?m*(((2*e-255)*Bc[g]/255|0)+g):m*(((2*e-255)*Cc[g]/255|0)+g)))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(n*e+r*g+(127>=e?m*(((2*e-255)*Bc[g]/255|0)+g):m*(((2*e-255)*Cc[g]/255|0)+g)))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(n*e+r*g+(127>=e?m*(((2*e-255)*Bc[g]/255|0)+g):m*(((2*e-255)*Cc[g]/255|0)+g)))/p|0;a.data[b+3]=p}}};W.softLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|
b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(r*g+u*p+(127>=g?n*(((2*g-255)*Bc[p]/255|0)+p):n*(((2*g-255)*Cc[p]/255|0)+p)))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(r*g+u*p+(127>=g?n*(((2*g-255)*Bc[p]/255|0)+p):n*(((2*g-255)*Cc[p]/255|0)+p)))/m|0;
g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(r*g+u*p+(127>=g?n*(((2*g-255)*Bc[p]/255|0)+p):n*(((2*g-255)*Cc[p]/255|0)+p)))/m|0;a.data[b+3]=m}}};W.softLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=
(n*u+m*(127>=r?((2*r-255)*Bc[u]/255|0)+u:((2*r-255)*Cc[u]/255|0)+u))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(n*u+m*(127>=r?((2*r-255)*Bc[u]/255|0)+u:((2*r-255)*Cc[u]/255|0)+u))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(n*u+m*(127>=r?((2*r-255)*Bc[u]/255|0)+u:((2*r-255)*Cc[u]/255|0)+u))/255|0}}};W.softLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,
b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(r*w+n*(127>=u?((2*u-255)*Bc[w]/255|0)+w:((2*u-255)*Cc[w]/255|0)+w))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(r*w+n*(127>=u?((2*u-255)*Bc[w]/255|0)+w:((2*u-255)*Cc[w]/255|0)+w))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=(r*w+n*(127>=u?((2*u-255)*Bc[w]/255|0)+w:((2*u-255)*Cc[w]/255|0)+w))/255|0}}};W.softLightOntoTransparentFusionWithOpaqueLayerMasked=
function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(w*m+z*n+(127>=m?u*(((2*m-255)*Bc[n]/255|0)+n):u*(((2*m-255)*Cc[n]/255|0)+n)))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+
1]=(w*m+z*n+(127>=m?u*(((2*m-255)*Bc[n]/255|0)+n):u*(((2*m-255)*Cc[n]/255|0)+n)))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(w*m+z*n+(127>=m?u*(((2*m-255)*Bc[n]/255|0)+n):u*(((2*m-255)*Cc[n]/255|0)+n)))/r|0;a.data[h+3]=r}}};W.softLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=
c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(z*n+G*r+(127>=n?w*(((2*n-255)*Bc[r]/255|0)+r):w*(((2*n-255)*Cc[r]/255|0)+r)))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(z*n+G*r+(127>=n?w*(((2*n-255)*Bc[r]/255|0)+r):w*(((2*n-255)*Cc[r]/255|0)+r)))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(z*n+G*r+(127>=n?w*(((2*n-255)*Bc[r]/255|0)+r):w*(((2*n-255)*Cc[r]/255|0)+r)))/u|0;a.data[e+
3]=u}}};W.vividLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=(g*m+(127>=p?e*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):e*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(g*m+(127>=p?e*(0==p?0:255-Math.min(255,255*(255-m)/
(2*p)|0)):e*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=(g*m+(127>=p?e*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):e*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0}}};W.vividLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=
a.data[b];a.data[b]=(p*n+(127>=m?g*(0==m?0:255-Math.min(255,255*(255-n)/(2*m)|0)):g*(255==m?255:Math.min(255,255*n/(2*(255-m))|0))))/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=(p*n+(127>=m?g*(0==m?0:255-Math.min(255,255*(255-n)/(2*m)|0)):g*(255==m?255:Math.min(255,255*n/(2*(255-m))|0))))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(p*n+(127>=m?g*(0==m?0:255-Math.min(255,255*(255-n)/(2*m)|0)):g*(255==m?255:Math.min(255,255*n/(2*(255-m))|0))))/255|0}}};W.vividLightOntoTransparentFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(n*e+r*g+(127>=e?m*(0==e?0:255-Math.min(255,255*(255-g)/(2*e)|0)):m*(255==e?255:Math.min(255,255*g/(2*(255-e))|0))))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(n*e+r*g+(127>=e?m*(0==e?0:
255-Math.min(255,255*(255-g)/(2*e)|0)):m*(255==e?255:Math.min(255,255*g/(2*(255-e))|0))))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(n*e+r*g+(127>=e?m*(0==e?0:255-Math.min(255,255*(255-g)/(2*e)|0)):m*(255==e?255:Math.min(255,255*g/(2*(255-e))|0))))/p|0;a.data[b+3]=p}}};W.vividLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+
3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(r*g+u*p+(127>=g?n*(0==g?0:255-Math.min(255,255*(255-p)/(2*g)|0)):n*(255==g?255:Math.min(255,255*p/(2*(255-g))|0))))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(r*g+u*p+(127>=g?n*(0==g?0:255-Math.min(255,255*(255-p)/(2*g)|0)):n*(255==g?255:Math.min(255,255*p/(2*(255-g))|0))))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(r*g+u*p+(127>=g?n*(0==g?0:255-Math.min(255,
255*(255-p)/(2*g)|0)):n*(255==g?255:Math.min(255,255*p/(2*(255-g))|0))))/m|0;a.data[b+3]=m}}};W.vividLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=(n*u+(127>=r?m*(0==r?0:255-Math.min(255,255*
(255-u)/(2*r)|0)):m*(255==r?255:Math.min(255,255*u/(2*(255-r))|0))))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(n*u+(127>=r?m*(0==r?0:255-Math.min(255,255*(255-u)/(2*r)|0)):m*(255==r?255:Math.min(255,255*u/(2*(255-r))|0))))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(n*u+(127>=r?m*(0==r?0:255-Math.min(255,255*(255-u)/(2*r)|0)):m*(255==r?255:Math.min(255,255*u/(2*(255-r))|0))))/255|0}}};W.vividLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),
h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(r*w+(127>=u?n*(0==u?0:255-Math.min(255,255*(255-w)/(2*u)|0)):n*(255==u?255:Math.min(255,255*w/(2*(255-u))|0))))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(r*w+(127>=u?n*(0==u?0:255-Math.min(255,255*(255-w)/(2*u)|0)):n*(255==u?255:Math.min(255,
255*w/(2*(255-u))|0))))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=(r*w+(127>=u?n*(0==u?0:255-Math.min(255,255*(255-w)/(2*u)|0)):n*(255==u?255:Math.min(255,255*w/(2*(255-u))|0))))/255|0}}};W.vividLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=
void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(w*m+z*n+(127>=m?u*(0==m?0:255-Math.min(255,255*(255-n)/(2*m)|0)):u*(255==m?255:Math.min(255,255*n/(2*(255-m))|0))))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(w*m+z*n+(127>=m?u*(0==m?0:255-Math.min(255,255*(255-n)/(2*m)|0)):u*(255==m?255:Math.min(255,255*n/(2*(255-m))|0))))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(w*m+z*n+(127>=m?u*(0==m?0:255-Math.min(255,255*
(255-n)/(2*m)|0)):u*(255==m?255:Math.min(255,255*n/(2*(255-m))|0))))/r|0;a.data[h+3]=r}}};W.vividLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/
255|0;n=c.data[e];r=a.data[e];a.data[e]=(z*n+G*r+(127>=n?w*(0==n?0:255-Math.min(255,255*(255-r)/(2*n)|0)):w*(255==n?255:Math.min(255,255*r/(2*(255-n))|0))))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(z*n+G*r+(127>=n?w*(0==n?0:255-Math.min(255,255*(255-r)/(2*n)|0)):w*(255==n?255:Math.min(255,255*r/(2*(255-n))|0))))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(z*n+G*r+(127>=n?w*(0==n?0:255-Math.min(255,255*(255-r)/(2*n)|0)):w*(255==n?255:Math.min(255,255*r/(2*(255-n))|0))))/u|0;a.data[e+3]=u}}};W.linearLightOntoOpaqueFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=a.data[b];a.data[b]=(g*p+e*Math.min(255,Math.max(0,p+2*c.data[b]-255)))/255|0;p=a.data[b+1];a.data[b+1]=(g*p+e*Math.min(255,Math.max(0,p+2*c.data[b+1]-255)))/255|0;p=a.data[b+2];a.data[b+2]=(g*p+e*Math.min(255,Math.max(0,p+2*c.data[b+2]-255)))/255|0}}};W.linearLightOntoOpaqueFusionWithTransparentLayer=
function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=a.data[b];a.data[b]=(p*m+g*Math.min(255,Math.max(0,m+2*c.data[b]-255)))/255|0;m=a.data[b+1];a.data[b+1]=(p*m+g*Math.min(255,Math.max(0,m+2*c.data[b+1]-255)))/255|0;m=a.data[b+2];a.data[b+2]=(p*m+g*Math.min(255,Math.max(0,m+2*c.data[b+2]-255)))/255|0}}};W.linearLightOntoTransparentFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(n*e+r*g+m*Math.min(255,Math.max(0,g+2*e-255)))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(n*e+r*g+m*Math.min(255,Math.max(0,g+2*e-255)))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(n*e+
r*g+m*Math.min(255,Math.max(0,g+2*e-255)))/p|0;a.data[b+3]=p}}};W.linearLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(r*g+u*p+n*Math.min(255,Math.max(0,p+2*g-255)))/m|0;g=c.data[b+
1];p=a.data[b+1];a.data[b+1]=(r*g+u*p+n*Math.min(255,Math.max(0,p+2*g-255)))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(r*g+u*p+n*Math.min(255,Math.max(0,p+2*g-255)))/m|0;a.data[b+3]=m}}};W.linearLightOntoOpaqueFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=
255^m;var r=a.data[h];a.data[h]=(n*r+m*Math.min(255,Math.max(0,r+2*c.data[h]-255)))/255|0;r=a.data[h+1];a.data[h+1]=(n*r+m*Math.min(255,Math.max(0,r+2*c.data[h+1]-255)))/255|0;r=a.data[h+2];a.data[h+2]=(n*r+m*Math.min(255,Math.max(0,r+2*c.data[h+2]-255)))/255|0}}};W.linearLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=
h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=a.data[e];a.data[e]=(r*u+n*Math.min(255,Math.max(0,u+2*c.data[e]-255)))/255|0;u=a.data[e+1];a.data[e+1]=(r*u+n*Math.min(255,Math.max(0,u+2*c.data[e+1]-255)))/255|0;u=a.data[e+2];a.data[e+2]=(r*u+n*Math.min(255,Math.max(0,u+2*c.data[e+2]-255)))/255|0}}};W.linearLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,
b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(w*m+z*n+u*Math.min(255,Math.max(0,n+2*m-255)))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(w*m+z*n+u*Math.min(255,Math.max(0,n+2*m-255)))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(w*m+z*n+u*Math.min(255,Math.max(0,
n+2*m-255)))/r|0;a.data[h+3]=r}}};W.linearLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(z*n+G*r+w*Math.min(255,
Math.max(0,r+2*n-255)))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(z*n+G*r+w*Math.min(255,Math.max(0,r+2*n-255)))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(z*n+G*r+w*Math.min(255,Math.max(0,r+2*n-255)))/u|0;a.data[e+3]=u}}};W.pinLightOntoOpaqueFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];if(e){var g=255^e;var p=c.data[b];var m=a.data[b];a.data[b]=
(g*m+e*(m>=2*p?2*p:m<=2*p-255?2*p-255:m))/255|0;p=c.data[b+1];m=a.data[b+1];a.data[b+1]=(g*m+e*(m>=2*p?2*p:m<=2*p-255?2*p-255:m))/255|0;p=c.data[b+2];m=a.data[b+2];a.data[b+2]=(g*m+e*(m>=2*p?2*p:m<=2*p-255?2*p-255:m))/255|0}}};W.pinLightOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;if(g){var p=255^g;var m=c.data[b];var n=a.data[b];
a.data[b]=(p*n+g*(n>=2*m?2*m:n<=2*m-255?2*m-255:n))/255|0;m=c.data[b+1];n=a.data[b+1];a.data[b+1]=(p*n+g*(n>=2*m?2*m:n<=2*m-255?2*m-255:n))/255|0;m=c.data[b+2];n=a.data[b+2];a.data[b+2]=(p*n+g*(n>=2*m?2*m:n<=2*m-255?2*m-255:n))/255|0}}};W.pinLightOntoTransparentFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0;if(e){var p=e+(g=a.data[b+3])-
(e*g/255|0)|0,m=e*g/255|0,n=e*(255^g)/255|0,r=(255^e)*g/255|0;e=c.data[b];g=a.data[b];a.data[b]=(n*e+r*g+m*(g>=2*e?2*e:g<=2*e-255?2*e-255:g))/p|0;e=c.data[b+1];g=a.data[b+1];a.data[b+1]=(n*e+r*g+m*(g>=2*e?2*e:g<=2*e-255?2*e-255:g))/p|0;e=c.data[b+2];g=a.data[b+2];a.data[b+2]=(n*e+r*g+m*(g>=2*e?2*e:g<=2*e-255?2*e-255:g))/p|0;a.data[b+3]=p}}};W.pinLightOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);
for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0;if(g){var m=g+(p=a.data[b+3])-(g*p/255|0)|0,n=g*p/255|0,r=g*(255^p)/255|0,u=(255^g)*p/255|0;g=c.data[b];p=a.data[b];a.data[b]=(r*g+u*p+n*(p>=2*g?2*g:p<=2*g-255?2*g-255:p))/m|0;g=c.data[b+1];p=a.data[b+1];a.data[b+1]=(r*g+u*p+n*(p>=2*g?2*g:p<=2*g-255?2*g-255:p))/m|0;g=c.data[b+2];p=a.data[b+2];a.data[b+2]=(r*g+u*p+n*(p>=2*g?2*g:p<=2*g-255?2*g-255:p))/m|0;a.data[b+3]=m}}};W.pinLightOntoOpaqueFusionWithOpaqueLayerMasked=
function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;if(m){var n=255^m;var r=c.data[h];var u=a.data[h];a.data[h]=(n*u+m*(u>=2*r?2*r:u<=2*r-255?2*r-255:u))/255|0;r=c.data[h+1];u=a.data[h+1];a.data[h+1]=(n*u+m*(u>=2*r?2*r:u<=2*r-255?2*r-255:u))/255|0;r=c.data[h+2];u=a.data[h+2];a.data[h+2]=(n*u+m*(u>=2*
r?2*r:u<=2*r-255?2*r-255:u))/255|0}}};W.pinLightOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;if(n){var r=255^n;var u=c.data[e];var w=a.data[e];a.data[e]=(r*w+n*(w>=2*u?2*u:w<=2*u-255?2*u-255:w))/255|0;u=c.data[e+1];w=a.data[e+1];a.data[e+1]=(r*w+
n*(w>=2*u?2*u:w<=2*u-255?2*u-255:w))/255|0;u=c.data[e+2];w=a.data[e+2];a.data[e+2]=(r*w+n*(w>=2*u?2*u:w<=2*u-255?2*u-255:w))/255|0}}};W.pinLightOntoTransparentFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0,n=void 0;if(m){var r=m+(n=a.data[h+3])-(m*n/255|0)|0,u=m*n/255|
0,w=m*(255^n)/255|0,z=(255^m)*n/255|0;m=c.data[h];n=a.data[h];a.data[h]=(w*m+z*n+u*(n>=2*m?2*m:n<=2*m-255?2*m-255:n))/r|0;m=c.data[h+1];n=a.data[h+1];a.data[h+1]=(w*m+z*n+u*(n>=2*m?2*m:n<=2*m-255?2*m-255:n))/r|0;m=c.data[h+2];n=a.data[h+2];a.data[h+2]=(w*m+z*n+u*(n>=2*m?2*m:n<=2*m-255?2*m-255:n))/r|0;a.data[h+3]=r}}};W.pinLightOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;
b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0,r=void 0;if(n){var u=n+(r=a.data[e+3])-(n*r/255|0)|0,w=n*r/255|0,z=n*(255^r)/255|0,G=(255^n)*r/255|0;n=c.data[e];r=a.data[e];a.data[e]=(z*n+G*r+w*(r>=2*n?2*n:r<=2*n-255?2*n-255:r))/u|0;n=c.data[e+1];r=a.data[e+1];a.data[e+1]=(z*n+G*r+w*(r>=2*n?2*n:r<=2*n-255?2*n-255:r))/u|0;n=c.data[e+2];r=a.data[e+2];a.data[e+2]=(z*n+G*r+w*(r>=2*n?2*n:r<=2*n-255?2*n-255:r))/u|0;a.data[e+
3]=u}}};W.passthroughOntoOpaqueFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3],p=d/100,m=1-p,n=g*p+255*m;a.data[b]=(c.data[b]*g*p+255*a.data[b]*m)/n|0;a.data[b+1]=(c.data[b+1]*g*p+255*a.data[b+1]*m)/n|0;a.data[b+2]=(c.data[b+2]*g*p+255*a.data[b+2]*m)/n|0;a.data[b+3]=n}};W.passthroughOntoOpaqueFusionWithOpaqueLayer=W.passthroughOntoOpaqueFusionWithTransparentLayer;
W.passthroughOntoTransparentFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3],p=a.data[b+3],m=d/100,n=1-m,r=g*m+p*n;a.data[b]=(c.data[b]*g*m+a.data[b]*p*n)/r|0;a.data[b+1]=(c.data[b+1]*g*m+a.data[b+1]*p*n)/r|0;a.data[b+2]=(c.data[b+2]*g*m+a.data[b+2]*p*n)/r|0;a.data[b+3]=r}};W.passthroughOntoTransparentFusionWithOpaqueLayer=W.passthroughOntoTransparentFusionWithTransparentLayer;
W.passthroughOntoOpaqueFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3],r=f.data[b]*d/25500,u=1-r,w=n*r+255*u;a.data[e]=(c.data[e]*n*r+255*a.data[e]*u)/w|0;a.data[e+1]=(c.data[e+1]*n*r+255*a.data[e+1]*u)/w|0;a.data[e+2]=(c.data[e+2]*n*r+255*a.data[e+2]*u)/w|0;a.data[e+3]=w}};W.passthroughOntoOpaqueFusionWithOpaqueLayerMasked=
W.passthroughOntoOpaqueFusionWithTransparentLayerMasked;W.passthroughOntoTransparentFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=0;m<l;m++,e+=4,b++){var n=c.data[e+3],r=a.data[e+3],u=f.data[b]*d/25500,w=1-u,z=n*u+r*w;a.data[e]=(c.data[e]*n*u+a.data[e]*r*w)/z|0;a.data[e+1]=(c.data[e+1]*n*u+a.data[e+1]*r*w)/z|0;a.data[e+
2]=(c.data[e+2]*n*u+a.data[e+2]*r*w)/z|0;a.data[e+3]=z}};W.passthroughOntoTransparentFusionWithOpaqueLayerMasked=W.passthroughOntoTransparentFusionWithTransparentLayerMasked;W.replaceOntoFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0;a.data[b]=c.data[b];a.data[b+1]=c.data[b+1];a.data[b+2]=c.data[b+2];a.data[b+3]=g}};W.replaceOntoFusionWithOpaqueLayer=
function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3];a.data[b]=c.data[b];a.data[b+1]=c.data[b+1];a.data[b+2]=c.data[b+2];a.data[b+3]=e}};W.replaceOntoFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=
0;m<l;m++,e+=4,b++){var n=c.data[e+3]*f.data[b]*d/25500|0;a.data[e]=c.data[e];a.data[e+1]=c.data[e+1];a.data[e+2]=c.data[e+2];a.data[e+3]=n}};W.replaceOntoFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++){var m=c.data[h+3]*f.data[b]/255|0;a.data[h]=c.data[h];a.data[h+1]=c.data[h+1];a.data[h+2]=c.data[h+
2];a.data[h+3]=m}};W.replaceAlphaOntoFusionWithTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4)a.data[b+3]=c.data[b+3]*d/100|0};W.replaceAlphaOntoFusionWithTransparentLayerMasked=function(a,c,d,b,f){var k=0|b.getHeight(),l=0|b.getWidth(),h=4*(c.width-l)|0,e=0|c.offsetOfPixel(b.left,b.top),g=f.width-l|0;b=0|f.offsetOfPixel(b.left,b.top);for(var p=0;p<k;p++,e+=h,b+=g)for(var m=
0;m<l;m++,e+=4,b++)a.data[e+3]=c.data[e+3]*f.data[b]*d/25500|0};W.replaceAlphaOntoFusionWithOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4)a.data[b+3]=c.data[b+3]};W.replaceAlphaOntoFusionWithOpaqueLayerMasked=function(a,c,d,b,f){d=0|b.getHeight();var k=0|b.getWidth(),l=4*(c.width-k)|0,h=0|c.offsetOfPixel(b.left,b.top),e=f.width-k|0;b=0|f.offsetOfPixel(b.left,b.top);for(var g=
0;g<d;g++,h+=l,b+=e)for(var p=0;p<k;p++,h+=4,b++)a.data[h+3]=c.data[h+3]*f.data[b]/255|0};W.upgradeMultiplyOfOpaqueLayer=function(a,c,d,b){d=0|b.getHeight();var f=0|b.getWidth(),k=4*(c.width-f)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var l=0;l<d;l++,b+=k)for(var h=0;h<f;h++,b+=4){var e=c.data[b+3],g=void 0,p=void 0;e&&(g=c.data[b],p=a.data[b],c.data[b]=g+Math.ceil((255-g)*p*e%65025/(p*e)),g=c.data[b+1],p=a.data[b+1],c.data[b+1]=g+Math.ceil((255-g)*p*e%65025/(p*e)),g=c.data[b+2],p=a.data[b+2],c.data[b+
2]=g+Math.ceil((255-g)*p*e%65025/(p*e)))}};W.upgradeMultiplyOfTransparentLayer=function(a,c,d,b){var f=0|b.getHeight(),k=0|b.getWidth(),l=4*(c.width-k)|0;b=0|c.offsetOfPixel(b.left,b.top);for(var h=0;h<f;h++,b+=l)for(var e=0;e<k;e++,b+=4){var g=c.data[b+3]*d/100|0,p=void 0,m=void 0;g&&(p=c.data[b],m=a.data[b],c.data[b]=p+Math.ceil((255-p)*m*g%65025/(m*g)),p=c.data[b+1],m=a.data[b+1],c.data[b+1]=p+Math.ceil((255-p)*m*g%65025/(m*g)),p=c.data[b+2],m=a.data[b+2],c.data[b+2]=p+Math.ceil((255-p)*m*g%65025/
(m*g)))}};W._normalFuseImageOntoImageAtPosition=function(a,c,d,b,f,k){d=0|b.getHeight();var l=0|b.getWidth(),h=4*(c.width-l)|0;b=0|c.offsetOfPixel(b.left,b.top);var e=4*(a.width-l)|0;f=0|a.offsetOfPixel(f,k);for(k=0;k<d;k++,b+=h,f+=e)for(var g=0;g<l;g++,b+=4,f+=4){var p=c.data[b+3],m=void 0;if(p){var n=p+(m=a.data[f+3])-(p*m/255|0)|0;p=255*p/n|0;m=255-p;a.data[f]=(c.data[b]*p+a.data[f]*m)/255|0;a.data[f+1]=(c.data[b+1]*p+a.data[f+1]*m)/255|0;a.data[f+2]=(c.data[b+2]*p+a.data[f+2]*m)/255|0;a.data[f+
3]=n}}};W.LM_NORMAL=0;W.LM_MULTIPLY=1;W.LM_ADD=2;W.LM_SCREEN=3;W.LM_LIGHTEN=4;W.LM_DARKEN=5;W.LM_SUBTRACT=6;W.LM_DODGE=7;W.LM_BURN=8;W.LM_OVERLAY=9;W.LM_HARDLIGHT=10;W.LM_SOFTLIGHT=11;W.LM_VIVIDLIGHT=12;W.LM_LINEARLIGHT=13;W.LM_PINLIGHT=14;W.LM_PASSTHROUGH=15;W.LM_MULTIPLY2=16;W.LM_FIRST=0;W.LM_LAST=16;W.LM_LAST_CHIBIPAINT=W.LM_PINLIGHT;W.BLEND_MODE_CODENAMES="normal multiply add screen lighten darken subtract dodge burn overlay hardLight softLight vividLight linearLight pinLight passthrough multiply2".split(" ");
W.BLEND_MODE_DISPLAY_NAMES="Normal;Multiply;Add;Screen;Lighten;Darken;Subtract;Dodge;Burn;Overlay;Hard Light;Soft Light;Vivid Light;Linear Light;Pin Light;Passthrough;Multiply".split(";");(function(){for(var a=0;256>a;a++){var c=a/255;Bc[a]=255*(c-c*c)|0}for(a=0;256>a;a++)c=a/255,Cc[a]=255*(Math.sqrt(c)-c)|0})();Ob.prototype.copyFrom=function(a){this.name=a.name;this.blendMode=a.blendMode;this.useLegacyMultiply=a.useLegacyMultiply;this.alpha=a.alpha;this.visible=a.visible;this.parent=a.parent;this.lockAlpha=
a.lockAlpha;a.mask?this.mask?this.mask.copyPixelsFrom(a.mask):this.mask=a.mask.clone():this.mask=null;this.maskLinked=a.maskLinked;this.maskVisible=a.maskVisible;a.maskThumbnail?this.maskThumbnail?this.maskThumbnail.copyPixelsFrom(a.maskThumbnail):this.maskThumbnail=a.maskThumbnail.clone():this.maskThumbnail=null};Ob.prototype.setMask=function(a){(this.mask=a)||(this.maskThumbnail=null)};Ob.prototype.setAlpha=function(a){this.alpha=a};Ob.prototype.getAlpha=function(){return this.alpha};Ob.prototype.getEffectiveAlpha=
function(){return this.visible?this.alpha:0};Ob.prototype.getEffectiveMask=function(){return this.maskVisible?this.mask:null};Ob.prototype.setName=function(a){this.name=a};Ob.prototype.getName=function(){return this.name};Ob.prototype.setBlendMode=function(a){this.blendMode=a;a===W.LM_MULTIPLY?this.useLegacyMultiply=!0:a===W.LM_MULTIPLY2&&(this.useLegacyMultiply=!1)};Ob.prototype.getBlendMode=function(){return this.blendMode};Ob.prototype.getLockAlpha=function(){return this.lockAlpha};Ob.prototype.setLockAlpha=
function(a){this.lockAlpha=a};Ob.prototype.setVisible=function(a){this.visible=a};Ob.prototype.getVisible=function(){return this.visible};Ob.prototype.isVisible=Ob.prototype.getVisible;Ob.prototype.setMaskLinked=function(a){this.maskLinked=a};Ob.prototype.getMaskLinked=function(){return this.maskLinked};Ob.prototype.setMaskVisible=function(a){this.maskVisible=a};Ob.prototype.getMaskVisible=function(){return this.maskVisible};Ob.prototype.getMemoryUsed=function(){return 0};Ob.prototype.getDepth=function(){return null==
this.parent?0:this.parent.getDepth()+1};Ob.prototype.ancestorsAreVisible=function(){return null==this.parent||this.parent.visible&&this.parent.ancestorsAreVisible()};Ob.prototype.hasAncestor=function(a){return this.parent==a||this.parent&&this.parent.hasAncestor(a)};Ob.prototype.clone=function(){throw"Pure virtual CPLayer.clone() call";};Ob.prototype.getNonTransparentBounds=function(a){return new Va(0,0,0,0)};Ob.prototype.rebuildMaskThumbnail=function(){if(this.mask){if(!this.maskThumbnail){var a=
Math.ceil(Math.max(this.mask.width/Ob.LAYER_THUMBNAIL_WIDTH,this.mask.height/Ob.LAYER_THUMBNAIL_HEIGHT));this.maskThumbnail=new pb(Math.floor(this.mask.width/a),Math.floor(this.mask.height/a),8)}this.maskThumbnail.createThumbnailFrom(this.mask)}else this.maskThumbnail=null};Ob.prototype.getMaskThumbnail=function(){return!this.maskThumbnail&&this.mask&&this.rebuildMaskThumbnail(),this.maskThumbnail};Ob.LAYER_THUMBNAIL_WIDTH=80;Ob.LAYER_THUMBNAIL_HEIGHT=50;Ya.prototype=Object.create(Ob.prototype);Ya.prototype.constructor=
Ya;Ya.createFromImage=function(a,c){c=new Ya(0,0,c);return c.image=a,c};Ya.prototype.clone=function(){var a=new Ya(0,0,this.name);return a.copyFrom(this),a};Ya.prototype.copyFrom=function(a){Ob.prototype.copyFrom.call(this,a);this.clip=a.clip;this.image?this.image.copyPixelsFrom(a.image):this.image=a.image.clone()};Ya.prototype.hasAlpha=function(){return 100!=this.alpha||this.image.hasAlpha()};Ya.prototype.hasAlphaInRect=function(a){return 100!=this.alpha||this.image.hasAlphaInRect(a)};Ya.prototype.copyImageFrom=
function(a){this.image.copyPixelsFrom(a)};Ya.prototype.getClippingBase=function(){if(this.clip&&this.parent)for(var a=this.parent.indexOf(this)-1;0<=a&&this.parent.layers[a]instanceof Ya;a--)if(!this.parent.layers[a].clip)return this.parent.layers[a];return null};Ya.prototype.getClip=function(){return this.clip};Ya.prototype.setClip=function(a){this.clip=a};Ya.prototype.getNonTransparentBounds=function(a){return this.image.getNonTransparentBounds(a)};Ya.prototype.getBounds=function(){return new Va(0,
0,this.image.width,this.image.height)};Ya.prototype.getMemoryUsed=function(){return this.image?this.image.getMemorySize():0};Ya.prototype.rebuildImageThumbnail=function(){if(!this.imageThumbnail){var a=Math.ceil(Math.max(this.image.width/Ob.LAYER_THUMBNAIL_WIDTH,this.image.height/Ob.LAYER_THUMBNAIL_HEIGHT));this.imageThumbnail=new J(Math.floor(this.image.width/a),Math.floor(this.image.height/a))}this.imageThumbnail.createThumbnailFrom(this.image)};Ya.prototype.getImageThumbnail=function(){return this.imageThumbnail||
this.rebuildImageThumbnail(),this.imageThumbnail};W.blendFunctionNameForParameters=function(a,c,d,b){d=W.BLEND_MODE_CODENAMES[d]+"Onto";return a?d+="TransparentFusion":d+="OpaqueFusion",100==c?d+="WithOpaqueLayer":d+="WithTransparentLayer",b&&(d+="Masked"),d};W.fuseImageOntoImage=function(a,c,d,b,f,k,l){0>=b||(c=W.blendFunctionNameForParameters(c,b,f,null!=l),k=a.getBounds().clipTo(k),this[c](a,d,b,k,l))};W.normalFuseImageOntoImageAtPosition=function(a,c,d,b,f){f=f.clone();d=new Va(d,b,0,0);a.getBounds().clipSourceDest(f,
d);this._normalFuseImageOntoImageAtPosition(a,c,100,f,d.left,d.top)};W.multiplyAlphaBy=function(a,c){if(100>c)if(0==c)a.clearAll(0);else{a=a.data;for(var d=3;d<a.length;d+=4)a[d]=Math.round(a[d]*c/100)}};W.multiplyAlphaByMask=function(a,c,d){c/=25500;for(var b=J.ALPHA_BYTE_OFFSET,f=0;b<a.data.length;b+=J.BYTES_PER_PIXEL,f++)a.data[b]=Math.round(a.data[b]*d.data[f]*c)};W.copyAndMultiplyAlphaBy=function(a,c,d,b){if(100==d)a.copyBitmapRect(c,b.left,b.top,b);else if(0==d)a.clearRect(b,0);else for(a=c.data,
c=0;c<a.length;c+=4)a[c]=a[c],a[c+1]=a[c+1],a[c+2]=a[c+2],a[c+3]=Math.round(a[c+3]*d/100)};og.prototype.addChildren=function(a){var c=this;null!=a&&(Array.isArray(a)?(a.forEach(function(d){return d.parent=c}),this.layers=this.layers.concat(a)):(a.parent=this,this.layers.push(a)))};var Pc={};!function(a){function c(){}function d(l,h){for(var e=l.length;e--;)if(l[e].listener===h)return e;return-1}function b(l){return function(){return this[l].apply(this,arguments)}}var f=c.prototype,k=a.EventEmitter;
f.getListeners=function(l){var h,e,g=this._getEvents();if(l instanceof RegExp)for(e in h={},g)g.hasOwnProperty(e)&&l.test(e)&&(h[e]=g[e]);else h=g[l]||(g[l]=[]);return h};f.flattenListeners=function(l){var h,e=[];for(h=0;h<l.length;h+=1)e.push(l[h].listener);return e};f.getListenersAsObject=function(l){var h,e=this.getListeners(l);return e instanceof Array&&((h={})[l]=e),h||e};f.addListener=function(l,h){if(!function n(m){return"function"==typeof m||m instanceof RegExp||!!m&&"object"==typeof m&&n(m.listener)}(h))throw TypeError("listener must be a function");
var e;l=this.getListenersAsObject(l);var g="object"==typeof h;for(e in l)l.hasOwnProperty(e)&&-1===d(l[e],h)&&l[e].push(g?h:{listener:h,once:!1});return this};f.on=b("addListener");f.addOnceListener=function(l,h){return this.addListener(l,{listener:h,once:!0})};f.once=b("addOnceListener");f.defineEvent=function(l){return this.getListeners(l),this};f.defineEvents=function(l){for(var h=0;h<l.length;h+=1)this.defineEvent(l[h]);return this};f.removeListener=function(l,h){var e,g;l=this.getListenersAsObject(l);
for(g in l)l.hasOwnProperty(g)&&-1!==(e=d(l[g],h))&&l[g].splice(e,1);return this};f.off=b("removeListener");f.addListeners=function(l,h){return this.manipulateListeners(!1,l,h)};f.removeListeners=function(l,h){return this.manipulateListeners(!0,l,h)};f.manipulateListeners=function(l,h,e){var g,p,m=l?this.removeListener:this.addListener;l=l?this.removeListeners:this.addListeners;if("object"!=typeof h||h instanceof RegExp)for(g=e.length;g--;)m.call(this,h,e[g]);else for(g in h)h.hasOwnProperty(g)&&
(p=h[g])&&("function"==typeof p?m.call(this,g,p):l.call(this,g,p));return this};f.removeEvent=function(l){var h,e=void 0===l?"undefined":Vd(l),g=this._getEvents();if("string"===e)delete g[l];else if(l instanceof RegExp)for(h in g)g.hasOwnProperty(h)&&l.test(h)&&delete g[h];else delete this._events;return this};f.removeAllListeners=b("removeEvent");f.emitEvent=function(l,h){var e,g,p,m=this.getListenersAsObject(l);for(p in m)if(m.hasOwnProperty(p)){var n=0;for(e=m[p].slice(0);n<e.length;n++)!0===(g=
e[n]).once&&this.removeListener(l,g.listener),g.listener.apply(this,h||[])===this._getOnceReturnValue()&&this.removeListener(l,g.listener)}return this};f.trigger=b("emitEvent");f.emit=function(l){var h=Array.prototype.slice.call(arguments,1);return this.emitEvent(l,h)};f.setOnceReturnValue=function(l){return this._onceReturnValue=l,this};f._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue};f._getEvents=function(){return this._events||(this._events=
{})};c.noConflict=function(){return a.EventEmitter=k,c};"function"==typeof define&&define.amd?define(function(){return c}):Pc?Pc=c:a.EventEmitter=c}("undefined"!=typeof window?window:{});var lp=function(a){function c(b,f){var k;return Ib(this,c),(k=d.call(this)).layer=b,k.buffer=b.mask.getImageData(0,0,b.mask.width,b.mask.height),k.invalidRect=new Va(0,0,0,0),k.prepareMask=f,k}gc(c,a);var d=hc(c);return Jb(c,[{key:"close",value:function(){this.layer=this.buffer=null;this.emitEvent("changeLayer")}},
{key:"setLayer",value:function(b){this.layer=b;this.invalidRect=b.getBounds();this.emitEvent("changeLayer")}},{key:"isOpen",value:function(){return null!=this.layer}},{key:"invalidateRect",value:function(b){this.invalidRect.union(b)}},{key:"getImageData",value:function(){this.prepareMask();if(!this.invalidRect.isEmpty()&&this.layer&&this.layer.mask){var b=this.buffer,f=this.layer.mask,k=this.invalidRect,l=k.top*f.width+k.left,h=l*J.BYTES_PER_PIXEL,e=k.getWidth();k=k.getHeight();for(var g=f.width-
e,p=g*J.BYTES_PER_PIXEL,m=0;m<k;m++,l+=g,h+=p)for(var n=0;n<e;n++,l++,h+=J.BYTES_PER_PIXEL)b.data[h+J.RED_BYTE_OFFSET]=f.data[l],b.data[h+J.GREEN_BYTE_OFFSET]=f.data[l],b.data[h+J.BLUE_BYTE_OFFSET]=f.data[l],b.data[h+J.ALPHA_BYTE_OFFSET]=255;this.invalidRect.makeEmpty()}return this.buffer}}]),c}(fa(Pc)),pd=function(){function a(){Ib(this,a)}return Jb(a,[{key:"merge",value:function(c){return!1}},{key:"noChange",value:function(){return!1}},{key:"getMemoryUsed",value:function(c,d){return 0}},{key:"compact",
value:function(){}}]),a}();bc.prototype.getRgb=function(){return this.rgb};bc.prototype.getSaturation=function(){return this.saturation};bc.prototype.getHue=function(){return this.hue};bc.prototype.getValue=function(){return this.value};bc.prototype.setRgbComponents=function(a,c,d){this.setRgb(a<<16|c<<8|d)};bc.prototype.setRgb=function(a){this.rgb=a;var c=a>>16&255,d=a>>8&255;a&=255;this.value=Math.max(c,Math.max(d,a));var b=Math.min(c,Math.min(d,a));if(0==this.value?this.saturation=0:this.saturation=
~~((this.value-b)/this.value*255),0==this.saturation)this.hue=0;else{var f=(this.value-c)/(this.value-b),k=(this.value-d)/(this.value-b);b=(this.value-a)/(this.value-b);var l=0;this.value==c&&(l=b-k);this.value==d&&(l=2+f-b);this.value==a&&(l=4+k-f);0>(l*=60)&&(l+=360);this.hue=~~l}};bc.prototype.setHsv=function(a,c,d){this.hue=a;this.saturation=c;this.value=d;this.rgb=ch(this)};bc.prototype.setHue=function(a){this.hue=a;this.rgb=ch(this)};bc.prototype.setSaturation=function(a){this.saturation=a;
this.rgb=ch(this)};bc.prototype.setValue=function(a){this.value=a;this.rgb=ch(this)};bc.prototype.setGreyscale=function(a){this.rgb=bc.greyToRGB(a);this.saturation=this.hue=0;this.value=a};bc.prototype.clone=function(){var a=new bc(0);return a.copyFrom(this),a};bc.prototype.copyFrom=function(a){this.rgb=a.rgb;this.hue=a.hue;this.saturation=a.saturation;this.value=a.value};bc.prototype.isEqual=function(a){return this.rgb==a.rgb&&this.hue==a.hue&&this.saturation==a.saturation&&this.value==a.value};
bc.greyToRGB=function(a){return a|a<<8|a<<16};pc.prototype.setToIdentity=function(){this.m=[1,0,0,1,0,0]};pc.prototype.multiply=function(a){var c=this.m[1]*a.m[0]+this.m[3]*a.m[1],d=this.m[0]*a.m[2]+this.m[2]*a.m[3],b=this.m[1]*a.m[2]+this.m[3]*a.m[3],f=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],k=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];this.m[0]=this.m[0]*a.m[0]+this.m[2]*a.m[1];this.m[1]=c;this.m[2]=d;this.m[3]=b;this.m[4]=f;this.m[5]=k};pc.prototype.preMultiply=function(a){var c=a.m[1]*this.m[0]+
a.m[3]*this.m[1],d=a.m[0]*this.m[2]+a.m[2]*this.m[3],b=a.m[1]*this.m[2]+a.m[3]*this.m[3],f=a.m[0]*this.m[4]+a.m[2]*this.m[5]+a.m[4],k=a.m[1]*this.m[4]+a.m[3]*this.m[5]+a.m[5];this.m[0]=a.m[0]*this.m[0]+a.m[2]*this.m[1];this.m[1]=c;this.m[2]=d;this.m[3]=b;this.m[4]=f;this.m[5]=k};pc.prototype.invert=function(){var a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),c=-this.m[1]*a,d=-this.m[2]*a,b=this.m[0]*a,f=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),k=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=
this.m[3]*a;this.m[1]=c;this.m[2]=d;this.m[3]=b;this.m[4]=f;this.m[5]=k};pc.prototype.getInverted=function(){var a=new pc;return a.m[0]=this.m[0],a.m[1]=this.m[1],a.m[2]=this.m[2],a.m[3]=this.m[3],a.m[4]=this.m[4],a.m[5]=this.m[5],a.invert(),a};pc.prototype.rotate=function(a){var c=Math.cos(a);a=Math.sin(a);var d=this.m[1]*c+this.m[3]*a,b=-(this.m[0]*a)+this.m[2]*c,f=-(this.m[1]*a)+this.m[3]*c;this.m[0]=this.m[0]*c+this.m[2]*a;this.m[1]=d;this.m[2]=b;this.m[3]=f};pc.prototype.rotateAroundPoint=function(a,
c,d){this.translate(c,d);this.rotate(a);this.translate(-c,-d)};pc.prototype.translate=function(a,c){this.m[4]+=this.m[0]*a+this.m[2]*c;this.m[5]+=this.m[1]*a+this.m[3]*c};pc.prototype.scale=function(a,c){this.m[0]*=a;this.m[1]*=a;this.m[2]*=c;this.m[3]*=c};pc.prototype.scaleAroundPoint=function(a,c,d,b){this.translate(d,b);this.scale(a,c);this.translate(-d,-b)};pc.prototype.shear=function(a,c){var d=this.m[1]+this.m[3]*c,b=this.m[2]+this.m[0]*a;a=this.m[3]+this.m[1]*a;this.m[0]+=this.m[2]*c;this.m[1]=
d;this.m[2]=b;this.m[3]=a};pc.prototype.getTransformedPoint=function(a){return{x:a.x*this.m[0]+a.y*this.m[2]+this.m[4],y:a.x*this.m[1]+a.y*this.m[3]+this.m[5]}};pc.prototype.transformPoints=function(a){for(var c=0;c<a.length;c++)a[c]=this.getTransformedPoint(a[c])};pc.prototype.getTranslateX=function(){return this.m[4]};pc.prototype.getTranslateY=function(){return this.m[5]};pc.prototype.clone=function(){var a=new pc;return a.m[0]=this.m[0],a.m[1]=this.m[1],a.m[2]=this.m[2],a.m[3]=this.m[3],a.m[4]=
this.m[4],a.m[5]=this.m[5],a};pc.prototype.getDeterminant=function(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]};pc.prototype.decompose=function(){var a=this.getDeterminant(),c=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return{translate:{x:this.m[4],y:this.m[5]},rotate:Math.sign(this.m[1])*Math.acos(this.m[0]/c),scale:{x:c,y:a/c},shear:{x:Math.atan((this.m[0]*this.m[2]+this.m[1]*this.m[3])/(c*c)),y:0}}};pc.prototype.toString=function(){return"["+this.m[0].toFixed(2)+" "+this.m[2].toFixed(2)+
" "+this.m[4].toFixed(2)+"]\n["+this.m[1].toFixed(2)+" "+this.m[3].toFixed(2)+" "+this.m[5].toFixed(2)+"]\n[0.00 0.00 1.00]"};Math.sign=Math.sign||function(a){return 0==(a=+a)||isNaN(a)?a:0<a?1:-1};ue.prototype.toInt=function(){return Math.max(0,Math.min(255,Math.round(255*this.r)))<<16|Math.max(0,Math.min(255,Math.round(255*this.g)))<<8|Math.max(0,Math.min(255,Math.round(255*this.b)))};ue.prototype.mixWith=function(a,c){this.r=this.r*(1-c)+a.r*c;this.g=this.g*(1-c)+a.g*c;this.b=this.b*(1-c)+a.b*
c};ue.prototype.clone=function(){return new ue(this.r,this.g,this.b)};ue.createFromInt=function(a){return new ue((a>>>16&255)/255,(a>>>8&255)/255,(255&a)/255)};var If=function(){function a(c,d){Ib(this,a);this._strokeBuffer=c;this._strokedRegion=d;this.wantsOutputAsInput=!0}return Jb(a,[{key:"paintDab",value:function(c,d,b,f,k,l,h){c=Math.max(1,Math.ceil(l.alpha*f.alphaScale));switch(f.paintMode){case Pa.PAINT_MODE_FLOW:this._paintFlow(k,d,l.brush,l.width,c);break;case Pa.PAINT_MODE_OPACITY:this._paintOpacity(k,
d,l.brush,l.width,c)}}},{key:"mergeOntoImage",value:function(c,d,b){var f=this._strokeBuffer.data,k=this._strokedRegion;d=d.data;var l=c.data,h=b>>16&255,e=b>>8&255;b&=255;var g=0|k.getWidth(),p=0|k.getHeight(),m=this._strokeBuffer.offsetOfPixel(k.left,k.top);k=c.offsetOfPixel(k.left,k.top);var n=this._strokeBuffer.width-g|0;c=(c.width-g)*J.BYTES_PER_PIXEL|0;for(var r=0;r<p;r++,m+=n,k+=c)for(var u=0;u<g;u++,m++,k+=J.BYTES_PER_PIXEL){var w=f[m]/255+.5|0;if(0<w){var z=w+d[k+J.ALPHA_BYTE_OFFSET]*(255-
w)/255|0;w=255*w/z|0;var G=255-w;l[k]=(h*w+d[k]*G)/255&255;l[k+1]=(e*w+d[k+1]*G)/255&255;l[k+2]=(b*w+d[k+2]*G)/255&255;l[k+3]=z}}}},{key:"mergeOntoMask",value:function(c,d,b){var f=this._strokeBuffer.data,k=this._strokedRegion;d=d.data;var l=c.data,h=0|k.getWidth(),e=0|k.getHeight(),g=c.offsetOfPixel(k.left,k.top);k=this._strokeBuffer.offsetOfPixel(k.left,k.top);var p=this._strokeBuffer.width-h|0;c=c.width-h|0;for(var m=0;m<e;m++,k+=p,g+=c)for(var n=0;n<h;n++,k++,g++){var r=f[k]/255|0;0<r&&(l[g]=
(b*r+d[g]*(255-r))/255)}}},{key:"_paintFlow",value:function(c,d,b,f,k){var l=this._strokeBuffer.data;c=c.left+c.top*f;var h=this._strokeBuffer.offsetOfPixel(d.left,d.top),e=d.getHeight(),g=d.getWidth();f-=g;var p=this._strokeBuffer.width-g;this._strokedRegion.union(d);for(d=0;d<e;d++,c+=f,h+=p)for(var m=0;m<g;m++,c++,h++){var n=b[c]*k;0!=n&&(l[h]=Math.min(65025,l[h]+(255-l[h]/255)*n/255))}}},{key:"_paintOpacity",value:function(c,d,b,f,k){var l=this._strokeBuffer.data;c=c.left+c.top*f;var h=this._strokeBuffer.offsetOfPixel(d.left,
d.top),e=d.getWidth();f-=e;var g=this._strokeBuffer.width-e;k=Math.min(255,k);this._strokedRegion.union(d);for(var p=d.top;p<d.bottom;p++,c+=f,h+=g)for(var m=0;m<e;m++,c++,h++)l[h]=Math.max(b[c]*k,l[h])}},{key:"beginStroke",value:function(){}},{key:"endStroke",value:function(){}}]),a}(),mp=function(a){function c(){return Ib(this,c),d.apply(this,arguments)}gc(c,a);var d=hc(c);return Jb(c,[{key:"mergeOntoImage",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion;f=f.data;for(var h=
b.data,e=l.top;e<l.bottom;e++)for(var g=b.offsetOfPixel(l.left,e)+J.ALPHA_BYTE_OFFSET,p=this._strokeBuffer.offsetOfPixel(l.left,e),m=l.left;m<l.right;m++,g+=J.BYTES_PER_PIXEL){var n=k[p++]/255|0;0<n&&(h[g]=f[g]*(255-n)/255)}}}]),c}(If),np=function(a){function c(){return Ib(this,c),d.apply(this,arguments)}gc(c,a);var d=hc(c);return Jb(c,[{key:"mergeOntoImage",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion,h=l.getWidth(),e=l.getHeight(),g=b.offsetOfPixel(l.left,l.top);l=this._strokeBuffer.offsetOfPixel(l.left,
l.top);var p=(b.width-h)*J.BYTES_PER_PIXEL,m=this._strokeBuffer.width-h;f=f.data;b=b.data;for(var n=0;n<e;n++,l+=m,g+=p)for(var r=0;r<h;r++,l++,g+=J.BYTES_PER_PIXEL){var u=k[l]/255|0;0<u&&0!=f[g+J.ALPHA_BYTE_OFFSET]&&(u=(u+255)/255,b[g+J.RED_BYTE_OFFSET]=f[g+J.RED_BYTE_OFFSET]*u,b[g+J.GREEN_BYTE_OFFSET]=f[g+J.GREEN_BYTE_OFFSET]*u,b[g+J.BLUE_BYTE_OFFSET]=f[g+J.BLUE_BYTE_OFFSET]*u)}}},{key:"mergeOntoMask",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion,h=l.getWidth(),e=l.getHeight(),
g=b.offsetOfPixel(l.left,l.top);l=this._strokeBuffer.offsetOfPixel(l.left,l.top);var p=b.width-h,m=this._strokeBuffer.width-h;f=f.data;b=b.data;for(var n=0;n<e;n++,l+=m,g+=p)for(var r=0;r<h;r++,l++,g++){var u=k[l]/255|0;0<u&&(b[g]=Math.min((u+255)/255*f[g],255))}}}]),c}(If),op=function(a){function c(){return Ib(this,c),d.apply(this,arguments)}gc(c,a);var d=hc(c);return Jb(c,[{key:"mergeOntoImage",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion,h=l.getWidth(),e=l.getHeight(),
g=b.offsetOfPixel(l.left,l.top);l=this._strokeBuffer.offsetOfPixel(l.left,l.top);var p=(b.width-h)*J.BYTES_PER_PIXEL,m=this._strokeBuffer.width-h;f=f.data;b=b.data;for(var n=0;n<e;n++,l+=m,g+=p)for(var r=0;r<h;r++,l++,g+=J.BYTES_PER_PIXEL){var u=k[l]/255|0;0<u&&0!=f[g+J.ALPHA_BYTE_OFFSET]&&(b[g+J.RED_BYTE_OFFSET]=f[g+J.RED_BYTE_OFFSET]-(260-f[g+J.RED_BYTE_OFFSET])*u/255|0,b[g+J.GREEN_BYTE_OFFSET]=f[g+J.GREEN_BYTE_OFFSET]-(260-f[g+J.GREEN_BYTE_OFFSET])*u/255|0,b[g+J.BLUE_BYTE_OFFSET]=f[g+J.BLUE_BYTE_OFFSET]-
(260-f[g+J.BLUE_BYTE_OFFSET])*u/255|0)}}},{key:"mergeOntoMask",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion,h=l.getWidth(),e=l.getHeight(),g=b.offsetOfPixel(l.left,l.top);l=this._strokeBuffer.offsetOfPixel(l.left,l.top);var p=b.width-h,m=this._strokeBuffer.width-h;f=f.data;b=b.data;for(var n=0;n<e;n++,l+=m,g+=p)for(var r=0;r<h;r++,l++,g++){var u=k[l]/255|0;0<u&&(b[g]=Math.max(f[g]-(260-f[g])*u/255,0))}}}]),c}(If),qp=function(a){function c(){return Ib(this,c),d.apply(this,
arguments)}gc(c,a);var d=hc(c);return Jb(c,[{key:"mergeOntoImage",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion,h=f.data;b=b.data;var e=l.getWidth(),g=f.width*J.BYTES_PER_PIXEL,p=f.offsetOfPixel(l.left,l.top),m=this._strokeBuffer.offsetOfPixel(l.left,l.top),n=(f.width-e)*J.BYTES_PER_PIXEL;e=this._strokeBuffer.width-e;for(var r=function(Y){L+=h[Y+J.RED_BYTE_OFFSET];O+=h[Y+J.GREEN_BYTE_OFFSET];N+=h[Y+J.BLUE_BYTE_OFFSET];ea+=h[Y+J.ALPHA_BYTE_OFFSET]},u=l.top;u<l.bottom;u++,
p+=n,m+=e)for(var w=l.left;w<l.right;w++,p+=J.BYTES_PER_PIXEL,m++){var z=k[m]/255|0;if(0<z){z=64+-63*z/255|0;var G=z+4;var L=z*h[p+J.RED_BYTE_OFFSET];var O=z*h[p+J.GREEN_BYTE_OFFSET];var N=z*h[p+J.BLUE_BYTE_OFFSET];var ea=z*h[p+J.ALPHA_BYTE_OFFSET];r(0<u?p-g:p);r(u<f.height-1?p+g:p);r(0<w?p-J.BYTES_PER_PIXEL:p);r(w<f.width-1?p+J.BYTES_PER_PIXEL:p);ea/=G;L/=G;O/=G;N/=G;b[p+J.RED_BYTE_OFFSET]=0|L;b[p+J.GREEN_BYTE_OFFSET]=0|O;b[p+J.BLUE_BYTE_OFFSET]=0|N;b[p+J.ALPHA_BYTE_OFFSET]=0|ea}}}},{key:"mergeOntoMask",
value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion,h=f.data;b=b.data;var e=l.getWidth(),g=f.width,p=f.offsetOfPixel(l.left,l.top),m=this._strokeBuffer.offsetOfPixel(l.left,l.top),n=f.width-e;e=this._strokeBuffer.width-e;for(var r=l.top;r<l.bottom;r++,p+=n,m+=e)for(var u=l.left;u<l.right;u++,p++,m++){var w=k[m]/255|0;if(0<w){var z=64+-63*w/255|0;w=z+4;z=z*h[p]+h[0<r?p-g:p]+h[r<f.height-1?p+g:p]+h[0<u?p-1:p]+h[u<f.width-1?p+1:p];b[p]=z/w|0}}}}]),c}(If),al=function(a){function c(){return Ib(this,
c),d.apply(this,arguments)}gc(c,a);var d=hc(c);return Jb(c,[{key:"mergeOntoImage",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion;f=f.data;var h=b.data,e=this._strokeBuffer.offsetOfPixel(l.left,l.top),g=b.offsetOfPixel(l.left,l.top),p=0|l.getWidth();l=0|l.getHeight();var m=this._strokeBuffer.width-p|0;b=(b.width-p)*J.BYTES_PER_PIXEL|0;for(var n=0;n<l;n++,e+=m,g+=b)for(var r=0;r<p;r++,e++,g+=J.BYTES_PER_PIXEL){var u=k[e],w=u>>>24;if(0<w){var z=f[g+J.ALPHA_BYTE_OFFSET];z=w+
z-w*z/255|0;w=255*w/z|0;var G=255-w;h[g]=((u>>16&255)*w+f[g]*G)/255|0;h[g+1]=((u>>8&255)*w+f[g+1]*G)/255|0;h[g+2]=((255&u)*w+f[g+2]*G)/255|0;h[g+3]=z}}}},{key:"mergeOntoMask",value:function(b,f,k){k=this._strokeBuffer.data;var l=this._strokedRegion;f=f.data;var h=b.data,e=this._strokeBuffer.offsetOfPixel(l.left,l.top),g=b.offsetOfPixel(l.left,l.top),p=0|l.getWidth();l=0|l.getHeight();var m=this._strokeBuffer.width-p|0;b=b.width-p|0;for(var n=0;n<l;n++,e+=m,g+=b)for(var r=0;r<p;r++,e++,g++){var u=
k[e],w=u>>8;0<w&&(h[g]=((255&u)*w+f[g]*(255-w))/255|0)}}}]),c}(If),Qo=2/6,pp=function(a){function c(b,f){var k;return Ib(this,c),(k=d.call(this,b,f)).wantsOutputAsInput=!0,k}gc(c,a);var d=hc(c);return Jb(c,[{key:"_paintToColorStrokeBuffer",value:function(b,f,k,l,h,e){var g=this._strokeBuffer.data,p=f.getWidth(),m=f.getHeight(),n=this._strokeBuffer.width-p,r=l-p;b=b.left+b.top*l;l=this._strokeBuffer.offsetOfPixel(f.left,f.top);this._strokedRegion.union(f);for(f=0;f<m;f++,b+=r,l+=n)for(var u=0;u<p;u++,
b++,l++){var w=k[b]*h/255|0;if(0<w){var z=g[l],G=z>>>24;G=w+G-w*G/255|0;w=255-(255*w/G|0);g[l]=G<<24|(e>>16&255)+((z>>16&255)*w-(e>>16&255)*w)/255<<16|(e>>8&255)+((z>>8&255)*w-(e>>8&255)*w)/255<<8|(255&e)+((255&z)*w-(255&e)*w)/255}}}},{key:"_paintToGreyscaleStrokeBuffer",value:function(b,f,k,l,h,e){var g=this._strokeBuffer.data;this._strokedRegion.union(f);for(var p=f.top,m=b.top;p<f.bottom;p++,m++)for(var n=b.left+m*l,r=this._strokeBuffer.offsetOfPixel(f.left,p),u=f.left;u<f.right;u++,n++,r++){var w=
k[n]*h/255|0;if(!(0>=w)){var z=g[r],G=z>>8;G=w+G-w*G/255|0;0<G&&(w=255-(255*w/G|0),g[r]=G<<8|e+((255&z)*w-e*w)/255)}}}},{key:"beginStroke",value:function(){this._previousSamples=null}},{key:"paintDab",value:function(b,f,k,l,h,e,g){b=Math.max(1,e.alpha/4);var p=(f.left+f.right)/2,m=(f.top+f.bottom)/2,n=Math.max(1,Math.min(64,f.getWidth()*Qo)),r=Math.max(1,Math.min(64,f.getHeight()*Qo));if(k instanceof pb){null==this._previousSamples&&(this._previousSamples=Array(50),this._previousSamples.fill(c._sampleGrey(k,
p,m,n,r)));var u,w,z,G=ml(this._previousSamples);g=z=G=G*(1-(u=l.resat*l.resat))+(255&g)*u;k=c._sampleGrey(k,p,m,n,r);G=g*(1-(w=l.bleed))+k*w;this._previousSamples.push(G);this._previousSamples.shift();this._paintToGreyscaleStrokeBuffer(h,f,e.brush,e.width,b,Math.round(z))}else null==this._previousSamples&&(this._previousSamples=Array(50),this._previousSamples.fill(c._sampleRGB(k,p,m,n,r))),w=nl(this._previousSamples),w.mixWith(ue.createFromInt(g),l.resat*l.resat),g=w.toInt(),w.mixWith(c._sampleRGB(k,
p,m,n,r),l.bleed),this._previousSamples.push(w),this._previousSamples.shift(),this._paintToColorStrokeBuffer(h,f,e.brush,e.width,b,g)}}],[{key:"_sampleGrey",value:function(b,f,k,l,h){for(var e=[{x:f|=0,y:k|=0}],g=.25;1.001>g;g+=.25)Array.prototype.push.apply(e,[{x:~~(f+g*l),y:k},{x:~~(f-g*l),y:k},{x:f,y:~~(k+g*h)},{x:f,y:~~(k-g*h)},{x:~~(f+.7*g*l),y:~~(k+.7*g*h)},{x:~~(f+.7*g*l),y:~~(k-.7*g*h)},{x:~~(f-.7*g*l),y:~~(k+.7*g*h)},{x:~~(f-.7*g*l),y:~~(k-.7*g*h)}]);return ml(e.map(function(p){return b.getPixel(p.x,
p.y)}))}},{key:"_sampleRGB",value:function(b,f,k,l,h){for(var e=[{x:f|=0,y:k|=0}],g=.25;1.001>g;g+=.25)Array.prototype.push.apply(e,[{x:~~(f+g*l),y:k},{x:~~(f-g*l),y:k},{x:f,y:~~(k+g*h)},{x:f,y:~~(k-g*h)},{x:~~(f+.7*g*l),y:~~(k+.7*g*h)},{x:~~(f+.7*g*l),y:~~(k-.7*g*h)},{x:~~(f-.7*g*l),y:~~(k+.7*g*h)},{x:~~(f-.7*g*l),y:~~(k-.7*g*h)}]);return nl(e.map(function(p){return ue.createFromInt(b.getPixel(p.x,p.y))}))}}]),c}(al),sp=function(a){function c(b,f){var k;return Ib(this,c),(k=d.call(this,b,f)).wantsOutputAsInput=
!0,k}gc(c,a);var d=hc(c);return Jb(c,[{key:"_accumulatePaintFromMask",value:function(b,f,k,l){var h=this._brushBuffer.data,e=b.data,g=k.getWidth(),p=k.getHeight();f=f.left+f.top*this._brushBuffer.width;k=b.offsetOfPixel(k.left,k.top);var m=this._brushBuffer.width-g;b=b.width-g;if(!(0>=l))for(var n=0;n<p;n++,f+=m,k+=b)for(var r=0;r<g;r++,f++,k++){var u=e[k],w=h[f],z=w>>8;z=l+z-l*z/255|0;var G=255-(255*l/z|0);h[f]=z<<8|u+((255&w)*G-u*G)/255}}},{key:"_resaturateBrushWithGrey",value:function(b,f,k){if(!(0>=
f)){var l=this._brushBuffer.data,h=b.getWidth(),e=b.getHeight();b=b.left+b.top*this._brushBuffer.width;for(var g=this._brushBuffer.width-h,p=0;p<e;p++,b+=g)for(var m=0;m<h;m++,b++){var n=l[b],r=n>>8;r=f+r-f*r/255|0;var u=255-(255*f/r|0);l[b]=r<<8|k+((255&n)*u-k*u)/255}}}},{key:"_paintToGreyscaleStrokeBuffer",value:function(b,f,k,l,h){var e=this._strokeBuffer.data,g=this._brushBuffer.data,p=b.data;this._strokedRegion.union(k);for(var m=k.top,n=f.top;m<k.bottom;m++,n++)for(var r=this._brushBuffer.offsetOfPixel(f.left,
n),u=this._strokeBuffer.offsetOfPixel(k.left,m),w=b.offsetOfPixel(k.left,m),z=k.left;z<k.right;z++,r++,w++,u++){var G=g[r],L=(G>>8)*l[r]*h/65025|0;0<L&&(L=255-L,e[u]=65280|(255&G)+(p[w]*L-(255&G)*L)/255)}}},{key:"_accumulatePaintFromImage",value:function(b,f,k,l){var h=this._brushBuffer.data,e=b.data,g=k.getWidth(),p=k.getHeight();f=f.left+f.top*this._brushBuffer.width;k=b.offsetOfPixel(k.left,k.top);var m=this._brushBuffer.width-g;b=(b.width-g)*J.BYTES_PER_PIXEL;for(var n=0;n<p;n++,f+=m,k+=b)for(var r=
0;r<g;r++,f++,k+=J.BYTES_PER_PIXEL){var u=e[k+J.ALPHA_BYTE_OFFSET]*l/255|0;if(0<u){var w=h[f],z=w>>>24;z=u+z-u*z/255|0;u=255-(255*u/z|0);var G=e[k+J.RED_BYTE_OFFSET],L=e[k+J.GREEN_BYTE_OFFSET],O=e[k+J.BLUE_BYTE_OFFSET];h[f]=z<<24|G+((w>>16&255)*u-G*u)/255<<16|L+((w>>8&255)*u-L*u)/255<<8|O+((255&w)*u-O*u)/255}}}},{key:"_resaturateBrushWithColor",value:function(b,f,k){if(!(0>=f)){var l=this._brushBuffer.data,h=b.getWidth(),e=b.getHeight();b=b.left+b.top*this._brushBuffer.width;for(var g=this._brushBuffer.width-
h,p=0;p<e;p++,b+=g)for(var m=0;m<h;m++,b++){var n=l[b],r=n>>>24;r=f+r-f*r/255|0;var u=255-(255*f/r|0);l[b]=r<<24|(k>>>16&255)+((n>>>16&255)*u-(k>>>16&255)*u)/255<<16|(k>>>8&255)+((n>>>8&255)*u-(k>>>8&255)*u)/255<<8|(255&k)+((255&n)*u-(255&k)*u)/255}}}},{key:"_paintToColorStrokeBuffer",value:function(b,f,k,l,h){var e=this._strokeBuffer.data,g=this._brushBuffer.data,p=b.data;this._strokedRegion.union(k);for(var m=k.top,n=f.top;m<k.bottom;m++,n++)for(var r=this._brushBuffer.offsetOfPixel(f.left,n),u=
this._strokeBuffer.offsetOfPixel(k.left,m),w=b.offsetOfPixel(k.left,m),z=k.left;z<k.right;z++,r++,w+=J.BYTES_PER_PIXEL,u++){var G=g[r],L=(G>>>24)*l[r]*h/65025|0;if(0<L){var O=p[w+J.ALPHA_BYTE_OFFSET];O=L+O-L*O/255|0;L=255-(255*L/O|0);e[u]=O<<24|(G>>16&255)+(p[w+J.RED_BYTE_OFFSET]*L-(G>>16&255)*L)/255<<16|(G>>8&255)+(p[w+J.GREEN_BYTE_OFFSET]*L-(G>>8&255)*L)/255<<8|(255&G)+(p[w+J.BLUE_BYTE_OFFSET]*L-(255&G)*L)/255}}}},{key:"paintDab",value:function(b,f,k,l,h,e,g){b instanceof J?null==this._brushBuffer?
(this._brushBuffer=new pb(e.width,e.height,32),this._accumulatePaintFromImage(k,h,f,255)):(this._resaturateBrushWithColor(h,~~(0>=l.resat?0:Math.max(1,l.resat*l.resat*255)),16777215&g),this._paintToColorStrokeBuffer(b,h,f,e.brush,e.alpha),this._accumulatePaintFromImage(k,h,f,~~(255*l.bleed))):null==this._brushBuffer?(this._brushBuffer=new pb(e.width,e.height,16),this._accumulatePaintFromMask(k,h,f,255)):(this._resaturateBrushWithGrey(h,~~(0>=l.resat?0:Math.max(1,l.resat*l.resat*255)),255&g),this._paintToGreyscaleStrokeBuffer(b,
h,f,e.brush,e.alpha),this._accumulatePaintFromMask(k,h,f,~~(255*l.bleed)))}},{key:"endStroke",value:function(){this._brushBuffer=null}}]),c}(al),rp=function(a){function c(b,f){var k;return Ib(this,c),(k=d.call(this,b,f))._brushBuffer=null,k.wantsOutputAsInput=!0,k.noMergePhase=!0,k}gc(c,a);var d=hc(c);return Jb(c,[{key:"_sampleFromMask",value:function(b,f,k,l){var h=this._brushBuffer.data,e=f.getWidth(),g=f.getHeight(),p=this._brushBuffer.offsetOfPixel(f.left,f.top);k=b.offsetOfPixel(k.left,k.top);
var m=this._brushBuffer.width-e,n=b.width-e,r=255-l;if(255!=l){for(var u=0;u<g;u++,p+=m,k+=n)for(var w=0;w<e;w++,p++,k++){var z=b.data[k],G=h[p],L=(z*r+(255&G)*l)/255,O=(255*r+(G>>8)*l)/255<<8|L;O==G&&(z>L?O++:z<L&&O--);h[p]=O}ol(this._brushBuffer,f)}}},{key:"_paintToMask",value:function(b,f,k,l){var h=f.getWidth(),e=f.getHeight();f=this._brushBuffer.offsetOfPixel(f.left,f.top);k=b.offsetOfPixel(k.left,k.top);var g=this._brushBuffer.width-h,p=b.width-h;b=b.data;for(var m=this._brushBuffer.data,n=
0;n<e;n++,k+=p,f+=g)for(var r=0;r<h;r++,f++,k++){var u=m[f],w=255&u;0<((u>>8)*l[f]/255|0)&&(b[k]=w)}}},{key:"_sampleFromImage",value:function(b,f,k,l){var h=this._brushBuffer.data,e=f.getWidth(),g=f.getHeight(),p=this._brushBuffer.offsetOfPixel(f.left,f.top);k=b.offsetOfPixel(k.left,k.top);var m=this._brushBuffer.width-e,n=(b.width-e)*J.BYTES_PER_PIXEL,r=255-l;if(255!=l){for(var u=0;u<g;u++,p+=m,k+=n)for(var w=0;w<e;w++,p++,k+=J.BYTES_PER_PIXEL){var z=b.data[k+J.RED_BYTE_OFFSET],G=b.data[k+J.GREEN_BYTE_OFFSET],
L=b.data[k+J.BLUE_BYTE_OFFSET],O=h[p],N=(b.data[k+J.ALPHA_BYTE_OFFSET]*r+(O>>24&255)*l)/255<<24&4278190080|(z*r+(O>>16&255)*l)/255<<16&16711680|(G*r+(O>>8&255)*l)/255<<8&65280|(L*r+(255&O)*l)/255&255;if(N==O){O=(16711680&N)>>16;var ea=(65280&N)>>8,Y=255&N;z>O?N+=65536:z<O&&(N-=65536);G>ea?N+=256:G<ea&&(N-=256);L>Y?N+=1:L<Y&&--N}h[p]=N}ol(this._brushBuffer,f)}}},{key:"_paintToImage",value:function(b,f,k,l){var h=f.getWidth(),e=f.getHeight();f=this._brushBuffer.offsetOfPixel(f.left,f.top);k=b.offsetOfPixel(k.left,
k.top);var g=this._brushBuffer.width-h,p=(b.width-h)*J.BYTES_PER_PIXEL;b=b.data;for(var m=this._brushBuffer.data,n=0;n<e;n++,k+=p,f+=g)for(var r=0;r<h;r++,f++,k+=J.BYTES_PER_PIXEL){var u=m[f];0<((u>>>24)*l[f]/255|0)&&(b[k+J.RED_BYTE_OFFSET]=u>>16&255,b[k+J.GREEN_BYTE_OFFSET]=u>>8&255,b[k+J.BLUE_BYTE_OFFSET]=255&u,b[k+J.ALPHA_BYTE_OFFSET]=u>>24&255)}}},{key:"paintDab",value:function(b,f,k,l,h,e,g){b instanceof J?null==this._brushBuffer?(this._brushBuffer=new pb(e.width,e.height,32),this._sampleFromImage(k,
h,f,0)):(this._sampleFromImage(k,h,f,e.alpha),this._paintToImage(b,h,f,e.brush)):null==this._brushBuffer?(this._brushBuffer=new pb(e.width,e.height,16),this._sampleFromMask(k,h,f,0)):(this._sampleFromMask(k,h,f,e.alpha),this._paintToMask(b,h,f,e.brush))}},{key:"mergeOntoImage",value:function(b,f,k){}},{key:"mergeOntoMask",value:function(b,f,k){}},{key:"beginStroke",value:function(){this._brushBuffer=null}},{key:"endStroke",value:function(){this._brushBuffer=null}}]),c}(al);ud.prototype=Object.create(fa(Pc).prototype);
ud.prototype.constructor=ud;ud.prototype.getBounds=function(){return new Va(0,0,this.width,this.height)};ud.prototype.isPointWithin=function(a,c){return 0<=a&&0<=c&&a<this.width&&c<this.height};ud.EDITING_MODE_IMAGE=0;ud.EDITING_MODE_MASK=1;Rb.prototype.readChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos++]):(this.eof=!0,-1)};Rb.prototype.readByte=function(){return this.pos<this.end?this.data[this.pos++]:(this.eof=!0,-1)};Rb.prototype.readU8=Rb.prototype.readByte;Rb.prototype.readS8=
function(){var a;return 128&(a=this.readByte())?4294967040|a:a};Rb.prototype.unreadChar=function(a){this.pos--};Rb.prototype.peekChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos]):(this.eof=!0,-1)};Rb.prototype.readString=function(a){var c,d=Array(a);for(c=0;c<a;c++)d[c]=this.readChar();return d.join("")};Rb.prototype.readS16=function(){var a;return 32768&(a=this.readByte()<<8|this.readByte())?4294901760|a:a};Rb.prototype.readU16BE=function(){return this.readByte()<<
8|this.readByte()};Rb.prototype.readU16LE=function(){var a=this.readByte();return this.readByte()<<8|a};Rb.prototype.readU32BE=function(){return(this.readByte()<<24|this.readByte()<<16|this.readByte()<<8|this.readByte())>>>0};Rb.prototype.readU32LE=function(){var a=this.readByte(),c=this.readByte(),d=this.readByte();return(this.readByte()<<24|d<<16|c<<8|a)>>>0};Rb.prototype.readBytes=function(a){var c=this.data.subarray(this.pos,this.pos+a);return this.pos+=a,this.pos>this.end&&(this.eof=!0),c};Rb.prototype.skip=
function(a){this.pos+=a;this.pos>this.end&&(this.eof=!0)};Rb.prototype.seek=function(a){this.pos=a};Rb.prototype.writeBytes=function(a){for(var c=0;c<a.length;c++)this.data[this.pos++]=a[c]};Rb.prototype.writeByte=function(a){this.data[this.pos++]=a};Rb.prototype.writeU8=Rb.prototype.writeByte;Rb.prototype.writeU16LE=function(a){this.data[this.pos++]=a;this.data[this.pos++]=a>>8};Rb.prototype.writeU16BE=function(a){this.data[this.pos++]=a>>8;this.data[this.pos++]=a};Rb.prototype.writeU32BE=function(a){this.data[this.pos++]=
a>>24;this.data[this.pos++]=a>>16;this.data[this.pos++]=a>>8;this.data[this.pos++]=a};Rb.prototype.writeU32LE=function(a){this.data[this.pos++]=a;this.data[this.pos++]=a>>8;this.data[this.pos++]=a>>16;this.data[this.pos++]=a>>24};Rb.prototype.writeDoubleBE=function(a){a=new Uint8Array((new Float64Array([a])).buffer);for(var c=a.length-1;0<=c;c--)this.writeByte(a[c])};Rb.prototype.writeFloatBE=function(a){a=new Uint8Array((new Float32Array([a])).buffer);for(var c=a.length-1;0<=c;c--)this.writeByte(a[c])};
Rb.prototype.writeString=function(a){for(var c=0;c<a.length;c++)this.data[this.pos++]=a.charCodeAt(c)};Rb.prototype.writeUnsignedIntBE=function(a,c){switch(void 0===c&&(c=this.measureUnsignedInt(a)),c){case 5:this.writeU8(Math.floor(a/4294967296));case 4:this.writeU8(a>>24);case 3:this.writeU8(a>>16);case 2:this.writeU8(a>>8);case 1:this.writeU8(a);break;default:throw"Bad UINT size "+c;}};Rb.prototype.measureUnsignedInt=function(a){return 256>a?1:65536>a?2:16777216>a?3:4294967296>a?4:5};Rb.prototype.getAsDataArray=
function(){if(this.pos<this.data.byteLength)return this.data.subarray(0,this.pos);if(this.pos==this.data.byteLength)return this.data;throw"ArrayDataStream's pos lies beyond end of buffer";};Rb.prototype.EOF=-1;var Ti={},kb={},Ps="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;kb.assign=function(a){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if("object"!=typeof d)throw TypeError(d+"must be non-object");for(var b in d)Object.prototype.hasOwnProperty.call(d,
b)&&(a[b]=d[b])}}return a};kb.shrinkBuf=function(a,c){return a.length===c?a:a.subarray?a.subarray(0,c):(a.length=c,a)};var Qs={arraySet:function(a,c,d,b,f){if(c.subarray&&a.subarray)a.set(c.subarray(d,d+b),f);else for(var k=0;k<b;k++)a[f+k]=c[d+k]},flattenChunks:function(a){var c,d;var b=c=0;for(d=a.length;c<d;c++)b+=a[c].length;c=0;var f=new Uint8Array(b);b=0;for(d=a.length;c<d;c++){var k=a[c];f.set(k,b);b+=k.length}return f}},Rs={arraySet:function(a,c,d,b,f){for(var k=0;k<b;k++)a[f+k]=c[d+k]},flattenChunks:function(a){return[].concat.apply([],
a)}};kb.setTyped=function(a){a?(kb.Buf8=Uint8Array,kb.Buf16=Uint16Array,kb.Buf32=Int32Array,kb.assign(kb,Qs)):(kb.Buf8=Array,kb.Buf16=Array,kb.Buf32=Array,kb.assign(kb,Rs))};kb.setTyped(Ps);var Ss=kb.assign,Zg={};Ke(Zg,"Deflate",function(){return Ro},function(a){return Ro=a});Ke(Zg,"deflate",function(){return So},function(a){return So=a});Ke(Zg,"deflateRaw",function(){return To},function(a){return To=a});Ke(Zg,"gzip",function(){return Uo},function(a){return Uo=a});var Ji=[0,0,0,0,0,0,0,0,1,1,1,1,
2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],eh=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ts=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Vo=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ie=Array(576);Jf(Ie);var $g=Array(60);Jf($g);var pg=Array(512);Jf(pg);var rg=Array(256);Jf(rg);var Ki=Array(29);Jf(Ki);var fh=Array(30);Jf(fh);var Wo=!1;var vp=function(a){if(!Wo){var c,d,b=Array(16);for(c=d=0;28>d;d++){var f=0;for(Ki[d]=c;f<1<<Ji[d];f++)rg[c++]=d}rg[c-1]=d;for(d=c=0;16>d;d++)for(f=
0,fh[d]=c;f<1<<eh[d];f++)pg[c++]=d;for(c>>=7;30>d;d++)for(f=0,fh[d]=c<<7;f<1<<eh[d]-7;f++)pg[256+c++]=d;for(f=0;15>=f;f++)b[f]=0;for(f=0;143>=f;)Ie[2*f+1]=8,f++,b[8]++;for(;255>=f;)Ie[2*f+1]=9,f++,b[9]++;for(;279>=f;)Ie[2*f+1]=7,f++,b[7]++;for(;287>=f;)Ie[2*f+1]=8,f++,b[8]++;sl(Ie,287,b);for(f=0;30>f;f++)$g[2*f+1]=5,$g[2*f]=rl(f,5);bm=new Gi(Ie,Ji,257,286,15);cm=new Gi($g,eh,0,30,15);dm=new Gi([],Ts,0,19,7);Wo=!0}a.l_desc=new Hi(a.dyn_ltree,bm);a.d_desc=new Hi(a.dyn_dtree,cm);a.bl_desc=new Hi(a.bl_tree,
dm);a.bi_buf=0;a.bi_valid=0;tl(a)};var tp=function(a,c,d,b){var f,k,l=0;0<a.level?(2===a.strm.data_type&&(a.strm.data_type=function(h){var e,g=4093624447;for(e=0;31>=e;e++,g>>>=1)if(1&g&&0!==h.dyn_ltree[2*e])return 0;if(0!==h.dyn_ltree[18]||0!==h.dyn_ltree[20]||0!==h.dyn_ltree[26])return 1;for(e=32;256>e;e++)if(0!==h.dyn_ltree[2*e])return 1;return 0}(a)),Li(a,a.l_desc),Li(a,a.d_desc),l=function(h){var e;xl(h,h.dyn_ltree,h.l_desc.max_code);xl(h,h.dyn_dtree,h.d_desc.max_code);Li(h,h.bl_desc);for(e=
18;3<=e&&0===h.bl_tree[2*Vo[e]+1];e--);return h.opt_len+=3*(e+1)+14,e}(a),f=a.opt_len+3+7>>>3,(k=a.static_len+3+7>>>3)<=f&&(f=k)):f=k=d+5;d+4<=f&&-1!==c?zl(a,c,d,b):4===a.strategy||k===f?(vd(a,2+(b?1:0),3),wl(a,Ie,$g)):(vd(a,4+(b?1:0),3),function(h,e,g,p){var m;vd(h,e-257,5);vd(h,g-1,5);vd(h,p-4,4);for(m=0;m<p;m++)vd(h,h.bl_tree[2*Vo[m]+1],3);yl(h,h.dyn_ltree,e-1);yl(h,h.dyn_dtree,g-1)}(a,a.l_desc.max_code+1,a.d_desc.max_code+1,l+1),wl(a,a.dyn_ltree,a.dyn_dtree));tl(a);b&&ul(a)};var Pe=function(a,
c,d){return a.pending_buf[a.d_buf+2*a.last_lit]=c>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&c,a.pending_buf[a.l_buf+a.last_lit]=255&d,a.last_lit++,0===c?a.dyn_ltree[2*d]++:(a.matches++,c--,a.dyn_ltree[2*(rg[d]+256+1)]++,a.dyn_dtree[2*ql(c)]++),a.last_lit===a.lit_bufsize-1};var Us=function(a){vd(a,2,3);ge(a,256,Ie);16===a.bi_valid?(qg(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)};var Kf={};Kf=function(a,c,d,b){var f=
65535&a|0;a=a>>>16&65535|0;for(var k;0!==d;){k=2E3<d?2E3:d;d-=k;do a=a+(f=f+c[b++]|0)|0;while(--k);f%=65521;a%=65521}return f|a<<16|0};var Tc={},Vs=function(){for(var a,c=[],d=0;256>d;d++){a=d;for(var b=0;8>b;b++)a=1&a?3988292384^a>>>1:a>>>1;c[d]=a}return c}();Tc=function(a,c,d,b){d=b+d;for(a^=-1;b<d;b++)a=a>>>8^Vs[(a^c[b])&255];return-1^a};var jf={};jf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};
var tg=[new he(0,0,0,0,function(a,c){var d=65535;for(65535>a.pending_buf_size-5&&(d=a.pending_buf_size-5);;){if(1>=a.lookahead){if(kf(a),0===a.lookahead&&0===c)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead;a.lookahead=0;var b=a.block_start+d;if((0===a.strstart||a.strstart>=b)&&(a.lookahead=a.strstart-b,a.strstart=b,cd(a,!1),0===a.strm.avail_out)||a.strstart-a.block_start>=a.w_size-262&&(cd(a,!1),0===a.strm.avail_out))return 1}return(a.insert=0,4===c)?(cd(a,!0),0===a.strm.avail_out)?3:
4:(a.strstart>a.block_start&&(cd(a,!1),a.strm.avail_out),1)}),new he(4,4,8,4,Mi),new he(4,5,16,8,Mi),new he(4,6,32,32,Mi),new he(4,4,16,16,Lf),new he(8,16,32,32,Lf),new he(8,16,128,128,Lf),new he(8,32,128,256,Lf),new he(32,128,258,1024,Lf),new he(32,258,258,4096,Lf)];var wp=function(a,c){return a&&a.state&&2===a.state.wrap?(a.state.gzhead=c,0):-2};var Ws=function(a,c){if(!a||!a.state||5<c||0>c)return a?Me(a,-2):-2;if(b=a.state,!a.output||!a.input&&0!==a.avail_in||666===b.status&&4!==c)return Me(a,
0===a.avail_out?-5:-2);if(b.strm=a,d=b.last_flush,b.last_flush=c,42===b.status)if(2===b.wrap)a.adler=0,ic(b,31),ic(b,139),ic(b,8),b.gzhead?(ic(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),ic(b,255&b.gzhead.time),ic(b,b.gzhead.time>>8&255),ic(b,b.gzhead.time>>16&255),ic(b,b.gzhead.time>>24&255),ic(b,9===b.level?2:2<=b.strategy||2>b.level?4:0),ic(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(ic(b,255&b.gzhead.extra.length),
ic(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(a.adler=Tc(a.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(ic(b,0),ic(b,0),ic(b,0),ic(b,0),ic(b,0),ic(b,9===b.level?2:2<=b.strategy||2>b.level?4:0),ic(b,3),b.status=113);else{var d,b;var f=8+(b.w_bits-8<<4)<<8;f|=(2<=b.strategy||2>b.level?0:6>b.level?1:6===b.level?2:3)<<6;0!==b.strstart&&(f|=32);b.status=113;sg(b,f+(31-f%31));0!==b.strstart&&(sg(b,a.adler>>>16),sg(b,65535&a.adler));a.adler=1}if(69===b.status)if(b.gzhead.extra){for(f=
b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>f&&(a.adler=Tc(a.adler,b.pending_buf,b.pending-f,f)),Oe(a),f=b.pending,b.pending!==b.pending_buf_size));)ic(b,255&b.gzhead.extra[b.gzindex]),b.gzindex++;b.gzhead.hcrc&&b.pending>f&&(a.adler=Tc(a.adler,b.pending_buf,b.pending-f,f));b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(73===b.status)if(b.gzhead.name){f=b.pending;do{if(b.pending===b.pending_buf_size&&
(b.gzhead.hcrc&&b.pending>f&&(a.adler=Tc(a.adler,b.pending_buf,b.pending-f,f)),Oe(a),f=b.pending,b.pending===b.pending_buf_size)){var k=1;break}k=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0;ic(b,k)}while(0!==k);b.gzhead.hcrc&&b.pending>f&&(a.adler=Tc(a.adler,b.pending_buf,b.pending-f,f));0===k&&(b.gzindex=0,b.status=91)}else b.status=91;if(91===b.status)if(b.gzhead.comment){f=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>f&&(a.adler=Tc(a.adler,
b.pending_buf,b.pending-f,f)),Oe(a),f=b.pending,b.pending===b.pending_buf_size)){k=1;break}k=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0;ic(b,k)}while(0!==k);b.gzhead.hcrc&&b.pending>f&&(a.adler=Tc(a.adler,b.pending_buf,b.pending-f,f));0===k&&(b.status=103)}else b.status=103;if(103===b.status&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&Oe(a),b.pending+2<=b.pending_buf_size&&(ic(b,255&a.adler),ic(b,a.adler>>8&255),a.adler=0,b.status=113)):b.status=113),0!==
b.pending){if(Oe(a),0===a.avail_out)return b.last_flush=-1,0}else if(0===a.avail_in&&(c<<1)-(4<c?9:0)<=(d<<1)-(4<d?9:0)&&4!==c)return Me(a,-5);if(666===b.status&&0!==a.avail_in)return Me(a,-5);if(0!==a.avail_in||0!==b.lookahead||0!==c&&666!==b.status){d=2===b.strategy?function(l,h){for(var e;;){if(0===l.lookahead&&(kf(l),0===l.lookahead)){if(0===h)return 1;break}if(l.match_length=0,e=Pe(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++,e&&(cd(l,!1),0===l.strm.avail_out))return 1}return(l.insert=
0,4===h)?(cd(l,!0),0===l.strm.avail_out)?3:4:l.last_lit&&(cd(l,!1),0===l.strm.avail_out)?1:2}(b,c):3===b.strategy?function(l,h){for(var e,g,p,m,n=l.window;;){if(258>=l.lookahead){if(kf(l),258>=l.lookahead&&0===h)return 1;if(0===l.lookahead)break}if(l.match_length=0,3<=l.lookahead&&0<l.strstart&&(g=n[p=l.strstart-1])===n[++p]&&g===n[++p]&&g===n[++p]){for(m=l.strstart+258;g===n[++p]&&g===n[++p]&&g===n[++p]&&g===n[++p]&&g===n[++p]&&g===n[++p]&&g===n[++p]&&g===n[++p]&&p<m;);l.match_length=258-(m-p);l.match_length>
l.lookahead&&(l.match_length=l.lookahead)}if(3<=l.match_length?(e=Pe(l,1,l.match_length-3),l.lookahead-=l.match_length,l.strstart+=l.match_length,l.match_length=0):(e=Pe(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++),e&&(cd(l,!1),0===l.strm.avail_out))return 1}return(l.insert=0,4===h)?(cd(l,!0),0===l.strm.avail_out)?3:4:l.last_lit&&(cd(l,!1),0===l.strm.avail_out)?1:2}(b,c):tg[b.level].func(b,c);if((3===d||4===d)&&(b.status=666),1===d||3===d)return 0===a.avail_out&&(b.last_flush=-1),0;if(2===
d&&(1===c?Us(b):5!==c&&(zl(b,0,0,!1),3===c&&(Ne(b.head),0===b.lookahead&&(b.strstart=0,b.block_start=0,b.insert=0))),Oe(a),0===a.avail_out))return b.last_flush=-1,0}return 4!==c?0:0>=b.wrap?1:(2===b.wrap?(ic(b,255&a.adler),ic(b,a.adler>>8&255),ic(b,a.adler>>16&255),ic(b,a.adler>>24&255),ic(b,255&a.total_in),ic(b,a.total_in>>8&255),ic(b,a.total_in>>16&255),ic(b,a.total_in>>24&255)):(sg(b,a.adler>>>16),sg(b,65535&a.adler)),Oe(a),0<b.wrap&&(b.wrap=-b.wrap),0!==b.pending?0:1)};var Xs=function(a){var c;
return a&&a.state?42!==(c=a.state.status)&&69!==c&&73!==c&&91!==c&&103!==c&&113!==c&&666!==c?Me(a,-2):(a.state=null,113===c?Me(a,-3):0):-2};var xp=function(a,c){var d,b,f;var k=c.length;if(!a||!a.state||2===(b=(d=a.state).wrap)||1===b&&42!==d.status||d.lookahead)return-2;1===b&&(a.adler=Kf(a.adler,c,k,0));d.wrap=0;k>=d.w_size&&(0===b&&(Ne(d.head),d.strstart=0,d.block_start=0,d.insert=0),f=new kb.Buf8(d.w_size),kb.arraySet(f,c,k-d.w_size,d.w_size,0),c=f,k=d.w_size);f=a.avail_in;var l=a.next_in;var h=
a.input;a.avail_in=k;a.next_in=0;a.input=c;for(kf(d);3<=d.lookahead;){c=d.strstart;k=d.lookahead-2;do d.ins_h=(d.ins_h<<d.hash_shift^d.window[c+3-1])&d.hash_mask,d.prev[c&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=c,c++;while(--k);d.strstart=c;d.lookahead=2;kf(d)}return d.strstart+=d.lookahead,d.block_start=d.strstart,d.insert=d.lookahead,d.lookahead=0,d.match_length=d.prev_length=2,d.match_available=0,a.next_in=l,a.input=h,a.avail_in=f,d.wrap=b,0};var Dl=!0,Cl=!0;try{String.fromCharCode.apply(null,
[0])}catch(a){Dl=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){Cl=!1}for(var ah=new kb.Buf8(256),gf=0;256>gf;gf++)ah[gf]=252<=gf?6:248<=gf?5:240<=gf?4:224<=gf?3:192<=gf?2:1;ah[254]=ah[254]=1;var Oi=function(a){var c,d,b,f=a.length,k=0;for(b=0;b<f;b++)55296==(64512&(c=a.charCodeAt(b)))&&b+1<f&&56320==(64512&(d=a.charCodeAt(b+1)))&&(c=65536+(c-55296<<10)+(d-56320),b++),k+=128>c?1:2048>c?2:65536>c?3:4;var l=0;var h=new kb.Buf8(k);for(b=0;l<k;b++)55296==(64512&(c=a.charCodeAt(b)))&&
b+1<f&&56320==(64512&(d=a.charCodeAt(b+1)))&&(c=65536+(c-55296<<10)+(d-56320),b++),128>c?h[l++]=c:(2048>c?h[l++]=192|c>>>6:(65536>c?h[l++]=224|c>>>12:(h[l++]=240|c>>>18,h[l++]=128|c>>>12&63),h[l++]=128|c>>>6&63),h[l++]=128|63&c);return h};var Ys=function(a){return Bl(a,a.length)};var Zs=function(a){for(var c=new kb.Buf8(a.length),d=0,b=c.length;d<b;d++)c[d]=a.charCodeAt(d);return c};var $s=function(a,c){var d,b,f,k=c||a.length,l=Array(2*k);for(c=d=0;c<k;)if(128>(b=a[c++]))l[d++]=b;else if(4<(f=ah[b]))l[d++]=
65533,c+=f-1;else{for(b&=2===f?31:3===f?15:7;1<f&&c<k;)b=b<<6|63&a[c++],f--;1<f?l[d++]=65533:65536>b?l[d++]=b:(b-=65536,l[d++]=55296|b>>10&1023,l[d++]=56320|1023&b)}return Bl(l,d)};var at=function(a,c){var d;(c=c||a.length)>a.length&&(c=a.length);for(d=c-1;0<=d&&128==(192&a[d]);)d--;return 0>d||0===d?c:d+ah[a[d]]>c?d:c};var Ni={};Ni=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=
2;this.adler=0};var El=Object.prototype.toString;lf.prototype.push=function(a,c){var d,b=this.strm,f=this.options.chunkSize;if(this.ended)return!1;c=c===~~c?c:!0===c?4:0;"string"==typeof a?b.input=Oi(a):"[object ArrayBuffer]"===El.call(a)?b.input=new Uint8Array(a):b.input=a;b.next_in=0;b.avail_in=b.input.length;do{if(0===b.avail_out&&(b.output=new kb.Buf8(f),b.next_out=0,b.avail_out=f),1!==(d=Ws(b,c))&&0!==d)return this.onEnd(d),this.ended=!0,!1;(0===b.avail_out||0===b.avail_in&&(4===c||2===c))&&
("string"===this.options.to?this.onData(Ys(kb.shrinkBuf(b.output,b.next_out))):this.onData(kb.shrinkBuf(b.output,b.next_out)))}while((0<b.avail_in||0===b.avail_out)&&1!==d);return 4===c?(d=Xs(this.strm),this.onEnd(d),this.ended=!0,0===d):(2===c&&(this.onEnd(0),b.avail_out=0),!0)};lf.prototype.onData=function(a){this.chunks.push(a)};lf.prototype.onEnd=function(a){0===a&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=kb.flattenChunks(this.chunks));this.chunks=[];this.err=a;
this.msg=this.strm.msg};var Ro=lf;var So=Pi;var To=function(a,c){return(c=c||{}).raw=!0,Pi(a,c)};var Uo=function(a,c){return(c=c||{}).gzip=!0,Pi(a,c)};var bh={};Ke(bh,"Inflate",function(){return Xo},function(a){return Xo=a});Ke(bh,"inflate",function(){return Yo},function(a){return Yo=a});Ke(bh,"inflateRaw",function(){return Zo},function(a){return Zo=a});Ke(bh,"ungzip",function(){return $o},function(a){return $o=a});var ap={};ap=function(a,c){var d,b,f,k;var l=a.state;var h=a.next_in;var e=a.input;
var g=h+(a.avail_in-5);var p=a.next_out;var m=a.output;c=p-(c-a.avail_out);var n=p+(a.avail_out-257);var r=l.dmax;var u=l.wsize;var w=l.whave;var z=l.wnext;var G=l.window;var L=l.hold;var O=l.bits;var N=l.lencode;var ea=l.distcode;var Y=(1<<l.lenbits)-1;var ka=(1<<l.distbits)-1;a:do for(15>O&&(L+=e[h++]<<O,O+=8,L+=e[h++]<<O,O+=8),d=N[L&Y];;){if(L>>>=b=d>>>24,O-=b,0==(b=d>>>16&255))m[p++]=65535&d;else if(16&b){var ha=65535&d;(b&=15)&&(O<b&&(L+=e[h++]<<O,O+=8),ha+=L&(1<<b)-1,L>>>=b,O-=b);15>O&&(L+=
e[h++]<<O,O+=8,L+=e[h++]<<O,O+=8);for(d=ea[L&ka];;){if(L>>>=b=d>>>24,O-=b,16&(b=d>>>16&255)){if(f=65535&d,O<(b&=15)&&(L+=e[h++]<<O,(O+=8)<b&&(L+=e[h++]<<O,O+=8)),(f+=L&(1<<b)-1)>r){a.msg="invalid distance too far back";l.mode=30;break a}if(L>>>=b,O-=b,f>(b=p-c)){if((b=f-b)>w&&l.sane){a.msg="invalid distance too far back";l.mode=30;break a}if(d=0,k=G,0===z){if(d+=u-b,b<ha){ha-=b;do m[p++]=G[d++];while(--b);d=p-f;k=m}}else if(z<b){if(d+=u+z-b,(b-=z)<ha){ha-=b;do m[p++]=G[d++];while(--b);if(d=0,z<ha){ha-=
b=z;do m[p++]=G[d++];while(--b);d=p-f;k=m}}}else if(d+=z-b,b<ha){ha-=b;do m[p++]=G[d++];while(--b);d=p-f;k=m}for(;2<ha;)m[p++]=k[d++],m[p++]=k[d++],m[p++]=k[d++],ha-=3;ha&&(m[p++]=k[d++],1<ha&&(m[p++]=k[d++]))}else{d=p-f;do m[p++]=m[d++],m[p++]=m[d++],m[p++]=m[d++],ha-=3;while(2<ha);ha&&(m[p++]=m[d++],1<ha&&(m[p++]=m[d++]))}}else if(0==(64&b)){d=ea[(65535&d)+(L&(1<<b)-1)];continue}else{a.msg="invalid distance code";l.mode=30;break a}break}}else if(0==(64&b)){d=N[(65535&d)+(L&(1<<b)-1)];continue}else{32&
b?l.mode=12:(a.msg="invalid literal/length code",l.mode=30);break a}break}while(h<g&&p<n);h-=ha=O>>3;O-=ha<<3;a.next_in=h;a.next_out=p;a.avail_in=h<g?5+(g-h):5-(h-g);a.avail_out=p<n?257+(n-p):257-(p-n);l.hold=L&(1<<O)-1;l.bits=O};var ng={},bt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ct=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,
1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],et=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];ng=function(a,c,d,b,f,k,l,h){var e,g,p,m,n,r,u=h.bits,w,z,G,L,O,N=0,ea,Y=null,ka=0,ha=new kb.Buf16(16);var qa=new kb.Buf16(16);var Da=null,La=0;for(w=0;15>=w;w++)ha[w]=0;for(z=0;z<b;z++)ha[c[d+z]]++;var Ka=15;for(G=u;1<=Ka&&0===ha[Ka];Ka--);if(G>Ka&&(G=Ka),0===Ka)return f[k++]=20971520,f[k++]=20971520,h.bits=1,0;for(u=1;u<Ka&&0===ha[u];u++);G<u&&
(G=u);for(w=e=1;15>=w;w++)if(e<<=1,0>(e-=ha[w]))return-1;if(0<e&&(0===a||1!==Ka))return-1;w=1;for(qa[1]=0;15>w;w++)qa[w+1]=qa[w]+ha[w];for(z=0;z<b;z++)0!==c[d+z]&&(l[qa[c[d+z]]++]=z);if(0===a?(Y=Da=l,m=19):1===a?(Y=bt,ka-=257,Da=ct,La-=257,m=256):(Y=dt,Da=et,m=-1),ea=0,z=0,w=u,qa=k,L=G,O=0,p=-1,b=(N=1<<G)-1,1===a&&852<N||2===a&&592<N)return 1;for(;;){var V=w-O;l[z]<m?(n=0,r=l[z]):l[z]>m?(n=Da[La+l[z]],r=Y[ka+l[z]]):(n=96,r=0);e=1<<w-O;u=g=1<<L;do f[qa+(ea>>O)+(g-=e)]=V<<24|n<<16|r|0;while(0!==g);
for(e=1<<w-1;ea&e;)e>>=1;if(0!==e?(ea&=e-1,ea+=e):ea=0,z++,0==--ha[w]){if(w===Ka)break;w=c[d+l[z]]}if(w>G&&(ea&b)!==p){0===O&&(O=G);qa+=u;for(e=1<<(L=w-O);L+O<Ka&&!(0>=(e-=ha[L+O]));)L++,e<<=1;if(N+=1<<L,1===a&&852<N||2===a&&592<N)return 1;f[p=ea&b]=G<<24|L<<16|qa-k|0}}return 0!==ea&&(f[qa+ea]=w-O<<24|4194304),h.bits=G,0};var bp=!0;var ft=function(a,c){var d,b,f,k,l,h,e,g,p=0,m=new kb.Buf8(4),n=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;
12===(d=a.state).mode&&(d.mode=13);var r=a.next_out;var u=a.output;var w=a.avail_out;var z=a.next_in;var G=a.input;var L=a.avail_in;var O=d.hold;var N=d.bits;var ea=L;var Y=w;var ka=0;a:for(;;)switch(d.mode){case 1:if(0===d.wrap){d.mode=13;break}for(;16>N;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}if(2&d.wrap&&35615===O){d.check=0;m[0]=255&O;m[1]=O>>>8&255;d.check=Tc(d.check,m,2,0);N=O=0;d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&O)<<8)+(O>>8))%31){a.msg="incorrect header check";
d.mode=30;break}if(8!=(15&O)){a.msg="unknown compression method";d.mode=30;break}if(O>>>=4,N-=4,e=(15&O)+8,0===d.wbits)d.wbits=e;else if(e>d.wbits){a.msg="invalid window size";d.mode=30;break}d.dmax=1<<e;a.adler=d.check=1;d.mode=512&O?10:12;N=O=0;break;case 2:for(;16>N;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}if(d.flags=O,8!=(255&d.flags)){a.msg="unknown compression method";d.mode=30;break}if(57344&d.flags){a.msg="unknown header flags set";d.mode=30;break}d.head&&(d.head.text=O>>8&1);512&d.flags&&
(m[0]=255&O,m[1]=O>>>8&255,d.check=Tc(d.check,m,2,0));N=O=0;d.mode=3;case 3:for(;32>N;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}d.head&&(d.head.time=O);512&d.flags&&(m[0]=255&O,m[1]=O>>>8&255,m[2]=O>>>16&255,m[3]=O>>>24&255,d.check=Tc(d.check,m,4,0));N=O=0;d.mode=4;case 4:for(;16>N;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}d.head&&(d.head.xflags=255&O,d.head.os=O>>8);512&d.flags&&(m[0]=255&O,m[1]=O>>>8&255,d.check=Tc(d.check,m,2,0));N=O=0;d.mode=5;case 5:if(1024&d.flags){for(;16>N;){if(0===L)break a;
L--;O+=G[z++]<<N;N+=8}d.length=O;d.head&&(d.head.extra_len=O);512&d.flags&&(m[0]=255&O,m[1]=O>>>8&255,d.check=Tc(d.check,m,2,0));N=O=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&((b=d.length)>L&&(b=L),b&&(d.head&&(e=d.head.extra_len-d.length,d.head.extra||(d.head.extra=Array(d.head.extra_len)),kb.arraySet(d.head.extra,G,z,b,e)),512&d.flags&&(d.check=Tc(d.check,G,b,z)),L-=b,z+=b,d.length-=b),d.length))break a;d.length=0;d.mode=7;case 7:if(2048&d.flags){if(0===L)break a;b=0;do e=
G[z+b++],d.head&&e&&65536>d.length&&(d.head.name+=String.fromCharCode(e));while(e&&b<L);if(512&d.flags&&(d.check=Tc(d.check,G,b,z)),L-=b,z+=b,e)break a}else d.head&&(d.head.name=null);d.length=0;d.mode=8;case 8:if(4096&d.flags){if(0===L)break a;b=0;do e=G[z+b++],d.head&&e&&65536>d.length&&(d.head.comment+=String.fromCharCode(e));while(e&&b<L);if(512&d.flags&&(d.check=Tc(d.check,G,b,z)),L-=b,z+=b,e)break a}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;16>N;){if(0===L)break a;
L--;O+=G[z++]<<N;N+=8}if(O!==(65535&d.check)){a.msg="header crc mismatch";d.mode=30;break}N=O=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0);a.adler=d.check=0;d.mode=12;break;case 10:for(;32>N;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}a.adler=d.check=Fl(O);N=O=0;d.mode=11;case 11:if(0===d.havedict)return a.next_out=r,a.avail_out=w,a.next_in=z,a.avail_in=L,d.hold=O,d.bits=N,2;a.adler=d.check=1;d.mode=12;case 12:if(5===c||6===c)break a;case 13:if(d.last){O>>>=7&N;N-=7&N;d.mode=27;break}for(;3>N;){if(0===
L)break a;L--;O+=G[z++]<<N;N+=8}switch(d.last=1&O,--N,3&(O>>>=1)){case 0:d.mode=14;break;case 1:var ha=d;if(bp){dj=new kb.Buf32(512);ej=new kb.Buf32(32);for(k=0;144>k;)ha.lens[k++]=8;for(;256>k;)ha.lens[k++]=9;for(;280>k;)ha.lens[k++]=7;for(;288>k;)ha.lens[k++]=8;ng(1,ha.lens,0,288,dj,0,ha.work,{bits:9});for(k=0;32>k;)ha.lens[k++]=5;ng(2,ha.lens,0,32,ej,0,ha.work,{bits:5});bp=!1}ha.lencode=dj;ha.lenbits=9;ha.distcode=ej;ha.distbits=5;if(d.mode=20,6===c){O>>>=2;N-=2;break a}break;case 2:d.mode=17;
break;case 3:a.msg="invalid block type",d.mode=30}O>>>=2;N-=2;break;case 14:O>>>=7&N;for(N-=7&N;32>N;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}if((65535&O)!=(O>>>16^65535)){a.msg="invalid stored block lengths";d.mode=30;break}if(d.length=65535&O,O=0,N=0,d.mode=15,6===c)break a;case 15:d.mode=16;case 16:if(b=d.length){if(b>L&&(b=L),b>w&&(b=w),0===b)break a;kb.arraySet(u,G,z,b,r);L-=b;z+=b;w-=b;r+=b;d.length-=b;break}d.mode=12;break;case 17:for(;14>N;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}if(d.nlen=
(31&O)+257,O>>>=5,N-=5,d.ndist=(31&O)+1,O>>>=5,N-=5,d.ncode=(15&O)+4,O>>>=4,N-=4,286<d.nlen||30<d.ndist){a.msg="too many length or distance symbols";d.mode=30;break}d.have=0;d.mode=18;case 18:for(;d.have<d.ncode;){for(;3>N;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}d.lens[n[d.have++]]=7&O;O>>>=3;N-=3}for(;19>d.have;)d.lens[n[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,g={bits:d.lenbits},ka=ng(0,d.lens,0,19,d.lencode,0,d.work,g),d.lenbits=g.bits,ka){a.msg="invalid code lengths set";d.mode=30;break}d.have=
0;d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;l=(p=d.lencode[O&(1<<d.lenbits)-1])>>>24,ha=65535&p,!(l<=N);){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}if(16>ha)O>>>=l,N-=l,d.lens[d.have++]=ha;else{if(16===ha){for(k=l+2;N<k;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}if(O>>>=l,N-=l,0===d.have){a.msg="invalid bit length repeat";d.mode=30;break}e=d.lens[d.have-1];b=3+(3&O);O>>>=2;N-=2}else if(17===ha){for(k=l+3;N<k;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}O>>>=l;N-=l;e=0;b=3+(7&O);O>>>=3;N-=3}else{for(k=
l+7;N<k;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}O>>>=l;N-=l;e=0;b=11+(127&O);O>>>=7;N-=7}if(d.have+b>d.nlen+d.ndist){a.msg="invalid bit length repeat";d.mode=30;break}for(;b--;)d.lens[d.have++]=e}}if(30===d.mode)break;if(0===d.lens[256]){a.msg="invalid code -- missing end-of-block";d.mode=30;break}if(d.lenbits=9,g={bits:d.lenbits},ka=ng(1,d.lens,0,d.nlen,d.lencode,0,d.work,g),d.lenbits=g.bits,ka){a.msg="invalid literal/lengths set";d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,g={bits:d.distbits},
ka=ng(2,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,g),d.distbits=g.bits,ka){a.msg="invalid distances set";d.mode=30;break}if(d.mode=20,6===c)break a;case 20:d.mode=21;case 21:if(6<=L&&258<=w){a.next_out=r;a.avail_out=w;a.next_in=z;a.avail_in=L;d.hold=O;d.bits=N;ap(a,Y);r=a.next_out;u=a.output;w=a.avail_out;z=a.next_in;G=a.input;L=a.avail_in;O=d.hold;N=d.bits;12===d.mode&&(d.back=-1);break}for(d.back=0;l=(p=d.lencode[O&(1<<d.lenbits)-1])>>>24,k=p>>>16&255,ha=65535&p,!(l<=N);){if(0===L)break a;L--;O+=
G[z++]<<N;N+=8}if(k&&0==(240&k)){var qa=l;var Da=k;for(h=ha;l=(p=d.lencode[h+((O&(1<<qa+Da)-1)>>qa)])>>>24,k=p>>>16&255,ha=65535&p,!(qa+l<=N);){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}O>>>=qa;N-=qa;d.back+=qa}if(O>>>=l,N-=l,d.back+=l,d.length=ha,0===k){d.mode=26;break}if(32&k){d.back=-1;d.mode=12;break}if(64&k){a.msg="invalid literal/length code";d.mode=30;break}d.extra=15&k;d.mode=22;case 22:if(d.extra){for(k=d.extra;N<k;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}d.length+=O&(1<<d.extra)-1;O>>>=d.extra;
N-=d.extra;d.back+=d.extra}d.was=d.length;d.mode=23;case 23:for(;l=(p=d.distcode[O&(1<<d.distbits)-1])>>>24,k=p>>>16&255,ha=65535&p,!(l<=N);){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}if(0==(240&k)){qa=l;Da=k;for(h=ha;l=(p=d.distcode[h+((O&(1<<qa+Da)-1)>>qa)])>>>24,k=p>>>16&255,ha=65535&p,!(qa+l<=N);){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}O>>>=qa;N-=qa;d.back+=qa}if(O>>>=l,N-=l,d.back+=l,64&k){a.msg="invalid distance code";d.mode=30;break}d.offset=ha;d.extra=15&k;d.mode=24;case 24:if(d.extra){for(k=
d.extra;N<k;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}d.offset+=O&(1<<d.extra)-1;O>>>=d.extra;N-=d.extra;d.back+=d.extra}if(d.offset>d.dmax){a.msg="invalid distance too far back";d.mode=30;break}d.mode=25;case 25:if(0===w)break a;if(b=Y-w,d.offset>b){if((b=d.offset-b)>d.whave&&d.sane){a.msg="invalid distance too far back";d.mode=30;break}b>d.wnext?(b-=d.wnext,f=d.wsize-b):f=d.wnext-b;b>d.length&&(b=d.length);k=d.window}else k=u,f=r-d.offset,b=d.length;b>w&&(b=w);w-=b;d.length-=b;do u[r++]=k[f++];while(--b);
0===d.length&&(d.mode=21);break;case 26:if(0===w)break a;u[r++]=d.length;w--;d.mode=21;break;case 27:if(d.wrap){for(;32>N;){if(0===L)break a;L--;O|=G[z++]<<N;N+=8}if(Y-=w,a.total_out+=Y,d.total+=Y,Y&&(a.adler=d.check=d.flags?Tc(d.check,u,Y,r-Y):Kf(d.check,u,Y,r-Y)),Y=w,(d.flags?O:Fl(O))!==d.check){a.msg="incorrect data check";d.mode=30;break}N=O=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;32>N;){if(0===L)break a;L--;O+=G[z++]<<N;N+=8}if(O!==(4294967295&d.total)){a.msg="incorrect length check";d.mode=
30;break}N=O=0}d.mode=29;case 29:ka=1;break a;case 30:ka=-3;break a;case 31:return-4;default:return-2}return(a.next_out=r,a.avail_out=w,a.next_in=z,a.avail_in=L,d.hold=O,d.bits=N,(d.wsize||Y!==a.avail_out&&30>d.mode&&(27>d.mode||4!==c))&&Gl(a,a.output,a.next_out,Y-a.avail_out))?(d.mode=31,-4):(ea-=a.avail_in,Y-=a.avail_out,a.total_in+=ea,a.total_out+=Y,d.total+=Y,d.wrap&&Y&&(a.adler=d.check=d.flags?Tc(d.check,u,Y,a.next_out-Y):Kf(d.check,u,Y,a.next_out-Y)),a.data_type=d.bits+(d.last?64:0)+(12===d.mode?
128:0)+(20===d.mode||15===d.mode?256:0),(0===ea&&0===Y||4===c)&&0===ka&&(ka=-5),ka)};var gt=function(a){if(!a||!a.state)return-2;var c=a.state;return c.window&&(c.window=null),a.state=null,0};var zp=function(a,c){var d;return a&&a.state&&0!=(2&(d=a.state).wrap)?(d.head=c,c.done=!1,0):-2};var Jl=function(a,c){var d,b=c.length;return a&&a.state&&(0===(d=a.state).wrap||11===d.mode)?11===d.mode&&Kf(1,c,b,0)!==d.check?-3:Gl(a,c,b,b)?(d.mode=31,-4):(d.havedict=1,0):-2};var Gc={};Gc={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,
Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var Hl={};Hl=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1};
var Il=Object.prototype.toString;mf.prototype.push=function(a,c){var d,b,f,k,l=this.strm,h=this.options.chunkSize,e=this.options.dictionary,g=!1;if(this.ended)return!1;c=c===~~c?c:!0===c?Gc.Z_FINISH:Gc.Z_NO_FLUSH;"string"==typeof a?l.input=Zs(a):"[object ArrayBuffer]"===Il.call(a)?l.input=new Uint8Array(a):l.input=a;l.next_in=0;l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new kb.Buf8(h),l.next_out=0,l.avail_out=h),(d=ft(l,Gc.Z_NO_FLUSH))===Gc.Z_NEED_DICT&&e&&(d=Jl(this.strm,e)),d===
Gc.Z_BUF_ERROR&&!0===g&&(d=Gc.Z_OK,g=!1),d!==Gc.Z_STREAM_END&&d!==Gc.Z_OK)return this.onEnd(d),this.ended=!0,!1;l.next_out&&(0===l.avail_out||d===Gc.Z_STREAM_END||0===l.avail_in&&(c===Gc.Z_FINISH||c===Gc.Z_SYNC_FLUSH))&&("string"===this.options.to?(b=at(l.output,l.next_out),f=l.next_out-b,k=$s(l.output,b),l.next_out=f,l.avail_out=h-f,f&&kb.arraySet(l.output,l.output,b,f,0),this.onData(k)):this.onData(kb.shrinkBuf(l.output,l.next_out)));0===l.avail_in&&0===l.avail_out&&(g=!0)}while((0<l.avail_in||
0===l.avail_out)&&d!==Gc.Z_STREAM_END);return(d===Gc.Z_STREAM_END&&(c=Gc.Z_FINISH),c===Gc.Z_FINISH)?(d=gt(this.strm),this.onEnd(d),this.ended=!0,d===Gc.Z_OK):(c===Gc.Z_SYNC_FLUSH&&(this.onEnd(Gc.Z_OK),l.avail_out=0),!0)};mf.prototype.onData=function(a){this.chunks.push(a)};mf.prototype.onEnd=function(a){a===Gc.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=kb.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var Xo=mf;var Yo=Qi;var Zo=function(a,
c){return(c=c||{}).raw=!0,Qi(a,c)};var $o=Qi;var cp={};Ss(cp,Zg,bh,Gc);Ti=cp;Ri.FIXED_HEADER_LENGTH=16;gh.HEADER_LENGTH=8;var dp=function(){function a(c,d,b){Ib(this,a);this.chunkHeader=c;this.width=d;this.height=b;this.nameLength=this.skipBytes=this.payloadOffset=this.state=0;this.done=!1;this.maskDecoder=this.colorDecoder=null}return Jb(a,[{key:"readFixedHeader",value:function(c){this.payloadOffset=c.readU32BE();this.blendMode=c.readU32BE();this.alpha=c.readU32BE();var d=c.readU32BE();this.visible=
0!=(1&d);this.clip=0!=(2&d);this.hasMask=0!=(4&d);this.maskLinked=0!=(8&d);this.maskVisible=0!=(16&d);this.expanded=0!=(32&d);this.lockAlpha=0!=(64&d);this.blendMode===W.LM_MULTIPLY&&0!=(128&d)&&(this.blendMode=W.LM_MULTIPLY2);this.nameLength=c.readU32BE()}},{key:"getFixedHeaderLen",value:function(){return 20}},{key:"getVariableHeaderLen",value:function(){return this.nameLength}},{key:"readVariableSizeHeader",value:function(c){this.name=c.readString(this.nameLength)}},{key:"decode",value:function(c){for(var d;;){if(0<
this.skipBytes){if(this.skipBytes>=c.length)return this.skipBytes-=c.length,null;c=c.subarray(this.skipBytes);this.skipBytes=0}switch(this.state){case 0:if(c.length<this.getFixedHeaderLen())break;d=new Rb(c);this.readFixedHeader(d);c=c.subarray(d.pos);this.state=1;continue;case 1:if(c.length<this.getVariableHeaderLen())break;d=new Rb(c);this.readVariableSizeHeader(d);this.layer=this.createLayer();this.hasMask&&(this.layer.setMask(new pb(this.width,this.height,8)),this.maskDecoder=new ht(this.layer.mask));
this.layer instanceof Ya&&(this.colorDecoder=new it(this.layer.image));this.skipBytes=this.payloadOffset-this.getFixedHeaderLen();this.colorDecoder?this.state=3:this.maskDecoder?this.state=4:this.state=5;continue;case 3:if(c=this.colorDecoder.decode(c),this.colorDecoder.done){this.maskDecoder?this.state=4:this.state=5;continue}break;case 4:if(c=this.maskDecoder.decode(c),this.maskDecoder.done){this.state=5;continue}break;case 5:d=this.payloadOffset;this.colorDecoder&&(d+=this.colorDecoder.bytesTotal);
this.maskDecoder&&(d+=this.maskDecoder.bytesTotal);this.state=6;this.skipBytes=this.chunkHeader.chunkSize-d;continue;case 6:this.done=!0}break}return c}}]),a}(),Ap=function(a){function c(){return Ib(this,c),d.apply(this,arguments)}gc(c,a);var d=hc(c);return Jb(c,[{key:"createLayer",value:function(){var b=new Ya(this.width,this.height,this.name);return b.setBlendMode(this.blendMode),b.setAlpha(this.alpha),b.setVisible(this.visible),b.setClip(this.clip),b.setMaskLinked(this.maskLinked),b.setMaskVisible(this.maskVisible),
b.setLockAlpha(this.lockAlpha),b}}]),c}(dp),Bp=function(a){function c(b,f,k){var l;return Ib(this,c),(l=d.call(this,b,f,k)).childLayers=0,l}gc(c,a);var d=hc(c);return Jb(c,[{key:"readFixedHeader",value:function(b){hd(Sc(c.prototype),"readFixedHeader",this).call(this,b);this.childLayers=b.readU32BE()}},{key:"getFixedHeaderLen",value:function(){return hd(Sc(c.prototype),"getFixedHeaderLen",this).call(this)+4}},{key:"createLayer",value:function(){var b=new Kb(this.name,this.blendMode);return b.setAlpha(this.alpha),
b.setVisible(this.visible),b.setExpanded(this.expanded),b.setMaskLinked(this.maskLinked),b.setMaskVisible(this.maskVisible),b}}]),c}(dp),it=function(){function a(c){Ib(this,a);this.bytesRead=0;this.bytesTotal=c.width*c.height*J.BYTES_PER_PIXEL;this.output=c.data;this.done=!1}return Jb(a,[{key:"decode",value:function(c){if(null==c)return null;for(var d=this.bytesRead%J.BYTES_PER_PIXEL,b=this.bytesRead-d,f=0,k=[J.ALPHA_BYTE_OFFSET,J.RED_BYTE_OFFSET,J.GREEN_BYTE_OFFSET,J.BLUE_BYTE_OFFSET];d<J.BYTES_PER_PIXEL&&
f<c.length;d++)this.output[b+k[d]]=c[f],f++;this.bytesRead+=f;var l=0|Math.min(c.length-f,this.bytesTotal-this.bytesRead);d=l/J.BYTES_PER_PIXEL|0;l%=J.BYTES_PER_PIXEL;for(b=0;b<d;b++)this.output[this.bytesRead+J.ALPHA_BYTE_OFFSET]=c[f],this.output[this.bytesRead+J.RED_BYTE_OFFSET]=c[f+1],this.output[this.bytesRead+J.GREEN_BYTE_OFFSET]=c[f+2],this.output[this.bytesRead+J.BLUE_BYTE_OFFSET]=c[f+3],this.bytesRead+=J.BYTES_PER_PIXEL,f+=J.BYTES_PER_PIXEL;d=0;for(b=this.bytesRead;d<l;d++)this.output[b+k[d]]=
c[f],f++;return(this.bytesRead+=l,this.bytesRead>=this.bytesTotal&&(this.done=!0),f<c.length)?c.subarray(f):null}}]),a}(),ht=function(){function a(c){Ib(this,a);this.bytesRead=0;this.bytesTotal=c.width*c.height;this.output=c.data;this.done=!1}return Jb(a,[{key:"decode",value:function(c){if(null==c)return null;var d,b=0|Math.min(c.length,this.bytesTotal-this.bytesRead),f=this.bytesRead;for(d=0;d<b;d++,f++)this.output[f]=c[d];return(this.bytesRead=f,this.bytesRead>=this.bytesTotal&&(this.done=!0),d<
c.length)?c.subarray(d):null}}]),a}();Mf.prototype.read=function(a){if(null==a)return null;var c=new Rb(new Uint8Array(a)),d=[];if(1!=c.readU16BE())return null;a=c.readU16BE();for(var b=0;b<a;b++)if(0==c.readU16BE()){var f=255*c.readU16BE()/65535,k=255*c.readU16BE()/65535,l=255*c.readU16BE()/65535;c.readU16BE();d.push(f<<16|k<<8|l)}return d};Mf.prototype.write=function(a){var c=new Rb(new Uint8Array(4+10*a.length));c.writeU16BE(1);c.writeU16BE(a.length);for(var d=0;d<a.length;d++){var b=a[d];c.writeU16BE(0);
c.writeU16BE(257*(b>>16&255));c.writeU16BE(257*(b>>8&255));c.writeU16BE(257*(255&b));c.writeU16BE(0)}return c.getAsDataArray()};hh.prototype=Object.create(fa(Pc).prototype);hh.prototype.constructor=hh;var vg={};var ep=function(){function a(l,h,e){var g=new XMLHttpRequest;g.open("GET",l);g.responseType="blob";g.onload=function(){k(g.response,h,e)};g.onerror=function(){console.error("could not download file")};g.send()}function c(l){var h=new XMLHttpRequest;h.open("HEAD",l,!1);try{h.send()}catch(e){}return 200<=
h.status&&299>=h.status}function d(l){try{l.dispatchEvent(new MouseEvent("click"))}catch(e){var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null);l.dispatchEvent(h)}}var b="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof Tf&&Tf.global===Tf?Tf:void 0,f=b.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),
k=b.saveAs||("object"!=typeof window||window!==b?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(l,h,e){var g=b.URL||b.webkitURL,p=document.createElement("a");h=h||l.name||"download";p.download=h;p.rel="noopener";"string"==typeof l?(p.href=l,p.origin===location.origin?d(p):c(p.href)?a(l,h,e):d(p,p.target="_blank")):(p.href=g.createObjectURL(l),setTimeout(function(){g.revokeObjectURL(p.href)},4E4),setTimeout(function(){d(p)},0))}:"msSaveOrOpenBlob"in navigator?function(l,h,e){if(h=
h||l.name||"download","string"!=typeof l){var g;navigator.msSaveOrOpenBlob((void 0===(g=e)?g={autoBom:!1}:"object"!=typeof g&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\ufeff",l],{type:l.type}):l),h)}else if(c(l))a(l,h,e);else{var p=document.createElement("a");p.href=l;p.target="_blank";setTimeout(function(){d(p)})}}:function(l,h,e,g){if((g=g||open("",
"_blank"))&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof l)return a(l,h,e);h="application/octet-stream"===l.type;e=/constructor/i.test(b.HTMLElement)||b.safari;var p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||h&&e||f)&&"undefined"!=typeof FileReader){var m=new FileReader;m.onloadend=function(){var u=m.result;u=p?u:u.replace(/^data:[^;]*;/,"data:attachment/file;");g?g.location.href=u:location=u;g=null};m.readAsDataURL(l)}else{var n=b.URL||b.webkitURL,r=n.createObjectURL(l);
g?g.location=r:location.href=r;g=null;setTimeout(function(){n.revokeObjectURL(r)},4E4)}});vg=b.saveAs=k.saveAs=k};"function"==typeof define&&define.amd?define([],ep):ep();var jh={};jh=JSON.parse('{"Dodge (tool)":"Dodge","Burn (tool)":"Burn","Color (picker)":"Color","Color swatches (shorter)":"Swatches"}');var Vi={ja:JSON.parse('{"File":"\u30d5\u30a1\u30a4\u30eb","Save to my computer":"PC\u306b\u4fdd\u5b58","Post Oekaki":"\u304a\u7d75\u304b\u304d\u3092\u6295\u7a3f","Edit":"\u7de8\u96c6","Undo":"\u53d6\u308a\u6d88\u3057","Redo":"\u3084\u308a\u76f4\u3057","Cut":"\u5207\u308a\u53d6\u308a","Copy":"\u30b3\u30d4\u30fc","Clear history":"\u5c65\u6b74\u6d88\u53bb","Copy merged":"\u7d50\u5408\u30b3\u30d4\u30fc","Paste":"\u8cbc\u308a\u4ed8\u3051","Select all":"\u3059\u3079\u3066\u9078\u629e","Deselect":"\u9078\u629e\u89e3\u9664","Transform":"\u5909\u5f62","Layers":"\u30ec\u30a4\u30e4\u30fc","Duplicate":"\u8907\u88fd","Merge down":"\u4e0b\u306e\u30ec\u30a4\u30e4\u30fc\u3068\u7d50\u5408","Merge group":"\u30b0\u30eb\u30fc\u30d7\u7d50\u5408","Merge all layers":"\u5168\u30ec\u30a4\u30e4\u30fc\u7d50\u5408","Add layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u8ffd\u52a0","Delete mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u524a\u9664","Delete layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u524a\u9664","Apply mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u9069\u7528","Apply layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u9069\u7528","Disable mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u7121\u52b9\u5316","Enable mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u6709\u52b9\u5316","Clip to the layer below":"\u4e0b\u306e\u30ec\u30a4\u30e4\u30fc\u3067\u30af\u30ea\u30c3\u30d4\u30f3\u30b0","Unclip from the layer below":"\u30af\u30ea\u30c3\u30d4\u30f3\u30b0\u89e3\u9664","Effects":"\u52b9\u679c","Clear":"\u6d88\u53bb","Fill":"\u5857\u308a\u6f70\u3057","Flip horizontal":"\u5de6\u53f3\u53cd\u8ee2","Flip vertical":"\u4e0a\u4e0b\u53cd\u8ee2","Invert":"\u30cd\u30ac\u30dd\u30b8\u53cd\u8ee2","Box blur...":"\u307c\u304b\u3057","Box blur":"\u307c\u304b\u3057","Blur amount (pixels)":"\u307c\u304b\u3057\u91cf(\u30d4\u30af\u30bb\u30eb\u5358\u4f4d)","Iterations (1-8, larger gives smoother blur)":"\u53cd\u5fa9(1-8,\u5927\u304d\u3044\u307b\u3069\u307c\u304b\u3057\u304c\u6ed1\u3089\u304b)","Monochromatic noise":"\u5358\u8272\u30ce\u30a4\u30ba","Color noise":"\u30ab\u30e9\u30fc\u30ce\u30a4\u30ba","View":"\u8868\u793a","Full-screen mode":"\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3\u30e2\u30fc\u30c9","Zoom in":"\u62e1\u5927","Zoom out":"\u7e2e\u5c0f","Zoom 100%":"100%","Smooth-out zoomed canvas":"\u30ba\u30fc\u30e0\u3092\u306a\u3081\u3089\u304b\u306b\u8868\u793a\u3059\u308b","Show grid":"\u30b0\u30ea\u30c3\u30c9\u3092\u8868\u793a","Grid options...":"\u30b0\u30ea\u30c3\u30c9\u306e\u8a2d\u5b9a","Palettes":"\u30d1\u30ec\u30c3\u30c8","Rearrange":"\u521d\u671f\u5316","Toggle palettes":"\u8868\u793a\u975e\u8868\u793a\u5207\u308a\u66ff\u3048","Use old icons":"\u53e4\u3044\u30a2\u30a4\u30b3\u30f3","Show tool options":"\u30c4\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3","Show color":"\u30ab\u30e9\u30fc","Show layers":"\u30ec\u30a4\u30e4\u30fc","Show misc":"\u64cd\u4f5c","Show stroke":"\u30b9\u30c8\u30ed\u30fc\u30af","Show swatches":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Show textures":"\u30c6\u30af\u30b9\u30c1\u30e3","Show tools":"\u30c4\u30fc\u30eb","Help":"\u30d8\u30eb\u30d7","Tablet support":"\u30bf\u30d6\u30ec\u30c3\u30c8\u30b5\u30dd\u30fc\u30c8","Shortcuts":"\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8","About":"ChickenPaint Be\u306b\u3064\u3044\u3066","Removes all undo/redo information to regain memory":"\u5c65\u6b74\u3092\u30af\u30ea\u30a2\u3057\u3066\u30e1\u30e2\u30ea\u3092\u958b\u653e\u3057\u307e\u3059","Clears the selected area":"\u6d88\u53bb","Invert the image colors":"\u30cd\u30ac\u30dd\u30b8\u53cd\u8ee2","Blur effect":"\u307c\u304b\u3057\u30d5\u30a3\u30eb\u30bf","Fills the selection with noise":"\u5358\u8272\u30ce\u30a4\u30ba\u3067\u5857\u308a\u6f70\u3057","Fills the selection with colored noise":"\u30ab\u30e9\u30fc\u30ce\u30a4\u30ba\u3067\u5857\u308a\u6f70\u3057","Linear interpolation is used to give a smoothed looked to the picture when zoomed in":"\u753b\u50cf\u306e\u62e1\u5927\u6642\u306b\u88dc\u5b8c\u3057\u3066\u6ed1\u3089\u304b\u306b\u8868\u793a\u3057\u307e\u3059","Rearrange the palette windows":"\u30d1\u30ec\u30c3\u30c8\u3092\u518d\u914d\u7f6e","Hides or shows all palettes":"\u30d1\u30ec\u30c3\u30c8\u306e\u8868\u793a/\u975e\u8868\u793a","You\'re about to clear the current Undo/Redo history.\\nThis operation cannot be undone, are you sure you want to do that?":"\u30a2\u30f3\u30c9\u30a5\u30fb\u30ea\u30c9\u30a5\u306e\u5c65\u6b74\u3092\u6d88\u53bb\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002\\n\u3053\u306e\u64cd\u4f5c\u306f\u5143\u306b\u623b\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u672c\u5f53\u306b\u5b9f\u884c\u3057\u307e\u3059\u304b?","Misc":"\u64cd\u4f5c","Round Pixelated":"\u5186\u30d4\u30af\u30bb\u30eb","Round Hard Edge":"\u5186\u30cf\u30fc\u30c9\u30a8\u30c3\u30b8","Round Soft":"\u5186\u30bd\u30d5\u30c8","Square Pixelated":"\u89d2\u30d4\u30af\u30bb\u30eb","Square Hard Edge":"\u89d2\u30cf\u30fc\u30c9\u30a8\u30c3\u30b8","Color (picker)":"\u30ab\u30e9\u30fc","Tool options":"\u30c4\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3","Brush size":"\u30d6\u30e9\u30b7\u30b5\u30a4\u30ba","Opacity":"\u4e0d\u900f\u660e\u5ea6","Color":"\u8272\u88dc\u5145","Blend":"\u6df7\u8272","Spacing":"\u9593\u9694","Scattering":"\u6563\u4e71","Smoothing":"\u624b\u3076\u308c\u88dc\u6b63","Color swatches":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Color swatches (shorter)":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Remove":"\u524a\u9664","Replace with current color":"\u9078\u629e\u4e2d\u306e\u8272\u306b\u7f6e\u304d\u63db\u3048","Save swatches to your computer...":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8\u3092PC\u306b\u4fdd\u5b58","Load swatches from your computer...":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8\u3092PC\u304b\u3089\u8aad\u307f\u8fbc\u307f","Add the current brush color as a new swatch":"\u9078\u629e\u4e2d\u306e\u8272\u3092\u8ffd\u52a0","Sample all layers":"\u5168\u30ec\u30a4\u30e4\u30fc\u6df7\u5408","Lock transparency":"\u900f\u660e\u90e8\u5206\u3092\u4fdd\u8b77","Textures":"\u30c6\u30af\u30b9\u30c1\u30e3","Customize":"\u30ab\u30b9\u30bf\u30de\u30a4\u30ba","Inverse":"\u30cd\u30ac\u30dd\u30b8\u53cd\u8ee2","Mirror":"\u5de6\u53f3\u53cd\u8ee2","Brightness":"\u8f1d\u5ea6","Contrast":"\u30b3\u30f3\u30c8\u30e9\u30b9\u30c8","Reset":"\u30ea\u30bb\u30c3\u30c8","Layer blending mode":"\u5408\u6210\u30e2\u30fc\u30c9","Normal":"\u901a\u5e38","Multiply":"\u4e57\u7b97","Add":"\u52a0\u7b97","Screen":"\u30b9\u30af\u30ea\u30fc\u30f3","Lighten":"\u6bd4\u8f03(\u660e)","Darken":"\u6bd4\u8f03(\u6697)","Subtract":"\u6e1b\u7b97","Dodge":"\u8986\u3044\u713c\u304d","Burn":"\u713c\u304d\u8fbc\u307f","Overlay":"\u30aa\u30fc\u30d0\u30fc\u30ec\u30a4","Hard Light":"\u30cf\u30fc\u30c9\u30e9\u30a4\u30c8","Soft Light":"\u30bd\u30d5\u30c8\u30e9\u30a4\u30c8","Vivid Light":"\u30d3\u30d3\u30c3\u30c9\u30e9\u30a4\u30c8","Linear Light":"\u30ea\u30cb\u30a2\u30e9\u30a4\u30c8","Pin Light":"\u30d4\u30f3\u30e9\u30a4\u30c8","Passthrough":"\u901a\u904e","Stroke":"\u30b9\u30c8\u30ed\u30fc\u30af","Free-hand":"\u30d5\u30ea\u30fc\u30cf\u30f3\u30c9","Straight line":"\u76f4\u7dda","Bezier curve":"Bz\uff08\u30d9\u30b8\u30a7\uff09\u66f2\u7dda","Tools":"\u30c4\u30fc\u30eb","Marquee":"\u9078\u629e\u7bc4\u56f2","Move tool":"\u79fb\u52d5","Flood fill":"\u5857\u308a\u6f70\u3057","Gradient fill":"\u30b0\u30e9\u30c7\u30fc\u30b7\u30e7\u30f3","Color picker":"\u30b9\u30dd\u30a4\u30c8","Rotate canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u56de\u8ee2","Grab canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u4f4d\u7f6e","Pencil":"\u925b\u7b46","Pen":"\u30da\u30f3","Airbrush":"\u30a8\u30a2\u30d6\u30e9\u30b7","Waterpaint":"\u6c34\u5f69","Eraser":"\u6d88\u3057\u30b4\u30e0","Soft eraser":"\u8584\u6d88\u3057","Smudge":"\u6307\u5148","Blender":"\u6df7\u8272","Dodge (tool)":"\u8986\u3044\u713c\u304d","Burn (tool)":"\u713c\u304d\u8fbc\u307f","Blur":"\u307c\u304b\u3057","Grid options":"\u30b0\u30ea\u30c3\u30c9\u306e\u8a2d\u5b9a","Grid size":"\u30b0\u30ea\u30c3\u30c9\u30b5\u30a4\u30ba","Rename...":"\u540d\u524d\u3092\u5909\u66f4","Add layer":"\u65b0\u898f\u30ec\u30a4\u30e4\u30fc","Delete layer":"\u30ec\u30a4\u30e4\u30fc\u524a\u9664","Add group":"\u65b0\u898f\u30b0\u30eb\u30fc\u30d7","Delete group":"\u30b0\u30eb\u30fc\u30d7\u524a\u9664","Add mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af\u8ffd\u52a0","Gradient":"\u30b0\u30e9\u30c7\u30fc\u30b7\u30e7\u30f3\u4f5c\u6210","Transform style":"\u5909\u5f62\u30b9\u30bf\u30a4\u30eb","Apply transform":"\u5909\u5f62\u78ba\u5b9a","Complete transform":"\u5909\u5f62\u3092\u5b8c\u4e86","Undo transform":"\u53d6\u308a\u6d88\u3057","You need to finish transforming this layer before you can do that. What would you like to do with the transform?":"\u7d9a\u884c\u3059\u308b\u305f\u3081\u306b\u5909\u5f62\u3092\u5b8c\u4e86\u3057\u307e\u3059\u3002","Smooth":"\u30b9\u30e0\u30fc\u30ba","Sharp":"\u30b7\u30e3\u30fc\u30d7","Opacity: ":"\u4e0d\u900f\u660e\u5ea6:","Please enter a color in hex format":"16\u9032\u5f62\u5f0f\u3067\u8272\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\uff08#xxxxxx\u306e\u5f62\uff09","Cancel":"\u30ad\u30e3\u30f3\u30bb\u30eb","Ok":"OK","Okay":"OK","OK":"OK","Whoops! This layer is currently hidden":"\u975e\u8868\u793a\u30ec\u30a4\u30e4\u30fc\u3067\u3059\u3002","Whoops! This layer\'s opacity is currently 0%":"\u30ec\u30a4\u30e4\u30fc\u306e\u4e0d\u900f\u660e\u5ea6\u304c0%\u3067\u3059","Whoops! You can\'t draw on a group":"\u30b0\u30eb\u30fc\u30d7\u30d5\u30a9\u30eb\u30c0\u306b\u306f\u63cf\u3051\u307e\u305b\u3093","Whoops! All of the selected pixels are transparent!":"\u30ec\u30a4\u30e4\u30fc\u304c\u7a7a\u3067\u3059","Image":"\u753b\u50cf","Layer mask":"\u30ec\u30a4\u30e4\u30fc\u30de\u30b9\u30af","Sorry, you can\'t remove the last remaining layer in the drawing.":"\u6700\u5f8c\u306e1\u3064\u306a\u306e\u3067\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3002","Are you sure you want to send your drawing to the server and finish drawing now?":"\u304a\u7d75\u304b\u304d\u3092\u30b5\u30fc\u30d0\u30fc\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\u7d42\u4e86\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","Your drawing has unsaved changes! Are you sure to want to navigate away?":"\u304a\u7d75\u304b\u304d\u306b\u672a\u4fdd\u5b58\u306e\u5909\u66f4\u304c\u3042\u308a\u307e\u3059\u3002\u7d42\u4e86\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","Many of the menu options and painting tools have keyboard shortcuts which are written next to them or appear when you hover.":"\u5229\u7528\u53ef\u80fd\u306a\u30ad\u30fc\u30dc\u30fc\u30c9\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u306e\u3044\u304f\u3064\u304b\u306f\u30e1\u30cb\u30e5\u30fc\u306e\u6a2a\u3084\u30c4\u30fc\u30eb\u30c1\u30c3\u30d7\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002","Here are some other shortcuts which are not as obvious!":"\u3053\u306e\u4e00\u89a7\u306f\u305d\u308c\u4ee5\u5916\u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3067\u3059\u3002","Right":"\u53f3","Left":"\u5de6","Middle":"\u4e2d","or":"\u307e\u305f\u306f","Double click":"\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af","Color swatches palette":"\u30ab\u30e9\u30fc\u30bb\u30c3\u30c8","Use as the drawing color":"\u30d1\u30ec\u30c3\u30c8\u306e\u8272\u3092\u53d6\u5f97","Remove or replace a color swatch":"\u30d1\u30ec\u30c3\u30c8\u306e\u5909\u66f4\uff65\u524a\u9664","Line drawing mode":"\u76f4\u7dda\u30e2\u30fc\u30c9","Snap line to nearest 45 degrees":"45\u00b0\u5358\u4f4d\u3067\u30b9\u30ca\u30c3\u30d7","Painting tools":"\u30c4\u30fc\u30eb","Change brush opacity":"\u30d6\u30e9\u30b7\u306e\u4e0d\u900f\u660e\u5ea6","Change brush size":"\u30d6\u30e9\u30b7\u30b5\u30a4\u30ba","Brush palette":"\u30d6\u30e9\u30b7\u30d1\u30ec\u30c3\u30c8","Adjust brush sliders more precisely":"\u30d6\u30e9\u30b7\u30b9\u30e9\u30a4\u30c0\u30fc\u3092\u3088\u308a\u7d30\u304b\u304f\u8abf\u6574","Drawing canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9","Move the canvas around":"\u30ad\u30e3\u30f3\u30d0\u30b9\u3092\u79fb\u52d5","Rotate the canvas":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u56de\u8ee2","Sample the color under the cursor":"\u30ad\u30e3\u30f3\u30d0\u30b9\u306e\u8272\u3092\u30b9\u30dd\u30a4\u30c8","Layers palette":"\u30ec\u30a4\u30e4\u30fc\u30d1\u30ec\u30c3\u30c8","Rename layer":"\u30ec\u30a4\u30e4\u30fc\u540d\u5909\u66f4","Toggle mask enable/disable":"\u30de\u30b9\u30af\u306e\u6709\u52b9/\u7121\u52b9\u5207\u308a\u66ff\u3048","Toggle mask View":"\u30de\u30b9\u30af\u306e\u8868\u793a/\u975e\u8868\u793a\u5207\u308a\u66ff\u3048","Save Oekaki":"\u4fdd\u5b58","Saving drawing...":"\u304a\u7d75\u304b\u304d\u3092\u4fdd\u5b58\u4e2d\u2026","Preparing your drawing to be saved, please wait...":"\u304a\u7d75\u304b\u304d\u3092\u4fdd\u5b58\u3059\u308b\u6e96\u5099\u3092\u3057\u3066\u3044\u307e\u3059\u3002\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u2026","Drawing saved!":"\u304a\u7d75\u304b\u304d\u3092\u4fdd\u5b58\u3057\u307e\u3057\u305f\uff01","Your drawing has been saved, would you like to post it to the forum now?":"\u304a\u7d75\u304b\u304d\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\u3002\u30d5\u30a9\u30fc\u30e9\u30e0\u3078\u6295\u7a3f\u3057\u307e\u3059\u304b\uff1f","Yes, post it now":"\u306f\u3044\u3001\u6295\u7a3f\u3057\u307e\u3059","No, keep drawing":"\u307e\u3060\u63cf\u304d\u307e\u3059","No, quit and I\'ll finish it later":"\u30a2\u30d7\u30ea\u3092\u7d42\u4e86\u3057\u3066\u7d9a\u304d\u3092\u5f8c\u3067\u63cf\u304f","Your drawing has been saved, would you like to view it on the forum now?":"\u304a\u7d75\u304b\u304d\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\u3002\u30d5\u30a9\u30fc\u30e9\u30e0\u3078\u6295\u7a3f\u3057\u307e\u3059\u304b\uff1f","Yes, view the post":"\u306f\u3044\u3001\u6295\u7a3f\u3057\u307e\u3059\u3002","Your drawing has been saved, redirecting you to view your new post now...":"\u304a\u7d75\u304b\u304d\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\u3002\u6295\u7a3f\u5148\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002","Sorry, your drawing could not be saved, please try again later.":"\u304a\u7d75\u304b\u304d\u304c\u4fdd\u5b58\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u518d\u5ea6\u6295\u7a3f\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002","The error returned from the server was":"\u30b5\u30fc\u30d0\u304b\u3089\u8fd4\u3063\u3066\u6765\u305f\u30a8\u30e9\u30fc"}'),
en:jh},ih=jh,Wi="en";ug.prototype=Object.create(fa(Pc).prototype);ug.prototype.constructor=ug;var Dc={};!function(a){function c(G,L){for(var O=G.length;O--;)if(G[O]===L)return O;return-1}function d(G,L,O){var N=f(G);void 0===O&&(O=L,L="all");for(var ea=0;ea<N.length;ea++){var Y=[];1<(G=N[ea].split("+")).length&&(Y=k(G),G=[G[G.length-1]]);(G=r(G=G[0]))in e||(e[G]=[]);e[G].push({shortcut:N[ea],scope:L,method:O,key:N[ea],mods:Y})}}function b(){return p||"all"}function f(G){var L;return""==(L=G.replace(/\s/g,
"").split(","))[L.length-1]&&(L[L.length-2]+=","),L}function k(G){G=G.slice(0,G.length-1);for(var L=0;L<G.length;L++)G[L]=m[G[L]];return G}function l(G,L,O){G.addEventListener&&G.addEventListener(L,O,!1)}var h,e={},g={16:!1,18:!1,17:!1,91:!1},p="all",m={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},n={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,
pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},r=function(G){G=n[G]||G.toUpperCase().charCodeAt(0);return"function"==typeof G?G():G},u=[];for(h=1;20>h;h++)n["f"+h]=111+h;var w={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(h in m)d[h]=!1;l(document,"keydown",function(G){!function(L){var O,N,ea,Y,ka;if(-1==c(u,O=Ll(L.key))&&u.push(O),O in g)for(ea in g[O]=!0,m)m[ea]==O&&(d[ea]=!0);else{for(h in g)g[h]=L[w[h]];if(d.filter.call(this,L)&&
O in e){var ha=0;for(ka=b();ha<e[O].length;ha++)if((N=e[O][ha]).scope==ka||"all"==N.scope){for(ea in Y=0<N.mods.length,g)(!g[ea]&&-1<c(N.mods,+ea)||g[ea]&&-1==c(N.mods,+ea))&&(Y=!1);(0!=N.mods.length||g[16]||g[18]||g[17]||g[91])&&!Y||!1!==N.method(L,N)||(L.preventDefault?L.preventDefault():L.returnValue=!1,L.stopPropagation&&L.stopPropagation(),L.cancelBubble&&(L.cancelBubble=!0))}}}}(G)});l(document,"keyup",function(G){var L;G=Ll(G.key);var O=c(u,G);if(0<=O&&u.splice(O,1),G in g)for(L in g[G]=!1,
m)m[L]==G&&(d[L]=!1)});l(window,"focus",function(){for(h in g)g[h]=!1;for(h in m)d[h]=!1});var z=a.key;a.key=d;a.key.setScope=function(G){p=G||"all"};a.key.getScope=b;a.key.deleteScope=function(G){var L,O;for(L in e){var N=0;for(O=e[L];N<O.length;)O[N].scope===G?O.splice(N,1):N++}};a.key.filter=function(G){G=(G.target||G.srcElement).tagName;return!("INPUT"==G||"SELECT"==G||"TEXTAREA"==G)};a.key.isPressed=function(G){return"string"==typeof G&&(G=r(G)),-1!=c(u,G)};a.key.getPressedKeyCodes=function(){return u.slice(0)};
a.key.noConflict=function(){var G=a.key;return a.key=z,G};a.key.unbind=function(G,L){var O,N,ea,Y,ka=[];var ha=0;for(O=f(G);ha<O.length&&(1<(N=O[ha].split("+")).length&&(ka=k(N)),G=r(G=N[N.length-1]),void 0===L&&(L=b()),e[G]);ha++)for(ea=0;ea<e[G].length;ea++){var qa;if(qa=(Y=e[G][ea]).scope===L)a:if(Y=Y.mods,Y.length!=ka.length)qa=!1;else{for(qa=0;qa<Y.length;qa++)if(Y[qa]!==ka[qa]){qa=!1;break a}qa=!0}qa&&(e[G][ea]={})}};Dc=d}(Dc||{});ve.getRef=function(){return null==ve.instance&&(ve.instance=
new ve),ve.instance};window.onWacomPluginLoaded=function(){ve.getRef().pluginLoaded()};nf.prototype.clone=function(){for(var a=new nf(Array(this.points.length)),c=0;c<this.points.length;c++)a.points[c]={x:this.points[c].x,y:this.points[c].y};return a};nf.prototype.getTransformed=function(a){for(var c=new nf(Array(this.points.length)),d=0;d<this.points.length;d++)c.points[d]=a.getTransformedPoint(this.points[d]);return c};nf.prototype.getCenter=function(){for(var a=this.points[0].x,c=this.points[0].y,
d=1;d<this.points.length;d++)a+=this.points[d].x,c+=this.points[d].y;return{x:a/this.points.length,y:c/this.points.length}};nf.prototype.containsPoint=function(a){var c,d=!1;var b=0;for(c=this.points.length-1;b<this.points.length;c=b++)this.points[b].y>a.y!=this.points[c].y>a.y&&a.x<(this.points[c].x-this.points[b].x)*(a.y-this.points[b].y)/(this.points[c].y-this.points[b].y)+this.points[b].x&&(d=!d);return d};tc.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};tc.prototype.normalize=
function(){var a=this.getLength();return this.x/=a,this.y/=a,this};tc.prototype.getDotProduct=function(a){return this.x*a.x+this.y*a.y};tc.prototype.scale=function(a){return this.x*=a,this.y*=a,this};tc.prototype.getScaled=function(a){var c=new tc(this.x,this.y);return c.scale(a),c};tc.prototype.getRounded=function(){return new tc(Math.round(this.x),Math.round(this.y))};tc.prototype.getTruncated=function(){return new tc(~~this.x,~~this.y)};tc.prototype.getPerpendicular=function(){return new tc(-this.y,
this.x)};tc.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this};tc.prototype.subtract=function(a){return this.x-=a.x,this.y-=a.y,this};tc.prototype.getSum=function(a){return new tc(this.x+a.x,this.y+a.y)};tc.subtractPoints=function(a,c){return new tc(a.x-c.x,a.y-c.y)};wg.prototype=Object.create(fa(Pc).prototype);wg.prototype.constructor=wg;dd.MODE_INDEX_DEFAULT=0;dd.MODE_INDEX_USER=1;dd.prototype.setMode=function(a,c){var d=this.modes[a];d!=c&&(d&&d.leave(),this.modes[a]=c,c.enter())};
dd.prototype.setDefaultMode=function(a){a.transient=!1;a.capture=!1;this.setMode(dd.MODE_INDEX_DEFAULT,a)};dd.prototype.setUserMode=function(a){for(var c=this.modes.length-1;c>dd.MODE_INDEX_USER;c--)this.modes[c].leave(),this.modes.splice(c,1);a.transient=!1;a.capture=!1;this.setMode(dd.MODE_INDEX_USER,a)};dd.prototype.deliverEvent=function(a,c){for(var d=this.modes.length-1;0<=d;d--){var b=this.modes[d];if(b[a].apply(b,c)||b.capture&&"paint"!=a)return!0}return!1};for(var bl=0,fp=["mouseDown","mouseUp"];bl<
fp.length;bl++)!function(a,c){var d=c[a];dd.prototype[d]=function(b,f,k){this.deliverEvent(d,[b,f,k])}}(bl,fp);for(var cl=0,gp=["mouseDrag","mouseMove"];cl<gp.length;cl++)!function(a,c){var d=c[a];dd.prototype[d]=function(b,f){this.deliverEvent(d,[b,f])}}(cl,gp);for(var dl=0,hp=["keyDown","keyUp"];dl<hp.length;dl++)!function(a,c){var d=c[a];dd.prototype[d]=function(b){this.deliverEvent(d,[b])&&b.preventDefault()}}(dl,hp);dd.prototype.paint=function(a){this.deliverEvent("paint",[a])};dd.prototype.push=
function(a,c){var d=this.peek();d&&d.suspend();a.transient=c;a.capture=!1;a.enter();this.modes.push(a)};dd.prototype.peek=function(){return 0<this.modes.length?this.modes[this.modes.length-1]:null};dd.prototype.pop=function(){var a=this.modes.pop(),c=this.peek();return a&&a.leave(),c&&c.resume(),c};lh.prototype=Object.create(fa(Pc).prototype);lh.prototype.constructor=lh;ad.prototype=Object.create(fa(Pc).prototype);ad.prototype.constructor=fa(Pc);mh.prototype=Object.create(ad.prototype);mh.prototype.constructor=
mh;nh.prototype=Object.create(ad.prototype);nh.prototype.constructor=nh;oh.prototype=Object.create(ad.prototype);oh.prototype.constructor=oh;var yi=window.devicePixelRatio||1,Gf=Math.round(128*yi),Hf=Math.round(128*yi),Pl=function(){function a(c,d){var b=this;Ib(this,a);id(this,"_controller",void 0);id(this,"_canvas",void 0);id(this,"_canvasContext",void 0);id(this,"_imageData",void 0);id(this,"_bitmapInvalid",!0);id(this,"_capturedMouse",!1);id(this,"_greyscale",!1);id(this,"color",new bc(0));this._controller=
c;var f=document.createElement("canvas");this._canvas=f;f.className="chickenpaint-colorpicker-select";f.setAttribute("touch-action","none");f.width=Gf;f.height=Hf;f.style.width="128px";f.style.height="128px";this._canvasContext=f.getContext("2d");this._imageData=this._canvasContext.createImageData(Gf,Hf);this._canvasContext.getImageData(0,0,1,1);this._handleEndDrag=this._endDrag.bind(this);this._handleMousePickColor=this._mousePickColor.bind(this);f.addEventListener("pointerdown",function(k){return b._startDrag(k)});
d&&this.color.copyFrom(d);c.on("colorChange",function(k){b.color.copyFrom(k);b._bitmapInvalid=!0;b.paint()});c.on("colorModeChange",function(k){b._greyscale="greyscale"==k;b._bitmapInvalid=!0;b.paint()});this.paint()}return Jb(a,[{key:"_makeBitmap",value:function(){if(this._bitmapInvalid){var c=0,d=this._imageData.data;if(this._greyscale)for(var b=0;b<Hf;b++)for(var f=255-Math.round(b/(Hf-1)*255),k=0;k<Gf;k++)d[c+J.RED_BYTE_OFFSET]=f,d[c+J.GREEN_BYTE_OFFSET]=f,d[c+J.BLUE_BYTE_OFFSET]=f,d[c+J.ALPHA_BYTE_OFFSET]=
255,c+=J.BYTES_PER_PIXEL;else for(b=this.color.clone(),f=0;f<Hf;f++)for(b.setValue(255-~~(f/(Hf-1)*255)),k=0;k<Gf;k++)b.setSaturation(Math.round(k/(Gf-1)*255)),d[c+J.RED_BYTE_OFFSET]=b.rgb>>16&255,d[c+J.GREEN_BYTE_OFFSET]=b.rgb>>8&255,d[c+J.BLUE_BYTE_OFFSET]=255&b.rgb,d[c+J.ALPHA_BYTE_OFFSET]=255,c+=J.BYTES_PER_PIXEL;this._bitmapInvalid=!1}}},{key:"paint",value:function(){this._makeBitmap();this._canvasContext.putImageData(this._imageData,0,0);var c=this.color.getSaturation()/255*(Gf-1),d=(255-this.color.getValue())/
255*(Hf-1);kh(this._canvasContext,"stroke");this._canvasContext.lineWidth=1.5*yi;this._canvasContext.beginPath();this._greyscale?(this._canvasContext.moveTo(0,d),this._canvasContext.lineTo(Gf,d)):this._canvasContext.arc(c,d,5*yi,0,2*Math.PI);this._canvasContext.stroke();this._canvasContext.globalCompositeOperation="source-over"}},{key:"_mousePickColor",value:function(c){var d=c.pageX-fa(ta)(this._canvas).offset().left;c=Math.max(Math.min(255-~~(255*(c.pageY-fa(ta)(this._canvas).offset().top)/127),
255),0);this._greyscale?this.color.setGreyscale(c):(d=Math.max(Math.min(~~(255*d/127),255),0),this.color.setHsv(this.color.getHue(),d,c));this.paint();this._controller.setCurColor(this.color)}},{key:"_endDrag",value:function(c){this._canvas.releasePointerCapture(c.pointerId);this._capturedMouse=!1;this._canvas.removeEventListener("pointerup",this._handleEndDrag);this._canvas.removeEventListener("pointermove",this._handleMousePickColor)}},{key:"_startDrag",value:function(c){this._capturedMouse||(this._capturedMouse=
!0,this._canvas.setPointerCapture(c.pointerId),this._canvas.addEventListener("pointerup",this._handleEndDrag),this._canvas.addEventListener("pointermove",this._handleMousePickColor));this._handleMousePickColor(c)}},{key:"setHue",value:function(c){this.color.getHue()!=c&&(this.color.setHue(c),this._controller.setCurColor(this.color))}},{key:"getElement",value:function(){return this._canvas}}]),a}(),Ql=function(){function a(c,d,b){var f=this;Ib(this,a);id(this,"hue",void 0);id(this,"selecter",void 0);
id(this,"_canvas",void 0);id(this,"_canvasContext",void 0);id(this,"_imageData",void 0);id(this,"_capturedMouse",!1);this.selecter=d;this.hue=b||0;var k=document.createElement("canvas");this._canvas=k;c.on("colorChange",function(l){f.setHue(l.getHue())});c.on("colorModeChange",function(l){k.style.display="greyscale"==l?"none":"block"});k.setAttribute("touch-action","none");k.addEventListener("pointerdown",function(l){return f._startDrag(l)});k.width=24;k.height=128;k.className="chickenpaint-colorpicker-slider";
this._canvasContext=k.getContext("2d");this._imageData=this._canvasContext.createImageData(24,128);this._canvasContext.getImageData(0,0,1,1);this._handleEndDrag=this._endDrag.bind(this);this._handleMousePickColor=this._mousePickColor.bind(this);(function(l){for(var h=new bc(65535),e=0,g=l.data,p=0;p<l.height;p++){h.setHue(359*p/l.height);for(var m=0;m<l.width;m++)g[e+J.RED_BYTE_OFFSET]=h.rgb>>16&255,g[e+J.GREEN_BYTE_OFFSET]=h.rgb>>8&255,g[e+J.BLUE_BYTE_OFFSET]=255&h.rgb,g[e+J.ALPHA_BYTE_OFFSET]=255,
e+=J.BYTES_PER_PIXEL}})(this._imageData);this.paint()}return Jb(a,[{key:"paint",value:function(){this._canvasContext.putImageData(this._imageData,0,0);var c=128*this.hue/360;kh(this._canvasContext,"stroke");this._canvasContext.lineWidth=1.5;this._canvasContext.beginPath();this._canvasContext.moveTo(0,c);this._canvasContext.lineTo(24,c);this._canvasContext.stroke();this._canvasContext.globalCompositeOperation="source-over"}},{key:"_mousePickColor",value:function(c){c=c.pageY-fa(ta)(this._canvas).offset().top;
this.hue=Math.max(0,Math.min(359,~~(360*c/128)));this.paint();this.selecter&&this.selecter.setHue(this.hue)}},{key:"_endDrag",value:function(c){this._canvas.releasePointerCapture(c.pointerId);this._capturedMouse=!1;this._canvas.removeEventListener("pointerup",this._handleEndDrag);this._canvas.removeEventListener("pointermove",this._handleMousePickColor)}},{key:"_startDrag",value:function(c){this._capturedMouse||(this._capturedMouse=!0,this._canvas.setPointerCapture(c.pointerId),this._canvas.addEventListener("pointerup",
this._handleEndDrag),this._canvas.addEventListener("pointermove",this._handleMousePickColor));this._handleMousePickColor(c)}},{key:"getElement",value:function(){return this._canvas}},{key:"setHue",value:function(c){this.hue=c;this.paint()}}]),a}();ph.prototype=Object.create(ad.prototype);ph.prototype.constructor=ph;Nf.prototype=Object.create(fa(Pc).prototype);Nf.prototype.constructor=Nf;xd.prototype=Object.create(fa(Pc).prototype);xd.prototype.constructor=xd;xg.prototype=Object.create(fa(Pc).prototype);
xg.prototype.constructor=xg;Of.prototype=Object.create(ad.prototype);Of.prototype.constructor=Of;Of.CPBrushPreview=function(a){function c(){l.clearRect(0,0,k.width,k.height);l.beginPath();l.arc(k.width/2,k.height/2,f/2*window.devicePixelRatio,0,2*Math.PI);l.stroke()}function d(e){var g=fa(ta)(k).offset(),p=e.pageY-g.top;e=e.pageX-g.left-fa(ta)(k).width()/2;p-=fa(ta)(k).height()/2;f=Math.max(1,Math.min(200,Math.round(2*Math.sqrt(e*e+p*p))));c();a.setBrushSize(f)}function b(e){h&&(h=!1,window.removeEventListener("mouseup",
b),window.removeEventListener("mousemove",d))}var f=16,k=document.createElement("canvas"),l=k.getContext("2d"),h=!1;this.getElement=function(){return k};k.addEventListener("mousedown",function(e){h||(h=!0,window.addEventListener("mouseup",b),window.addEventListener("mousemove",d),d(e))});a.on("toolChange",function(e,g){g.size!=f&&(f=g.size,c())});k.width=64;k.height=64;1<window.devicePixelRatio&&(k.style.width=k.width+"px",k.style.height=k.height+"px",k.width*=window.devicePixelRatio,k.height*=window.devicePixelRatio);
k.className="chickenpaint-brush-preview";l.strokeStyle="black";l.lineWidth=1*window.devicePixelRatio;c()};qh.prototype=Object.create(ad.prototype);qh.prototype.constructor=qh;rh.prototype=Object.create(ad.prototype);rh.prototype.constructor=rh;sh.prototype=Object.create(ad.prototype);sh.prototype.constructor=sh;th.prototype=Object.create(fa(Pc).prototype);th.prototype.constructor=th;var Ul=[{name:"File",mnemonic:"F",children:[{name:"Save to my computer",action:"CPSave",mnemonic:"S",shortcut:"ctrl+s"},
{name:"Save Oekaki",action:"CPSend",mnemonic:"S",shortcut:"ctrl+s"}]},{name:"Edit",mnemonic:"E",children:[{name:"Undo",action:"CPUndo",mnemonic:"U",shortcut:"ctrl+z"},{name:"Redo",action:"CPRedo",mnemonic:"R",shortcut:"ctrl+y"},{name:"Clear history",action:"CPClearHistory",mnemonic:"H",title:wa("Removes all undo/redo information to regain memory")},{name:"-"},{name:"Cut",action:"CPCut",mnemonic:"T",shortcut:"ctrl+x"},{name:"Copy",action:"CPCopy",mnemonic:"C",shortcut:"ctrl+c"},{name:"Copy merged",
action:"CPCopyMerged",mnemonic:"Y",shortcut:"shift+ctrl+c"},{name:"Paste",action:"CPPaste",mnemonic:"P",shortcut:"ctrl+v"},{name:"-"},{name:"Select all",action:"CPSelectAll",mnemonic:"A",shortcut:"ctrl+a"},{name:"Deselect",action:"CPDeselectAll",mnemonic:"D",shortcut:"ctrl+d"},{name:"-"},{name:"Transform",action:"CPTransform",mnemonic:"T",shortcut:"ctrl+h"}]},{name:"Layers",mnemonic:"L",children:[{name:"Duplicate",action:"CPLayerDuplicate",mnemonic:"D",shortcut:"shift+ctrl+d"},{name:"-"},{name:"Merge down",
action:"CPLayerMergeDown",mnemonic:"E",shortcut:"ctrl+e"},{name:"Merge group",action:"CPGroupMerge",mnemonic:"G",shortcut:"shift+ctrl+g"},{name:"Merge all layers",action:"CPLayerMergeAll",shortcut:"shift+ctrl+e",mnemonic:"A"},{name:"-"},{hideIfNotAvailable:!0,name:"Add layer mask",action:"CPAddLayerMask"},{hideIfNotAvailable:!0,name:"Delete layer mask",action:"CPRemoveLayerMask",shortcut:"shift+m"},{hideIfNotAvailable:!0,name:"Apply layer mask",action:"CPApplyLayerMask",shortcut:"ctrl+m"},{name:"-"},
{hideIfNotAvailable:!0,name:"Clip to the layer below",action:"CPCreateClippingMask"},{hideIfNotAvailable:!0,name:"Unclip from the layer below",action:"CPReleaseClippingMask"}]},{name:"Effects",mnemonic:"E",children:[{name:"Clear",action:"CPClear",mnemonic:"D",shortcut:"del,backspace"},{name:"Fill",action:"CPFill",mnemonic:"F",shortcut:"ctrl+f"},{name:"Flip horizontal",action:"CPHFlip",mnemonic:"H",shortcut:"h"},{name:"Flip vertical",action:"CPVFlip",mnemonic:"V"},{name:"Invert",action:"CPFXInvert",
mnemonic:"I",shortcut:"ctrl+i",title:wa("Invert the image colors")},{name:"-"},{name:"Box blur...",action:"CPFXBoxBlur",mnemonic:"B"},{name:"-"},{name:"Monochromatic noise",action:"CPMNoise",mnemonic:"M",title:wa("Fills the selection with noise")},{name:"Color noise",action:"CPCNoise",mnemonic:"C",title:wa("Fills the selection with colored noise")}]},{name:"View",mnemonic:"V",children:[{name:"Full-screen mode",action:"CPFullScreen",mnemonic:"F",checkbox:!0,checked:!1},{name:"-"},{name:"Zoom in",action:"CPZoomIn",
mnemonic:"I",shortcut:"ctrl+="},{name:"Zoom out",action:"CPZoomOut",mnemonic:"O",shortcut:"ctrl+-"},{name:"Zoom 100%",action:"CPZoom100",mnemonic:"1",shortcut:"ctrl+0"},{action:"CPLinearInterpolation",name:"-"},{name:"Smooth-out zoomed canvas",action:"CPLinearInterpolation",mnemonic:"L",title:wa("Linear interpolation is used to give a smoothed looked to the picture when zoomed in"),checkbox:!0,checked:!0},{name:"-"},{name:"Show grid",action:"CPToggleGrid",mnemonic:"G",shortcut:"ctrl+g",checkbox:!0,
checked:!1},{name:"Grid options...",action:"CPGridOptions",mnemonic:"D"}]},{name:"Palettes",mnemonic:"P",children:[{name:"Rearrange",action:"CPArrangePalettes",title:wa("Rearrange the palette windows")},{name:"Toggle palettes",action:"CPTogglePalettes",mnemonic:"P",shortcut:"tab",title:wa("Hides or shows all palettes")},{name:"-"},{name:"Show tools",action:"CPPalTool",mnemonic:"T",checkbox:!0,checked:!0},{name:"Show color",action:"CPPalColor",mnemonic:"C",checkbox:!0,checked:!0},{name:"Show stroke",
action:"CPPalStroke",mnemonic:"S",checkbox:!0,checked:!0},{name:"Show misc",action:"CPPalMisc",mnemonic:"M",checkbox:!0,checked:!0},{name:"Show swatches",action:"CPPalSwatches",mnemonic:"W",checkbox:!0,checked:!0},{name:"Show textures",action:"CPPalTextures",mnemonic:"X",checkbox:!0,checked:!0},{name:"Show tool options",action:"CPPalBrush",mnemonic:"B",checkbox:!0,checked:!0},{name:"Show layers",action:"CPPalLayers",mnemonic:"L",checkbox:!0,checked:!0}]},{name:"Help",mnemonic:"H",children:[{name:"Tablet support",
mnemonic:"T",action:"CPTabletSupport"},{name:"Shortcuts",mnemonic:"S",action:"CPShortcuts"},{name:"-"},{name:"About",mnemonic:"A",action:"CPAbout"}]}];uh.prototype=Object.create(fa(Pc).prototype);uh.prototype.constructor=uh;vh.prototype=Object.create(fa(Pc).prototype);vh.prototype.constructor=vh;var Vl=navigator.userAgent.toLowerCase().includes("mac os")?"\u2318":"Ctrl";wh.prototype=Object.create(fa(Pc).prototype);wh.prototype.constructor=wh;var Je={toolbarStyle:"new"},Qp=function(a){function c(){var b;
return Ib(this,c),id(zi(b=d.call(this)),"toolbarStyle",void 0),b.setDefaults(),b}gc(c,a);var d=hc(c);return Jb(c,[{key:"setDefaults",value:function(){for(var b in Je)Je.hasOwnProperty(b)&&this.set(b,Je[b])}},{key:"load",value:function(){var b={};try{b=JSON.parse(localStorage.getItem("chickenpaint-prefs"))}catch(k){console.error(k)}for(var f in b&&"object"==typeof b||(b={}),Je)if(Je.hasOwnProperty(f))try{this.set(f,b.hasOwnProperty(f)?b[f]:Je[f])}catch(k){console.error(k)}}},{key:"save",value:function(){try{var b=
!1,f;for(f in Je)if(Je.hasOwnProperty(f)&&this[f]!=Je[f]){b=!0;break}b?localStorage.setItem("chickenpaint-prefs",JSON.stringify({toolbarStyle:this.toolbarStyle})):localStorage.removeItem("chickenpaint-prefs")}catch(k){console.error(k)}}},{key:"set",value:function(b,f){this[b]=f;this.emitEvent(b,[f])}},{key:"get",value:function(b){return this[b]}}]),c}(fa(Pc));window.PointerEvent&&(window.hasNativePointerEvents=!0);(function(){function a(A,T){T=T||Object.create(null);var oa=document.createEvent("Event");
oa.initEvent(A,T.bubbles||!1,T.cancelable||!1);var ma;for(A=2;A<p.length;A++)oa[ma=p[A]]=T[ma]||m[A];oa.buttons=T.buttons||0;ma=0;return ma=T.pressure&&oa.buttons?T.pressure:oa.buttons?.5:0,oa.x=oa.clientX,oa.y=oa.clientY,oa.pointerId=T.pointerId||0,oa.width=T.width||0,oa.height=T.height||0,oa.pressure=ma,oa.tiltX=T.tiltX||0,oa.tiltY=T.tiltY||0,oa.twist=T.twist||0,oa.tangentialPressure=T.tangentialPressure||0,oa.pointerType=T.pointerType||"",oa.hwTimestamp=T.hwTimestamp||0,oa.isPrimary=T.isPrimary||
!1,oa}function c(){this.array=[];this.size=0}function d(A,T,oa,ma){this.addCallback=A.bind(ma);this.removeCallback=T.bind(ma);this.changedCallback=oa.bind(ma);ka&&(this.observer=new ka(this.mutationWatcher.bind(this)))}function b(A){return"body /shadow-deep/ "+f(A)}function f(A){return'[touch-action="'+A+'"]'}function k(A){return"{ -ms-touch-action: "+A+"; touch-action: "+A+"; }"}function l(A){if(!G.pointermap.has(A))throw A=Error("InvalidPointerId"),A.name="InvalidPointerId",A;}function h(A){for(var T=
A.parentNode;T&&T!==A.ownerDocument;)T=T.parentNode;if(!T)throw A=Error("InvalidStateError"),A.name="InvalidStateError",A;}var e,g,p="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),m=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];var n=window.Map&&window.Map.prototype.forEach?Map:c;c.prototype={set:function(A,T){if(void 0===T)return this.delete(A);!this.has(A)&&this.size++;this.array[A]=T},has:function(A){return void 0!==
this.array[A]},delete:function(A){this.has(A)&&(delete this.array[A],this.size--)},get:function(A){return this.array[A]},clear:function(){this.size=this.array.length=0},forEach:function(A,T){return this.array.forEach(function(oa,ma){A.call(T,oa,ma,this)},this)}};var r="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
u=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],w={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},z="undefined"!=typeof SVGElementInstance,G={pointermap:new n,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(A,T){var oa=T.events;oa&&(oa.forEach(function(ma){T[ma]&&(this.eventMap[ma]=T[ma].bind(T))},this),this.eventSources[A]=T,this.eventSourceList.push(T))},
register:function(A){for(var T,oa=this.eventSourceList.length,ma=0;ma<oa&&(T=this.eventSourceList[ma]);ma++)T.register.call(T,A)},unregister:function(A){for(var T,oa=this.eventSourceList.length,ma=0;ma<oa&&(T=this.eventSourceList[ma]);ma++)T.unregister.call(T,A)},contains:function(A,T){try{return A.contains(T)}catch(oa){return!1}},down:function(A){A.bubbles=!0;this.fireEvent("pointerdown",A)},move:function(A){A.bubbles=!0;this.fireEvent("pointermove",A)},up:function(A){A.bubbles=!0;this.fireEvent("pointerup",
A)},enter:function(A){A.bubbles=!1;this.fireEvent("pointerenter",A)},leave:function(A){A.bubbles=!1;this.fireEvent("pointerleave",A)},over:function(A){A.bubbles=!0;this.fireEvent("pointerover",A)},out:function(A){A.bubbles=!0;this.fireEvent("pointerout",A)},cancel:function(A){A.bubbles=!0;this.fireEvent("pointercancel",A)},leaveOut:function(A){this.out(A);this.propagate(A,this.leave,!1)},enterOver:function(A){this.over(A);this.propagate(A,this.enter,!0)},eventHandler:function(A){if(!A._handledByPE){var T=
A.type;(T=this.eventMap&&this.eventMap[T])&&T(A);A._handledByPE=!0}},listen:function(A,T){T.forEach(function(oa){this.addEvent(A,oa)},this)},unlisten:function(A,T){T.forEach(function(oa){this.removeEvent(A,oa)},this)},addEvent:function(A,T){A.addEventListener(T,this.boundHandler)},removeEvent:function(A,T){A.removeEventListener(T,this.boundHandler)},makeEvent:function(A,T){this.captureInfo[T.pointerId]&&(T.relatedTarget=null);A=new a(A,T);return T.preventDefault&&(A.preventDefault=T.preventDefault),
A._target=A._target||T.target,A},fireEvent:function(A,T){A=this.makeEvent(A,T);return this.dispatchEvent(A)},cloneEvent:function(A){for(var T,oa=Object.create(null),ma=0;ma<r.length;ma++)oa[T=r[ma]]=A[T]||u[ma],z&&("target"===T||"relatedTarget"===T)&&oa[T]instanceof SVGElementInstance&&(oa[T]=oa[T].correspondingUseElement);return A.preventDefault&&(oa.preventDefault=function(){A.preventDefault()}),oa},getTarget:function(A){var T=this.captureInfo[A.pointerId];return T?A._target!==T&&A.type in w?void 0:
T:A._target},propagate:function(A,T,oa){for(var ma=A.target,rb=[];ma!==document&&!ma.contains(A.relatedTarget);)if(rb.push(ma),!(ma=ma.parentNode))return;oa&&rb.reverse();rb.forEach(function(zb){A.target=zb;T.call(this,A)},this)},setCapture:function(A,T,oa){this.captureInfo[A]&&this.releaseCapture(A,oa);this.captureInfo[A]=T;this.implicitRelease=this.releaseCapture.bind(this,A,oa);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);
var ma=new a("gotpointercapture");ma.pointerId=A;ma._target=T;oa||this.asyncDispatchEvent(ma)},releaseCapture:function(A,T){var oa=this.captureInfo[A];if(oa){this.captureInfo[A]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var ma=new a("lostpointercapture");ma.pointerId=A;ma._target=oa;T||this.asyncDispatchEvent(ma)}},dispatchEvent:function(A){var T=this.getTarget(A);if(T)return T.dispatchEvent(A)},asyncDispatchEvent:function(A){requestAnimationFrame(this.dispatchEvent.bind(this,
A))}};G.boundHandler=G.eventHandler.bind(G);var L={shadow:function(A){if(A)return A.shadowRoot||A.webkitShadowRoot},canTarget:function(A){return A&&!!A.elementFromPoint},targetingShadow:function(A){A=this.shadow(A);if(this.canTarget(A))return A},olderShadow:function(A){var T=A.olderShadowRoot;T||(A=A.querySelector("shadow"))&&(T=A.olderShadowRoot);return T},allShadows:function(A){var T=[];for(A=this.shadow(A);A;)T.push(A),A=this.olderShadow(A);return T},searchRoot:function(A,T,oa){if(A){var ma,rb=
A.elementFromPoint(T,oa);for(ma=this.targetingShadow(rb);ma;){if(A=ma.elementFromPoint(T,oa))return ma=this.targetingShadow(A),this.searchRoot(ma,T,oa)||A;ma=this.olderShadow(ma)}return rb}},owner:function(A){for(;A.parentNode;)A=A.parentNode;return A.nodeType!==Node.DOCUMENT_NODE&&A.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(A=document),A},findTarget:function(A){var T=A.clientX,oa=A.clientY;A=this.owner(A.target);return A.elementFromPoint(T,oa)||(A=document),this.searchRoot(A,T,oa)}},O=Array.prototype.forEach.call.bind(Array.prototype.forEach),
N=Array.prototype.map.call.bind(Array.prototype.map),ea=Array.prototype.slice.call.bind(Array.prototype.slice),Y=Array.prototype.filter.call.bind(Array.prototype.filter),ka=window.MutationObserver||window.WebKitMutationObserver,ha={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};d.prototype={watchSubtree:function(A){this.observer&&L.canTarget(A)&&this.observer.observe(A,ha)},enableOnSubtree:function(A){this.watchSubtree(A);A===document&&"complete"!==document.readyState?
this.installOnLoad():this.installNewSubtree(A)},installNewSubtree:function(A){O(this.findElements(A),this.addElement,this)},findElements:function(A){return A.querySelectorAll?A.querySelectorAll("[touch-action]"):[]},removeElement:function(A){this.removeCallback(A)},addElement:function(A){this.addCallback(A)},elementChanged:function(A,T){this.changedCallback(A,T)},concatLists:function(A,T){return A.concat(ea(T))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===
document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(A){return A.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(A){var T=N(A,this.findElements,this);return T.push(Y(A,this.isElement)),T.reduce(this.concatLists,[])},mutationWatcher:function(A){A.forEach(this.mutationHandler,this)},mutationHandler:function(A){"childList"===A.type?(this.flattenMutationTree(A.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(A.removedNodes).forEach(this.removeElement,
this)):"attributes"===A.type&&this.elementChanged(A.target,A.oldValue)}};var qa=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],Da="",La=window.PointerEvent||window.MSPointerEvent,Ka=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,V=G.pointermap,Na=[1,4,2,8,16],ya=!1;try{ya=1===(new MouseEvent("test",{buttons:1})).buttons}catch(A){}var wb={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(A){G.listen(A,
this.events)},unregister:function(A){G.unlisten(A,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(A){var T,oa=this.lastTouches,ma=A.clientX;A=A.clientY;for(var rb=0,zb=oa.length;rb<zb&&(T=oa[rb]);rb++){var dc=Math.abs(A-T.y);if(25>=Math.abs(ma-T.x)&&25>=dc)return!0}},prepareEvent:function(A){var T=G.cloneEvent(A),oa=T.preventDefault;return T.preventDefault=function(){A.preventDefault();oa()},T.pointerId=this.POINTER_ID,T.isPrimary=!0,T.pointerType=this.POINTER_TYPE,T},prepareButtonsForMove:function(A,
T){var oa=V.get(this.POINTER_ID);0!==T.which&&oa?A.buttons=oa.buttons:A.buttons=0;T.buttons=A.buttons},mousedown:function(A){if(!this.isEventSimulatedFromTouch(A)){var T=V.get(this.POINTER_ID),oa=this.prepareEvent(A);ya||(oa.buttons=Na[oa.button],T&&(oa.buttons|=T.buttons),A.buttons=oa.buttons);V.set(this.POINTER_ID,A);T&&0!==T.buttons?G.move(oa):G.down(oa)}},mousemove:function(A){if(!this.isEventSimulatedFromTouch(A)){var T=this.prepareEvent(A);ya||this.prepareButtonsForMove(T,A);T.button=-1;V.set(this.POINTER_ID,
A);G.move(T)}},mouseup:function(A){if(!this.isEventSimulatedFromTouch(A)){var T=V.get(this.POINTER_ID),oa=this.prepareEvent(A);if(!ya){var ma=Na[oa.button];oa.buttons=T?T.buttons&~ma:0;A.buttons=oa.buttons}V.set(this.POINTER_ID,A);oa.buttons&=~Na[oa.button];0===oa.buttons?G.up(oa):G.move(oa)}},mouseover:function(A){if(!this.isEventSimulatedFromTouch(A)){var T=this.prepareEvent(A);ya||this.prepareButtonsForMove(T,A);T.button=-1;V.set(this.POINTER_ID,A);G.enterOver(T)}},mouseout:function(A){if(!this.isEventSimulatedFromTouch(A)){var T=
this.prepareEvent(A);ya||this.prepareButtonsForMove(T,A);T.button=-1;G.leaveOut(T)}},cancel:function(A){A=this.prepareEvent(A);G.cancel(A);this.deactivateMouse()},deactivateMouse:function(){V.delete(this.POINTER_ID)}},ib=G.captureInfo,Tb=L.findTarget.bind(L),Fb=L.allShadows.bind(L),Sa=G.pointermap,sc={events:["touchstart","touchmove","touchend","touchcancel"],register:function(A){cc.enableOnSubtree(A)},unregister:function(){},elementAdded:function(A){var T=A.getAttribute("touch-action"),oa=this.touchActionToScrollType(T);
oa&&(A._scrollType=oa,G.listen(A,this.events),Fb(A).forEach(function(ma){ma._scrollType=oa;G.listen(ma,this.events)},this))},elementRemoved:function(A){A._scrollType=void 0;G.unlisten(A,this.events);Fb(A).forEach(function(T){T._scrollType=void 0;G.unlisten(T,this.events)},this)},elementChanged:function(A,T){var oa=A.getAttribute("touch-action"),ma=this.touchActionToScrollType(oa);T=this.touchActionToScrollType(T);ma&&T?(A._scrollType=ma,Fb(A).forEach(function(rb){rb._scrollType=ma},this)):T?this.elementRemoved(A):
ma&&this.elementAdded(A)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(A){var T=this.scrollTypes;return"none"===A?"none":A===T.XSCROLLER?"X":A===T.YSCROLLER?"Y":T.SCROLLER.exec(A)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(A){return this.firstTouch===A.identifier},setPrimaryTouch:function(A){(0===Sa.size||1===Sa.size&&Sa.has(1))&&(this.firstTouch=A.identifier,this.firstXY=
{X:A.clientX,Y:A.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(A){A.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var A=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(A,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(A){var T=0;return("touchstart"===A||"touchmove"===A)&&(T=1),T},touchToPointer:function(A){var T=
this.currentTouchEvent,oa=G.cloneEvent(A),ma=oa.pointerId=A.identifier+2;oa.target=ib[ma]||Tb(oa);oa.bubbles=!0;oa.cancelable=!0;oa.detail=this.clickCount;oa.button=0;oa.buttons=this.typeToButtons(T.type);oa.width=2*(A.radiusX||A.webkitRadiusX||0);oa.height=2*(A.radiusY||A.webkitRadiusY||0);oa.pressure=A.force||A.webkitForce||.5;oa.isPrimary=this.isPrimaryTouch(A);oa.pointerType=this.POINTER_TYPE;oa.altKey=T.altKey;oa.ctrlKey=T.ctrlKey;oa.metaKey=T.metaKey;oa.shiftKey=T.shiftKey;var rb=this;return oa.preventDefault=
function(){rb.scrolling=!1;rb.firstXY=null;T.preventDefault()},oa},processTouches:function(A,T){var oa=A.changedTouches;this.currentTouchEvent=A;for(var ma=0;ma<oa.length;ma++)A=oa[ma],T.call(this,this.touchToPointer(A))},shouldScroll:function(A){if(this.firstXY){var T=A.currentTarget._scrollType;if("none"===T)T=!1;else if("XY"===T)T=!0;else{A=A.changedTouches[0];var oa="Y"===T?"X":"Y";T=Math.abs(A["client"+T]-this.firstXY[T])>=Math.abs(A["client"+oa]-this.firstXY[oa])}return this.firstXY=null,T}},
findTouch:function(A,T){for(var oa,ma=0,rb=A.length;ma<rb&&(oa=A[ma]);ma++)if(oa.identifier===T)return!0},vacuumTouches:function(A){var T=A.touches;if(Sa.size>=T.length){var oa=[];Sa.forEach(function(ma,rb){1===rb||this.findTouch(T,rb-2)||oa.push(ma.out)},this);oa.forEach(this.cancelOut,this)}},touchstart:function(A){this.vacuumTouches(A);this.setPrimaryTouch(A.changedTouches[0]);this.dedupSynthMouse(A);this.scrolling||(this.clickCount++,this.processTouches(A,this.overDown))},overDown:function(A){Sa.set(A.pointerId,
{target:A.target,out:A,outTarget:A.target});G.enterOver(A);G.down(A)},touchmove:function(A){this.scrolling||(this.shouldScroll(A)?(this.scrolling=!0,this.touchcancel(A)):(A.preventDefault(),this.processTouches(A,this.moveOverOut)))},moveOverOut:function(A){var T=Sa.get(A.pointerId);if(T){var oa=T.out,ma=T.outTarget;G.move(A);oa&&ma!==A.target&&(oa.relatedTarget=A.target,A.relatedTarget=ma,oa.target=ma,A.target?(G.leaveOut(oa),G.enterOver(A)):(A.target=ma,A.relatedTarget=null,this.cancelOut(A)));T.out=
A;T.outTarget=A.target}},touchend:function(A){this.dedupSynthMouse(A);this.processTouches(A,this.upOut)},upOut:function(A){this.scrolling||(G.up(A),G.leaveOut(A));this.cleanUpPointer(A)},touchcancel:function(A){this.processTouches(A,this.cancelOut)},cancelOut:function(A){G.cancel(A);G.leaveOut(A);this.cleanUpPointer(A)},cleanUpPointer:function(A){Sa.delete(A.pointerId);this.removePrimaryPointer(A)},dedupSynthMouse:function(A){var T=wb.lastTouches;A=A.changedTouches[0];this.isPrimaryTouch(A)&&(A={x:A.clientX,
y:A.clientY},T.push(A),setTimeout(function(oa,ma){ma=oa.indexOf(ma);-1<ma&&oa.splice(ma,1)}.bind(null,T,A),2500))}};var cc=new d(sc.elementAdded,sc.elementRemoved,sc.elementChanged,sc);var Ca=G.pointermap,Z=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,za={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(A){G.listen(A,this.events)},unregister:function(A){G.unlisten(A,
this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(A){var T=A;return Z&&((T=G.cloneEvent(A)).pointerType=this.POINTER_TYPES[A.pointerType]),T},cleanup:function(A){Ca.delete(A)},MSPointerDown:function(A){Ca.set(A.pointerId,A);A=this.prepareEvent(A);G.down(A)},MSPointerMove:function(A){A=this.prepareEvent(A);G.move(A)},MSPointerUp:function(A){var T=this.prepareEvent(A);G.up(T);this.cleanup(A.pointerId)},MSPointerOut:function(A){A=this.prepareEvent(A);G.leaveOut(A)},
MSPointerOver:function(A){A=this.prepareEvent(A);G.enterOver(A)},MSPointerCancel:function(A){var T=this.prepareEvent(A);G.cancel(T);this.cleanup(A.pointerId)},MSLostPointerCapture:function(A){A=G.makeEvent("lostpointercapture",A);G.dispatchEvent(A)},MSGotPointerCapture:function(A){A=G.makeEvent("gotpointercapture",A);G.dispatchEvent(A)}};window.navigator.msPointerEnabled?(e=function(A){l(A);h(this);0!==G.pointermap.get(A).buttons&&(G.setCapture(A,this,!0),this.msSetPointerCapture(A))},g=function(A){l(A);
G.releaseCapture(A,!0);this.msReleasePointerCapture(A)}):(e=function(A){l(A);h(this);0!==G.pointermap.get(A).buttons&&G.setCapture(A,this)},g=function(A){l(A);G.releaseCapture(A)});n=function(A){return!!G.captureInfo[A]};(function(){if(La){qa.forEach(function(T){String(T)===T?(Da+=f(T)+k(T)+"\n",Ka&&(Da+=b(T)+k(T)+"\n")):(Da+=T.selectors.map(f)+k(T.rule)+"\n",Ka&&(Da+=T.selectors.map(b)+k(T.rule)+"\n"))});var A=document.createElement("style");A.textContent=Da;document.head.appendChild(A)}})();window.PointerEvent||
((window.PointerEvent=a,window.navigator.msPointerEnabled)?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),G.registerSource("ms",za)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),G.registerSource("mouse",wb),void 0!==window.ontouchstart&&G.registerSource("touch",sc)),G.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:e},
releasePointerCapture:{value:g},hasPointerCapture:{value:n}})})();Ba.prototype=Object.create(fa(Pc).prototype);Ba.prototype.constructor=Ba;Ba.UnsupportedBrowserException=function(a){this.message=a};Ba.UnsupportedBrowserException.prototype.toString=function(){var a="Sorry, your web browser does not support ChickenPaint.";return this.message?a+=" "+this.message:a+=" Please try a modern browser like Chrome, Safari, Firefox, or Edge.",a};Ba.M_DRAW=0;Ba.M_FLOODFILL=1;Ba.M_RECT_SELECTION=2;Ba.M_MOVE_TOOL=
3;Ba.M_ROTATE_CANVAS=4;Ba.M_COLOR_PICKER=5;Ba.M_GRADIENTFILL=6;Ba.M_TRANSFORM=7;Ba.M_PAN_CANVAS=8;Ba.T_PENCIL=0;Ba.T_ERASER=1;Ba.T_PEN=2;Ba.T_SOFTERASER=3;Ba.T_AIRBRUSH=4;Ba.T_DODGE=5;Ba.T_BURN=6;Ba.T_WATER=7;Ba.T_BLUR=8;Ba.T_SMUDGE=9;Ba.T_BLENDER=10;Ba.T_MAX=11;Ba.COLOR_MODE_RGB=0;Ba.COLOR_MODE_GREYSCALE=1;window.ChickenPaint=Ba;window.bootstrap=Jo}();
